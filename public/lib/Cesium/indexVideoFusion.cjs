/**
 * @license
 * Cesium - https://github.com/CesiumGS/cesium
 * Version 1.105.2
 *
 * Copyright 2011-2022 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for full licensing details.
 */

var MC=Object.create;var $s=Object.defineProperty;var NC=Object.getOwnPropertyDescriptor;var LC=Object.getOwnPropertyNames;var zC=Object.getPrototypeOf,BC=Object.prototype.hasOwnProperty;var Ve=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),FC=(e,t)=>{for(var n in t)$s(e,n,{get:t[n],enumerable:!0})},Kf=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of LC(t))!BC.call(e,o)&&o!==n&&$s(e,o,{get:()=>t[o],enumerable:!(i=NC(t,o))||i.enumerable});return e};var Ct=(e,t,n)=>(n=e!=null?MC(zC(e)):{},Kf(t||!e||!e.__esModule?$s(n,"default",{value:e,enumerable:!0}):n,e)),UC=e=>Kf($s({},"__esModule",{value:!0}),e);var sm=Ve((k2,am)=>{var rm=require("stream").Stream,b1=require("util");am.exports=hi;function hi(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}b1.inherits(hi,rm);hi.create=function(e,t){var n=new this;t=t||{};for(var i in t)n[i]=t[i];n.source=e;var o=e.emit;return e.emit=function(){return n._handleEmit(arguments),o.apply(e,arguments)},e.on("error",function(){}),n.pauseStream&&e.pause(),n};Object.defineProperty(hi.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});hi.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};hi.prototype.resume=function(){this._released||this.release(),this.source.resume()};hi.prototype.pause=function(){this.source.pause()};hi.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]};hi.prototype.pipe=function(){var e=rm.prototype.pipe.apply(this,arguments);return this.resume(),e};hi.prototype._handleEmit=function(e){if(this._released){this.emit.apply(this,e);return}e[0]==="data"&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e)};hi.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}}});var pm=Ve((V2,lm)=>{var x1=require("util"),um=require("stream").Stream,cm=sm();lm.exports=jt;function jt(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}x1.inherits(jt,um);jt.create=function(e){var t=new this;e=e||{};for(var n in e)t[n]=e[n];return t};jt.isStreamLike=function(e){return typeof e!="function"&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"&&!Buffer.isBuffer(e)};jt.prototype.append=function(e){var t=jt.isStreamLike(e);if(t){if(!(e instanceof cm)){var n=cm.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=n}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this};jt.prototype.pipe=function(e,t){return um.prototype.pipe.call(this,e,t),this.resume(),e};jt.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};jt.prototype._realGetNext=function(){var e=this._streams.shift();if(typeof e>"u"){this.end();return}if(typeof e!="function"){this._pipeNext(e);return}var t=e;t(function(n){var i=jt.isStreamLike(n);i&&(n.on("data",this._checkDataSize.bind(this)),this._handleErrors(n)),this._pipeNext(n)}.bind(this))};jt.prototype._pipeNext=function(e){this._currentStream=e;var t=jt.isStreamLike(e);if(t){e.on("end",this._getNext.bind(this)),e.pipe(this,{end:!1});return}var n=e;this.write(n),this._getNext()};jt.prototype._handleErrors=function(e){var t=this;e.on("error",function(n){t._emitError(n)})};jt.prototype.write=function(e){this.emit("data",e)};jt.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};jt.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};jt.prototype.end=function(){this._reset(),this.emit("end")};jt.prototype.destroy=function(){this._reset(),this.emit("close")};jt.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};jt.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}};jt.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach(function(t){t.dataSize&&(e.dataSize+=t.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};jt.prototype._emitError=function(e){this._reset(),this.emit("error",e)}});var dm=Ve((j2,E1)=>{E1.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var mm=Ve((G2,fm)=>{/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2022 Douglas Christopher Wilson
 * MIT Licensed
 */fm.exports=dm()});var _m=Ve(Fn=>{"use strict";/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var oc=mm(),C1=require("path").extname,hm=/^\s*([^;\s]*)(?:;|\s|$)/,T1=/^text\//i;Fn.charset=gm;Fn.charsets={lookup:gm};Fn.contentType=w1;Fn.extension=S1;Fn.extensions=Object.create(null);Fn.lookup=A1;Fn.types=Object.create(null);R1(Fn.extensions,Fn.types);function gm(e){if(!e||typeof e!="string")return!1;var t=hm.exec(e),n=t&&oc[t[1].toLowerCase()];return n&&n.charset?n.charset:t&&T1.test(t[1])?"UTF-8":!1}function w1(e){if(!e||typeof e!="string")return!1;var t=e.indexOf("/")===-1?Fn.lookup(e):e;if(!t)return!1;if(t.indexOf("charset")===-1){var n=Fn.charset(t);n&&(t+="; charset="+n.toLowerCase())}return t}function S1(e){if(!e||typeof e!="string")return!1;var t=hm.exec(e),n=t&&Fn.extensions[t[1].toLowerCase()];return!n||!n.length?!1:n[0]}function A1(e){if(!e||typeof e!="string")return!1;var t=C1("x."+e).toLowerCase().substr(1);return t&&Fn.types[t]||!1}function R1(e,t){var n=["nginx","apache",void 0,"iana"];Object.keys(oc).forEach(function(o){var r=oc[o],a=r.extensions;if(!(!a||!a.length)){e[o]=a;for(var s=0;s<a.length;s++){var u=a[s];if(t[u]){var l=n.indexOf(oc[t[u]].source),d=n.indexOf(r.source);if(t[u]!=="application/octet-stream"&&(l>d||l===d&&t[u].substr(0,12)==="application/"))continue}t[u]=o}}})}});var vm=Ve((q2,ym)=>{ym.exports=O1;function O1(e){var t=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;t?t(e):setTimeout(e,0)}});var _l=Ve((W2,xm)=>{var bm=vm();xm.exports=I1;function I1(e){var t=!1;return bm(function(){t=!0}),function(i,o){t?e(i,o):bm(function(){e(i,o)})}}});var yl=Ve((K2,Em)=>{Em.exports=P1;function P1(e){Object.keys(e.jobs).forEach(D1.bind(e)),e.jobs={}}function D1(e){typeof this.jobs[e]=="function"&&this.jobs[e]()}});var vl=Ve((Y2,Tm)=>{var Cm=_l(),M1=yl();Tm.exports=N1;function N1(e,t,n,i){var o=n.keyedList?n.keyedList[n.index]:n.index;n.jobs[o]=L1(t,o,e[o],function(r,a){o in n.jobs&&(delete n.jobs[o],r?M1(n):n.results[o]=a,i(r,n.results))})}function L1(e,t,n,i){var o;return e.length==2?o=e(n,Cm(i)):o=e(n,t,Cm(i)),o}});var bl=Ve((Z2,wm)=>{wm.exports=z1;function z1(e,t){var n=!Array.isArray(e),i={index:0,keyedList:n||t?Object.keys(e):null,jobs:{},results:n?{}:[],size:n?Object.keys(e).length:e.length};return t&&i.keyedList.sort(n?t:function(o,r){return t(e[o],e[r])}),i}});var xl=Ve((J2,Sm)=>{var B1=yl(),F1=_l();Sm.exports=U1;function U1(e){Object.keys(this.jobs).length&&(this.index=this.size,B1(this),F1(e)(null,this.results))}});var Rm=Ve((X2,Am)=>{var k1=vl(),V1=bl(),j1=xl();Am.exports=G1;function G1(e,t,n){for(var i=V1(e);i.index<(i.keyedList||e).length;)k1(e,t,i,function(o,r){if(o){n(o,r);return}if(Object.keys(i.jobs).length===0){n(null,i.results);return}}),i.index++;return j1.bind(i,n)}});var El=Ve(($2,rc)=>{var Om=vl(),H1=bl(),q1=xl();rc.exports=W1;rc.exports.ascending=Im;rc.exports.descending=K1;function W1(e,t,n,i){var o=H1(e,n);return Om(e,t,o,function r(a,s){if(a){i(a,s);return}if(o.index++,o.index<(o.keyedList||e).length){Om(e,t,o,r);return}i(null,o.results)}),q1.bind(o,i)}function Im(e,t){return e<t?-1:e>t?1:0}function K1(e,t){return-1*Im(e,t)}});var Dm=Ve((Q2,Pm)=>{var Y1=El();Pm.exports=Z1;function Z1(e,t,n){return Y1(e,t,null,n)}});var Nm=Ve((eM,Mm)=>{Mm.exports={parallel:Rm(),serial:Dm(),serialOrdered:El()}});var zm=Ve((tM,Lm)=>{Lm.exports=function(e,t){return Object.keys(t).forEach(function(n){e[n]=e[n]||t[n]}),e}});var Um=Ve((nM,Fm)=>{var Sl=pm(),Bm=require("util"),Cl=require("path"),J1=require("http"),X1=require("https"),$1=require("url").parse,Q1=require("fs"),eT=require("stream").Stream,Tl=_m(),tT=Nm(),wl=zm();Fm.exports=lt;Bm.inherits(lt,Sl);function lt(e){if(!(this instanceof lt))return new lt(e);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],Sl.call(this),e=e||{};for(var t in e)this[t]=e[t]}lt.LINE_BREAK=`\r
`;lt.DEFAULT_CONTENT_TYPE="application/octet-stream";lt.prototype.append=function(e,t,n){n=n||{},typeof n=="string"&&(n={filename:n});var i=Sl.prototype.append.bind(this);if(typeof t=="number"&&(t=""+t),Bm.isArray(t)){this._error(new Error("Arrays are not supported."));return}var o=this._multiPartHeader(e,t,n),r=this._multiPartFooter();i(o),i(t),i(r),this._trackLength(o,t,n)};lt.prototype._trackLength=function(e,t,n){var i=0;n.knownLength!=null?i+=+n.knownLength:Buffer.isBuffer(t)?i=t.length:typeof t=="string"&&(i=Buffer.byteLength(t)),this._valueLength+=i,this._overheadLength+=Buffer.byteLength(e)+lt.LINE_BREAK.length,!(!t||!t.path&&!(t.readable&&t.hasOwnProperty("httpVersion"))&&!(t instanceof eT))&&(n.knownLength||this._valuesToMeasure.push(t))};lt.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?e.end!=null&&e.end!=1/0&&e.start!=null?t(null,e.end+1-(e.start?e.start:0)):Q1.stat(e.path,function(n,i){var o;if(n){t(n);return}o=i.size-(e.start?e.start:0),t(null,o)}):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",function(n){e.pause(),t(null,+n.headers["content-length"])}),e.resume()):t("Unknown stream")};lt.prototype._multiPartHeader=function(e,t,n){if(typeof n.header=="string")return n.header;var i=this._getContentDisposition(t,n),o=this._getContentType(t,n),r="",a={"Content-Disposition":["form-data",'name="'+e+'"'].concat(i||[]),"Content-Type":[].concat(o||[])};typeof n.header=="object"&&wl(a,n.header);var s;for(var u in a)a.hasOwnProperty(u)&&(s=a[u],s!=null&&(Array.isArray(s)||(s=[s]),s.length&&(r+=u+": "+s.join("; ")+lt.LINE_BREAK)));return"--"+this.getBoundary()+lt.LINE_BREAK+r+lt.LINE_BREAK};lt.prototype._getContentDisposition=function(e,t){var n,i;return typeof t.filepath=="string"?n=Cl.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=Cl.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=Cl.basename(e.client._httpMessage.path||"")),n&&(i='filename="'+n+'"'),i};lt.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=Tl.lookup(e.name)),!n&&e.path&&(n=Tl.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),!n&&(t.filepath||t.filename)&&(n=Tl.lookup(t.filepath||t.filename)),!n&&typeof e=="object"&&(n=lt.DEFAULT_CONTENT_TYPE),n};lt.prototype._multiPartFooter=function(){return function(e){var t=lt.LINE_BREAK,n=this._streams.length===0;n&&(t+=this._lastBoundary()),e(t)}.bind(this)};lt.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+lt.LINE_BREAK};lt.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n};lt.prototype.setBoundary=function(e){this._boundary=e};lt.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};lt.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,i=this._streams.length;n<i;n++)typeof this._streams[n]!="function"&&(Buffer.isBuffer(this._streams[n])?e=Buffer.concat([e,this._streams[n]]):e=Buffer.concat([e,Buffer.from(this._streams[n])]),(typeof this._streams[n]!="string"||this._streams[n].substring(2,t.length+2)!==t)&&(e=Buffer.concat([e,Buffer.from(lt.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])};lt.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(Math.random()*10).toString(16);this._boundary=e};lt.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e};lt.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e};lt.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;if(this._streams.length&&(t+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(e.bind(this,null,t));return}tT.parallel(this._valuesToMeasure,this._lengthRetriever,function(n,i){if(n){e(n);return}i.forEach(function(o){t+=o}),e(null,t)})};lt.prototype.submit=function(e,t){var n,i,o={method:"post"};return typeof e=="string"?(e=$1(e),i=wl({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},o)):(i=wl(e,o),i.port||(i.port=i.protocol=="https:"?443:80)),i.headers=this.getHeaders(e.headers),i.protocol=="https:"?n=X1.request(i):n=J1.request(i),this.getLength(function(r,a){if(r&&r!=="Unknown stream"){this._error(r);return}if(a&&n.setHeader("Content-Length",a),this.pipe(n),t){var s,u=function(l,d){return n.removeListener("error",u),n.removeListener("response",s),t.call(this,l,d)};s=u.bind(this,null),n.on("error",u),n.on("response",s)}}.bind(this)),n};lt.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))};lt.prototype.toString=function(){return"[object FormData]"}});var Qm=Ve($m=>{"use strict";var gT=require("url").parse,_T={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},yT=String.prototype.endsWith||function(e){return e.length<=this.length&&this.indexOf(e,this.length-e.length)!==-1};function vT(e){var t=typeof e=="string"?gT(e):e||{},n=t.protocol,i=t.host,o=t.port;if(typeof i!="string"||!i||typeof n!="string"||(n=n.split(":",1)[0],i=i.replace(/:\d*$/,""),o=parseInt(o)||_T[n]||0,!bT(i,o)))return"";var r=Kr("npm_config_"+n+"_proxy")||Kr(n+"_proxy")||Kr("npm_config_proxy")||Kr("all_proxy");return r&&r.indexOf("://")===-1&&(r=n+"://"+r),r}function bT(e,t){var n=(Kr("npm_config_no_proxy")||Kr("no_proxy")).toLowerCase();return n?n==="*"?!1:n.split(/[,\s]/).every(function(i){if(!i)return!0;var o=i.match(/^(.+):(\d+)$/),r=o?o[1]:i,a=o?parseInt(o[2]):0;return a&&a!==t?!0:/^[.*]/.test(r)?(r.charAt(0)==="*"&&(r=r.slice(1)),!yT.call(e,r)):e!==r}):!0}function Kr(e){return process.env[e.toLowerCase()]||process.env[e.toUpperCase()]||""}$m.getProxyForUrl=vT});var th=Ve((iN,eh)=>{var Ha=1e3,qa=Ha*60,Wa=qa*60,Ka=Wa*24,xT=Ka*365.25;eh.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return ET(e);if(n==="number"&&isNaN(e)===!1)return t.long?TT(e):CT(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function ET(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*xT;case"days":case"day":case"d":return n*Ka;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Wa;case"minutes":case"minute":case"mins":case"min":case"m":return n*qa;case"seconds":case"second":case"secs":case"sec":case"s":return n*Ha;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function CT(e){return e>=Ka?Math.round(e/Ka)+"d":e>=Wa?Math.round(e/Wa)+"h":e>=qa?Math.round(e/qa)+"m":e>=Ha?Math.round(e/Ha)+"s":e+"ms"}function TT(e){return lc(e,Ka,"day")||lc(e,Wa,"hour")||lc(e,qa,"minute")||lc(e,Ha,"second")||e+" ms"}function lc(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}});var zl=Ve((_t,nh)=>{_t=nh.exports=Ll.debug=Ll.default=Ll;_t.coerce=OT;_t.disable=AT;_t.enable=ST;_t.enabled=RT;_t.humanize=th();_t.names=[];_t.skips=[];_t.formatters={};var Nl;function wT(e){var t=0,n;for(n in e)t=(t<<5)-t+e.charCodeAt(n),t|=0;return _t.colors[Math.abs(t)%_t.colors.length]}function Ll(e){function t(){if(t.enabled){var n=t,i=+new Date,o=i-(Nl||i);n.diff=o,n.prev=Nl,n.curr=i,Nl=i;for(var r=new Array(arguments.length),a=0;a<r.length;a++)r[a]=arguments[a];r[0]=_t.coerce(r[0]),typeof r[0]!="string"&&r.unshift("%O");var s=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(l,d){if(l==="%%")return l;s++;var f=_t.formatters[d];if(typeof f=="function"){var g=r[s];l=f.call(n,g),r.splice(s,1),s--}return l}),_t.formatArgs.call(n,r);var u=t.log||_t.log||console.log.bind(console);u.apply(n,r)}}return t.namespace=e,t.enabled=_t.enabled(e),t.useColors=_t.useColors(),t.color=wT(e),typeof _t.init=="function"&&_t.init(t),t}function ST(e){_t.save(e),_t.names=[],_t.skips=[];for(var t=(typeof e=="string"?e:"").split(/[\s,]+/),n=t.length,i=0;i<n;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),e[0]==="-"?_t.skips.push(new RegExp("^"+e.substr(1)+"$")):_t.names.push(new RegExp("^"+e+"$")))}function AT(){_t.enable("")}function RT(e){var t,n;for(t=0,n=_t.skips.length;t<n;t++)if(_t.skips[t].test(e))return!1;for(t=0,n=_t.names.length;t<n;t++)if(_t.names[t].test(e))return!0;return!1}function OT(e){return e instanceof Error?e.stack||e.message:e}});var rh=Ve((On,oh)=>{On=oh.exports=zl();On.log=DT;On.formatArgs=PT;On.save=MT;On.load=ih;On.useColors=IT;On.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:NT();On.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function IT(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}On.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function PT(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+On.humanize(this.diff),!!t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(r){r!=="%%"&&(i++,r==="%c"&&(o=i))}),e.splice(o,0,n)}}function DT(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function MT(e){try{e==null?On.storage.removeItem("debug"):On.storage.debug=e}catch{}}function ih(){var e;try{e=On.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}On.enable(ih());function NT(){try{return window.localStorage}catch{}}});var uh=Ve((on,ch)=>{var ah=require("tty"),Ya=require("util");on=ch.exports=zl();on.init=VT;on.log=FT;on.formatArgs=BT;on.save=UT;on.load=sh;on.useColors=zT;on.colors=[6,2,3,4,5,1];on.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(o,r){return r.toUpperCase()}),i=process.env[t];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),e[n]=i,e},{});var Yr=parseInt(process.env.DEBUG_FD,10)||2;Yr!==1&&Yr!==2&&Ya.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var LT=Yr===1?process.stdout:Yr===2?process.stderr:kT(Yr);function zT(){return"colors"in on.inspectOpts?!!on.inspectOpts.colors:ah.isatty(Yr)}on.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,Ya.inspect(e,this.inspectOpts).split(`
`).map(function(t){return t.trim()}).join(" ")};on.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,Ya.inspect(e,this.inspectOpts)};function BT(e){var t=this.namespace,n=this.useColors;if(n){var i=this.color,o="  \x1B[3"+i+";1m"+t+" \x1B[0m";e[0]=o+e[0].split(`
`).join(`
`+o),e.push("\x1B[3"+i+"m+"+on.humanize(this.diff)+"\x1B[0m")}else e[0]=new Date().toUTCString()+" "+t+" "+e[0]}function FT(){return LT.write(Ya.format.apply(Ya,arguments)+`
`)}function UT(e){e==null?delete process.env.DEBUG:process.env.DEBUG=e}function sh(){return process.env.DEBUG}function kT(e){var t,n=process.binding("tty_wrap");switch(n.guessHandleType(e)){case"TTY":t=new ah.WriteStream(e),t._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var i=require("fs");t=new i.SyncWriteStream(e,{autoClose:!1}),t._type="fs";break;case"PIPE":case"TCP":var o=require("net");t=new o.Socket({fd:e,readable:!1,writable:!0}),t.readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}function VT(e){e.inspectOpts={};for(var t=Object.keys(on.inspectOpts),n=0;n<t.length;n++)e.inspectOpts[t[n]]=on.inspectOpts[t[n]]}on.enable(sh())});var lh=Ve((oN,Bl)=>{typeof process<"u"&&process.type==="renderer"?Bl.exports=rh():Bl.exports=uh()});var dh=Ve((rN,ph)=>{var Za;ph.exports=function(){if(!Za){try{Za=lh()("follow-redirects")}catch{}typeof Za!="function"&&(Za=function(){})}Za.apply(null,arguments)}});var bh=Ve((aN,jl)=>{var tr=require("url"),Fl=tr.URL,jT=require("http"),GT=require("https"),hh=require("stream").Writable,gh=require("assert"),_h=dh(),kl=["abort","aborted","connect","error","socket","timeout"],Vl=Object.create(null);kl.forEach(function(e){Vl[e]=function(t,n,i){this._redirectable.emit(e,t,n,i)}});var HT=Xa("ERR_INVALID_URL","Invalid URL",TypeError),fh=Xa("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),qT=Xa("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),WT=Xa("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),KT=Xa("ERR_STREAM_WRITE_AFTER_END","write after end");function Yn(e,t){hh.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(i){n._processResponse(i)},this._performRequest()}Yn.prototype=Object.create(hh.prototype);Yn.prototype.abort=function(){vh(this._currentRequest),this.emit("abort")};Yn.prototype.write=function(e,t,n){if(this._ending)throw new KT;if(!nr(e)&&!JT(e))throw new TypeError("data should be a string, Buffer or Uint8Array");if(Ja(t)&&(n=t,t=null),e.length===0){n&&n();return}this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new WT),this.abort())};Yn.prototype.end=function(e,t,n){if(Ja(e)?(n=e,e=t=null):Ja(t)&&(n=t,t=null),!e)this._ended=this._ending=!0,this._currentRequest.end(null,null,n);else{var i=this,o=this._currentRequest;this.write(e,t,function(){i._ended=!0,o.end(null,null,n)}),this._ending=!0}};Yn.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)};Yn.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)};Yn.prototype.setTimeout=function(e,t){var n=this;function i(a){a.setTimeout(e),a.removeListener("timeout",a.destroy),a.addListener("timeout",a.destroy)}function o(a){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.emit("timeout"),r()},e),i(a)}function r(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",r),n.removeListener("error",r),n.removeListener("response",r),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",o)}return t&&this.on("timeout",t),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",i),this.on("abort",r),this.on("error",r),this.on("response",r),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){Yn.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}});["aborted","connection","socket"].forEach(function(e){Object.defineProperty(Yn.prototype,e,{get:function(){return this._currentRequest[e]}})});Yn.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}};Yn.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t){this.emit("error",new TypeError("Unsupported protocol "+e));return}if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var i=this._currentRequest=t.request(this._options,this._onNativeResponse);i._redirectable=this;for(var o of kl)i.on(o,Vl[o]);if(this._currentUrl=/^\//.test(this._options.path)?tr.format(this._options):this._options.path,this._isRedirect){var r=0,a=this,s=this._requestBodyBuffers;(function u(l){if(i===a._currentRequest)if(l)a.emit("error",l);else if(r<s.length){var d=s[r++];i.finished||i.write(d.data,d.encoding,u)}else a._ended&&i.end()})()}};Yn.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n=e.headers.location;if(!n||this._options.followRedirects===!1||t<300||t>=400){e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[];return}if(vh(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new qT);return}var i,o=this._options.beforeRedirect;o&&(i=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var r=this._options.method;((t===301||t===302)&&this._options.method==="POST"||t===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Ul(/^content-/i,this._options.headers));var a=Ul(/^host$/i,this._options.headers),s=tr.parse(this._currentUrl),u=a||s.host,l=/^\w+:/.test(n)?this._currentUrl:tr.format(Object.assign(s,{host:u})),d;try{d=tr.resolve(l,n)}catch(x){this.emit("error",new fh({cause:x}));return}_h("redirecting to",d),this._isRedirect=!0;var f=tr.parse(d);if(Object.assign(this._options,f),(f.protocol!==s.protocol&&f.protocol!=="https:"||f.host!==u&&!ZT(f.host,u))&&Ul(/^(?:authorization|cookie)$/i,this._options.headers),Ja(o)){var g={headers:e.headers,statusCode:t},b={url:l,method:r,headers:i};try{o(this._options,g,b)}catch(x){this.emit("error",x);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(x){this.emit("error",new fh({cause:x}))}};function yh(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach(function(i){var o=i+":",r=n[o]=e[i],a=t[i]=Object.create(r);function s(l,d,f){if(nr(l)){var g;try{g=mh(new Fl(l))}catch{g=tr.parse(l)}if(!nr(g.protocol))throw new HT({input:l});l=g}else Fl&&l instanceof Fl?l=mh(l):(f=d,d=l,l={protocol:o});return Ja(d)&&(f=d,d=null),d=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},l,d),d.nativeProtocols=n,!nr(d.host)&&!nr(d.hostname)&&(d.hostname="::1"),gh.equal(d.protocol,o,"protocol mismatch"),_h("options",d),new Yn(d,f)}function u(l,d,f){var g=a.request(l,d,f);return g.end(),g}Object.defineProperties(a,{request:{value:s,configurable:!0,enumerable:!0,writable:!0},get:{value:u,configurable:!0,enumerable:!0,writable:!0}})}),t}function YT(){}function mh(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return e.port!==""&&(t.port=Number(e.port)),t}function Ul(e,t){var n;for(var i in t)e.test(i)&&(n=t[i],delete t[i]);return n===null||typeof n>"u"?void 0:String(n).trim()}function Xa(e,t,n){function i(o){Error.captureStackTrace(this,this.constructor),Object.assign(this,o||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return i.prototype=new(n||Error),i.prototype.constructor=i,i.prototype.name="Error ["+e+"]",i}function vh(e){for(var t of kl)e.removeListener(t,Vl[t]);e.on("error",YT),e.abort()}function ZT(e,t){gh(nr(e)&&nr(t));var n=e.length-t.length-1;return n>0&&e[n]==="."&&e.endsWith(t)}function nr(e){return typeof e=="string"||e instanceof String}function Ja(e){return typeof e=="function"}function JT(e){return typeof e=="object"&&"length"in e}jl.exports=yh({http:jT,https:GT});jl.exports.wrap=yh});var $h=Ve((Ez,Xh)=>{"use strict";Xh.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var o=42;t[n]=o;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var r=Object.getOwnPropertySymbols(t);if(r.length!==1||r[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,n);if(a.value!==o||a.enumerable!==!0)return!1}return!0}});var tg=Ve((Cz,eg)=>{"use strict";var Qh=typeof Symbol<"u"&&Symbol,hw=$h();eg.exports=function(){return typeof Qh!="function"||typeof Symbol!="function"||typeof Qh("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hw()}});var og=Ve((Tz,ig)=>{"use strict";var ng={foo:{}},gw=Object;ig.exports=function(){return{__proto__:ng}.foo===ng.foo&&!({__proto__:null}instanceof gw)}});var ag=Ve((wz,rg)=>{"use strict";var _w="Function.prototype.bind called on incompatible ",Ql=Array.prototype.slice,yw=Object.prototype.toString,vw="[object Function]";rg.exports=function(t){var n=this;if(typeof n!="function"||yw.call(n)!==vw)throw new TypeError(_w+n);for(var i=Ql.call(arguments,1),o,r=function(){if(this instanceof o){var d=n.apply(this,i.concat(Ql.call(arguments)));return Object(d)===d?d:this}else return n.apply(t,i.concat(Ql.call(arguments)))},a=Math.max(0,n.length-i.length),s=[],u=0;u<a;u++)s.push("$"+u);if(o=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(r),n.prototype){var l=function(){};l.prototype=n.prototype,o.prototype=new l,l.prototype=null}return o}});var _c=Ve((Sz,sg)=>{"use strict";var bw=ag();sg.exports=Function.prototype.bind||bw});var ug=Ve((Az,cg)=>{"use strict";var xw=_c();cg.exports=xw.call(Function.call,Object.prototype.hasOwnProperty)});var bc=Ve((Rz,mg)=>{"use strict";var it,ea=SyntaxError,fg=Function,Qr=TypeError,ep=function(e){try{return fg('"use strict"; return ('+e+").constructor;")()}catch{}},rr=Object.getOwnPropertyDescriptor;if(rr)try{rr({},"")}catch{rr=null}var tp=function(){throw new Qr},Ew=rr?function(){try{return arguments.callee,tp}catch{try{return rr(arguments,"callee").get}catch{return tp}}}():tp,Xr=tg()(),Cw=og()(),rn=Object.getPrototypeOf||(Cw?function(e){return e.__proto__}:null),$r={},Tw=typeof Uint8Array>"u"||!rn?it:rn(Uint8Array),ar={"%AggregateError%":typeof AggregateError>"u"?it:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?it:ArrayBuffer,"%ArrayIteratorPrototype%":Xr&&rn?rn([][Symbol.iterator]()):it,"%AsyncFromSyncIteratorPrototype%":it,"%AsyncFunction%":$r,"%AsyncGenerator%":$r,"%AsyncGeneratorFunction%":$r,"%AsyncIteratorPrototype%":$r,"%Atomics%":typeof Atomics>"u"?it:Atomics,"%BigInt%":typeof BigInt>"u"?it:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?it:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?it:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?it:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?it:Float32Array,"%Float64Array%":typeof Float64Array>"u"?it:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?it:FinalizationRegistry,"%Function%":fg,"%GeneratorFunction%":$r,"%Int8Array%":typeof Int8Array>"u"?it:Int8Array,"%Int16Array%":typeof Int16Array>"u"?it:Int16Array,"%Int32Array%":typeof Int32Array>"u"?it:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Xr&&rn?rn(rn([][Symbol.iterator]())):it,"%JSON%":typeof JSON=="object"?JSON:it,"%Map%":typeof Map>"u"?it:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Xr||!rn?it:rn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?it:Promise,"%Proxy%":typeof Proxy>"u"?it:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?it:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?it:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Xr||!rn?it:rn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?it:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Xr&&rn?rn(""[Symbol.iterator]()):it,"%Symbol%":Xr?Symbol:it,"%SyntaxError%":ea,"%ThrowTypeError%":Ew,"%TypedArray%":Tw,"%TypeError%":Qr,"%Uint8Array%":typeof Uint8Array>"u"?it:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?it:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?it:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?it:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?it:WeakMap,"%WeakRef%":typeof WeakRef>"u"?it:WeakRef,"%WeakSet%":typeof WeakSet>"u"?it:WeakSet};if(rn)try{null.error}catch(e){lg=rn(rn(e)),ar["%Error.prototype%"]=lg}var lg,ww=function e(t){var n;if(t==="%AsyncFunction%")n=ep("async function () {}");else if(t==="%GeneratorFunction%")n=ep("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=ep("async function* () {}");else if(t==="%AsyncGenerator%"){var i=e("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&rn&&(n=rn(o.prototype))}return ar[t]=n,n},pg={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ns=_c(),yc=ug(),Sw=ns.call(Function.call,Array.prototype.concat),Aw=ns.call(Function.apply,Array.prototype.splice),dg=ns.call(Function.call,String.prototype.replace),vc=ns.call(Function.call,String.prototype.slice),Rw=ns.call(Function.call,RegExp.prototype.exec),Ow=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Iw=/\\(\\)?/g,Pw=function(t){var n=vc(t,0,1),i=vc(t,-1);if(n==="%"&&i!=="%")throw new ea("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new ea("invalid intrinsic syntax, expected opening `%`");var o=[];return dg(t,Ow,function(r,a,s,u){o[o.length]=s?dg(u,Iw,"$1"):a||r}),o},Dw=function(t,n){var i=t,o;if(yc(pg,i)&&(o=pg[i],i="%"+o[0]+"%"),yc(ar,i)){var r=ar[i];if(r===$r&&(r=ww(i)),typeof r>"u"&&!n)throw new Qr("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:i,value:r}}throw new ea("intrinsic "+t+" does not exist!")};mg.exports=function(t,n){if(typeof t!="string"||t.length===0)throw new Qr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Qr('"allowMissing" argument must be a boolean');if(Rw(/^%?[^%]*%?$/,t)===null)throw new ea("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Pw(t),o=i.length>0?i[0]:"",r=Dw("%"+o+"%",n),a=r.name,s=r.value,u=!1,l=r.alias;l&&(o=l[0],Aw(i,Sw([0,1],l)));for(var d=1,f=!0;d<i.length;d+=1){var g=i[d],b=vc(g,0,1),x=vc(g,-1);if((b==='"'||b==="'"||b==="`"||x==='"'||x==="'"||x==="`")&&b!==x)throw new ea("property names with quotes must have matching quotes");if((g==="constructor"||!f)&&(u=!0),o+="."+g,a="%"+o+"%",yc(ar,a))s=ar[a];else if(s!=null){if(!(g in s)){if(!n)throw new Qr("base intrinsic for "+t+" exists, but the property is not available.");return}if(rr&&d+1>=i.length){var T=rr(s,g);f=!!T,f&&"get"in T&&!("originalValue"in T.get)?s=T.get:s=s[g]}else f=yc(s,g),s=s[g];f&&!u&&(ar[a]=s)}}return s}});var bg=Ve((Oz,xc)=>{"use strict";var np=_c(),ta=bc(),_g=ta("%Function.prototype.apply%"),yg=ta("%Function.prototype.call%"),vg=ta("%Reflect.apply%",!0)||np.call(yg,_g),hg=ta("%Object.getOwnPropertyDescriptor%",!0),sr=ta("%Object.defineProperty%",!0),Mw=ta("%Math.max%");if(sr)try{sr({},"a",{value:1})}catch{sr=null}xc.exports=function(t){var n=vg(np,yg,arguments);if(hg&&sr){var i=hg(n,"length");i.configurable&&sr(n,"length",{value:1+Mw(0,t.length-(arguments.length-1))})}return n};var gg=function(){return vg(np,_g,arguments)};sr?sr(xc.exports,"apply",{value:gg}):xc.exports.apply=gg});var Tg=Ve((Iz,Cg)=>{"use strict";var xg=bc(),Eg=bg(),Nw=Eg(xg("String.prototype.indexOf"));Cg.exports=function(t,n){var i=xg(t,!!n);return typeof i=="function"&&Nw(t,".prototype.")>-1?Eg(i):i}});var Sg=Ve((Pz,wg)=>{wg.exports=require("util").inspect});var Wg=Ve((Dz,qg)=>{var dp=typeof Map=="function"&&Map.prototype,ip=Object.getOwnPropertyDescriptor&&dp?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Cc=dp&&ip&&typeof ip.get=="function"?ip.get:null,Ag=dp&&Map.prototype.forEach,fp=typeof Set=="function"&&Set.prototype,op=Object.getOwnPropertyDescriptor&&fp?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Tc=fp&&op&&typeof op.get=="function"?op.get:null,Rg=fp&&Set.prototype.forEach,Lw=typeof WeakMap=="function"&&WeakMap.prototype,os=Lw?WeakMap.prototype.has:null,zw=typeof WeakSet=="function"&&WeakSet.prototype,rs=zw?WeakSet.prototype.has:null,Bw=typeof WeakRef=="function"&&WeakRef.prototype,Og=Bw?WeakRef.prototype.deref:null,Fw=Boolean.prototype.valueOf,Uw=Object.prototype.toString,kw=Function.prototype.toString,Vw=String.prototype.match,mp=String.prototype.slice,Oo=String.prototype.replace,jw=String.prototype.toUpperCase,Ig=String.prototype.toLowerCase,Ug=RegExp.prototype.test,Pg=Array.prototype.concat,Ni=Array.prototype.join,Gw=Array.prototype.slice,Dg=Math.floor,sp=typeof BigInt=="function"?BigInt.prototype.valueOf:null,rp=Object.getOwnPropertySymbols,cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,na=typeof Symbol=="function"&&typeof Symbol.iterator=="object",bn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===na||"symbol")?Symbol.toStringTag:null,kg=Object.prototype.propertyIsEnumerable,Mg=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function Ng(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||Ug.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var i=e<0?-Dg(-e):Dg(e);if(i!==e){var o=String(i),r=mp.call(t,o.length+1);return Oo.call(o,n,"$&_")+"."+Oo.call(Oo.call(r,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Oo.call(t,n,"$&_")}var up=Sg(),Lg=up.custom,zg=jg(Lg)?Lg:null;qg.exports=function e(t,n,i,o){var r=n||{};if(Ro(r,"quoteStyle")&&r.quoteStyle!=="single"&&r.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ro(r,"maxStringLength")&&(typeof r.maxStringLength=="number"?r.maxStringLength<0&&r.maxStringLength!==1/0:r.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Ro(r,"customInspect")?r.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ro(r,"indent")&&r.indent!==null&&r.indent!=="	"&&!(parseInt(r.indent,10)===r.indent&&r.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ro(r,"numericSeparator")&&typeof r.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=r.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Hg(t,r);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return s?Ng(t,u):u}if(typeof t=="bigint"){var l=String(t)+"n";return s?Ng(t,l):l}var d=typeof r.depth>"u"?5:r.depth;if(typeof i>"u"&&(i=0),i>=d&&d>0&&typeof t=="object")return lp(t)?"[Array]":"[Object]";var f=sS(r,i);if(typeof o>"u")o=[];else if(Gg(o,t)>=0)return"[Circular]";function g(w,P,B){if(P&&(o=Gw.call(o),o.push(P)),B){var Y={depth:r.depth};return Ro(r,"quoteStyle")&&(Y.quoteStyle=r.quoteStyle),e(w,Y,i+1,o)}return e(w,r,i+1,o)}if(typeof t=="function"&&!Bg(t)){var b=$w(t),x=Ec(t,g);return"[Function"+(b?": "+b:" (anonymous)")+"]"+(x.length>0?" { "+Ni.call(x,", ")+" }":"")}if(jg(t)){var T=na?Oo.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):cp.call(t);return typeof t=="object"&&!na?is(T):T}if(oS(t)){for(var R="<"+Ig.call(String(t.nodeName)),D=t.attributes||[],M=0;M<D.length;M++)R+=" "+D[M].name+"="+Vg(Hw(D[M].value),"double",r);return R+=">",t.childNodes&&t.childNodes.length&&(R+="..."),R+="</"+Ig.call(String(t.nodeName))+">",R}if(lp(t)){if(t.length===0)return"[]";var N=Ec(t,g);return f&&!aS(N)?"["+pp(N,f)+"]":"[ "+Ni.call(N,", ")+" ]"}if(Ww(t)){var V=Ec(t,g);return!("cause"in Error.prototype)&&"cause"in t&&!kg.call(t,"cause")?"{ ["+String(t)+"] "+Ni.call(Pg.call("[cause]: "+g(t.cause),V),", ")+" }":V.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Ni.call(V,", ")+" }"}if(typeof t=="object"&&a){if(zg&&typeof t[zg]=="function"&&up)return up(t,{depth:d-i});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Qw(t)){var q=[];return Ag&&Ag.call(t,function(w,P){q.push(g(P,t,!0)+" => "+g(w,t))}),Fg("Map",Cc.call(t),q,f)}if(nS(t)){var _=[];return Rg&&Rg.call(t,function(w){_.push(g(w,t))}),Fg("Set",Tc.call(t),_,f)}if(eS(t))return ap("WeakMap");if(iS(t))return ap("WeakSet");if(tS(t))return ap("WeakRef");if(Yw(t))return is(g(Number(t)));if(Jw(t))return is(g(sp.call(t)));if(Zw(t))return is(Fw.call(t));if(Kw(t))return is(g(String(t)));if(!qw(t)&&!Bg(t)){var ee=Ec(t,g),Z=Mg?Mg(t)===Object.prototype:t instanceof Object||t.constructor===Object,J=t instanceof Object?"":"null prototype",H=!Z&&bn&&Object(t)===t&&bn in t?mp.call(Io(t),8,-1):J?"Object":"",te=Z||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",y=te+(H||J?"["+Ni.call(Pg.call([],H||[],J||[]),": ")+"] ":"");return ee.length===0?y+"{}":f?y+"{"+pp(ee,f)+"}":y+"{ "+Ni.call(ee,", ")+" }"}return String(t)};function Vg(e,t,n){var i=(n.quoteStyle||t)==="double"?'"':"'";return i+e+i}function Hw(e){return Oo.call(String(e),/"/g,"&quot;")}function lp(e){return Io(e)==="[object Array]"&&(!bn||!(typeof e=="object"&&bn in e))}function qw(e){return Io(e)==="[object Date]"&&(!bn||!(typeof e=="object"&&bn in e))}function Bg(e){return Io(e)==="[object RegExp]"&&(!bn||!(typeof e=="object"&&bn in e))}function Ww(e){return Io(e)==="[object Error]"&&(!bn||!(typeof e=="object"&&bn in e))}function Kw(e){return Io(e)==="[object String]"&&(!bn||!(typeof e=="object"&&bn in e))}function Yw(e){return Io(e)==="[object Number]"&&(!bn||!(typeof e=="object"&&bn in e))}function Zw(e){return Io(e)==="[object Boolean]"&&(!bn||!(typeof e=="object"&&bn in e))}function jg(e){if(na)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!cp)return!1;try{return cp.call(e),!0}catch{}return!1}function Jw(e){if(!e||typeof e!="object"||!sp)return!1;try{return sp.call(e),!0}catch{}return!1}var Xw=Object.prototype.hasOwnProperty||function(e){return e in this};function Ro(e,t){return Xw.call(e,t)}function Io(e){return Uw.call(e)}function $w(e){if(e.name)return e.name;var t=Vw.call(kw.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Gg(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function Qw(e){if(!Cc||!e||typeof e!="object")return!1;try{Cc.call(e);try{Tc.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function eS(e){if(!os||!e||typeof e!="object")return!1;try{os.call(e,os);try{rs.call(e,rs)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function tS(e){if(!Og||!e||typeof e!="object")return!1;try{return Og.call(e),!0}catch{}return!1}function nS(e){if(!Tc||!e||typeof e!="object")return!1;try{Tc.call(e);try{Cc.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function iS(e){if(!rs||!e||typeof e!="object")return!1;try{rs.call(e,rs);try{os.call(e,os)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function oS(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Hg(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return Hg(mp.call(e,0,t.maxStringLength),t)+i}var o=Oo.call(Oo.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,rS);return Vg(o,"single",t)}function rS(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+jw.call(t.toString(16))}function is(e){return"Object("+e+")"}function ap(e){return e+" { ? }"}function Fg(e,t,n,i){var o=i?pp(n,i):Ni.call(n,", ");return e+" ("+t+") {"+o+"}"}function aS(e){for(var t=0;t<e.length;t++)if(Gg(e[t],`
`)>=0)return!1;return!0}function sS(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=Ni.call(Array(e.indent+1)," ");else return null;return{base:n,prev:Ni.call(Array(t+1),n)}}function pp(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+Ni.call(e,","+n)+`
`+t.prev}function Ec(e,t){var n=lp(e),i=[];if(n){i.length=e.length;for(var o=0;o<e.length;o++)i[o]=Ro(e,o)?t(e[o],e):""}var r=typeof rp=="function"?rp(e):[],a;if(na){a={};for(var s=0;s<r.length;s++)a["$"+r[s]]=r[s]}for(var u in e)Ro(e,u)&&(n&&String(Number(u))===u&&u<e.length||na&&a["$"+u]instanceof Symbol||(Ug.call(/[^\w$]/,u)?i.push(t(u,e)+": "+t(e[u],e)):i.push(u+": "+t(e[u],e))));if(typeof rp=="function")for(var l=0;l<r.length;l++)kg.call(e,r[l])&&i.push("["+t(r[l])+"]: "+t(e[r[l]],e));return i}});var Yg=Ve((Mz,Kg)=>{"use strict";var hp=bc(),ia=Tg(),cS=Wg(),uS=hp("%TypeError%"),wc=hp("%WeakMap%",!0),Sc=hp("%Map%",!0),lS=ia("WeakMap.prototype.get",!0),pS=ia("WeakMap.prototype.set",!0),dS=ia("WeakMap.prototype.has",!0),fS=ia("Map.prototype.get",!0),mS=ia("Map.prototype.set",!0),hS=ia("Map.prototype.has",!0),gp=function(e,t){for(var n=e,i;(i=n.next)!==null;n=i)if(i.key===t)return n.next=i.next,i.next=e.next,e.next=i,i},gS=function(e,t){var n=gp(e,t);return n&&n.value},_S=function(e,t,n){var i=gp(e,t);i?i.value=n:e.next={key:t,next:e.next,value:n}},yS=function(e,t){return!!gp(e,t)};Kg.exports=function(){var t,n,i,o={assert:function(r){if(!o.has(r))throw new uS("Side channel does not contain "+cS(r))},get:function(r){if(wc&&r&&(typeof r=="object"||typeof r=="function")){if(t)return lS(t,r)}else if(Sc){if(n)return fS(n,r)}else if(i)return gS(i,r)},has:function(r){if(wc&&r&&(typeof r=="object"||typeof r=="function")){if(t)return dS(t,r)}else if(Sc){if(n)return hS(n,r)}else if(i)return yS(i,r);return!1},set:function(r,a){wc&&r&&(typeof r=="object"||typeof r=="function")?(t||(t=new wc),pS(t,r,a)):Sc?(n||(n=new Sc),mS(n,r,a)):(i||(i={key:{},next:null}),_S(i,r,a))}};return o}});var Ac=Ve((Nz,Zg)=>{"use strict";var vS=String.prototype.replace,bS=/%20/g,_p={RFC1738:"RFC1738",RFC3986:"RFC3986"};Zg.exports={default:_p.RFC3986,formatters:{RFC1738:function(e){return vS.call(e,bS,"+")},RFC3986:function(e){return String(e)}},RFC1738:_p.RFC1738,RFC3986:_p.RFC3986}});var vp=Ve((Lz,Xg)=>{"use strict";var xS=Ac(),yp=Object.prototype.hasOwnProperty,cr=Array.isArray,Li=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),ES=function(t){for(;t.length>1;){var n=t.pop(),i=n.obj[n.prop];if(cr(i)){for(var o=[],r=0;r<i.length;++r)typeof i[r]<"u"&&o.push(i[r]);n.obj[n.prop]=o}}},Jg=function(t,n){for(var i=n&&n.plainObjects?Object.create(null):{},o=0;o<t.length;++o)typeof t[o]<"u"&&(i[o]=t[o]);return i},CS=function e(t,n,i){if(!n)return t;if(typeof n!="object"){if(cr(t))t.push(n);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!yp.call(Object.prototype,n))&&(t[n]=!0);else return[t,n];return t}if(!t||typeof t!="object")return[t].concat(n);var o=t;return cr(t)&&!cr(n)&&(o=Jg(t,i)),cr(t)&&cr(n)?(n.forEach(function(r,a){if(yp.call(t,a)){var s=t[a];s&&typeof s=="object"&&r&&typeof r=="object"?t[a]=e(s,r,i):t.push(r)}else t[a]=r}),t):Object.keys(n).reduce(function(r,a){var s=n[a];return yp.call(r,a)?r[a]=e(r[a],s,i):r[a]=s,r},o)},TS=function(t,n){return Object.keys(n).reduce(function(i,o){return i[o]=n[o],i},t)},wS=function(e,t,n){var i=e.replace(/\+/g," ");if(n==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},SS=function(t,n,i,o,r){if(t.length===0)return t;var a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),i==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var s="",u=0;u<a.length;++u){var l=a.charCodeAt(u);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||r===xS.RFC1738&&(l===40||l===41)){s+=a.charAt(u);continue}if(l<128){s=s+Li[l];continue}if(l<2048){s=s+(Li[192|l>>6]+Li[128|l&63]);continue}if(l<55296||l>=57344){s=s+(Li[224|l>>12]+Li[128|l>>6&63]+Li[128|l&63]);continue}u+=1,l=65536+((l&1023)<<10|a.charCodeAt(u)&1023),s+=Li[240|l>>18]+Li[128|l>>12&63]+Li[128|l>>6&63]+Li[128|l&63]}return s},AS=function(t){for(var n=[{obj:{o:t},prop:"o"}],i=[],o=0;o<n.length;++o)for(var r=n[o],a=r.obj[r.prop],s=Object.keys(a),u=0;u<s.length;++u){var l=s[u],d=a[l];typeof d=="object"&&d!==null&&i.indexOf(d)===-1&&(n.push({obj:a,prop:l}),i.push(d))}return ES(n),t},RS=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},OS=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},IS=function(t,n){return[].concat(t,n)},PS=function(t,n){if(cr(t)){for(var i=[],o=0;o<t.length;o+=1)i.push(n(t[o]));return i}return n(t)};Xg.exports={arrayToObject:Jg,assign:TS,combine:IS,compact:AS,decode:wS,encode:SS,isBuffer:OS,isRegExp:RS,maybeMap:PS,merge:CS}});var i_=Ve((zz,n_)=>{"use strict";var e_=Yg(),xp=vp(),as=Ac(),DS=Object.prototype.hasOwnProperty,$g={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,n){return t+"["+n+"]"},repeat:function(t){return t}},no=Array.isArray,MS=String.prototype.split,NS=Array.prototype.push,t_=function(e,t){NS.apply(e,no(t)?t:[t])},LS=Date.prototype.toISOString,Qg=as.default,dn={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:xp.encode,encodeValuesOnly:!1,format:Qg,formatter:as.formatters[Qg],indices:!1,serializeDate:function(t){return LS.call(t)},skipNulls:!1,strictNullHandling:!1},zS=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},bp={},BS=function e(t,n,i,o,r,a,s,u,l,d,f,g,b,x,T,R){for(var D=t,M=R,N=0,V=!1;(M=M.get(bp))!==void 0&&!V;){var q=M.get(t);if(N+=1,typeof q<"u"){if(q===N)throw new RangeError("Cyclic object value");V=!0}typeof M.get(bp)>"u"&&(N=0)}if(typeof u=="function"?D=u(n,D):D instanceof Date?D=f(D):i==="comma"&&no(D)&&(D=xp.maybeMap(D,function(re){return re instanceof Date?f(re):re})),D===null){if(r)return s&&!x?s(n,dn.encoder,T,"key",g):n;D=""}if(zS(D)||xp.isBuffer(D)){if(s){var _=x?n:s(n,dn.encoder,T,"key",g);if(i==="comma"&&x){for(var ee=MS.call(String(D),","),Z="",J=0;J<ee.length;++J)Z+=(J===0?"":",")+b(s(ee[J],dn.encoder,T,"value",g));return[b(_)+(o&&no(D)&&ee.length===1?"[]":"")+"="+Z]}return[b(_)+"="+b(s(D,dn.encoder,T,"value",g))]}return[b(n)+"="+b(String(D))]}var H=[];if(typeof D>"u")return H;var te;if(i==="comma"&&no(D))te=[{value:D.length>0?D.join(",")||null:void 0}];else if(no(u))te=u;else{var y=Object.keys(D);te=l?y.sort(l):y}for(var w=o&&no(D)&&D.length===1?n+"[]":n,P=0;P<te.length;++P){var B=te[P],Y=typeof B=="object"&&typeof B.value<"u"?B.value:D[B];if(!(a&&Y===null)){var K=no(D)?typeof i=="function"?i(w,B):w:w+(d?"."+B:"["+B+"]");R.set(t,N);var U=e_();U.set(bp,R),t_(H,e(Y,K,i,o,r,a,s,u,l,d,f,g,b,x,T,U))}}return H},FS=function(t){if(!t)return dn;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=t.charset||dn.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=as.default;if(typeof t.format<"u"){if(!DS.call(as.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var o=as.formatters[i],r=dn.filter;return(typeof t.filter=="function"||no(t.filter))&&(r=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:dn.addQueryPrefix,allowDots:typeof t.allowDots>"u"?dn.allowDots:!!t.allowDots,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:dn.charsetSentinel,delimiter:typeof t.delimiter>"u"?dn.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:dn.encode,encoder:typeof t.encoder=="function"?t.encoder:dn.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:dn.encodeValuesOnly,filter:r,format:i,formatter:o,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:dn.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:dn.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:dn.strictNullHandling}};n_.exports=function(e,t){var n=e,i=FS(t),o,r;typeof i.filter=="function"?(r=i.filter,n=r("",n)):no(i.filter)&&(r=i.filter,o=r);var a=[];if(typeof n!="object"||n===null)return"";var s;t&&t.arrayFormat in $g?s=t.arrayFormat:t&&"indices"in t?s=t.indices?"indices":"repeat":s="indices";var u=$g[s];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=u==="comma"&&t&&t.commaRoundTrip;o||(o=Object.keys(n)),i.sort&&o.sort(i.sort);for(var d=e_(),f=0;f<o.length;++f){var g=o[f];i.skipNulls&&n[g]===null||t_(a,BS(n[g],g,u,l,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,d))}var b=a.join(i.delimiter),x=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),b.length>0?x+b:""}});var a_=Ve((Bz,r_)=>{"use strict";var oa=vp(),Ep=Object.prototype.hasOwnProperty,US=Array.isArray,an={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:oa.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},kS=function(e){return e.replace(/&#(\d+);/g,function(t,n){return String.fromCharCode(parseInt(n,10))})},o_=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},VS="utf8=%26%2310003%3B",jS="utf8=%E2%9C%93",GS=function(t,n){var i={},o=n.ignoreQueryPrefix?t.replace(/^\?/,""):t,r=n.parameterLimit===1/0?void 0:n.parameterLimit,a=o.split(n.delimiter,r),s=-1,u,l=n.charset;if(n.charsetSentinel)for(u=0;u<a.length;++u)a[u].indexOf("utf8=")===0&&(a[u]===jS?l="utf-8":a[u]===VS&&(l="iso-8859-1"),s=u,u=a.length);for(u=0;u<a.length;++u)if(u!==s){var d=a[u],f=d.indexOf("]="),g=f===-1?d.indexOf("="):f+1,b,x;g===-1?(b=n.decoder(d,an.decoder,l,"key"),x=n.strictNullHandling?null:""):(b=n.decoder(d.slice(0,g),an.decoder,l,"key"),x=oa.maybeMap(o_(d.slice(g+1),n),function(T){return n.decoder(T,an.decoder,l,"value")})),x&&n.interpretNumericEntities&&l==="iso-8859-1"&&(x=kS(x)),d.indexOf("[]=")>-1&&(x=US(x)?[x]:x),Ep.call(i,b)?i[b]=oa.combine(i[b],x):i[b]=x}return i},HS=function(e,t,n,i){for(var o=i?t:o_(t,n),r=e.length-1;r>=0;--r){var a,s=e[r];if(s==="[]"&&n.parseArrays)a=[].concat(o);else{a=n.plainObjects?Object.create(null):{};var u=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,l=parseInt(u,10);!n.parseArrays&&u===""?a={0:o}:!isNaN(l)&&s!==u&&String(l)===u&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(a=[],a[l]=o):u!=="__proto__"&&(a[u]=o)}o=a}return o},qS=function(t,n,i,o){if(t){var r=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,u=i.depth>0&&a.exec(r),l=u?r.slice(0,u.index):r,d=[];if(l){if(!i.plainObjects&&Ep.call(Object.prototype,l)&&!i.allowPrototypes)return;d.push(l)}for(var f=0;i.depth>0&&(u=s.exec(r))!==null&&f<i.depth;){if(f+=1,!i.plainObjects&&Ep.call(Object.prototype,u[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(u[1])}return u&&d.push("["+r.slice(u.index)+"]"),HS(d,n,i,o)}},WS=function(t){if(!t)return an;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof t.charset>"u"?an.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?an.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:an.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:an.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:an.arrayLimit,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:an.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:an.comma,decoder:typeof t.decoder=="function"?t.decoder:an.decoder,delimiter:typeof t.delimiter=="string"||oa.isRegExp(t.delimiter)?t.delimiter:an.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:an.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:an.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:an.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:an.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:an.strictNullHandling}};r_.exports=function(e,t){var n=WS(t);if(e===""||e===null||typeof e>"u")return n.plainObjects?Object.create(null):{};for(var i=typeof e=="string"?GS(e,n):e,o=n.plainObjects?Object.create(null):{},r=Object.keys(i),a=0;a<r.length;++a){var s=r[a],u=qS(s,i[s],n,typeof e=="string");o=oa.merge(o,u,n)}return n.allowSparse===!0?o:oa.compact(o)}});var c_=Ve((Fz,s_)=>{"use strict";var KS=i_(),YS=a_(),ZS=Ac();s_.exports={formats:ZS,parse:YS,stringify:KS}});var u_=Ve((exports,module)=>{(function(t,n){typeof exports=="object"&&typeof module=="object"?module.exports=n():typeof define=="function"&&define.amd?define([],n):typeof exports=="object"?exports.JSEncrypt=n():t.JSEncrypt=n()})(window,()=>(()=>{var __webpack_modules__={"./lib/JSEncrypt.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "JSEncrypt": () => (/* binding */ JSEncrypt)
/* harmony export */ });
/* harmony import */ var _lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/jsbn/base64 */ "./lib/lib/jsbn/base64.js");
/* harmony import */ var _JSEncryptRSAKey__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./JSEncryptRSAKey */ "./lib/JSEncryptRSAKey.js");
/* provided dependency */ var process = __webpack_require__(/*! process/browser */ "./node_modules/process/browser.js");
var _a;


var version = typeof process !== 'undefined'
    ? (_a = process.env) === null || _a === void 0 ? void 0 : "3.3.2"
    : undefined;
/**
 *
 * @param {Object} [options = {}] - An object to customize JSEncrypt behaviour
 * possible parameters are:
 * - default_key_size        {number}  default: 1024 the key size in bit
 * - default_public_exponent {string}  default: '010001' the hexadecimal representation of the public exponent
 * - log                     {boolean} default: false whether log warn/error or not
 * @constructor
 */
var JSEncrypt = /** @class */ (function () {
    function JSEncrypt(options) {
        if (options === void 0) { options = {}; }
        options = options || {};
        this.default_key_size = options.default_key_size
            ? parseInt(options.default_key_size, 10)
            : 1024;
        this.default_public_exponent = options.default_public_exponent || "010001"; // 65537 default openssl public exponent for rsa key type
        this.log = options.log || false;
        // The private and public key.
        this.key = null;
    }
    /**
     * Method to set the rsa key parameter (one method is enough to set both the public
     * and the private key, since the private key contains the public key paramenters)
     * Log a warning if logs are enabled
     * @param {Object|string} key the pem encoded string or an object (with or without header/footer)
     * @public
     */
    JSEncrypt.prototype.setKey = function (key) {
        if (this.log && this.key) {
            console.warn("A key was already set, overriding existing.");
        }
        this.key = new _JSEncryptRSAKey__WEBPACK_IMPORTED_MODULE_1__.JSEncryptRSAKey(key);
    };
    /**
     * Proxy method for setKey, for api compatibility
     * @see setKey
     * @public
     */
    JSEncrypt.prototype.setPrivateKey = function (privkey) {
        // Create the key.
        this.setKey(privkey);
    };
    /**
     * Proxy method for setKey, for api compatibility
     * @see setKey
     * @public
     */
    JSEncrypt.prototype.setPublicKey = function (pubkey) {
        // Sets the public key.
        this.setKey(pubkey);
    };
    /**
     * Proxy method for RSAKey object's decrypt, decrypt the string using the private
     * components of the rsa key object. Note that if the object was not set will be created
     * on the fly (by the getKey method) using the parameters passed in the JSEncrypt constructor
     * @param {string} str base64 encoded crypted string to decrypt
     * @return {string} the decrypted string
     * @public
     */
    JSEncrypt.prototype.decrypt = function (str) {
        // Return the decrypted string.
        try {
            return this.getKey().decrypt((0,_lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__.b64tohex)(str));
        }
        catch (ex) {
            return false;
        }
    };
    /**
     * Proxy method for RSAKey object's encrypt, encrypt the string using the public
     * components of the rsa key object. Note that if the object was not set will be created
     * on the fly (by the getKey method) using the parameters passed in the JSEncrypt constructor
     * @param {string} str the string to encrypt
     * @return {string} the encrypted string encoded in base64
     * @public
     */
    JSEncrypt.prototype.encrypt = function (str) {
        // Return the encrypted string.
        try {
            return (0,_lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__.hex2b64)(this.getKey().encrypt(str));
        }
        catch (ex) {
            return false;
        }
    };
    /**
     * Proxy method for RSAKey object's sign.
     * @param {string} str the string to sign
     * @param {function} digestMethod hash method
     * @param {string} digestName the name of the hash algorithm
     * @return {string} the signature encoded in base64
     * @public
     */
    JSEncrypt.prototype.sign = function (str, digestMethod, digestName) {
        // return the RSA signature of 'str' in 'hex' format.
        try {
            return (0,_lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__.hex2b64)(this.getKey().sign(str, digestMethod, digestName));
        }
        catch (ex) {
            return false;
        }
    };
    /**
     * Proxy method for RSAKey object's verify.
     * @param {string} str the string to verify
     * @param {string} signature the signature encoded in base64 to compare the string to
     * @param {function} digestMethod hash method
     * @return {boolean} whether the data and signature match
     * @public
     */
    JSEncrypt.prototype.verify = function (str, signature, digestMethod) {
        // Return the decrypted 'digest' of the signature.
        try {
            return this.getKey().verify(str, (0,_lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__.b64tohex)(signature), digestMethod);
        }
        catch (ex) {
            return false;
        }
    };
    /**
     * Getter for the current JSEncryptRSAKey object. If it doesn't exists a new object
     * will be created and returned
     * @param {callback} [cb] the callback to be called if we want the key to be generated
     * in an async fashion
     * @returns {JSEncryptRSAKey} the JSEncryptRSAKey object
     * @public
     */
    JSEncrypt.prototype.getKey = function (cb) {
        // Only create new if it does not exist.
        if (!this.key) {
            // Get a new private key.
            this.key = new _JSEncryptRSAKey__WEBPACK_IMPORTED_MODULE_1__.JSEncryptRSAKey();
            if (cb && {}.toString.call(cb) === "[object Function]") {
                this.key.generateAsync(this.default_key_size, this.default_public_exponent, cb);
                return;
            }
            // Generate the key.
            this.key.generate(this.default_key_size, this.default_public_exponent);
        }
        return this.key;
    };
    /**
     * Returns the pem encoded representation of the private key
     * If the key doesn't exists a new key will be created
     * @returns {string} pem encoded representation of the private key WITH header and footer
     * @public
     */
    JSEncrypt.prototype.getPrivateKey = function () {
        // Return the private representation of this key.
        return this.getKey().getPrivateKey();
    };
    /**
     * Returns the pem encoded representation of the private key
     * If the key doesn't exists a new key will be created
     * @returns {string} pem encoded representation of the private key WITHOUT header and footer
     * @public
     */
    JSEncrypt.prototype.getPrivateKeyB64 = function () {
        // Return the private representation of this key.
        return this.getKey().getPrivateBaseKeyB64();
    };
    /**
     * Returns the pem encoded representation of the public key
     * If the key doesn't exists a new key will be created
     * @returns {string} pem encoded representation of the public key WITH header and footer
     * @public
     */
    JSEncrypt.prototype.getPublicKey = function () {
        // Return the private representation of this key.
        return this.getKey().getPublicKey();
    };
    /**
     * Returns the pem encoded representation of the public key
     * If the key doesn't exists a new key will be created
     * @returns {string} pem encoded representation of the public key WITHOUT header and footer
     * @public
     */
    JSEncrypt.prototype.getPublicKeyB64 = function () {
        // Return the private representation of this key.
        return this.getKey().getPublicBaseKeyB64();
    };
    JSEncrypt.version = version;
    return JSEncrypt;
}());



//# sourceURL=webpack://JSEncrypt/./lib/JSEncrypt.js?`)},"./lib/JSEncryptRSAKey.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "JSEncryptRSAKey": () => (/* binding */ JSEncryptRSAKey)
/* harmony export */ });
/* harmony import */ var _lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/jsbn/base64 */ "./lib/lib/jsbn/base64.js");
/* harmony import */ var _lib_asn1js_hex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/asn1js/hex */ "./lib/lib/asn1js/hex.js");
/* harmony import */ var _lib_asn1js_base64__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/asn1js/base64 */ "./lib/lib/asn1js/base64.js");
/* harmony import */ var _lib_asn1js_asn1__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/asn1js/asn1 */ "./lib/lib/asn1js/asn1.js");
/* harmony import */ var _lib_jsbn_rsa__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/jsbn/rsa */ "./lib/lib/jsbn/rsa.js");
/* harmony import */ var _lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/jsbn/jsbn */ "./lib/lib/jsbn/jsbn.js");
/* harmony import */ var _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/jsrsasign/asn1-1.0 */ "./lib/lib/jsrsasign/asn1-1.0.js");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();







/**
 * Create a new JSEncryptRSAKey that extends Tom Wu's RSA key object.
 * This object is just a decorator for parsing the key parameter
 * @param {string|Object} key - The key in string format, or an object containing
 * the parameters needed to build a RSAKey object.
 * @constructor
 */
var JSEncryptRSAKey = /** @class */ (function (_super) {
    __extends(JSEncryptRSAKey, _super);
    function JSEncryptRSAKey(key) {
        var _this = _super.call(this) || this;
        // Call the super constructor.
        //  RSAKey.call(this);
        // If a key key was provided.
        if (key) {
            // If this is a string...
            if (typeof key === "string") {
                _this.parseKey(key);
            }
            else if (JSEncryptRSAKey.hasPrivateKeyProperty(key) ||
                JSEncryptRSAKey.hasPublicKeyProperty(key)) {
                // Set the values for the key.
                _this.parsePropertiesFrom(key);
            }
        }
        return _this;
    }
    /**
     * Method to parse a pem encoded string containing both a public or private key.
     * The method will translate the pem encoded string in a der encoded string and
     * will parse private key and public key parameters. This method accepts public key
     * in the rsaencryption pkcs #1 format (oid: 1.2.840.113549.1.1.1).
     *
     * @todo Check how many rsa formats use the same format of pkcs #1.
     *
     * The format is defined as:
     * PublicKeyInfo ::= SEQUENCE {
     *   algorithm       AlgorithmIdentifier,
     *   PublicKey       BIT STRING
     * }
     * Where AlgorithmIdentifier is:
     * AlgorithmIdentifier ::= SEQUENCE {
     *   algorithm       OBJECT IDENTIFIER,     the OID of the enc algorithm
     *   parameters      ANY DEFINED BY algorithm OPTIONAL (NULL for PKCS #1)
     * }
     * and PublicKey is a SEQUENCE encapsulated in a BIT STRING
     * RSAPublicKey ::= SEQUENCE {
     *   modulus           INTEGER,  -- n
     *   publicExponent    INTEGER   -- e
     * }
     * it's possible to examine the structure of the keys obtained from openssl using
     * an asn.1 dumper as the one used here to parse the components: http://lapo.it/asn1js/
     * @argument {string} pem the pem encoded string, can include the BEGIN/END header/footer
     * @private
     */
    JSEncryptRSAKey.prototype.parseKey = function (pem) {
        try {
            var modulus = 0;
            var public_exponent = 0;
            var reHex = /^\\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\\s*)+$/;
            var der = reHex.test(pem) ? _lib_asn1js_hex__WEBPACK_IMPORTED_MODULE_1__.Hex.decode(pem) : _lib_asn1js_base64__WEBPACK_IMPORTED_MODULE_2__.Base64.unarmor(pem);
            var asn1 = _lib_asn1js_asn1__WEBPACK_IMPORTED_MODULE_3__.ASN1.decode(der);
            // Fixes a bug with OpenSSL 1.0+ private keys
            if (asn1.sub.length === 3) {
                asn1 = asn1.sub[2].sub[0];
            }
            if (asn1.sub.length === 9) {
                // Parse the private key.
                modulus = asn1.sub[1].getHexStringValue(); // bigint
                this.n = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(modulus, 16);
                public_exponent = asn1.sub[2].getHexStringValue(); // int
                this.e = parseInt(public_exponent, 16);
                var private_exponent = asn1.sub[3].getHexStringValue(); // bigint
                this.d = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(private_exponent, 16);
                var prime1 = asn1.sub[4].getHexStringValue(); // bigint
                this.p = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(prime1, 16);
                var prime2 = asn1.sub[5].getHexStringValue(); // bigint
                this.q = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(prime2, 16);
                var exponent1 = asn1.sub[6].getHexStringValue(); // bigint
                this.dmp1 = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(exponent1, 16);
                var exponent2 = asn1.sub[7].getHexStringValue(); // bigint
                this.dmq1 = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(exponent2, 16);
                var coefficient = asn1.sub[8].getHexStringValue(); // bigint
                this.coeff = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(coefficient, 16);
            }
            else if (asn1.sub.length === 2) {
                if (asn1.sub[0].sub) {
                    // Parse ASN.1 SubjectPublicKeyInfo type as defined by X.509
                    var bit_string = asn1.sub[1];
                    var sequence = bit_string.sub[0];
                    modulus = sequence.sub[0].getHexStringValue();
                    this.n = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(modulus, 16);
                    public_exponent = sequence.sub[1].getHexStringValue();
                    this.e = parseInt(public_exponent, 16);
                }
                else {
                    // Parse ASN.1 RSAPublicKey type as defined by PKCS #1
                    modulus = asn1.sub[0].getHexStringValue();
                    this.n = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(modulus, 16);
                    public_exponent = asn1.sub[1].getHexStringValue();
                    this.e = parseInt(public_exponent, 16);
                }
            }
            else {
                return false;
            }
            return true;
        }
        catch (ex) {
            return false;
        }
    };
    /**
     * Translate rsa parameters in a hex encoded string representing the rsa key.
     *
     * The translation follow the ASN.1 notation :
     * RSAPrivateKey ::= SEQUENCE {
     *   version           Version,
     *   modulus           INTEGER,  -- n
     *   publicExponent    INTEGER,  -- e
     *   privateExponent   INTEGER,  -- d
     *   prime1            INTEGER,  -- p
     *   prime2            INTEGER,  -- q
     *   exponent1         INTEGER,  -- d mod (p1)
     *   exponent2         INTEGER,  -- d mod (q-1)
     *   coefficient       INTEGER,  -- (inverse of q) mod p
     * }
     * @returns {string}  DER Encoded String representing the rsa private key
     * @private
     */
    JSEncryptRSAKey.prototype.getPrivateBaseKey = function () {
        var options = {
            array: [
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ int: 0 }),
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.n }),
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ int: this.e }),
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.d }),
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.p }),
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.q }),
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.dmp1 }),
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.dmq1 }),
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.coeff }),
            ],
        };
        var seq = new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERSequence(options);
        return seq.getEncodedHex();
    };
    /**
     * base64 (pem) encoded version of the DER encoded representation
     * @returns {string} pem encoded representation without header and footer
     * @public
     */
    JSEncryptRSAKey.prototype.getPrivateBaseKeyB64 = function () {
        return (0,_lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__.hex2b64)(this.getPrivateBaseKey());
    };
    /**
     * Translate rsa parameters in a hex encoded string representing the rsa public key.
     * The representation follow the ASN.1 notation :
     * PublicKeyInfo ::= SEQUENCE {
     *   algorithm       AlgorithmIdentifier,
     *   PublicKey       BIT STRING
     * }
     * Where AlgorithmIdentifier is:
     * AlgorithmIdentifier ::= SEQUENCE {
     *   algorithm       OBJECT IDENTIFIER,     the OID of the enc algorithm
     *   parameters      ANY DEFINED BY algorithm OPTIONAL (NULL for PKCS #1)
     * }
     * and PublicKey is a SEQUENCE encapsulated in a BIT STRING
     * RSAPublicKey ::= SEQUENCE {
     *   modulus           INTEGER,  -- n
     *   publicExponent    INTEGER   -- e
     * }
     * @returns {string} DER Encoded String representing the rsa public key
     * @private
     */
    JSEncryptRSAKey.prototype.getPublicBaseKey = function () {
        var first_sequence = new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERSequence({
            array: [
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERObjectIdentifier({ oid: "1.2.840.113549.1.1.1" }),
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERNull(),
            ],
        });
        var second_sequence = new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERSequence({
            array: [
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.n }),
                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ int: this.e }),
            ],
        });
        var bit_string = new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERBitString({
            hex: "00" + second_sequence.getEncodedHex(),
        });
        var seq = new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERSequence({
            array: [first_sequence, bit_string],
        });
        return seq.getEncodedHex();
    };
    /**
     * base64 (pem) encoded version of the DER encoded representation
     * @returns {string} pem encoded representation without header and footer
     * @public
     */
    JSEncryptRSAKey.prototype.getPublicBaseKeyB64 = function () {
        return (0,_lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__.hex2b64)(this.getPublicBaseKey());
    };
    /**
     * wrap the string in block of width chars. The default value for rsa keys is 64
     * characters.
     * @param {string} str the pem encoded string without header and footer
     * @param {Number} [width=64] - the length the string has to be wrapped at
     * @returns {string}
     * @private
     */
    JSEncryptRSAKey.wordwrap = function (str, width) {
        width = width || 64;
        if (!str) {
            return str;
        }
        var regex = "(.{1," + width + "})( +|$\\n?)|(.{1," + width + "})";
        return str.match(RegExp(regex, "g")).join("\\n");
    };
    /**
     * Retrieve the pem encoded private key
     * @returns {string} the pem encoded private key with header/footer
     * @public
     */
    JSEncryptRSAKey.prototype.getPrivateKey = function () {
        var key = "-----BEGIN RSA PRIVATE KEY-----\\n";
        key += JSEncryptRSAKey.wordwrap(this.getPrivateBaseKeyB64()) + "\\n";
        key += "-----END RSA PRIVATE KEY-----";
        return key;
    };
    /**
     * Retrieve the pem encoded public key
     * @returns {string} the pem encoded public key with header/footer
     * @public
     */
    JSEncryptRSAKey.prototype.getPublicKey = function () {
        var key = "-----BEGIN PUBLIC KEY-----\\n";
        key += JSEncryptRSAKey.wordwrap(this.getPublicBaseKeyB64()) + "\\n";
        key += "-----END PUBLIC KEY-----";
        return key;
    };
    /**
     * Check if the object contains the necessary parameters to populate the rsa modulus
     * and public exponent parameters.
     * @param {Object} [obj={}] - An object that may contain the two public key
     * parameters
     * @returns {boolean} true if the object contains both the modulus and the public exponent
     * properties (n and e)
     * @todo check for types of n and e. N should be a parseable bigInt object, E should
     * be a parseable integer number
     * @private
     */
    JSEncryptRSAKey.hasPublicKeyProperty = function (obj) {
        obj = obj || {};
        return obj.hasOwnProperty("n") && obj.hasOwnProperty("e");
    };
    /**
     * Check if the object contains ALL the parameters of an RSA key.
     * @param {Object} [obj={}] - An object that may contain nine rsa key
     * parameters
     * @returns {boolean} true if the object contains all the parameters needed
     * @todo check for types of the parameters all the parameters but the public exponent
     * should be parseable bigint objects, the public exponent should be a parseable integer number
     * @private
     */
    JSEncryptRSAKey.hasPrivateKeyProperty = function (obj) {
        obj = obj || {};
        return (obj.hasOwnProperty("n") &&
            obj.hasOwnProperty("e") &&
            obj.hasOwnProperty("d") &&
            obj.hasOwnProperty("p") &&
            obj.hasOwnProperty("q") &&
            obj.hasOwnProperty("dmp1") &&
            obj.hasOwnProperty("dmq1") &&
            obj.hasOwnProperty("coeff"));
    };
    /**
     * Parse the properties of obj in the current rsa object. Obj should AT LEAST
     * include the modulus and public exponent (n, e) parameters.
     * @param {Object} obj - the object containing rsa parameters
     * @private
     */
    JSEncryptRSAKey.prototype.parsePropertiesFrom = function (obj) {
        this.n = obj.n;
        this.e = obj.e;
        if (obj.hasOwnProperty("d")) {
            this.d = obj.d;
            this.p = obj.p;
            this.q = obj.q;
            this.dmp1 = obj.dmp1;
            this.dmq1 = obj.dmq1;
            this.coeff = obj.coeff;
        }
    };
    return JSEncryptRSAKey;
}(_lib_jsbn_rsa__WEBPACK_IMPORTED_MODULE_4__.RSAKey));



//# sourceURL=webpack://JSEncrypt/./lib/JSEncryptRSAKey.js?`)},"./lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "JSEncrypt": () => (/* reexport safe */ _JSEncrypt__WEBPACK_IMPORTED_MODULE_0__.JSEncrypt),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _JSEncrypt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./JSEncrypt */ "./lib/JSEncrypt.js");


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_JSEncrypt__WEBPACK_IMPORTED_MODULE_0__.JSEncrypt);


//# sourceURL=webpack://JSEncrypt/./lib/index.js?`)},"./lib/lib/asn1js/asn1.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ASN1": () => (/* binding */ ASN1),
/* harmony export */   "ASN1Tag": () => (/* binding */ ASN1Tag),
/* harmony export */   "Stream": () => (/* binding */ Stream)
/* harmony export */ });
/* harmony import */ var _int10__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./int10 */ "./lib/lib/asn1js/int10.js");
// ASN.1 JavaScript decoder
// Copyright (c) 2008-2014 Lapo Luchini <lapo@lapo.it>
// Permission to use, copy, modify, and/or distribute this software for any
// purpose with or without fee is hereby granted, provided that the above
// copyright notice and this permission notice appear in all copies.
//
// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */
/*global oids */

var ellipsis = "\\u2026";
var reTimeS = /^(\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;
var reTimeL = /^(\\d\\d\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;
function stringCut(str, len) {
    if (str.length > len) {
        str = str.substring(0, len) + ellipsis;
    }
    return str;
}
var Stream = /** @class */ (function () {
    function Stream(enc, pos) {
        this.hexDigits = "0123456789ABCDEF";
        if (enc instanceof Stream) {
            this.enc = enc.enc;
            this.pos = enc.pos;
        }
        else {
            // enc should be an array or a binary string
            this.enc = enc;
            this.pos = pos;
        }
    }
    Stream.prototype.get = function (pos) {
        if (pos === undefined) {
            pos = this.pos++;
        }
        if (pos >= this.enc.length) {
            throw new Error("Requesting byte offset ".concat(pos, " on a stream of length ").concat(this.enc.length));
        }
        return ("string" === typeof this.enc) ? this.enc.charCodeAt(pos) : this.enc[pos];
    };
    Stream.prototype.hexByte = function (b) {
        return this.hexDigits.charAt((b >> 4) & 0xF) + this.hexDigits.charAt(b & 0xF);
    };
    Stream.prototype.hexDump = function (start, end, raw) {
        var s = "";
        for (var i = start; i < end; ++i) {
            s += this.hexByte(this.get(i));
            if (raw !== true) {
                switch (i & 0xF) {
                    case 0x7:
                        s += "  ";
                        break;
                    case 0xF:
                        s += "\\n";
                        break;
                    default:
                        s += " ";
                }
            }
        }
        return s;
    };
    Stream.prototype.isASCII = function (start, end) {
        for (var i = start; i < end; ++i) {
            var c = this.get(i);
            if (c < 32 || c > 176) {
                return false;
            }
        }
        return true;
    };
    Stream.prototype.parseStringISO = function (start, end) {
        var s = "";
        for (var i = start; i < end; ++i) {
            s += String.fromCharCode(this.get(i));
        }
        return s;
    };
    Stream.prototype.parseStringUTF = function (start, end) {
        var s = "";
        for (var i = start; i < end;) {
            var c = this.get(i++);
            if (c < 128) {
                s += String.fromCharCode(c);
            }
            else if ((c > 191) && (c < 224)) {
                s += String.fromCharCode(((c & 0x1F) << 6) | (this.get(i++) & 0x3F));
            }
            else {
                s += String.fromCharCode(((c & 0x0F) << 12) | ((this.get(i++) & 0x3F) << 6) | (this.get(i++) & 0x3F));
            }
        }
        return s;
    };
    Stream.prototype.parseStringBMP = function (start, end) {
        var str = "";
        var hi;
        var lo;
        for (var i = start; i < end;) {
            hi = this.get(i++);
            lo = this.get(i++);
            str += String.fromCharCode((hi << 8) | lo);
        }
        return str;
    };
    Stream.prototype.parseTime = function (start, end, shortYear) {
        var s = this.parseStringISO(start, end);
        var m = (shortYear ? reTimeS : reTimeL).exec(s);
        if (!m) {
            return "Unrecognized time: " + s;
        }
        if (shortYear) {
            // to avoid querying the timer, use the fixed range [1970, 2069]
            // it will conform with ITU X.400 [-10, +40] sliding window until 2030
            m[1] = +m[1];
            m[1] += (+m[1] < 70) ? 2000 : 1900;
        }
        s = m[1] + "-" + m[2] + "-" + m[3] + " " + m[4];
        if (m[5]) {
            s += ":" + m[5];
            if (m[6]) {
                s += ":" + m[6];
                if (m[7]) {
                    s += "." + m[7];
                }
            }
        }
        if (m[8]) {
            s += " UTC";
            if (m[8] != "Z") {
                s += m[8];
                if (m[9]) {
                    s += ":" + m[9];
                }
            }
        }
        return s;
    };
    Stream.prototype.parseInteger = function (start, end) {
        var v = this.get(start);
        var neg = (v > 127);
        var pad = neg ? 255 : 0;
        var len;
        var s = "";
        // skip unuseful bits (not allowed in DER)
        while (v == pad && ++start < end) {
            v = this.get(start);
        }
        len = end - start;
        if (len === 0) {
            return neg ? -1 : 0;
        }
        // show bit length of huge integers
        if (len > 4) {
            s = v;
            len <<= 3;
            while (((+s ^ pad) & 0x80) == 0) {
                s = +s << 1;
                --len;
            }
            s = "(" + len + " bit)\\n";
        }
        // decode the integer
        if (neg) {
            v = v - 256;
        }
        var n = new _int10__WEBPACK_IMPORTED_MODULE_0__.Int10(v);
        for (var i = start + 1; i < end; ++i) {
            n.mulAdd(256, this.get(i));
        }
        return s + n.toString();
    };
    Stream.prototype.parseBitString = function (start, end, maxLength) {
        var unusedBit = this.get(start);
        var lenBit = ((end - start - 1) << 3) - unusedBit;
        var intro = "(" + lenBit + " bit)\\n";
        var s = "";
        for (var i = start + 1; i < end; ++i) {
            var b = this.get(i);
            var skip = (i == end - 1) ? unusedBit : 0;
            for (var j = 7; j >= skip; --j) {
                s += (b >> j) & 1 ? "1" : "0";
            }
            if (s.length > maxLength) {
                return intro + stringCut(s, maxLength);
            }
        }
        return intro + s;
    };
    Stream.prototype.parseOctetString = function (start, end, maxLength) {
        if (this.isASCII(start, end)) {
            return stringCut(this.parseStringISO(start, end), maxLength);
        }
        var len = end - start;
        var s = "(" + len + " byte)\\n";
        maxLength /= 2; // we work in bytes
        if (len > maxLength) {
            end = start + maxLength;
        }
        for (var i = start; i < end; ++i) {
            s += this.hexByte(this.get(i));
        }
        if (len > maxLength) {
            s += ellipsis;
        }
        return s;
    };
    Stream.prototype.parseOID = function (start, end, maxLength) {
        var s = "";
        var n = new _int10__WEBPACK_IMPORTED_MODULE_0__.Int10();
        var bits = 0;
        for (var i = start; i < end; ++i) {
            var v = this.get(i);
            n.mulAdd(128, v & 0x7F);
            bits += 7;
            if (!(v & 0x80)) { // finished
                if (s === "") {
                    n = n.simplify();
                    if (n instanceof _int10__WEBPACK_IMPORTED_MODULE_0__.Int10) {
                        n.sub(80);
                        s = "2." + n.toString();
                    }
                    else {
                        var m = n < 80 ? n < 40 ? 0 : 1 : 2;
                        s = m + "." + (n - m * 40);
                    }
                }
                else {
                    s += "." + n.toString();
                }
                if (s.length > maxLength) {
                    return stringCut(s, maxLength);
                }
                n = new _int10__WEBPACK_IMPORTED_MODULE_0__.Int10();
                bits = 0;
            }
        }
        if (bits > 0) {
            s += ".incomplete";
        }
        return s;
    };
    return Stream;
}());

var ASN1 = /** @class */ (function () {
    function ASN1(stream, header, length, tag, sub) {
        if (!(tag instanceof ASN1Tag)) {
            throw new Error("Invalid tag value.");
        }
        this.stream = stream;
        this.header = header;
        this.length = length;
        this.tag = tag;
        this.sub = sub;
    }
    ASN1.prototype.typeName = function () {
        switch (this.tag.tagClass) {
            case 0: // universal
                switch (this.tag.tagNumber) {
                    case 0x00:
                        return "EOC";
                    case 0x01:
                        return "BOOLEAN";
                    case 0x02:
                        return "INTEGER";
                    case 0x03:
                        return "BIT_STRING";
                    case 0x04:
                        return "OCTET_STRING";
                    case 0x05:
                        return "NULL";
                    case 0x06:
                        return "OBJECT_IDENTIFIER";
                    case 0x07:
                        return "ObjectDescriptor";
                    case 0x08:
                        return "EXTERNAL";
                    case 0x09:
                        return "REAL";
                    case 0x0A:
                        return "ENUMERATED";
                    case 0x0B:
                        return "EMBEDDED_PDV";
                    case 0x0C:
                        return "UTF8String";
                    case 0x10:
                        return "SEQUENCE";
                    case 0x11:
                        return "SET";
                    case 0x12:
                        return "NumericString";
                    case 0x13:
                        return "PrintableString"; // ASCII subset
                    case 0x14:
                        return "TeletexString"; // aka T61String
                    case 0x15:
                        return "VideotexString";
                    case 0x16:
                        return "IA5String"; // ASCII
                    case 0x17:
                        return "UTCTime";
                    case 0x18:
                        return "GeneralizedTime";
                    case 0x19:
                        return "GraphicString";
                    case 0x1A:
                        return "VisibleString"; // ASCII subset
                    case 0x1B:
                        return "GeneralString";
                    case 0x1C:
                        return "UniversalString";
                    case 0x1E:
                        return "BMPString";
                }
                return "Universal_" + this.tag.tagNumber.toString();
            case 1:
                return "Application_" + this.tag.tagNumber.toString();
            case 2:
                return "[" + this.tag.tagNumber.toString() + "]"; // Context
            case 3:
                return "Private_" + this.tag.tagNumber.toString();
        }
    };
    ASN1.prototype.content = function (maxLength) {
        if (this.tag === undefined) {
            return null;
        }
        if (maxLength === undefined) {
            maxLength = Infinity;
        }
        var content = this.posContent();
        var len = Math.abs(this.length);
        if (!this.tag.isUniversal()) {
            if (this.sub !== null) {
                return "(" + this.sub.length + " elem)";
            }
            return this.stream.parseOctetString(content, content + len, maxLength);
        }
        switch (this.tag.tagNumber) {
            case 0x01: // BOOLEAN
                return (this.stream.get(content) === 0) ? "false" : "true";
            case 0x02: // INTEGER
                return this.stream.parseInteger(content, content + len);
            case 0x03: // BIT_STRING
                return this.sub ? "(" + this.sub.length + " elem)" :
                    this.stream.parseBitString(content, content + len, maxLength);
            case 0x04: // OCTET_STRING
                return this.sub ? "(" + this.sub.length + " elem)" :
                    this.stream.parseOctetString(content, content + len, maxLength);
            // case 0x05: // NULL
            case 0x06: // OBJECT_IDENTIFIER
                return this.stream.parseOID(content, content + len, maxLength);
            // case 0x07: // ObjectDescriptor
            // case 0x08: // EXTERNAL
            // case 0x09: // REAL
            // case 0x0A: // ENUMERATED
            // case 0x0B: // EMBEDDED_PDV
            case 0x10: // SEQUENCE
            case 0x11: // SET
                if (this.sub !== null) {
                    return "(" + this.sub.length + " elem)";
                }
                else {
                    return "(no elem)";
                }
            case 0x0C: // UTF8String
                return stringCut(this.stream.parseStringUTF(content, content + len), maxLength);
            case 0x12: // NumericString
            case 0x13: // PrintableString
            case 0x14: // TeletexString
            case 0x15: // VideotexString
            case 0x16: // IA5String
            // case 0x19: // GraphicString
            case 0x1A: // VisibleString
                // case 0x1B: // GeneralString
                // case 0x1C: // UniversalString
                return stringCut(this.stream.parseStringISO(content, content + len), maxLength);
            case 0x1E: // BMPString
                return stringCut(this.stream.parseStringBMP(content, content + len), maxLength);
            case 0x17: // UTCTime
            case 0x18: // GeneralizedTime
                return this.stream.parseTime(content, content + len, (this.tag.tagNumber == 0x17));
        }
        return null;
    };
    ASN1.prototype.toString = function () {
        return this.typeName() + "@" + this.stream.pos + "[header:" + this.header + ",length:" + this.length + ",sub:" + ((this.sub === null) ? "null" : this.sub.length) + "]";
    };
    ASN1.prototype.toPrettyString = function (indent) {
        if (indent === undefined) {
            indent = "";
        }
        var s = indent + this.typeName() + " @" + this.stream.pos;
        if (this.length >= 0) {
            s += "+";
        }
        s += this.length;
        if (this.tag.tagConstructed) {
            s += " (constructed)";
        }
        else if ((this.tag.isUniversal() && ((this.tag.tagNumber == 0x03) || (this.tag.tagNumber == 0x04))) && (this.sub !== null)) {
            s += " (encapsulates)";
        }
        s += "\\n";
        if (this.sub !== null) {
            indent += "  ";
            for (var i = 0, max = this.sub.length; i < max; ++i) {
                s += this.sub[i].toPrettyString(indent);
            }
        }
        return s;
    };
    ASN1.prototype.posStart = function () {
        return this.stream.pos;
    };
    ASN1.prototype.posContent = function () {
        return this.stream.pos + this.header;
    };
    ASN1.prototype.posEnd = function () {
        return this.stream.pos + this.header + Math.abs(this.length);
    };
    ASN1.prototype.toHexString = function () {
        return this.stream.hexDump(this.posStart(), this.posEnd(), true);
    };
    ASN1.decodeLength = function (stream) {
        var buf = stream.get();
        var len = buf & 0x7F;
        if (len == buf) {
            return len;
        }
        // no reason to use Int10, as it would be a huge buffer anyways
        if (len > 6) {
            throw new Error("Length over 48 bits not supported at position " + (stream.pos - 1));
        }
        if (len === 0) {
            return null;
        } // undefined
        buf = 0;
        for (var i = 0; i < len; ++i) {
            buf = (buf * 256) + stream.get();
        }
        return buf;
    };
    /**
     * Retrieve the hexadecimal value (as a string) of the current ASN.1 element
     * @returns {string}
     * @public
     */
    ASN1.prototype.getHexStringValue = function () {
        var hexString = this.toHexString();
        var offset = this.header * 2;
        var length = this.length * 2;
        return hexString.substr(offset, length);
    };
    ASN1.decode = function (str) {
        var stream;
        if (!(str instanceof Stream)) {
            stream = new Stream(str, 0);
        }
        else {
            stream = str;
        }
        var streamStart = new Stream(stream);
        var tag = new ASN1Tag(stream);
        var len = ASN1.decodeLength(stream);
        var start = stream.pos;
        var header = start - streamStart.pos;
        var sub = null;
        var getSub = function () {
            var ret = [];
            if (len !== null) {
                // definite length
                var end = start + len;
                while (stream.pos < end) {
                    ret[ret.length] = ASN1.decode(stream);
                }
                if (stream.pos != end) {
                    throw new Error("Content size is not correct for container starting at offset " + start);
                }
            }
            else {
                // undefined length
                try {
                    for (;;) {
                        var s = ASN1.decode(stream);
                        if (s.tag.isEOC()) {
                            break;
                        }
                        ret[ret.length] = s;
                    }
                    len = start - stream.pos; // undefined lengths are represented as negative values
                }
                catch (e) {
                    throw new Error("Exception while decoding undefined length content: " + e);
                }
            }
            return ret;
        };
        if (tag.tagConstructed) {
            // must have valid content
            sub = getSub();
        }
        else if (tag.isUniversal() && ((tag.tagNumber == 0x03) || (tag.tagNumber == 0x04))) {
            // sometimes BitString and OctetString are used to encapsulate ASN.1
            try {
                if (tag.tagNumber == 0x03) {
                    if (stream.get() != 0) {
                        throw new Error("BIT STRINGs with unused bits cannot encapsulate.");
                    }
                }
                sub = getSub();
                for (var i = 0; i < sub.length; ++i) {
                    if (sub[i].tag.isEOC()) {
                        throw new Error("EOC is not supposed to be actual content.");
                    }
                }
            }
            catch (e) {
                // but silently ignore when they don't
                sub = null;
            }
        }
        if (sub === null) {
            if (len === null) {
                throw new Error("We can't skip over an invalid tag with undefined length at offset " + start);
            }
            stream.pos = start + Math.abs(len);
        }
        return new ASN1(streamStart, header, len, tag, sub);
    };
    return ASN1;
}());

var ASN1Tag = /** @class */ (function () {
    function ASN1Tag(stream) {
        var buf = stream.get();
        this.tagClass = buf >> 6;
        this.tagConstructed = ((buf & 0x20) !== 0);
        this.tagNumber = buf & 0x1F;
        if (this.tagNumber == 0x1F) { // long tag
            var n = new _int10__WEBPACK_IMPORTED_MODULE_0__.Int10();
            do {
                buf = stream.get();
                n.mulAdd(128, buf & 0x7F);
            } while (buf & 0x80);
            this.tagNumber = n.simplify();
        }
    }
    ASN1Tag.prototype.isUniversal = function () {
        return this.tagClass === 0x00;
    };
    ASN1Tag.prototype.isEOC = function () {
        return this.tagClass === 0x00 && this.tagNumber === 0x00;
    };
    return ASN1Tag;
}());



//# sourceURL=webpack://JSEncrypt/./lib/lib/asn1js/asn1.js?`)},"./lib/lib/asn1js/base64.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Base64": () => (/* binding */ Base64)
/* harmony export */ });
// Base64 JavaScript decoder
// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>
// Permission to use, copy, modify, and/or distribute this software for any
// purpose with or without fee is hereby granted, provided that the above
// copyright notice and this permission notice appear in all copies.
//
// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */
var decoder;
var Base64 = {
    decode: function (a) {
        var i;
        if (decoder === undefined) {
            var b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
            var ignore = "= \\f\\n\\r\\t\\u00A0\\u2028\\u2029";
            decoder = Object.create(null);
            for (i = 0; i < 64; ++i) {
                decoder[b64.charAt(i)] = i;
            }
            decoder['-'] = 62; //+
            decoder['_'] = 63; //-
            for (i = 0; i < ignore.length; ++i) {
                decoder[ignore.charAt(i)] = -1;
            }
        }
        var out = [];
        var bits = 0;
        var char_count = 0;
        for (i = 0; i < a.length; ++i) {
            var c = a.charAt(i);
            if (c == "=") {
                break;
            }
            c = decoder[c];
            if (c == -1) {
                continue;
            }
            if (c === undefined) {
                throw new Error("Illegal character at offset " + i);
            }
            bits |= c;
            if (++char_count >= 4) {
                out[out.length] = (bits >> 16);
                out[out.length] = (bits >> 8) & 0xFF;
                out[out.length] = bits & 0xFF;
                bits = 0;
                char_count = 0;
            }
            else {
                bits <<= 6;
            }
        }
        switch (char_count) {
            case 1:
                throw new Error("Base64 encoding incomplete: at least 2 bits missing");
            case 2:
                out[out.length] = (bits >> 10);
                break;
            case 3:
                out[out.length] = (bits >> 16);
                out[out.length] = (bits >> 8) & 0xFF;
                break;
        }
        return out;
    },
    re: /-----BEGIN [^-]+-----([A-Za-z0-9+\\/=\\s]+)-----END [^-]+-----|begin-base64[^\\n]+\\n([A-Za-z0-9+\\/=\\s]+)====/,
    unarmor: function (a) {
        var m = Base64.re.exec(a);
        if (m) {
            if (m[1]) {
                a = m[1];
            }
            else if (m[2]) {
                a = m[2];
            }
            else {
                throw new Error("RegExp out of sync");
            }
        }
        return Base64.decode(a);
    }
};


//# sourceURL=webpack://JSEncrypt/./lib/lib/asn1js/base64.js?`)},"./lib/lib/asn1js/hex.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Hex": () => (/* binding */ Hex)
/* harmony export */ });
// Hex JavaScript decoder
// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>
// Permission to use, copy, modify, and/or distribute this software for any
// purpose with or without fee is hereby granted, provided that the above
// copyright notice and this permission notice appear in all copies.
//
// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */
var decoder;
var Hex = {
    decode: function (a) {
        var i;
        if (decoder === undefined) {
            var hex = "0123456789ABCDEF";
            var ignore = " \\f\\n\\r\\t\\u00A0\\u2028\\u2029";
            decoder = {};
            for (i = 0; i < 16; ++i) {
                decoder[hex.charAt(i)] = i;
            }
            hex = hex.toLowerCase();
            for (i = 10; i < 16; ++i) {
                decoder[hex.charAt(i)] = i;
            }
            for (i = 0; i < ignore.length; ++i) {
                decoder[ignore.charAt(i)] = -1;
            }
        }
        var out = [];
        var bits = 0;
        var char_count = 0;
        for (i = 0; i < a.length; ++i) {
            var c = a.charAt(i);
            if (c == "=") {
                break;
            }
            c = decoder[c];
            if (c == -1) {
                continue;
            }
            if (c === undefined) {
                throw new Error("Illegal character at offset " + i);
            }
            bits |= c;
            if (++char_count >= 2) {
                out[out.length] = bits;
                bits = 0;
                char_count = 0;
            }
            else {
                bits <<= 4;
            }
        }
        if (char_count) {
            throw new Error("Hex encoding incomplete: 4 bits missing");
        }
        return out;
    }
};


//# sourceURL=webpack://JSEncrypt/./lib/lib/asn1js/hex.js?`)},"./lib/lib/asn1js/int10.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Int10": () => (/* binding */ Int10)
/* harmony export */ });
// Big integer base-10 printing library
// Copyright (c) 2014 Lapo Luchini <lapo@lapo.it>
// Permission to use, copy, modify, and/or distribute this software for any
// purpose with or without fee is hereby granted, provided that the above
// copyright notice and this permission notice appear in all copies.
//
// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */
var max = 10000000000000; // biggest integer that can still fit 2^53 when multiplied by 256
var Int10 = /** @class */ (function () {
    function Int10(value) {
        this.buf = [+value || 0];
    }
    Int10.prototype.mulAdd = function (m, c) {
        // assert(m <= 256)
        var b = this.buf;
        var l = b.length;
        var i;
        var t;
        for (i = 0; i < l; ++i) {
            t = b[i] * m + c;
            if (t < max) {
                c = 0;
            }
            else {
                c = 0 | (t / max);
                t -= c * max;
            }
            b[i] = t;
        }
        if (c > 0) {
            b[i] = c;
        }
    };
    Int10.prototype.sub = function (c) {
        // assert(m <= 256)
        var b = this.buf;
        var l = b.length;
        var i;
        var t;
        for (i = 0; i < l; ++i) {
            t = b[i] - c;
            if (t < 0) {
                t += max;
                c = 1;
            }
            else {
                c = 0;
            }
            b[i] = t;
        }
        while (b[b.length - 1] === 0) {
            b.pop();
        }
    };
    Int10.prototype.toString = function (base) {
        if ((base || 10) != 10) {
            throw new Error("only base 10 is supported");
        }
        var b = this.buf;
        var s = b[b.length - 1].toString();
        for (var i = b.length - 2; i >= 0; --i) {
            s += (max + b[i]).toString().substring(1);
        }
        return s;
    };
    Int10.prototype.valueOf = function () {
        var b = this.buf;
        var v = 0;
        for (var i = b.length - 1; i >= 0; --i) {
            v = v * max + b[i];
        }
        return v;
    };
    Int10.prototype.simplify = function () {
        var b = this.buf;
        return (b.length == 1) ? b[0] : this;
    };
    return Int10;
}());



//# sourceURL=webpack://JSEncrypt/./lib/lib/asn1js/int10.js?`)},"./lib/lib/jsbn/base64.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "b64toBA": () => (/* binding */ b64toBA),
/* harmony export */   "b64tohex": () => (/* binding */ b64tohex),
/* harmony export */   "hex2b64": () => (/* binding */ hex2b64)
/* harmony export */ });
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ "./lib/lib/jsbn/util.js");

var b64map = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
var b64pad = "=";
function hex2b64(h) {
    var i;
    var c;
    var ret = "";
    for (i = 0; i + 3 <= h.length; i += 3) {
        c = parseInt(h.substring(i, i + 3), 16);
        ret += b64map.charAt(c >> 6) + b64map.charAt(c & 63);
    }
    if (i + 1 == h.length) {
        c = parseInt(h.substring(i, i + 1), 16);
        ret += b64map.charAt(c << 2);
    }
    else if (i + 2 == h.length) {
        c = parseInt(h.substring(i, i + 2), 16);
        ret += b64map.charAt(c >> 2) + b64map.charAt((c & 3) << 4);
    }
    while ((ret.length & 3) > 0) {
        ret += b64pad;
    }
    return ret;
}
// convert a base64 string to hex
function b64tohex(s) {
    var ret = "";
    var i;
    var k = 0; // b64 state, 0-3
    var slop = 0;
    for (i = 0; i < s.length; ++i) {
        if (s.charAt(i) == b64pad) {
            break;
        }
        var v = b64map.indexOf(s.charAt(i));
        if (v < 0) {
            continue;
        }
        if (k == 0) {
            ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(v >> 2);
            slop = v & 3;
            k = 1;
        }
        else if (k == 1) {
            ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)((slop << 2) | (v >> 4));
            slop = v & 0xf;
            k = 2;
        }
        else if (k == 2) {
            ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(slop);
            ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(v >> 2);
            slop = v & 3;
            k = 3;
        }
        else {
            ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)((slop << 2) | (v >> 4));
            ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(v & 0xf);
            k = 0;
        }
    }
    if (k == 1) {
        ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(slop << 2);
    }
    return ret;
}
// convert a base64 string to a byte/number array
function b64toBA(s) {
    // piggyback on b64tohex for now, optimize later
    var h = b64tohex(s);
    var i;
    var a = [];
    for (i = 0; 2 * i < h.length; ++i) {
        a[i] = parseInt(h.substring(2 * i, 2 * i + 2), 16);
    }
    return a;
}


//# sourceURL=webpack://JSEncrypt/./lib/lib/jsbn/base64.js?`)},"./lib/lib/jsbn/jsbn.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BigInteger": () => (/* binding */ BigInteger),
/* harmony export */   "intAt": () => (/* binding */ intAt),
/* harmony export */   "nbi": () => (/* binding */ nbi),
/* harmony export */   "nbits": () => (/* binding */ nbits),
/* harmony export */   "nbv": () => (/* binding */ nbv),
/* harmony export */   "parseBigInt": () => (/* binding */ parseBigInt)
/* harmony export */ });
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ "./lib/lib/jsbn/util.js");
// Copyright (c) 2005  Tom Wu
// All Rights Reserved.
// See "LICENSE" for details.
// Basic JavaScript BN library - subset useful for RSA encryption.

// Bits per digit
var dbits;
// JavaScript engine analysis
var canary = 0xdeadbeefcafe;
var j_lm = ((canary & 0xffffff) == 0xefcafe);
//#region
var lowprimes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997];
var lplim = (1 << 26) / lowprimes[lowprimes.length - 1];
//#endregion
// (public) Constructor
var BigInteger = /** @class */ (function () {
    function BigInteger(a, b, c) {
        if (a != null) {
            if ("number" == typeof a) {
                this.fromNumber(a, b, c);
            }
            else if (b == null && "string" != typeof a) {
                this.fromString(a, 256);
            }
            else {
                this.fromString(a, b);
            }
        }
    }
    //#region PUBLIC
    // BigInteger.prototype.toString = bnToString;
    // (public) return string representation in given radix
    BigInteger.prototype.toString = function (b) {
        if (this.s < 0) {
            return "-" + this.negate().toString(b);
        }
        var k;
        if (b == 16) {
            k = 4;
        }
        else if (b == 8) {
            k = 3;
        }
        else if (b == 2) {
            k = 1;
        }
        else if (b == 32) {
            k = 5;
        }
        else if (b == 4) {
            k = 2;
        }
        else {
            return this.toRadix(b);
        }
        var km = (1 << k) - 1;
        var d;
        var m = false;
        var r = "";
        var i = this.t;
        var p = this.DB - (i * this.DB) % k;
        if (i-- > 0) {
            if (p < this.DB && (d = this[i] >> p) > 0) {
                m = true;
                r = (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(d);
            }
            while (i >= 0) {
                if (p < k) {
                    d = (this[i] & ((1 << p) - 1)) << (k - p);
                    d |= this[--i] >> (p += this.DB - k);
                }
                else {
                    d = (this[i] >> (p -= k)) & km;
                    if (p <= 0) {
                        p += this.DB;
                        --i;
                    }
                }
                if (d > 0) {
                    m = true;
                }
                if (m) {
                    r += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(d);
                }
            }
        }
        return m ? r : "0";
    };
    // BigInteger.prototype.negate = bnNegate;
    // (public) -this
    BigInteger.prototype.negate = function () {
        var r = nbi();
        BigInteger.ZERO.subTo(this, r);
        return r;
    };
    // BigInteger.prototype.abs = bnAbs;
    // (public) |this|
    BigInteger.prototype.abs = function () {
        return (this.s < 0) ? this.negate() : this;
    };
    // BigInteger.prototype.compareTo = bnCompareTo;
    // (public) return + if this > a, - if this < a, 0 if equal
    BigInteger.prototype.compareTo = function (a) {
        var r = this.s - a.s;
        if (r != 0) {
            return r;
        }
        var i = this.t;
        r = i - a.t;
        if (r != 0) {
            return (this.s < 0) ? -r : r;
        }
        while (--i >= 0) {
            if ((r = this[i] - a[i]) != 0) {
                return r;
            }
        }
        return 0;
    };
    // BigInteger.prototype.bitLength = bnBitLength;
    // (public) return the number of bits in "this"
    BigInteger.prototype.bitLength = function () {
        if (this.t <= 0) {
            return 0;
        }
        return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ (this.s & this.DM));
    };
    // BigInteger.prototype.mod = bnMod;
    // (public) this mod a
    BigInteger.prototype.mod = function (a) {
        var r = nbi();
        this.abs().divRemTo(a, null, r);
        if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) {
            a.subTo(r, r);
        }
        return r;
    };
    // BigInteger.prototype.modPowInt = bnModPowInt;
    // (public) this^e % m, 0 <= e < 2^32
    BigInteger.prototype.modPowInt = function (e, m) {
        var z;
        if (e < 256 || m.isEven()) {
            z = new Classic(m);
        }
        else {
            z = new Montgomery(m);
        }
        return this.exp(e, z);
    };
    // BigInteger.prototype.clone = bnClone;
    // (public)
    BigInteger.prototype.clone = function () {
        var r = nbi();
        this.copyTo(r);
        return r;
    };
    // BigInteger.prototype.intValue = bnIntValue;
    // (public) return value as integer
    BigInteger.prototype.intValue = function () {
        if (this.s < 0) {
            if (this.t == 1) {
                return this[0] - this.DV;
            }
            else if (this.t == 0) {
                return -1;
            }
        }
        else if (this.t == 1) {
            return this[0];
        }
        else if (this.t == 0) {
            return 0;
        }
        // assumes 16 < DB < 32
        return ((this[1] & ((1 << (32 - this.DB)) - 1)) << this.DB) | this[0];
    };
    // BigInteger.prototype.byteValue = bnByteValue;
    // (public) return value as byte
    BigInteger.prototype.byteValue = function () {
        return (this.t == 0) ? this.s : (this[0] << 24) >> 24;
    };
    // BigInteger.prototype.shortValue = bnShortValue;
    // (public) return value as short (assumes DB>=16)
    BigInteger.prototype.shortValue = function () {
        return (this.t == 0) ? this.s : (this[0] << 16) >> 16;
    };
    // BigInteger.prototype.signum = bnSigNum;
    // (public) 0 if this == 0, 1 if this > 0
    BigInteger.prototype.signum = function () {
        if (this.s < 0) {
            return -1;
        }
        else if (this.t <= 0 || (this.t == 1 && this[0] <= 0)) {
            return 0;
        }
        else {
            return 1;
        }
    };
    // BigInteger.prototype.toByteArray = bnToByteArray;
    // (public) convert to bigendian byte array
    BigInteger.prototype.toByteArray = function () {
        var i = this.t;
        var r = [];
        r[0] = this.s;
        var p = this.DB - (i * this.DB) % 8;
        var d;
        var k = 0;
        if (i-- > 0) {
            if (p < this.DB && (d = this[i] >> p) != (this.s & this.DM) >> p) {
                r[k++] = d | (this.s << (this.DB - p));
            }
            while (i >= 0) {
                if (p < 8) {
                    d = (this[i] & ((1 << p) - 1)) << (8 - p);
                    d |= this[--i] >> (p += this.DB - 8);
                }
                else {
                    d = (this[i] >> (p -= 8)) & 0xff;
                    if (p <= 0) {
                        p += this.DB;
                        --i;
                    }
                }
                if ((d & 0x80) != 0) {
                    d |= -256;
                }
                if (k == 0 && (this.s & 0x80) != (d & 0x80)) {
                    ++k;
                }
                if (k > 0 || d != this.s) {
                    r[k++] = d;
                }
            }
        }
        return r;
    };
    // BigInteger.prototype.equals = bnEquals;
    BigInteger.prototype.equals = function (a) {
        return (this.compareTo(a) == 0);
    };
    // BigInteger.prototype.min = bnMin;
    BigInteger.prototype.min = function (a) {
        return (this.compareTo(a) < 0) ? this : a;
    };
    // BigInteger.prototype.max = bnMax;
    BigInteger.prototype.max = function (a) {
        return (this.compareTo(a) > 0) ? this : a;
    };
    // BigInteger.prototype.and = bnAnd;
    BigInteger.prototype.and = function (a) {
        var r = nbi();
        this.bitwiseTo(a, _util__WEBPACK_IMPORTED_MODULE_0__.op_and, r);
        return r;
    };
    // BigInteger.prototype.or = bnOr;
    BigInteger.prototype.or = function (a) {
        var r = nbi();
        this.bitwiseTo(a, _util__WEBPACK_IMPORTED_MODULE_0__.op_or, r);
        return r;
    };
    // BigInteger.prototype.xor = bnXor;
    BigInteger.prototype.xor = function (a) {
        var r = nbi();
        this.bitwiseTo(a, _util__WEBPACK_IMPORTED_MODULE_0__.op_xor, r);
        return r;
    };
    // BigInteger.prototype.andNot = bnAndNot;
    BigInteger.prototype.andNot = function (a) {
        var r = nbi();
        this.bitwiseTo(a, _util__WEBPACK_IMPORTED_MODULE_0__.op_andnot, r);
        return r;
    };
    // BigInteger.prototype.not = bnNot;
    // (public) ~this
    BigInteger.prototype.not = function () {
        var r = nbi();
        for (var i = 0; i < this.t; ++i) {
            r[i] = this.DM & ~this[i];
        }
        r.t = this.t;
        r.s = ~this.s;
        return r;
    };
    // BigInteger.prototype.shiftLeft = bnShiftLeft;
    // (public) this << n
    BigInteger.prototype.shiftLeft = function (n) {
        var r = nbi();
        if (n < 0) {
            this.rShiftTo(-n, r);
        }
        else {
            this.lShiftTo(n, r);
        }
        return r;
    };
    // BigInteger.prototype.shiftRight = bnShiftRight;
    // (public) this >> n
    BigInteger.prototype.shiftRight = function (n) {
        var r = nbi();
        if (n < 0) {
            this.lShiftTo(-n, r);
        }
        else {
            this.rShiftTo(n, r);
        }
        return r;
    };
    // BigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;
    // (public) returns index of lowest 1-bit (or -1 if none)
    BigInteger.prototype.getLowestSetBit = function () {
        for (var i = 0; i < this.t; ++i) {
            if (this[i] != 0) {
                return i * this.DB + (0,_util__WEBPACK_IMPORTED_MODULE_0__.lbit)(this[i]);
            }
        }
        if (this.s < 0) {
            return this.t * this.DB;
        }
        return -1;
    };
    // BigInteger.prototype.bitCount = bnBitCount;
    // (public) return number of set bits
    BigInteger.prototype.bitCount = function () {
        var r = 0;
        var x = this.s & this.DM;
        for (var i = 0; i < this.t; ++i) {
            r += (0,_util__WEBPACK_IMPORTED_MODULE_0__.cbit)(this[i] ^ x);
        }
        return r;
    };
    // BigInteger.prototype.testBit = bnTestBit;
    // (public) true iff nth bit is set
    BigInteger.prototype.testBit = function (n) {
        var j = Math.floor(n / this.DB);
        if (j >= this.t) {
            return (this.s != 0);
        }
        return ((this[j] & (1 << (n % this.DB))) != 0);
    };
    // BigInteger.prototype.setBit = bnSetBit;
    // (public) this | (1<<n)
    BigInteger.prototype.setBit = function (n) {
        return this.changeBit(n, _util__WEBPACK_IMPORTED_MODULE_0__.op_or);
    };
    // BigInteger.prototype.clearBit = bnClearBit;
    // (public) this & ~(1<<n)
    BigInteger.prototype.clearBit = function (n) {
        return this.changeBit(n, _util__WEBPACK_IMPORTED_MODULE_0__.op_andnot);
    };
    // BigInteger.prototype.flipBit = bnFlipBit;
    // (public) this ^ (1<<n)
    BigInteger.prototype.flipBit = function (n) {
        return this.changeBit(n, _util__WEBPACK_IMPORTED_MODULE_0__.op_xor);
    };
    // BigInteger.prototype.add = bnAdd;
    // (public) this + a
    BigInteger.prototype.add = function (a) {
        var r = nbi();
        this.addTo(a, r);
        return r;
    };
    // BigInteger.prototype.subtract = bnSubtract;
    // (public) this - a
    BigInteger.prototype.subtract = function (a) {
        var r = nbi();
        this.subTo(a, r);
        return r;
    };
    // BigInteger.prototype.multiply = bnMultiply;
    // (public) this * a
    BigInteger.prototype.multiply = function (a) {
        var r = nbi();
        this.multiplyTo(a, r);
        return r;
    };
    // BigInteger.prototype.divide = bnDivide;
    // (public) this / a
    BigInteger.prototype.divide = function (a) {
        var r = nbi();
        this.divRemTo(a, r, null);
        return r;
    };
    // BigInteger.prototype.remainder = bnRemainder;
    // (public) this % a
    BigInteger.prototype.remainder = function (a) {
        var r = nbi();
        this.divRemTo(a, null, r);
        return r;
    };
    // BigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;
    // (public) [this/a,this%a]
    BigInteger.prototype.divideAndRemainder = function (a) {
        var q = nbi();
        var r = nbi();
        this.divRemTo(a, q, r);
        return [q, r];
    };
    // BigInteger.prototype.modPow = bnModPow;
    // (public) this^e % m (HAC 14.85)
    BigInteger.prototype.modPow = function (e, m) {
        var i = e.bitLength();
        var k;
        var r = nbv(1);
        var z;
        if (i <= 0) {
            return r;
        }
        else if (i < 18) {
            k = 1;
        }
        else if (i < 48) {
            k = 3;
        }
        else if (i < 144) {
            k = 4;
        }
        else if (i < 768) {
            k = 5;
        }
        else {
            k = 6;
        }
        if (i < 8) {
            z = new Classic(m);
        }
        else if (m.isEven()) {
            z = new Barrett(m);
        }
        else {
            z = new Montgomery(m);
        }
        // precomputation
        var g = [];
        var n = 3;
        var k1 = k - 1;
        var km = (1 << k) - 1;
        g[1] = z.convert(this);
        if (k > 1) {
            var g2 = nbi();
            z.sqrTo(g[1], g2);
            while (n <= km) {
                g[n] = nbi();
                z.mulTo(g2, g[n - 2], g[n]);
                n += 2;
            }
        }
        var j = e.t - 1;
        var w;
        var is1 = true;
        var r2 = nbi();
        var t;
        i = nbits(e[j]) - 1;
        while (j >= 0) {
            if (i >= k1) {
                w = (e[j] >> (i - k1)) & km;
            }
            else {
                w = (e[j] & ((1 << (i + 1)) - 1)) << (k1 - i);
                if (j > 0) {
                    w |= e[j - 1] >> (this.DB + i - k1);
                }
            }
            n = k;
            while ((w & 1) == 0) {
                w >>= 1;
                --n;
            }
            if ((i -= n) < 0) {
                i += this.DB;
                --j;
            }
            if (is1) { // ret == 1, don't bother squaring or multiplying it
                g[w].copyTo(r);
                is1 = false;
            }
            else {
                while (n > 1) {
                    z.sqrTo(r, r2);
                    z.sqrTo(r2, r);
                    n -= 2;
                }
                if (n > 0) {
                    z.sqrTo(r, r2);
                }
                else {
                    t = r;
                    r = r2;
                    r2 = t;
                }
                z.mulTo(r2, g[w], r);
            }
            while (j >= 0 && (e[j] & (1 << i)) == 0) {
                z.sqrTo(r, r2);
                t = r;
                r = r2;
                r2 = t;
                if (--i < 0) {
                    i = this.DB - 1;
                    --j;
                }
            }
        }
        return z.revert(r);
    };
    // BigInteger.prototype.modInverse = bnModInverse;
    // (public) 1/this % m (HAC 14.61)
    BigInteger.prototype.modInverse = function (m) {
        var ac = m.isEven();
        if ((this.isEven() && ac) || m.signum() == 0) {
            return BigInteger.ZERO;
        }
        var u = m.clone();
        var v = this.clone();
        var a = nbv(1);
        var b = nbv(0);
        var c = nbv(0);
        var d = nbv(1);
        while (u.signum() != 0) {
            while (u.isEven()) {
                u.rShiftTo(1, u);
                if (ac) {
                    if (!a.isEven() || !b.isEven()) {
                        a.addTo(this, a);
                        b.subTo(m, b);
                    }
                    a.rShiftTo(1, a);
                }
                else if (!b.isEven()) {
                    b.subTo(m, b);
                }
                b.rShiftTo(1, b);
            }
            while (v.isEven()) {
                v.rShiftTo(1, v);
                if (ac) {
                    if (!c.isEven() || !d.isEven()) {
                        c.addTo(this, c);
                        d.subTo(m, d);
                    }
                    c.rShiftTo(1, c);
                }
                else if (!d.isEven()) {
                    d.subTo(m, d);
                }
                d.rShiftTo(1, d);
            }
            if (u.compareTo(v) >= 0) {
                u.subTo(v, u);
                if (ac) {
                    a.subTo(c, a);
                }
                b.subTo(d, b);
            }
            else {
                v.subTo(u, v);
                if (ac) {
                    c.subTo(a, c);
                }
                d.subTo(b, d);
            }
        }
        if (v.compareTo(BigInteger.ONE) != 0) {
            return BigInteger.ZERO;
        }
        if (d.compareTo(m) >= 0) {
            return d.subtract(m);
        }
        if (d.signum() < 0) {
            d.addTo(m, d);
        }
        else {
            return d;
        }
        if (d.signum() < 0) {
            return d.add(m);
        }
        else {
            return d;
        }
    };
    // BigInteger.prototype.pow = bnPow;
    // (public) this^e
    BigInteger.prototype.pow = function (e) {
        return this.exp(e, new NullExp());
    };
    // BigInteger.prototype.gcd = bnGCD;
    // (public) gcd(this,a) (HAC 14.54)
    BigInteger.prototype.gcd = function (a) {
        var x = (this.s < 0) ? this.negate() : this.clone();
        var y = (a.s < 0) ? a.negate() : a.clone();
        if (x.compareTo(y) < 0) {
            var t = x;
            x = y;
            y = t;
        }
        var i = x.getLowestSetBit();
        var g = y.getLowestSetBit();
        if (g < 0) {
            return x;
        }
        if (i < g) {
            g = i;
        }
        if (g > 0) {
            x.rShiftTo(g, x);
            y.rShiftTo(g, y);
        }
        while (x.signum() > 0) {
            if ((i = x.getLowestSetBit()) > 0) {
                x.rShiftTo(i, x);
            }
            if ((i = y.getLowestSetBit()) > 0) {
                y.rShiftTo(i, y);
            }
            if (x.compareTo(y) >= 0) {
                x.subTo(y, x);
                x.rShiftTo(1, x);
            }
            else {
                y.subTo(x, y);
                y.rShiftTo(1, y);
            }
        }
        if (g > 0) {
            y.lShiftTo(g, y);
        }
        return y;
    };
    // BigInteger.prototype.isProbablePrime = bnIsProbablePrime;
    // (public) test primality with certainty >= 1-.5^t
    BigInteger.prototype.isProbablePrime = function (t) {
        var i;
        var x = this.abs();
        if (x.t == 1 && x[0] <= lowprimes[lowprimes.length - 1]) {
            for (i = 0; i < lowprimes.length; ++i) {
                if (x[0] == lowprimes[i]) {
                    return true;
                }
            }
            return false;
        }
        if (x.isEven()) {
            return false;
        }
        i = 1;
        while (i < lowprimes.length) {
            var m = lowprimes[i];
            var j = i + 1;
            while (j < lowprimes.length && m < lplim) {
                m *= lowprimes[j++];
            }
            m = x.modInt(m);
            while (i < j) {
                if (m % lowprimes[i++] == 0) {
                    return false;
                }
            }
        }
        return x.millerRabin(t);
    };
    //#endregion PUBLIC
    //#region PROTECTED
    // BigInteger.prototype.copyTo = bnpCopyTo;
    // (protected) copy this to r
    BigInteger.prototype.copyTo = function (r) {
        for (var i = this.t - 1; i >= 0; --i) {
            r[i] = this[i];
        }
        r.t = this.t;
        r.s = this.s;
    };
    // BigInteger.prototype.fromInt = bnpFromInt;
    // (protected) set from integer value x, -DV <= x < DV
    BigInteger.prototype.fromInt = function (x) {
        this.t = 1;
        this.s = (x < 0) ? -1 : 0;
        if (x > 0) {
            this[0] = x;
        }
        else if (x < -1) {
            this[0] = x + this.DV;
        }
        else {
            this.t = 0;
        }
    };
    // BigInteger.prototype.fromString = bnpFromString;
    // (protected) set from string and radix
    BigInteger.prototype.fromString = function (s, b) {
        var k;
        if (b == 16) {
            k = 4;
        }
        else if (b == 8) {
            k = 3;
        }
        else if (b == 256) {
            k = 8;
            /* byte array */
        }
        else if (b == 2) {
            k = 1;
        }
        else if (b == 32) {
            k = 5;
        }
        else if (b == 4) {
            k = 2;
        }
        else {
            this.fromRadix(s, b);
            return;
        }
        this.t = 0;
        this.s = 0;
        var i = s.length;
        var mi = false;
        var sh = 0;
        while (--i >= 0) {
            var x = (k == 8) ? (+s[i]) & 0xff : intAt(s, i);
            if (x < 0) {
                if (s.charAt(i) == "-") {
                    mi = true;
                }
                continue;
            }
            mi = false;
            if (sh == 0) {
                this[this.t++] = x;
            }
            else if (sh + k > this.DB) {
                this[this.t - 1] |= (x & ((1 << (this.DB - sh)) - 1)) << sh;
                this[this.t++] = (x >> (this.DB - sh));
            }
            else {
                this[this.t - 1] |= x << sh;
            }
            sh += k;
            if (sh >= this.DB) {
                sh -= this.DB;
            }
        }
        if (k == 8 && ((+s[0]) & 0x80) != 0) {
            this.s = -1;
            if (sh > 0) {
                this[this.t - 1] |= ((1 << (this.DB - sh)) - 1) << sh;
            }
        }
        this.clamp();
        if (mi) {
            BigInteger.ZERO.subTo(this, this);
        }
    };
    // BigInteger.prototype.clamp = bnpClamp;
    // (protected) clamp off excess high words
    BigInteger.prototype.clamp = function () {
        var c = this.s & this.DM;
        while (this.t > 0 && this[this.t - 1] == c) {
            --this.t;
        }
    };
    // BigInteger.prototype.dlShiftTo = bnpDLShiftTo;
    // (protected) r = this << n*DB
    BigInteger.prototype.dlShiftTo = function (n, r) {
        var i;
        for (i = this.t - 1; i >= 0; --i) {
            r[i + n] = this[i];
        }
        for (i = n - 1; i >= 0; --i) {
            r[i] = 0;
        }
        r.t = this.t + n;
        r.s = this.s;
    };
    // BigInteger.prototype.drShiftTo = bnpDRShiftTo;
    // (protected) r = this >> n*DB
    BigInteger.prototype.drShiftTo = function (n, r) {
        for (var i = n; i < this.t; ++i) {
            r[i - n] = this[i];
        }
        r.t = Math.max(this.t - n, 0);
        r.s = this.s;
    };
    // BigInteger.prototype.lShiftTo = bnpLShiftTo;
    // (protected) r = this << n
    BigInteger.prototype.lShiftTo = function (n, r) {
        var bs = n % this.DB;
        var cbs = this.DB - bs;
        var bm = (1 << cbs) - 1;
        var ds = Math.floor(n / this.DB);
        var c = (this.s << bs) & this.DM;
        for (var i = this.t - 1; i >= 0; --i) {
            r[i + ds + 1] = (this[i] >> cbs) | c;
            c = (this[i] & bm) << bs;
        }
        for (var i = ds - 1; i >= 0; --i) {
            r[i] = 0;
        }
        r[ds] = c;
        r.t = this.t + ds + 1;
        r.s = this.s;
        r.clamp();
    };
    // BigInteger.prototype.rShiftTo = bnpRShiftTo;
    // (protected) r = this >> n
    BigInteger.prototype.rShiftTo = function (n, r) {
        r.s = this.s;
        var ds = Math.floor(n / this.DB);
        if (ds >= this.t) {
            r.t = 0;
            return;
        }
        var bs = n % this.DB;
        var cbs = this.DB - bs;
        var bm = (1 << bs) - 1;
        r[0] = this[ds] >> bs;
        for (var i = ds + 1; i < this.t; ++i) {
            r[i - ds - 1] |= (this[i] & bm) << cbs;
            r[i - ds] = this[i] >> bs;
        }
        if (bs > 0) {
            r[this.t - ds - 1] |= (this.s & bm) << cbs;
        }
        r.t = this.t - ds;
        r.clamp();
    };
    // BigInteger.prototype.subTo = bnpSubTo;
    // (protected) r = this - a
    BigInteger.prototype.subTo = function (a, r) {
        var i = 0;
        var c = 0;
        var m = Math.min(a.t, this.t);
        while (i < m) {
            c += this[i] - a[i];
            r[i++] = c & this.DM;
            c >>= this.DB;
        }
        if (a.t < this.t) {
            c -= a.s;
            while (i < this.t) {
                c += this[i];
                r[i++] = c & this.DM;
                c >>= this.DB;
            }
            c += this.s;
        }
        else {
            c += this.s;
            while (i < a.t) {
                c -= a[i];
                r[i++] = c & this.DM;
                c >>= this.DB;
            }
            c -= a.s;
        }
        r.s = (c < 0) ? -1 : 0;
        if (c < -1) {
            r[i++] = this.DV + c;
        }
        else if (c > 0) {
            r[i++] = c;
        }
        r.t = i;
        r.clamp();
    };
    // BigInteger.prototype.multiplyTo = bnpMultiplyTo;
    // (protected) r = this * a, r != this,a (HAC 14.12)
    // "this" should be the larger one if appropriate.
    BigInteger.prototype.multiplyTo = function (a, r) {
        var x = this.abs();
        var y = a.abs();
        var i = x.t;
        r.t = i + y.t;
        while (--i >= 0) {
            r[i] = 0;
        }
        for (i = 0; i < y.t; ++i) {
            r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);
        }
        r.s = 0;
        r.clamp();
        if (this.s != a.s) {
            BigInteger.ZERO.subTo(r, r);
        }
    };
    // BigInteger.prototype.squareTo = bnpSquareTo;
    // (protected) r = this^2, r != this (HAC 14.16)
    BigInteger.prototype.squareTo = function (r) {
        var x = this.abs();
        var i = r.t = 2 * x.t;
        while (--i >= 0) {
            r[i] = 0;
        }
        for (i = 0; i < x.t - 1; ++i) {
            var c = x.am(i, x[i], r, 2 * i, 0, 1);
            if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {
                r[i + x.t] -= x.DV;
                r[i + x.t + 1] = 1;
            }
        }
        if (r.t > 0) {
            r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);
        }
        r.s = 0;
        r.clamp();
    };
    // BigInteger.prototype.divRemTo = bnpDivRemTo;
    // (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)
    // r != q, this != m.  q or r may be null.
    BigInteger.prototype.divRemTo = function (m, q, r) {
        var pm = m.abs();
        if (pm.t <= 0) {
            return;
        }
        var pt = this.abs();
        if (pt.t < pm.t) {
            if (q != null) {
                q.fromInt(0);
            }
            if (r != null) {
                this.copyTo(r);
            }
            return;
        }
        if (r == null) {
            r = nbi();
        }
        var y = nbi();
        var ts = this.s;
        var ms = m.s;
        var nsh = this.DB - nbits(pm[pm.t - 1]); // normalize modulus
        if (nsh > 0) {
            pm.lShiftTo(nsh, y);
            pt.lShiftTo(nsh, r);
        }
        else {
            pm.copyTo(y);
            pt.copyTo(r);
        }
        var ys = y.t;
        var y0 = y[ys - 1];
        if (y0 == 0) {
            return;
        }
        var yt = y0 * (1 << this.F1) + ((ys > 1) ? y[ys - 2] >> this.F2 : 0);
        var d1 = this.FV / yt;
        var d2 = (1 << this.F1) / yt;
        var e = 1 << this.F2;
        var i = r.t;
        var j = i - ys;
        var t = (q == null) ? nbi() : q;
        y.dlShiftTo(j, t);
        if (r.compareTo(t) >= 0) {
            r[r.t++] = 1;
            r.subTo(t, r);
        }
        BigInteger.ONE.dlShiftTo(ys, t);
        t.subTo(y, y); // "negative" y so we can replace sub with am later
        while (y.t < ys) {
            y[y.t++] = 0;
        }
        while (--j >= 0) {
            // Estimate quotient digit
            var qd = (r[--i] == y0) ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);
            if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) { // Try it out
                y.dlShiftTo(j, t);
                r.subTo(t, r);
                while (r[i] < --qd) {
                    r.subTo(t, r);
                }
            }
        }
        if (q != null) {
            r.drShiftTo(ys, q);
            if (ts != ms) {
                BigInteger.ZERO.subTo(q, q);
            }
        }
        r.t = ys;
        r.clamp();
        if (nsh > 0) {
            r.rShiftTo(nsh, r);
        } // Denormalize remainder
        if (ts < 0) {
            BigInteger.ZERO.subTo(r, r);
        }
    };
    // BigInteger.prototype.invDigit = bnpInvDigit;
    // (protected) return "-1/this % 2^DB"; useful for Mont. reduction
    // justification:
    //         xy == 1 (mod m)
    //         xy =  1+km
    //   xy(2-xy) = (1+km)(1-km)
    // x[y(2-xy)] = 1-k^2m^2
    // x[y(2-xy)] == 1 (mod m^2)
    // if y is 1/x mod m, then y(2-xy) is 1/x mod m^2
    // should reduce x and y(2-xy) by m^2 at each step to keep size bounded.
    // JS multiply "overflows" differently from C/C++, so care is needed here.
    BigInteger.prototype.invDigit = function () {
        if (this.t < 1) {
            return 0;
        }
        var x = this[0];
        if ((x & 1) == 0) {
            return 0;
        }
        var y = x & 3; // y == 1/x mod 2^2
        y = (y * (2 - (x & 0xf) * y)) & 0xf; // y == 1/x mod 2^4
        y = (y * (2 - (x & 0xff) * y)) & 0xff; // y == 1/x mod 2^8
        y = (y * (2 - (((x & 0xffff) * y) & 0xffff))) & 0xffff; // y == 1/x mod 2^16
        // last step - calculate inverse mod DV directly;
        // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints
        y = (y * (2 - x * y % this.DV)) % this.DV; // y == 1/x mod 2^dbits
        // we really want the negative inverse, and -DV < y < DV
        return (y > 0) ? this.DV - y : -y;
    };
    // BigInteger.prototype.isEven = bnpIsEven;
    // (protected) true iff this is even
    BigInteger.prototype.isEven = function () {
        return ((this.t > 0) ? (this[0] & 1) : this.s) == 0;
    };
    // BigInteger.prototype.exp = bnpExp;
    // (protected) this^e, e < 2^32, doing sqr and mul with "r" (HAC 14.79)
    BigInteger.prototype.exp = function (e, z) {
        if (e > 0xffffffff || e < 1) {
            return BigInteger.ONE;
        }
        var r = nbi();
        var r2 = nbi();
        var g = z.convert(this);
        var i = nbits(e) - 1;
        g.copyTo(r);
        while (--i >= 0) {
            z.sqrTo(r, r2);
            if ((e & (1 << i)) > 0) {
                z.mulTo(r2, g, r);
            }
            else {
                var t = r;
                r = r2;
                r2 = t;
            }
        }
        return z.revert(r);
    };
    // BigInteger.prototype.chunkSize = bnpChunkSize;
    // (protected) return x s.t. r^x < DV
    BigInteger.prototype.chunkSize = function (r) {
        return Math.floor(Math.LN2 * this.DB / Math.log(r));
    };
    // BigInteger.prototype.toRadix = bnpToRadix;
    // (protected) convert to radix string
    BigInteger.prototype.toRadix = function (b) {
        if (b == null) {
            b = 10;
        }
        if (this.signum() == 0 || b < 2 || b > 36) {
            return "0";
        }
        var cs = this.chunkSize(b);
        var a = Math.pow(b, cs);
        var d = nbv(a);
        var y = nbi();
        var z = nbi();
        var r = "";
        this.divRemTo(d, y, z);
        while (y.signum() > 0) {
            r = (a + z.intValue()).toString(b).substr(1) + r;
            y.divRemTo(d, y, z);
        }
        return z.intValue().toString(b) + r;
    };
    // BigInteger.prototype.fromRadix = bnpFromRadix;
    // (protected) convert from radix string
    BigInteger.prototype.fromRadix = function (s, b) {
        this.fromInt(0);
        if (b == null) {
            b = 10;
        }
        var cs = this.chunkSize(b);
        var d = Math.pow(b, cs);
        var mi = false;
        var j = 0;
        var w = 0;
        for (var i = 0; i < s.length; ++i) {
            var x = intAt(s, i);
            if (x < 0) {
                if (s.charAt(i) == "-" && this.signum() == 0) {
                    mi = true;
                }
                continue;
            }
            w = b * w + x;
            if (++j >= cs) {
                this.dMultiply(d);
                this.dAddOffset(w, 0);
                j = 0;
                w = 0;
            }
        }
        if (j > 0) {
            this.dMultiply(Math.pow(b, j));
            this.dAddOffset(w, 0);
        }
        if (mi) {
            BigInteger.ZERO.subTo(this, this);
        }
    };
    // BigInteger.prototype.fromNumber = bnpFromNumber;
    // (protected) alternate constructor
    BigInteger.prototype.fromNumber = function (a, b, c) {
        if ("number" == typeof b) {
            // new BigInteger(int,int,RNG)
            if (a < 2) {
                this.fromInt(1);
            }
            else {
                this.fromNumber(a, c);
                if (!this.testBit(a - 1)) {
                    // force MSB set
                    this.bitwiseTo(BigInteger.ONE.shiftLeft(a - 1), _util__WEBPACK_IMPORTED_MODULE_0__.op_or, this);
                }
                if (this.isEven()) {
                    this.dAddOffset(1, 0);
                } // force odd
                while (!this.isProbablePrime(b)) {
                    this.dAddOffset(2, 0);
                    if (this.bitLength() > a) {
                        this.subTo(BigInteger.ONE.shiftLeft(a - 1), this);
                    }
                }
            }
        }
        else {
            // new BigInteger(int,RNG)
            var x = [];
            var t = a & 7;
            x.length = (a >> 3) + 1;
            b.nextBytes(x);
            if (t > 0) {
                x[0] &= ((1 << t) - 1);
            }
            else {
                x[0] = 0;
            }
            this.fromString(x, 256);
        }
    };
    // BigInteger.prototype.bitwiseTo = bnpBitwiseTo;
    // (protected) r = this op a (bitwise)
    BigInteger.prototype.bitwiseTo = function (a, op, r) {
        var i;
        var f;
        var m = Math.min(a.t, this.t);
        for (i = 0; i < m; ++i) {
            r[i] = op(this[i], a[i]);
        }
        if (a.t < this.t) {
            f = a.s & this.DM;
            for (i = m; i < this.t; ++i) {
                r[i] = op(this[i], f);
            }
            r.t = this.t;
        }
        else {
            f = this.s & this.DM;
            for (i = m; i < a.t; ++i) {
                r[i] = op(f, a[i]);
            }
            r.t = a.t;
        }
        r.s = op(this.s, a.s);
        r.clamp();
    };
    // BigInteger.prototype.changeBit = bnpChangeBit;
    // (protected) this op (1<<n)
    BigInteger.prototype.changeBit = function (n, op) {
        var r = BigInteger.ONE.shiftLeft(n);
        this.bitwiseTo(r, op, r);
        return r;
    };
    // BigInteger.prototype.addTo = bnpAddTo;
    // (protected) r = this + a
    BigInteger.prototype.addTo = function (a, r) {
        var i = 0;
        var c = 0;
        var m = Math.min(a.t, this.t);
        while (i < m) {
            c += this[i] + a[i];
            r[i++] = c & this.DM;
            c >>= this.DB;
        }
        if (a.t < this.t) {
            c += a.s;
            while (i < this.t) {
                c += this[i];
                r[i++] = c & this.DM;
                c >>= this.DB;
            }
            c += this.s;
        }
        else {
            c += this.s;
            while (i < a.t) {
                c += a[i];
                r[i++] = c & this.DM;
                c >>= this.DB;
            }
            c += a.s;
        }
        r.s = (c < 0) ? -1 : 0;
        if (c > 0) {
            r[i++] = c;
        }
        else if (c < -1) {
            r[i++] = this.DV + c;
        }
        r.t = i;
        r.clamp();
    };
    // BigInteger.prototype.dMultiply = bnpDMultiply;
    // (protected) this *= n, this >= 0, 1 < n < DV
    BigInteger.prototype.dMultiply = function (n) {
        this[this.t] = this.am(0, n - 1, this, 0, 0, this.t);
        ++this.t;
        this.clamp();
    };
    // BigInteger.prototype.dAddOffset = bnpDAddOffset;
    // (protected) this += n << w words, this >= 0
    BigInteger.prototype.dAddOffset = function (n, w) {
        if (n == 0) {
            return;
        }
        while (this.t <= w) {
            this[this.t++] = 0;
        }
        this[w] += n;
        while (this[w] >= this.DV) {
            this[w] -= this.DV;
            if (++w >= this.t) {
                this[this.t++] = 0;
            }
            ++this[w];
        }
    };
    // BigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;
    // (protected) r = lower n words of "this * a", a.t <= n
    // "this" should be the larger one if appropriate.
    BigInteger.prototype.multiplyLowerTo = function (a, n, r) {
        var i = Math.min(this.t + a.t, n);
        r.s = 0; // assumes a,this >= 0
        r.t = i;
        while (i > 0) {
            r[--i] = 0;
        }
        for (var j = r.t - this.t; i < j; ++i) {
            r[i + this.t] = this.am(0, a[i], r, i, 0, this.t);
        }
        for (var j = Math.min(a.t, n); i < j; ++i) {
            this.am(0, a[i], r, i, 0, n - i);
        }
        r.clamp();
    };
    // BigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;
    // (protected) r = "this * a" without lower n words, n > 0
    // "this" should be the larger one if appropriate.
    BigInteger.prototype.multiplyUpperTo = function (a, n, r) {
        --n;
        var i = r.t = this.t + a.t - n;
        r.s = 0; // assumes a,this >= 0
        while (--i >= 0) {
            r[i] = 0;
        }
        for (i = Math.max(n - this.t, 0); i < a.t; ++i) {
            r[this.t + i - n] = this.am(n - i, a[i], r, 0, 0, this.t + i - n);
        }
        r.clamp();
        r.drShiftTo(1, r);
    };
    // BigInteger.prototype.modInt = bnpModInt;
    // (protected) this % n, n < 2^26
    BigInteger.prototype.modInt = function (n) {
        if (n <= 0) {
            return 0;
        }
        var d = this.DV % n;
        var r = (this.s < 0) ? n - 1 : 0;
        if (this.t > 0) {
            if (d == 0) {
                r = this[0] % n;
            }
            else {
                for (var i = this.t - 1; i >= 0; --i) {
                    r = (d * r + this[i]) % n;
                }
            }
        }
        return r;
    };
    // BigInteger.prototype.millerRabin = bnpMillerRabin;
    // (protected) true if probably prime (HAC 4.24, Miller-Rabin)
    BigInteger.prototype.millerRabin = function (t) {
        var n1 = this.subtract(BigInteger.ONE);
        var k = n1.getLowestSetBit();
        if (k <= 0) {
            return false;
        }
        var r = n1.shiftRight(k);
        t = (t + 1) >> 1;
        if (t > lowprimes.length) {
            t = lowprimes.length;
        }
        var a = nbi();
        for (var i = 0; i < t; ++i) {
            // Pick bases at random, instead of starting at 2
            a.fromInt(lowprimes[Math.floor(Math.random() * lowprimes.length)]);
            var y = a.modPow(r, this);
            if (y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0) {
                var j = 1;
                while (j++ < k && y.compareTo(n1) != 0) {
                    y = y.modPowInt(2, this);
                    if (y.compareTo(BigInteger.ONE) == 0) {
                        return false;
                    }
                }
                if (y.compareTo(n1) != 0) {
                    return false;
                }
            }
        }
        return true;
    };
    // BigInteger.prototype.square = bnSquare;
    // (public) this^2
    BigInteger.prototype.square = function () {
        var r = nbi();
        this.squareTo(r);
        return r;
    };
    //#region ASYNC
    // Public API method
    BigInteger.prototype.gcda = function (a, callback) {
        var x = (this.s < 0) ? this.negate() : this.clone();
        var y = (a.s < 0) ? a.negate() : a.clone();
        if (x.compareTo(y) < 0) {
            var t = x;
            x = y;
            y = t;
        }
        var i = x.getLowestSetBit();
        var g = y.getLowestSetBit();
        if (g < 0) {
            callback(x);
            return;
        }
        if (i < g) {
            g = i;
        }
        if (g > 0) {
            x.rShiftTo(g, x);
            y.rShiftTo(g, y);
        }
        // Workhorse of the algorithm, gets called 200 - 800 times per 512 bit keygen.
        var gcda1 = function () {
            if ((i = x.getLowestSetBit()) > 0) {
                x.rShiftTo(i, x);
            }
            if ((i = y.getLowestSetBit()) > 0) {
                y.rShiftTo(i, y);
            }
            if (x.compareTo(y) >= 0) {
                x.subTo(y, x);
                x.rShiftTo(1, x);
            }
            else {
                y.subTo(x, y);
                y.rShiftTo(1, y);
            }
            if (!(x.signum() > 0)) {
                if (g > 0) {
                    y.lShiftTo(g, y);
                }
                setTimeout(function () { callback(y); }, 0); // escape
            }
            else {
                setTimeout(gcda1, 0);
            }
        };
        setTimeout(gcda1, 10);
    };
    // (protected) alternate constructor
    BigInteger.prototype.fromNumberAsync = function (a, b, c, callback) {
        if ("number" == typeof b) {
            if (a < 2) {
                this.fromInt(1);
            }
            else {
                this.fromNumber(a, c);
                if (!this.testBit(a - 1)) {
                    this.bitwiseTo(BigInteger.ONE.shiftLeft(a - 1), _util__WEBPACK_IMPORTED_MODULE_0__.op_or, this);
                }
                if (this.isEven()) {
                    this.dAddOffset(1, 0);
                }
                var bnp_1 = this;
                var bnpfn1_1 = function () {
                    bnp_1.dAddOffset(2, 0);
                    if (bnp_1.bitLength() > a) {
                        bnp_1.subTo(BigInteger.ONE.shiftLeft(a - 1), bnp_1);
                    }
                    if (bnp_1.isProbablePrime(b)) {
                        setTimeout(function () { callback(); }, 0); // escape
                    }
                    else {
                        setTimeout(bnpfn1_1, 0);
                    }
                };
                setTimeout(bnpfn1_1, 0);
            }
        }
        else {
            var x = [];
            var t = a & 7;
            x.length = (a >> 3) + 1;
            b.nextBytes(x);
            if (t > 0) {
                x[0] &= ((1 << t) - 1);
            }
            else {
                x[0] = 0;
            }
            this.fromString(x, 256);
        }
    };
    return BigInteger;
}());

//#region REDUCERS
//#region NullExp
var NullExp = /** @class */ (function () {
    function NullExp() {
    }
    // NullExp.prototype.convert = nNop;
    NullExp.prototype.convert = function (x) {
        return x;
    };
    // NullExp.prototype.revert = nNop;
    NullExp.prototype.revert = function (x) {
        return x;
    };
    // NullExp.prototype.mulTo = nMulTo;
    NullExp.prototype.mulTo = function (x, y, r) {
        x.multiplyTo(y, r);
    };
    // NullExp.prototype.sqrTo = nSqrTo;
    NullExp.prototype.sqrTo = function (x, r) {
        x.squareTo(r);
    };
    return NullExp;
}());
// Modular reduction using "classic" algorithm
var Classic = /** @class */ (function () {
    function Classic(m) {
        this.m = m;
    }
    // Classic.prototype.convert = cConvert;
    Classic.prototype.convert = function (x) {
        if (x.s < 0 || x.compareTo(this.m) >= 0) {
            return x.mod(this.m);
        }
        else {
            return x;
        }
    };
    // Classic.prototype.revert = cRevert;
    Classic.prototype.revert = function (x) {
        return x;
    };
    // Classic.prototype.reduce = cReduce;
    Classic.prototype.reduce = function (x) {
        x.divRemTo(this.m, null, x);
    };
    // Classic.prototype.mulTo = cMulTo;
    Classic.prototype.mulTo = function (x, y, r) {
        x.multiplyTo(y, r);
        this.reduce(r);
    };
    // Classic.prototype.sqrTo = cSqrTo;
    Classic.prototype.sqrTo = function (x, r) {
        x.squareTo(r);
        this.reduce(r);
    };
    return Classic;
}());
//#endregion
//#region Montgomery
// Montgomery reduction
var Montgomery = /** @class */ (function () {
    function Montgomery(m) {
        this.m = m;
        this.mp = m.invDigit();
        this.mpl = this.mp & 0x7fff;
        this.mph = this.mp >> 15;
        this.um = (1 << (m.DB - 15)) - 1;
        this.mt2 = 2 * m.t;
    }
    // Montgomery.prototype.convert = montConvert;
    // xR mod m
    Montgomery.prototype.convert = function (x) {
        var r = nbi();
        x.abs().dlShiftTo(this.m.t, r);
        r.divRemTo(this.m, null, r);
        if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) {
            this.m.subTo(r, r);
        }
        return r;
    };
    // Montgomery.prototype.revert = montRevert;
    // x/R mod m
    Montgomery.prototype.revert = function (x) {
        var r = nbi();
        x.copyTo(r);
        this.reduce(r);
        return r;
    };
    // Montgomery.prototype.reduce = montReduce;
    // x = x/R mod m (HAC 14.32)
    Montgomery.prototype.reduce = function (x) {
        while (x.t <= this.mt2) {
            // pad x so am has enough room later
            x[x.t++] = 0;
        }
        for (var i = 0; i < this.m.t; ++i) {
            // faster way of calculating u0 = x[i]*mp mod DV
            var j = x[i] & 0x7fff;
            var u0 = (j * this.mpl + (((j * this.mph + (x[i] >> 15) * this.mpl) & this.um) << 15)) & x.DM;
            // use am to combine the multiply-shift-add into one call
            j = i + this.m.t;
            x[j] += this.m.am(0, u0, x, i, 0, this.m.t);
            // propagate carry
            while (x[j] >= x.DV) {
                x[j] -= x.DV;
                x[++j]++;
            }
        }
        x.clamp();
        x.drShiftTo(this.m.t, x);
        if (x.compareTo(this.m) >= 0) {
            x.subTo(this.m, x);
        }
    };
    // Montgomery.prototype.mulTo = montMulTo;
    // r = "xy/R mod m"; x,y != r
    Montgomery.prototype.mulTo = function (x, y, r) {
        x.multiplyTo(y, r);
        this.reduce(r);
    };
    // Montgomery.prototype.sqrTo = montSqrTo;
    // r = "x^2/R mod m"; x != r
    Montgomery.prototype.sqrTo = function (x, r) {
        x.squareTo(r);
        this.reduce(r);
    };
    return Montgomery;
}());
//#endregion Montgomery
//#region Barrett
// Barrett modular reduction
var Barrett = /** @class */ (function () {
    function Barrett(m) {
        this.m = m;
        // setup Barrett
        this.r2 = nbi();
        this.q3 = nbi();
        BigInteger.ONE.dlShiftTo(2 * m.t, this.r2);
        this.mu = this.r2.divide(m);
    }
    // Barrett.prototype.convert = barrettConvert;
    Barrett.prototype.convert = function (x) {
        if (x.s < 0 || x.t > 2 * this.m.t) {
            return x.mod(this.m);
        }
        else if (x.compareTo(this.m) < 0) {
            return x;
        }
        else {
            var r = nbi();
            x.copyTo(r);
            this.reduce(r);
            return r;
        }
    };
    // Barrett.prototype.revert = barrettRevert;
    Barrett.prototype.revert = function (x) {
        return x;
    };
    // Barrett.prototype.reduce = barrettReduce;
    // x = x mod m (HAC 14.42)
    Barrett.prototype.reduce = function (x) {
        x.drShiftTo(this.m.t - 1, this.r2);
        if (x.t > this.m.t + 1) {
            x.t = this.m.t + 1;
            x.clamp();
        }
        this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3);
        this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2);
        while (x.compareTo(this.r2) < 0) {
            x.dAddOffset(1, this.m.t + 1);
        }
        x.subTo(this.r2, x);
        while (x.compareTo(this.m) >= 0) {
            x.subTo(this.m, x);
        }
    };
    // Barrett.prototype.mulTo = barrettMulTo;
    // r = x*y mod m; x,y != r
    Barrett.prototype.mulTo = function (x, y, r) {
        x.multiplyTo(y, r);
        this.reduce(r);
    };
    // Barrett.prototype.sqrTo = barrettSqrTo;
    // r = x^2 mod m; x != r
    Barrett.prototype.sqrTo = function (x, r) {
        x.squareTo(r);
        this.reduce(r);
    };
    return Barrett;
}());
//#endregion
//#endregion REDUCERS
// return new, unset BigInteger
function nbi() { return new BigInteger(null); }
function parseBigInt(str, r) {
    return new BigInteger(str, r);
}
// am: Compute w_j += (x*this_i), propagate carries,
// c is initial carry, returns final carry.
// c < 3*dvalue, x < 2*dvalue, this_i < dvalue
// We need to select the fastest one that works in this environment.
var inBrowser = typeof navigator !== "undefined";
if (inBrowser && j_lm && (navigator.appName == "Microsoft Internet Explorer")) {
    // am2 avoids a big mult-and-extract completely.
    // Max digit bits should be <= 30 because we do bitwise ops
    // on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)
    BigInteger.prototype.am = function am2(i, x, w, j, c, n) {
        var xl = x & 0x7fff;
        var xh = x >> 15;
        while (--n >= 0) {
            var l = this[i] & 0x7fff;
            var h = this[i++] >> 15;
            var m = xh * l + h * xl;
            l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);
            c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);
            w[j++] = l & 0x3fffffff;
        }
        return c;
    };
    dbits = 30;
}
else if (inBrowser && j_lm && (navigator.appName != "Netscape")) {
    // am1: use a single mult and divide to get the high bits,
    // max digit bits should be 26 because
    // max internal value = 2*dvalue^2-2*dvalue (< 2^53)
    BigInteger.prototype.am = function am1(i, x, w, j, c, n) {
        while (--n >= 0) {
            var v = x * this[i++] + w[j] + c;
            c = Math.floor(v / 0x4000000);
            w[j++] = v & 0x3ffffff;
        }
        return c;
    };
    dbits = 26;
}
else { // Mozilla/Netscape seems to prefer am3
    // Alternately, set max digit bits to 28 since some
    // browsers slow down when dealing with 32-bit numbers.
    BigInteger.prototype.am = function am3(i, x, w, j, c, n) {
        var xl = x & 0x3fff;
        var xh = x >> 14;
        while (--n >= 0) {
            var l = this[i] & 0x3fff;
            var h = this[i++] >> 14;
            var m = xh * l + h * xl;
            l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;
            c = (l >> 28) + (m >> 14) + xh * h;
            w[j++] = l & 0xfffffff;
        }
        return c;
    };
    dbits = 28;
}
BigInteger.prototype.DB = dbits;
BigInteger.prototype.DM = ((1 << dbits) - 1);
BigInteger.prototype.DV = (1 << dbits);
var BI_FP = 52;
BigInteger.prototype.FV = Math.pow(2, BI_FP);
BigInteger.prototype.F1 = BI_FP - dbits;
BigInteger.prototype.F2 = 2 * dbits - BI_FP;
// Digit conversions
var BI_RC = [];
var rr;
var vv;
rr = "0".charCodeAt(0);
for (vv = 0; vv <= 9; ++vv) {
    BI_RC[rr++] = vv;
}
rr = "a".charCodeAt(0);
for (vv = 10; vv < 36; ++vv) {
    BI_RC[rr++] = vv;
}
rr = "A".charCodeAt(0);
for (vv = 10; vv < 36; ++vv) {
    BI_RC[rr++] = vv;
}
function intAt(s, i) {
    var c = BI_RC[s.charCodeAt(i)];
    return (c == null) ? -1 : c;
}
// return bigint initialized to value
function nbv(i) {
    var r = nbi();
    r.fromInt(i);
    return r;
}
// returns bit length of the integer x
function nbits(x) {
    var r = 1;
    var t;
    if ((t = x >>> 16) != 0) {
        x = t;
        r += 16;
    }
    if ((t = x >> 8) != 0) {
        x = t;
        r += 8;
    }
    if ((t = x >> 4) != 0) {
        x = t;
        r += 4;
    }
    if ((t = x >> 2) != 0) {
        x = t;
        r += 2;
    }
    if ((t = x >> 1) != 0) {
        x = t;
        r += 1;
    }
    return r;
}
// "constants"
BigInteger.ZERO = nbv(0);
BigInteger.ONE = nbv(1);


//# sourceURL=webpack://JSEncrypt/./lib/lib/jsbn/jsbn.js?`)},"./lib/lib/jsbn/prng4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Arcfour": () => (/* binding */ Arcfour),
/* harmony export */   "prng_newstate": () => (/* binding */ prng_newstate),
/* harmony export */   "rng_psize": () => (/* binding */ rng_psize)
/* harmony export */ });
// prng4.js - uses Arcfour as a PRNG
var Arcfour = /** @class */ (function () {
    function Arcfour() {
        this.i = 0;
        this.j = 0;
        this.S = [];
    }
    // Arcfour.prototype.init = ARC4init;
    // Initialize arcfour context from key, an array of ints, each from [0..255]
    Arcfour.prototype.init = function (key) {
        var i;
        var j;
        var t;
        for (i = 0; i < 256; ++i) {
            this.S[i] = i;
        }
        j = 0;
        for (i = 0; i < 256; ++i) {
            j = (j + this.S[i] + key[i % key.length]) & 255;
            t = this.S[i];
            this.S[i] = this.S[j];
            this.S[j] = t;
        }
        this.i = 0;
        this.j = 0;
    };
    // Arcfour.prototype.next = ARC4next;
    Arcfour.prototype.next = function () {
        var t;
        this.i = (this.i + 1) & 255;
        this.j = (this.j + this.S[this.i]) & 255;
        t = this.S[this.i];
        this.S[this.i] = this.S[this.j];
        this.S[this.j] = t;
        return this.S[(t + this.S[this.i]) & 255];
    };
    return Arcfour;
}());

// Plug in your RNG constructor here
function prng_newstate() {
    return new Arcfour();
}
// Pool size must be a multiple of 4 and greater than 32.
// An array of bytes the size of the pool will be passed to init()
var rng_psize = 256;


//# sourceURL=webpack://JSEncrypt/./lib/lib/jsbn/prng4.js?`)},"./lib/lib/jsbn/rng.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SecureRandom": () => (/* binding */ SecureRandom)
/* harmony export */ });
/* harmony import */ var _prng4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prng4 */ "./lib/lib/jsbn/prng4.js");
// Random number generator - requires a PRNG backend, e.g. prng4.js

var rng_state;
var rng_pool = null;
var rng_pptr;
// Initialize the pool with junk if needed.
if (rng_pool == null) {
    rng_pool = [];
    rng_pptr = 0;
    var t = void 0;
    if (typeof window !== 'undefined' && window.crypto && window.crypto.getRandomValues) {
        // Extract entropy (2048 bits) from RNG if available
        var z = new Uint32Array(256);
        window.crypto.getRandomValues(z);
        for (t = 0; t < z.length; ++t) {
            rng_pool[rng_pptr++] = z[t] & 255;
        }
    }
    // Use mouse events for entropy, if we do not have enough entropy by the time
    // we need it, entropy will be generated by Math.random.
    var count = 0;
    var onMouseMoveListener_1 = function (ev) {
        count = count || 0;
        if (count >= 256 || rng_pptr >= _prng4__WEBPACK_IMPORTED_MODULE_0__.rng_psize) {
            if (window.removeEventListener) {
                window.removeEventListener("mousemove", onMouseMoveListener_1, false);
            }
            else if (window.detachEvent) {
                window.detachEvent("onmousemove", onMouseMoveListener_1);
            }
            return;
        }
        try {
            var mouseCoordinates = ev.x + ev.y;
            rng_pool[rng_pptr++] = mouseCoordinates & 255;
            count += 1;
        }
        catch (e) {
            // Sometimes Firefox will deny permission to access event properties for some reason. Ignore.
        }
    };
    if (typeof window !== 'undefined') {
        if (window.addEventListener) {
            window.addEventListener("mousemove", onMouseMoveListener_1, false);
        }
        else if (window.attachEvent) {
            window.attachEvent("onmousemove", onMouseMoveListener_1);
        }
    }
}
function rng_get_byte() {
    if (rng_state == null) {
        rng_state = (0,_prng4__WEBPACK_IMPORTED_MODULE_0__.prng_newstate)();
        // At this point, we may not have collected enough entropy.  If not, fall back to Math.random
        while (rng_pptr < _prng4__WEBPACK_IMPORTED_MODULE_0__.rng_psize) {
            var random = Math.floor(65536 * Math.random());
            rng_pool[rng_pptr++] = random & 255;
        }
        rng_state.init(rng_pool);
        for (rng_pptr = 0; rng_pptr < rng_pool.length; ++rng_pptr) {
            rng_pool[rng_pptr] = 0;
        }
        rng_pptr = 0;
    }
    // TODO: allow reseeding after first request
    return rng_state.next();
}
var SecureRandom = /** @class */ (function () {
    function SecureRandom() {
    }
    SecureRandom.prototype.nextBytes = function (ba) {
        for (var i = 0; i < ba.length; ++i) {
            ba[i] = rng_get_byte();
        }
    };
    return SecureRandom;
}());



//# sourceURL=webpack://JSEncrypt/./lib/lib/jsbn/rng.js?`)},"./lib/lib/jsbn/rsa.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RSAKey": () => (/* binding */ RSAKey)
/* harmony export */ });
/* harmony import */ var _jsbn__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./jsbn */ "./lib/lib/jsbn/jsbn.js");
/* harmony import */ var _rng__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng */ "./lib/lib/jsbn/rng.js");
// Depends on jsbn.js and rng.js
// Version 1.1: support utf-8 encoding in pkcs1pad2
// convert a (hex) string to a bignum object


// function linebrk(s,n) {
//   var ret = "";
//   var i = 0;
//   while(i + n < s.length) {
//     ret += s.substring(i,i+n) + "\\n";
//     i += n;
//   }
//   return ret + s.substring(i,s.length);
// }
// function byte2Hex(b) {
//   if(b < 0x10)
//     return "0" + b.toString(16);
//   else
//     return b.toString(16);
// }
function pkcs1pad1(s, n) {
    if (n < s.length + 22) {
        console.error("Message too long for RSA");
        return null;
    }
    var len = n - s.length - 6;
    var filler = "";
    for (var f = 0; f < len; f += 2) {
        filler += "ff";
    }
    var m = "0001" + filler + "00" + s;
    return (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(m, 16);
}
// PKCS#1 (type 2, random) pad input string s to n bytes, and return a bigint
function pkcs1pad2(s, n) {
    if (n < s.length + 11) { // TODO: fix for utf-8
        console.error("Message too long for RSA");
        return null;
    }
    var ba = [];
    var i = s.length - 1;
    while (i >= 0 && n > 0) {
        var c = s.charCodeAt(i--);
        if (c < 128) { // encode using utf-8
            ba[--n] = c;
        }
        else if ((c > 127) && (c < 2048)) {
            ba[--n] = (c & 63) | 128;
            ba[--n] = (c >> 6) | 192;
        }
        else {
            ba[--n] = (c & 63) | 128;
            ba[--n] = ((c >> 6) & 63) | 128;
            ba[--n] = (c >> 12) | 224;
        }
    }
    ba[--n] = 0;
    var rng = new _rng__WEBPACK_IMPORTED_MODULE_1__.SecureRandom();
    var x = [];
    while (n > 2) { // random non-zero pad
        x[0] = 0;
        while (x[0] == 0) {
            rng.nextBytes(x);
        }
        ba[--n] = x[0];
    }
    ba[--n] = 2;
    ba[--n] = 0;
    return new _jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(ba);
}
// "empty" RSA key constructor
var RSAKey = /** @class */ (function () {
    function RSAKey() {
        this.n = null;
        this.e = 0;
        this.d = null;
        this.p = null;
        this.q = null;
        this.dmp1 = null;
        this.dmq1 = null;
        this.coeff = null;
    }
    //#region PROTECTED
    // protected
    // RSAKey.prototype.doPublic = RSADoPublic;
    // Perform raw public operation on "x": return x^e (mod n)
    RSAKey.prototype.doPublic = function (x) {
        return x.modPowInt(this.e, this.n);
    };
    // RSAKey.prototype.doPrivate = RSADoPrivate;
    // Perform raw private operation on "x": return x^d (mod n)
    RSAKey.prototype.doPrivate = function (x) {
        if (this.p == null || this.q == null) {
            return x.modPow(this.d, this.n);
        }
        // TODO: re-calculate any missing CRT params
        var xp = x.mod(this.p).modPow(this.dmp1, this.p);
        var xq = x.mod(this.q).modPow(this.dmq1, this.q);
        while (xp.compareTo(xq) < 0) {
            xp = xp.add(this.p);
        }
        return xp.subtract(xq).multiply(this.coeff).mod(this.p).multiply(this.q).add(xq);
    };
    //#endregion PROTECTED
    //#region PUBLIC
    // RSAKey.prototype.setPublic = RSASetPublic;
    // Set the public key fields N and e from hex strings
    RSAKey.prototype.setPublic = function (N, E) {
        if (N != null && E != null && N.length > 0 && E.length > 0) {
            this.n = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(N, 16);
            this.e = parseInt(E, 16);
        }
        else {
            console.error("Invalid RSA public key");
        }
    };
    // RSAKey.prototype.encrypt = RSAEncrypt;
    // Return the PKCS#1 RSA encryption of "text" as an even-length hex string
    RSAKey.prototype.encrypt = function (text) {
        var maxLength = (this.n.bitLength() + 7) >> 3;
        var m = pkcs1pad2(text, maxLength);
        if (m == null) {
            return null;
        }
        var c = this.doPublic(m);
        if (c == null) {
            return null;
        }
        var h = c.toString(16);
        var length = h.length;
        // fix zero before result
        for (var i = 0; i < maxLength * 2 - length; i++) {
            h = "0" + h;
        }
        return h;
    };
    // RSAKey.prototype.setPrivate = RSASetPrivate;
    // Set the private key fields N, e, and d from hex strings
    RSAKey.prototype.setPrivate = function (N, E, D) {
        if (N != null && E != null && N.length > 0 && E.length > 0) {
            this.n = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(N, 16);
            this.e = parseInt(E, 16);
            this.d = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(D, 16);
        }
        else {
            console.error("Invalid RSA private key");
        }
    };
    // RSAKey.prototype.setPrivateEx = RSASetPrivateEx;
    // Set the private key fields N, e, d and CRT params from hex strings
    RSAKey.prototype.setPrivateEx = function (N, E, D, P, Q, DP, DQ, C) {
        if (N != null && E != null && N.length > 0 && E.length > 0) {
            this.n = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(N, 16);
            this.e = parseInt(E, 16);
            this.d = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(D, 16);
            this.p = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(P, 16);
            this.q = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(Q, 16);
            this.dmp1 = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(DP, 16);
            this.dmq1 = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(DQ, 16);
            this.coeff = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(C, 16);
        }
        else {
            console.error("Invalid RSA private key");
        }
    };
    // RSAKey.prototype.generate = RSAGenerate;
    // Generate a new random private key B bits long, using public expt E
    RSAKey.prototype.generate = function (B, E) {
        var rng = new _rng__WEBPACK_IMPORTED_MODULE_1__.SecureRandom();
        var qs = B >> 1;
        this.e = parseInt(E, 16);
        var ee = new _jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(E, 16);
        for (;;) {
            for (;;) {
                this.p = new _jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(B - qs, 1, rng);
                if (this.p.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE).gcd(ee).compareTo(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE) == 0 && this.p.isProbablePrime(10)) {
                    break;
                }
            }
            for (;;) {
                this.q = new _jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(qs, 1, rng);
                if (this.q.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE).gcd(ee).compareTo(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE) == 0 && this.q.isProbablePrime(10)) {
                    break;
                }
            }
            if (this.p.compareTo(this.q) <= 0) {
                var t = this.p;
                this.p = this.q;
                this.q = t;
            }
            var p1 = this.p.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE);
            var q1 = this.q.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE);
            var phi = p1.multiply(q1);
            if (phi.gcd(ee).compareTo(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE) == 0) {
                this.n = this.p.multiply(this.q);
                this.d = ee.modInverse(phi);
                this.dmp1 = this.d.mod(p1);
                this.dmq1 = this.d.mod(q1);
                this.coeff = this.q.modInverse(this.p);
                break;
            }
        }
    };
    // RSAKey.prototype.decrypt = RSADecrypt;
    // Return the PKCS#1 RSA decryption of "ctext".
    // "ctext" is an even-length hex string and the output is a plain string.
    RSAKey.prototype.decrypt = function (ctext) {
        var c = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(ctext, 16);
        var m = this.doPrivate(c);
        if (m == null) {
            return null;
        }
        return pkcs1unpad2(m, (this.n.bitLength() + 7) >> 3);
    };
    // Generate a new random private key B bits long, using public expt E
    RSAKey.prototype.generateAsync = function (B, E, callback) {
        var rng = new _rng__WEBPACK_IMPORTED_MODULE_1__.SecureRandom();
        var qs = B >> 1;
        this.e = parseInt(E, 16);
        var ee = new _jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(E, 16);
        var rsa = this;
        // These functions have non-descript names because they were originally for(;;) loops.
        // I don't know about cryptography to give them better names than loop1-4.
        var loop1 = function () {
            var loop4 = function () {
                if (rsa.p.compareTo(rsa.q) <= 0) {
                    var t = rsa.p;
                    rsa.p = rsa.q;
                    rsa.q = t;
                }
                var p1 = rsa.p.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE);
                var q1 = rsa.q.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE);
                var phi = p1.multiply(q1);
                if (phi.gcd(ee).compareTo(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE) == 0) {
                    rsa.n = rsa.p.multiply(rsa.q);
                    rsa.d = ee.modInverse(phi);
                    rsa.dmp1 = rsa.d.mod(p1);
                    rsa.dmq1 = rsa.d.mod(q1);
                    rsa.coeff = rsa.q.modInverse(rsa.p);
                    setTimeout(function () { callback(); }, 0); // escape
                }
                else {
                    setTimeout(loop1, 0);
                }
            };
            var loop3 = function () {
                rsa.q = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.nbi)();
                rsa.q.fromNumberAsync(qs, 1, rng, function () {
                    rsa.q.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE).gcda(ee, function (r) {
                        if (r.compareTo(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE) == 0 && rsa.q.isProbablePrime(10)) {
                            setTimeout(loop4, 0);
                        }
                        else {
                            setTimeout(loop3, 0);
                        }
                    });
                });
            };
            var loop2 = function () {
                rsa.p = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.nbi)();
                rsa.p.fromNumberAsync(B - qs, 1, rng, function () {
                    rsa.p.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE).gcda(ee, function (r) {
                        if (r.compareTo(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE) == 0 && rsa.p.isProbablePrime(10)) {
                            setTimeout(loop3, 0);
                        }
                        else {
                            setTimeout(loop2, 0);
                        }
                    });
                });
            };
            setTimeout(loop2, 0);
        };
        setTimeout(loop1, 0);
    };
    RSAKey.prototype.sign = function (text, digestMethod, digestName) {
        var header = getDigestHeader(digestName);
        var digest = header + digestMethod(text).toString();
        var m = pkcs1pad1(digest, this.n.bitLength() / 4);
        if (m == null) {
            return null;
        }
        var c = this.doPrivate(m);
        if (c == null) {
            return null;
        }
        var h = c.toString(16);
        if ((h.length & 1) == 0) {
            return h;
        }
        else {
            return "0" + h;
        }
    };
    RSAKey.prototype.verify = function (text, signature, digestMethod) {
        var c = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(signature, 16);
        var m = this.doPublic(c);
        if (m == null) {
            return null;
        }
        var unpadded = m.toString(16).replace(/^1f+00/, "");
        var digest = removeDigestHeader(unpadded);
        return digest == digestMethod(text).toString();
    };
    return RSAKey;
}());

// Undo PKCS#1 (type 2, random) padding and, if valid, return the plaintext
function pkcs1unpad2(d, n) {
    var b = d.toByteArray();
    var i = 0;
    while (i < b.length && b[i] == 0) {
        ++i;
    }
    if (b.length - i != n - 1 || b[i] != 2) {
        return null;
    }
    ++i;
    while (b[i] != 0) {
        if (++i >= b.length) {
            return null;
        }
    }
    var ret = "";
    while (++i < b.length) {
        var c = b[i] & 255;
        if (c < 128) { // utf-8 decode
            ret += String.fromCharCode(c);
        }
        else if ((c > 191) && (c < 224)) {
            ret += String.fromCharCode(((c & 31) << 6) | (b[i + 1] & 63));
            ++i;
        }
        else {
            ret += String.fromCharCode(((c & 15) << 12) | ((b[i + 1] & 63) << 6) | (b[i + 2] & 63));
            i += 2;
        }
    }
    return ret;
}
// https://tools.ietf.org/html/rfc3447#page-43
var DIGEST_HEADERS = {
    md2: "3020300c06082a864886f70d020205000410",
    md5: "3020300c06082a864886f70d020505000410",
    sha1: "3021300906052b0e03021a05000414",
    sha224: "302d300d06096086480165030402040500041c",
    sha256: "3031300d060960864801650304020105000420",
    sha384: "3041300d060960864801650304020205000430",
    sha512: "3051300d060960864801650304020305000440",
    ripemd160: "3021300906052b2403020105000414"
};
function getDigestHeader(name) {
    return DIGEST_HEADERS[name] || "";
}
function removeDigestHeader(str) {
    for (var name_1 in DIGEST_HEADERS) {
        if (DIGEST_HEADERS.hasOwnProperty(name_1)) {
            var header = DIGEST_HEADERS[name_1];
            var len = header.length;
            if (str.substr(0, len) == header) {
                return str.substr(len);
            }
        }
    }
    return str;
}
// Return the PKCS#1 RSA encryption of "text" as a Base64-encoded string
// function RSAEncryptB64(text) {
//  var h = this.encrypt(text);
//  if(h) return hex2b64(h); else return null;
// }
// public
// RSAKey.prototype.encrypt_b64 = RSAEncryptB64;


//# sourceURL=webpack://JSEncrypt/./lib/lib/jsbn/rsa.js?`)},"./lib/lib/jsbn/util.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "cbit": () => (/* binding */ cbit),
/* harmony export */   "int2char": () => (/* binding */ int2char),
/* harmony export */   "lbit": () => (/* binding */ lbit),
/* harmony export */   "op_and": () => (/* binding */ op_and),
/* harmony export */   "op_andnot": () => (/* binding */ op_andnot),
/* harmony export */   "op_or": () => (/* binding */ op_or),
/* harmony export */   "op_xor": () => (/* binding */ op_xor)
/* harmony export */ });
var BI_RM = "0123456789abcdefghijklmnopqrstuvwxyz";
function int2char(n) {
    return BI_RM.charAt(n);
}
//#region BIT_OPERATIONS
// (public) this & a
function op_and(x, y) {
    return x & y;
}
// (public) this | a
function op_or(x, y) {
    return x | y;
}
// (public) this ^ a
function op_xor(x, y) {
    return x ^ y;
}
// (public) this & ~a
function op_andnot(x, y) {
    return x & ~y;
}
// return index of lowest 1-bit in x, x < 2^31
function lbit(x) {
    if (x == 0) {
        return -1;
    }
    var r = 0;
    if ((x & 0xffff) == 0) {
        x >>= 16;
        r += 16;
    }
    if ((x & 0xff) == 0) {
        x >>= 8;
        r += 8;
    }
    if ((x & 0xf) == 0) {
        x >>= 4;
        r += 4;
    }
    if ((x & 3) == 0) {
        x >>= 2;
        r += 2;
    }
    if ((x & 1) == 0) {
        ++r;
    }
    return r;
}
// return number of 1 bits in x
function cbit(x) {
    var r = 0;
    while (x != 0) {
        x &= x - 1;
        ++r;
    }
    return r;
}
//#endregion BIT_OPERATIONS


//# sourceURL=webpack://JSEncrypt/./lib/lib/jsbn/util.js?`)},"./lib/lib/jsrsasign/asn1-1.0.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KJUR": () => (/* binding */ KJUR)
/* harmony export */ });
/* harmony import */ var _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../jsbn/jsbn */ "./lib/lib/jsbn/jsbn.js");
/* harmony import */ var _yahoo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./yahoo */ "./lib/lib/jsrsasign/yahoo.js");
/* asn1-1.0.13.js (c) 2013-2017 Kenji Urushima | kjur.github.com/jsrsasign/license
 */
/*
 * asn1.js - ASN.1 DER encoder classes
 *
 * Copyright (c) 2013-2017 Kenji Urushima (kenji.urushima@gmail.com)
 *
 * This software is licensed under the terms of the MIT License.
 * https://kjur.github.io/jsrsasign/license
 *
 * The above copyright and license notice shall be
 * included in all copies or substantial portions of the Software.
 */


/**
 * @fileOverview
 * @name asn1-1.0.js
 * @author Kenji Urushima kenji.urushima@gmail.com
 * @version asn1 1.0.13 (2017-Jun-02)
 * @since jsrsasign 2.1
 * @license <a href="https://kjur.github.io/jsrsasign/license/">MIT License</a>
 */
/**
 * kjur's class library name space
 * <p>
 * This name space provides following name spaces:
 * <ul>
 * <li>{@link KJUR.asn1} - ASN.1 primitive hexadecimal encoder</li>
 * <li>{@link KJUR.asn1.x509} - ASN.1 structure for X.509 certificate and CRL</li>
 * <li>{@link KJUR.crypto} - Java Cryptographic Extension(JCE) style MessageDigest/Signature
 * class and utilities</li>
 * </ul>
 * </p>
 * NOTE: Please ignore method summary and document of this namespace. This caused by a bug of jsdoc2.
 * @name KJUR
 * @namespace kjur's class library name space
 */
var KJUR = {};
/**
 * kjur's ASN.1 class library name space
 * <p>
 * This is ITU-T X.690 ASN.1 DER encoder class library and
 * class structure and methods is very similar to
 * org.bouncycastle.asn1 package of
 * well known BouncyCaslte Cryptography Library.
 * <h4>PROVIDING ASN.1 PRIMITIVES</h4>
 * Here are ASN.1 DER primitive classes.
 * <ul>
 * <li>0x01 {@link KJUR.asn1.DERBoolean}</li>
 * <li>0x02 {@link KJUR.asn1.DERInteger}</li>
 * <li>0x03 {@link KJUR.asn1.DERBitString}</li>
 * <li>0x04 {@link KJUR.asn1.DEROctetString}</li>
 * <li>0x05 {@link KJUR.asn1.DERNull}</li>
 * <li>0x06 {@link KJUR.asn1.DERObjectIdentifier}</li>
 * <li>0x0a {@link KJUR.asn1.DEREnumerated}</li>
 * <li>0x0c {@link KJUR.asn1.DERUTF8String}</li>
 * <li>0x12 {@link KJUR.asn1.DERNumericString}</li>
 * <li>0x13 {@link KJUR.asn1.DERPrintableString}</li>
 * <li>0x14 {@link KJUR.asn1.DERTeletexString}</li>
 * <li>0x16 {@link KJUR.asn1.DERIA5String}</li>
 * <li>0x17 {@link KJUR.asn1.DERUTCTime}</li>
 * <li>0x18 {@link KJUR.asn1.DERGeneralizedTime}</li>
 * <li>0x30 {@link KJUR.asn1.DERSequence}</li>
 * <li>0x31 {@link KJUR.asn1.DERSet}</li>
 * </ul>
 * <h4>OTHER ASN.1 CLASSES</h4>
 * <ul>
 * <li>{@link KJUR.asn1.ASN1Object}</li>
 * <li>{@link KJUR.asn1.DERAbstractString}</li>
 * <li>{@link KJUR.asn1.DERAbstractTime}</li>
 * <li>{@link KJUR.asn1.DERAbstractStructured}</li>
 * <li>{@link KJUR.asn1.DERTaggedObject}</li>
 * </ul>
 * <h4>SUB NAME SPACES</h4>
 * <ul>
 * <li>{@link KJUR.asn1.cades} - CAdES long term signature format</li>
 * <li>{@link KJUR.asn1.cms} - Cryptographic Message Syntax</li>
 * <li>{@link KJUR.asn1.csr} - Certificate Signing Request (CSR/PKCS#10)</li>
 * <li>{@link KJUR.asn1.tsp} - RFC 3161 Timestamping Protocol Format</li>
 * <li>{@link KJUR.asn1.x509} - RFC 5280 X.509 certificate and CRL</li>
 * </ul>
 * </p>
 * NOTE: Please ignore method summary and document of this namespace.
 * This caused by a bug of jsdoc2.
 * @name KJUR.asn1
 * @namespace
 */
if (typeof KJUR.asn1 == "undefined" || !KJUR.asn1)
    KJUR.asn1 = {};
/**
 * ASN1 utilities class
 * @name KJUR.asn1.ASN1Util
 * @class ASN1 utilities class
 * @since asn1 1.0.2
 */
KJUR.asn1.ASN1Util = new function () {
    this.integerToByteHex = function (i) {
        var h = i.toString(16);
        if ((h.length % 2) == 1)
            h = '0' + h;
        return h;
    };
    this.bigIntToMinTwosComplementsHex = function (bigIntegerValue) {
        var h = bigIntegerValue.toString(16);
        if (h.substr(0, 1) != '-') {
            if (h.length % 2 == 1) {
                h = '0' + h;
            }
            else {
                if (!h.match(/^[0-7]/)) {
                    h = '00' + h;
                }
            }
        }
        else {
            var hPos = h.substr(1);
            var xorLen = hPos.length;
            if (xorLen % 2 == 1) {
                xorLen += 1;
            }
            else {
                if (!h.match(/^[0-7]/)) {
                    xorLen += 2;
                }
            }
            var hMask = '';
            for (var i = 0; i < xorLen; i++) {
                hMask += 'f';
            }
            var biMask = new _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(hMask, 16);
            var biNeg = biMask.xor(bigIntegerValue).add(_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE);
            h = biNeg.toString(16).replace(/^-/, '');
        }
        return h;
    };
    /**
     * get PEM string from hexadecimal data and header string
     * @name getPEMStringFromHex
     * @memberOf KJUR.asn1.ASN1Util
     * @function
     * @param {String} dataHex hexadecimal string of PEM body
     * @param {String} pemHeader PEM header string (ex. 'RSA PRIVATE KEY')
     * @return {String} PEM formatted string of input data
     * @description
     * This method converts a hexadecimal string to a PEM string with
     * a specified header. Its line break will be CRLF("\\r\\n").
     * @example
     * var pem  = KJUR.asn1.ASN1Util.getPEMStringFromHex('616161', 'RSA PRIVATE KEY');
     * // value of pem will be:
     * -----BEGIN PRIVATE KEY-----
     * YWFh
     * -----END PRIVATE KEY-----
     */
    this.getPEMStringFromHex = function (dataHex, pemHeader) {
        return hextopem(dataHex, pemHeader);
    };
    /**
     * generate ASN1Object specifed by JSON parameters
     * @name newObject
     * @memberOf KJUR.asn1.ASN1Util
     * @function
     * @param {Array} param JSON parameter to generate ASN1Object
     * @return {KJUR.asn1.ASN1Object} generated object
     * @since asn1 1.0.3
     * @description
     * generate any ASN1Object specified by JSON param
     * including ASN.1 primitive or structured.
     * Generally 'param' can be described as follows:
     * <blockquote>
     * {TYPE-OF-ASNOBJ: ASN1OBJ-PARAMETER}
     * </blockquote>
     * 'TYPE-OF-ASN1OBJ' can be one of following symbols:
     * <ul>
     * <li>'bool' - DERBoolean</li>
     * <li>'int' - DERInteger</li>
     * <li>'bitstr' - DERBitString</li>
     * <li>'octstr' - DEROctetString</li>
     * <li>'null' - DERNull</li>
     * <li>'oid' - DERObjectIdentifier</li>
     * <li>'enum' - DEREnumerated</li>
     * <li>'utf8str' - DERUTF8String</li>
     * <li>'numstr' - DERNumericString</li>
     * <li>'prnstr' - DERPrintableString</li>
     * <li>'telstr' - DERTeletexString</li>
     * <li>'ia5str' - DERIA5String</li>
     * <li>'utctime' - DERUTCTime</li>
     * <li>'gentime' - DERGeneralizedTime</li>
     * <li>'seq' - DERSequence</li>
     * <li>'set' - DERSet</li>
     * <li>'tag' - DERTaggedObject</li>
     * </ul>
     * @example
     * newObject({'prnstr': 'aaa'});
     * newObject({'seq': [{'int': 3}, {'prnstr': 'aaa'}]})
     * // ASN.1 Tagged Object
     * newObject({'tag': {'tag': 'a1',
     *                    'explicit': true,
     *                    'obj': {'seq': [{'int': 3}, {'prnstr': 'aaa'}]}}});
     * // more simple representation of ASN.1 Tagged Object
     * newObject({'tag': ['a1',
     *                    true,
     *                    {'seq': [
     *                      {'int': 3},
     *                      {'prnstr': 'aaa'}]}
     *                   ]});
     */
    this.newObject = function (param) {
        var _KJUR = KJUR, _KJUR_asn1 = _KJUR.asn1, _DERBoolean = _KJUR_asn1.DERBoolean, _DERInteger = _KJUR_asn1.DERInteger, _DERBitString = _KJUR_asn1.DERBitString, _DEROctetString = _KJUR_asn1.DEROctetString, _DERNull = _KJUR_asn1.DERNull, _DERObjectIdentifier = _KJUR_asn1.DERObjectIdentifier, _DEREnumerated = _KJUR_asn1.DEREnumerated, _DERUTF8String = _KJUR_asn1.DERUTF8String, _DERNumericString = _KJUR_asn1.DERNumericString, _DERPrintableString = _KJUR_asn1.DERPrintableString, _DERTeletexString = _KJUR_asn1.DERTeletexString, _DERIA5String = _KJUR_asn1.DERIA5String, _DERUTCTime = _KJUR_asn1.DERUTCTime, _DERGeneralizedTime = _KJUR_asn1.DERGeneralizedTime, _DERSequence = _KJUR_asn1.DERSequence, _DERSet = _KJUR_asn1.DERSet, _DERTaggedObject = _KJUR_asn1.DERTaggedObject, _newObject = _KJUR_asn1.ASN1Util.newObject;
        var keys = Object.keys(param);
        if (keys.length != 1)
            throw "key of param shall be only one.";
        var key = keys[0];
        if (":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":" + key + ":") == -1)
            throw "undefined key: " + key;
        if (key == "bool")
            return new _DERBoolean(param[key]);
        if (key == "int")
            return new _DERInteger(param[key]);
        if (key == "bitstr")
            return new _DERBitString(param[key]);
        if (key == "octstr")
            return new _DEROctetString(param[key]);
        if (key == "null")
            return new _DERNull(param[key]);
        if (key == "oid")
            return new _DERObjectIdentifier(param[key]);
        if (key == "enum")
            return new _DEREnumerated(param[key]);
        if (key == "utf8str")
            return new _DERUTF8String(param[key]);
        if (key == "numstr")
            return new _DERNumericString(param[key]);
        if (key == "prnstr")
            return new _DERPrintableString(param[key]);
        if (key == "telstr")
            return new _DERTeletexString(param[key]);
        if (key == "ia5str")
            return new _DERIA5String(param[key]);
        if (key == "utctime")
            return new _DERUTCTime(param[key]);
        if (key == "gentime")
            return new _DERGeneralizedTime(param[key]);
        if (key == "seq") {
            var paramList = param[key];
            var a = [];
            for (var i = 0; i < paramList.length; i++) {
                var asn1Obj = _newObject(paramList[i]);
                a.push(asn1Obj);
            }
            return new _DERSequence({ 'array': a });
        }
        if (key == "set") {
            var paramList = param[key];
            var a = [];
            for (var i = 0; i < paramList.length; i++) {
                var asn1Obj = _newObject(paramList[i]);
                a.push(asn1Obj);
            }
            return new _DERSet({ 'array': a });
        }
        if (key == "tag") {
            var tagParam = param[key];
            if (Object.prototype.toString.call(tagParam) === '[object Array]' &&
                tagParam.length == 3) {
                var obj = _newObject(tagParam[2]);
                return new _DERTaggedObject({ tag: tagParam[0],
                    explicit: tagParam[1],
                    obj: obj });
            }
            else {
                var newParam = {};
                if (tagParam.explicit !== undefined)
                    newParam.explicit = tagParam.explicit;
                if (tagParam.tag !== undefined)
                    newParam.tag = tagParam.tag;
                if (tagParam.obj === undefined)
                    throw "obj shall be specified for 'tag'.";
                newParam.obj = _newObject(tagParam.obj);
                return new _DERTaggedObject(newParam);
            }
        }
    };
    /**
     * get encoded hexadecimal string of ASN1Object specifed by JSON parameters
     * @name jsonToASN1HEX
     * @memberOf KJUR.asn1.ASN1Util
     * @function
     * @param {Array} param JSON parameter to generate ASN1Object
     * @return hexadecimal string of ASN1Object
     * @since asn1 1.0.4
     * @description
     * As for ASN.1 object representation of JSON object,
     * please see {@link newObject}.
     * @example
     * jsonToASN1HEX({'prnstr': 'aaa'});
     */
    this.jsonToASN1HEX = function (param) {
        var asn1Obj = this.newObject(param);
        return asn1Obj.getEncodedHex();
    };
};
/**
 * get dot noted oid number string from hexadecimal value of OID
 * @name oidHexToInt
 * @memberOf KJUR.asn1.ASN1Util
 * @function
 * @param {String} hex hexadecimal value of object identifier
 * @return {String} dot noted string of object identifier
 * @since jsrsasign 4.8.3 asn1 1.0.7
 * @description
 * This static method converts from hexadecimal string representation of
 * ASN.1 value of object identifier to oid number string.
 * @example
 * KJUR.asn1.ASN1Util.oidHexToInt('550406') &rarr; "2.5.4.6"
 */
KJUR.asn1.ASN1Util.oidHexToInt = function (hex) {
    var s = "";
    var i01 = parseInt(hex.substr(0, 2), 16);
    var i0 = Math.floor(i01 / 40);
    var i1 = i01 % 40;
    var s = i0 + "." + i1;
    var binbuf = "";
    for (var i = 2; i < hex.length; i += 2) {
        var value = parseInt(hex.substr(i, 2), 16);
        var bin = ("00000000" + value.toString(2)).slice(-8);
        binbuf = binbuf + bin.substr(1, 7);
        if (bin.substr(0, 1) == "0") {
            var bi = new _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(binbuf, 2);
            s = s + "." + bi.toString(10);
            binbuf = "";
        }
    }
    ;
    return s;
};
/**
 * get hexadecimal value of object identifier from dot noted oid value
 * @name oidIntToHex
 * @memberOf KJUR.asn1.ASN1Util
 * @function
 * @param {String} oidString dot noted string of object identifier
 * @return {String} hexadecimal value of object identifier
 * @since jsrsasign 4.8.3 asn1 1.0.7
 * @description
 * This static method converts from object identifier value string.
 * to hexadecimal string representation of it.
 * @example
 * KJUR.asn1.ASN1Util.oidIntToHex("2.5.4.6") &rarr; "550406"
 */
KJUR.asn1.ASN1Util.oidIntToHex = function (oidString) {
    var itox = function (i) {
        var h = i.toString(16);
        if (h.length == 1)
            h = '0' + h;
        return h;
    };
    var roidtox = function (roid) {
        var h = '';
        var bi = new _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(roid, 10);
        var b = bi.toString(2);
        var padLen = 7 - b.length % 7;
        if (padLen == 7)
            padLen = 0;
        var bPad = '';
        for (var i = 0; i < padLen; i++)
            bPad += '0';
        b = bPad + b;
        for (var i = 0; i < b.length - 1; i += 7) {
            var b8 = b.substr(i, 7);
            if (i != b.length - 7)
                b8 = '1' + b8;
            h += itox(parseInt(b8, 2));
        }
        return h;
    };
    if (!oidString.match(/^[0-9.]+$/)) {
        throw "malformed oid string: " + oidString;
    }
    var h = '';
    var a = oidString.split('.');
    var i0 = parseInt(a[0]) * 40 + parseInt(a[1]);
    h += itox(i0);
    a.splice(0, 2);
    for (var i = 0; i < a.length; i++) {
        h += roidtox(a[i]);
    }
    return h;
};
// ********************************************************************
//  Abstract ASN.1 Classes
// ********************************************************************
// ********************************************************************
/**
 * base class for ASN.1 DER encoder object
 * @name KJUR.asn1.ASN1Object
 * @class base class for ASN.1 DER encoder object
 * @property {Boolean} isModified flag whether internal data was changed
 * @property {String} hTLV hexadecimal string of ASN.1 TLV
 * @property {String} hT hexadecimal string of ASN.1 TLV tag(T)
 * @property {String} hL hexadecimal string of ASN.1 TLV length(L)
 * @property {String} hV hexadecimal string of ASN.1 TLV value(V)
 * @description
 */
KJUR.asn1.ASN1Object = function () {
    var isModified = true;
    var hTLV = null;
    var hT = '00';
    var hL = '00';
    var hV = '';
    /**
     * get hexadecimal ASN.1 TLV length(L) bytes from TLV value(V)
     * @name getLengthHexFromValue
     * @memberOf KJUR.asn1.ASN1Object#
     * @function
     * @return {String} hexadecimal string of ASN.1 TLV length(L)
     */
    this.getLengthHexFromValue = function () {
        if (typeof this.hV == "undefined" || this.hV == null) {
            throw "this.hV is null or undefined.";
        }
        if (this.hV.length % 2 == 1) {
            throw "value hex must be even length: n=" + hV.length + ",v=" + this.hV;
        }
        var n = this.hV.length / 2;
        var hN = n.toString(16);
        if (hN.length % 2 == 1) {
            hN = "0" + hN;
        }
        if (n < 128) {
            return hN;
        }
        else {
            var hNlen = hN.length / 2;
            if (hNlen > 15) {
                throw "ASN.1 length too long to represent by 8x: n = " + n.toString(16);
            }
            var head = 128 + hNlen;
            return head.toString(16) + hN;
        }
    };
    /**
     * get hexadecimal string of ASN.1 TLV bytes
     * @name getEncodedHex
     * @memberOf KJUR.asn1.ASN1Object#
     * @function
     * @return {String} hexadecimal string of ASN.1 TLV
     */
    this.getEncodedHex = function () {
        if (this.hTLV == null || this.isModified) {
            this.hV = this.getFreshValueHex();
            this.hL = this.getLengthHexFromValue();
            this.hTLV = this.hT + this.hL + this.hV;
            this.isModified = false;
            //alert("first time: " + this.hTLV);
        }
        return this.hTLV;
    };
    /**
     * get hexadecimal string of ASN.1 TLV value(V) bytes
     * @name getValueHex
     * @memberOf KJUR.asn1.ASN1Object#
     * @function
     * @return {String} hexadecimal string of ASN.1 TLV value(V) bytes
     */
    this.getValueHex = function () {
        this.getEncodedHex();
        return this.hV;
    };
    this.getFreshValueHex = function () {
        return '';
    };
};
// == BEGIN DERAbstractString ================================================
/**
 * base class for ASN.1 DER string classes
 * @name KJUR.asn1.DERAbstractString
 * @class base class for ASN.1 DER string classes
 * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})
 * @property {String} s internal string of value
 * @extends KJUR.asn1.ASN1Object
 * @description
 * <br/>
 * As for argument 'params' for constructor, you can specify one of
 * following properties:
 * <ul>
 * <li>str - specify initial ASN.1 value(V) by a string</li>
 * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>
 * </ul>
 * NOTE: 'params' can be omitted.
 */
KJUR.asn1.DERAbstractString = function (params) {
    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);
    var s = null;
    var hV = null;
    /**
     * get string value of this string object
     * @name getString
     * @memberOf KJUR.asn1.DERAbstractString#
     * @function
     * @return {String} string value of this string object
     */
    this.getString = function () {
        return this.s;
    };
    /**
     * set value by a string
     * @name setString
     * @memberOf KJUR.asn1.DERAbstractString#
     * @function
     * @param {String} newS value by a string to set
     */
    this.setString = function (newS) {
        this.hTLV = null;
        this.isModified = true;
        this.s = newS;
        this.hV = stohex(this.s);
    };
    /**
     * set value by a hexadecimal string
     * @name setStringHex
     * @memberOf KJUR.asn1.DERAbstractString#
     * @function
     * @param {String} newHexString value by a hexadecimal string to set
     */
    this.setStringHex = function (newHexString) {
        this.hTLV = null;
        this.isModified = true;
        this.s = null;
        this.hV = newHexString;
    };
    this.getFreshValueHex = function () {
        return this.hV;
    };
    if (typeof params != "undefined") {
        if (typeof params == "string") {
            this.setString(params);
        }
        else if (typeof params['str'] != "undefined") {
            this.setString(params['str']);
        }
        else if (typeof params['hex'] != "undefined") {
            this.setStringHex(params['hex']);
        }
    }
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERAbstractString, KJUR.asn1.ASN1Object);
// == END   DERAbstractString ================================================
// == BEGIN DERAbstractTime ==================================================
/**
 * base class for ASN.1 DER Generalized/UTCTime class
 * @name KJUR.asn1.DERAbstractTime
 * @class base class for ASN.1 DER Generalized/UTCTime class
 * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})
 * @extends KJUR.asn1.ASN1Object
 * @description
 * @see KJUR.asn1.ASN1Object - superclass
 */
KJUR.asn1.DERAbstractTime = function (params) {
    KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);
    var s = null;
    var date = null;
    // --- PRIVATE METHODS --------------------
    this.localDateToUTC = function (d) {
        utc = d.getTime() + (d.getTimezoneOffset() * 60000);
        var utcDate = new Date(utc);
        return utcDate;
    };
    /*
     * format date string by Data object
     * @name formatDate
     * @memberOf KJUR.asn1.AbstractTime;
     * @param {Date} dateObject
     * @param {string} type 'utc' or 'gen'
     * @param {boolean} withMillis flag for with millisections or not
     * @description
     * 'withMillis' flag is supported from asn1 1.0.6.
     */
    this.formatDate = function (dateObject, type, withMillis) {
        var pad = this.zeroPadding;
        var d = this.localDateToUTC(dateObject);
        var year = String(d.getFullYear());
        if (type == 'utc')
            year = year.substr(2, 2);
        var month = pad(String(d.getMonth() + 1), 2);
        var day = pad(String(d.getDate()), 2);
        var hour = pad(String(d.getHours()), 2);
        var min = pad(String(d.getMinutes()), 2);
        var sec = pad(String(d.getSeconds()), 2);
        var s = year + month + day + hour + min + sec;
        if (withMillis === true) {
            var millis = d.getMilliseconds();
            if (millis != 0) {
                var sMillis = pad(String(millis), 3);
                sMillis = sMillis.replace(/[0]+$/, "");
                s = s + "." + sMillis;
            }
        }
        return s + "Z";
    };
    this.zeroPadding = function (s, len) {
        if (s.length >= len)
            return s;
        return new Array(len - s.length + 1).join('0') + s;
    };
    // --- PUBLIC METHODS --------------------
    /**
     * get string value of this string object
     * @name getString
     * @memberOf KJUR.asn1.DERAbstractTime#
     * @function
     * @return {String} string value of this time object
     */
    this.getString = function () {
        return this.s;
    };
    /**
     * set value by a string
     * @name setString
     * @memberOf KJUR.asn1.DERAbstractTime#
     * @function
     * @param {String} newS value by a string to set such like "130430235959Z"
     */
    this.setString = function (newS) {
        this.hTLV = null;
        this.isModified = true;
        this.s = newS;
        this.hV = stohex(newS);
    };
    /**
     * set value by a Date object
     * @name setByDateValue
     * @memberOf KJUR.asn1.DERAbstractTime#
     * @function
     * @param {Integer} year year of date (ex. 2013)
     * @param {Integer} month month of date between 1 and 12 (ex. 12)
     * @param {Integer} day day of month
     * @param {Integer} hour hours of date
     * @param {Integer} min minutes of date
     * @param {Integer} sec seconds of date
     */
    this.setByDateValue = function (year, month, day, hour, min, sec) {
        var dateObject = new Date(Date.UTC(year, month - 1, day, hour, min, sec, 0));
        this.setByDate(dateObject);
    };
    this.getFreshValueHex = function () {
        return this.hV;
    };
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERAbstractTime, KJUR.asn1.ASN1Object);
// == END   DERAbstractTime ==================================================
// == BEGIN DERAbstractStructured ============================================
/**
 * base class for ASN.1 DER structured class
 * @name KJUR.asn1.DERAbstractStructured
 * @class base class for ASN.1 DER structured class
 * @property {Array} asn1Array internal array of ASN1Object
 * @extends KJUR.asn1.ASN1Object
 * @description
 * @see KJUR.asn1.ASN1Object - superclass
 */
KJUR.asn1.DERAbstractStructured = function (params) {
    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);
    var asn1Array = null;
    /**
     * set value by array of ASN1Object
     * @name setByASN1ObjectArray
     * @memberOf KJUR.asn1.DERAbstractStructured#
     * @function
     * @param {array} asn1ObjectArray array of ASN1Object to set
     */
    this.setByASN1ObjectArray = function (asn1ObjectArray) {
        this.hTLV = null;
        this.isModified = true;
        this.asn1Array = asn1ObjectArray;
    };
    /**
     * append an ASN1Object to internal array
     * @name appendASN1Object
     * @memberOf KJUR.asn1.DERAbstractStructured#
     * @function
     * @param {ASN1Object} asn1Object to add
     */
    this.appendASN1Object = function (asn1Object) {
        this.hTLV = null;
        this.isModified = true;
        this.asn1Array.push(asn1Object);
    };
    this.asn1Array = new Array();
    if (typeof params != "undefined") {
        if (typeof params['array'] != "undefined") {
            this.asn1Array = params['array'];
        }
    }
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERAbstractStructured, KJUR.asn1.ASN1Object);
// ********************************************************************
//  ASN.1 Object Classes
// ********************************************************************
// ********************************************************************
/**
 * class for ASN.1 DER Boolean
 * @name KJUR.asn1.DERBoolean
 * @class class for ASN.1 DER Boolean
 * @extends KJUR.asn1.ASN1Object
 * @description
 * @see KJUR.asn1.ASN1Object - superclass
 */
KJUR.asn1.DERBoolean = function () {
    KJUR.asn1.DERBoolean.superclass.constructor.call(this);
    this.hT = "01";
    this.hTLV = "0101ff";
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERBoolean, KJUR.asn1.ASN1Object);
// ********************************************************************
/**
 * class for ASN.1 DER Integer
 * @name KJUR.asn1.DERInteger
 * @class class for ASN.1 DER Integer
 * @extends KJUR.asn1.ASN1Object
 * @description
 * <br/>
 * As for argument 'params' for constructor, you can specify one of
 * following properties:
 * <ul>
 * <li>int - specify initial ASN.1 value(V) by integer value</li>
 * <li>bigint - specify initial ASN.1 value(V) by BigInteger object</li>
 * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>
 * </ul>
 * NOTE: 'params' can be omitted.
 */
KJUR.asn1.DERInteger = function (params) {
    KJUR.asn1.DERInteger.superclass.constructor.call(this);
    this.hT = "02";
    /**
     * set value by Tom Wu's BigInteger object
     * @name setByBigInteger
     * @memberOf KJUR.asn1.DERInteger#
     * @function
     * @param {BigInteger} bigIntegerValue to set
     */
    this.setByBigInteger = function (bigIntegerValue) {
        this.hTLV = null;
        this.isModified = true;
        this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);
    };
    /**
     * set value by integer value
     * @name setByInteger
     * @memberOf KJUR.asn1.DERInteger
     * @function
     * @param {Integer} integer value to set
     */
    this.setByInteger = function (intValue) {
        var bi = new _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(String(intValue), 10);
        this.setByBigInteger(bi);
    };
    /**
     * set value by integer value
     * @name setValueHex
     * @memberOf KJUR.asn1.DERInteger#
     * @function
     * @param {String} hexadecimal string of integer value
     * @description
     * <br/>
     * NOTE: Value shall be represented by minimum octet length of
     * two's complement representation.
     * @example
     * new KJUR.asn1.DERInteger(123);
     * new KJUR.asn1.DERInteger({'int': 123});
     * new KJUR.asn1.DERInteger({'hex': '1fad'});
     */
    this.setValueHex = function (newHexString) {
        this.hV = newHexString;
    };
    this.getFreshValueHex = function () {
        return this.hV;
    };
    if (typeof params != "undefined") {
        if (typeof params['bigint'] != "undefined") {
            this.setByBigInteger(params['bigint']);
        }
        else if (typeof params['int'] != "undefined") {
            this.setByInteger(params['int']);
        }
        else if (typeof params == "number") {
            this.setByInteger(params);
        }
        else if (typeof params['hex'] != "undefined") {
            this.setValueHex(params['hex']);
        }
    }
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERInteger, KJUR.asn1.ASN1Object);
// ********************************************************************
/**
 * class for ASN.1 DER encoded BitString primitive
 * @name KJUR.asn1.DERBitString
 * @class class for ASN.1 DER encoded BitString primitive
 * @extends KJUR.asn1.ASN1Object
 * @description
 * <br/>
 * As for argument 'params' for constructor, you can specify one of
 * following properties:
 * <ul>
 * <li>bin - specify binary string (ex. '10111')</li>
 * <li>array - specify array of boolean (ex. [true,false,true,true])</li>
 * <li>hex - specify hexadecimal string of ASN.1 value(V) including unused bits</li>
 * <li>obj - specify {@link KJUR.asn1.ASN1Util.newObject}
 * argument for "BitString encapsulates" structure.</li>
 * </ul>
 * NOTE1: 'params' can be omitted.<br/>
 * NOTE2: 'obj' parameter have been supported since
 * asn1 1.0.11, jsrsasign 6.1.1 (2016-Sep-25).<br/>
 * @example
 * // default constructor
 * o = new KJUR.asn1.DERBitString();
 * // initialize with binary string
 * o = new KJUR.asn1.DERBitString({bin: "1011"});
 * // initialize with boolean array
 * o = new KJUR.asn1.DERBitString({array: [true,false,true,true]});
 * // initialize with hexadecimal string (04 is unused bits)
 * o = new KJUR.asn1.DEROctetString({hex: "04bac0"});
 * // initialize with ASN1Util.newObject argument for encapsulated
 * o = new KJUR.asn1.DERBitString({obj: {seq: [{int: 3}, {prnstr: 'aaa'}]}});
 * // above generates a ASN.1 data like this:
 * // BIT STRING, encapsulates {
 * //   SEQUENCE {
 * //     INTEGER 3
 * //     PrintableString 'aaa'
 * //     }
 * //   }
 */
KJUR.asn1.DERBitString = function (params) {
    if (params !== undefined && typeof params.obj !== "undefined") {
        var o = KJUR.asn1.ASN1Util.newObject(params.obj);
        params.hex = "00" + o.getEncodedHex();
    }
    KJUR.asn1.DERBitString.superclass.constructor.call(this);
    this.hT = "03";
    /**
     * set ASN.1 value(V) by a hexadecimal string including unused bits
     * @name setHexValueIncludingUnusedBits
     * @memberOf KJUR.asn1.DERBitString#
     * @function
     * @param {String} newHexStringIncludingUnusedBits
     */
    this.setHexValueIncludingUnusedBits = function (newHexStringIncludingUnusedBits) {
        this.hTLV = null;
        this.isModified = true;
        this.hV = newHexStringIncludingUnusedBits;
    };
    /**
     * set ASN.1 value(V) by unused bit and hexadecimal string of value
     * @name setUnusedBitsAndHexValue
     * @memberOf KJUR.asn1.DERBitString#
     * @function
     * @param {Integer} unusedBits
     * @param {String} hValue
     */
    this.setUnusedBitsAndHexValue = function (unusedBits, hValue) {
        if (unusedBits < 0 || 7 < unusedBits) {
            throw "unused bits shall be from 0 to 7: u = " + unusedBits;
        }
        var hUnusedBits = "0" + unusedBits;
        this.hTLV = null;
        this.isModified = true;
        this.hV = hUnusedBits + hValue;
    };
    /**
     * set ASN.1 DER BitString by binary string<br/>
     * @name setByBinaryString
     * @memberOf KJUR.asn1.DERBitString#
     * @function
     * @param {String} binaryString binary value string (i.e. '10111')
     * @description
     * Its unused bits will be calculated automatically by length of
     * 'binaryValue'. <br/>
     * NOTE: Trailing zeros '0' will be ignored.
     * @example
     * o = new KJUR.asn1.DERBitString();
     * o.setByBooleanArray("01011");
     */
    this.setByBinaryString = function (binaryString) {
        binaryString = binaryString.replace(/0+$/, '');
        var unusedBits = 8 - binaryString.length % 8;
        if (unusedBits == 8)
            unusedBits = 0;
        for (var i = 0; i <= unusedBits; i++) {
            binaryString += '0';
        }
        var h = '';
        for (var i = 0; i < binaryString.length - 1; i += 8) {
            var b = binaryString.substr(i, 8);
            var x = parseInt(b, 2).toString(16);
            if (x.length == 1)
                x = '0' + x;
            h += x;
        }
        this.hTLV = null;
        this.isModified = true;
        this.hV = '0' + unusedBits + h;
    };
    /**
     * set ASN.1 TLV value(V) by an array of boolean<br/>
     * @name setByBooleanArray
     * @memberOf KJUR.asn1.DERBitString#
     * @function
     * @param {array} booleanArray array of boolean (ex. [true, false, true])
     * @description
     * NOTE: Trailing falses will be ignored in the ASN.1 DER Object.
     * @example
     * o = new KJUR.asn1.DERBitString();
     * o.setByBooleanArray([false, true, false, true, true]);
     */
    this.setByBooleanArray = function (booleanArray) {
        var s = '';
        for (var i = 0; i < booleanArray.length; i++) {
            if (booleanArray[i] == true) {
                s += '1';
            }
            else {
                s += '0';
            }
        }
        this.setByBinaryString(s);
    };
    /**
     * generate an array of falses with specified length<br/>
     * @name newFalseArray
     * @memberOf KJUR.asn1.DERBitString
     * @function
     * @param {Integer} nLength length of array to generate
     * @return {array} array of boolean falses
     * @description
     * This static method may be useful to initialize boolean array.
     * @example
     * o = new KJUR.asn1.DERBitString();
     * o.newFalseArray(3) &rarr; [false, false, false]
     */
    this.newFalseArray = function (nLength) {
        var a = new Array(nLength);
        for (var i = 0; i < nLength; i++) {
            a[i] = false;
        }
        return a;
    };
    this.getFreshValueHex = function () {
        return this.hV;
    };
    if (typeof params != "undefined") {
        if (typeof params == "string" && params.toLowerCase().match(/^[0-9a-f]+$/)) {
            this.setHexValueIncludingUnusedBits(params);
        }
        else if (typeof params['hex'] != "undefined") {
            this.setHexValueIncludingUnusedBits(params['hex']);
        }
        else if (typeof params['bin'] != "undefined") {
            this.setByBinaryString(params['bin']);
        }
        else if (typeof params['array'] != "undefined") {
            this.setByBooleanArray(params['array']);
        }
    }
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERBitString, KJUR.asn1.ASN1Object);
// ********************************************************************
/**
 * class for ASN.1 DER OctetString<br/>
 * @name KJUR.asn1.DEROctetString
 * @class class for ASN.1 DER OctetString
 * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})
 * @extends KJUR.asn1.DERAbstractString
 * @description
 * This class provides ASN.1 OctetString simple type.<br/>
 * Supported "params" attributes are:
 * <ul>
 * <li>str - to set a string as a value</li>
 * <li>hex - to set a hexadecimal string as a value</li>
 * <li>obj - to set a encapsulated ASN.1 value by JSON object
 * which is defined in {@link KJUR.asn1.ASN1Util.newObject}</li>
 * </ul>
 * NOTE: A parameter 'obj' have been supported
 * for "OCTET STRING, encapsulates" structure.
 * since asn1 1.0.11, jsrsasign 6.1.1 (2016-Sep-25).
 * @see KJUR.asn1.DERAbstractString - superclass
 * @example
 * // default constructor
 * o = new KJUR.asn1.DEROctetString();
 * // initialize with string
 * o = new KJUR.asn1.DEROctetString({str: "aaa"});
 * // initialize with hexadecimal string
 * o = new KJUR.asn1.DEROctetString({hex: "616161"});
 * // initialize with ASN1Util.newObject argument
 * o = new KJUR.asn1.DEROctetString({obj: {seq: [{int: 3}, {prnstr: 'aaa'}]}});
 * // above generates a ASN.1 data like this:
 * // OCTET STRING, encapsulates {
 * //   SEQUENCE {
 * //     INTEGER 3
 * //     PrintableString 'aaa'
 * //     }
 * //   }
 */
KJUR.asn1.DEROctetString = function (params) {
    if (params !== undefined && typeof params.obj !== "undefined") {
        var o = KJUR.asn1.ASN1Util.newObject(params.obj);
        params.hex = o.getEncodedHex();
    }
    KJUR.asn1.DEROctetString.superclass.constructor.call(this, params);
    this.hT = "04";
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DEROctetString, KJUR.asn1.DERAbstractString);
// ********************************************************************
/**
 * class for ASN.1 DER Null
 * @name KJUR.asn1.DERNull
 * @class class for ASN.1 DER Null
 * @extends KJUR.asn1.ASN1Object
 * @description
 * @see KJUR.asn1.ASN1Object - superclass
 */
KJUR.asn1.DERNull = function () {
    KJUR.asn1.DERNull.superclass.constructor.call(this);
    this.hT = "05";
    this.hTLV = "0500";
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERNull, KJUR.asn1.ASN1Object);
// ********************************************************************
/**
 * class for ASN.1 DER ObjectIdentifier
 * @name KJUR.asn1.DERObjectIdentifier
 * @class class for ASN.1 DER ObjectIdentifier
 * @param {Array} params associative array of parameters (ex. {'oid': '2.5.4.5'})
 * @extends KJUR.asn1.ASN1Object
 * @description
 * <br/>
 * As for argument 'params' for constructor, you can specify one of
 * following properties:
 * <ul>
 * <li>oid - specify initial ASN.1 value(V) by a oid string (ex. 2.5.4.13)</li>
 * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>
 * </ul>
 * NOTE: 'params' can be omitted.
 */
KJUR.asn1.DERObjectIdentifier = function (params) {
    var itox = function (i) {
        var h = i.toString(16);
        if (h.length == 1)
            h = '0' + h;
        return h;
    };
    var roidtox = function (roid) {
        var h = '';
        var bi = new _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(roid, 10);
        var b = bi.toString(2);
        var padLen = 7 - b.length % 7;
        if (padLen == 7)
            padLen = 0;
        var bPad = '';
        for (var i = 0; i < padLen; i++)
            bPad += '0';
        b = bPad + b;
        for (var i = 0; i < b.length - 1; i += 7) {
            var b8 = b.substr(i, 7);
            if (i != b.length - 7)
                b8 = '1' + b8;
            h += itox(parseInt(b8, 2));
        }
        return h;
    };
    KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);
    this.hT = "06";
    /**
     * set value by a hexadecimal string
     * @name setValueHex
     * @memberOf KJUR.asn1.DERObjectIdentifier#
     * @function
     * @param {String} newHexString hexadecimal value of OID bytes
     */
    this.setValueHex = function (newHexString) {
        this.hTLV = null;
        this.isModified = true;
        this.s = null;
        this.hV = newHexString;
    };
    /**
     * set value by a OID string<br/>
     * @name setValueOidString
     * @memberOf KJUR.asn1.DERObjectIdentifier#
     * @function
     * @param {String} oidString OID string (ex. 2.5.4.13)
     * @example
     * o = new KJUR.asn1.DERObjectIdentifier();
     * o.setValueOidString("2.5.4.13");
     */
    this.setValueOidString = function (oidString) {
        if (!oidString.match(/^[0-9.]+$/)) {
            throw "malformed oid string: " + oidString;
        }
        var h = '';
        var a = oidString.split('.');
        var i0 = parseInt(a[0]) * 40 + parseInt(a[1]);
        h += itox(i0);
        a.splice(0, 2);
        for (var i = 0; i < a.length; i++) {
            h += roidtox(a[i]);
        }
        this.hTLV = null;
        this.isModified = true;
        this.s = null;
        this.hV = h;
    };
    /**
     * set value by a OID name
     * @name setValueName
     * @memberOf KJUR.asn1.DERObjectIdentifier#
     * @function
     * @param {String} oidName OID name (ex. 'serverAuth')
     * @since 1.0.1
     * @description
     * OID name shall be defined in 'KJUR.asn1.x509.OID.name2oidList'.
     * Otherwise raise error.
     * @example
     * o = new KJUR.asn1.DERObjectIdentifier();
     * o.setValueName("serverAuth");
     */
    this.setValueName = function (oidName) {
        var oid = KJUR.asn1.x509.OID.name2oid(oidName);
        if (oid !== '') {
            this.setValueOidString(oid);
        }
        else {
            throw "DERObjectIdentifier oidName undefined: " + oidName;
        }
    };
    this.getFreshValueHex = function () {
        return this.hV;
    };
    if (params !== undefined) {
        if (typeof params === "string") {
            if (params.match(/^[0-2].[0-9.]+$/)) {
                this.setValueOidString(params);
            }
            else {
                this.setValueName(params);
            }
        }
        else if (params.oid !== undefined) {
            this.setValueOidString(params.oid);
        }
        else if (params.hex !== undefined) {
            this.setValueHex(params.hex);
        }
        else if (params.name !== undefined) {
            this.setValueName(params.name);
        }
    }
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier, KJUR.asn1.ASN1Object);
// ********************************************************************
/**
 * class for ASN.1 DER Enumerated
 * @name KJUR.asn1.DEREnumerated
 * @class class for ASN.1 DER Enumerated
 * @extends KJUR.asn1.ASN1Object
 * @description
 * <br/>
 * As for argument 'params' for constructor, you can specify one of
 * following properties:
 * <ul>
 * <li>int - specify initial ASN.1 value(V) by integer value</li>
 * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>
 * </ul>
 * NOTE: 'params' can be omitted.
 * @example
 * new KJUR.asn1.DEREnumerated(123);
 * new KJUR.asn1.DEREnumerated({int: 123});
 * new KJUR.asn1.DEREnumerated({hex: '1fad'});
 */
KJUR.asn1.DEREnumerated = function (params) {
    KJUR.asn1.DEREnumerated.superclass.constructor.call(this);
    this.hT = "0a";
    /**
     * set value by Tom Wu's BigInteger object
     * @name setByBigInteger
     * @memberOf KJUR.asn1.DEREnumerated#
     * @function
     * @param {BigInteger} bigIntegerValue to set
     */
    this.setByBigInteger = function (bigIntegerValue) {
        this.hTLV = null;
        this.isModified = true;
        this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);
    };
    /**
     * set value by integer value
     * @name setByInteger
     * @memberOf KJUR.asn1.DEREnumerated#
     * @function
     * @param {Integer} integer value to set
     */
    this.setByInteger = function (intValue) {
        var bi = new _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(String(intValue), 10);
        this.setByBigInteger(bi);
    };
    /**
     * set value by integer value
     * @name setValueHex
     * @memberOf KJUR.asn1.DEREnumerated#
     * @function
     * @param {String} hexadecimal string of integer value
     * @description
     * <br/>
     * NOTE: Value shall be represented by minimum octet length of
     * two's complement representation.
     */
    this.setValueHex = function (newHexString) {
        this.hV = newHexString;
    };
    this.getFreshValueHex = function () {
        return this.hV;
    };
    if (typeof params != "undefined") {
        if (typeof params['int'] != "undefined") {
            this.setByInteger(params['int']);
        }
        else if (typeof params == "number") {
            this.setByInteger(params);
        }
        else if (typeof params['hex'] != "undefined") {
            this.setValueHex(params['hex']);
        }
    }
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DEREnumerated, KJUR.asn1.ASN1Object);
// ********************************************************************
/**
 * class for ASN.1 DER UTF8String
 * @name KJUR.asn1.DERUTF8String
 * @class class for ASN.1 DER UTF8String
 * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})
 * @extends KJUR.asn1.DERAbstractString
 * @description
 * @see KJUR.asn1.DERAbstractString - superclass
 */
KJUR.asn1.DERUTF8String = function (params) {
    KJUR.asn1.DERUTF8String.superclass.constructor.call(this, params);
    this.hT = "0c";
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERUTF8String, KJUR.asn1.DERAbstractString);
// ********************************************************************
/**
 * class for ASN.1 DER NumericString
 * @name KJUR.asn1.DERNumericString
 * @class class for ASN.1 DER NumericString
 * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})
 * @extends KJUR.asn1.DERAbstractString
 * @description
 * @see KJUR.asn1.DERAbstractString - superclass
 */
KJUR.asn1.DERNumericString = function (params) {
    KJUR.asn1.DERNumericString.superclass.constructor.call(this, params);
    this.hT = "12";
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERNumericString, KJUR.asn1.DERAbstractString);
// ********************************************************************
/**
 * class for ASN.1 DER PrintableString
 * @name KJUR.asn1.DERPrintableString
 * @class class for ASN.1 DER PrintableString
 * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})
 * @extends KJUR.asn1.DERAbstractString
 * @description
 * @see KJUR.asn1.DERAbstractString - superclass
 */
KJUR.asn1.DERPrintableString = function (params) {
    KJUR.asn1.DERPrintableString.superclass.constructor.call(this, params);
    this.hT = "13";
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERPrintableString, KJUR.asn1.DERAbstractString);
// ********************************************************************
/**
 * class for ASN.1 DER TeletexString
 * @name KJUR.asn1.DERTeletexString
 * @class class for ASN.1 DER TeletexString
 * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})
 * @extends KJUR.asn1.DERAbstractString
 * @description
 * @see KJUR.asn1.DERAbstractString - superclass
 */
KJUR.asn1.DERTeletexString = function (params) {
    KJUR.asn1.DERTeletexString.superclass.constructor.call(this, params);
    this.hT = "14";
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERTeletexString, KJUR.asn1.DERAbstractString);
// ********************************************************************
/**
 * class for ASN.1 DER IA5String
 * @name KJUR.asn1.DERIA5String
 * @class class for ASN.1 DER IA5String
 * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})
 * @extends KJUR.asn1.DERAbstractString
 * @description
 * @see KJUR.asn1.DERAbstractString - superclass
 */
KJUR.asn1.DERIA5String = function (params) {
    KJUR.asn1.DERIA5String.superclass.constructor.call(this, params);
    this.hT = "16";
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERIA5String, KJUR.asn1.DERAbstractString);
// ********************************************************************
/**
 * class for ASN.1 DER UTCTime
 * @name KJUR.asn1.DERUTCTime
 * @class class for ASN.1 DER UTCTime
 * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})
 * @extends KJUR.asn1.DERAbstractTime
 * @description
 * <br/>
 * As for argument 'params' for constructor, you can specify one of
 * following properties:
 * <ul>
 * <li>str - specify initial ASN.1 value(V) by a string (ex.'130430235959Z')</li>
 * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>
 * <li>date - specify Date object.</li>
 * </ul>
 * NOTE: 'params' can be omitted.
 * <h4>EXAMPLES</h4>
 * @example
 * d1 = new KJUR.asn1.DERUTCTime();
 * d1.setString('130430125959Z');
 *
 * d2 = new KJUR.asn1.DERUTCTime({'str': '130430125959Z'});
 * d3 = new KJUR.asn1.DERUTCTime({'date': new Date(Date.UTC(2015, 0, 31, 0, 0, 0, 0))});
 * d4 = new KJUR.asn1.DERUTCTime('130430125959Z');
 */
KJUR.asn1.DERUTCTime = function (params) {
    KJUR.asn1.DERUTCTime.superclass.constructor.call(this, params);
    this.hT = "17";
    /**
     * set value by a Date object<br/>
     * @name setByDate
     * @memberOf KJUR.asn1.DERUTCTime#
     * @function
     * @param {Date} dateObject Date object to set ASN.1 value(V)
     * @example
     * o = new KJUR.asn1.DERUTCTime();
     * o.setByDate(new Date("2016/12/31"));
     */
    this.setByDate = function (dateObject) {
        this.hTLV = null;
        this.isModified = true;
        this.date = dateObject;
        this.s = this.formatDate(this.date, 'utc');
        this.hV = stohex(this.s);
    };
    this.getFreshValueHex = function () {
        if (typeof this.date == "undefined" && typeof this.s == "undefined") {
            this.date = new Date();
            this.s = this.formatDate(this.date, 'utc');
            this.hV = stohex(this.s);
        }
        return this.hV;
    };
    if (params !== undefined) {
        if (params.str !== undefined) {
            this.setString(params.str);
        }
        else if (typeof params == "string" && params.match(/^[0-9]{12}Z$/)) {
            this.setString(params);
        }
        else if (params.hex !== undefined) {
            this.setStringHex(params.hex);
        }
        else if (params.date !== undefined) {
            this.setByDate(params.date);
        }
    }
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERUTCTime, KJUR.asn1.DERAbstractTime);
// ********************************************************************
/**
 * class for ASN.1 DER GeneralizedTime
 * @name KJUR.asn1.DERGeneralizedTime
 * @class class for ASN.1 DER GeneralizedTime
 * @param {Array} params associative array of parameters (ex. {'str': '20130430235959Z'})
 * @property {Boolean} withMillis flag to show milliseconds or not
 * @extends KJUR.asn1.DERAbstractTime
 * @description
 * <br/>
 * As for argument 'params' for constructor, you can specify one of
 * following properties:
 * <ul>
 * <li>str - specify initial ASN.1 value(V) by a string (ex.'20130430235959Z')</li>
 * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>
 * <li>date - specify Date object.</li>
 * <li>millis - specify flag to show milliseconds (from 1.0.6)</li>
 * </ul>
 * NOTE1: 'params' can be omitted.
 * NOTE2: 'withMillis' property is supported from asn1 1.0.6.
 */
KJUR.asn1.DERGeneralizedTime = function (params) {
    KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this, params);
    this.hT = "18";
    this.withMillis = false;
    /**
     * set value by a Date object
     * @name setByDate
     * @memberOf KJUR.asn1.DERGeneralizedTime#
     * @function
     * @param {Date} dateObject Date object to set ASN.1 value(V)
     * @example
     * When you specify UTC time, use 'Date.UTC' method like this:<br/>
     * o1 = new DERUTCTime();
     * o1.setByDate(date);
     *
     * date = new Date(Date.UTC(2015, 0, 31, 23, 59, 59, 0)); #2015JAN31 23:59:59
     */
    this.setByDate = function (dateObject) {
        this.hTLV = null;
        this.isModified = true;
        this.date = dateObject;
        this.s = this.formatDate(this.date, 'gen', this.withMillis);
        this.hV = stohex(this.s);
    };
    this.getFreshValueHex = function () {
        if (this.date === undefined && this.s === undefined) {
            this.date = new Date();
            this.s = this.formatDate(this.date, 'gen', this.withMillis);
            this.hV = stohex(this.s);
        }
        return this.hV;
    };
    if (params !== undefined) {
        if (params.str !== undefined) {
            this.setString(params.str);
        }
        else if (typeof params == "string" && params.match(/^[0-9]{14}Z$/)) {
            this.setString(params);
        }
        else if (params.hex !== undefined) {
            this.setStringHex(params.hex);
        }
        else if (params.date !== undefined) {
            this.setByDate(params.date);
        }
        if (params.millis === true) {
            this.withMillis = true;
        }
    }
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime, KJUR.asn1.DERAbstractTime);
// ********************************************************************
/**
 * class for ASN.1 DER Sequence
 * @name KJUR.asn1.DERSequence
 * @class class for ASN.1 DER Sequence
 * @extends KJUR.asn1.DERAbstractStructured
 * @description
 * <br/>
 * As for argument 'params' for constructor, you can specify one of
 * following properties:
 * <ul>
 * <li>array - specify array of ASN1Object to set elements of content</li>
 * </ul>
 * NOTE: 'params' can be omitted.
 */
KJUR.asn1.DERSequence = function (params) {
    KJUR.asn1.DERSequence.superclass.constructor.call(this, params);
    this.hT = "30";
    this.getFreshValueHex = function () {
        var h = '';
        for (var i = 0; i < this.asn1Array.length; i++) {
            var asn1Obj = this.asn1Array[i];
            h += asn1Obj.getEncodedHex();
        }
        this.hV = h;
        return this.hV;
    };
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERSequence, KJUR.asn1.DERAbstractStructured);
// ********************************************************************
/**
 * class for ASN.1 DER Set
 * @name KJUR.asn1.DERSet
 * @class class for ASN.1 DER Set
 * @extends KJUR.asn1.DERAbstractStructured
 * @description
 * <br/>
 * As for argument 'params' for constructor, you can specify one of
 * following properties:
 * <ul>
 * <li>array - specify array of ASN1Object to set elements of content</li>
 * <li>sortflag - flag for sort (default: true). ASN.1 BER is not sorted in 'SET OF'.</li>
 * </ul>
 * NOTE1: 'params' can be omitted.<br/>
 * NOTE2: sortflag is supported since 1.0.5.
 */
KJUR.asn1.DERSet = function (params) {
    KJUR.asn1.DERSet.superclass.constructor.call(this, params);
    this.hT = "31";
    this.sortFlag = true; // item shall be sorted only in ASN.1 DER
    this.getFreshValueHex = function () {
        var a = new Array();
        for (var i = 0; i < this.asn1Array.length; i++) {
            var asn1Obj = this.asn1Array[i];
            a.push(asn1Obj.getEncodedHex());
        }
        if (this.sortFlag == true)
            a.sort();
        this.hV = a.join('');
        return this.hV;
    };
    if (typeof params != "undefined") {
        if (typeof params.sortflag != "undefined" &&
            params.sortflag == false)
            this.sortFlag = false;
    }
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERSet, KJUR.asn1.DERAbstractStructured);
// ********************************************************************
/**
 * class for ASN.1 DER TaggedObject
 * @name KJUR.asn1.DERTaggedObject
 * @class class for ASN.1 DER TaggedObject
 * @extends KJUR.asn1.ASN1Object
 * @description
 * <br/>
 * Parameter 'tagNoNex' is ASN.1 tag(T) value for this object.
 * For example, if you find '[1]' tag in a ASN.1 dump,
 * 'tagNoHex' will be 'a1'.
 * <br/>
 * As for optional argument 'params' for constructor, you can specify *ANY* of
 * following properties:
 * <ul>
 * <li>explicit - specify true if this is explicit tag otherwise false
 *     (default is 'true').</li>
 * <li>tag - specify tag (default is 'a0' which means [0])</li>
 * <li>obj - specify ASN1Object which is tagged</li>
 * </ul>
 * @example
 * d1 = new KJUR.asn1.DERUTF8String({'str':'a'});
 * d2 = new KJUR.asn1.DERTaggedObject({'obj': d1});
 * hex = d2.getEncodedHex();
 */
KJUR.asn1.DERTaggedObject = function (params) {
    KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);
    this.hT = "a0";
    this.hV = '';
    this.isExplicit = true;
    this.asn1Object = null;
    /**
     * set value by an ASN1Object
     * @name setString
     * @memberOf KJUR.asn1.DERTaggedObject#
     * @function
     * @param {Boolean} isExplicitFlag flag for explicit/implicit tag
     * @param {Integer} tagNoHex hexadecimal string of ASN.1 tag
     * @param {ASN1Object} asn1Object ASN.1 to encapsulate
     */
    this.setASN1Object = function (isExplicitFlag, tagNoHex, asn1Object) {
        this.hT = tagNoHex;
        this.isExplicit = isExplicitFlag;
        this.asn1Object = asn1Object;
        if (this.isExplicit) {
            this.hV = this.asn1Object.getEncodedHex();
            this.hTLV = null;
            this.isModified = true;
        }
        else {
            this.hV = null;
            this.hTLV = asn1Object.getEncodedHex();
            this.hTLV = this.hTLV.replace(/^../, tagNoHex);
            this.isModified = false;
        }
    };
    this.getFreshValueHex = function () {
        return this.hV;
    };
    if (typeof params != "undefined") {
        if (typeof params['tag'] != "undefined") {
            this.hT = params['tag'];
        }
        if (typeof params['explicit'] != "undefined") {
            this.isExplicit = params['explicit'];
        }
        if (typeof params['obj'] != "undefined") {
            this.asn1Object = params['obj'];
            this.setASN1Object(this.isExplicit, this.hT, this.asn1Object);
        }
    }
};
_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERTaggedObject, KJUR.asn1.ASN1Object);


//# sourceURL=webpack://JSEncrypt/./lib/lib/jsrsasign/asn1-1.0.js?`)},"./lib/lib/jsrsasign/yahoo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "YAHOO": () => (/* binding */ YAHOO)
/* harmony export */ });
/*!
Copyright (c) 2011, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.9.0
*/
var YAHOO = {};
YAHOO.lang = {
    /**
     * Utility to set up the prototype, constructor and superclass properties to
     * support an inheritance strategy that can chain constructors and methods.
     * Static members will not be inherited.
     *
     * @method extend
     * @static
     * @param {Function} subc   the object to modify
     * @param {Function} superc the object to inherit
     * @param {Object} overrides  additional properties/methods to add to the
     *                              subclass prototype.  These will override the
     *                              matching items obtained from the superclass
     *                              if present.
     */
    extend: function (subc, superc, overrides) {
        if (!superc || !subc) {
            throw new Error("YAHOO.lang.extend failed, please check that " +
                "all dependencies are included.");
        }
        var F = function () { };
        F.prototype = superc.prototype;
        subc.prototype = new F();
        subc.prototype.constructor = subc;
        subc.superclass = superc.prototype;
        if (superc.prototype.constructor == Object.prototype.constructor) {
            superc.prototype.constructor = superc;
        }
        if (overrides) {
            var i;
            for (i in overrides) {
                subc.prototype[i] = overrides[i];
            }
            /*
             * IE will not enumerate native functions in a derived object even if the
             * function was overridden.  This is a workaround for specific functions
             * we care about on the Object prototype.
             * @property _IEEnumFix
             * @param {Function} r  the object to receive the augmentation
             * @param {Function} s  the object that supplies the properties to augment
             * @static
             * @private
             */
            var _IEEnumFix = function () { }, ADD = ["toString", "valueOf"];
            try {
                if (/MSIE/.test(navigator.userAgent)) {
                    _IEEnumFix = function (r, s) {
                        for (i = 0; i < ADD.length; i = i + 1) {
                            var fname = ADD[i], f = s[fname];
                            if (typeof f === 'function' && f != Object.prototype[fname]) {
                                r[fname] = f;
                            }
                        }
                    };
                }
            }
            catch (ex) { }
            ;
            _IEEnumFix(subc.prototype, overrides);
        }
    }
};


//# sourceURL=webpack://JSEncrypt/./lib/lib/jsrsasign/yahoo.js?`)},"./node_modules/process/browser.js":module=>{eval(`// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


//# sourceURL=webpack://JSEncrypt/./node_modules/process/browser.js?`)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./lib/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})())});var p_=Ve((l_,Rc)=>{/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(e,t){"use strict";typeof Rc=="object"&&typeof Rc.exports=="object"?Rc.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(e)})(typeof window<"u"?window:l_,function(e,t){"use strict";var n=[],i=Object.getPrototypeOf,o=n.slice,r=n.flat?function(c){return n.flat.call(c)}:function(c){return n.concat.apply([],c)},a=n.push,s=n.indexOf,u={},l=u.toString,d=u.hasOwnProperty,f=d.toString,g=f.call(Object),b={},x=function(p){return typeof p=="function"&&typeof p.nodeType!="number"&&typeof p.item!="function"},T=function(p){return p!=null&&p===p.window},R=e.document,D={type:!0,src:!0,nonce:!0,noModule:!0};function M(c,p,v){v=v||R;var E,S,A=v.createElement("script");if(A.text=c,p)for(E in D)S=p[E]||p.getAttribute&&p.getAttribute(E),S&&A.setAttribute(E,S);v.head.appendChild(A).parentNode.removeChild(A)}function N(c){return c==null?c+"":typeof c=="object"||typeof c=="function"?u[l.call(c)]||"object":typeof c}var V="3.7.0",q=/HTML$/i,_=function(c,p){return new _.fn.init(c,p)};_.fn=_.prototype={jquery:V,constructor:_,length:0,toArray:function(){return o.call(this)},get:function(c){return c==null?o.call(this):c<0?this[c+this.length]:this[c]},pushStack:function(c){var p=_.merge(this.constructor(),c);return p.prevObject=this,p},each:function(c){return _.each(this,c)},map:function(c){return this.pushStack(_.map(this,function(p,v){return c.call(p,v,p)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,function(c,p){return(p+1)%2}))},odd:function(){return this.pushStack(_.grep(this,function(c,p){return p%2}))},eq:function(c){var p=this.length,v=+c+(c<0?p:0);return this.pushStack(v>=0&&v<p?[this[v]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},_.extend=_.fn.extend=function(){var c,p,v,E,S,A,O=arguments[0]||{},k=1,F=arguments.length,W=!1;for(typeof O=="boolean"&&(W=O,O=arguments[k]||{},k++),typeof O!="object"&&!x(O)&&(O={}),k===F&&(O=this,k--);k<F;k++)if((c=arguments[k])!=null)for(p in c)E=c[p],!(p==="__proto__"||O===E)&&(W&&E&&(_.isPlainObject(E)||(S=Array.isArray(E)))?(v=O[p],S&&!Array.isArray(v)?A=[]:!S&&!_.isPlainObject(v)?A={}:A=v,S=!1,O[p]=_.extend(W,A,E)):E!==void 0&&(O[p]=E));return O},_.extend({expando:"jQuery"+(V+Math.random()).replace(/\D/g,""),isReady:!0,error:function(c){throw new Error(c)},noop:function(){},isPlainObject:function(c){var p,v;return!c||l.call(c)!=="[object Object]"?!1:(p=i(c),p?(v=d.call(p,"constructor")&&p.constructor,typeof v=="function"&&f.call(v)===g):!0)},isEmptyObject:function(c){var p;for(p in c)return!1;return!0},globalEval:function(c,p,v){M(c,{nonce:p&&p.nonce},v)},each:function(c,p){var v,E=0;if(ee(c))for(v=c.length;E<v&&p.call(c[E],E,c[E])!==!1;E++);else for(E in c)if(p.call(c[E],E,c[E])===!1)break;return c},text:function(c){var p,v="",E=0,S=c.nodeType;if(S){if(S===1||S===9||S===11)return c.textContent;if(S===3||S===4)return c.nodeValue}else for(;p=c[E++];)v+=_.text(p);return v},makeArray:function(c,p){var v=p||[];return c!=null&&(ee(Object(c))?_.merge(v,typeof c=="string"?[c]:c):a.call(v,c)),v},inArray:function(c,p,v){return p==null?-1:s.call(p,c,v)},isXMLDoc:function(c){var p=c&&c.namespaceURI,v=c&&(c.ownerDocument||c).documentElement;return!q.test(p||v&&v.nodeName||"HTML")},merge:function(c,p){for(var v=+p.length,E=0,S=c.length;E<v;E++)c[S++]=p[E];return c.length=S,c},grep:function(c,p,v){for(var E,S=[],A=0,O=c.length,k=!v;A<O;A++)E=!p(c[A],A),E!==k&&S.push(c[A]);return S},map:function(c,p,v){var E,S,A=0,O=[];if(ee(c))for(E=c.length;A<E;A++)S=p(c[A],A,v),S!=null&&O.push(S);else for(A in c)S=p(c[A],A,v),S!=null&&O.push(S);return r(O)},guid:1,support:b}),typeof Symbol=="function"&&(_.fn[Symbol.iterator]=n[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(c,p){u["[object "+p+"]"]=p.toLowerCase()});function ee(c){var p=!!c&&"length"in c&&c.length,v=N(c);return x(c)||T(c)?!1:v==="array"||p===0||typeof p=="number"&&p>0&&p-1 in c}function Z(c,p){return c.nodeName&&c.nodeName.toLowerCase()===p.toLowerCase()}var J=n.pop,H=n.sort,te=n.splice,y="[\\x20\\t\\r\\n\\f]",w=new RegExp("^"+y+"+|((?:^|[^\\\\])(?:\\\\.)*)"+y+"+$","g");_.contains=function(c,p){var v=p&&p.parentNode;return c===v||!!(v&&v.nodeType===1&&(c.contains?c.contains(v):c.compareDocumentPosition&&c.compareDocumentPosition(v)&16))};var P=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function B(c,p){return p?c==="\0"?"\uFFFD":c.slice(0,-1)+"\\"+c.charCodeAt(c.length-1).toString(16)+" ":"\\"+c}_.escapeSelector=function(c){return(c+"").replace(P,B)};var Y=R,K=a;(function(){var c,p,v,E,S,A=K,O,k,F,W,ie,se=_.expando,Q=0,me=0,We=Ks(),st=Ks(),$e=Ks(),pn=Ks(),Xt=function(L,G){return L===G&&(S=!0),0},Ri="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Oi="(?:\\\\[\\da-fA-F]{1,6}"+y+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",nt="\\["+y+"*("+Oi+")(?:"+y+"*([*^$|!~]?=)"+y+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Oi+"))|)"+y+"*\\]",Xo=":("+Oi+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+nt+")*)|.*)\\)|)",ut=new RegExp(y+"+","g"),Vt=new RegExp("^"+y+"*,"+y+"*"),za=new RegExp("^"+y+"*([>+~]|"+y+")"+y+"*"),sl=new RegExp(y+"|>"),Ii=new RegExp(Xo),Ba=new RegExp("^"+Oi+"$"),Pi={ID:new RegExp("^#("+Oi+")"),CLASS:new RegExp("^\\.("+Oi+")"),TAG:new RegExp("^("+Oi+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+Xo),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+y+"*(even|odd|(([+-]|)(\\d*)n|)"+y+"*(?:([+-]|)"+y+"*(\\d+)|))"+y+"*\\)|)","i"),bool:new RegExp("^(?:"+Ri+")$","i"),needsContext:new RegExp("^"+y+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+y+"*((?:-\\d)?\\d*)"+y+"*\\)|)(?=[^-]|$)","i")},xo=/^(?:input|select|textarea|button)$/i,Eo=/^h\d$/i,ei=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,cl=/[+~]/,$i=new RegExp("\\\\[\\da-fA-F]{1,6}"+y+"?|\\\\([^\\r\\n\\f])","g"),Qi=function(L,G){var $="0x"+L.slice(1)-65536;return G||($<0?String.fromCharCode($+65536):String.fromCharCode($>>10|55296,$&1023|56320))},SC=function(){Co()},AC=Js(function(L){return L.disabled===!0&&Z(L,"fieldset")},{dir:"parentNode",next:"legend"});function RC(){try{return O.activeElement}catch{}}try{A.apply(n=o.call(Y.childNodes),Y.childNodes),n[Y.childNodes.length].nodeType}catch{A={apply:function(G,$){K.apply(G,o.call($))},call:function(G){K.apply(G,o.call(arguments,1))}}}function xt(L,G,$,ne){var ae,xe,Se,Le,Ae,Qe,Ge,Ke=G&&G.ownerDocument,et=G?G.nodeType:9;if($=$||[],typeof L!="string"||!L||et!==1&&et!==9&&et!==11)return $;if(!ne&&(Co(G),G=G||O,F)){if(et!==11&&(Ae=ei.exec(L)))if(ae=Ae[1]){if(et===9)if(Se=G.getElementById(ae)){if(Se.id===ae)return A.call($,Se),$}else return $;else if(Ke&&(Se=Ke.getElementById(ae))&&xt.contains(G,Se)&&Se.id===ae)return A.call($,Se),$}else{if(Ae[2])return A.apply($,G.getElementsByTagName(L)),$;if((ae=Ae[3])&&G.getElementsByClassName)return A.apply($,G.getElementsByClassName(ae)),$}if(!pn[L+" "]&&(!W||!W.test(L))){if(Ge=L,Ke=G,et===1&&(sl.test(L)||za.test(L))){for(Ke=cl.test(L)&&ul(G.parentNode)||G,(Ke!=G||!b.scope)&&((Le=G.getAttribute("id"))?Le=_.escapeSelector(Le):G.setAttribute("id",Le=se)),Qe=Ys(L),xe=Qe.length;xe--;)Qe[xe]=(Le?"#"+Le:":scope")+" "+Zs(Qe[xe]);Ge=Qe.join(",")}try{return A.apply($,Ke.querySelectorAll(Ge)),$}catch{pn(L,!0)}finally{Le===se&&G.removeAttribute("id")}}}return Wf(L.replace(w,"$1"),G,$,ne)}function Ks(){var L=[];function G($,ne){return L.push($+" ")>p.cacheLength&&delete G[L.shift()],G[$+" "]=ne}return G}function mi(L){return L[se]=!0,L}function Ur(L){var G=O.createElement("fieldset");try{return!!L(G)}catch{return!1}finally{G.parentNode&&G.parentNode.removeChild(G),G=null}}function OC(L){return function(G){return Z(G,"input")&&G.type===L}}function IC(L){return function(G){return(Z(G,"input")||Z(G,"button"))&&G.type===L}}function Hf(L){return function(G){return"form"in G?G.parentNode&&G.disabled===!1?"label"in G?"label"in G.parentNode?G.parentNode.disabled===L:G.disabled===L:G.isDisabled===L||G.isDisabled!==!L&&AC(G)===L:G.disabled===L:"label"in G?G.disabled===L:!1}}function $o(L){return mi(function(G){return G=+G,mi(function($,ne){for(var ae,xe=L([],$.length,G),Se=xe.length;Se--;)$[ae=xe[Se]]&&($[ae]=!(ne[ae]=$[ae]))})})}function ul(L){return L&&typeof L.getElementsByTagName<"u"&&L}function Co(L){var G,$=L?L.ownerDocument||L:Y;return $==O||$.nodeType!==9||!$.documentElement||(O=$,k=O.documentElement,F=!_.isXMLDoc(O),ie=k.matches||k.webkitMatchesSelector||k.msMatchesSelector,Y!=O&&(G=O.defaultView)&&G.top!==G&&G.addEventListener("unload",SC),b.getById=Ur(function(ne){return k.appendChild(ne).id=_.expando,!O.getElementsByName||!O.getElementsByName(_.expando).length}),b.disconnectedMatch=Ur(function(ne){return ie.call(ne,"*")}),b.scope=Ur(function(){return O.querySelectorAll(":scope")}),b.cssHas=Ur(function(){try{return O.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),b.getById?(p.filter.ID=function(ne){var ae=ne.replace($i,Qi);return function(xe){return xe.getAttribute("id")===ae}},p.find.ID=function(ne,ae){if(typeof ae.getElementById<"u"&&F){var xe=ae.getElementById(ne);return xe?[xe]:[]}}):(p.filter.ID=function(ne){var ae=ne.replace($i,Qi);return function(xe){var Se=typeof xe.getAttributeNode<"u"&&xe.getAttributeNode("id");return Se&&Se.value===ae}},p.find.ID=function(ne,ae){if(typeof ae.getElementById<"u"&&F){var xe,Se,Le,Ae=ae.getElementById(ne);if(Ae){if(xe=Ae.getAttributeNode("id"),xe&&xe.value===ne)return[Ae];for(Le=ae.getElementsByName(ne),Se=0;Ae=Le[Se++];)if(xe=Ae.getAttributeNode("id"),xe&&xe.value===ne)return[Ae]}return[]}}),p.find.TAG=function(ne,ae){return typeof ae.getElementsByTagName<"u"?ae.getElementsByTagName(ne):ae.querySelectorAll(ne)},p.find.CLASS=function(ne,ae){if(typeof ae.getElementsByClassName<"u"&&F)return ae.getElementsByClassName(ne)},W=[],Ur(function(ne){var ae;k.appendChild(ne).innerHTML="<a id='"+se+"' href='' disabled='disabled'></a><select id='"+se+"-\r\\' disabled='disabled'><option selected=''></option></select>",ne.querySelectorAll("[selected]").length||W.push("\\["+y+"*(?:value|"+Ri+")"),ne.querySelectorAll("[id~="+se+"-]").length||W.push("~="),ne.querySelectorAll("a#"+se+"+*").length||W.push(".#.+[+~]"),ne.querySelectorAll(":checked").length||W.push(":checked"),ae=O.createElement("input"),ae.setAttribute("type","hidden"),ne.appendChild(ae).setAttribute("name","D"),k.appendChild(ne).disabled=!0,ne.querySelectorAll(":disabled").length!==2&&W.push(":enabled",":disabled"),ae=O.createElement("input"),ae.setAttribute("name",""),ne.appendChild(ae),ne.querySelectorAll("[name='']").length||W.push("\\["+y+"*name"+y+"*="+y+`*(?:''|"")`)}),b.cssHas||W.push(":has"),W=W.length&&new RegExp(W.join("|")),Xt=function(ne,ae){if(ne===ae)return S=!0,0;var xe=!ne.compareDocumentPosition-!ae.compareDocumentPosition;return xe||(xe=(ne.ownerDocument||ne)==(ae.ownerDocument||ae)?ne.compareDocumentPosition(ae):1,xe&1||!b.sortDetached&&ae.compareDocumentPosition(ne)===xe?ne===O||ne.ownerDocument==Y&&xt.contains(Y,ne)?-1:ae===O||ae.ownerDocument==Y&&xt.contains(Y,ae)?1:E?s.call(E,ne)-s.call(E,ae):0:xe&4?-1:1)}),O}xt.matches=function(L,G){return xt(L,null,null,G)},xt.matchesSelector=function(L,G){if(Co(L),F&&!pn[G+" "]&&(!W||!W.test(G)))try{var $=ie.call(L,G);if($||b.disconnectedMatch||L.document&&L.document.nodeType!==11)return $}catch{pn(G,!0)}return xt(G,O,null,[L]).length>0},xt.contains=function(L,G){return(L.ownerDocument||L)!=O&&Co(L),_.contains(L,G)},xt.attr=function(L,G){(L.ownerDocument||L)!=O&&Co(L);var $=p.attrHandle[G.toLowerCase()],ne=$&&d.call(p.attrHandle,G.toLowerCase())?$(L,G,!F):void 0;return ne!==void 0?ne:L.getAttribute(G)},xt.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},_.uniqueSort=function(L){var G,$=[],ne=0,ae=0;if(S=!b.sortStable,E=!b.sortStable&&o.call(L,0),H.call(L,Xt),S){for(;G=L[ae++];)G===L[ae]&&(ne=$.push(ae));for(;ne--;)te.call(L,$[ne],1)}return E=null,L},_.fn.uniqueSort=function(){return this.pushStack(_.uniqueSort(o.apply(this)))},p=_.expr={cacheLength:50,createPseudo:mi,match:Pi,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace($i,Qi),L[3]=(L[3]||L[4]||L[5]||"").replace($i,Qi),L[2]==="~="&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),L[1].slice(0,3)==="nth"?(L[3]||xt.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*(L[3]==="even"||L[3]==="odd")),L[5]=+(L[7]+L[8]||L[3]==="odd")):L[3]&&xt.error(L[0]),L},PSEUDO:function(L){var G,$=!L[6]&&L[2];return Pi.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":$&&Ii.test($)&&(G=Ys($,!0))&&(G=$.indexOf(")",$.length-G)-$.length)&&(L[0]=L[0].slice(0,G),L[2]=$.slice(0,G)),L.slice(0,3))}},filter:{TAG:function(L){var G=L.replace($i,Qi).toLowerCase();return L==="*"?function(){return!0}:function($){return Z($,G)}},CLASS:function(L){var G=We[L+" "];return G||(G=new RegExp("(^|"+y+")"+L+"("+y+"|$)"))&&We(L,function($){return G.test(typeof $.className=="string"&&$.className||typeof $.getAttribute<"u"&&$.getAttribute("class")||"")})},ATTR:function(L,G,$){return function(ne){var ae=xt.attr(ne,L);return ae==null?G==="!=":G?(ae+="",G==="="?ae===$:G==="!="?ae!==$:G==="^="?$&&ae.indexOf($)===0:G==="*="?$&&ae.indexOf($)>-1:G==="$="?$&&ae.slice(-$.length)===$:G==="~="?(" "+ae.replace(ut," ")+" ").indexOf($)>-1:G==="|="?ae===$||ae.slice(0,$.length+1)===$+"-":!1):!0}},CHILD:function(L,G,$,ne,ae){var xe=L.slice(0,3)!=="nth",Se=L.slice(-4)!=="last",Le=G==="of-type";return ne===1&&ae===0?function(Ae){return!!Ae.parentNode}:function(Ae,Qe,Ge){var Ke,et,Ue,St,Bn,vn=xe!==Se?"nextSibling":"previousSibling",ti=Ae.parentNode,Di=Le&&Ae.nodeName.toLowerCase(),kr=!Ge&&!Le,Rn=!1;if(ti){if(xe){for(;vn;){for(Ue=Ae;Ue=Ue[vn];)if(Le?Z(Ue,Di):Ue.nodeType===1)return!1;Bn=vn=L==="only"&&!Bn&&"nextSibling"}return!0}if(Bn=[Se?ti.firstChild:ti.lastChild],Se&&kr){for(et=ti[se]||(ti[se]={}),Ke=et[L]||[],St=Ke[0]===Q&&Ke[1],Rn=St&&Ke[2],Ue=St&&ti.childNodes[St];Ue=++St&&Ue&&Ue[vn]||(Rn=St=0)||Bn.pop();)if(Ue.nodeType===1&&++Rn&&Ue===Ae){et[L]=[Q,St,Rn];break}}else if(kr&&(et=Ae[se]||(Ae[se]={}),Ke=et[L]||[],St=Ke[0]===Q&&Ke[1],Rn=St),Rn===!1)for(;(Ue=++St&&Ue&&Ue[vn]||(Rn=St=0)||Bn.pop())&&!((Le?Z(Ue,Di):Ue.nodeType===1)&&++Rn&&(kr&&(et=Ue[se]||(Ue[se]={}),et[L]=[Q,Rn]),Ue===Ae)););return Rn-=ae,Rn===ne||Rn%ne===0&&Rn/ne>=0}}},PSEUDO:function(L,G){var $,ne=p.pseudos[L]||p.setFilters[L.toLowerCase()]||xt.error("unsupported pseudo: "+L);return ne[se]?ne(G):ne.length>1?($=[L,L,"",G],p.setFilters.hasOwnProperty(L.toLowerCase())?mi(function(ae,xe){for(var Se,Le=ne(ae,G),Ae=Le.length;Ae--;)Se=s.call(ae,Le[Ae]),ae[Se]=!(xe[Se]=Le[Ae])}):function(ae){return ne(ae,0,$)}):ne}},pseudos:{not:mi(function(L){var G=[],$=[],ne=fl(L.replace(w,"$1"));return ne[se]?mi(function(ae,xe,Se,Le){for(var Ae,Qe=ne(ae,null,Le,[]),Ge=ae.length;Ge--;)(Ae=Qe[Ge])&&(ae[Ge]=!(xe[Ge]=Ae))}):function(ae,xe,Se){return G[0]=ae,ne(G,null,Se,$),G[0]=null,!$.pop()}}),has:mi(function(L){return function(G){return xt(L,G).length>0}}),contains:mi(function(L){return L=L.replace($i,Qi),function(G){return(G.textContent||_.text(G)).indexOf(L)>-1}}),lang:mi(function(L){return Ba.test(L||"")||xt.error("unsupported lang: "+L),L=L.replace($i,Qi).toLowerCase(),function(G){var $;do if($=F?G.lang:G.getAttribute("xml:lang")||G.getAttribute("lang"))return $=$.toLowerCase(),$===L||$.indexOf(L+"-")===0;while((G=G.parentNode)&&G.nodeType===1);return!1}}),target:function(L){var G=e.location&&e.location.hash;return G&&G.slice(1)===L.id},root:function(L){return L===k},focus:function(L){return L===RC()&&O.hasFocus()&&!!(L.type||L.href||~L.tabIndex)},enabled:Hf(!1),disabled:Hf(!0),checked:function(L){return Z(L,"input")&&!!L.checked||Z(L,"option")&&!!L.selected},selected:function(L){return L.parentNode&&L.parentNode.selectedIndex,L.selected===!0},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!p.pseudos.empty(L)},header:function(L){return Eo.test(L.nodeName)},input:function(L){return xo.test(L.nodeName)},button:function(L){return Z(L,"input")&&L.type==="button"||Z(L,"button")},text:function(L){var G;return Z(L,"input")&&L.type==="text"&&((G=L.getAttribute("type"))==null||G.toLowerCase()==="text")},first:$o(function(){return[0]}),last:$o(function(L,G){return[G-1]}),eq:$o(function(L,G,$){return[$<0?$+G:$]}),even:$o(function(L,G){for(var $=0;$<G;$+=2)L.push($);return L}),odd:$o(function(L,G){for(var $=1;$<G;$+=2)L.push($);return L}),lt:$o(function(L,G,$){var ne;for($<0?ne=$+G:$>G?ne=G:ne=$;--ne>=0;)L.push(ne);return L}),gt:$o(function(L,G,$){for(var ne=$<0?$+G:$;++ne<G;)L.push(ne);return L})}},p.pseudos.nth=p.pseudos.eq;for(c in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})p.pseudos[c]=OC(c);for(c in{submit:!0,reset:!0})p.pseudos[c]=IC(c);function qf(){}qf.prototype=p.filters=p.pseudos,p.setFilters=new qf;function Ys(L,G){var $,ne,ae,xe,Se,Le,Ae,Qe=st[L+" "];if(Qe)return G?0:Qe.slice(0);for(Se=L,Le=[],Ae=p.preFilter;Se;){(!$||(ne=Vt.exec(Se)))&&(ne&&(Se=Se.slice(ne[0].length)||Se),Le.push(ae=[])),$=!1,(ne=za.exec(Se))&&($=ne.shift(),ae.push({value:$,type:ne[0].replace(w," ")}),Se=Se.slice($.length));for(xe in p.filter)(ne=Pi[xe].exec(Se))&&(!Ae[xe]||(ne=Ae[xe](ne)))&&($=ne.shift(),ae.push({value:$,type:xe,matches:ne}),Se=Se.slice($.length));if(!$)break}return G?Se.length:Se?xt.error(L):st(L,Le).slice(0)}function Zs(L){for(var G=0,$=L.length,ne="";G<$;G++)ne+=L[G].value;return ne}function Js(L,G,$){var ne=G.dir,ae=G.next,xe=ae||ne,Se=$&&xe==="parentNode",Le=me++;return G.first?function(Ae,Qe,Ge){for(;Ae=Ae[ne];)if(Ae.nodeType===1||Se)return L(Ae,Qe,Ge);return!1}:function(Ae,Qe,Ge){var Ke,et,Ue=[Q,Le];if(Ge){for(;Ae=Ae[ne];)if((Ae.nodeType===1||Se)&&L(Ae,Qe,Ge))return!0}else for(;Ae=Ae[ne];)if(Ae.nodeType===1||Se)if(et=Ae[se]||(Ae[se]={}),ae&&Z(Ae,ae))Ae=Ae[ne]||Ae;else{if((Ke=et[xe])&&Ke[0]===Q&&Ke[1]===Le)return Ue[2]=Ke[2];if(et[xe]=Ue,Ue[2]=L(Ae,Qe,Ge))return!0}return!1}}function ll(L){return L.length>1?function(G,$,ne){for(var ae=L.length;ae--;)if(!L[ae](G,$,ne))return!1;return!0}:L[0]}function PC(L,G,$){for(var ne=0,ae=G.length;ne<ae;ne++)xt(L,G[ne],$);return $}function Xs(L,G,$,ne,ae){for(var xe,Se=[],Le=0,Ae=L.length,Qe=G!=null;Le<Ae;Le++)(xe=L[Le])&&(!$||$(xe,ne,ae))&&(Se.push(xe),Qe&&G.push(Le));return Se}function pl(L,G,$,ne,ae,xe){return ne&&!ne[se]&&(ne=pl(ne)),ae&&!ae[se]&&(ae=pl(ae,xe)),mi(function(Se,Le,Ae,Qe){var Ge,Ke,et,Ue,St=[],Bn=[],vn=Le.length,ti=Se||PC(G||"*",Ae.nodeType?[Ae]:Ae,[]),Di=L&&(Se||!G)?Xs(ti,St,L,Ae,Qe):ti;if($?(Ue=ae||(Se?L:vn||ne)?[]:Le,$(Di,Ue,Ae,Qe)):Ue=Di,ne)for(Ge=Xs(Ue,Bn),ne(Ge,[],Ae,Qe),Ke=Ge.length;Ke--;)(et=Ge[Ke])&&(Ue[Bn[Ke]]=!(Di[Bn[Ke]]=et));if(Se){if(ae||L){if(ae){for(Ge=[],Ke=Ue.length;Ke--;)(et=Ue[Ke])&&Ge.push(Di[Ke]=et);ae(null,Ue=[],Ge,Qe)}for(Ke=Ue.length;Ke--;)(et=Ue[Ke])&&(Ge=ae?s.call(Se,et):St[Ke])>-1&&(Se[Ge]=!(Le[Ge]=et))}}else Ue=Xs(Ue===Le?Ue.splice(vn,Ue.length):Ue),ae?ae(null,Le,Ue,Qe):A.apply(Le,Ue)})}function dl(L){for(var G,$,ne,ae=L.length,xe=p.relative[L[0].type],Se=xe||p.relative[" "],Le=xe?1:0,Ae=Js(function(Ke){return Ke===G},Se,!0),Qe=Js(function(Ke){return s.call(G,Ke)>-1},Se,!0),Ge=[function(Ke,et,Ue){var St=!xe&&(Ue||et!=v)||((G=et).nodeType?Ae(Ke,et,Ue):Qe(Ke,et,Ue));return G=null,St}];Le<ae;Le++)if($=p.relative[L[Le].type])Ge=[Js(ll(Ge),$)];else{if($=p.filter[L[Le].type].apply(null,L[Le].matches),$[se]){for(ne=++Le;ne<ae&&!p.relative[L[ne].type];ne++);return pl(Le>1&&ll(Ge),Le>1&&Zs(L.slice(0,Le-1).concat({value:L[Le-2].type===" "?"*":""})).replace(w,"$1"),$,Le<ne&&dl(L.slice(Le,ne)),ne<ae&&dl(L=L.slice(ne)),ne<ae&&Zs(L))}Ge.push($)}return ll(Ge)}function DC(L,G){var $=G.length>0,ne=L.length>0,ae=function(xe,Se,Le,Ae,Qe){var Ge,Ke,et,Ue=0,St="0",Bn=xe&&[],vn=[],ti=v,Di=xe||ne&&p.find.TAG("*",Qe),kr=Q+=ti==null?1:Math.random()||.1,Rn=Di.length;for(Qe&&(v=Se==O||Se||Qe);St!==Rn&&(Ge=Di[St])!=null;St++){if(ne&&Ge){for(Ke=0,!Se&&Ge.ownerDocument!=O&&(Co(Ge),Le=!F);et=L[Ke++];)if(et(Ge,Se||O,Le)){A.call(Ae,Ge);break}Qe&&(Q=kr)}$&&((Ge=!et&&Ge)&&Ue--,xe&&Bn.push(Ge))}if(Ue+=St,$&&St!==Ue){for(Ke=0;et=G[Ke++];)et(Bn,vn,Se,Le);if(xe){if(Ue>0)for(;St--;)Bn[St]||vn[St]||(vn[St]=J.call(Ae));vn=Xs(vn)}A.apply(Ae,vn),Qe&&!xe&&vn.length>0&&Ue+G.length>1&&_.uniqueSort(Ae)}return Qe&&(Q=kr,v=ti),Bn};return $?mi(ae):ae}function fl(L,G){var $,ne=[],ae=[],xe=$e[L+" "];if(!xe){for(G||(G=Ys(L)),$=G.length;$--;)xe=dl(G[$]),xe[se]?ne.push(xe):ae.push(xe);xe=$e(L,DC(ae,ne)),xe.selector=L}return xe}function Wf(L,G,$,ne){var ae,xe,Se,Le,Ae,Qe=typeof L=="function"&&L,Ge=!ne&&Ys(L=Qe.selector||L);if($=$||[],Ge.length===1){if(xe=Ge[0]=Ge[0].slice(0),xe.length>2&&(Se=xe[0]).type==="ID"&&G.nodeType===9&&F&&p.relative[xe[1].type]){if(G=(p.find.ID(Se.matches[0].replace($i,Qi),G)||[])[0],G)Qe&&(G=G.parentNode);else return $;L=L.slice(xe.shift().value.length)}for(ae=Pi.needsContext.test(L)?0:xe.length;ae--&&(Se=xe[ae],!p.relative[Le=Se.type]);)if((Ae=p.find[Le])&&(ne=Ae(Se.matches[0].replace($i,Qi),cl.test(xe[0].type)&&ul(G.parentNode)||G))){if(xe.splice(ae,1),L=ne.length&&Zs(xe),!L)return A.apply($,ne),$;break}}return(Qe||fl(L,Ge))(ne,G,!F,$,!G||cl.test(L)&&ul(G.parentNode)||G),$}b.sortStable=se.split("").sort(Xt).join("")===se,Co(),b.sortDetached=Ur(function(L){return L.compareDocumentPosition(O.createElement("fieldset"))&1}),_.find=xt,_.expr[":"]=_.expr.pseudos,_.unique=_.uniqueSort,xt.compile=fl,xt.select=Wf,xt.setDocument=Co,xt.escape=_.escapeSelector,xt.getText=_.text,xt.isXML=_.isXMLDoc,xt.selectors=_.expr,xt.support=_.support,xt.uniqueSort=_.uniqueSort})();var U=function(c,p,v){for(var E=[],S=v!==void 0;(c=c[p])&&c.nodeType!==9;)if(c.nodeType===1){if(S&&_(c).is(v))break;E.push(c)}return E},re=function(c,p){for(var v=[];c;c=c.nextSibling)c.nodeType===1&&c!==p&&v.push(c);return v},ye=_.expr.match.needsContext,Oe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Fe(c,p,v){return x(p)?_.grep(c,function(E,S){return!!p.call(E,S,E)!==v}):p.nodeType?_.grep(c,function(E){return E===p!==v}):typeof p!="string"?_.grep(c,function(E){return s.call(p,E)>-1!==v}):_.filter(p,c,v)}_.filter=function(c,p,v){var E=p[0];return v&&(c=":not("+c+")"),p.length===1&&E.nodeType===1?_.find.matchesSelector(E,c)?[E]:[]:_.find.matches(c,_.grep(p,function(S){return S.nodeType===1}))},_.fn.extend({find:function(c){var p,v,E=this.length,S=this;if(typeof c!="string")return this.pushStack(_(c).filter(function(){for(p=0;p<E;p++)if(_.contains(S[p],this))return!0}));for(v=this.pushStack([]),p=0;p<E;p++)_.find(c,S[p],v);return E>1?_.uniqueSort(v):v},filter:function(c){return this.pushStack(Fe(this,c||[],!1))},not:function(c){return this.pushStack(Fe(this,c||[],!0))},is:function(c){return!!Fe(this,typeof c=="string"&&ye.test(c)?_(c):c||[],!1).length}});var Je,He=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ye=_.fn.init=function(c,p,v){var E,S;if(!c)return this;if(v=v||Je,typeof c=="string")if(c[0]==="<"&&c[c.length-1]===">"&&c.length>=3?E=[null,c,null]:E=He.exec(c),E&&(E[1]||!p))if(E[1]){if(p=p instanceof _?p[0]:p,_.merge(this,_.parseHTML(E[1],p&&p.nodeType?p.ownerDocument||p:R,!0)),Oe.test(E[1])&&_.isPlainObject(p))for(E in p)x(this[E])?this[E](p[E]):this.attr(E,p[E]);return this}else return S=R.getElementById(E[2]),S&&(this[0]=S,this.length=1),this;else return!p||p.jquery?(p||v).find(c):this.constructor(p).find(c);else{if(c.nodeType)return this[0]=c,this.length=1,this;if(x(c))return v.ready!==void 0?v.ready(c):c(_)}return _.makeArray(c,this)};Ye.prototype=_.fn,Je=_(R);var at=/^(?:parents|prev(?:Until|All))/,ht={children:!0,contents:!0,next:!0,prev:!0};_.fn.extend({has:function(c){var p=_(c,this),v=p.length;return this.filter(function(){for(var E=0;E<v;E++)if(_.contains(this,p[E]))return!0})},closest:function(c,p){var v,E=0,S=this.length,A=[],O=typeof c!="string"&&_(c);if(!ye.test(c)){for(;E<S;E++)for(v=this[E];v&&v!==p;v=v.parentNode)if(v.nodeType<11&&(O?O.index(v)>-1:v.nodeType===1&&_.find.matchesSelector(v,c))){A.push(v);break}}return this.pushStack(A.length>1?_.uniqueSort(A):A)},index:function(c){return c?typeof c=="string"?s.call(_(c),this[0]):s.call(this,c.jquery?c[0]:c):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(c,p){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(c,p))))},addBack:function(c){return this.add(c==null?this.prevObject:this.prevObject.filter(c))}});function qe(c,p){for(;(c=c[p])&&c.nodeType!==1;);return c}_.each({parent:function(c){var p=c.parentNode;return p&&p.nodeType!==11?p:null},parents:function(c){return U(c,"parentNode")},parentsUntil:function(c,p,v){return U(c,"parentNode",v)},next:function(c){return qe(c,"nextSibling")},prev:function(c){return qe(c,"previousSibling")},nextAll:function(c){return U(c,"nextSibling")},prevAll:function(c){return U(c,"previousSibling")},nextUntil:function(c,p,v){return U(c,"nextSibling",v)},prevUntil:function(c,p,v){return U(c,"previousSibling",v)},siblings:function(c){return re((c.parentNode||{}).firstChild,c)},children:function(c){return re(c.firstChild)},contents:function(c){return c.contentDocument!=null&&i(c.contentDocument)?c.contentDocument:(Z(c,"template")&&(c=c.content||c),_.merge([],c.childNodes))}},function(c,p){_.fn[c]=function(v,E){var S=_.map(this,p,v);return c.slice(-5)!=="Until"&&(E=v),E&&typeof E=="string"&&(S=_.filter(E,S)),this.length>1&&(ht[c]||_.uniqueSort(S),at.test(c)&&S.reverse()),this.pushStack(S)}});var ot=/[^\x20\t\r\n\f]+/g;function Xe(c){var p={};return _.each(c.match(ot)||[],function(v,E){p[E]=!0}),p}_.Callbacks=function(c){c=typeof c=="string"?Xe(c):_.extend({},c);var p,v,E,S,A=[],O=[],k=-1,F=function(){for(S=S||c.once,E=p=!0;O.length;k=-1)for(v=O.shift();++k<A.length;)A[k].apply(v[0],v[1])===!1&&c.stopOnFalse&&(k=A.length,v=!1);c.memory||(v=!1),p=!1,S&&(v?A=[]:A="")},W={add:function(){return A&&(v&&!p&&(k=A.length-1,O.push(v)),function ie(se){_.each(se,function(Q,me){x(me)?(!c.unique||!W.has(me))&&A.push(me):me&&me.length&&N(me)!=="string"&&ie(me)})}(arguments),v&&!p&&F()),this},remove:function(){return _.each(arguments,function(ie,se){for(var Q;(Q=_.inArray(se,A,Q))>-1;)A.splice(Q,1),Q<=k&&k--}),this},has:function(ie){return ie?_.inArray(ie,A)>-1:A.length>0},empty:function(){return A&&(A=[]),this},disable:function(){return S=O=[],A=v="",this},disabled:function(){return!A},lock:function(){return S=O=[],!v&&!p&&(A=v=""),this},locked:function(){return!!S},fireWith:function(ie,se){return S||(se=se||[],se=[ie,se.slice?se.slice():se],O.push(se),p||F()),this},fire:function(){return W.fireWith(this,arguments),this},fired:function(){return!!E}};return W};function Nt(c){return c}function Zt(c){throw c}function yn(c,p,v,E){var S;try{c&&x(S=c.promise)?S.call(c).done(p).fail(v):c&&x(S=c.then)?S.call(c,p,v):p.apply(void 0,[c].slice(E))}catch(A){v.apply(void 0,[A])}}_.extend({Deferred:function(c){var p=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],v="pending",E={state:function(){return v},always:function(){return S.done(arguments).fail(arguments),this},catch:function(A){return E.then(null,A)},pipe:function(){var A=arguments;return _.Deferred(function(O){_.each(p,function(k,F){var W=x(A[F[4]])&&A[F[4]];S[F[1]](function(){var ie=W&&W.apply(this,arguments);ie&&x(ie.promise)?ie.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[F[0]+"With"](this,W?[ie]:arguments)})}),A=null}).promise()},then:function(A,O,k){var F=0;function W(ie,se,Q,me){return function(){var We=this,st=arguments,$e=function(){var Xt,Ri;if(!(ie<F)){if(Xt=Q.apply(We,st),Xt===se.promise())throw new TypeError("Thenable self-resolution");Ri=Xt&&(typeof Xt=="object"||typeof Xt=="function")&&Xt.then,x(Ri)?me?Ri.call(Xt,W(F,se,Nt,me),W(F,se,Zt,me)):(F++,Ri.call(Xt,W(F,se,Nt,me),W(F,se,Zt,me),W(F,se,Nt,se.notifyWith))):(Q!==Nt&&(We=void 0,st=[Xt]),(me||se.resolveWith)(We,st))}},pn=me?$e:function(){try{$e()}catch(Xt){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(Xt,pn.error),ie+1>=F&&(Q!==Zt&&(We=void 0,st=[Xt]),se.rejectWith(We,st))}};ie?pn():(_.Deferred.getErrorHook?pn.error=_.Deferred.getErrorHook():_.Deferred.getStackHook&&(pn.error=_.Deferred.getStackHook()),e.setTimeout(pn))}}return _.Deferred(function(ie){p[0][3].add(W(0,ie,x(k)?k:Nt,ie.notifyWith)),p[1][3].add(W(0,ie,x(A)?A:Nt)),p[2][3].add(W(0,ie,x(O)?O:Zt))}).promise()},promise:function(A){return A!=null?_.extend(A,E):E}},S={};return _.each(p,function(A,O){var k=O[2],F=O[5];E[O[1]]=k.add,F&&k.add(function(){v=F},p[3-A][2].disable,p[3-A][3].disable,p[0][2].lock,p[0][3].lock),k.add(O[3].fire),S[O[0]]=function(){return S[O[0]+"With"](this===S?void 0:this,arguments),this},S[O[0]+"With"]=k.fireWith}),E.promise(S),c&&c.call(S,S),S},when:function(c){var p=arguments.length,v=p,E=Array(v),S=o.call(arguments),A=_.Deferred(),O=function(k){return function(F){E[k]=this,S[k]=arguments.length>1?o.call(arguments):F,--p||A.resolveWith(E,S)}};if(p<=1&&(yn(c,A.done(O(v)).resolve,A.reject,!p),A.state()==="pending"||x(S[v]&&S[v].then)))return A.then();for(;v--;)yn(S[v],O(v),A.reject);return A.promise()}});var li=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(c,p){e.console&&e.console.warn&&c&&li.test(c.name)&&e.console.warn("jQuery.Deferred exception: "+c.message,c.stack,p)},_.readyException=function(c){e.setTimeout(function(){throw c})};var Wo=_.Deferred();_.fn.ready=function(c){return Wo.then(c).catch(function(p){_.readyException(p)}),this},_.extend({isReady:!1,readyWait:1,ready:function(c){(c===!0?--_.readyWait:_.isReady)||(_.isReady=!0,!(c!==!0&&--_.readyWait>0)&&Wo.resolveWith(R,[_]))}}),_.ready.then=Wo.then;function Xn(){R.removeEventListener("DOMContentLoaded",Xn),e.removeEventListener("load",Xn),_.ready()}R.readyState==="complete"||R.readyState!=="loading"&&!R.documentElement.doScroll?e.setTimeout(_.ready):(R.addEventListener("DOMContentLoaded",Xn),e.addEventListener("load",Xn));var $n=function(c,p,v,E,S,A,O){var k=0,F=c.length,W=v==null;if(N(v)==="object"){S=!0;for(k in v)$n(c,p,k,v[k],!0,A,O)}else if(E!==void 0&&(S=!0,x(E)||(O=!0),W&&(O?(p.call(c,E),p=null):(W=p,p=function(ie,se,Q){return W.call(_(ie),Q)})),p))for(;k<F;k++)p(c[k],v,O?E:E.call(c[k],k,p(c[k],v)));return S?c:W?p.call(c):F?p(c[0],v):A},Yi=/^-ms-/,js=/-([a-z])/g;function Zi(c,p){return p.toUpperCase()}function Wn(c){return c.replace(Yi,"ms-").replace(js,Zi)}var bo=function(c){return c.nodeType===1||c.nodeType===9||!+c.nodeType};function Ai(){this.expando=_.expando+Ai.uid++}Ai.uid=1,Ai.prototype={cache:function(c){var p=c[this.expando];return p||(p={},bo(c)&&(c.nodeType?c[this.expando]=p:Object.defineProperty(c,this.expando,{value:p,configurable:!0}))),p},set:function(c,p,v){var E,S=this.cache(c);if(typeof p=="string")S[Wn(p)]=v;else for(E in p)S[Wn(E)]=p[E];return S},get:function(c,p){return p===void 0?this.cache(c):c[this.expando]&&c[this.expando][Wn(p)]},access:function(c,p,v){return p===void 0||p&&typeof p=="string"&&v===void 0?this.get(c,p):(this.set(c,p,v),v!==void 0?v:p)},remove:function(c,p){var v,E=c[this.expando];if(E!==void 0){if(p!==void 0)for(Array.isArray(p)?p=p.map(Wn):(p=Wn(p),p=p in E?[p]:p.match(ot)||[]),v=p.length;v--;)delete E[p[v]];(p===void 0||_.isEmptyObject(E))&&(c.nodeType?c[this.expando]=void 0:delete c[this.expando])}},hasData:function(c){var p=c[this.expando];return p!==void 0&&!_.isEmptyObject(p)}};var Me=new Ai,Jt=new Ai,Ir=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pr=/[A-Z]/g;function Dr(c){return c==="true"?!0:c==="false"?!1:c==="null"?null:c===+c+""?+c:Ir.test(c)?JSON.parse(c):c}function Ko(c,p,v){var E;if(v===void 0&&c.nodeType===1)if(E="data-"+p.replace(Pr,"-$&").toLowerCase(),v=c.getAttribute(E),typeof v=="string"){try{v=Dr(v)}catch{}Jt.set(c,p,v)}else v=void 0;return v}_.extend({hasData:function(c){return Jt.hasData(c)||Me.hasData(c)},data:function(c,p,v){return Jt.access(c,p,v)},removeData:function(c,p){Jt.remove(c,p)},_data:function(c,p,v){return Me.access(c,p,v)},_removeData:function(c,p){Me.remove(c,p)}}),_.fn.extend({data:function(c,p){var v,E,S,A=this[0],O=A&&A.attributes;if(c===void 0){if(this.length&&(S=Jt.get(A),A.nodeType===1&&!Me.get(A,"hasDataAttrs"))){for(v=O.length;v--;)O[v]&&(E=O[v].name,E.indexOf("data-")===0&&(E=Wn(E.slice(5)),Ko(A,E,S[E])));Me.set(A,"hasDataAttrs",!0)}return S}return typeof c=="object"?this.each(function(){Jt.set(this,c)}):$n(this,function(k){var F;if(A&&k===void 0)return F=Jt.get(A,c),F!==void 0||(F=Ko(A,c),F!==void 0)?F:void 0;this.each(function(){Jt.set(this,c,k)})},null,p,arguments.length>1,null,!0)},removeData:function(c){return this.each(function(){Jt.remove(this,c)})}}),_.extend({queue:function(c,p,v){var E;if(c)return p=(p||"fx")+"queue",E=Me.get(c,p),v&&(!E||Array.isArray(v)?E=Me.access(c,p,_.makeArray(v)):E.push(v)),E||[]},dequeue:function(c,p){p=p||"fx";var v=_.queue(c,p),E=v.length,S=v.shift(),A=_._queueHooks(c,p),O=function(){_.dequeue(c,p)};S==="inprogress"&&(S=v.shift(),E--),S&&(p==="fx"&&v.unshift("inprogress"),delete A.stop,S.call(c,O,A)),!E&&A&&A.empty.fire()},_queueHooks:function(c,p){var v=p+"queueHooks";return Me.get(c,v)||Me.access(c,v,{empty:_.Callbacks("once memory").add(function(){Me.remove(c,[p+"queue",v])})})}}),_.fn.extend({queue:function(c,p){var v=2;return typeof c!="string"&&(p=c,c="fx",v--),arguments.length<v?_.queue(this[0],c):p===void 0?this:this.each(function(){var E=_.queue(this,c,p);_._queueHooks(this,c),c==="fx"&&E[0]!=="inprogress"&&_.dequeue(this,c)})},dequeue:function(c){return this.each(function(){_.dequeue(this,c)})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,p){var v,E=1,S=_.Deferred(),A=this,O=this.length,k=function(){--E||S.resolveWith(A,[A])};for(typeof c!="string"&&(p=c,c=void 0),c=c||"fx";O--;)v=Me.get(A[O],c+"queueHooks"),v&&v.empty&&(E++,v.empty.add(k));return k(),S.promise(p)}});var Yo=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ji=new RegExp("^(?:([+-])=|)("+Yo+")([a-z%]*)$","i"),pi=["Top","Right","Bottom","Left"],di=R.documentElement,Xi=function(c){return _.contains(c.ownerDocument,c)},Wu={composed:!0};di.getRootNode&&(Xi=function(c){return _.contains(c.ownerDocument,c)||c.getRootNode(Wu)===c.ownerDocument});var Mr=function(c,p){return c=p||c,c.style.display==="none"||c.style.display===""&&Xi(c)&&_.css(c,"display")==="none"};function Nr(c,p,v,E){var S,A,O=20,k=E?function(){return E.cur()}:function(){return _.css(c,p,"")},F=k(),W=v&&v[3]||(_.cssNumber[p]?"":"px"),ie=c.nodeType&&(_.cssNumber[p]||W!=="px"&&+F)&&Ji.exec(_.css(c,p));if(ie&&ie[3]!==W){for(F=F/2,W=W||ie[3],ie=+F||1;O--;)_.style(c,p,ie+W),(1-A)*(1-(A=k()/F||.5))<=0&&(O=0),ie=ie/A;ie=ie*2,_.style(c,p,ie+W),v=v||[]}return v&&(ie=+ie||+F||0,S=v[1]?ie+(v[1]+1)*v[2]:+v[2],E&&(E.unit=W,E.start=ie,E.end=S)),S}var ze={};function Nn(c){var p,v=c.ownerDocument,E=c.nodeName,S=ze[E];return S||(p=v.body.appendChild(v.createElement(E)),S=_.css(p,"display"),p.parentNode.removeChild(p),S==="none"&&(S="block"),ze[E]=S,S)}function Kn(c,p){for(var v,E,S=[],A=0,O=c.length;A<O;A++)E=c[A],E.style&&(v=E.style.display,p?(v==="none"&&(S[A]=Me.get(E,"display")||null,S[A]||(E.style.display="")),E.style.display===""&&Mr(E)&&(S[A]=Nn(E))):v!=="none"&&(S[A]="none",Me.set(E,"display",v)));for(A=0;A<O;A++)S[A]!=null&&(c[A].style.display=S[A]);return c}_.fn.extend({show:function(){return Kn(this,!0)},hide:function(){return Kn(this)},toggle:function(c){return typeof c=="boolean"?c?this.show():this.hide():this.each(function(){Mr(this)?_(this).show():_(this).hide()})}});var Pa=/^(?:checkbox|radio)$/i,_f=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yf=/^$|^module$|\/(?:java|ecma)script/i;(function(){var c=R.createDocumentFragment(),p=c.appendChild(R.createElement("div")),v=R.createElement("input");v.setAttribute("type","radio"),v.setAttribute("checked","checked"),v.setAttribute("name","t"),p.appendChild(v),b.checkClone=p.cloneNode(!0).cloneNode(!0).lastChild.checked,p.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!p.cloneNode(!0).lastChild.defaultValue,p.innerHTML="<option></option>",b.option=!!p.lastChild})();var Qn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Qn.tbody=Qn.tfoot=Qn.colgroup=Qn.caption=Qn.thead,Qn.th=Qn.td,b.option||(Qn.optgroup=Qn.option=[1,"<select multiple='multiple'>","</select>"]);function Ln(c,p){var v;return typeof c.getElementsByTagName<"u"?v=c.getElementsByTagName(p||"*"):typeof c.querySelectorAll<"u"?v=c.querySelectorAll(p||"*"):v=[],p===void 0||p&&Z(c,p)?_.merge([c],v):v}function Ku(c,p){for(var v=0,E=c.length;v<E;v++)Me.set(c[v],"globalEval",!p||Me.get(p[v],"globalEval"))}var WE=/<|&#?\w+;/;function vf(c,p,v,E,S){for(var A,O,k,F,W,ie,se=p.createDocumentFragment(),Q=[],me=0,We=c.length;me<We;me++)if(A=c[me],A||A===0)if(N(A)==="object")_.merge(Q,A.nodeType?[A]:A);else if(!WE.test(A))Q.push(p.createTextNode(A));else{for(O=O||se.appendChild(p.createElement("div")),k=(_f.exec(A)||["",""])[1].toLowerCase(),F=Qn[k]||Qn._default,O.innerHTML=F[1]+_.htmlPrefilter(A)+F[2],ie=F[0];ie--;)O=O.lastChild;_.merge(Q,O.childNodes),O=se.firstChild,O.textContent=""}for(se.textContent="",me=0;A=Q[me++];){if(E&&_.inArray(A,E)>-1){S&&S.push(A);continue}if(W=Xi(A),O=Ln(se.appendChild(A),"script"),W&&Ku(O),v)for(ie=0;A=O[ie++];)yf.test(A.type||"")&&v.push(A)}return se}var bf=/^([^.]*)(?:\.(.+)|)/;function Lr(){return!0}function zr(){return!1}function Yu(c,p,v,E,S,A){var O,k;if(typeof p=="object"){typeof v!="string"&&(E=E||v,v=void 0);for(k in p)Yu(c,k,v,E,p[k],A);return c}if(E==null&&S==null?(S=v,E=v=void 0):S==null&&(typeof v=="string"?(S=E,E=void 0):(S=E,E=v,v=void 0)),S===!1)S=zr;else if(!S)return c;return A===1&&(O=S,S=function(F){return _().off(F),O.apply(this,arguments)},S.guid=O.guid||(O.guid=_.guid++)),c.each(function(){_.event.add(this,p,S,E,v)})}_.event={global:{},add:function(c,p,v,E,S){var A,O,k,F,W,ie,se,Q,me,We,st,$e=Me.get(c);if(bo(c))for(v.handler&&(A=v,v=A.handler,S=A.selector),S&&_.find.matchesSelector(di,S),v.guid||(v.guid=_.guid++),(F=$e.events)||(F=$e.events=Object.create(null)),(O=$e.handle)||(O=$e.handle=function(pn){return typeof _<"u"&&_.event.triggered!==pn.type?_.event.dispatch.apply(c,arguments):void 0}),p=(p||"").match(ot)||[""],W=p.length;W--;)k=bf.exec(p[W])||[],me=st=k[1],We=(k[2]||"").split(".").sort(),me&&(se=_.event.special[me]||{},me=(S?se.delegateType:se.bindType)||me,se=_.event.special[me]||{},ie=_.extend({type:me,origType:st,data:E,handler:v,guid:v.guid,selector:S,needsContext:S&&_.expr.match.needsContext.test(S),namespace:We.join(".")},A),(Q=F[me])||(Q=F[me]=[],Q.delegateCount=0,(!se.setup||se.setup.call(c,E,We,O)===!1)&&c.addEventListener&&c.addEventListener(me,O)),se.add&&(se.add.call(c,ie),ie.handler.guid||(ie.handler.guid=v.guid)),S?Q.splice(Q.delegateCount++,0,ie):Q.push(ie),_.event.global[me]=!0)},remove:function(c,p,v,E,S){var A,O,k,F,W,ie,se,Q,me,We,st,$e=Me.hasData(c)&&Me.get(c);if(!(!$e||!(F=$e.events))){for(p=(p||"").match(ot)||[""],W=p.length;W--;){if(k=bf.exec(p[W])||[],me=st=k[1],We=(k[2]||"").split(".").sort(),!me){for(me in F)_.event.remove(c,me+p[W],v,E,!0);continue}for(se=_.event.special[me]||{},me=(E?se.delegateType:se.bindType)||me,Q=F[me]||[],k=k[2]&&new RegExp("(^|\\.)"+We.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=A=Q.length;A--;)ie=Q[A],(S||st===ie.origType)&&(!v||v.guid===ie.guid)&&(!k||k.test(ie.namespace))&&(!E||E===ie.selector||E==="**"&&ie.selector)&&(Q.splice(A,1),ie.selector&&Q.delegateCount--,se.remove&&se.remove.call(c,ie));O&&!Q.length&&((!se.teardown||se.teardown.call(c,We,$e.handle)===!1)&&_.removeEvent(c,me,$e.handle),delete F[me])}_.isEmptyObject(F)&&Me.remove(c,"handle events")}},dispatch:function(c){var p,v,E,S,A,O,k=new Array(arguments.length),F=_.event.fix(c),W=(Me.get(this,"events")||Object.create(null))[F.type]||[],ie=_.event.special[F.type]||{};for(k[0]=F,p=1;p<arguments.length;p++)k[p]=arguments[p];if(F.delegateTarget=this,!(ie.preDispatch&&ie.preDispatch.call(this,F)===!1)){for(O=_.event.handlers.call(this,F,W),p=0;(S=O[p++])&&!F.isPropagationStopped();)for(F.currentTarget=S.elem,v=0;(A=S.handlers[v++])&&!F.isImmediatePropagationStopped();)(!F.rnamespace||A.namespace===!1||F.rnamespace.test(A.namespace))&&(F.handleObj=A,F.data=A.data,E=((_.event.special[A.origType]||{}).handle||A.handler).apply(S.elem,k),E!==void 0&&(F.result=E)===!1&&(F.preventDefault(),F.stopPropagation()));return ie.postDispatch&&ie.postDispatch.call(this,F),F.result}},handlers:function(c,p){var v,E,S,A,O,k=[],F=p.delegateCount,W=c.target;if(F&&W.nodeType&&!(c.type==="click"&&c.button>=1)){for(;W!==this;W=W.parentNode||this)if(W.nodeType===1&&!(c.type==="click"&&W.disabled===!0)){for(A=[],O={},v=0;v<F;v++)E=p[v],S=E.selector+" ",O[S]===void 0&&(O[S]=E.needsContext?_(S,this).index(W)>-1:_.find(S,this,null,[W]).length),O[S]&&A.push(E);A.length&&k.push({elem:W,handlers:A})}}return W=this,F<p.length&&k.push({elem:W,handlers:p.slice(F)}),k},addProp:function(c,p){Object.defineProperty(_.Event.prototype,c,{enumerable:!0,configurable:!0,get:x(p)?function(){if(this.originalEvent)return p(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[c]},set:function(v){Object.defineProperty(this,c,{enumerable:!0,configurable:!0,writable:!0,value:v})}})},fix:function(c){return c[_.expando]?c:new _.Event(c)},special:{load:{noBubble:!0},click:{setup:function(c){var p=this||c;return Pa.test(p.type)&&p.click&&Z(p,"input")&&Gs(p,"click",!0),!1},trigger:function(c){var p=this||c;return Pa.test(p.type)&&p.click&&Z(p,"input")&&Gs(p,"click"),!0},_default:function(c){var p=c.target;return Pa.test(p.type)&&p.click&&Z(p,"input")&&Me.get(p,"click")||Z(p,"a")}},beforeunload:{postDispatch:function(c){c.result!==void 0&&c.originalEvent&&(c.originalEvent.returnValue=c.result)}}}};function Gs(c,p,v){if(!v){Me.get(c,p)===void 0&&_.event.add(c,p,Lr);return}Me.set(c,p,!1),_.event.add(c,p,{namespace:!1,handler:function(E){var S,A=Me.get(this,p);if(E.isTrigger&1&&this[p]){if(A)(_.event.special[p]||{}).delegateType&&E.stopPropagation();else if(A=o.call(arguments),Me.set(this,p,A),this[p](),S=Me.get(this,p),Me.set(this,p,!1),A!==S)return E.stopImmediatePropagation(),E.preventDefault(),S}else A&&(Me.set(this,p,_.event.trigger(A[0],A.slice(1),this)),E.stopPropagation(),E.isImmediatePropagationStopped=Lr)}})}_.removeEvent=function(c,p,v){c.removeEventListener&&c.removeEventListener(p,v)},_.Event=function(c,p){if(!(this instanceof _.Event))return new _.Event(c,p);c&&c.type?(this.originalEvent=c,this.type=c.type,this.isDefaultPrevented=c.defaultPrevented||c.defaultPrevented===void 0&&c.returnValue===!1?Lr:zr,this.target=c.target&&c.target.nodeType===3?c.target.parentNode:c.target,this.currentTarget=c.currentTarget,this.relatedTarget=c.relatedTarget):this.type=c,p&&_.extend(this,p),this.timeStamp=c&&c.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:zr,isPropagationStopped:zr,isImmediatePropagationStopped:zr,isSimulated:!1,preventDefault:function(){var c=this.originalEvent;this.isDefaultPrevented=Lr,c&&!this.isSimulated&&c.preventDefault()},stopPropagation:function(){var c=this.originalEvent;this.isPropagationStopped=Lr,c&&!this.isSimulated&&c.stopPropagation()},stopImmediatePropagation:function(){var c=this.originalEvent;this.isImmediatePropagationStopped=Lr,c&&!this.isSimulated&&c.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},function(c,p){function v(E){if(R.documentMode){var S=Me.get(this,"handle"),A=_.event.fix(E);A.type=E.type==="focusin"?"focus":"blur",A.isSimulated=!0,S(E),A.target===A.currentTarget&&S(A)}else _.event.simulate(p,E.target,_.event.fix(E))}_.event.special[c]={setup:function(){var E;if(Gs(this,c,!0),R.documentMode)E=Me.get(this,p),E||this.addEventListener(p,v),Me.set(this,p,(E||0)+1);else return!1},trigger:function(){return Gs(this,c),!0},teardown:function(){var E;if(R.documentMode)E=Me.get(this,p)-1,E?Me.set(this,p,E):(this.removeEventListener(p,v),Me.remove(this,p));else return!1},_default:function(E){return Me.get(E.target,c)},delegateType:p},_.event.special[p]={setup:function(){var E=this.ownerDocument||this.document||this,S=R.documentMode?this:E,A=Me.get(S,p);A||(R.documentMode?this.addEventListener(p,v):E.addEventListener(c,v,!0)),Me.set(S,p,(A||0)+1)},teardown:function(){var E=this.ownerDocument||this.document||this,S=R.documentMode?this:E,A=Me.get(S,p)-1;A?Me.set(S,p,A):(R.documentMode?this.removeEventListener(p,v):E.removeEventListener(c,v,!0),Me.remove(S,p))}}}),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(c,p){_.event.special[c]={delegateType:p,bindType:p,handle:function(v){var E,S=this,A=v.relatedTarget,O=v.handleObj;return(!A||A!==S&&!_.contains(S,A))&&(v.type=O.origType,E=O.handler.apply(this,arguments),v.type=p),E}}}),_.fn.extend({on:function(c,p,v,E){return Yu(this,c,p,v,E)},one:function(c,p,v,E){return Yu(this,c,p,v,E,1)},off:function(c,p,v){var E,S;if(c&&c.preventDefault&&c.handleObj)return E=c.handleObj,_(c.delegateTarget).off(E.namespace?E.origType+"."+E.namespace:E.origType,E.selector,E.handler),this;if(typeof c=="object"){for(S in c)this.off(S,p,c[S]);return this}return(p===!1||typeof p=="function")&&(v=p,p=void 0),v===!1&&(v=zr),this.each(function(){_.event.remove(this,c,v,p)})}});var KE=/<script|<style|<link/i,YE=/checked\s*(?:[^=]|=\s*.checked.)/i,ZE=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function xf(c,p){return Z(c,"table")&&Z(p.nodeType!==11?p:p.firstChild,"tr")&&_(c).children("tbody")[0]||c}function JE(c){return c.type=(c.getAttribute("type")!==null)+"/"+c.type,c}function XE(c){return(c.type||"").slice(0,5)==="true/"?c.type=c.type.slice(5):c.removeAttribute("type"),c}function Ef(c,p){var v,E,S,A,O,k,F;if(p.nodeType===1){if(Me.hasData(c)&&(A=Me.get(c),F=A.events,F)){Me.remove(p,"handle events");for(S in F)for(v=0,E=F[S].length;v<E;v++)_.event.add(p,S,F[S][v])}Jt.hasData(c)&&(O=Jt.access(c),k=_.extend({},O),Jt.set(p,k))}}function $E(c,p){var v=p.nodeName.toLowerCase();v==="input"&&Pa.test(c.type)?p.checked=c.checked:(v==="input"||v==="textarea")&&(p.defaultValue=c.defaultValue)}function Br(c,p,v,E){p=r(p);var S,A,O,k,F,W,ie=0,se=c.length,Q=se-1,me=p[0],We=x(me);if(We||se>1&&typeof me=="string"&&!b.checkClone&&YE.test(me))return c.each(function(st){var $e=c.eq(st);We&&(p[0]=me.call(this,st,$e.html())),Br($e,p,v,E)});if(se&&(S=vf(p,c[0].ownerDocument,!1,c,E),A=S.firstChild,S.childNodes.length===1&&(S=A),A||E)){for(O=_.map(Ln(S,"script"),JE),k=O.length;ie<se;ie++)F=S,ie!==Q&&(F=_.clone(F,!0,!0),k&&_.merge(O,Ln(F,"script"))),v.call(c[ie],F,ie);if(k)for(W=O[O.length-1].ownerDocument,_.map(O,XE),ie=0;ie<k;ie++)F=O[ie],yf.test(F.type||"")&&!Me.access(F,"globalEval")&&_.contains(W,F)&&(F.src&&(F.type||"").toLowerCase()!=="module"?_._evalUrl&&!F.noModule&&_._evalUrl(F.src,{nonce:F.nonce||F.getAttribute("nonce")},W):M(F.textContent.replace(ZE,""),F,W))}return c}function Cf(c,p,v){for(var E,S=p?_.filter(p,c):c,A=0;(E=S[A])!=null;A++)!v&&E.nodeType===1&&_.cleanData(Ln(E)),E.parentNode&&(v&&Xi(E)&&Ku(Ln(E,"script")),E.parentNode.removeChild(E));return c}_.extend({htmlPrefilter:function(c){return c},clone:function(c,p,v){var E,S,A,O,k=c.cloneNode(!0),F=Xi(c);if(!b.noCloneChecked&&(c.nodeType===1||c.nodeType===11)&&!_.isXMLDoc(c))for(O=Ln(k),A=Ln(c),E=0,S=A.length;E<S;E++)$E(A[E],O[E]);if(p)if(v)for(A=A||Ln(c),O=O||Ln(k),E=0,S=A.length;E<S;E++)Ef(A[E],O[E]);else Ef(c,k);return O=Ln(k,"script"),O.length>0&&Ku(O,!F&&Ln(c,"script")),k},cleanData:function(c){for(var p,v,E,S=_.event.special,A=0;(v=c[A])!==void 0;A++)if(bo(v)){if(p=v[Me.expando]){if(p.events)for(E in p.events)S[E]?_.event.remove(v,E):_.removeEvent(v,E,p.handle);v[Me.expando]=void 0}v[Jt.expando]&&(v[Jt.expando]=void 0)}}}),_.fn.extend({detach:function(c){return Cf(this,c,!0)},remove:function(c){return Cf(this,c)},text:function(c){return $n(this,function(p){return p===void 0?_.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=p)})},null,c,arguments.length)},append:function(){return Br(this,arguments,function(c){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var p=xf(this,c);p.appendChild(c)}})},prepend:function(){return Br(this,arguments,function(c){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var p=xf(this,c);p.insertBefore(c,p.firstChild)}})},before:function(){return Br(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this)})},after:function(){return Br(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling)})},empty:function(){for(var c,p=0;(c=this[p])!=null;p++)c.nodeType===1&&(_.cleanData(Ln(c,!1)),c.textContent="");return this},clone:function(c,p){return c=c??!1,p=p??c,this.map(function(){return _.clone(this,c,p)})},html:function(c){return $n(this,function(p){var v=this[0]||{},E=0,S=this.length;if(p===void 0&&v.nodeType===1)return v.innerHTML;if(typeof p=="string"&&!KE.test(p)&&!Qn[(_f.exec(p)||["",""])[1].toLowerCase()]){p=_.htmlPrefilter(p);try{for(;E<S;E++)v=this[E]||{},v.nodeType===1&&(_.cleanData(Ln(v,!1)),v.innerHTML=p);v=0}catch{}}v&&this.empty().append(p)},null,c,arguments.length)},replaceWith:function(){var c=[];return Br(this,arguments,function(p){var v=this.parentNode;_.inArray(this,c)<0&&(_.cleanData(Ln(this)),v&&v.replaceChild(p,this))},c)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,p){_.fn[c]=function(v){for(var E,S=[],A=_(v),O=A.length-1,k=0;k<=O;k++)E=k===O?this:this.clone(!0),_(A[k])[p](E),a.apply(S,E.get());return this.pushStack(S)}});var Zu=new RegExp("^("+Yo+")(?!px)[a-z%]+$","i"),Ju=/^--/,Hs=function(c){var p=c.ownerDocument.defaultView;return(!p||!p.opener)&&(p=e),p.getComputedStyle(c)},Tf=function(c,p,v){var E,S,A={};for(S in p)A[S]=c.style[S],c.style[S]=p[S];E=v.call(c);for(S in p)c.style[S]=A[S];return E},QE=new RegExp(pi.join("|"),"i");(function(){function c(){if(W){F.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",W.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",di.appendChild(F).appendChild(W);var ie=e.getComputedStyle(W);v=ie.top!=="1%",k=p(ie.marginLeft)===12,W.style.right="60%",A=p(ie.right)===36,E=p(ie.width)===36,W.style.position="absolute",S=p(W.offsetWidth/3)===12,di.removeChild(F),W=null}}function p(ie){return Math.round(parseFloat(ie))}var v,E,S,A,O,k,F=R.createElement("div"),W=R.createElement("div");W.style&&(W.style.backgroundClip="content-box",W.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle=W.style.backgroundClip==="content-box",_.extend(b,{boxSizingReliable:function(){return c(),E},pixelBoxStyles:function(){return c(),A},pixelPosition:function(){return c(),v},reliableMarginLeft:function(){return c(),k},scrollboxSize:function(){return c(),S},reliableTrDimensions:function(){var ie,se,Q,me;return O==null&&(ie=R.createElement("table"),se=R.createElement("tr"),Q=R.createElement("div"),ie.style.cssText="position:absolute;left:-11111px;border-collapse:separate",se.style.cssText="border:1px solid",se.style.height="1px",Q.style.height="9px",Q.style.display="block",di.appendChild(ie).appendChild(se).appendChild(Q),me=e.getComputedStyle(se),O=parseInt(me.height,10)+parseInt(me.borderTopWidth,10)+parseInt(me.borderBottomWidth,10)===se.offsetHeight,di.removeChild(ie)),O}}))})();function Da(c,p,v){var E,S,A,O,k=Ju.test(p),F=c.style;return v=v||Hs(c),v&&(O=v.getPropertyValue(p)||v[p],k&&O&&(O=O.replace(w,"$1")||void 0),O===""&&!Xi(c)&&(O=_.style(c,p)),!b.pixelBoxStyles()&&Zu.test(O)&&QE.test(p)&&(E=F.width,S=F.minWidth,A=F.maxWidth,F.minWidth=F.maxWidth=F.width=O,O=v.width,F.width=E,F.minWidth=S,F.maxWidth=A)),O!==void 0?O+"":O}function wf(c,p){return{get:function(){if(c()){delete this.get;return}return(this.get=p).apply(this,arguments)}}}var Sf=["Webkit","Moz","ms"],Af=R.createElement("div").style,Rf={};function eC(c){for(var p=c[0].toUpperCase()+c.slice(1),v=Sf.length;v--;)if(c=Sf[v]+p,c in Af)return c}function Xu(c){var p=_.cssProps[c]||Rf[c];return p||(c in Af?c:Rf[c]=eC(c)||c)}var tC=/^(none|table(?!-c[ea]).+)/,nC={position:"absolute",visibility:"hidden",display:"block"},Of={letterSpacing:"0",fontWeight:"400"};function If(c,p,v){var E=Ji.exec(p);return E?Math.max(0,E[2]-(v||0))+(E[3]||"px"):p}function $u(c,p,v,E,S,A){var O=p==="width"?1:0,k=0,F=0,W=0;if(v===(E?"border":"content"))return 0;for(;O<4;O+=2)v==="margin"&&(W+=_.css(c,v+pi[O],!0,S)),E?(v==="content"&&(F-=_.css(c,"padding"+pi[O],!0,S)),v!=="margin"&&(F-=_.css(c,"border"+pi[O]+"Width",!0,S))):(F+=_.css(c,"padding"+pi[O],!0,S),v!=="padding"?F+=_.css(c,"border"+pi[O]+"Width",!0,S):k+=_.css(c,"border"+pi[O]+"Width",!0,S));return!E&&A>=0&&(F+=Math.max(0,Math.ceil(c["offset"+p[0].toUpperCase()+p.slice(1)]-A-F-k-.5))||0),F+W}function Pf(c,p,v){var E=Hs(c),S=!b.boxSizingReliable()||v,A=S&&_.css(c,"boxSizing",!1,E)==="border-box",O=A,k=Da(c,p,E),F="offset"+p[0].toUpperCase()+p.slice(1);if(Zu.test(k)){if(!v)return k;k="auto"}return(!b.boxSizingReliable()&&A||!b.reliableTrDimensions()&&Z(c,"tr")||k==="auto"||!parseFloat(k)&&_.css(c,"display",!1,E)==="inline")&&c.getClientRects().length&&(A=_.css(c,"boxSizing",!1,E)==="border-box",O=F in c,O&&(k=c[F])),k=parseFloat(k)||0,k+$u(c,p,v||(A?"border":"content"),O,E,k)+"px"}_.extend({cssHooks:{opacity:{get:function(c,p){if(p){var v=Da(c,"opacity");return v===""?"1":v}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(c,p,v,E){if(!(!c||c.nodeType===3||c.nodeType===8||!c.style)){var S,A,O,k=Wn(p),F=Ju.test(p),W=c.style;if(F||(p=Xu(k)),O=_.cssHooks[p]||_.cssHooks[k],v!==void 0){if(A=typeof v,A==="string"&&(S=Ji.exec(v))&&S[1]&&(v=Nr(c,p,S),A="number"),v==null||v!==v)return;A==="number"&&!F&&(v+=S&&S[3]||(_.cssNumber[k]?"":"px")),!b.clearCloneStyle&&v===""&&p.indexOf("background")===0&&(W[p]="inherit"),(!O||!("set"in O)||(v=O.set(c,v,E))!==void 0)&&(F?W.setProperty(p,v):W[p]=v)}else return O&&"get"in O&&(S=O.get(c,!1,E))!==void 0?S:W[p]}},css:function(c,p,v,E){var S,A,O,k=Wn(p),F=Ju.test(p);return F||(p=Xu(k)),O=_.cssHooks[p]||_.cssHooks[k],O&&"get"in O&&(S=O.get(c,!0,v)),S===void 0&&(S=Da(c,p,E)),S==="normal"&&p in Of&&(S=Of[p]),v===""||v?(A=parseFloat(S),v===!0||isFinite(A)?A||0:S):S}}),_.each(["height","width"],function(c,p){_.cssHooks[p]={get:function(v,E,S){if(E)return tC.test(_.css(v,"display"))&&(!v.getClientRects().length||!v.getBoundingClientRect().width)?Tf(v,nC,function(){return Pf(v,p,S)}):Pf(v,p,S)},set:function(v,E,S){var A,O=Hs(v),k=!b.scrollboxSize()&&O.position==="absolute",F=k||S,W=F&&_.css(v,"boxSizing",!1,O)==="border-box",ie=S?$u(v,p,S,W,O):0;return W&&k&&(ie-=Math.ceil(v["offset"+p[0].toUpperCase()+p.slice(1)]-parseFloat(O[p])-$u(v,p,"border",!1,O)-.5)),ie&&(A=Ji.exec(E))&&(A[3]||"px")!=="px"&&(v.style[p]=E,E=_.css(v,p)),If(v,E,ie)}}}),_.cssHooks.marginLeft=wf(b.reliableMarginLeft,function(c,p){if(p)return(parseFloat(Da(c,"marginLeft"))||c.getBoundingClientRect().left-Tf(c,{marginLeft:0},function(){return c.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(c,p){_.cssHooks[c+p]={expand:function(v){for(var E=0,S={},A=typeof v=="string"?v.split(" "):[v];E<4;E++)S[c+pi[E]+p]=A[E]||A[E-2]||A[0];return S}},c!=="margin"&&(_.cssHooks[c+p].set=If)}),_.fn.extend({css:function(c,p){return $n(this,function(v,E,S){var A,O,k={},F=0;if(Array.isArray(E)){for(A=Hs(v),O=E.length;F<O;F++)k[E[F]]=_.css(v,E[F],!1,A);return k}return S!==void 0?_.style(v,E,S):_.css(v,E)},c,p,arguments.length>1)}});function zn(c,p,v,E,S){return new zn.prototype.init(c,p,v,E,S)}_.Tween=zn,zn.prototype={constructor:zn,init:function(c,p,v,E,S,A){this.elem=c,this.prop=v,this.easing=S||_.easing._default,this.options=p,this.start=this.now=this.cur(),this.end=E,this.unit=A||(_.cssNumber[v]?"":"px")},cur:function(){var c=zn.propHooks[this.prop];return c&&c.get?c.get(this):zn.propHooks._default.get(this)},run:function(c){var p,v=zn.propHooks[this.prop];return this.options.duration?this.pos=p=_.easing[this.easing](c,this.options.duration*c,0,1,this.options.duration):this.pos=p=c,this.now=(this.end-this.start)*p+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),v&&v.set?v.set(this):zn.propHooks._default.set(this),this}},zn.prototype.init.prototype=zn.prototype,zn.propHooks={_default:{get:function(c){var p;return c.elem.nodeType!==1||c.elem[c.prop]!=null&&c.elem.style[c.prop]==null?c.elem[c.prop]:(p=_.css(c.elem,c.prop,""),!p||p==="auto"?0:p)},set:function(c){_.fx.step[c.prop]?_.fx.step[c.prop](c):c.elem.nodeType===1&&(_.cssHooks[c.prop]||c.elem.style[Xu(c.prop)]!=null)?_.style(c.elem,c.prop,c.now+c.unit):c.elem[c.prop]=c.now}}},zn.propHooks.scrollTop=zn.propHooks.scrollLeft={set:function(c){c.elem.nodeType&&c.elem.parentNode&&(c.elem[c.prop]=c.now)}},_.easing={linear:function(c){return c},swing:function(c){return .5-Math.cos(c*Math.PI)/2},_default:"swing"},_.fx=zn.prototype.init,_.fx.step={};var Fr,qs,iC=/^(?:toggle|show|hide)$/,oC=/queueHooks$/;function Qu(){qs&&(R.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Qu):e.setTimeout(Qu,_.fx.interval),_.fx.tick())}function Df(){return e.setTimeout(function(){Fr=void 0}),Fr=Date.now()}function Ws(c,p){var v,E=0,S={height:c};for(p=p?1:0;E<4;E+=2-p)v=pi[E],S["margin"+v]=S["padding"+v]=c;return p&&(S.opacity=S.width=c),S}function Mf(c,p,v){for(var E,S=(fi.tweeners[p]||[]).concat(fi.tweeners["*"]),A=0,O=S.length;A<O;A++)if(E=S[A].call(v,p,c))return E}function rC(c,p,v){var E,S,A,O,k,F,W,ie,se="width"in p||"height"in p,Q=this,me={},We=c.style,st=c.nodeType&&Mr(c),$e=Me.get(c,"fxshow");v.queue||(O=_._queueHooks(c,"fx"),O.unqueued==null&&(O.unqueued=0,k=O.empty.fire,O.empty.fire=function(){O.unqueued||k()}),O.unqueued++,Q.always(function(){Q.always(function(){O.unqueued--,_.queue(c,"fx").length||O.empty.fire()})}));for(E in p)if(S=p[E],iC.test(S)){if(delete p[E],A=A||S==="toggle",S===(st?"hide":"show"))if(S==="show"&&$e&&$e[E]!==void 0)st=!0;else continue;me[E]=$e&&$e[E]||_.style(c,E)}if(F=!_.isEmptyObject(p),!(!F&&_.isEmptyObject(me))){se&&c.nodeType===1&&(v.overflow=[We.overflow,We.overflowX,We.overflowY],W=$e&&$e.display,W==null&&(W=Me.get(c,"display")),ie=_.css(c,"display"),ie==="none"&&(W?ie=W:(Kn([c],!0),W=c.style.display||W,ie=_.css(c,"display"),Kn([c]))),(ie==="inline"||ie==="inline-block"&&W!=null)&&_.css(c,"float")==="none"&&(F||(Q.done(function(){We.display=W}),W==null&&(ie=We.display,W=ie==="none"?"":ie)),We.display="inline-block")),v.overflow&&(We.overflow="hidden",Q.always(function(){We.overflow=v.overflow[0],We.overflowX=v.overflow[1],We.overflowY=v.overflow[2]})),F=!1;for(E in me)F||($e?"hidden"in $e&&(st=$e.hidden):$e=Me.access(c,"fxshow",{display:W}),A&&($e.hidden=!st),st&&Kn([c],!0),Q.done(function(){st||Kn([c]),Me.remove(c,"fxshow");for(E in me)_.style(c,E,me[E])})),F=Mf(st?$e[E]:0,E,Q),E in $e||($e[E]=F.start,st&&(F.end=F.start,F.start=0))}}function aC(c,p){var v,E,S,A,O;for(v in c)if(E=Wn(v),S=p[E],A=c[v],Array.isArray(A)&&(S=A[1],A=c[v]=A[0]),v!==E&&(c[E]=A,delete c[v]),O=_.cssHooks[E],O&&"expand"in O){A=O.expand(A),delete c[E];for(v in A)v in c||(c[v]=A[v],p[v]=S)}else p[E]=S}function fi(c,p,v){var E,S,A=0,O=fi.prefilters.length,k=_.Deferred().always(function(){delete F.elem}),F=function(){if(S)return!1;for(var se=Fr||Df(),Q=Math.max(0,W.startTime+W.duration-se),me=Q/W.duration||0,We=1-me,st=0,$e=W.tweens.length;st<$e;st++)W.tweens[st].run(We);return k.notifyWith(c,[W,We,Q]),We<1&&$e?Q:($e||k.notifyWith(c,[W,1,0]),k.resolveWith(c,[W]),!1)},W=k.promise({elem:c,props:_.extend({},p),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},v),originalProperties:p,originalOptions:v,startTime:Fr||Df(),duration:v.duration,tweens:[],createTween:function(se,Q){var me=_.Tween(c,W.opts,se,Q,W.opts.specialEasing[se]||W.opts.easing);return W.tweens.push(me),me},stop:function(se){var Q=0,me=se?W.tweens.length:0;if(S)return this;for(S=!0;Q<me;Q++)W.tweens[Q].run(1);return se?(k.notifyWith(c,[W,1,0]),k.resolveWith(c,[W,se])):k.rejectWith(c,[W,se]),this}}),ie=W.props;for(aC(ie,W.opts.specialEasing);A<O;A++)if(E=fi.prefilters[A].call(W,c,ie,W.opts),E)return x(E.stop)&&(_._queueHooks(W.elem,W.opts.queue).stop=E.stop.bind(E)),E;return _.map(ie,Mf,W),x(W.opts.start)&&W.opts.start.call(c,W),W.progress(W.opts.progress).done(W.opts.done,W.opts.complete).fail(W.opts.fail).always(W.opts.always),_.fx.timer(_.extend(F,{elem:c,anim:W,queue:W.opts.queue})),W}_.Animation=_.extend(fi,{tweeners:{"*":[function(c,p){var v=this.createTween(c,p);return Nr(v.elem,c,Ji.exec(p),v),v}]},tweener:function(c,p){x(c)?(p=c,c=["*"]):c=c.match(ot);for(var v,E=0,S=c.length;E<S;E++)v=c[E],fi.tweeners[v]=fi.tweeners[v]||[],fi.tweeners[v].unshift(p)},prefilters:[rC],prefilter:function(c,p){p?fi.prefilters.unshift(c):fi.prefilters.push(c)}}),_.speed=function(c,p,v){var E=c&&typeof c=="object"?_.extend({},c):{complete:v||!v&&p||x(c)&&c,duration:c,easing:v&&p||p&&!x(p)&&p};return _.fx.off?E.duration=0:typeof E.duration!="number"&&(E.duration in _.fx.speeds?E.duration=_.fx.speeds[E.duration]:E.duration=_.fx.speeds._default),(E.queue==null||E.queue===!0)&&(E.queue="fx"),E.old=E.complete,E.complete=function(){x(E.old)&&E.old.call(this),E.queue&&_.dequeue(this,E.queue)},E},_.fn.extend({fadeTo:function(c,p,v,E){return this.filter(Mr).css("opacity",0).show().end().animate({opacity:p},c,v,E)},animate:function(c,p,v,E){var S=_.isEmptyObject(c),A=_.speed(p,v,E),O=function(){var k=fi(this,_.extend({},c),A);(S||Me.get(this,"finish"))&&k.stop(!0)};return O.finish=O,S||A.queue===!1?this.each(O):this.queue(A.queue,O)},stop:function(c,p,v){var E=function(S){var A=S.stop;delete S.stop,A(v)};return typeof c!="string"&&(v=p,p=c,c=void 0),p&&this.queue(c||"fx",[]),this.each(function(){var S=!0,A=c!=null&&c+"queueHooks",O=_.timers,k=Me.get(this);if(A)k[A]&&k[A].stop&&E(k[A]);else for(A in k)k[A]&&k[A].stop&&oC.test(A)&&E(k[A]);for(A=O.length;A--;)O[A].elem===this&&(c==null||O[A].queue===c)&&(O[A].anim.stop(v),S=!1,O.splice(A,1));(S||!v)&&_.dequeue(this,c)})},finish:function(c){return c!==!1&&(c=c||"fx"),this.each(function(){var p,v=Me.get(this),E=v[c+"queue"],S=v[c+"queueHooks"],A=_.timers,O=E?E.length:0;for(v.finish=!0,_.queue(this,c,[]),S&&S.stop&&S.stop.call(this,!0),p=A.length;p--;)A[p].elem===this&&A[p].queue===c&&(A[p].anim.stop(!0),A.splice(p,1));for(p=0;p<O;p++)E[p]&&E[p].finish&&E[p].finish.call(this);delete v.finish})}}),_.each(["toggle","show","hide"],function(c,p){var v=_.fn[p];_.fn[p]=function(E,S,A){return E==null||typeof E=="boolean"?v.apply(this,arguments):this.animate(Ws(p,!0),E,S,A)}}),_.each({slideDown:Ws("show"),slideUp:Ws("hide"),slideToggle:Ws("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,p){_.fn[c]=function(v,E,S){return this.animate(p,v,E,S)}}),_.timers=[],_.fx.tick=function(){var c,p=0,v=_.timers;for(Fr=Date.now();p<v.length;p++)c=v[p],!c()&&v[p]===c&&v.splice(p--,1);v.length||_.fx.stop(),Fr=void 0},_.fx.timer=function(c){_.timers.push(c),_.fx.start()},_.fx.interval=13,_.fx.start=function(){qs||(qs=!0,Qu())},_.fx.stop=function(){qs=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(c,p){return c=_.fx&&_.fx.speeds[c]||c,p=p||"fx",this.queue(p,function(v,E){var S=e.setTimeout(v,c);E.stop=function(){e.clearTimeout(S)}})},function(){var c=R.createElement("input"),p=R.createElement("select"),v=p.appendChild(R.createElement("option"));c.type="checkbox",b.checkOn=c.value!=="",b.optSelected=v.selected,c=R.createElement("input"),c.value="t",c.type="radio",b.radioValue=c.value==="t"}();var Nf,Ma=_.expr.attrHandle;_.fn.extend({attr:function(c,p){return $n(this,_.attr,c,p,arguments.length>1)},removeAttr:function(c){return this.each(function(){_.removeAttr(this,c)})}}),_.extend({attr:function(c,p,v){var E,S,A=c.nodeType;if(!(A===3||A===8||A===2)){if(typeof c.getAttribute>"u")return _.prop(c,p,v);if((A!==1||!_.isXMLDoc(c))&&(S=_.attrHooks[p.toLowerCase()]||(_.expr.match.bool.test(p)?Nf:void 0)),v!==void 0){if(v===null){_.removeAttr(c,p);return}return S&&"set"in S&&(E=S.set(c,v,p))!==void 0?E:(c.setAttribute(p,v+""),v)}return S&&"get"in S&&(E=S.get(c,p))!==null?E:(E=_.find.attr(c,p),E??void 0)}},attrHooks:{type:{set:function(c,p){if(!b.radioValue&&p==="radio"&&Z(c,"input")){var v=c.value;return c.setAttribute("type",p),v&&(c.value=v),p}}}},removeAttr:function(c,p){var v,E=0,S=p&&p.match(ot);if(S&&c.nodeType===1)for(;v=S[E++];)c.removeAttribute(v)}}),Nf={set:function(c,p,v){return p===!1?_.removeAttr(c,v):c.setAttribute(v,v),v}},_.each(_.expr.match.bool.source.match(/\w+/g),function(c,p){var v=Ma[p]||_.find.attr;Ma[p]=function(E,S,A){var O,k,F=S.toLowerCase();return A||(k=Ma[F],Ma[F]=O,O=v(E,S,A)!=null?F:null,Ma[F]=k),O}});var sC=/^(?:input|select|textarea|button)$/i,cC=/^(?:a|area)$/i;_.fn.extend({prop:function(c,p){return $n(this,_.prop,c,p,arguments.length>1)},removeProp:function(c){return this.each(function(){delete this[_.propFix[c]||c]})}}),_.extend({prop:function(c,p,v){var E,S,A=c.nodeType;if(!(A===3||A===8||A===2))return(A!==1||!_.isXMLDoc(c))&&(p=_.propFix[p]||p,S=_.propHooks[p]),v!==void 0?S&&"set"in S&&(E=S.set(c,v,p))!==void 0?E:c[p]=v:S&&"get"in S&&(E=S.get(c,p))!==null?E:c[p]},propHooks:{tabIndex:{get:function(c){var p=_.find.attr(c,"tabindex");return p?parseInt(p,10):sC.test(c.nodeName)||cC.test(c.nodeName)&&c.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(_.propHooks.selected={get:function(c){var p=c.parentNode;return p&&p.parentNode&&p.parentNode.selectedIndex,null},set:function(c){var p=c.parentNode;p&&(p.selectedIndex,p.parentNode&&p.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});function Zo(c){var p=c.match(ot)||[];return p.join(" ")}function Jo(c){return c.getAttribute&&c.getAttribute("class")||""}function el(c){return Array.isArray(c)?c:typeof c=="string"?c.match(ot)||[]:[]}_.fn.extend({addClass:function(c){var p,v,E,S,A,O;return x(c)?this.each(function(k){_(this).addClass(c.call(this,k,Jo(this)))}):(p=el(c),p.length?this.each(function(){if(E=Jo(this),v=this.nodeType===1&&" "+Zo(E)+" ",v){for(A=0;A<p.length;A++)S=p[A],v.indexOf(" "+S+" ")<0&&(v+=S+" ");O=Zo(v),E!==O&&this.setAttribute("class",O)}}):this)},removeClass:function(c){var p,v,E,S,A,O;return x(c)?this.each(function(k){_(this).removeClass(c.call(this,k,Jo(this)))}):arguments.length?(p=el(c),p.length?this.each(function(){if(E=Jo(this),v=this.nodeType===1&&" "+Zo(E)+" ",v){for(A=0;A<p.length;A++)for(S=p[A];v.indexOf(" "+S+" ")>-1;)v=v.replace(" "+S+" "," ");O=Zo(v),E!==O&&this.setAttribute("class",O)}}):this):this.attr("class","")},toggleClass:function(c,p){var v,E,S,A,O=typeof c,k=O==="string"||Array.isArray(c);return x(c)?this.each(function(F){_(this).toggleClass(c.call(this,F,Jo(this),p),p)}):typeof p=="boolean"&&k?p?this.addClass(c):this.removeClass(c):(v=el(c),this.each(function(){if(k)for(A=_(this),S=0;S<v.length;S++)E=v[S],A.hasClass(E)?A.removeClass(E):A.addClass(E);else(c===void 0||O==="boolean")&&(E=Jo(this),E&&Me.set(this,"__className__",E),this.setAttribute&&this.setAttribute("class",E||c===!1?"":Me.get(this,"__className__")||""))}))},hasClass:function(c){var p,v,E=0;for(p=" "+c+" ";v=this[E++];)if(v.nodeType===1&&(" "+Zo(Jo(v))+" ").indexOf(p)>-1)return!0;return!1}});var uC=/\r/g;_.fn.extend({val:function(c){var p,v,E,S=this[0];return arguments.length?(E=x(c),this.each(function(A){var O;this.nodeType===1&&(E?O=c.call(this,A,_(this).val()):O=c,O==null?O="":typeof O=="number"?O+="":Array.isArray(O)&&(O=_.map(O,function(k){return k==null?"":k+""})),p=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],(!p||!("set"in p)||p.set(this,O,"value")===void 0)&&(this.value=O))})):S?(p=_.valHooks[S.type]||_.valHooks[S.nodeName.toLowerCase()],p&&"get"in p&&(v=p.get(S,"value"))!==void 0?v:(v=S.value,typeof v=="string"?v.replace(uC,""):v??"")):void 0}}),_.extend({valHooks:{option:{get:function(c){var p=_.find.attr(c,"value");return p??Zo(_.text(c))}},select:{get:function(c){var p,v,E,S=c.options,A=c.selectedIndex,O=c.type==="select-one",k=O?null:[],F=O?A+1:S.length;for(A<0?E=F:E=O?A:0;E<F;E++)if(v=S[E],(v.selected||E===A)&&!v.disabled&&(!v.parentNode.disabled||!Z(v.parentNode,"optgroup"))){if(p=_(v).val(),O)return p;k.push(p)}return k},set:function(c,p){for(var v,E,S=c.options,A=_.makeArray(p),O=S.length;O--;)E=S[O],(E.selected=_.inArray(_.valHooks.option.get(E),A)>-1)&&(v=!0);return v||(c.selectedIndex=-1),A}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(c,p){if(Array.isArray(p))return c.checked=_.inArray(_(c).val(),p)>-1}},b.checkOn||(_.valHooks[this].get=function(c){return c.getAttribute("value")===null?"on":c.value})});var Na=e.location,Lf={guid:Date.now()},tl=/\?/;_.parseXML=function(c){var p,v;if(!c||typeof c!="string")return null;try{p=new e.DOMParser().parseFromString(c,"text/xml")}catch{}return v=p&&p.getElementsByTagName("parsererror")[0],(!p||v)&&_.error("Invalid XML: "+(v?_.map(v.childNodes,function(E){return E.textContent}).join(`
`):c)),p};var zf=/^(?:focusinfocus|focusoutblur)$/,Bf=function(c){c.stopPropagation()};_.extend(_.event,{trigger:function(c,p,v,E){var S,A,O,k,F,W,ie,se,Q=[v||R],me=d.call(c,"type")?c.type:c,We=d.call(c,"namespace")?c.namespace.split("."):[];if(A=se=O=v=v||R,!(v.nodeType===3||v.nodeType===8)&&!zf.test(me+_.event.triggered)&&(me.indexOf(".")>-1&&(We=me.split("."),me=We.shift(),We.sort()),F=me.indexOf(":")<0&&"on"+me,c=c[_.expando]?c:new _.Event(me,typeof c=="object"&&c),c.isTrigger=E?2:3,c.namespace=We.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+We.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=v),p=p==null?[c]:_.makeArray(p,[c]),ie=_.event.special[me]||{},!(!E&&ie.trigger&&ie.trigger.apply(v,p)===!1))){if(!E&&!ie.noBubble&&!T(v)){for(k=ie.delegateType||me,zf.test(k+me)||(A=A.parentNode);A;A=A.parentNode)Q.push(A),O=A;O===(v.ownerDocument||R)&&Q.push(O.defaultView||O.parentWindow||e)}for(S=0;(A=Q[S++])&&!c.isPropagationStopped();)se=A,c.type=S>1?k:ie.bindType||me,W=(Me.get(A,"events")||Object.create(null))[c.type]&&Me.get(A,"handle"),W&&W.apply(A,p),W=F&&A[F],W&&W.apply&&bo(A)&&(c.result=W.apply(A,p),c.result===!1&&c.preventDefault());return c.type=me,!E&&!c.isDefaultPrevented()&&(!ie._default||ie._default.apply(Q.pop(),p)===!1)&&bo(v)&&F&&x(v[me])&&!T(v)&&(O=v[F],O&&(v[F]=null),_.event.triggered=me,c.isPropagationStopped()&&se.addEventListener(me,Bf),v[me](),c.isPropagationStopped()&&se.removeEventListener(me,Bf),_.event.triggered=void 0,O&&(v[F]=O)),c.result}},simulate:function(c,p,v){var E=_.extend(new _.Event,v,{type:c,isSimulated:!0});_.event.trigger(E,null,p)}}),_.fn.extend({trigger:function(c,p){return this.each(function(){_.event.trigger(c,p,this)})},triggerHandler:function(c,p){var v=this[0];if(v)return _.event.trigger(c,p,v,!0)}});var lC=/\[\]$/,Ff=/\r?\n/g,pC=/^(?:submit|button|image|reset|file)$/i,dC=/^(?:input|select|textarea|keygen)/i;function nl(c,p,v,E){var S;if(Array.isArray(p))_.each(p,function(A,O){v||lC.test(c)?E(c,O):nl(c+"["+(typeof O=="object"&&O!=null?A:"")+"]",O,v,E)});else if(!v&&N(p)==="object")for(S in p)nl(c+"["+S+"]",p[S],v,E);else E(c,p)}_.param=function(c,p){var v,E=[],S=function(A,O){var k=x(O)?O():O;E[E.length]=encodeURIComponent(A)+"="+encodeURIComponent(k??"")};if(c==null)return"";if(Array.isArray(c)||c.jquery&&!_.isPlainObject(c))_.each(c,function(){S(this.name,this.value)});else for(v in c)nl(v,c[v],p,S);return E.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var c=_.prop(this,"elements");return c?_.makeArray(c):this}).filter(function(){var c=this.type;return this.name&&!_(this).is(":disabled")&&dC.test(this.nodeName)&&!pC.test(c)&&(this.checked||!Pa.test(c))}).map(function(c,p){var v=_(this).val();return v==null?null:Array.isArray(v)?_.map(v,function(E){return{name:p.name,value:E.replace(Ff,`\r
`)}}):{name:p.name,value:v.replace(Ff,`\r
`)}}).get()}});var fC=/%20/g,mC=/#.*$/,hC=/([?&])_=[^&]*/,gC=/^(.*?):[ \t]*([^\r\n]*)$/mg,_C=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,yC=/^(?:GET|HEAD)$/,vC=/^\/\//,Uf={},il={},kf="*/".concat("*"),ol=R.createElement("a");ol.href=Na.href;function Vf(c){return function(p,v){typeof p!="string"&&(v=p,p="*");var E,S=0,A=p.toLowerCase().match(ot)||[];if(x(v))for(;E=A[S++];)E[0]==="+"?(E=E.slice(1)||"*",(c[E]=c[E]||[]).unshift(v)):(c[E]=c[E]||[]).push(v)}}function jf(c,p,v,E){var S={},A=c===il;function O(k){var F;return S[k]=!0,_.each(c[k]||[],function(W,ie){var se=ie(p,v,E);if(typeof se=="string"&&!A&&!S[se])return p.dataTypes.unshift(se),O(se),!1;if(A)return!(F=se)}),F}return O(p.dataTypes[0])||!S["*"]&&O("*")}function rl(c,p){var v,E,S=_.ajaxSettings.flatOptions||{};for(v in p)p[v]!==void 0&&((S[v]?c:E||(E={}))[v]=p[v]);return E&&_.extend(!0,c,E),c}function bC(c,p,v){for(var E,S,A,O,k=c.contents,F=c.dataTypes;F[0]==="*";)F.shift(),E===void 0&&(E=c.mimeType||p.getResponseHeader("Content-Type"));if(E){for(S in k)if(k[S]&&k[S].test(E)){F.unshift(S);break}}if(F[0]in v)A=F[0];else{for(S in v){if(!F[0]||c.converters[S+" "+F[0]]){A=S;break}O||(O=S)}A=A||O}if(A)return A!==F[0]&&F.unshift(A),v[A]}function xC(c,p,v,E){var S,A,O,k,F,W={},ie=c.dataTypes.slice();if(ie[1])for(O in c.converters)W[O.toLowerCase()]=c.converters[O];for(A=ie.shift();A;)if(c.responseFields[A]&&(v[c.responseFields[A]]=p),!F&&E&&c.dataFilter&&(p=c.dataFilter(p,c.dataType)),F=A,A=ie.shift(),A){if(A==="*")A=F;else if(F!=="*"&&F!==A){if(O=W[F+" "+A]||W["* "+A],!O){for(S in W)if(k=S.split(" "),k[1]===A&&(O=W[F+" "+k[0]]||W["* "+k[0]],O)){O===!0?O=W[S]:W[S]!==!0&&(A=k[0],ie.unshift(k[1]));break}}if(O!==!0)if(O&&c.throws)p=O(p);else try{p=O(p)}catch(se){return{state:"parsererror",error:O?se:"No conversion from "+F+" to "+A}}}}return{state:"success",data:p}}_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Na.href,type:"GET",isLocal:_C.test(Na.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(c,p){return p?rl(rl(c,_.ajaxSettings),p):rl(_.ajaxSettings,c)},ajaxPrefilter:Vf(Uf),ajaxTransport:Vf(il),ajax:function(c,p){typeof c=="object"&&(p=c,c=void 0),p=p||{};var v,E,S,A,O,k,F,W,ie,se,Q=_.ajaxSetup({},p),me=Q.context||Q,We=Q.context&&(me.nodeType||me.jquery)?_(me):_.event,st=_.Deferred(),$e=_.Callbacks("once memory"),pn=Q.statusCode||{},Xt={},Ri={},Oi="canceled",nt={readyState:0,getResponseHeader:function(ut){var Vt;if(F){if(!A)for(A={};Vt=gC.exec(S);)A[Vt[1].toLowerCase()+" "]=(A[Vt[1].toLowerCase()+" "]||[]).concat(Vt[2]);Vt=A[ut.toLowerCase()+" "]}return Vt==null?null:Vt.join(", ")},getAllResponseHeaders:function(){return F?S:null},setRequestHeader:function(ut,Vt){return F==null&&(ut=Ri[ut.toLowerCase()]=Ri[ut.toLowerCase()]||ut,Xt[ut]=Vt),this},overrideMimeType:function(ut){return F==null&&(Q.mimeType=ut),this},statusCode:function(ut){var Vt;if(ut)if(F)nt.always(ut[nt.status]);else for(Vt in ut)pn[Vt]=[pn[Vt],ut[Vt]];return this},abort:function(ut){var Vt=ut||Oi;return v&&v.abort(Vt),Xo(0,Vt),this}};if(st.promise(nt),Q.url=((c||Q.url||Na.href)+"").replace(vC,Na.protocol+"//"),Q.type=p.method||p.type||Q.method||Q.type,Q.dataTypes=(Q.dataType||"*").toLowerCase().match(ot)||[""],Q.crossDomain==null){k=R.createElement("a");try{k.href=Q.url,k.href=k.href,Q.crossDomain=ol.protocol+"//"+ol.host!=k.protocol+"//"+k.host}catch{Q.crossDomain=!0}}if(Q.data&&Q.processData&&typeof Q.data!="string"&&(Q.data=_.param(Q.data,Q.traditional)),jf(Uf,Q,p,nt),F)return nt;W=_.event&&Q.global,W&&_.active++===0&&_.event.trigger("ajaxStart"),Q.type=Q.type.toUpperCase(),Q.hasContent=!yC.test(Q.type),E=Q.url.replace(mC,""),Q.hasContent?Q.data&&Q.processData&&(Q.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Q.data=Q.data.replace(fC,"+")):(se=Q.url.slice(E.length),Q.data&&(Q.processData||typeof Q.data=="string")&&(E+=(tl.test(E)?"&":"?")+Q.data,delete Q.data),Q.cache===!1&&(E=E.replace(hC,"$1"),se=(tl.test(E)?"&":"?")+"_="+Lf.guid+++se),Q.url=E+se),Q.ifModified&&(_.lastModified[E]&&nt.setRequestHeader("If-Modified-Since",_.lastModified[E]),_.etag[E]&&nt.setRequestHeader("If-None-Match",_.etag[E])),(Q.data&&Q.hasContent&&Q.contentType!==!1||p.contentType)&&nt.setRequestHeader("Content-Type",Q.contentType),nt.setRequestHeader("Accept",Q.dataTypes[0]&&Q.accepts[Q.dataTypes[0]]?Q.accepts[Q.dataTypes[0]]+(Q.dataTypes[0]!=="*"?", "+kf+"; q=0.01":""):Q.accepts["*"]);for(ie in Q.headers)nt.setRequestHeader(ie,Q.headers[ie]);if(Q.beforeSend&&(Q.beforeSend.call(me,nt,Q)===!1||F))return nt.abort();if(Oi="abort",$e.add(Q.complete),nt.done(Q.success),nt.fail(Q.error),v=jf(il,Q,p,nt),!v)Xo(-1,"No Transport");else{if(nt.readyState=1,W&&We.trigger("ajaxSend",[nt,Q]),F)return nt;Q.async&&Q.timeout>0&&(O=e.setTimeout(function(){nt.abort("timeout")},Q.timeout));try{F=!1,v.send(Xt,Xo)}catch(ut){if(F)throw ut;Xo(-1,ut)}}function Xo(ut,Vt,za,sl){var Ii,Ba,Pi,xo,Eo,ei=Vt;F||(F=!0,O&&e.clearTimeout(O),v=void 0,S=sl||"",nt.readyState=ut>0?4:0,Ii=ut>=200&&ut<300||ut===304,za&&(xo=bC(Q,nt,za)),!Ii&&_.inArray("script",Q.dataTypes)>-1&&_.inArray("json",Q.dataTypes)<0&&(Q.converters["text script"]=function(){}),xo=xC(Q,xo,nt,Ii),Ii?(Q.ifModified&&(Eo=nt.getResponseHeader("Last-Modified"),Eo&&(_.lastModified[E]=Eo),Eo=nt.getResponseHeader("etag"),Eo&&(_.etag[E]=Eo)),ut===204||Q.type==="HEAD"?ei="nocontent":ut===304?ei="notmodified":(ei=xo.state,Ba=xo.data,Pi=xo.error,Ii=!Pi)):(Pi=ei,(ut||!ei)&&(ei="error",ut<0&&(ut=0))),nt.status=ut,nt.statusText=(Vt||ei)+"",Ii?st.resolveWith(me,[Ba,ei,nt]):st.rejectWith(me,[nt,ei,Pi]),nt.statusCode(pn),pn=void 0,W&&We.trigger(Ii?"ajaxSuccess":"ajaxError",[nt,Q,Ii?Ba:Pi]),$e.fireWith(me,[nt,ei]),W&&(We.trigger("ajaxComplete",[nt,Q]),--_.active||_.event.trigger("ajaxStop")))}return nt},getJSON:function(c,p,v){return _.get(c,p,v,"json")},getScript:function(c,p){return _.get(c,void 0,p,"script")}}),_.each(["get","post"],function(c,p){_[p]=function(v,E,S,A){return x(E)&&(A=A||S,S=E,E=void 0),_.ajax(_.extend({url:v,type:p,dataType:A,data:E,success:S},_.isPlainObject(v)&&v))}}),_.ajaxPrefilter(function(c){var p;for(p in c.headers)p.toLowerCase()==="content-type"&&(c.contentType=c.headers[p]||"")}),_._evalUrl=function(c,p,v){return _.ajax({url:c,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(E){_.globalEval(E,p,v)}})},_.fn.extend({wrapAll:function(c){var p;return this[0]&&(x(c)&&(c=c.call(this[0])),p=_(c,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&p.insertBefore(this[0]),p.map(function(){for(var v=this;v.firstElementChild;)v=v.firstElementChild;return v}).append(this)),this},wrapInner:function(c){return x(c)?this.each(function(p){_(this).wrapInner(c.call(this,p))}):this.each(function(){var p=_(this),v=p.contents();v.length?v.wrapAll(c):p.append(c)})},wrap:function(c){var p=x(c);return this.each(function(v){_(this).wrapAll(p?c.call(this,v):c)})},unwrap:function(c){return this.parent(c).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(c){return!_.expr.pseudos.visible(c)},_.expr.pseudos.visible=function(c){return!!(c.offsetWidth||c.offsetHeight||c.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var EC={0:200,1223:204},La=_.ajaxSettings.xhr();b.cors=!!La&&"withCredentials"in La,b.ajax=La=!!La,_.ajaxTransport(function(c){var p,v;if(b.cors||La&&!c.crossDomain)return{send:function(E,S){var A,O=c.xhr();if(O.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(A in c.xhrFields)O[A]=c.xhrFields[A];c.mimeType&&O.overrideMimeType&&O.overrideMimeType(c.mimeType),!c.crossDomain&&!E["X-Requested-With"]&&(E["X-Requested-With"]="XMLHttpRequest");for(A in E)O.setRequestHeader(A,E[A]);p=function(k){return function(){p&&(p=v=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,k==="abort"?O.abort():k==="error"?typeof O.status!="number"?S(0,"error"):S(O.status,O.statusText):S(EC[O.status]||O.status,O.statusText,(O.responseType||"text")!=="text"||typeof O.responseText!="string"?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=p(),v=O.onerror=O.ontimeout=p("error"),O.onabort!==void 0?O.onabort=v:O.onreadystatechange=function(){O.readyState===4&&e.setTimeout(function(){p&&v()})},p=p("abort");try{O.send(c.hasContent&&c.data||null)}catch(k){if(p)throw k}},abort:function(){p&&p()}}}),_.ajaxPrefilter(function(c){c.crossDomain&&(c.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(c){return _.globalEval(c),c}}}),_.ajaxPrefilter("script",function(c){c.cache===void 0&&(c.cache=!1),c.crossDomain&&(c.type="GET")}),_.ajaxTransport("script",function(c){if(c.crossDomain||c.scriptAttrs){var p,v;return{send:function(E,S){p=_("<script>").attr(c.scriptAttrs||{}).prop({charset:c.scriptCharset,src:c.url}).on("load error",v=function(A){p.remove(),v=null,A&&S(A.type==="error"?404:200,A.type)}),R.head.appendChild(p[0])},abort:function(){v&&v()}}}});var Gf=[],al=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var c=Gf.pop()||_.expando+"_"+Lf.guid++;return this[c]=!0,c}}),_.ajaxPrefilter("json jsonp",function(c,p,v){var E,S,A,O=c.jsonp!==!1&&(al.test(c.url)?"url":typeof c.data=="string"&&(c.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&al.test(c.data)&&"data");if(O||c.dataTypes[0]==="jsonp")return E=c.jsonpCallback=x(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,O?c[O]=c[O].replace(al,"$1"+E):c.jsonp!==!1&&(c.url+=(tl.test(c.url)?"&":"?")+c.jsonp+"="+E),c.converters["script json"]=function(){return A||_.error(E+" was not called"),A[0]},c.dataTypes[0]="json",S=e[E],e[E]=function(){A=arguments},v.always(function(){S===void 0?_(e).removeProp(E):e[E]=S,c[E]&&(c.jsonpCallback=p.jsonpCallback,Gf.push(E)),A&&x(S)&&S(A[0]),A=S=void 0}),"script"}),b.createHTMLDocument=function(){var c=R.implementation.createHTMLDocument("").body;return c.innerHTML="<form></form><form></form>",c.childNodes.length===2}(),_.parseHTML=function(c,p,v){if(typeof c!="string")return[];typeof p=="boolean"&&(v=p,p=!1);var E,S,A;return p||(b.createHTMLDocument?(p=R.implementation.createHTMLDocument(""),E=p.createElement("base"),E.href=R.location.href,p.head.appendChild(E)):p=R),S=Oe.exec(c),A=!v&&[],S?[p.createElement(S[1])]:(S=vf([c],p,A),A&&A.length&&_(A).remove(),_.merge([],S.childNodes))},_.fn.load=function(c,p,v){var E,S,A,O=this,k=c.indexOf(" ");return k>-1&&(E=Zo(c.slice(k)),c=c.slice(0,k)),x(p)?(v=p,p=void 0):p&&typeof p=="object"&&(S="POST"),O.length>0&&_.ajax({url:c,type:S||"GET",dataType:"html",data:p}).done(function(F){A=arguments,O.html(E?_("<div>").append(_.parseHTML(F)).find(E):F)}).always(v&&function(F,W){O.each(function(){v.apply(this,A||[F.responseText,W,F])})}),this},_.expr.pseudos.animated=function(c){return _.grep(_.timers,function(p){return c===p.elem}).length},_.offset={setOffset:function(c,p,v){var E,S,A,O,k,F,W,ie=_.css(c,"position"),se=_(c),Q={};ie==="static"&&(c.style.position="relative"),k=se.offset(),A=_.css(c,"top"),F=_.css(c,"left"),W=(ie==="absolute"||ie==="fixed")&&(A+F).indexOf("auto")>-1,W?(E=se.position(),O=E.top,S=E.left):(O=parseFloat(A)||0,S=parseFloat(F)||0),x(p)&&(p=p.call(c,v,_.extend({},k))),p.top!=null&&(Q.top=p.top-k.top+O),p.left!=null&&(Q.left=p.left-k.left+S),"using"in p?p.using.call(c,Q):se.css(Q)}},_.fn.extend({offset:function(c){if(arguments.length)return c===void 0?this:this.each(function(S){_.offset.setOffset(this,c,S)});var p,v,E=this[0];if(E)return E.getClientRects().length?(p=E.getBoundingClientRect(),v=E.ownerDocument.defaultView,{top:p.top+v.pageYOffset,left:p.left+v.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var c,p,v,E=this[0],S={top:0,left:0};if(_.css(E,"position")==="fixed")p=E.getBoundingClientRect();else{for(p=this.offset(),v=E.ownerDocument,c=E.offsetParent||v.documentElement;c&&(c===v.body||c===v.documentElement)&&_.css(c,"position")==="static";)c=c.parentNode;c&&c!==E&&c.nodeType===1&&(S=_(c).offset(),S.top+=_.css(c,"borderTopWidth",!0),S.left+=_.css(c,"borderLeftWidth",!0))}return{top:p.top-S.top-_.css(E,"marginTop",!0),left:p.left-S.left-_.css(E,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent;c&&_.css(c,"position")==="static";)c=c.offsetParent;return c||di})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,p){var v=p==="pageYOffset";_.fn[c]=function(E){return $n(this,function(S,A,O){var k;if(T(S)?k=S:S.nodeType===9&&(k=S.defaultView),O===void 0)return k?k[p]:S[A];k?k.scrollTo(v?k.pageXOffset:O,v?O:k.pageYOffset):S[A]=O},c,E,arguments.length)}}),_.each(["top","left"],function(c,p){_.cssHooks[p]=wf(b.pixelPosition,function(v,E){if(E)return E=Da(v,p),Zu.test(E)?_(v).position()[p]+"px":E})}),_.each({Height:"height",Width:"width"},function(c,p){_.each({padding:"inner"+c,content:p,"":"outer"+c},function(v,E){_.fn[E]=function(S,A){var O=arguments.length&&(v||typeof S!="boolean"),k=v||(S===!0||A===!0?"margin":"border");return $n(this,function(F,W,ie){var se;return T(F)?E.indexOf("outer")===0?F["inner"+c]:F.document.documentElement["client"+c]:F.nodeType===9?(se=F.documentElement,Math.max(F.body["scroll"+c],se["scroll"+c],F.body["offset"+c],se["offset"+c],se["client"+c])):ie===void 0?_.css(F,W,k):_.style(F,W,ie,k)},p,O?S:void 0,O)}})}),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(c,p){_.fn[p]=function(v){return this.on(p,v)}}),_.fn.extend({bind:function(c,p,v){return this.on(c,null,p,v)},unbind:function(c,p){return this.off(c,null,p)},delegate:function(c,p,v,E){return this.on(p,c,v,E)},undelegate:function(c,p,v){return arguments.length===1?this.off(c,"**"):this.off(p,c||"**",v)},hover:function(c,p){return this.mouseenter(c).mouseleave(p||c)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(c,p){_.fn[p]=function(v,E){return arguments.length>0?this.on(p,null,v,E):this.trigger(p)}});var CC=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;_.proxy=function(c,p){var v,E,S;if(typeof p=="string"&&(v=c[p],p=c,c=v),!!x(c))return E=o.call(arguments,2),S=function(){return c.apply(p||this,E.concat(o.call(arguments)))},S.guid=c.guid=c.guid||_.guid++,S},_.holdReady=function(c){c?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=Z,_.isFunction=x,_.isWindow=T,_.camelCase=Wn,_.type=N,_.now=Date.now,_.isNumeric=function(c){var p=_.type(c);return(p==="number"||p==="string")&&!isNaN(c-parseFloat(c))},_.trim=function(c){return c==null?"":(c+"").replace(CC,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return _});var TC=e.jQuery,wC=e.$;return _.noConflict=function(c){return e.$===_&&(e.$=wC),c&&e.jQuery===_&&(e.jQuery=TC),_},typeof t>"u"&&(e.jQuery=e.$=_),_})});var __=Ve((Qz,g_)=>{var io=function(e){e==null&&(e=new Date().getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};io.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){var e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(((e&4294901760)>>>16)*1812433253<<16)+(e&65535)*1812433253+this.mti,this.mt[this.mti]>>>=0}};io.prototype.init_by_array=function(e,t){var n,i,o;for(this.init_seed(19650218),n=1,i=0,o=this.N>t?this.N:t;o;o--){var r=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(((r&4294901760)>>>16)*1664525<<16)+(r&65535)*1664525)+e[i]+i,this.mt[n]>>>=0,n++,i++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),i>=t&&(i=0)}for(o=this.N-1;o;o--){var r=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(((r&4294901760)>>>16)*1566083941<<16)+(r&65535)*1566083941)-n,this.mt[n]>>>=0,n++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648};io.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[e&1];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[e&1];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[e&1],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,e>>>0};io.prototype.random_int31=function(){return this.random_int()>>>1};io.prototype.random_incl=function(){return this.random_int()*(1/4294967295)};io.prototype.random=function(){return this.random_int()*(1/4294967296)};io.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)};io.prototype.random_long=function(){var e=this.random_int()>>>5,t=this.random_int()>>>6;return(e*67108864+t)*(1/9007199254740992)};g_.exports=io});var m0=Ve((ha,ga)=>{/*! https://mths.be/punycode v1.4.0 by @mathias */(function(e){var t=typeof ha=="object"&&ha&&!ha.nodeType&&ha,n=typeof ga=="object"&&ga&&!ga.nodeType&&ga,i=typeof global=="object"&&global;(i.global===i||i.window===i||i.self===i)&&(e=i);var o,r=2147483647,a=36,s=1,u=26,l=38,d=700,f=72,g=128,b="-",x=/^xn--/,T=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=a-s,N=Math.floor,V=String.fromCharCode,q;function _(U){throw new RangeError(D[U])}function ee(U,re){for(var ye=U.length,Oe=[];ye--;)Oe[ye]=re(U[ye]);return Oe}function Z(U,re){var ye=U.split("@"),Oe="";ye.length>1&&(Oe=ye[0]+"@",U=ye[1]),U=U.replace(R,".");var Fe=U.split("."),Je=ee(Fe,re).join(".");return Oe+Je}function J(U){for(var re=[],ye=0,Oe=U.length,Fe,Je;ye<Oe;)Fe=U.charCodeAt(ye++),Fe>=55296&&Fe<=56319&&ye<Oe?(Je=U.charCodeAt(ye++),(Je&64512)==56320?re.push(((Fe&1023)<<10)+(Je&1023)+65536):(re.push(Fe),ye--)):re.push(Fe);return re}function H(U){return ee(U,function(re){var ye="";return re>65535&&(re-=65536,ye+=V(re>>>10&1023|55296),re=56320|re&1023),ye+=V(re),ye}).join("")}function te(U){return U-48<10?U-22:U-65<26?U-65:U-97<26?U-97:a}function y(U,re){return U+22+75*(U<26)-((re!=0)<<5)}function w(U,re,ye){var Oe=0;for(U=ye?N(U/d):U>>1,U+=N(U/re);U>M*u>>1;Oe+=a)U=N(U/M);return N(Oe+(M+1)*U/(U+l))}function P(U){var re=[],ye=U.length,Oe,Fe=0,Je=g,He=f,Ye,at,ht,qe,ot,Xe,Nt,Zt,yn;for(Ye=U.lastIndexOf(b),Ye<0&&(Ye=0),at=0;at<Ye;++at)U.charCodeAt(at)>=128&&_("not-basic"),re.push(U.charCodeAt(at));for(ht=Ye>0?Ye+1:0;ht<ye;){for(qe=Fe,ot=1,Xe=a;ht>=ye&&_("invalid-input"),Nt=te(U.charCodeAt(ht++)),(Nt>=a||Nt>N((r-Fe)/ot))&&_("overflow"),Fe+=Nt*ot,Zt=Xe<=He?s:Xe>=He+u?u:Xe-He,!(Nt<Zt);Xe+=a)yn=a-Zt,ot>N(r/yn)&&_("overflow"),ot*=yn;Oe=re.length+1,He=w(Fe-qe,Oe,qe==0),N(Fe/Oe)>r-Je&&_("overflow"),Je+=N(Fe/Oe),Fe%=Oe,re.splice(Fe++,0,Je)}return H(re)}function B(U){var re,ye,Oe,Fe,Je,He,Ye,at,ht,qe,ot,Xe=[],Nt,Zt,yn,li;for(U=J(U),Nt=U.length,re=g,ye=0,Je=f,He=0;He<Nt;++He)ot=U[He],ot<128&&Xe.push(V(ot));for(Oe=Fe=Xe.length,Fe&&Xe.push(b);Oe<Nt;){for(Ye=r,He=0;He<Nt;++He)ot=U[He],ot>=re&&ot<Ye&&(Ye=ot);for(Zt=Oe+1,Ye-re>N((r-ye)/Zt)&&_("overflow"),ye+=(Ye-re)*Zt,re=Ye,He=0;He<Nt;++He)if(ot=U[He],ot<re&&++ye>r&&_("overflow"),ot==re){for(at=ye,ht=a;qe=ht<=Je?s:ht>=Je+u?u:ht-Je,!(at<qe);ht+=a)li=at-qe,yn=a-qe,Xe.push(V(y(qe+li%yn,0))),at=N(li/yn);Xe.push(V(y(at,0))),Je=w(ye,Zt,Oe==Fe),ye=0,++Oe}++ye,++re}return Xe.join("")}function Y(U){return Z(U,function(re){return x.test(re)?P(re.slice(4).toLowerCase()):re})}function K(U){return Z(U,function(re){return T.test(re)?"xn--"+B(re):re})}if(o={version:"1.3.2",ucs2:{decode:J,encode:H},decode:P,encode:B,toASCII:K,toUnicode:Y},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return o});else if(t&&n)if(ga.exports==t)n.exports=o;else for(q in o)o.hasOwnProperty(q)&&(t[q]=o[q]);else e.punycode=o})(ha)});var g0=Ve((h0,tu)=>{/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(e,t){"use strict";typeof tu=="object"&&tu.exports?tu.exports=t():typeof define=="function"&&define.amd?define(t):e.IPv6=t(e)})(h0,function(e){"use strict";var t=e&&e.IPv6;function n(o){var r=o.toLowerCase(),a=r.split(":"),s=a.length,u=8;a[0]===""&&a[1]===""&&a[2]===""?(a.shift(),a.shift()):a[0]===""&&a[1]===""?a.shift():a[s-1]===""&&a[s-2]===""&&a.pop(),s=a.length,a[s-1].indexOf(".")!==-1&&(u=7);var l;for(l=0;l<s&&a[l]!=="";l++);if(l<u)for(a.splice(l,1,"0000");a.length<u;)a.splice(l,0,"0000");for(var d,f=0;f<u;f++){d=a[f].split("");for(var g=0;g<3&&(d[0]==="0"&&d.length>1);g++)d.splice(0,1);a[f]=d.join("")}var b=-1,x=0,T=0,R=-1,D=!1;for(f=0;f<u;f++)D?a[f]==="0"?T+=1:(D=!1,T>x&&(b=R,x=T)):a[f]==="0"&&(D=!0,R=f,T=1);T>x&&(b=R,x=T),x>1&&a.splice(b,x,""),s=a.length;var M="";for(a[0]===""&&(M=":"),f=0;f<s&&(M+=a[f],f!==s-1);f++)M+=":";return a[s-1]===""&&(M+=":"),M}function i(){return e.IPv6===this&&(e.IPv6=t),this}return{best:n,noConflict:i}})});var y0=Ve((_0,nu)=>{/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(e,t){"use strict";typeof nu=="object"&&nu.exports?nu.exports=t():typeof define=="function"&&define.amd?define(t):e.SecondLevelDomains=t(e)})(_0,function(e){"use strict";var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return!1;var r=i.lastIndexOf(".",o-1);if(r<=0||r>=o-1)return!1;var a=n.list[i.slice(o+1)];return a?a.indexOf(" "+i.slice(r+1,o)+" ")>=0:!1},is:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return!1;var r=i.lastIndexOf(".",o-1);if(r>=0)return!1;var a=n.list[i.slice(o+1)];return a?a.indexOf(" "+i.slice(0,o)+" ")>=0:!1},get:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return null;var r=i.lastIndexOf(".",o-1);if(r<=0||r>=o-1)return null;var a=n.list[i.slice(o+1)];return!a||a.indexOf(" "+i.slice(r+1,o)+" ")<0?null:i.slice(r+1)},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n})});var Fo=Ve((v0,iu)=>{/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(e,t){"use strict";typeof iu=="object"&&iu.exports?iu.exports=t(m0(),g0(),y0()):typeof define=="function"&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)})(v0,function(e,t,n,i){"use strict";var o=i&&i.URI;function r(y,w){var P=arguments.length>=1,B=arguments.length>=2;if(!(this instanceof r))return P?B?new r(y,w):new r(y):new r;if(y===void 0){if(P)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?y=location.href+"":y=""}if(y===null&&P)throw new TypeError("null is not a valid argument for URI");return this.href(y),w!==void 0?this.absoluteTo(w):this}function a(y){return/^[0-9]+$/.test(y)}r.version="1.19.11";var s=r.prototype,u=Object.prototype.hasOwnProperty;function l(y){return y.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function d(y){return y===void 0?"Undefined":String(Object.prototype.toString.call(y)).slice(8,-1)}function f(y){return d(y)==="Array"}function g(y,w){var P={},B,Y;if(d(w)==="RegExp")P=null;else if(f(w))for(B=0,Y=w.length;B<Y;B++)P[w[B]]=!0;else P[w]=!0;for(B=0,Y=y.length;B<Y;B++){var K=P&&P[y[B]]!==void 0||!P&&w.test(y[B]);K&&(y.splice(B,1),Y--,B--)}return y}function b(y,w){var P,B;if(f(w)){for(P=0,B=w.length;P<B;P++)if(!b(y,w[P]))return!1;return!0}var Y=d(w);for(P=0,B=y.length;P<B;P++)if(Y==="RegExp"){if(typeof y[P]=="string"&&y[P].match(w))return!0}else if(y[P]===w)return!0;return!1}function x(y,w){if(!f(y)||!f(w)||y.length!==w.length)return!1;y.sort(),w.sort();for(var P=0,B=y.length;P<B;P++)if(y[P]!==w[P])return!1;return!0}function T(y){var w=/^\/+|\/+$/g;return y.replace(w,"")}r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:r.preventInvalidHostname,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.preventInvalidHostname=!1,r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\._-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},r.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,r.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.hostProtocols=["http","https"],r.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},r.getDomAttribute=function(y){if(!(!y||!y.nodeName)){var w=y.nodeName.toLowerCase();if(!(w==="input"&&y.type!=="image"))return r.domAttributes[w]}};function R(y){return escape(y)}function D(y){return encodeURIComponent(y).replace(/[!'()*]/g,R).replace(/\*/g,"%2A")}r.encode=D,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=D,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},r.encodeQuery=function(y,w){var P=r.encode(y+"");return w===void 0&&(w=r.escapeQuerySpace),w?P.replace(/%20/g,"+"):P},r.decodeQuery=function(y,w){y+="",w===void 0&&(w=r.escapeQuerySpace);try{return r.decode(w?y.replace(/\+/g,"%20"):y)}catch{return y}};var M={encode:"encode",decode:"decode"},N,V=function(y,w){return function(P){try{return r[w](P+"").replace(r.characters[y][w].expression,function(B){return r.characters[y][w].map[B]})}catch{return P}}};for(N in M)r[N+"PathSegment"]=V("pathname",M[N]),r[N+"UrnPathSegment"]=V("urnpath",M[N]);var q=function(y,w,P){return function(B){var Y;P?Y=function(ye){return r[w](r[P](ye))}:Y=r[w];for(var K=(B+"").split(y),U=0,re=K.length;U<re;U++)K[U]=Y(K[U]);return K.join(y)}};r.decodePath=q("/","decodePathSegment"),r.decodeUrnPath=q(":","decodeUrnPathSegment"),r.recodePath=q("/","encodePathSegment","decode"),r.recodeUrnPath=q(":","encodeUrnPathSegment","decode"),r.encodeReserved=V("reserved","encode"),r.parse=function(y,w){var P;return w||(w={preventInvalidHostname:r.preventInvalidHostname}),y=y.replace(r.leading_whitespace_expression,""),y=y.replace(r.ascii_tab_whitespace,""),P=y.indexOf("#"),P>-1&&(w.fragment=y.substring(P+1)||null,y=y.substring(0,P)),P=y.indexOf("?"),P>-1&&(w.query=y.substring(P+1)||null,y=y.substring(0,P)),y=y.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),y=y.replace(/^[/\\]{2,}/i,"//"),y.substring(0,2)==="//"?(w.protocol=null,y=y.substring(2),y=r.parseAuthority(y,w)):(P=y.indexOf(":"),P>-1&&(w.protocol=y.substring(0,P)||null,w.protocol&&!w.protocol.match(r.protocol_expression)?w.protocol=void 0:y.substring(P+1,P+3).replace(/\\/g,"/")==="//"?(y=y.substring(P+3),y=r.parseAuthority(y,w)):(y=y.substring(P+1),w.urn=!0))),w.path=y,w},r.parseHost=function(y,w){y||(y=""),y=y.replace(/\\/g,"/");var P=y.indexOf("/"),B,Y;if(P===-1&&(P=y.length),y.charAt(0)==="[")B=y.indexOf("]"),w.hostname=y.substring(1,B)||null,w.port=y.substring(B+2,P)||null,w.port==="/"&&(w.port=null);else{var K=y.indexOf(":"),U=y.indexOf("/"),re=y.indexOf(":",K+1);re!==-1&&(U===-1||re<U)?(w.hostname=y.substring(0,P)||null,w.port=null):(Y=y.substring(0,P).split(":"),w.hostname=Y[0]||null,w.port=Y[1]||null)}return w.hostname&&y.substring(P).charAt(0)!=="/"&&(P++,y="/"+y),w.preventInvalidHostname&&r.ensureValidHostname(w.hostname,w.protocol),w.port&&r.ensureValidPort(w.port),y.substring(P)||"/"},r.parseAuthority=function(y,w){return y=r.parseUserinfo(y,w),r.parseHost(y,w)},r.parseUserinfo=function(y,w){var P=y,B=y.indexOf("\\");B!==-1&&(y=y.replace(/\\/g,"/"));var Y=y.indexOf("/"),K=y.lastIndexOf("@",Y>-1?Y:y.length-1),U;return K>-1&&(Y===-1||K<Y)?(U=y.substring(0,K).split(":"),w.username=U[0]?r.decode(U[0]):null,U.shift(),w.password=U[0]?r.decode(U.join(":")):null,y=P.substring(K+1)):(w.username=null,w.password=null),y},r.parseQuery=function(y,w){if(!y)return{};if(y=y.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!y)return{};for(var P={},B=y.split("&"),Y=B.length,K,U,re,ye=0;ye<Y;ye++)K=B[ye].split("="),U=r.decodeQuery(K.shift(),w),re=K.length?r.decodeQuery(K.join("="),w):null,U!=="__proto__"&&(u.call(P,U)?((typeof P[U]=="string"||P[U]===null)&&(P[U]=[P[U]]),P[U].push(re)):P[U]=re);return P},r.build=function(y){var w="",P=!1;return y.protocol&&(w+=y.protocol+":"),!y.urn&&(w||y.hostname)&&(w+="//",P=!0),w+=r.buildAuthority(y)||"",typeof y.path=="string"&&(y.path.charAt(0)!=="/"&&P&&(w+="/"),w+=y.path),typeof y.query=="string"&&y.query&&(w+="?"+y.query),typeof y.fragment=="string"&&y.fragment&&(w+="#"+y.fragment),w},r.buildHost=function(y){var w="";if(y.hostname)r.ip6_expression.test(y.hostname)?w+="["+y.hostname+"]":w+=y.hostname;else return"";return y.port&&(w+=":"+y.port),w},r.buildAuthority=function(y){return r.buildUserinfo(y)+r.buildHost(y)},r.buildUserinfo=function(y){var w="";return y.username&&(w+=r.encode(y.username)),y.password&&(w+=":"+r.encode(y.password)),w&&(w+="@"),w},r.buildQuery=function(y,w,P){var B="",Y,K,U,re;for(K in y)if(K!=="__proto__"&&u.call(y,K))if(f(y[K]))for(Y={},U=0,re=y[K].length;U<re;U++)y[K][U]!==void 0&&Y[y[K][U]+""]===void 0&&(B+="&"+r.buildQueryParameter(K,y[K][U],P),w!==!0&&(Y[y[K][U]+""]=!0));else y[K]!==void 0&&(B+="&"+r.buildQueryParameter(K,y[K],P));return B.substring(1)},r.buildQueryParameter=function(y,w,P){return r.encodeQuery(y,P)+(w!==null?"="+r.encodeQuery(w,P):"")},r.addQuery=function(y,w,P){if(typeof w=="object")for(var B in w)u.call(w,B)&&r.addQuery(y,B,w[B]);else if(typeof w=="string"){if(y[w]===void 0){y[w]=P;return}else typeof y[w]=="string"&&(y[w]=[y[w]]);f(P)||(P=[P]),y[w]=(y[w]||[]).concat(P)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},r.setQuery=function(y,w,P){if(typeof w=="object")for(var B in w)u.call(w,B)&&r.setQuery(y,B,w[B]);else if(typeof w=="string")y[w]=P===void 0?null:P;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},r.removeQuery=function(y,w,P){var B,Y,K;if(f(w))for(B=0,Y=w.length;B<Y;B++)y[w[B]]=void 0;else if(d(w)==="RegExp")for(K in y)w.test(K)&&(y[K]=void 0);else if(typeof w=="object")for(K in w)u.call(w,K)&&r.removeQuery(y,K,w[K]);else if(typeof w=="string")P!==void 0?d(P)==="RegExp"?!f(y[w])&&P.test(y[w])?y[w]=void 0:y[w]=g(y[w],P):y[w]===String(P)&&(!f(P)||P.length===1)?y[w]=void 0:f(y[w])&&(y[w]=g(y[w],P)):y[w]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},r.hasQuery=function(y,w,P,B){switch(d(w)){case"String":break;case"RegExp":for(var Y in y)if(u.call(y,Y)&&w.test(Y)&&(P===void 0||r.hasQuery(y,Y,P)))return!0;return!1;case"Object":for(var K in w)if(u.call(w,K)&&!r.hasQuery(y,K,w[K]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(d(P)){case"Undefined":return w in y;case"Boolean":var U=!!(f(y[w])?y[w].length:y[w]);return P===U;case"Function":return!!P(y[w],w,y);case"Array":if(!f(y[w]))return!1;var re=B?b:x;return re(y[w],P);case"RegExp":return f(y[w])?B?b(y[w],P):!1:!!(y[w]&&y[w].match(P));case"Number":P=String(P);case"String":return f(y[w])?B?b(y[w],P):!1:y[w]===P;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.joinPaths=function(){for(var y=[],w=[],P=0,B=0;B<arguments.length;B++){var Y=new r(arguments[B]);y.push(Y);for(var K=Y.segment(),U=0;U<K.length;U++)typeof K[U]=="string"&&w.push(K[U]),K[U]&&P++}if(!w.length||!P)return new r("");var re=new r("").segment(w);return(y[0].path()===""||y[0].path().slice(0,1)==="/")&&re.path("/"+re.path()),re.normalize()},r.commonPath=function(y,w){var P=Math.min(y.length,w.length),B;for(B=0;B<P;B++)if(y.charAt(B)!==w.charAt(B)){B--;break}return B<1?y.charAt(0)===w.charAt(0)&&y.charAt(0)==="/"?"/":"":((y.charAt(B)!=="/"||w.charAt(B)!=="/")&&(B=y.substring(0,B).lastIndexOf("/")),y.substring(0,B+1))},r.withinString=function(y,w,P){P||(P={});var B=P.start||r.findUri.start,Y=P.end||r.findUri.end,K=P.trim||r.findUri.trim,U=P.parens||r.findUri.parens,re=/[a-z0-9-]=["']?$/i;for(B.lastIndex=0;;){var ye=B.exec(y);if(!ye)break;var Oe=ye.index;if(P.ignoreHtml){var Fe=y.slice(Math.max(Oe-3,0),Oe);if(Fe&&re.test(Fe))continue}for(var Je=Oe+y.slice(Oe).search(Y),He=y.slice(Oe,Je),Ye=-1;;){var at=U.exec(He);if(!at)break;var ht=at.index+at[0].length;Ye=Math.max(Ye,ht)}if(Ye>-1?He=He.slice(0,Ye)+He.slice(Ye).replace(K,""):He=He.replace(K,""),!(He.length<=ye[0].length)&&!(P.ignore&&P.ignore.test(He))){Je=Oe+He.length;var qe=w(He,Oe,Je,y);if(qe===void 0){B.lastIndex=Je;continue}qe=String(qe),y=y.slice(0,Oe)+qe+y.slice(Je),B.lastIndex=Oe+qe.length}}return B.lastIndex=0,y},r.ensureValidHostname=function(y,w){var P=!!y,B=!!w,Y=!1;if(B&&(Y=b(r.hostProtocols,w)),Y&&!P)throw new TypeError("Hostname cannot be empty, if protocol is "+w);if(y&&y.match(r.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+y+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(y).match(r.invalid_hostname_characters))throw new TypeError('Hostname "'+y+'" contains characters other than [A-Z0-9.-:_]')}},r.ensureValidPort=function(y){if(y){var w=Number(y);if(!(a(w)&&w>0&&w<65536))throw new TypeError('Port "'+y+'" is not a valid port')}},r.noConflict=function(y){if(y){var w={URI:this.noConflict()};return i.URITemplate&&typeof i.URITemplate.noConflict=="function"&&(w.URITemplate=i.URITemplate.noConflict()),i.IPv6&&typeof i.IPv6.noConflict=="function"&&(w.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&typeof i.SecondLevelDomains.noConflict=="function"&&(w.SecondLevelDomains=i.SecondLevelDomains.noConflict()),w}else i.URI===this&&(i.URI=o);return this},s.build=function(y){return y===!0?this._deferred_build=!0:(y===void 0||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new r(this)},s.valueOf=s.toString=function(){return this.build(!1)._string};function _(y){return function(w,P){return w===void 0?this._parts[y]||"":(this._parts[y]=w||null,this.build(!P),this)}}function ee(y,w){return function(P,B){return P===void 0?this._parts[y]||"":(P!==null&&(P=P+"",P.charAt(0)===w&&(P=P.substring(1))),this._parts[y]=P,this.build(!B),this)}}s.protocol=_("protocol"),s.username=_("username"),s.password=_("password"),s.hostname=_("hostname"),s.port=_("port"),s.query=ee("query","?"),s.fragment=ee("fragment","#"),s.search=function(y,w){var P=this.query(y,w);return typeof P=="string"&&P.length?"?"+P:P},s.hash=function(y,w){var P=this.fragment(y,w);return typeof P=="string"&&P.length?"#"+P:P},s.pathname=function(y,w){if(y===void 0||y===!0){var P=this._parts.path||(this._parts.hostname?"/":"");return y?(this._parts.urn?r.decodeUrnPath:r.decodePath)(P):P}else return this._parts.urn?this._parts.path=y?r.recodeUrnPath(y):"":this._parts.path=y?r.recodePath(y):"/",this.build(!w),this},s.path=s.pathname,s.href=function(y,w){var P;if(y===void 0)return this.toString();this._string="",this._parts=r._parts();var B=y instanceof r,Y=typeof y=="object"&&(y.hostname||y.path||y.pathname);if(y.nodeName){var K=r.getDomAttribute(y);y=y[K]||"",Y=!1}if(!B&&Y&&y.pathname!==void 0&&(y=y.toString()),typeof y=="string"||y instanceof String)this._parts=r.parse(String(y),this._parts);else if(B||Y){var U=B?y._parts:y;for(P in U)P!=="query"&&u.call(this._parts,P)&&(this._parts[P]=U[P]);U.query&&this.query(U.query,!1)}else throw new TypeError("invalid input");return this.build(!w),this},s.is=function(y){var w=!1,P=!1,B=!1,Y=!1,K=!1,U=!1,re=!1,ye=!this._parts.urn;switch(this._parts.hostname&&(ye=!1,P=r.ip4_expression.test(this._parts.hostname),B=r.ip6_expression.test(this._parts.hostname),w=P||B,Y=!w,K=Y&&n&&n.has(this._parts.hostname),U=Y&&r.idn_expression.test(this._parts.hostname),re=Y&&r.punycode_expression.test(this._parts.hostname)),y.toLowerCase()){case"relative":return ye;case"absolute":return!ye;case"domain":case"name":return Y;case"sld":return K;case"ip":return w;case"ip4":case"ipv4":case"inet4":return P;case"ip6":case"ipv6":case"inet6":return B;case"idn":return U;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return re}return null};var Z=s.protocol,J=s.port,H=s.hostname;s.protocol=function(y,w){if(y&&(y=y.replace(/:(\/\/)?$/,""),!y.match(r.protocol_expression)))throw new TypeError('Protocol "'+y+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return Z.call(this,y,w)},s.scheme=s.protocol,s.port=function(y,w){return this._parts.urn?y===void 0?"":this:(y!==void 0&&(y===0&&(y=null),y&&(y+="",y.charAt(0)===":"&&(y=y.substring(1)),r.ensureValidPort(y))),J.call(this,y,w))},s.hostname=function(y,w){if(this._parts.urn)return y===void 0?"":this;if(y!==void 0){var P={preventInvalidHostname:this._parts.preventInvalidHostname},B=r.parseHost(y,P);if(B!=="/")throw new TypeError('Hostname "'+y+'" contains characters other than [A-Z0-9.-]');y=P.hostname,this._parts.preventInvalidHostname&&r.ensureValidHostname(y,this._parts.protocol)}return H.call(this,y,w)},s.origin=function(y,w){if(this._parts.urn)return y===void 0?"":this;if(y===void 0){var P=this.protocol(),B=this.authority();return B?(P?P+"://":"")+this.authority():""}else{var Y=r(y);return this.protocol(Y.protocol()).authority(Y.authority()).build(!w),this}},s.host=function(y,w){if(this._parts.urn)return y===void 0?"":this;if(y===void 0)return this._parts.hostname?r.buildHost(this._parts):"";var P=r.parseHost(y,this._parts);if(P!=="/")throw new TypeError('Hostname "'+y+'" contains characters other than [A-Z0-9.-]');return this.build(!w),this},s.authority=function(y,w){if(this._parts.urn)return y===void 0?"":this;if(y===void 0)return this._parts.hostname?r.buildAuthority(this._parts):"";var P=r.parseAuthority(y,this._parts);if(P!=="/")throw new TypeError('Hostname "'+y+'" contains characters other than [A-Z0-9.-]');return this.build(!w),this},s.userinfo=function(y,w){if(this._parts.urn)return y===void 0?"":this;if(y===void 0){var P=r.buildUserinfo(this._parts);return P&&P.substring(0,P.length-1)}else return y[y.length-1]!=="@"&&(y+="@"),r.parseUserinfo(y,this._parts),this.build(!w),this},s.resource=function(y,w){var P;return y===void 0?this.path()+this.search()+this.hash():(P=r.parse(y),this._parts.path=P.path,this._parts.query=P.query,this._parts.fragment=P.fragment,this.build(!w),this)},s.subdomain=function(y,w){if(this._parts.urn)return y===void 0?"":this;if(y===void 0){if(!this._parts.hostname||this.is("IP"))return"";var P=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,P)||""}else{var B=this._parts.hostname.length-this.domain().length,Y=this._parts.hostname.substring(0,B),K=new RegExp("^"+l(Y));if(y&&y.charAt(y.length-1)!=="."&&(y+="."),y.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return y&&r.ensureValidHostname(y,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(K,y),this.build(!w),this}},s.domain=function(y,w){if(this._parts.urn)return y===void 0?"":this;if(typeof y=="boolean"&&(w=y,y=void 0),y===void 0){if(!this._parts.hostname||this.is("IP"))return"";var P=this._parts.hostname.match(/\./g);if(P&&P.length<2)return this._parts.hostname;var B=this._parts.hostname.length-this.tld(w).length-1;return B=this._parts.hostname.lastIndexOf(".",B-1)+1,this._parts.hostname.substring(B)||""}else{if(!y)throw new TypeError("cannot set domain empty");if(y.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(r.ensureValidHostname(y,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=y;else{var Y=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(Y,y)}return this.build(!w),this}},s.tld=function(y,w){if(this._parts.urn)return y===void 0?"":this;if(typeof y=="boolean"&&(w=y,y=void 0),y===void 0){if(!this._parts.hostname||this.is("IP"))return"";var P=this._parts.hostname.lastIndexOf("."),B=this._parts.hostname.substring(P+1);return w!==!0&&n&&n.list[B.toLowerCase()]&&n.get(this._parts.hostname)||B}else{var Y;if(y)if(y.match(/[^a-zA-Z0-9-]/))if(n&&n.is(y))Y=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(Y,y);else throw new TypeError('TLD "'+y+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");Y=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(Y,y)}else throw new TypeError("cannot set TLD empty");return this.build(!w),this}},s.directory=function(y,w){if(this._parts.urn)return y===void 0?"":this;if(y===void 0||y===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var P=this._parts.path.length-this.filename().length-1,B=this._parts.path.substring(0,P)||(this._parts.hostname?"/":"");return y?r.decodePath(B):B}else{var Y=this._parts.path.length-this.filename().length,K=this._parts.path.substring(0,Y),U=new RegExp("^"+l(K));return this.is("relative")||(y||(y="/"),y.charAt(0)!=="/"&&(y="/"+y)),y&&y.charAt(y.length-1)!=="/"&&(y+="/"),y=r.recodePath(y),this._parts.path=this._parts.path.replace(U,y),this.build(!w),this}},s.filename=function(y,w){if(this._parts.urn)return y===void 0?"":this;if(typeof y!="string"){if(!this._parts.path||this._parts.path==="/")return"";var P=this._parts.path.lastIndexOf("/"),B=this._parts.path.substring(P+1);return y?r.decodePathSegment(B):B}else{var Y=!1;y.charAt(0)==="/"&&(y=y.substring(1)),y.match(/\.?\//)&&(Y=!0);var K=new RegExp(l(this.filename())+"$");return y=r.recodePath(y),this._parts.path=this._parts.path.replace(K,y),Y?this.normalizePath(w):this.build(!w),this}},s.suffix=function(y,w){if(this._parts.urn)return y===void 0?"":this;if(y===void 0||y===!0){if(!this._parts.path||this._parts.path==="/")return"";var P=this.filename(),B=P.lastIndexOf("."),Y,K;return B===-1?"":(Y=P.substring(B+1),K=/^[a-z0-9%]+$/i.test(Y)?Y:"",y?r.decodePathSegment(K):K)}else{y.charAt(0)==="."&&(y=y.substring(1));var U=this.suffix(),re;if(U)y?re=new RegExp(l(U)+"$"):re=new RegExp(l("."+U)+"$");else{if(!y)return this;this._parts.path+="."+r.recodePath(y)}return re&&(y=r.recodePath(y),this._parts.path=this._parts.path.replace(re,y)),this.build(!w),this}},s.segment=function(y,w,P){var B=this._parts.urn?":":"/",Y=this.path(),K=Y.substring(0,1)==="/",U=Y.split(B);if(y!==void 0&&typeof y!="number"&&(P=w,w=y,y=void 0),y!==void 0&&typeof y!="number")throw new Error('Bad segment "'+y+'", must be 0-based integer');if(K&&U.shift(),y<0&&(y=Math.max(U.length+y,0)),w===void 0)return y===void 0?U:U[y];if(y===null||U[y]===void 0)if(f(w)){U=[];for(var re=0,ye=w.length;re<ye;re++)!w[re].length&&(!U.length||!U[U.length-1].length)||(U.length&&!U[U.length-1].length&&U.pop(),U.push(T(w[re])))}else(w||typeof w=="string")&&(w=T(w),U[U.length-1]===""?U[U.length-1]=w:U.push(w));else w?U[y]=T(w):U.splice(y,1);return K&&U.unshift(""),this.path(U.join(B),P)},s.segmentCoded=function(y,w,P){var B,Y,K;if(typeof y!="number"&&(P=w,w=y,y=void 0),w===void 0){if(B=this.segment(y,w,P),!f(B))B=B!==void 0?r.decode(B):void 0;else for(Y=0,K=B.length;Y<K;Y++)B[Y]=r.decode(B[Y]);return B}if(!f(w))w=typeof w=="string"||w instanceof String?r.encode(w):w;else for(Y=0,K=w.length;Y<K;Y++)w[Y]=r.encode(w[Y]);return this.segment(y,w,P)};var te=s.query;return s.query=function(y,w){if(y===!0)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof y=="function"){var P=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),B=y.call(this,P);return this._parts.query=r.buildQuery(B||P,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!w),this}else return y!==void 0&&typeof y!="string"?(this._parts.query=r.buildQuery(y,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!w),this):te.call(this,y,w)},s.setQuery=function(y,w,P){var B=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof y=="string"||y instanceof String)B[y]=w!==void 0?w:null;else if(typeof y=="object")for(var Y in y)u.call(y,Y)&&(B[Y]=y[Y]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=r.buildQuery(B,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof y!="string"&&(P=w),this.build(!P),this},s.addQuery=function(y,w,P){var B=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(B,y,w===void 0?null:w),this._parts.query=r.buildQuery(B,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof y!="string"&&(P=w),this.build(!P),this},s.removeQuery=function(y,w,P){var B=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(B,y,w),this._parts.query=r.buildQuery(B,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof y!="string"&&(P=w),this.build(!P),this},s.hasQuery=function(y,w,P){var B=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(B,y,w,P)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(y){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!y)),this},s.normalizeHostname=function(y){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!y)),this},s.normalizePort=function(y){return typeof this._parts.protocol=="string"&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!y)),this},s.normalizePath=function(y){var w=this._parts.path;if(!w)return this;if(this._parts.urn)return this._parts.path=r.recodeUrnPath(this._parts.path),this.build(!y),this;if(this._parts.path==="/")return this;w=r.recodePath(w);var P,B="",Y,K;for(w.charAt(0)!=="/"&&(P=!0,w="/"+w),(w.slice(-3)==="/.."||w.slice(-2)==="/.")&&(w+="/"),w=w.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),P&&(B=w.substring(1).match(/^(\.\.\/)+/)||"",B&&(B=B[0]));Y=w.search(/\/\.\.(\/|$)/),Y!==-1;){if(Y===0){w=w.substring(3);continue}K=w.substring(0,Y).lastIndexOf("/"),K===-1&&(K=Y),w=w.substring(0,K)+w.substring(Y+3)}return P&&this.is("relative")&&(w=B+w.substring(1)),this._parts.path=w,this.build(!y),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(y){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!y)),this},s.normalizeFragment=function(y){return this._parts.fragment||(this._parts.fragment=null,this.build(!y)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var y=r.encode,w=r.decode;r.encode=escape,r.decode=decodeURIComponent;try{this.normalize()}finally{r.encode=y,r.decode=w}return this},s.unicode=function(){var y=r.encode,w=r.decode;r.encode=D,r.decode=unescape;try{this.normalize()}finally{r.encode=y,r.decode=w}return this},s.readable=function(){var y=this.clone();y.username("").password("").normalize();var w="";if(y._parts.protocol&&(w+=y._parts.protocol+"://"),y._parts.hostname&&(y.is("punycode")&&e?(w+=e.toUnicode(y._parts.hostname),y._parts.port&&(w+=":"+y._parts.port)):w+=y.host()),y._parts.hostname&&y._parts.path&&y._parts.path.charAt(0)!=="/"&&(w+="/"),w+=y.path(!0),y._parts.query){for(var P="",B=0,Y=y._parts.query.split("&"),K=Y.length;B<K;B++){var U=(Y[B]||"").split("=");P+="&"+r.decodeQuery(U[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),U[1]!==void 0&&(P+="="+r.decodeQuery(U[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}w+="?"+P.substring(1)}return w+=r.decodeQuery(y.hash(),!0),w},s.absoluteTo=function(y){var w=this.clone(),P=["protocol","username","password","hostname","port"],B,Y,K;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(y instanceof r||(y=new r(y)),w._parts.protocol||(w._parts.protocol=y._parts.protocol,this._parts.hostname))return w;for(Y=0;K=P[Y];Y++)w._parts[K]=y._parts[K];return w._parts.path?(w._parts.path.substring(-2)===".."&&(w._parts.path+="/"),w.path().charAt(0)!=="/"&&(B=y.directory(),B=B||(y.path().indexOf("/")===0?"/":""),w._parts.path=(B?B+"/":"")+w._parts.path,w.normalizePath())):(w._parts.path=y._parts.path,w._parts.query||(w._parts.query=y._parts.query)),w.build(),w},s.relativeTo=function(y){var w=this.clone().normalize(),P,B,Y,K,U;if(w._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(y=new r(y).normalize(),P=w._parts,B=y._parts,K=w.path(),U=y.path(),K.charAt(0)!=="/")throw new Error("URI is already relative");if(U.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(P.protocol===B.protocol&&(P.protocol=null),P.username!==B.username||P.password!==B.password||P.protocol!==null||P.username!==null||P.password!==null)return w.build();if(P.hostname===B.hostname&&P.port===B.port)P.hostname=null,P.port=null;else return w.build();if(K===U)return P.path="",w.build();if(Y=r.commonPath(K,U),!Y)return w.build();var re=B.path.substring(Y.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return P.path=re+P.path.substring(Y.length)||"./",w.build()},s.equals=function(y){var w=this.clone(),P=new r(y),B={},Y={},K={},U,re,ye;if(w.normalize(),P.normalize(),w.toString()===P.toString())return!0;if(U=w.query(),re=P.query(),w.query(""),P.query(""),w.toString()!==P.toString()||U.length!==re.length)return!1;B=r.parseQuery(U,this._parts.escapeQuerySpace),Y=r.parseQuery(re,this._parts.escapeQuerySpace);for(ye in B)if(u.call(B,ye)){if(f(B[ye])){if(!x(B[ye],Y[ye]))return!1}else if(B[ye]!==Y[ye])return!1;K[ye]=!0}for(ye in Y)if(u.call(Y,ye)&&!K[ye])return!1;return!0},s.preventInvalidHostname=function(y){return this._parts.preventInvalidHostname=!!y,this},s.duplicateQueryParameters=function(y){return this._parts.duplicateQueryParameters=!!y,this},s.escapeQuerySpace=function(y){return this._parts.escapeQuerySpace=!!y,this},r})});var D2={};FC(D2,{DahuaWSPlayer:()=>Vr,DahuaWSPlayerManager:()=>Oc,EV_Editor:()=>Hu,EV_ProjectionPlane:()=>Do,EV_VideoFusion:()=>Mo,EV_VideoFusionEditor:()=>qE,EV_VideoLayer:()=>ps,EV_VideoProjection:()=>oo,EV_VideoProjectionFS:()=>Dc,EV_VideoProjectionManager:()=>Mc,EV_VideoProjectionPlane:()=>Ic,EV_VideoSynchronizerEx:()=>E_,EV_WSPlayer:()=>zi,VideoFusionMixin:()=>C_});module.exports=UC(D2);function Qs(e){this.mediaplayer=e.mediaplayer,this.server=e.server,this.deviceIp=e.deviceIp,this.playerManager=e.playerManager,this.playerControl=void 0,this.streamType="2",this.videoCanvas=document.createElement("canvas"),this.videoCanvas.id=this.mediaplayer.id+"_canvasID",this.videoCanvas.width=800,this.videoCanvas.height=600,this.socketConnect=!1,this._playerControlState=0}Qs.prototype.play=function(){var e=this;if(this.socketConnect=!0,this.playerControl)e.socketConnect=!0,this.playerManager.reConnect(this.deviceIp,this.mediaplayer,this.videoCanvas,this.streamType,function(t){e.playerControl=t}),console.log("play "+this.deviceIp);else{if(this._playerControlState>0)return;this._playerControlState=1,this.playerManager.createPlayerControl(this.deviceIp,this.mediaplayer,this.videoCanvas,this.streamType,function(n){e.playerControl=n,e._playerControlState=2})||(this._playerControlState=0,this.socketConnect=!1)}};Qs.prototype.stop=function(){if(this.playerControl){this.playerControl.stop();let e=this.playerControl.nPlayPort;this.playerManager.portToPlayer[e]&&(this.playerManager.portToPlayer[e]=void 0),this.socketConnect=!1,console.log("stop "+this.deviceIp)}};Qs.prototype.updateVideo=function(){};var Vr=Qs;function Fa(e,t){return function(){return e.apply(t,arguments)}}var{toString:kC}=Object.prototype,{getPrototypeOf:gl}=Object,tc=(e=>t=>{let n=kC.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Mi=e=>(e=e.toLowerCase(),t=>tc(t)===e),nc=e=>t=>typeof t===e,{isArray:jr}=Array,Ua=nc("undefined");function VC(e){return e!==null&&!Ua(e)&&e.constructor!==null&&!Ua(e.constructor)&&ni(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var Jf=Mi("ArrayBuffer");function jC(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Jf(e.buffer),t}var GC=nc("string"),ni=nc("function"),Xf=nc("number"),ic=e=>e!==null&&typeof e=="object",HC=e=>e===!0||e===!1,ec=e=>{if(tc(e)!=="object")return!1;let t=gl(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},qC=Mi("Date"),WC=Mi("File"),KC=Mi("Blob"),YC=Mi("FileList"),ZC=e=>ic(e)&&ni(e.pipe),JC=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ni(e.append)&&((t=tc(e))==="formdata"||t==="object"&&ni(e.toString)&&e.toString()==="[object FormData]"))},XC=Mi("URLSearchParams"),$C=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ka(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,o;if(typeof e!="object"&&(e=[e]),jr(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{let r=n?Object.getOwnPropertyNames(e):Object.keys(e),a=r.length,s;for(i=0;i<a;i++)s=r[i],t.call(null,e[s],s,e)}}function $f(e,t){t=t.toLowerCase();let n=Object.keys(e),i=n.length,o;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}var Qf=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),em=e=>!Ua(e)&&e!==Qf;function hl(){let{caseless:e}=em(this)&&this||{},t={},n=(i,o)=>{let r=e&&$f(t,o)||o;ec(t[r])&&ec(i)?t[r]=hl(t[r],i):ec(i)?t[r]=hl({},i):jr(i)?t[r]=i.slice():t[r]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&ka(arguments[i],n);return t}var QC=(e,t,n,{allOwnKeys:i}={})=>(ka(t,(o,r)=>{n&&ni(o)?e[r]=Fa(o,n):e[r]=o},{allOwnKeys:i}),e),e1=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),t1=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},n1=(e,t,n,i)=>{let o,r,a,s={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),r=o.length;r-- >0;)a=o[r],(!i||i(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=n!==!1&&gl(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},i1=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;let i=e.indexOf(t,n);return i!==-1&&i===n},o1=e=>{if(!e)return null;if(jr(e))return e;let t=e.length;if(!Xf(t))return null;let n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},r1=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&gl(Uint8Array)),a1=(e,t)=>{let i=(e&&e[Symbol.iterator]).call(e),o;for(;(o=i.next())&&!o.done;){let r=o.value;t.call(e,r[0],r[1])}},s1=(e,t)=>{let n,i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},c1=Mi("HTMLFormElement"),u1=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),Yf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),l1=Mi("RegExp"),tm=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e),i={};ka(n,(o,r)=>{t(o,r,e)!==!1&&(i[r]=o)}),Object.defineProperties(e,i)},p1=e=>{tm(e,(t,n)=>{if(ni(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;let i=e[n];if(ni(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},d1=(e,t)=>{let n={},i=o=>{o.forEach(r=>{n[r]=!0})};return jr(e)?i(e):i(String(e).split(t)),n},f1=()=>{},m1=(e,t)=>(e=+e,Number.isFinite(e)?e:t),ml="abcdefghijklmnopqrstuvwxyz",Zf="0123456789",nm={DIGIT:Zf,ALPHA:ml,ALPHA_DIGIT:ml+ml.toUpperCase()+Zf},h1=(e=16,t=nm.ALPHA_DIGIT)=>{let n="",{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function g1(e){return!!(e&&ni(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}var _1=e=>{let t=new Array(10),n=(i,o)=>{if(ic(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[o]=i;let r=jr(i)?[]:{};return ka(i,(a,s)=>{let u=n(a,o+1);!Ua(u)&&(r[s]=u)}),t[o]=void 0,r}}return i};return n(e,0)},y1=Mi("AsyncFunction"),v1=e=>e&&(ic(e)||ni(e))&&ni(e.then)&&ni(e.catch),X={isArray:jr,isArrayBuffer:Jf,isBuffer:VC,isFormData:JC,isArrayBufferView:jC,isString:GC,isNumber:Xf,isBoolean:HC,isObject:ic,isPlainObject:ec,isUndefined:Ua,isDate:qC,isFile:WC,isBlob:KC,isRegExp:l1,isFunction:ni,isStream:ZC,isURLSearchParams:XC,isTypedArray:r1,isFileList:YC,forEach:ka,merge:hl,extend:QC,trim:$C,stripBOM:e1,inherits:t1,toFlatObject:n1,kindOf:tc,kindOfTest:Mi,endsWith:i1,toArray:o1,forEachEntry:a1,matchAll:s1,isHTMLForm:c1,hasOwnProperty:Yf,hasOwnProp:Yf,reduceDescriptors:tm,freezeMethods:p1,toObjectSet:d1,toCamelCase:u1,noop:f1,toFiniteNumber:m1,findKey:$f,global:Qf,isContextDefined:em,ALPHABET:nm,generateString:h1,isSpecCompliantForm:g1,toJSONObject:_1,isAsyncFn:y1,isThenable:v1};function Gr(e,t,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o)}X.inherits(Gr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var im=Gr.prototype,om={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{om[e]={value:e}});Object.defineProperties(Gr,om);Object.defineProperty(im,"isAxiosError",{value:!0});Gr.from=(e,t,n,i,o,r)=>{let a=Object.create(im);return X.toFlatObject(e,a,function(u){return u!==Error.prototype},s=>s!=="isAxiosError"),Gr.call(a,e.message,t,n,i,o),a.cause=e,a.name=e.name,r&&Object.assign(a,r),a};var Pe=Gr;var km=Ct(Um(),1),ac=km.default;function Al(e){return X.isPlainObject(e)||X.isArray(e)}function jm(e){return X.endsWith(e,"[]")?e.slice(0,-2):e}function Vm(e,t,n){return e?e.concat(t).map(function(o,r){return o=jm(o),!n&&r?"["+o+"]":o}).join(n?".":""):t}function nT(e){return X.isArray(e)&&!e.some(Al)}var iT=X.toFlatObject(X,{},null,function(t){return/^is[A-Z]/.test(t)});function oT(e,t,n){if(!X.isObject(e))throw new TypeError("target must be an object");t=t||new(ac||FormData),n=X.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,R){return!X.isUndefined(R[T])});let i=n.metaTokens,o=n.visitor||d,r=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(t);if(!X.isFunction(o))throw new TypeError("visitor must be a function");function l(x){if(x===null)return"";if(X.isDate(x))return x.toISOString();if(!u&&X.isBlob(x))throw new Pe("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(x)||X.isTypedArray(x)?u&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,T,R){let D=x;if(x&&!R&&typeof x=="object"){if(X.endsWith(T,"{}"))T=i?T:T.slice(0,-2),x=JSON.stringify(x);else if(X.isArray(x)&&nT(x)||(X.isFileList(x)||X.endsWith(T,"[]"))&&(D=X.toArray(x)))return T=jm(T),D.forEach(function(N,V){!(X.isUndefined(N)||N===null)&&t.append(a===!0?Vm([T],V,r):a===null?T:T+"[]",l(N))}),!1}return Al(x)?!0:(t.append(Vm(R,T,r),l(x)),!1)}let f=[],g=Object.assign(iT,{defaultVisitor:d,convertValue:l,isVisitable:Al});function b(x,T){if(!X.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+T.join("."));f.push(x),X.forEach(x,function(D,M){(!(X.isUndefined(D)||D===null)&&o.call(t,D,X.isString(M)?M.trim():M,T,g))===!0&&b(D,T?T.concat(M):[M])}),f.pop()}}if(!X.isObject(e))throw new TypeError("data must be an object");return b(e),t}var To=oT;function Gm(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Hm(e,t){this._pairs=[],e&&To(e,this,t)}var qm=Hm.prototype;qm.append=function(t,n){this._pairs.push([t,n])};qm.toString=function(t){let n=t?function(i){return t.call(this,i,Gm)}:Gm;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};var Wm=Hm;function rT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Qo(e,t,n){if(!t)return e;let i=n&&n.encode||rT,o=n&&n.serialize,r;if(o?r=o(t,n):r=X.isURLSearchParams(t)?t.toString():new Wm(t,n).toString(i),r){let a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}var Rl=class{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){X.forEach(this.handlers,function(i){i!==null&&t(i)})}},Ol=Rl;var Hr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var Km=Ct(require("url"),1),Ym=Km.default.URLSearchParams;var Wt={isNode:!0,classes:{URLSearchParams:Ym,FormData:ac,Blob:typeof Blob<"u"&&Blob||null},protocols:["http","https","file","data"]};function Il(e,t){return To(e,new Wt.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,r){return Wt.isNode&&X.isBuffer(n)?(this.append(i,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function aT(e){return X.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function sT(e){let t={},n=Object.keys(e),i,o=n.length,r;for(i=0;i<o;i++)r=n[i],t[r]=e[r];return t}function cT(e){function t(n,i,o,r){let a=n[r++],s=Number.isFinite(+a),u=r>=n.length;return a=!a&&X.isArray(o)?o.length:a,u?(X.hasOwnProp(o,a)?o[a]=[o[a],i]:o[a]=i,!s):((!o[a]||!X.isObject(o[a]))&&(o[a]=[]),t(n,i,o[a],r)&&X.isArray(o[a])&&(o[a]=sT(o[a])),!s)}if(X.isFormData(e)&&X.isFunction(e.entries)){let n={};return X.forEachEntry(e,(i,o)=>{t(aT(i),o,n,0)}),n}return null}var sc=cT;var uT={"Content-Type":void 0};function lT(e,t,n){if(X.isString(e))try{return(t||JSON.parse)(e),X.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}var cc={transitional:Hr,adapter:["xhr","http"],transformRequest:[function(t,n){let i=n.getContentType()||"",o=i.indexOf("application/json")>-1,r=X.isObject(t);if(r&&X.isHTMLForm(t)&&(t=new FormData(t)),X.isFormData(t))return o&&o?JSON.stringify(sc(t)):t;if(X.isArrayBuffer(t)||X.isBuffer(t)||X.isStream(t)||X.isFile(t)||X.isBlob(t))return t;if(X.isArrayBufferView(t))return t.buffer;if(X.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Il(t,this.formSerializer).toString();if((s=X.isFileList(t))||i.indexOf("multipart/form-data")>-1){let u=this.env&&this.env.FormData;return To(s?{"files[]":t}:t,u&&new u,this.formSerializer)}}return r||o?(n.setContentType("application/json",!1),lT(t)):t}],transformResponse:[function(t){let n=this.transitional||cc.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(t&&X.isString(t)&&(i&&!this.responseType||o)){let a=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?Pe.from(s,Pe.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wt.classes.FormData,Blob:Wt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};X.forEach(["delete","get","head"],function(t){cc.headers[t]={}});X.forEach(["post","put","patch"],function(t){cc.headers[t]=X.merge(uT)});var qr=cc;var pT=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Zm=e=>{let t={},n,i,o;return e&&e.split(`
`).forEach(function(a){o=a.indexOf(":"),n=a.substring(0,o).trim().toLowerCase(),i=a.substring(o+1).trim(),!(!n||t[n]&&pT[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t};var Jm=Symbol("internals");function Va(e){return e&&String(e).trim().toLowerCase()}function uc(e){return e===!1||e==null?e:X.isArray(e)?e.map(uc):String(e)}function dT(e){let t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}var fT=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Pl(e,t,n,i,o){if(X.isFunction(i))return i.call(this,t,n);if(o&&(t=n),!!X.isString(t)){if(X.isString(i))return t.indexOf(i)!==-1;if(X.isRegExp(i))return i.test(t)}}function mT(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function hT(e,t){let n=X.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(o,r,a){return this[i].call(this,t,o,r,a)},configurable:!0})})}var Wr=class{constructor(t){t&&this.set(t)}set(t,n,i){let o=this;function r(s,u,l){let d=Va(u);if(!d)throw new Error("header name must be a non-empty string");let f=X.findKey(o,d);(!f||o[f]===void 0||l===!0||l===void 0&&o[f]!==!1)&&(o[f||u]=uc(s))}let a=(s,u)=>X.forEach(s,(l,d)=>r(l,d,u));return X.isPlainObject(t)||t instanceof this.constructor?a(t,n):X.isString(t)&&(t=t.trim())&&!fT(t)?a(Zm(t),n):t!=null&&r(n,t,i),this}get(t,n){if(t=Va(t),t){let i=X.findKey(this,t);if(i){let o=this[i];if(!n)return o;if(n===!0)return dT(o);if(X.isFunction(n))return n.call(this,o,i);if(X.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Va(t),t){let i=X.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||Pl(this,this[i],i,n)))}return!1}delete(t,n){let i=this,o=!1;function r(a){if(a=Va(a),a){let s=X.findKey(i,a);s&&(!n||Pl(i,i[s],s,n))&&(delete i[s],o=!0)}}return X.isArray(t)?t.forEach(r):r(t),o}clear(t){let n=Object.keys(this),i=n.length,o=!1;for(;i--;){let r=n[i];(!t||Pl(this,this[r],r,t,!0))&&(delete this[r],o=!0)}return o}normalize(t){let n=this,i={};return X.forEach(this,(o,r)=>{let a=X.findKey(i,r);if(a){n[a]=uc(o),delete n[r];return}let s=t?mT(r):String(r).trim();s!==r&&delete n[r],n[s]=uc(o),i[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let n=Object.create(null);return X.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=t&&X.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){let i=new this(t);return n.forEach(o=>i.set(o)),i}static accessor(t){let i=(this[Jm]=this[Jm]={accessors:{}}).accessors,o=this.prototype;function r(a){let s=Va(a);i[s]||(hT(o,a),i[s]=!0)}return X.isArray(t)?t.forEach(r):r(t),this}};Wr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.freezeMethods(Wr.prototype);X.freezeMethods(Wr);var $t=Wr;function ja(e,t){let n=this||qr,i=t||n,o=$t.from(i.headers),r=i.data;return X.forEach(e,function(s){r=s.call(n,r,o.normalize(),t?t.status:void 0)}),o.normalize(),r}function Ga(e){return!!(e&&e.__CANCEL__)}function Xm(e,t,n){Pe.call(this,e??"canceled",Pe.ERR_CANCELED,t,n),this.name="CanceledError"}X.inherits(Xm,Pe,{__CANCEL__:!0});var gi=Xm;function wo(e,t,n){let i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new Pe("Request failed with status code "+n.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Dl(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ml(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function er(e,t){return e&&!Dl(t)?Ml(e,t):t}var Mh=Ct(Qm(),1),Nh=Ct(require("http"),1),Lh=Ct(require("https"),1),zh=Ct(require("util"),1),Bh=Ct(bh(),1),eo=Ct(require("zlib"),1);var ir="1.4.0";function $a(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}var XT=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function Gl(e,t,n){let i=n&&n.Blob||Wt.classes.Blob,o=$a(e);if(t===void 0&&i&&(t=!0),o==="data"){e=o.length?e.slice(o.length+1):e;let r=XT.exec(e);if(!r)throw new Pe("Invalid URL",Pe.ERR_INVALID_URL);let a=r[1],s=r[2],u=r[3],l=Buffer.from(decodeURIComponent(u),s?"base64":"utf8");if(t){if(!i)throw new Pe("Blob is not supported",Pe.ERR_NOT_SUPPORT);return new i([l],{type:a})}return l}throw new Pe("Unsupported protocol "+o,Pe.ERR_NOT_SUPPORT)}var or=Ct(require("stream"),1);var Eh=Ct(require("stream"),1);function $T(e,t){let n=0,i=1e3/t,o=null;return function(a,s){let u=Date.now();if(a||u-n>i)return o&&(clearTimeout(o),o=null),n=u,e.apply(null,s);o||(o=setTimeout(()=>(o=null,n=Date.now(),e.apply(null,s)),i-(u-n)))}}var xh=$T;function QT(e,t){e=e||10;let n=new Array(e),i=new Array(e),o=0,r=0,a;return t=t!==void 0?t:1e3,function(u){let l=Date.now(),d=i[r];a||(a=l),n[o]=u,i[o]=l;let f=r,g=0;for(;f!==o;)g+=n[f++],f=f%e;if(o=(o+1)%e,o===r&&(r=(r+1)%e),l-a<t)return;let b=d&&l-d;return b?Math.round(g*1e3/b):void 0}}var pc=QT;var dc=Symbol("internals"),Hl=class extends Eh.default.Transform{constructor(t){t=X.toFlatObject(t,{maxRate:0,chunkSize:64*1024,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,(s,u)=>!X.isUndefined(u[s])),super({readableHighWaterMark:t.chunkSize});let n=this,i=this[dc]={length:t.length,timeWindow:t.timeWindow,ticksRate:t.ticksRate,chunkSize:t.chunkSize,maxRate:t.maxRate,minChunkSize:t.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null},o=pc(i.ticksRate*t.samplesCount,i.timeWindow);this.on("newListener",s=>{s==="progress"&&(i.isCaptured||(i.isCaptured=!0))});let r=0;i.updateProgress=xh(function(){let u=i.length,l=i.bytesSeen,d=l-r;if(!d||n.destroyed)return;let f=o(d);r=l,process.nextTick(()=>{n.emit("progress",{loaded:l,total:u,progress:u?l/u:void 0,bytes:d,rate:f||void 0,estimated:f&&u&&l<=u?(u-l)/f:void 0})})},i.ticksRate);let a=()=>{i.updateProgress(!0)};this.once("end",a),this.once("error",a)}_read(t){let n=this[dc];return n.onReadCallback&&n.onReadCallback(),super._read(t)}_transform(t,n,i){let o=this,r=this[dc],a=r.maxRate,s=this.readableHighWaterMark,u=r.timeWindow,l=1e3/u,d=a/l,f=r.minChunkSize!==!1?Math.max(r.minChunkSize,d*.01):0;function g(x,T){let R=Buffer.byteLength(x);r.bytesSeen+=R,r.bytes+=R,r.isCaptured&&r.updateProgress(),o.push(x)?process.nextTick(T):r.onReadCallback=()=>{r.onReadCallback=null,process.nextTick(T)}}let b=(x,T)=>{let R=Buffer.byteLength(x),D=null,M=s,N,V=0;if(a){let q=Date.now();(!r.ts||(V=q-r.ts)>=u)&&(r.ts=q,N=d-r.bytes,r.bytes=N<0?-N:0,V=0),N=d-r.bytes}if(a){if(N<=0)return setTimeout(()=>{T(null,x)},u-V);N<M&&(M=N)}M&&R>M&&R-M>f&&(D=x.subarray(M),x=x.subarray(0,M)),g(x,D?()=>{process.nextTick(T,null,D)}:T)};b(t,function x(T,R){if(T)return i(T);R?b(R,x):i(null)})}setLength(t){return this[dc].length=+t,this}},ql=Hl;var Fh=Ct(require("events"),1);var Th=require("util"),wh=require("stream");var{asyncIterator:Ch}=Symbol,ew=async function*(e){e.stream?yield*e.stream():e.arrayBuffer?yield await e.arrayBuffer():e[Ch]?yield*e[Ch]():yield e},fc=ew;var tw=X.ALPHABET.ALPHA_DIGIT+"-_",Qa=new Th.TextEncoder,So=`\r
`,nw=Qa.encode(So),iw=2,Wl=class{constructor(t,n){let{escapeName:i}=this.constructor,o=X.isString(n),r=`Content-Disposition: form-data; name="${i(t)}"${!o&&n.name?`; filename="${i(n.name)}"`:""}${So}`;o?n=Qa.encode(String(n).replace(/\r?\n|\r\n?/g,So)):r+=`Content-Type: ${n.type||"application/octet-stream"}${So}`,this.headers=Qa.encode(r+So),this.contentLength=o?n.byteLength:n.size,this.size=this.headers.byteLength+this.contentLength+iw,this.name=t,this.value=n}async*encode(){yield this.headers;let{value:t}=this;X.isTypedArray(t)?yield t:yield*fc(t),yield nw}static escapeName(t){return String(t).replace(/[\r\n"]/g,n=>({"\r":"%0D","\n":"%0A",'"':"%22"})[n])}},ow=(e,t,n)=>{let{tag:i="form-data-boundary",size:o=25,boundary:r=i+"-"+X.generateString(o,tw)}=n||{};if(!X.isFormData(e))throw TypeError("FormData instance required");if(r.length<1||r.length>70)throw Error("boundary must be 10-70 characters long");let a=Qa.encode("--"+r+So),s=Qa.encode("--"+r+"--"+So+So),u=s.byteLength,l=Array.from(e.entries()).map(([f,g])=>{let b=new Wl(f,g);return u+=b.size,b});u+=a.byteLength*l.length,u=X.toFiniteNumber(u);let d={"Content-Type":`multipart/form-data; boundary=${r}`};return Number.isFinite(u)&&(d["Content-Length"]=u),t&&t(d),wh.Readable.from(async function*(){for(let f of l)yield a,yield*f.encode();yield s}())},Sh=ow;var Ah=Ct(require("stream"),1),Kl=class extends Ah.default.Transform{__transform(t,n,i){this.push(t),i()}_transform(t,n,i){if(t.length!==0&&(this._transform=this.__transform,t[0]!==120)){let o=Buffer.alloc(2);o[0]=120,o[1]=156,this.push(o,n)}this.__transform(t,n,i)}},Rh=Kl;var rw=(e,t)=>X.isAsyncFn(e)?function(...n){let i=n.pop();e.apply(this,n).then(o=>{try{t?i(null,...t(o)):i(null,o)}catch(r){i(r)}},i)}:e,Oh=rw;var Ih={flush:eo.default.constants.Z_SYNC_FLUSH,finishFlush:eo.default.constants.Z_SYNC_FLUSH},aw={flush:eo.default.constants.BROTLI_OPERATION_FLUSH,finishFlush:eo.default.constants.BROTLI_OPERATION_FLUSH},Ph=X.isFunction(eo.default.createBrotliDecompress),{http:sw,https:cw}=Bh.default,uw=/https:?/,Dh=Wt.protocols.map(e=>e+":");function lw(e){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e)}function Uh(e,t,n){let i=t;if(!i&&i!==!1){let o=(0,Mh.getProxyForUrl)(n);o&&(i=new URL(o))}if(i){if(i.username&&(i.auth=(i.username||"")+":"+(i.password||"")),i.auth){(i.auth.username||i.auth.password)&&(i.auth=(i.auth.username||"")+":"+(i.auth.password||""));let r=Buffer.from(i.auth,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+r}e.headers.host=e.hostname+(e.port?":"+e.port:"");let o=i.hostname||i.host;e.hostname=o,e.host=o,e.port=i.port,e.path=n,i.protocol&&(e.protocol=i.protocol.includes(":")?i.protocol:`${i.protocol}:`)}e.beforeRedirects.proxy=function(r){Uh(r,t,r.href)}}var pw=typeof process<"u"&&X.kindOf(process)==="process",dw=e=>new Promise((t,n)=>{let i,o,r=(u,l)=>{o||(o=!0,i&&i(u,l))},a=u=>{r(u),t(u)},s=u=>{r(u,!0),n(u)};e(a,s,u=>i=u).catch(s)}),kh=pw&&function(t){return dw(async function(i,o,r){let{data:a,lookup:s,family:u}=t,{responseType:l,responseEncoding:d}=t,f=t.method.toUpperCase(),g,b=!1,x;s&&X.isAsyncFn(s)&&(s=Oh(s,K=>{if(X.isString(K))K=[K,K.indexOf(".")<0?6:4];else if(!X.isArray(K))throw new TypeError("lookup async function must return an array [ip: string, family: number]]");return K}));let T=new Fh.default,R=()=>{t.cancelToken&&t.cancelToken.unsubscribe(D),t.signal&&t.signal.removeEventListener("abort",D),T.removeAllListeners()};r((K,U)=>{g=!0,U&&(b=!0,R())});function D(K){T.emit("abort",!K||K.type?new gi(null,t,x):K)}T.once("abort",o),(t.cancelToken||t.signal)&&(t.cancelToken&&t.cancelToken.subscribe(D),t.signal&&(t.signal.aborted?D():t.signal.addEventListener("abort",D)));let M=er(t.baseURL,t.url),N=new URL(M,"http://localhost"),V=N.protocol||Dh[0];if(V==="data:"){let K;if(f!=="GET")return wo(i,o,{status:405,statusText:"method not allowed",headers:{},config:t});try{K=Gl(t.url,l==="blob",{Blob:t.env&&t.env.Blob})}catch(U){throw Pe.from(U,Pe.ERR_BAD_REQUEST,t)}return l==="text"?(K=K.toString(d),(!d||d==="utf8")&&(K=X.stripBOM(K))):l==="stream"&&(K=or.default.Readable.from(K)),wo(i,o,{data:K,status:200,statusText:"OK",headers:new $t,config:t})}if(Dh.indexOf(V)===-1)return o(new Pe("Unsupported protocol "+V,Pe.ERR_BAD_REQUEST,t));let q=$t.from(t.headers).normalize();q.set("User-Agent","axios/"+ir,!1);let _=t.onDownloadProgress,ee=t.onUploadProgress,Z=t.maxRate,J,H;if(X.isSpecCompliantForm(a)){let K=q.getContentType(/boundary=([-_\w\d]{10,70})/i);a=Sh(a,U=>{q.set(U)},{tag:`axios-${ir}-boundary`,boundary:K&&K[1]||void 0})}else if(X.isFormData(a)&&X.isFunction(a.getHeaders)){if(q.set(a.getHeaders()),!q.hasContentLength())try{let K=await zh.default.promisify(a.getLength).call(a);Number.isFinite(K)&&K>=0&&q.setContentLength(K)}catch{}}else if(X.isBlob(a))a.size&&q.setContentType(a.type||"application/octet-stream"),q.setContentLength(a.size||0),a=or.default.Readable.from(fc(a));else if(a&&!X.isStream(a)){if(!Buffer.isBuffer(a))if(X.isArrayBuffer(a))a=Buffer.from(new Uint8Array(a));else if(X.isString(a))a=Buffer.from(a,"utf-8");else return o(new Pe("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",Pe.ERR_BAD_REQUEST,t));if(q.setContentLength(a.length,!1),t.maxBodyLength>-1&&a.length>t.maxBodyLength)return o(new Pe("Request body larger than maxBodyLength limit",Pe.ERR_BAD_REQUEST,t))}let te=X.toFiniteNumber(q.getContentLength());X.isArray(Z)?(J=Z[0],H=Z[1]):J=H=Z,a&&(ee||J)&&(X.isStream(a)||(a=or.default.Readable.from(a,{objectMode:!1})),a=or.default.pipeline([a,new ql({length:te,maxRate:X.toFiniteNumber(J)})],X.noop),ee&&a.on("progress",K=>{ee(Object.assign(K,{upload:!0}))}));let y;if(t.auth){let K=t.auth.username||"",U=t.auth.password||"";y=K+":"+U}if(!y&&N.username){let K=N.username,U=N.password;y=K+":"+U}y&&q.delete("authorization");let w;try{w=Qo(N.pathname+N.search,t.params,t.paramsSerializer).replace(/^\?/,"")}catch(K){let U=new Error(K.message);return U.config=t,U.url=t.url,U.exists=!0,o(U)}q.set("Accept-Encoding","gzip, compress, deflate"+(Ph?", br":""),!1);let P={path:w,method:f,headers:q.toJSON(),agents:{http:t.httpAgent,https:t.httpsAgent},auth:y,protocol:V,family:u,lookup:s,beforeRedirect:lw,beforeRedirects:{}};t.socketPath?P.socketPath=t.socketPath:(P.hostname=N.hostname,P.port=N.port,Uh(P,t.proxy,V+"//"+N.hostname+(N.port?":"+N.port:"")+P.path));let B,Y=uw.test(P.protocol);if(P.agent=Y?t.httpsAgent:t.httpAgent,t.transport?B=t.transport:t.maxRedirects===0?B=Y?Lh.default:Nh.default:(t.maxRedirects&&(P.maxRedirects=t.maxRedirects),t.beforeRedirect&&(P.beforeRedirects.config=t.beforeRedirect),B=Y?cw:sw),t.maxBodyLength>-1?P.maxBodyLength=t.maxBodyLength:P.maxBodyLength=1/0,t.insecureHTTPParser&&(P.insecureHTTPParser=t.insecureHTTPParser),x=B.request(P,function(U){if(x.destroyed)return;let re=[U],ye=+U.headers["content-length"];if(_){let Ye=new ql({length:X.toFiniteNumber(ye),maxRate:X.toFiniteNumber(H)});_&&Ye.on("progress",at=>{_(Object.assign(at,{download:!0}))}),re.push(Ye)}let Oe=U,Fe=U.req||x;if(t.decompress!==!1&&U.headers["content-encoding"])switch((f==="HEAD"||U.statusCode===204)&&delete U.headers["content-encoding"],U.headers["content-encoding"]){case"gzip":case"x-gzip":case"compress":case"x-compress":re.push(eo.default.createUnzip(Ih)),delete U.headers["content-encoding"];break;case"deflate":re.push(new Rh),re.push(eo.default.createUnzip(Ih)),delete U.headers["content-encoding"];break;case"br":Ph&&(re.push(eo.default.createBrotliDecompress(aw)),delete U.headers["content-encoding"])}Oe=re.length>1?or.default.pipeline(re,X.noop):re[0];let Je=or.default.finished(Oe,()=>{Je(),R()}),He={status:U.statusCode,statusText:U.statusMessage,headers:new $t(U.headers),config:t,request:Fe};if(l==="stream")He.data=Oe,wo(i,o,He);else{let Ye=[],at=0;Oe.on("data",function(qe){Ye.push(qe),at+=qe.length,t.maxContentLength>-1&&at>t.maxContentLength&&(b=!0,Oe.destroy(),o(new Pe("maxContentLength size of "+t.maxContentLength+" exceeded",Pe.ERR_BAD_RESPONSE,t,Fe)))}),Oe.on("aborted",function(){if(b)return;let qe=new Pe("maxContentLength size of "+t.maxContentLength+" exceeded",Pe.ERR_BAD_RESPONSE,t,Fe);Oe.destroy(qe),o(qe)}),Oe.on("error",function(qe){x.destroyed||o(Pe.from(qe,null,t,Fe))}),Oe.on("end",function(){try{let qe=Ye.length===1?Ye[0]:Buffer.concat(Ye);l!=="arraybuffer"&&(qe=qe.toString(d),(!d||d==="utf8")&&(qe=X.stripBOM(qe))),He.data=qe}catch(qe){o(Pe.from(qe,null,t,He.request,He))}wo(i,o,He)})}T.once("abort",Ye=>{Oe.destroyed||(Oe.emit("error",Ye),Oe.destroy())})}),T.once("abort",K=>{o(K),x.destroy(K)}),x.on("error",function(U){o(Pe.from(U,null,t,x))}),x.on("socket",function(U){U.setKeepAlive(!0,1e3*60)}),t.timeout){let K=parseInt(t.timeout,10);if(isNaN(K)){o(new Pe("error trying to parse `config.timeout` to int",Pe.ERR_BAD_OPTION_VALUE,t,x));return}x.setTimeout(K,function(){if(g)return;let re=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",ye=t.transitional||Hr;t.timeoutErrorMessage&&(re=t.timeoutErrorMessage),o(new Pe(re,ye.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,t,x)),D()})}if(X.isStream(a)){let K=!1,U=!1;a.on("end",()=>{K=!0}),a.once("error",re=>{U=!0,x.destroy(re)}),a.on("close",()=>{!K&&!U&&D(new gi("Request stream has been aborted",t,x))}),a.pipe(x)}else x.end(a)})};var Vh=Wt.isStandardBrowserEnv?function(){return{write:function(n,i,o,r,a,s){let u=[];u.push(n+"="+encodeURIComponent(i)),X.isNumber(o)&&u.push("expires="+new Date(o).toGMTString()),X.isString(r)&&u.push("path="+r),X.isString(a)&&u.push("domain="+a),s===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){let i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();var jh=Wt.isStandardBrowserEnv?function(){let t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function o(r){let a=r;return t&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(a){let s=X.isString(a)?o(a):a;return s.protocol===i.protocol&&s.host===i.host}}():function(){return function(){return!0}}();function Gh(e,t){let n=0,i=pc(50,250);return o=>{let r=o.loaded,a=o.lengthComputable?o.total:void 0,s=r-n,u=i(s),l=r<=a;n=r;let d={loaded:r,total:a,progress:a?r/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&l?(a-r)/u:void 0,event:o};d[t?"download":"upload"]=!0,e(d)}}var fw=typeof XMLHttpRequest<"u",Hh=fw&&function(e){return new Promise(function(n,i){let o=e.data,r=$t.from(e.headers).normalize(),a=e.responseType,s;function u(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}X.isFormData(o)&&(Wt.isStandardBrowserEnv||Wt.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(e.auth){let b=e.auth.username||"",x=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(b+":"+x))}let d=er(e.baseURL,e.url);l.open(e.method.toUpperCase(),Qo(d,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function f(){if(!l)return;let b=$t.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),T={data:!a||a==="text"||a==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:b,config:e,request:l};wo(function(D){n(D),u()},function(D){i(D),u()},T),l=null}if("onloadend"in l?l.onloadend=f:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(f)},l.onabort=function(){l&&(i(new Pe("Request aborted",Pe.ECONNABORTED,e,l)),l=null)},l.onerror=function(){i(new Pe("Network Error",Pe.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let x=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",T=e.transitional||Hr;e.timeoutErrorMessage&&(x=e.timeoutErrorMessage),i(new Pe(x,T.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,e,l)),l=null},Wt.isStandardBrowserEnv){let b=(e.withCredentials||jh(d))&&e.xsrfCookieName&&Vh.read(e.xsrfCookieName);b&&r.set(e.xsrfHeaderName,b)}o===void 0&&r.setContentType(null),"setRequestHeader"in l&&X.forEach(r.toJSON(),function(x,T){l.setRequestHeader(T,x)}),X.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&a!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",Gh(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Gh(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=b=>{l&&(i(!b||b.type?new gi(null,e,l):b),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));let g=$a(d);if(g&&Wt.protocols.indexOf(g)===-1){i(new Pe("Unsupported protocol "+g+":",Pe.ERR_BAD_REQUEST,e));return}l.send(o||null)})};var mc={http:kh,xhr:Hh};X.forEach(mc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var qh={getAdapter:e=>{e=X.isArray(e)?e:[e];let{length:t}=e,n,i;for(let o=0;o<t&&(n=e[o],!(i=X.isString(n)?mc[n.toLowerCase()]:n));o++);if(!i)throw i===!1?new Pe(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(X.hasOwnProp(mc,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!X.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:mc};function Yl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new gi(null,e)}function hc(e){return Yl(e),e.headers=$t.from(e.headers),e.data=ja.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),qh.getAdapter(e.adapter||qr.adapter)(e).then(function(i){return Yl(e),i.data=ja.call(e,e.transformResponse,i),i.headers=$t.from(i.headers),i},function(i){return Ga(i)||(Yl(e),i&&i.response&&(i.response.data=ja.call(e,e.transformResponse,i.response),i.response.headers=$t.from(i.response.headers))),Promise.reject(i)})}var Wh=e=>e instanceof $t?e.toJSON():e;function to(e,t){t=t||{};let n={};function i(l,d,f){return X.isPlainObject(l)&&X.isPlainObject(d)?X.merge.call({caseless:f},l,d):X.isPlainObject(d)?X.merge({},d):X.isArray(d)?d.slice():d}function o(l,d,f){if(X.isUndefined(d)){if(!X.isUndefined(l))return i(void 0,l,f)}else return i(l,d,f)}function r(l,d){if(!X.isUndefined(d))return i(void 0,d)}function a(l,d){if(X.isUndefined(d)){if(!X.isUndefined(l))return i(void 0,l)}else return i(void 0,d)}function s(l,d,f){if(f in t)return i(l,d);if(f in e)return i(void 0,l)}let u={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,d)=>o(Wh(l),Wh(d),!0)};return X.forEach(Object.keys(Object.assign({},e,t)),function(d){let f=u[d]||o,g=f(e[d],t[d],d);X.isUndefined(g)&&f!==s||(n[d]=g)}),n}var Zl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Zl[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});var Kh={};Zl.transitional=function(t,n,i){function o(r,a){return"[Axios v"+ir+"] Transitional option '"+r+"'"+a+(i?". "+i:"")}return(r,a,s)=>{if(t===!1)throw new Pe(o(a," has been removed"+(n?" in "+n:"")),Pe.ERR_DEPRECATED);return n&&!Kh[a]&&(Kh[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,a,s):!0}};function mw(e,t,n){if(typeof e!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);let i=Object.keys(e),o=i.length;for(;o-- >0;){let r=i[o],a=t[r];if(a){let s=e[r],u=s===void 0||a(s,r,e);if(u!==!0)throw new Pe("option "+r+" must be "+u,Pe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Pe("Unknown option "+r,Pe.ERR_BAD_OPTION)}}var gc={assertOptions:mw,validators:Zl};var Ao=gc.validators,Zr=class{constructor(t){this.defaults=t,this.interceptors={request:new Ol,response:new Ol}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=to(this.defaults,n);let{transitional:i,paramsSerializer:o,headers:r}=n;i!==void 0&&gc.assertOptions(i,{silentJSONParsing:Ao.transitional(Ao.boolean),forcedJSONParsing:Ao.transitional(Ao.boolean),clarifyTimeoutError:Ao.transitional(Ao.boolean)},!1),o!=null&&(X.isFunction(o)?n.paramsSerializer={serialize:o}:gc.assertOptions(o,{encode:Ao.function,serialize:Ao.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a;a=r&&X.merge(r.common,r[n.method]),a&&X.forEach(["delete","get","head","post","put","patch","common"],x=>{delete r[x]}),n.headers=$t.concat(a,r);let s=[],u=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(u=u&&T.synchronous,s.unshift(T.fulfilled,T.rejected))});let l=[];this.interceptors.response.forEach(function(T){l.push(T.fulfilled,T.rejected)});let d,f=0,g;if(!u){let x=[hc.bind(this),void 0];for(x.unshift.apply(x,s),x.push.apply(x,l),g=x.length,d=Promise.resolve(n);f<g;)d=d.then(x[f++],x[f++]);return d}g=s.length;let b=n;for(f=0;f<g;){let x=s[f++],T=s[f++];try{b=x(b)}catch(R){T.call(this,R);break}}try{d=hc.call(this,b)}catch(x){return Promise.reject(x)}for(f=0,g=l.length;f<g;)d=d.then(l[f++],l[f++]);return d}getUri(t){t=to(this.defaults,t);let n=er(t.baseURL,t.url);return Qo(n,t.params,t.paramsSerializer)}};X.forEach(["delete","get","head","options"],function(t){Zr.prototype[t]=function(n,i){return this.request(to(i||{},{method:t,url:n,data:(i||{}).data}))}});X.forEach(["post","put","patch"],function(t){function n(i){return function(r,a,s){return this.request(to(s||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}Zr.prototype[t]=n(),Zr.prototype[t+"Form"]=n(!0)});var es=Zr;var ts=class{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});let i=this;this.promise.then(o=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](o);i._listeners=null}),this.promise.then=o=>{let r,a=new Promise(s=>{i.subscribe(s),r=s}).then(o);return a.cancel=function(){i.unsubscribe(r)},a},t(function(r,a,s){i.reason||(i.reason=new gi(r,a,s),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new ts(function(o){t=o}),cancel:t}}},Yh=ts;function Jl(e){return function(n){return e.apply(null,n)}}function Xl(e){return X.isObject(e)&&e.isAxiosError===!0}var $l={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($l).forEach(([e,t])=>{$l[t]=e});var Zh=$l;function Jh(e){let t=new es(e),n=Fa(es.prototype.request,t);return X.extend(n,es.prototype,t,{allOwnKeys:!0}),X.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return Jh(to(e,o))},n}var Qt=Jh(qr);Qt.Axios=es;Qt.CanceledError=gi;Qt.CancelToken=Yh;Qt.isCancel=Ga;Qt.VERSION=ir;Qt.toFormData=To;Qt.AxiosError=Pe;Qt.Cancel=Qt.CanceledError;Qt.all=function(t){return Promise.all(t)};Qt.spread=Jl;Qt.isAxiosError=Xl;Qt.mergeConfig=to;Qt.AxiosHeaders=$t;Qt.formToJSON=e=>sc(X.isHTMLForm(e)?new FormData(e):e);Qt.HttpStatusCode=Zh;Qt.default=Qt;var Jr=Qt;var{Axios:az,AxiosError:sz,CanceledError:cz,isCancel:uz,CancelToken:lz,VERSION:pz,all:dz,Cancel:fz,isAxiosError:mz,spread:hz,toFormData:gz,AxiosHeaders:_z,HttpStatusCode:yz,formToJSON:vz,mergeConfig:bz}=Jr;var Tp=Ct(c_(),1);function JS(e,t){let n=XS(),i=e.split("VERSION")[0];i.indexOf("/")===0&&(i=i.slice(1));let o=i?i.includes("/")?i.split("/")[1]?i.split("/")[1].replace(/\//g,""):i.split("/")[0].replace(/\//g,""):i.replace(/\//g,""):"",r="evo-apigw/",a=localStorage[o]?localStorage[o]:"",s="";switch(t){case 1:s=n+e;break;case 2:s=e;break;default:s=n+r+(a?e.replace("VERSION",a):e);break}return s}function XS(){let e="";return window.location.origin?e=window.location.origin+"/":e=window.location.protocol+"//"+window.location.host+"/",e}function $S(){let e=localStorage.getItem("language"),t=(navigator.language||navigato.browserLanguage).substr(0,2);return e||(t.includes("zh")?"zh-cn":t)}function QS(e,t){if(t==="match"){let o=["%","_","<",">","(",")",'"',"&"," "];return["\\%","\\_","&lt;","&gt;","&#40;","&#41;","&quot;","&amp;","&nbsp;"].forEach((a,s)=>{e=e.replace(a,o[s])}),e}let n=document.createElement("div");n.innerHTML=e;let i=n.innerText||n.textContent;return n=null,i}function Cp(e){if(typeof e=="string")return QS(e,"match");if(typeof e=="object"&&!(e instanceof Array)&&e!==null){let t={};for(let[n,i]of Object.entries(e))t[n]=Cp(i);return t}else if(typeof e=="object"&&e instanceof Array)return e.map(t=>Cp(t));return e}async function eA(e){return e.url?(e.data=e.data||{},await wp(e)):Promise.reject("\u53C2\u6570url\u4E0D\u80FD\u4E3A\u7A7A\u3002")}function wp(e){let t=JS(e.url,e.urlType),n=$S();return n.includes("en")?n="en-US":n.includes("zh")&&(n="zh-CN"),localStorage.clientType||(localStorage.clientType=1),new Promise((i,o)=>{e.method=e.method.toLocaleLowerCase();let r={url:t,method:e.method,timeout:typeof e.timeout=="number"?e.timeout:3e4,responseType:e.responseType||"json",headers:{"user-client":localStorage.clientType,"Accept-Language":n,"Content-Type":e.contentType||(e.isFormSubmit?"application/x-www-form-urlencoded":"application/json;charset=utf-8"),Authorization:e.checkToken!==!1&&localStorage.getItem("accessToken")?"bearer "+localStorage.getItem("accessToken"):"",timeOffset:new Date().getTimezoneOffset()*60*1e3,proxyIp:localStorage.proxyIp,...e.headers},onUploadProgress:e.onUploadProgress,...e.options};e.method==="get"?r.params=e.data:r.data=e.data,r.headers["Content-Type"].toLocaleLowerCase().includes("application/x-www-form-urlencoded")&&(r.data=Tp.default.stringify(e.data)),Jr.interceptors.request.use(function(a){let s=[];if(a.method==="get"&&a.params){let u=Object.keys(a.params);for(let l of u){let d=a.params[l];s.push(`${l}=${encodeURIComponent([null,void 0].includes(d)?"":d)}`)}a.params={}}return a.url=a.url+(s.length?"?"+s.join("&"):""),a},function(a){return Promise.reject(a)}),Jr(r).then(a=>{if(e.returnDirectly){i(a);return}let u=(e.isParseHtml?a:Cp(a)).data||{},l=u.data||{},f=(l.args?l.args:l.value?l.value:[])[0];if(u.code==="0"||u.code===1e3||u.success){let g=u.data||"";i(g)}else if(u.code=="27001007"){let g=localStorage.getItem("refreshToken");if(g!=="undefined"&&g){!window.refreshPromise&&(window.refreshPromise=tA()),window.refreshPromise.then(()=>{wp(e).then(b=>i(b)).catch(()=>o())}).catch(b=>{o(b)}).finally(()=>{window.refreshPromise=void 0});return}if(localStorage.clientType==="2"){o();return}}else{let g=u.code?`error${u.code}`:"ajaxDisconnect",b=e.eTipStr;console.log(b),e.isENoTip||o(b),o(a)}}).catch(a=>{if(console.error(a),!e.jumpLogin&&a.response.status===401&&(localStorage.clientType==="2"||localStorage.accessToken)){console.log("/oauth/logout"),o(a);return}if(a&&a.response.status===431){o(a);return}let s=new Date().getTime(),u=a.response?.status?a.response.status:"";if(s-localStorage.errorTime<200&&!e.isENoTip){localStorage.tError="serverError",o(a);return}localStorage.errorTime=s;let l=u?`error${u}`:"ajaxDisconnect",d=e.eTipStr||"\u7F51\u7EDC\u5F02\u5E38";o(a)})})}async function tA(){let e=localStorage.getItem("refreshToken"),t=localStorage.getItem("checked")?"web_client_remember":"web_client",n={refresh_token:e,grant_type:"refresh_token",client_id:t,client_secret:"web_client"};try{let o=(await Jr({url:"/evo-apigw/evo-oauth/oauth/token",method:"post",headers:{proxyIp:localStorage.proxyIp},data:Tp.default.stringify(n)})).data;o.code==="0"&&(localStorage.setItem("accessToken",o.data.access_token),localStorage.setItem("refreshToken",o.data.refresh_token),localStorage.setItem("expiresTime",String(new Date().getTime()+o.data.expires_in*1e3)),await nA())}catch(i){return localStorage.clientType==="2"?void 0:Promise.reject(i)}}function nA(){return wp({url:"evo-brm/1.2.0/user/keepalive",method:"post",isSNoTip:!0,data:{clientType:1,magicId:localStorage.magicId,timeout:1e4}})}var ss=eA;var h_=Ct(u_(),1);var Vz=Ct(p_(),1),ii={getRealmonitor(e){return new Promise((t,n)=>{ii.ajaxRequest({url:"/evo-apigw/admin/API/MTS/Video/StartVideo",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},getTalkRtsp(e){return new Promise((t,n)=>{ii.ajaxRequest({url:"/evo-apigw/admin/API/MTS/Audio/StartTalk",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},getRecordRtspByTime(e){return new Promise((t,n)=>{ii.ajaxRequest({url:"/evo-apigw/admin/API/SS/Playback/StartPlaybackByTime",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},getRecordRtspByFile(e){return new Promise((t,n)=>{ii.ajaxRequest({url:"/evo-apigw/admin/API/SS/Playback/StartPlaybackByFile",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},getRecords(e){return new Promise((t,n)=>{ii.ajaxRequest({url:"/evo-apigw/admin/API/SS/Record/QueryRecords",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},setPtzDirection(e){return new Promise((t,n)=>{ii.ajaxRequest({url:"/evo-apigw/admin/API/DMS/Ptz/OperateDirect",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},setPtzCamera(e){return new Promise((t,n)=>{ii.ajaxRequest({url:"/evo-apigw/admin/API/DMS/Ptz/OperateCamera",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},controlSitPosition(e){return new Promise((t,n)=>{ii.ajaxRequest({url:"/evo-apigw/admin/API/DMS/Ptz/SitPosition",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},ajaxRequest(e){var t=localStorage.getItem("accessToken"),n=t.split(":")[0];return e.headers=e.headers?e.headers:{},new Promise((i,o)=>{window.$.ajax({url:e.url,type:e.type?e.type:"post",dataType:e.dataType?e.dataType:"json",data:JSON.stringify(e.data),headers:Object.assign({Authorization:"bearer "+t,"User-Id":n,"Content-Type":"application/json",proxyip:localStorage.proxyIp},e.headers),contentType:"application/json;charset=utf-8",crossDomain:!0,success:function(r){r.code==1e3||r.code=="0"?i(r):r.code=="27001007"?ii.refreshToken().then(()=>{ii.ajaxRequest(e).then(a=>{i(a)})}):o(r)}})})},refreshToken(){var e=localStorage.getItem("refreshToken"),t=localStorage.getItem("checked")?"web_client_remember":"web_client",n={refresh_token:e,grant_type:"refresh_token",client_id:t,client_secret:"web_client"},i="";for(var o in n)i+="&"+o+"="+n[o];return i=i.slice(1),new Promise((r,a)=>{window.$.ajax({url:"/evo-apigw/evo-oauth/oauth/token",type:"post",dataType:"json",data:i,headers:{"content-type":"application/x-www-form-urlencoded",proxyip:localStorage.proxyIp},success:function(s){console.log(s),s.code==="0"?(localStorage.setItem("accessToken",s.data.access_token),localStorage.setItem("refreshToken",s.data.refresh_token),localStorage.setItem("expiresTime",new Date().getTime()+s.data.expires_in*1e3),ii.ajaxRequest({url:"/evo-apigw/evo-brm/1.2.0/user/keepalive",data:{clientType:1,magicId:localStorage.magicId,timeout:1e4}}),r()):(console.error("refreshToken \u5931\u6548\uFF0C\u8BF7\u767B\u5F55\u5E73\u53F0"),window.open(location.origin),a())}})})}},Sp=ii;var iA={num:1,maxNum:25,showControl:!0,showRecordProgressBar:!0,isDynamicLoadLib:!0,onlyLoadSingleLib:!1,useNginxProxy:!1,openIvs:!1,useH264MSE:!0,useH265MSE:!0,showIcons:{streamChangeSelect:!0,talkIcon:!0,localRecordIcon:!0,audioIcon:!0,snapshotIcon:!0,closeIcon:!0},downloadMp4Record:!0,localRecordSize:100,playCenterRecordByTime:!1},us={websocketPorts:{realmonitor:"realmonitor-websocket",playback:"playback-websocket",realmonitor_ws:"9100",playback_ws:"9320"},errorVideoInfo:{101:"\u64AD\u653E\u5EF6\u65F6\u5927\u4E8E8s",201:"\u5F53\u524D\u97F3\u9891\u65E0\u6CD5\u64AD\u653E",202:"websocket\u8FDE\u63A5\u9519\u8BEF",203:"\u6587\u4EF6\u64AD\u653E\u5B8C\u6210",401:"\u8BE5\u7528\u6237\u65E0\u64CD\u4F5C\u6743\u9650",404:"\u8BF7\u6C42\u8D85\u65F6\u6216\u672A\u627E\u5230",405:"\u64AD\u653E\u8D85\u65F6",406:"\u89C6\u9891\u6D41\u7C7B\u578B\u89E3\u6790\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u901A\u9053\u914D\u7F6E",407:"\u8BF7\u6C42\u8D85\u65F6",457:"\u65F6\u95F4\u8BBE\u7F6E\u9519\u8BEF",503:"SETUP\u670D\u52A1\u4E0D\u53EF\u7528",504:"\u5BF9\u8BB2\u5931\u8D25",701:"Chrome\u7248\u672C\u4F4E\uFF0C\u8BF7\u5347\u7EA7\u5230\u6700\u65B0\u7684Chrome\u7248\u672C",702:"Firefox\u7248\u672C\u4F4E\uFF0C\u8BF7\u5347\u7EA7\u5230\u6700\u65B0\u7684Firefox\u7248\u672C",703:"Edge\u7248\u672C\u4F4E\uFF0C\u8BF7\u5347\u7EA7\u5230\u6700\u65B0\u7684Edge\u7248\u672C",defaultErrorMsg:"\u64AD\u653E\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u914D\u7F6E"},errorInfo:{101:"\u6240\u9009\u901A\u9053\u79BB\u7EBF\uFF0C\u65E0\u6CD5\u64AD\u653E",102:"\u67E5\u8BE2\u5B9E\u65F6\u9884\u89C8rtsp\u5931\u8D25",201:"\u6240\u9009\u901A\u9053\u672A\u67E5\u8BE2\u5230\u5F55\u50CF\u6587\u4EF6",202:"\u67E5\u8BE2\u5F55\u50CF\u6587\u4EF6\u5217\u8868\u5931\u8D25",203:"\u67E5\u8BE2\u5F55\u50CFrtsp\u5931\u8D25",204:"$0\u500D\u901F\u65E0\u6CD5\u64AD\u653E\u97F3\u9891",301:"\u6B63\u5728\u5BF9\u8BB2\uFF0C\u65E0\u6CD5\u6253\u5F00\u97F3\u9891",302:"\u5176\u4ED6\u8BBE\u5907\u5BF9\u8BB2\u4E2D\uFF0C\u65E0\u6CD5\u5F00\u542F\u97F3\u9891",303:"\u5176\u4ED6\u8BBE\u5907\u5BF9\u8BB2\u4E2D\uFF0C\u65E0\u6CD5\u5F00\u542F\u5BF9\u8BB2",304:"\u67E5\u8BE2\u5BF9\u8BB2rtsp\u5931\u8D25",305:"http\u534F\u8BAE\u4E0D\u652F\u6301\u5BF9\u8BB2",501:"\u89E3\u7801\u5E93\u672A\u521D\u59CB\u5316\u5B8C\u6210\uFF0C\u8BF7\u7A0D\u540E\u64AD\u653E\uFF01",502:"\u89E3\u7801\u5E93\u672A\u521D\u59CB\u5316\u5B8C\u6210\uFF0C\u8BF7\u7A0D\u540E\u5BF9\u8BB2\uFF01",503:"\u8BF7\u68C0\u67E5\u521B\u5EFA\u64AD\u653E\u5668\u65F6\uFF0C\u64AD\u653E\u5668\u5BB9\u5668\u662F\u5426\u5B58\u5728",601:"\u6240\u64CD\u4F5C\u64AD\u653E\u5668\u4E0D\u5B58\u5728",602:"\u6240\u9009\u64AD\u653E\u5668\u6B63\u5728\u672C\u5730\u5F55\u50CF\u4E2D\uFF0C\u4E0D\u53EF\u91CD\u590D\u672C\u5730\u5F55\u50CF",603:"\u6240\u9009\u64AD\u653E\u5668\u672A\u64AD\u653E\u5F55\u50CF\uFF0C\u4E0D\u53EF\u672C\u5730\u5F55\u50CF",604:"\u6240\u9009\u64AD\u653E\u5668\u672A\u5F00\u59CB\u672C\u5730\u5F55\u50CF\uFF0C\u4E0D\u53EF\u64CD\u4F5C\u5173\u95ED\u672C\u5730\u5F55\u50CF",605:"\u65F6\u95F4\u8DF3\u8F6C\u64AD\u653E\u4F20\u53C2\u9519\u8BEF",606:"\u8BBE\u7F6E\u81EA\u9002\u5E94\u62C9\u4F38\u4F20\u53C2\u9519\u8BEF",607:"\u5B9E\u65F6\u9884\u89C8\u4E0D\u652F\u6301\u500D\u901F\u64AD\u653E",608:"\u9700\u4F20\u5165\u6B63\u786E\u7684$0\u65B9\u6CD5\uFF1A$1"}},cs={clientType:"WINPC",clientMac:"30:9c:23:79:40:08",clientPushId:"",project:"PSDK",method:"MTS.Video.StartVideo",data:{optional:"/admin/API/MTS/Video/StartVideo",dataType:"3",streamType:"2",channelId:"",trackId:""}};function Po(e){this.server=e.server,this.config=window.videoConfig?window.videoConfig:iA;let t=this.server.split("//");this.serverIp=t[1],this.protocol=t[0],this.cameraDevices={},this.type="real",this.playerControls={},this.portToPlayer={},window.cPlusVisibleDecCallBack=this.cPlusVisibleDecCallBack.bind(this),window.cExtraDrawDataCallBack=this.cExtraDrawDataCallBack.bind(this),window.cExtraDrawDrawCallBack=this.cExtraDrawDrawCallBack.bind(this),window.cRecordDataCallBack=this.cRecordDataCallBack.bind(this);let n=window.dahuaUsername?window.dahuaUsername:"admin",i=window.dahuaPassword?window.dahuaPassword:"Admin123",o=this;rA().then(r=>{let a=r.publicKey,s={username:n,password:aA(a,i),code:"",grant_type:"password",client_id:"web_client",client_secret:"web_client",public_key:a,verifyCodeFlag:1};localStorage.setItem("proxyIp",o.serverIp),localStorage.setItem("UserName",s.username),ss({method:"post",contentType:"application/x-www-form-urlencoded",url:"evo-oauth/oauth/token",data:s}).then(u=>{localStorage.setItem("accessToken",u.access_token),localStorage.setItem("refreshToken",u.refresh_token),localStorage.setItem("userId",u.userId),localStorage.setItem("magicId",u.magicId),localStorage.setItem("remainderDays",u.remainderDays||""),console.log("====\u5927\u534E\u670D\u52A1\u767B\u5F55\u6210\u529F====");let l=o.protocol==="https:",d=!0;o.config.isDynamicLoadLib&&oA(l,d,o);var f={checkStat:1,showEmptyOrgNode:0,type:"001;;1"};ss({method:"post",url:"evo-brm/1.2.0/tree",data:f,isSNoTip:!0}).then(function(g){console.log(g);for(var b=0;b<g.value.length;b++)g.value[b].name!="\u6839\u8282\u70B9"&&g.value[b].deviceIp&&!o.cameraDevices[g.value[b].deviceIp]&&(o.cameraDevices[g.value[b].deviceIp]=g.value[b])}).catch(g=>{console.log(g)})}).catch(u=>{console.log(u)})}).catch(r=>{console.log(r)})}Po.prototype.createPlayerControl=function(e,t,n,i="2",o){var r=this;let a="";if(this.cameraDevices[e])a=this.cameraDevices[e].id;else return console.log("\u6CA1\u6709\u67E5\u8BE2\u5230\u5BF9\u5E94ip\u7684\u6444\u50CF\u673A\u8BBE\u5907\uFF1A"+e),!1;var s={checkStat:1,id:a,showEmptyOrgNode:0,type:"001;;1"};return ss({method:"post",url:"evo-brm/1.2.0/tree",data:s,isSNoTip:!0}).then(function(u){let l=u.value[0];r.createRealmonitor(e,l,t,n,i,o)}),!0};Po.prototype.createRealmonitor=function(e,t,n,i,o,r){let a=this;a.cameraDevices[e].channel=t,cs.data.streamType=o,cs.data.channelId=t.id,Sp.getRealmonitor(JSON.parse(JSON.stringify(cs))).then(s=>{s.rtspURL=f_(s.url)+"?token="+s.token,s.wsURL=m_(s.rtspURL,a.serverIp,a);let u=new PlayerControl({wsURL:s.wsURL,rtspURL:s.rtspURL,config:a.config,events:{PlayStart:d=>{console.log("PlayStart",d)},DecodeStart:d=>{console.log("DecodeStart",d)},GetFrameRate:d=>{console.log("GetFrameRate",d)},Error:d=>{if(u&&u.ws&&d.symbol===u.ws.symbol){if(d.errorCode==="408")return;console.log("Error: "+JSON.stringify(d))}},FileOver:d=>{console.log("FileOver: ",d)},UpdatePlayingTime:d=>{}}});u.init(i,n,void 0),u.connect();let l=u.nPlayPort;a.portToPlayer[l]||(a.portToPlayer[l]=u),a.cameraDevices[e].playerControl=u,r&&r(u)},s=>{showError?d_(102,{channelList:[t],apiErrorInfo:s}):(cs.data.streamType="1",Sp.getRealmonitor(JSON.parse(JSON.stringify(cs))).then(u=>{u.rtspURL=f_(u.url)+"?token="+u.token,u.wsURL=m_(u.rtspURL,a.serverIp,a);let l=new PlayerControl({wsURL:u.wsURL,rtspURL:u.rtspURL,config:a.config,events:{PlayStart:g=>{console.log("PlayStart",g)},DecodeStart:g=>{console.log("DecodeStart",g)},GetFrameRate:g=>{console.log("GetFrameRate",g)},Error:g=>{if(l&&l.ws&&g.symbol===l.ws.symbol){if(g.errorCode==="408")return;console.log("Error: "+JSON.stringify(g))}},FileOver:g=>{console.log("FileOver: ",g)},UpdatePlayingTime:g=>{}}}),d=document.createElement("canvas");d.id=n.id+"_canvasID",d.width=800,d.height=600,l.init(d,n,void 0),l.connect();let f=l.nPlayPort;a.portToPlayer[f]||(a.portToPlayer[f]=l),a.cameraDevices[e].playerControl=l,r&&r(l)},u=>{showError?d_(102,{channelList:[t],apiErrorInfo:u}):console.error("errorInfo: \u4E3B\u7801\u6D41\u548C\u8F85\u7801\u6D41\u64AD\u653E\u5931\u8D25")}))})};Po.prototype.reConnect=function(e,t,n,i="2",o){if(this.cameraDevices[e]){let r=this.cameraDevices[e];this.createRealmonitor(e,r.channel,t,n,i,o)}};Po.prototype.cPlusVisibleDecCallBack=function(e,t,n,i,o,r){this.portToPlayer[e]&&this.portToPlayer[e].setFrameData(e,t,n,i,o,r)};Po.prototype.cExtraDrawDataCallBack=function(e,t,n,i){this.portToPlayer[e]&&this.portToPlayer[e].setIVSData(e,t,n,i)};Po.prototype.cExtraDrawDrawCallBack=function(e){this.portToPlayer[e]&&this.portToPlayer[e].drawIVSData(e)};Po.prototype.cRecordDataCallBack=function(e,t,n,i,o){this.portToPlayer[e]&&this.portToPlayer[e].setRecordData(e,t,n,i,o)};function d_(e,t={}){let n=us.errorInfo[e];t.insert&&(t.insert.forEach((i,o)=>{n=n.replace(`$${o}`,i)}),delete t.insert),console.error("errorInfo",{errorCode:e,errorInfo:n,errorData:t})}function oA(e,t,n){if(window.loadLibDHPlayerFlag)return;window.loadLibDHPlayerFlag=!0,window.m_nModuleInitialized=!1,window.Module||(window.Module={}),Module.onRuntimeInitialized=function(){window.m_nModuleInitialized=!0};let i=setInterval(()=>{window.m_nModuleInitialized},100),o="./static/WSPlayer/multiThread/libdhplay.js";try{new SharedArrayBuffer(1)}catch{o="./static/WSPlayer/singleThread/libdhplay.js"}(!e||!t||n.config.onlyLoadSingleLib)&&(o="./static/WSPlayer/singleThread/libdhplay.js");let r=document.createElement("script");r.src=o,document.head.appendChild(r)}function f_(e){let t=e.split("|").filter(n=>!n.includes("localhost")&&!n.includes("127.0.0.1"));return t.find(n=>n.includes(window.location.hostname))||t[0]}function rA(e){return new Promise((t,n)=>{ss({method:"get",url:`evo-oauth/1.0.0/oauth/public-key?t=${new Date().getTime()}`}).then(i=>{t(i)})})}function aA(e,t){let n=new h_.default;return n.setPublicKey(e),n.encrypt(t)}function m_(e,t,n){let i=n.protocol==="https:",o=e.match(/\d{1,3}(\.\d{1,3}){3}/g)[0];o||(o=e.split("//")[1].split(":")[0]);let r=i?"wss":"ws";if(i||this.config.useNginxProxy){let s=n.type==="real"?us.websocketPorts.realmonitor:us.websocketPorts.playback;return`${r}://${t}/${s}?serverIp=${t||o}`}let a=n.type==="real"?us.websocketPorts.realmonitor_ws:us.websocketPorts.playback_ws;return`${r}://${t}:${a}`}var Oc=Po;function xn(e){this._owner=e.owner,this._leftClip=0,this._rightClip=1,this._topClipLine1=new Cesium.Cartesian4(0,1,1,1),this._topClipLine2=new Cesium.Cartesian4(0,1,1,1),this._topClipLine3=new Cesium.Cartesian4(0,1,1,1),this._topClipLine4=new Cesium.Cartesian4(0,1,1,1),this._bottomClipLine1=new Cesium.Cartesian4(0,0,1,0),this._bottomClipLine2=new Cesium.Cartesian4(0,0,1,0),this._bottomClipLine3=new Cesium.Cartesian4(0,0,1,0),this._bottomClipLine4=new Cesium.Cartesian4(0,0,1,0),this._points=[],this._originalPoints=[],this._indices=void 0,this._modelMatrix=void 0,this.boundingSphere=new Cesium.BoundingSphere,this._command=void 0,this._positionDirty=!1,this._pickId=null,e.plane&&this._parse(e.plane);let t=this;this._uniformMap={u_texture:function(){return t._owner._texture},u_hsv:function(){return t._owner.videoHsv},k1:function(){return t._owner._distortion.x},k2:function(){return t._owner._distortion.y},textureSize:function(){return t._owner._textureSize},u_alpha:function(){return t._owner._alpha*t._owner.videoAlphaRate},u_projectionCameraViewMatrix:function(){return t._owner.getProjectionCameraViewMatrix()},u_projectionCameraProjectionMatrix:function(){return t._owner.videoCamera.frustum.projectionMatrix},u_leftClip:function(){return t._leftClip},u_rightClip:function(){return t._rightClip},u_topClipLine1:function(){return t._topClipLine1},u_topClipLine2:function(){return t._topClipLine2},u_topClipLine3:function(){return t._topClipLine3},u_topClipLine4:function(){return t._topClipLine4},u_bottomClipLine1:function(){return t._bottomClipLine1},u_bottomClipLine2:function(){return t._bottomClipLine2},u_bottomClipLine3:function(){return t._bottomClipLine3},u_bottomClipLine4:function(){return t._bottomClipLine4},u_pickColor:function(){return t._pickId.color}}}xn.prototype.update=function(e){this._positionDirty&&(this._command&&this._destroyCommand(),this._createCommand(e.context),this._positionDirty=!1),e.commandList.push(this._command)};xn.prototype._parse=function(e){this._indices=e.pop();for(let t=0;t<e.length;++t){let n=e[t],i=Cesium.Cartesian3.fromDegrees(n[0],n[1],n[2]);if(this._points.push(i),n.length>3){let o=n[3];o>-1&&(this._originalPoints[o]=i)}else this._originalPoints.push(i)}this._positionDirty=!0,this._owner.boundingSphereDirty=!0};xn.prototype._createGeometry=function(e,t){let n=e.length,i=new Float64Array(n*3),o=0;for(let s=0;s<n;++s){let u=e[s];i[o++]=u.x,i[o++]=u.y,i[o++]=u.z}let r=new Uint8Array(t),a=new Cesium.GeometryAttributes;return a.position=new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:i}),new Cesium.Geometry({attributes:a,indices:r,primitiveType:Cesium.PrimitiveType.TRIANGLES,boundingSphere:Cesium.BoundingSphere.fromVertices(i)})};xn.prototype.addPoint=function(e,t){Cesium.defined(t)?this._originalPoints.splice(t,0,e):this._originalPoints.push(e),this._positionDirty=!0,this._owner.boundingSphereDirty=!0};xn.prototype.deletePointByIndex=function(e){this._originalPoints.splice(e,1),this._positionDirty=!0,this._owner.boundingSphereDirty=!0};xn.prototype.setPoint=function(e,t){this._originalPoints.splice(t,1,e),this._positionDirty=!0};xn.prototype._createCommand=function(e){let t=this._originalPoints,n=t.length;if(n<3)return;let i=this._computeCenter(t),o,r=[];for(let g=0;g<n;++g)o=Cesium.Cartesian3.subtract(t[g],i,new Cesium.Cartesian3),r.push(o);let a=Cesium.Matrix4.fromTranslation(i),s=this._computeIndices(t),u=this._createGeometry(r,s),l=Cesium.GeometryPipeline.createAttributeLocations(u),d=Cesium.VertexArray.fromGeometry({context:e,geometry:u,attributeLocations:l,bufferUsage:Cesium.BufferUsage.STATIC_DRAW}),f=Cesium.ShaderProgram.fromCache({context:e,vertexShaderSource:this._owner._v,fragmentShaderSource:this._owner._f,attributeLocations:l});this._pickId||this._createPickId(e),this._command=new Cesium.DrawCommand({owner:this,vertexArray:d,modelMatrix:a,boundingVolume:Cesium.BoundingSphere.transform(u.boundingSphere,a,this.boundingSphere),shaderProgram:f,uniformMap:this._uniformMap,renderState:this._owner._renderState,pass:Cesium.Pass.OPAQUE,pickId:"u_pickColor"})};xn.prototype._createPickId=function(e){this._pickId=e.createPickId({primitive:this})};xn.prototype._computeCenter=function(e,t){t||(t=new Cesium.Cartesian3);let n=e.length;for(let i=0;i<n;++i){let o=e[i];t.x+=o.x,t.y+=o.y,t.z+=o.z}return t.x/=n,t.y/=n,t.z/=n,t};xn.prototype._computePlaneNormal=function(e,t){let n=e.length,i=e[n-1],o,r,a=Cesium.Cartesian3.subtract(i,e[0],new Cesium.Cartesian3),s=new Cesium.Cartesian3,u=[];for(let d=0;d<n;++d)o=e[d],r=d===n-1?e[0]:e[d+1],s=Cesium.Cartesian3.subtract(r,o,s),u.push(Cesium.Cartesian3.cross(a,s,new Cesium.Cartesian3)),i=o,a=Cesium.Cartesian3.negate(s,a);t||(t=new Cesium.Cartesian3);let l=u.length;for(let d=0;d<l;++d){let f=u[d];t.x+=f.x,t.y+=f.y,t.z+=f.z}return t.x/=l,t.y/=l,t.z/=l,Cesium.Cartesian3.normalize(t,t)};xn.prototype._computeIndices=function(e){let t=this._computeCenter(e),n=this._computePlaneNormal(e),i=Cesium.Plane.fromPointNormal(t,n),o=new Cesium.Ray(null,n),r=Cesium.Cartographic.fromCartesian(t);r.longitude+=Cesium.Math.toRadians(1e-5),r=Cesium.Cartographic.toCartesian(r),o.origin=r;let a=Cesium.IntersectionTests.rayPlane(o,i);a||(Cesium.Cartesian3.negate(o.direction,o.direction),a=Cesium.IntersectionTests.rayPlane(o,i));let s=Cesium.Cartesian3.subtract(a,t,r);Cesium.Cartesian3.normalize(s,s);let u=Cesium.Cartesian3.cross(n,s,new Cesium.Cartesian3);Cesium.Cartesian3.normalize(u,u);let l=[];for(let d=0;d<e.length;++d){o.origin=e[d];let f=Cesium.IntersectionTests.rayPlane(o,i);if(f||(Cesium.Cartesian3.negate(o.direction,o.direction),f=Cesium.IntersectionTests.rayPlane(o,i)),f){let g=Cesium.Cartesian3.subtract(f,t,f),b=Cesium.Cartesian3.dot(s,g),x=Cesium.Cartesian3.dot(u,g);l.push(new Cesium.Cartesian2(b,x))}else throw new Cesium.Error("\u89C6\u9891\u6295\u5F71\u5E73\u9762\u9876\u70B9\u6C42\u4EA4\u5931\u8D25!")}return this._indices=Cesium.PolygonPipeline.triangulate(l),this._indices};xn.prototype.getConfiguration=function(){let e=this._originalPoints;if(e.length===0)return null;let t=this._owner._viewer.scene.globe.ellipsoid,n=[];for(let i=0;i<e.length;++i){let o=t.cartesianToCartographic(e[i]);n.push([Cesium.Math.toDegrees(o.longitude),Cesium.Math.toDegrees(o.latitude),o.height])}return n.push(this._indices),n};xn.prototype.destroy=function(){this._destroyCommand(),this._pickId=this._pickId&&this._pickId.destroy()};xn.prototype._destroyCommand=function(){let e=this._command;e&&(e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram&&e.shaderProgram.destroy()),this._command=null};xn.prototype.updatePointPosition=function(e){for(let t=0;t<this._originalPoints.length;t++){let n=this._originalPoints[t];this._originalPoints[t]=Cesium.Cartesian3.add(n,e,new Cesium.Cartesian3)}this._positionDirty=!0};var Do=xn;function Tt(e){if(!Cesium.defined(e))throw new Cesium.DeveloperError("options\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.viewer))throw new Cesium.DeveloperError("options.viewer\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.videoElement))throw new Cesium.DeveloperError("options.videoElement\u524D\u7AEFvideo\u5BB9\u5668\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.originLon))throw new Cesium.DeveloperError("\u89C2\u5BDF\u70B9\u7ECF\u5EA6\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.originLat))throw new Cesium.DeveloperError("\u89C2\u5BDF\u70B9\u7EAC\u5EA6\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.originHeight))throw new Cesium.DeveloperError("\u89C2\u5BDF\u70B9\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(this._videoElement=e.videoElement,!(this._videoElement instanceof HTMLVideoElement))throw new Cesium.DeveloperError("options.videoElement\u5E76\u4E0D\u662F\u89C6\u9891\u5BB9\u5668\u3002");this._videoReadyPromise=Cesium.defer(),this._show=Cesium.defaultValue(e.show,!0),this._alpha=Cesium.defaultValue(e.videoAlpha,1),this.videoAlphaRate=1,this._videoVisiableAngle=45,this._videoGradientAngle=30,this._cameraDirty=!0,this._viewer=e.viewer,this._originLon=e.originLon,this._originLat=e.originLat,this._originHeight=e.originHeight,this._wsplayer=e.wsplayer,this._wsplayerType=e.wsplayerType,this._wsplayerGBAddress=e.wsplayerGBAddress,this._pitch=Cesium.defaultValue(e.pitch,0),this._heading=Cesium.defaultValue(e.heading,0),this._roll=Cesium.defaultValue(e.roll,0),this._viewPoint=e.viewPoint,this._fov=Cesium.defaultValue(e.fov,60),this._wsplayer&&(this._fov=this._fov/this._wsplayer.curZoom),this._visibleDistance=Cesium.defaultValue(e.visibleDistance,100),this._slice=100,this._lineEnabled=Cesium.defaultValue(e.lineEnabled,!1),this._name=e.name,this._layer=e.layer,this._aspectRatio=void 0,this._projectionMode=0,this._videoElement.paused&&this._videoElement.play(),this._lines=[],this.videoCamera=void 0,this._adjustModeEnabled=!1,this._oldCameraPosition=void 0,this._oldHeading=void 0,this._oldPitch=void 0,this._oldRoll=void 0,this._oldFov=void 0,this._oldAspectRatio=void 0,this._scene=this._viewer.scene,this._hdr=this._scene._hdr,this._scene._hdr=!1,this.videoHsv=Cesium.defaultValue(e.hsvParam,new Cesium.Cartesian3),this._distortion=Cesium.defaultValue(e.distortion,new Cesium.Cartesian2),this._textureSize=Cesium.defaultValue(e.textureSize,new Cesium.Cartesian2),this._lInfo=void 0,this._visibleDistance=Cesium.defaultValue(e.visibleDistance,100),this._projectionCameraViewMatrix=new Cesium.Matrix4,this._backCull=Cesium.defaultValue(e.backCull,!1),this._v=void 0,this._f=void 0,this._renderState=void 0,this._planes=[],this.boundingSphere=new Cesium.BoundingSphere,this._boundingSphereDirty=!1,e.projection&&this._createProjectionPlanes(e.projection),this._videoElement instanceof HTMLVideoElement&&(this.incompatibleConsole(),this._viewer.clock.shouldAnimate=!0),this._createVertexShaderSource(),this._createFragmentShaderSource(),this._createRenderState(),this._viewer.scene.primitives.add(this),this._changed=new Cesium.Event,this._cameraPromise=Cesium.defer()}Object.defineProperties(Tt.prototype,{name:{get:function(){return this._name}},videoAlpha:{get:function(){return this._alpha},set:function(e){this._alpha=e}},changed:{get:function(){return this._changed}},cameraPromise:{get:function(){return this._cameraPromise.promise}},projectionMode:{get:function(){return this._projectionMode}},boundingSphereDirty:{get:function(){return this._boundingSphereDirty},set:function(e){this._boundingSphereDirty=e}},visibleDistance:{get:function(){return this._visibleDistance},set:function(e){this._visibleDistance=e}}});Tt.prototype.update=function(e){if(!this._show||e.mode!==Cesium.SceneMode.SCENE3D)return;let t=e.context;if(this._context=t,this._boundingSphereDirty&&(this._computeBoundingSphere(),this._boundingSphereDirty=!1),!this.boundingSphere.center.equals(Cesium.Cartesian3.ZERO)){let n=Cesium.Cartesian3.distance(e.camera.position,this.boundingSphere.center);if(n-=this.boundingSphere.radius,n>this._visibleDistance){this._wsplayer&&this._wsplayer.socketConnect&&this._wsplayer.stop();return}}if(this._checkVideoCameraAngle(),this.videoAlphaRate!==0&&(this._wsplayer&&!this._wsplayer.socketConnect&&(this._wsplayerType==="rtsp"?this._wsplayer.openws():this._wsplayerType==="gb"&&(this._wsplayer.openws(),this._wsplayer.playGB(),this._wsplayer.playGBDevice(this._wsplayerGBAddress))),this._videoElement.readyState>=2&&!this._videoElement.paused&&(Cesium.defined(this._texture)?this._texture.copyFrom({source:this._videoElement}):(this._createTexture(t),this._textureSize.x=this._texture.width,this._textureSize.y=this._texture.height,this._videoReadyPromise.resolve(this))),!!Cesium.defined(this._texture))){this._cameraDirty&&(this._createProjectionCamera(),this._cameraDirty=!1),this._updateProjectionCameraViewMatrix();for(let n=0;n<this._planes.length;++n)this._planes[n].update(e)}};Tt.prototype._checkVideoCameraAngle=function(){if(!this.videoCamera)return;let e=Cesium.Cartesian3.angleBetween(this._viewer.camera.directionWC,this.videoCamera.directionWC);e=Cesium.Math.toDegrees(e),e>this._videoVisiableAngle+this._videoGradientAngle?this.videoAlphaRate=0:e<this._videoVisiableAngle?this.videoAlphaRate=1:this.videoAlphaRate=1-(e-this._videoVisiableAngle)/this._videoGradientAngle};Tt.prototype._createProjectionPlanes=function(e){for(let t=0;t<e.length;++t){let n=new Do({owner:this,plane:e[t]});this._planes.push(n)}};Tt.prototype._createProjectionPlane=function(e){let t=new Do({owner:this,plane:e});return this._planes.push(t),t};Tt.prototype._createRenderState=function(){this._renderState=Cesium.RenderState.fromCache({blending:Cesium.BlendingState.ALPHA_BLEND,cull:{enabled:this._backCull,face:Cesium.CullFace.BACK},depthTest:{enabled:!0}})};Tt.prototype._updateProjectionCameraViewMatrix=function(){if(this.videoCamera)return Cesium.Matrix4.multiply(this.videoCamera.viewMatrix,this._viewer.scene.camera.inverseViewMatrix,this._projectionCameraViewMatrix)};Tt.prototype.getProjectionCameraViewMatrix=function(){return this._projectionCameraViewMatrix};Tt.prototype._createVertexShaderSource=function(){let e=`in vec3 position;
out vec3 v_positionEC;
void main()
{
    gl_Position = czm_modelViewProjection * vec4(position, 1.0);
    v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;
}
`;this._v=new Cesium.ShaderSource({sources:[e]})};Tt.prototype._createFragmentShaderSource=function(){let e=`uniform float u_leftClip;
uniform float u_rightClip;
uniform vec4 u_topClipLine1;
uniform vec4 u_topClipLine2;
uniform vec4 u_topClipLine3;
uniform vec4 u_topClipLine4;
uniform vec4 u_bottomClipLine1;
uniform vec4 u_bottomClipLine2;
uniform vec4 u_bottomClipLine3;
uniform vec4 u_bottomClipLine4;
uniform float u_alpha;
uniform vec3 u_hsv;
uniform mat4 u_projectionCameraViewMatrix;
uniform mat4 u_projectionCameraProjectionMatrix;
uniform sampler2D u_texture;
uniform float k1;
uniform float k2;
uniform vec2 textureSize;
in vec3 v_positionEC;
uniform vec4 u_pickColor;
vec3 rgb2hsv(vec3 c)
{
    vec4 K = vec4(0.0, -1.0/3.0, 2.0/3.0, -1.0);
    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
    float d = q.x - min(q.w, q.y);
    float e = 1.0e-10;
    return vec3(abs(q.z + (q.w - q.y)/(6.0*d+e)), d/(q.x + e), q.x);
}

vec3 hsv2rgb(vec3 c)
{
    vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

void main()
{
    vec4 pixelCoord = u_projectionCameraProjectionMatrix * u_projectionCameraViewMatrix * vec4(v_positionEC, 1.0);
    pixelCoord = pixelCoord / pixelCoord.w;
    vec2 texCoord = vec2(0.5, 0.5) + pixelCoord.xy * 0.5;
    float maxWidthHeight = textureSize.x;
    float percent = textureSize.y / textureSize.x;
    vec2 centerUV = vec2((textureSize.x / 2.0) / maxWidthHeight, (textureSize.y / 2.0) / maxWidthHeight);
    vec2 currentUV = vec2(texCoord.x, texCoord.y * percent);
    float length_2 = (currentUV.x - centerUV.x) * (currentUV.x - centerUV.x) + (currentUV.y - centerUV.y) * (currentUV.y - centerUV.y);
    float length_4 = length_2 * length_2;
    texCoord.x = (currentUV.x - centerUV.x) / (k1 * length_2 + k2 * length_4 + 1.0) + centerUV.x;
    texCoord.y = (currentUV.y - centerUV.y) / (k1 * length_2 + k2 * length_4 + 1.0) + centerUV.y;
    texCoord.y = texCoord.y / percent;
    if(texCoord.x < u_leftClip)
    {
       discard;
    }
    if(texCoord.x > u_rightClip)
    {
       discard;
    }
    float kTop1 = (u_topClipLine1.w - u_topClipLine1.y) / (u_topClipLine1.z - u_topClipLine1.x);
    float aTop1 = -1.0 * kTop1;
    float bTop1 = 1.0;
    float cTop1 = kTop1 * u_topClipLine1.x - u_topClipLine1.y;
    float rTop1 = dot(vec3(aTop1, bTop1, cTop1), vec3(texCoord, 1.0));
    if(rTop1 > 0.0)
    {
       discard;
    }
    float kTop2 = (u_topClipLine2.w - u_topClipLine2.y) / (u_topClipLine2.z - u_topClipLine2.x);
    float aTop2 = -1.0 * kTop2;
    float bTop2 = 1.0;
    float cTop2 = kTop2 * u_topClipLine2.x - u_topClipLine2.y;
    float rTop2 = dot(vec3(aTop2, bTop2, cTop2), vec3(texCoord, 1.0));
    if(rTop2 > 0.0)
    {
       discard;
    }
    float kTop3 = (u_topClipLine3.w - u_topClipLine3.y) / (u_topClipLine3.z - u_topClipLine3.x);
    float aTop3 = -1.0 * kTop3;
    float bTop3 = 1.0;
    float cTop3 = kTop3 * u_topClipLine3.x - u_topClipLine3.y;
    float rTop3 = dot(vec3(aTop3, bTop3, cTop3), vec3(texCoord, 1.0));
    if(rTop3 > 0.0)
    {
       discard;
    }
    float kTop4 = (u_topClipLine4.w - u_topClipLine4.y) / (u_topClipLine4.z - u_topClipLine4.x);
    float aTop4 = -1.0 * kTop4;
    float bTop4 = 1.0;
    float cTop4 = kTop4 * u_topClipLine4.x - u_topClipLine4.y;
    float rTop4 = dot(vec3(aTop4, bTop4, cTop4), vec3(texCoord, 1.0));
    if(rTop4 > 0.0)
    {
       discard;
    }
    float kBottom1 = (u_bottomClipLine1.w - u_bottomClipLine1.y) / (u_bottomClipLine1.z - u_bottomClipLine1.x);
    float aBottom1 = -1.0 * kBottom1;
    float bBottom1 = 1.0;
    float cBottom1 = kBottom1 * u_bottomClipLine1.x - u_bottomClipLine1.y;
    float rBottom1 = dot(vec3(aBottom1, bBottom1, cBottom1), vec3(texCoord, 1.0));
    if(rBottom1 < 0.0)
    {
       discard;
    }
    float kBottom2 = (u_bottomClipLine2.w - u_bottomClipLine2.y) / (u_bottomClipLine2.z - u_bottomClipLine2.x);
    float aBottom2 = -1.0 * kBottom2;
    float bBottom2 = 1.0;
    float cBottom2 = kBottom2 * u_bottomClipLine2.x - u_bottomClipLine2.y;
    float rBottom2 = dot(vec3(aBottom2, bBottom2, cBottom2), vec3(texCoord, 1.0));
    if(rBottom2 < 0.0)
    {
       discard;
    }
    float kBottom3 = (u_bottomClipLine3.w - u_bottomClipLine3.y) / (u_bottomClipLine3.z - u_bottomClipLine3.x);
    float aBottom3 = -1.0 * kBottom3;
    float bBottom3 = 1.0;
    float cBottom3 = kBottom3 * u_bottomClipLine3.x - u_bottomClipLine3.y;
    float rBottom3 = dot(vec3(aBottom3, bBottom3, cBottom3), vec3(texCoord, 1.0));
    if(rBottom3 < 0.0)
    {
       discard;
    }
    float kBottom4 = (u_bottomClipLine4.w - u_bottomClipLine4.y) / (u_bottomClipLine4.z - u_bottomClipLine4.x);
    float aBottom4 = -1.0 * kBottom4;
    float bBottom4 = 1.0;
    float cBottom4 = kBottom4 * u_bottomClipLine4.x - u_bottomClipLine4.y;
    float rBottom4 = dot(vec3(aBottom4, bBottom4, cBottom4), vec3(texCoord, 1.0));
    if(rBottom4 < 0.0)
    {
       discard;
    }
    vec4 color = texture(u_texture, texCoord);
    vec3 rgb = color.xyz;
    vec3 hsv = rgb2hsv(rgb);
    hsv += u_hsv;
    rgb = hsv2rgb(hsv);
    rgb = clamp(rgb, 0.0, 1.0);
    color.xyz = rgb;
    color.a = u_alpha;
    out_FragColor = color;
}
`;this._f=new Cesium.ShaderSource({sources:[e]})};Tt.prototype._createTexture=function(e){this._texture=new Cesium.Texture({context:e,source:this._videoElement,sampler:new Cesium.Sampler({wrapS:Cesium.TextureWrap.CLAMP_TO_EDGE,wrapT:Cesium.TextureWrap.CLAMP_TO_EDGE,minificationFilter:Cesium.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium.TextureMagnificationFilter.LINEAR})})};Tt.prototype.updateParameter=function(e){Cesium.defined(e.originLon)&&(this._originLon=e.originLon),Cesium.defined(e.originLat)&&(this._originLat=e.originLat),Cesium.defined(e.originHeight)&&(this._originHeight=e.originHeight),Cesium.defined(e.pitch)&&(this._pitch=e.pitch),Cesium.defined(e.heading)&&(this._heading=e.heading),Cesium.defined(e.roll)&&(this._roll=e.roll),Cesium.defined(e.fov)&&(this._fov=e.fov),Cesium.defined(e.hsvParam)&&(this.videoHsv=e.hsvParam),Cesium.defined(e.distortion)&&(this._distortion=e.distortion),Cesium.defined(e.alpha)&&(this._alpha=e.alpha),Cesium.defined(e.lineEnabled)&&(this._lineEnabled=e.lineEnabled),this._cameraDirty=!0};Tt.prototype.setDistortion=function(e){this._distortion=e};Tt.prototype.setCameraFov=function(e){this._wsplayer&&Cesium.defined(this._wsplayer.curZoom)&&(e=e/this._wsplayer.curZoom),this._fov=e,this.videoCamera&&(this.videoCamera.frustum.fov=Cesium.Math.toRadians(e))};Tt.prototype._createProjectionCamera=function(){if(!this._texture)return;this.videoCamera||(this.videoCamera=new Cesium.Camera(this._viewer.scene));let e=this.videoCamera.frustum;e.fov=Cesium.Math.toRadians(this._fov),e.aspectRatio=this._aspectRatio=this._texture._width/this._texture._height,e.near=.01,e.far=1e3,e._fovy=e.aspectRatio<=1?e.fov:Math.atan(Math.tan(e.fov*.5)/e.aspectRatio)*2,e.top=e.near*Math.tan(.5*e._fovy),e.bottom=-e.top,e.right=e.aspectRatio*e.top,e.left=-e.right;let t=Cesium.Cartesian3.fromDegrees(this._originLon,this._originLat,this._originHeight);this.videoCamera.setView({destination:t,orientation:{heading:Cesium.Math.toRadians(this._heading),pitch:Cesium.Math.toRadians(this._pitch),roll:Cesium.Math.toRadians(this._roll)}}),this._adjustModeEnabled&&(this._viewer.scene.camera.setView({destination:t,orientation:{heading:Cesium.Math.toRadians(this._heading),pitch:Cesium.Math.toRadians(this._pitch),roll:Cesium.Math.toRadians(this._roll)}}),this._viewer.scene.camera.frustum.fov=Cesium.Math.toRadians(this._fov),this._viewer.scene.camera.frustum.aspectRatio=this._aspectRatio),this._cameraPromise.resolve(this.videoCamera)};Tt.prototype.setVideoCameraPosition=function(e,t){let n=this.videoCamera;if(!n)return;let i=Cesium.Cartesian3.subtract(e,n.positionWC,new Cesium.Cartesian3),o=Cesium.Cartesian3.distance(n.positionWC,e);if(o===0)return;Cesium.Cartesian3.normalize(i,i),n.move(i,o);let r=this._viewer.scene.globe.ellipsoid.cartesianToCartographic(e);this._originLon=Cesium.Math.toDegrees(r.longitude),this._originLat=Cesium.Math.toDegrees(r.latitude),this._originHeight=r.height,this._videoCameraPos=e,this._videoCameraPostureChanged=!0,Cesium.defaultValue(t,!0)&&this._changed.raiseEvent()};Tt.prototype.setCameraViewPoint=function(e,t){if(this._viewPoint=e,!this.videoCamera)return;let n=this.videoCamera,i=n.roll,o=Cesium.Cartesian3.subtract(e,n.positionWC,new Cesium.Cartesian3);Cesium.Cartesian3.normalize(o,o),n.setView({orientation:{direction:o,up:n.upWC}}),n.setView({orientation:{heading:n.heading,pitch:n.pitch,roll:i}}),this._heading=Cesium.Math.toDegrees(n.heading),this._pitch=Cesium.Math.toDegrees(n.pitch),this._roll=Cesium.Math.toDegrees(n.roll),this._videoCameraPostureChanged=!0,Cesium.defaultValue(t,!0)&&this._changed.raiseEvent()};Tt.prototype.enterAdjustMode=function(){if(this._adjustModeEnabled)return;this._adjustModeEnabled=!0;let e=this._viewer.scene.camera;this._oldHeading=e.heading,this._oldPitch=e.pitch,this._oldRoll=e.roll,this._oldFov=e.frustum.fov,this._oldAspectRatio=e.frustum.aspectRatio,this._oldCameraPosition=e.positionWC.clone(),this.updateParameter({})};Tt.prototype.exitAdjustMode=function(){if(!this._adjustModeEnabled)return;this._adjustModeEnabled=!1;let e=this._viewer.scene.camera;e.setView({destination:this._oldCameraPosition,orientation:{heading:this._oldHeading,pitch:this._oldPitch,roll:this._oldRoll}}),e.frustum.fov=this._oldFov,e.frustum.aspectRatio=this._oldAspectRatio};Tt.videoStatus=void 0;Tt.prototype.removeLines=function(){if(this._lineEnabled){for(let e=0;e<this._lines.length;e++)this._viewer.entities.remove(this._lines[e]);this._lines.length=0}};Tt.prototype.addLines=function(e){if(!this._lineEnabled||e.length===0)return;let t,n=new Cesium.Cartesian3;for(let i=0;i<e.length;i++)n.x=n.x+e[i].x,n.y=n.y+e[i].y,n.z=n.z+e[i].z,i!==e.length-1?t=this._viewer.entities.add({polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights([e[i].x,e[i].y,e[i].z,e[i+1].x,e[i+1].y,e[i+1].z]),width:1,material:Cesium.Color.BLUE,arcType:Cesium.ArcType.NONE}}):t=this._viewer.entities.add({polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights([e[i].x,e[i].y,e[i].z,e[0].x,e[0].y,e[0].z]),width:1,material:Cesium.Color.BLUE,arcType:Cesium.ArcType.NONE}}),this._lines.push(t);n.x=n.x/e.length,n.y=n.y/e.length,n.z=n.z/e.length,t=this._viewer.entities.add({polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights([n.x,n.y,n.z,this._originLon,this._originLat,this._originHeight]),width:1,material:Cesium.Color.RED,arcType:Cesium.ArcType.NONE}}),this._lines.push(t)};Tt.prototype.incompatibleConsole=function(){let e=this;this._viewer.scene.renderError.addEventListener(function(){e._videoElement.paused||e._videoElement.pause(),e._viewer.cesiumWidget._showRenderLoopErrors&&e._viewer.cesiumWidget.showErrorPanel("This browser does not support cross-origin WebGL video textures.","","")})};Tt.prototype.getConfiguration=function(){let e={},t=this._wsplayer;t?t.mSipID?e.gb=t.mSipID:t.mRtspurl&&(e.url=t.mRtspurl):e.file=this._fileName,e.alpha=this.videoAlpha,e.distortion=[this._distortion.x,this._distortion.y],e.hsv=[this.videoHsv.x,this.videoHsv.y,this.videoHsv.z];let n={position:[this._originLon,this._originLat,this._originHeight],orientation:[this._heading,this._pitch,this._roll],fov:Number(this._fov.toFixed(1))};if(this._viewPoint){let o=this._viewer.scene.globe.ellipsoid.cartesianToCartographic(this._viewPoint);o&&(n.visitPoint=[Cesium.Math.toDegrees(o.longitude),Cesium.Math.toDegrees(o.latitude),o.height])}let i=[];for(let o=0;o<this._planes.length;++o){let r=this._planes[o].getConfiguration();r&&i.push(r)}return{name:this._name,type:this._projectionMode,visibleDistance:this._visibleDistance,video:e,camera:n,projection:i}};Tt.prototype._computeBoundingSphere=function(){let e=[];for(let t=0;t<this._planes.length;++t){let n=this._planes[t]._originalPoints;for(let i=0;i<n.length;++i)e.push(n[i])}this.boundingSphere=Cesium.BoundingSphere.fromPoints(e,this.boundingSphere)};Tt.prototype.destroy=function(){if(this._scene._hdr=this._hdr,this.removeLines(),this._viewer.scene.primitives.contains(this)){let e=this._viewer.scene.primitives._primitives.indexOf(this);e!==-1&&(this._viewer.scene.primitives._primitives.splice(e,1),delete this._external._composites[this._viewer.scene.primitives._guid])}for(let e=0;e<this._planes.length;e++)this._planes[e].destroy();this._planes.length=0,this._texture&&(this._texture.destroy(),this._texture=void 0),this._synchronizer&&(this._synchronizer.destroy(),this._synchronizer=void 0),this._wsplayer&&(this._wsplayer.stop(),this._wsplayer=null)};var Mo=Tt;function he(e){this.wsserverurl=e.wsserver,this.mRtspurl=e.rtspurl,this.layer=e.layer,this.mMediaplayer=e.mediaplayer,this.websocket=void 0,this.ByteArray(),this.needRecv=!0,this.mimestr=void 0,this.mediaReady=!1,this.sourceReady=!1,this.wsConnected=!1,this.mediaSource=void 0,this.playMode="",this.elementPaused=!1,this.mforwardAddress=void 0,this.needFast=!1,this.faultTime=2,this.startTime=void 0,this.stopTime=void 0,this.lastCurrentTime=0,this.sameTimes=0,this.supportstr=void 0,this.mCanvas=void 0,this.mMouseBind=!1,this.mSipID=void 0,this.sourceBuffer=void 0,this.cacheTime=4,this.socketConnect=!1,this.isMainStream=e.isMainStream,this.protocol=e.protocol,this.ptzType=e.ptzType?e.ptzType:"Degree",this.curPan=e.pan?e.pan:0,this.curTilt=e.tilt?e.tilt:0,this.curZoom=e.zoom?e.zoom:1,this.panMin=0,this.panMax=0,this.tiltMin=0,this.tiltMax=0,this.zoomMin=1,this.zoomMax=1,this.updataCount=25,this.NeedUpdateVideo=!0,this.showLastFrame=!1,this.userQuit=!1,this.mMediaplayer&&(this.mMediaplayer.addEventListener("canplay",this.onCanPlay.bind(this)),this.mMediaplayer.addEventListener("pause",this.onPause.bind(this)),this.mMediaplayer.addEventListener("error",this.onPlayError.bind(this))),document.addEventListener("webkitvisibilitychange",function(t){t.target.webkitHidden||this.onCanPlay()}.bind(this),!1)}var ls=0;he.prototype.openws=function(){if(this.userQuit=!1,this.mRtspurl!==""&&this.mMediaplayer&&this.mRtspurl.indexOf("rtsp")===-1&&this.mRtspurl.indexOf("rtmp")===-1&&this.mRtspurl.indexOf("http")===-1){this.mMediaplayer.src=this.mRtspurl,this.mMediaplayer.type="video/mp4";return}this.socketConnect||(ls>16&&console.warn(`Too many video connections\uFF1A${ls}`),this.socketConnect=!0,this.needRecv=!0,this.websocket=new WebSocket(this.wsserverurl),this.websocket.onopen=this.onOpen.bind(this),this.websocket.onclose=this.onClose.bind(this),this.websocket.onmessage=this.onMessage.bind(this),this.websocket.onerror=this.onError.bind(this),ls++)};he.prototype.updateVideo=function(){this.NeedUpdateVideo=!0,this.updataCount=10};he.prototype.setCacheTime=function(e){if(e<=0||e>=50){console.log("the cache value is invalid. must 0<v<50");return}this.cacheTime=e};he.prototype.onWsConnectReslut=function(e){};he.prototype.onAlarm=function(e){};he.prototype.onVideoReady=function(){};he.prototype.onVideoClosed=function(e){};he.prototype.onHistoryTracks=function(e){};he.prototype.onLastestTracks=function(e){};he.prototype.onIdentify=function(e){};he.prototype.onDeviceMessage=function(e){};he.prototype.onGBDeviceList=function(e){};he.prototype.onMousePosition=function(e){};he.prototype.onPerformance=function(e){};he.prototype.onRender=function(e){};he.prototype.onPtzInfo=function(e,t,n){};he.prototype.reConnect=function(){this.socketConnect=!1,this.onWsConnectReslut("CLOSED"),this.userQuit?(this.stop(),this.wsConnected=!1):(ls--,this.wsConnected=!1,this.websocket=void 0,this.openws())};he.prototype.onError=function(e){this.onWsConnectReslut("ERROR"),this.websocket.close()};he.prototype.onOpen=function(e){console.log("socket open"),this.wsConnected=!0,this.userQuit?(this.stop(),this.wsConnected=!1):(this.onWsConnectReslut("SUCCESS"),this.retry())};he.prototype.onClose=function(e){console.log("socket close"),this.reConnect()};he.prototype.doSend=function(e){if(!(!this.wsConnected||this.websocket===void 0||!this.socketConnect))if(this.websocket.binaryType="arraybuffer",this.websocket.readyState===WebSocket.OPEN)this.websocket.send(JSON.stringify(e));else{let t=this;setTimeout(function(){t.doSend(e)},2e3)}};he.prototype.onMessage=function(e){if(typeof e.data=="string"){let t=e.data,n=JSON.parse(t);n.messageType==="AVC_INFO"?(this.mimestr=n.data,this.needRecv=!0,this.initMediaSource(this.mimestr)):n.messageType==="DEVICE_MESSAGE"?this.onDeviceMessage(n.data):n.messageType==="PTZ"?this.layer&&this.layer.ev_VideoProjectionManager&&this.layer.ev_VideoProjectionManager.updateVideoCamera(this.mMediaplayer.id,n.pan,n.tilt,n.zoom):n.messageType==="HISTORY_TRACKS"?this.onHistoryTracks(n.data):n.messageType==="LASTEST_TRACKS"?this.onLastestTracks(n.data):n.messageType==="INDENTIFY"?this.onIdentify(n.data):n.messageType==="GB_DEVICE_LIST"?this.onGBDeviceList(n.data):n.messageType==="ALARM"?this.onAlarm(n.data):n.messageType==="MOUSE_POSITION"?this.onMousePosition(n.data):n.messageType==="SERVER_PERFORMANCE"?this.onPerformance(n.data):n.messageType==="PTZ_INFO"&&(this.curPan=n.pan,this.curTilt=n.tilt,this.curZoom=n.zoom,n.panMax!==void 0&&n.tiltMax!==void 0&&(this.panMin=n.panMin,this.panMax=n.panMax,this.tiltMin=n.tiltMin,this.tiltMax=n.tiltMax,this.zoomMin=n.zoomMin,this.zoomMax=n.zoomMax),this.onPtzInfo(n.pan,n.tilt,n.zoom),this.panMax<=1?this.ptzType="Unit":this.ptzType="Dgreee",this.layer&&this.layer.ev_VideoProjectionManager&&this.layer.ev_VideoProjectionManager.updateVideoCamera(this.mMediaplayer.id,this.curPan,this.curTilt,this.curZoom)),t=null}else if(this.needRecv&&!(this.mediaReady&&!this.NeedUpdateVideo)){let t=new Uint8Array(e.data);this.push(t),t=null,this.loadvideo(),this.onRender(),this.mediaReady&&(this.updataCount--,this.updataCount<0&&(this.NeedUpdateVideo=!0,this.updataCount=10))}e=null};he.prototype.sendConnectType=function(e){this.doSend({messageType:"CONNECT_TYPE",connect_type:e,client_type:"WEB"})};he.prototype.sendDeviceInfo=function(){let e={messageType:"ADDRESS",url:this.mRtspurl};this.isMainStream!==void 0&&(e.isMainStream=this.isMainStream),this.protocol!==void 0&&(e.protocol=this.protocol),this.doSend(e)};he.prototype.play=function(){if(this.playMode="PLAY_REAL",this.mRtspurl===""||this.mRtspurl===null){console.log(`mRtspurl: ${this.mRtspurl}  is illegal!`);return}this.sendConnectType("VIDEO"),this.sendDeviceInfo(),this.playReal()};he.prototype.playForward=function(e){this.mforwardAddress=e,this.playMode="PLAY_FORWARD",this.sendConnectType("FORWARD"),this.doSend({messageType:"FORWARD_ADDRESS",forward_address:this.mforwardAddress,url:this.mRtspurl})};he.prototype.playGlobe=function(){this.playMode="GLOBE_FUSION",this.sendConnectType("GLOBE")};he.prototype.playGB=function(){this.playMode="GB",this.sendConnectType("GB")};he.prototype.getGBDeviceList=function(){this.doSend({messageType:"GET_GB_DEVICE_LIST"})};he.prototype.playGBDevice=function(e){this.mSipID=e,this.doSend({messageType:"PLAY_GB_VIDEO",sipID:e})};he.prototype.stopPlayGBDevice=function(e){this.mSipID=void 0,this.doSend({messageType:"STOP_PLAY_GB_VIDEO",sipID:e})};he.prototype.redirectUrl=function(e){this.mimestr!==void 0&&(this.mediaSource&&this.mediaSource.readyState==="open"&&(this.mediaSource.removeSourceBuffer(this.sourceBuffer),this.mediaSource.endOfStream(),this.mediaSource.removeEventListener("sourceopen",this.onMediaSourceOpen)),URL.revokeObjectURL(this.mMediaplayer.src),this.mMediaplayer.src=void 0,this.mediaSource=void 0,this.sourceBuffer=void 0,this.sourceReady=!1,this.mimestr=void 0,this.mediaReady=!1),this.playMode==="GB"?(this.playGB(),this.playGBDevice(e)):(this.mRtspurl=e,this.play()),this.doSend({messageType:"SOURCE_READY"})};he.prototype.queryPerformance=function(){this.doSend({messageType:"QUERY_PERFORMANCE"})};he.prototype.keepLastFrame=function(e){this.showLastFrame=e};he.prototype.initMediaSource=function(e){this.mediaSource===void 0&&(this.mimestr=e,this.supportstr=`video/mp4; codecs="${this.mimestr}"`,console.log("recv decode format:",this.supportstr),MediaSource.isTypeSupported(this.supportstr)||(console.log(`${this.supportstr} is unsupported MIME type or codec,please check the video data`),this.mimestr="avc1.64002a",this.supportstr=`video/mp4; codecs="${this.mimestr}"`,console.log(`try to use the default:${this.supportstr}`)),this.mediaSource=new MediaSource,this.mediaSource.addEventListener("sourceopen",this.onMediaSourceOpen.bind(this),!1),this.mediaSource.addEventListener("sourceclose",this.onSourceClose.bind(this),!1),this.mediaSource.addEventListener("sourceended",this.onSourceEnded.bind(this),!1),this.mMediaplayer.src=URL.createObjectURL(this.mediaSource),this.sourceReady=!1,this.needRecv=!0)};he.prototype.onSourceClose=function(e){this.onVideoClosed(e)};he.prototype.onSourceEnded=function(e){};he.prototype.onPlayError=function(e){this.sourceReady=!1,this.retry()};he.prototype.retry=function(){!this.needRecv||!this.wsConnected||!this.mMediaplayer||(console.log(`retry ${this.mSipID} ${this.mRtspurl}`),this.releaseElementSource(),this.ByteArray(),this.playMode==="PLAY_REAL"?this.play():this.playMode==="PLAYBACK"||this.playMode==="START_PLAYBACK_RETRY"?(this.sendConnectType("VIDEO"),this.sendDeviceInfo(),this.startPlayBackByTime(this.startTime,this.stopTime)):this.playMode==="GLOBE_FUSION"?this.playGlobe():this.playMode==="GB"?(this.playGB(),this.mSipID===void 0?this.getGBDeviceList():this.playGBDevice(this.mSipID)):this.playMode==="PLAY_FORWARD"?this.playForward(this.mforwardAddress):this.playMode===""?this.mRtspurl!==""&&this.mRtspurl!==null&&this.play():this.stopPlay())};he.prototype.onCanPlay=function(){this.elementPaused&&(this.elementPaused=!1)};he.prototype.onSeeked=function(){console.log("onSeeked")};he.prototype.onPause=function(){this.elementPaused||(this.elementPaused=!0,this.mediaReady),this.mediaReady&&this.mMediaplayer.play()};he.prototype.onMediaSourceOpen=function(e){this.mediaSource!==void 0&&(this.mediaSource.removeEventListener("sourceopen",this.onMediaSourceOpen),this.sourceBuffer===void 0&&(this.sourceBuffer=this.mediaSource.addSourceBuffer(this.supportstr),this.sourceBuffer.addEventListener("updateend",this.onUpdateEnd.bind(this),!1),this.sourceBuffer.addEventListener("abort",this.onSourceBufferAbort.bind(this),!1),this.sourceBuffer.addEventListener("error",this.onSourceBufferError.bind(this),!1),this.sourceReady=!0,this.mediaReady=!1,this.doSend({messageType:"SOURCE_READY"})))};he.prototype.onSourceBufferError=function(e){this.sourceReady=!1};he.prototype.onSourceBufferAbort=function(e){this.sourceReady=!1};he.prototype.onUpdateEnd=function(e){if(this.needRecv&&(this.mMediaplayer.readyState===4&&this.sourceBuffer&&!this.sourceBuffer.updating&&!this.mediaReady&&(console.log("start draw video"),this.mediaSource.endOfStream(),this.mMediaplayer.play(),this.mediaReady=!0,this.onVideoReady(),this.getPTZInfo()),this.mediaReady)){let t=this.mMediaplayer.duration-this.mMediaplayer.currentTime;if(t>this.faultTime&&(this.needFast=!0),this.needFast&&(this.mMediaplayer.playbackRate=1.2),t<.5&&this.needFast&&(this.needFast=!1,this.mMediaplayer.playbackRate=1),this.lastCurrentTime===this.mMediaplayer.currentTime){if(this.sameTimes>=30){let n=this.mMediaplayer.duration-2;n>this.mMediaplayer.currentTime&&(this.mMediaplayer.currentTime=n,this.mMediaplayer.playbackRate=1),this.sameTimes=0}this.sameTimes++}else this.lastCurrentTime=this.mMediaplayer.currentTime,this.sameTimes=0}};he.prototype.releaseElementSource=function(){this.needRecv=!1,this.ByteArray(),this.mediaReady=!1,this.sourceReady=!1,this.elementPaused=!1,this.updataCount=10,this.NeedUpdateVideo=!0,this.sourceBuffer&&this.mediaSource.readyState==="open"&&this.sourceBuffer.abort(),this.sourceBuffer&&(this.sourceBuffer.removeEventListener("updateend",this.onUpdateEnd),this.sourceBuffer.removeEventListener("abort",this.onSourceBufferAbort),this.sourceBuffer.removeEventListener("error",this.onSourceBufferError),this.mediaSource&&this.mediaSource.readyState==="open"&&this.mediaSource.removeSourceBuffer(this.sourceBuffer)),this.mediaSource&&(this.mediaSource.removeEventListener("sourceopen",this.onMediaSourceOpen),this.mediaSource.removeEventListener("sourceclose",this.onSourceClose),this.mediaSource.removeEventListener("sourceended",this.onSourceEnded)),this.mediaSource=void 0,this.sourceBuffer=void 0,this.mMediaplayer&&this.mMediaplayer.src&&(URL.revokeObjectURL(this.mMediaplayer.src),this.mMediaplayer.removeAttribute("src"),this.showLastFrame||this.mMediaplayer.load())};he.prototype.stop=function(){this.userQuit=!0,this.wsConnected&&(console.log(`stop ${this.mSipID} ${this.mRtspurl}`),this.needRecv=!1,this.ByteArray(),this.mediaReady=!1,this.sourceReady=!1,this.elementPaused=!1,this.updataCount=10,this.NeedUpdateVideo=!0,this.mCanvas&&(this.clearDrawing(),this.mCanvas=void 0),this.websocket&&(this.stopPlay(),this.websocket.close(),this.websocket=void 0,this.socketConnect=!1,this.wsConnected=!1),this.releaseElementSource(),ls--)};he.prototype.loadvideo=function(){if(this.length===0||!this.sourceReady||this.sourceBuffer===void 0)return!1;let e=null;try{if(!this.sourceBuffer.updating&&this.sourceBuffer.buffered!==void 0)return this.sourceBuffer.buffered.length&&this.sourceBuffer.buffered.end(0)-this.sourceBuffer.buffered.start(0)>1*this.cacheTime*2?(this.sourceBuffer.remove(0,this.sourceBuffer.buffered.end(0)-this.cacheTime),e=null,!1):(e=new Uint8Array(this.length),this.readBytes(e)&&this.sourceBuffer.appendBuffer(e),this.ByteArray(),e=null,!0)}catch(t){console.log(t),this.ByteArray(),e=null,this.sourceBuffer.remove(0,this.sourceBuffer.buffered.end(0)),this.retry()}return e=null,!1};he.prototype.ByteArray=function(){this.list=[],this.length=0};he.prototype.push=function(e){this.list.push(e),this.length+=e.length};he.prototype.readBytes=function(e){let t=e.length;if(e.length<=0)return!1;let n=0;for(;n<t;){if(this.list.length<=0){e=e.subarray(0,n);break}let i=this.list.shift(),o=i.length,r=t-n;if(o>=r){let a=i.subarray(0,r);if(e.set(a,n),n+=a.length,r<o){let s=i.subarray(r,o);this.list.unshift(s)}a=null,i=null;break}else e.set(i,n),n+=o;i=null}return this.length-=e.length,n!==0};he.prototype.canvasSwitch=function(e){e===!0?this.mCanvas===void 0&&(this.mCanvas=document.createElement("canvas"),this.mCanvas.width=this.mMediaplayer.clientWidth,this.mCanvas.height=this.mMediaplayer.clientHeight,this.mCanvas.style.position="absolute",this.mMediaplayer.style.position==="absolute"||(this.mCanvas.style.left="0",this.mCanvas.style.top="0",this.mCanvas.style.bottom="0",this.mCanvas.style.right="0"),this.mCanvas.style.zIndex=2,this.mMediaplayer.parentNode.appendChild(this.mCanvas),this.mMouseBind&&this.bindMouse(this.mMouseBind)):(this.mCanvas&&this.clearDrawing(),this.mCanvas=void 0)};he.prototype.drawIdentifyMsg=function(e){if(this.mCanvas===void 0)return;let t=this.mCanvas.getContext("2d");t.clearRect(0,0,this.mCanvas.width,this.mCanvas.height);let n=this.mCanvas.width/this.mMediaplayer.videoWidth,i=this.mCanvas.height/this.mMediaplayer.videoHeight;for(let o=0;o<e.length;o++){let r=e[o];t.strokeStyle="red",t.lineWidth=2,t.strokeRect(r.boundingRect[0]*n,r.boundingRect[1]*i,r.boundingRect[2]*n,r.boundingRect[3]*i),t.fillStyle="yellow",t.fillRect(r.boundingRect[0]*n,(r.boundingRect[1]-27)*i,120*n,25*i),t.fillStyle="black",t.font="bold 15px arial",t.fillText(`${r.trackId}:${r.name}`,r.boundingRect[0]*n,(r.boundingRect[1]-5)*i)}};he.prototype.drawHistoryTracks=function(e){if(this.mCanvas===void 0)return;let t=this.mCanvas.getContext("2d");t.fillStyle="blue";let n=this.mCanvas.width/this.mMediaplayer.videoWidth,i=this.mCanvas.height/this.mMediaplayer.videoHeight;for(let o=0;o<e.length;o++){let r=e[o].tracks;for(let a=0;a<r.length;a++){let s=r[a];t.beginPath(),t.arc(s[0]*n,s[1]*i,2,0,6.28),t.fill()}}};he.prototype.clearDrawing=function(){if(this.mCanvas===void 0)return;this.mCanvas.getContext("2d").clearRect(0,0,this.mCanvas.width,this.mCanvas.height),console.log("clear drawing")};he.prototype.detect=function(e){this.canvasSwitch(e),this.doSend({messageType:"IDENTIFY",action:"SWITCH",data:e}),this.clearDrawing()};he.prototype.setIdentifyTarget=function(e){this.doSend({messageType:"IDENTIFY",action:"IDENTIFY_TARGET",data:e})};he.prototype.setTrackRect=function(e,t,n,i,o){this.doSend({messageType:"IDENTIFY",action:"IDENTIFY_TRACKS",btrackall:e,rectX:t,rectY:n,rectW:i,rectH:o})};he.prototype.setModePara=function(e,t,n){this.doSend({messageType:"IDENTIFY",action:"MODEPARA",detectMode:e,confidenceThreshold:t,nmsThreshold:n})};he.prototype.set3DTrakMode=function(e){this.doSend({messageType:"IDENTIFY",action:"3DTRAKMODE",data:e})};he.prototype.setShow3dTrack=function(e){this.doSend({messageType:"IDENTIFY",action:"SHOW3DTRACK",data:e})};he.prototype.setShow2dTrack=function(e){this.doSend({messageType:"IDENTIFY",action:"SHOW2DTRACK",data:e})};he.prototype.globeGoto=function(e,t){this.doSend({messageType:"GOTO",longitude:e,latitude:t})};he.prototype.globeGotoCameras=function(e){this.doSend({messageType:"GOTO",cameraNames:e})};he.prototype.playReal=function(){this.playMode="PLAY_REAL",this.doSend({messageType:"PLAY_REAL"})};he.prototype.findfile=function(e,t){this.playMode="FIND_FILE",this.doSend({messageType:"FIND_FILE",startTime:e,stopTime:t})};he.prototype.startPlayBackByTime=function(e,t){this.playMode="PLAYBACK",this.startTime=e,this.stopTime=t,this.doSend({messageType:"PLAYBACK",startTime:e,stopTime:t}),this.mMediaplayer&&this.mediaReady&&(this.mMediaplayer.currentTime=this.mMediaplayer.duration,this.mMediaplayer.play(),this.recoverWS())};he.prototype.startPlayBackRetry=function(){this.playMode="START_PLAYBACK_RETRY",this.doSend({messageType:this.playMode})};he.prototype.playBackFast=function(){this.doSend({messageType:"PLAYBACK_FAST"})};he.prototype.playBackSlow=function(){this.doSend({messageType:"PLAYBACK_SLOW"})};he.prototype.playBackNormal=function(){this.doSend({messageType:"PLAYBACK_NORMAL"})};he.prototype.playBackPause=function(){this.doSend({messageType:"PLAYBACK_PAUSE"}),this.mMediaplayer&&this.mMediaplayer.pause()};he.prototype.playBackReStart=function(){this.doSend({messageType:"PLAYBACK_RESTART"}),this.mMediaplayer&&(this.mMediaplayer.play(),this.recoverWS())};he.prototype.pauseWS=function(){this.doSend({messageType:"PAUSE_SOCKET"})};he.prototype.recoverWS=function(){this.doSend({messageType:"RECOVER_SOCKET"})};he.prototype.stopPlay=function(){this.doSend({messageType:"STOP"})};he.prototype.controlPTZ=function(e,t,n){this.doSend({messageType:"PTZ_CONTROL",command:e,bStop:t,speed:n})};he.prototype.setPTZPosition=function(e,t,n){e=Number(e),t=Number(t),n=Number(n),this.doSend({messageType:"SET_PTZ_POSITION",pan:e,tilt:t,zoom:n})};he.prototype.getPTZInfo=function(){this.doSend({messageType:"GET_PTZ_INFO"})};he.prototype.getGBDeivceList=function(){};he.prototype.useAlarm=function(e){this.doSend({messageType:"SET_ALARM",use:e})};he.prototype.controlGateway=function(e,t){this.doSend({messageType:"GATEWAY_CONTROL",index:e,command:t})};he.prototype.bindMouse=function(e){this.mMouseBind=e,e?(this.mMediaplayer.onmousemove=this.mouseMove.bind(this),this.mMediaplayer.onmousedown=this.mouseDown.bind(this),this.mMediaplayer.onmouseup=this.mouseUp.bind(this),this.mMediaplayer.onmousewheel=this.mouseWheel.bind(this),this.mCanvas&&(this.mCanvas.onmousemove=this.mouseMove.bind(this),this.mCanvas.onmousedown=this.mouseDown.bind(this),this.mCanvas.onmouseup=this.mouseUp.bind(this),this.mCanvas.onmousewheel=this.mouseWheel.bind(this))):(this.mMediaplayer.onmousemove=null,this.mMediaplayer.onmousedown=null,this.mMediaplayer.onmouseup=null,this.mMediaplayer.onmousewheel=null,this.mCanvas&&(this.mCanvas.onmousemove=null,this.mCanvas.onmousedown=null,this.mCanvas.onmouseup=null,this.mCanvas.onmousewheel=null))};he.prototype.calculatePosition=function(e){if(this.mMediaplayer===void 0||!this.needRecv||this.mMediaplayer.videoHeight===0||this.mMediaplayer.videoWidth===0)return null;let t=this.mMediaplayer.offsetHeight/this.mMediaplayer.videoHeight,n=this.mMediaplayer.offsetWidth/this.mMediaplayer.videoWidth,i=t<n?t:n,o=this.mMediaplayer.offsetWidth/2-this.mMediaplayer.videoWidth*i/2,r=this.mMediaplayer.offsetWidth/2+this.mMediaplayer.videoWidth*i/2,a=this.mMediaplayer.offsetHeight/2-this.mMediaplayer.videoHeight*i/2,s=this.mMediaplayer.offsetHeight/2+this.mMediaplayer.videoHeight*i/2,u=this.mMediaplayer.getBoundingClientRect(),l=e.clientX-u.left,d=e.clientY-u.top;if(l<o||l>r||d<a||d>s)return null;let f=new Array;f[0]=(l-o)*this.mMediaplayer.videoWidth/(r-o),f[1]=(d-a)*this.mMediaplayer.videoHeight/(s-a);let g=e.button;return g===0?g=1:g===1&&(g=4),f[2]=g,f};he.prototype.mouseMove=function(e){let t=this.calculatePosition(e);if(t===null)return!1;this.doSend({messageType:"MOUSE_EVENT",mouseAction:"MOUSE_MOVE",mouseX:t[0],mouseY:t[1]})};he.prototype.mouseDown=function(e){let t=this.calculatePosition(e);return t===null||this.doSend({messageType:"MOUSE_EVENT",mouseAction:"MOUSE_PRESS",mouseX:t[0],mouseY:t[1],mouseButton:t[2]}),!1};he.prototype.mouseUp=function(e){let t=this.calculatePosition(e);return t===null||this.doSend({messageType:"MOUSE_EVENT",mouseAction:"MOUSE_RELEASE",mouseX:t[0],mouseY:t[1],mouseButton:t[2]}),!1};he.prototype.mouseWheel=function(e){return this.calculatePosition(e)===null||this.doSend({messageType:"MOUSE_EVENT",mouseAction:"MOUSE_WHEEL",delta:e.wheelDelta,orientation:2}),!1};he.prototype.mousePosition=function(e){let t=this.calculatePosition(e);return t===null||this.doSend({messageType:"MOUSE_EVENT",mouseAction:"MOUSE_POSITION",mouseX:t[0],mouseY:t[1]}),!1};he.prototype.panUnit2Degree=function(e){return e*180+180};he.prototype.tiltUnit2Degree=function(e){return e*90};he.prototype.panDegree2Unit=function(e){return e/180-1};he.prototype.tiltDegree2Unit=function(e){return e/90};var zi=he;function sA(e){this._leftClip=Cesium.defaultValue(0,0),this._rightClip=Cesium.defaultValue(1,1),this._topClipLine1=new Cesium.Cartesian4(0,1,1,1),this._topClipLine2=new Cesium.Cartesian4(0,1,1,1),this._topClipLine3=new Cesium.Cartesian4(0,1,1,1),this._topClipLine4=new Cesium.Cartesian4(0,1,1,1),this._bottomClipLine1=new Cesium.Cartesian4(0,0,1,0),this._bottomClipLine2=new Cesium.Cartesian4(0,0,1,0),this._bottomClipLine3=new Cesium.Cartesian4(0,0,1,0),this._bottomClipLine4=new Cesium.Cartesian4(0,0,1,0),this._pointsList=[],this._initialPointsList=[],this._indicesList=[],this._centerPostion=new Cesium.Cartesian3;for(let t=0;t<e.length;t++)try{let n=e[t];if(t===e.length-1)for(let i=0;i<n.length;i++)this._indicesList.push(n[i]);else if(this._centerPostion.x=this._centerPostion.x+n[0],this._centerPostion.y=this._centerPostion.y+n[1],this._centerPostion.z=this._centerPostion.z+n[2],this._pointsList.push(new Cesium.Cartesian3(n[0],n[1],n[2])),n[3]>=0){let i=this._initialPointsList.length;for(let o=0;o<e.length-1;o++)if(e[o][3]===i){this._initialPointsList.push(new Cesium.Cartesian3(e[o][0],e[o][1],e[o][2]));break}}}catch(n){console.error(n.message)}this._centerPostion.x=this._centerPostion.x/(e.length-1),this._centerPostion.y=this._centerPostion.y/(e.length-1),this._centerPostion.z=this._centerPostion.z/(e.length-1)}function Ap(e){if(!Cesium.defined(e))throw new Cesium.DeveloperError("\u53C2\u6570options\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.viewer))throw new Cesium.DeveloperError("Viewer\u5BF9\u8C61options.viewer\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.framebuffer))throw new Cesium.DeveloperError("Viewer\u5BF9\u8C61options.framebuffer\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.coordinates))throw new Cesium.DeveloperError("Viewer\u5BF9\u8C61options.projection\u4E0D\u80FD\u4E3A\u7A7A\u3002");this.ev_CommonProjectionPlane=new sA(e.coordinates),this._planeColor=Cesium.defaultValue(e.planeColor,new Cesium.Color),this._viewer=e.viewer,this.framebuffer=e.framebuffer;let t=`in vec3 position;
void main()
{
    gl_Position = czm_modelViewProjection * vec4(position, 1.0);
}
`,n=`uniform vec4 u_color;
void main()
{
    out_FragColor = u_color;
}
`;this._vsSource=new Cesium.ShaderSource({sources:[t]}),this._fsSource=new Cesium.ShaderSource({sources:[n]});let i=Cesium.RenderState.fromCache({blending:Cesium.BlendingState.ALPHA_BLEND,cull:{enabled:!0,face:Cesium.CullFace.BACK},depthTest:{enabled:!1}}),o=this;o._drawCommand=new Cesium.DrawCommand({owner:o,pass:Cesium.Pass.OPAQUE,renderState:i,framebuffer:e.framebuffer,uniformMap:{u_color:function(){return o._planeColor}}}),this._viewer.scene.primitives.add(this)}Ap.prototype.update=function(e){let t=e.context,n=e.commandList;if(!Cesium.defined(this._drawCommand.vertexArray)){let i=cA(this,this.ev_CommonProjectionPlane._pointsList,this.ev_CommonProjectionPlane._centerPostion,this.ev_CommonProjectionPlane._indicesList);if(i){let o=Cesium.GeometryPipeline.createAttributeLocations(i);this._drawCommand.vertexArray=Cesium.VertexArray.fromGeometry({context:t,geometry:i,attributeLocations:o,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});let r=Cesium.Cartesian3.fromDegrees(this.ev_CommonProjectionPlane._centerPostion.x,this.ev_CommonProjectionPlane._centerPostion.y,this.ev_CommonProjectionPlane._centerPostion.z);this._drawCommand.modelMatrix=Cesium.Matrix4.fromTranslation(r),this._drawCommand.boundingVolume=Cesium.BoundingSphere.transform(i.boundingSphere,this._drawCommand.modelMatrix,this._drawCommand.boundingVolume),Cesium.defined(this._drawCommand.shaderProgram)||(this._drawCommand.shaderProgram=Cesium.ShaderProgram.fromCache({context:t,vertexShaderSource:this._vsSource,fragmentShaderSource:this._fsSource,attributeLocations:o}))}}Cesium.defined(this._drawCommand)&&(this._drawCommand.framebuffer=this.framebuffer,n.push(this._drawCommand))};function cA(e,t,n,i){if(t.length===0||i.length===0)return;n=Cesium.Cartesian3.fromDegrees(n.x,n.y,n.z);let o=t.length*3,r=new Float64Array(o),a=i.length,s=Cesium.IndexDatatype.createTypedArray(o,a),u=0;for(let g=0;g<t.length;g++){let b=new Cesium.Cartesian3,x=Cesium.Cartesian3.fromDegrees(t[g].x,t[g].y,t[g].z);Cesium.Cartesian3.subtract(x,n,b),r[u++]=b.x,r[u++]=b.y,r[u++]=b.z}let l=0;for(let g=0;g<i.length;g++)s[l++]=i[g];let d=new Cesium.GeometryAttributes;d.position=new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:r});let f=Cesium.BoundingSphere.fromVertices(r);return new Cesium.Geometry({attributes:d,indices:s,primitiveType:Cesium.PrimitiveType.TRIANGLES,boundingSphere:f})}Ap.prototype.destroy=function(){return Cesium.destroyObject(this)};var Ic=Ap;function uA(e){return e!=null}var m=uA;var Rp=Ct(__(),1);function ur(e){this.name="DeveloperError",this.message=e;let t;try{throw new Error}catch(n){t=n.stack}this.stack=t}m(Object.create)&&(ur.prototype=Object.create(Error.prototype),ur.prototype.constructor=ur);ur.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return m(this.stack)&&(e+=`
${this.stack.toString()}`),e};ur.throwInstantiationError=function(){throw new ur("This function defines an interface and should not be called directly.")};var fn=ur;var Kt={};Kt.typeOf={};function lA(e){return`${e} is required, actual value was undefined`}function ra(e,t,n){return`Expected ${n} to be typeof ${t}, actual typeof was ${e}`}Kt.defined=function(e,t){if(!m(t))throw new fn(lA(e))};Kt.typeOf.func=function(e,t){if(typeof t!="function")throw new fn(ra(typeof t,"function",e))};Kt.typeOf.string=function(e,t){if(typeof t!="string")throw new fn(ra(typeof t,"string",e))};Kt.typeOf.number=function(e,t){if(typeof t!="number")throw new fn(ra(typeof t,"number",e))};Kt.typeOf.number.lessThan=function(e,t,n){if(Kt.typeOf.number(e,t),t>=n)throw new fn(`Expected ${e} to be less than ${n}, actual value was ${t}`)};Kt.typeOf.number.lessThanOrEquals=function(e,t,n){if(Kt.typeOf.number(e,t),t>n)throw new fn(`Expected ${e} to be less than or equal to ${n}, actual value was ${t}`)};Kt.typeOf.number.greaterThan=function(e,t,n){if(Kt.typeOf.number(e,t),t<=n)throw new fn(`Expected ${e} to be greater than ${n}, actual value was ${t}`)};Kt.typeOf.number.greaterThanOrEquals=function(e,t,n){if(Kt.typeOf.number(e,t),t<n)throw new fn(`Expected ${e} to be greater than or equal to ${n}, actual value was ${t}`)};Kt.typeOf.object=function(e,t){if(typeof t!="object")throw new fn(ra(typeof t,"object",e))};Kt.typeOf.bool=function(e,t){if(typeof t!="boolean")throw new fn(ra(typeof t,"boolean",e))};Kt.typeOf.bigint=function(e,t){if(typeof t!="bigint")throw new fn(ra(typeof t,"bigint",e))};Kt.typeOf.number.equals=function(e,t,n,i){if(Kt.typeOf.number(e,n),Kt.typeOf.number(t,i),n!==i)throw new fn(`${e} must be equal to ${t}, the actual values are ${n} and ${i}`)};var No=Kt;function y_(e,t){return e??t}y_.EMPTY_OBJECT=Object.freeze({});var C=y_;var de={};de.EPSILON1=.1;de.EPSILON2=.01;de.EPSILON3=.001;de.EPSILON4=1e-4;de.EPSILON5=1e-5;de.EPSILON6=1e-6;de.EPSILON7=1e-7;de.EPSILON8=1e-8;de.EPSILON9=1e-9;de.EPSILON10=1e-10;de.EPSILON11=1e-11;de.EPSILON12=1e-12;de.EPSILON13=1e-13;de.EPSILON14=1e-14;de.EPSILON15=1e-15;de.EPSILON16=1e-16;de.EPSILON17=1e-17;de.EPSILON18=1e-18;de.EPSILON19=1e-19;de.EPSILON20=1e-20;de.EPSILON21=1e-21;de.GRAVITATIONALPARAMETER=3986004418e5;de.SOLAR_RADIUS=6955e5;de.LUNAR_RADIUS=1737400;de.SIXTY_FOUR_KILOBYTES=64*1024;de.FOUR_GIGABYTES=4*1024*1024*1024;de.sign=C(Math.sign,function(t){return t=+t,t===0||t!==t?t:t>0?1:-1});de.signNotZero=function(e){return e<0?-1:1};de.toSNorm=function(e,t){return t=C(t,255),Math.round((de.clamp(e,-1,1)*.5+.5)*t)};de.fromSNorm=function(e,t){return t=C(t,255),de.clamp(e,0,t)/t*2-1};de.normalize=function(e,t,n){return n=Math.max(n-t,0),n===0?0:de.clamp((e-t)/n,0,1)};de.sinh=C(Math.sinh,function(t){return(Math.exp(t)-Math.exp(-t))/2});de.cosh=C(Math.cosh,function(t){return(Math.exp(t)+Math.exp(-t))/2});de.lerp=function(e,t,n){return(1-n)*e+n*t};de.PI=Math.PI;de.ONE_OVER_PI=1/Math.PI;de.PI_OVER_TWO=Math.PI/2;de.PI_OVER_THREE=Math.PI/3;de.PI_OVER_FOUR=Math.PI/4;de.PI_OVER_SIX=Math.PI/6;de.THREE_PI_OVER_TWO=3*Math.PI/2;de.TWO_PI=2*Math.PI;de.ONE_OVER_TWO_PI=1/(2*Math.PI);de.RADIANS_PER_DEGREE=Math.PI/180;de.DEGREES_PER_RADIAN=180/Math.PI;de.RADIANS_PER_ARCSECOND=de.RADIANS_PER_DEGREE/3600;de.toRadians=function(e){return e*de.RADIANS_PER_DEGREE};de.toDegrees=function(e){return e*de.DEGREES_PER_RADIAN};de.convertLongitudeRange=function(e){let t=de.TWO_PI,n=e-Math.floor(e/t)*t;return n<-Math.PI?n+t:n>=Math.PI?n-t:n};de.clampToLatitudeRange=function(e){return de.clamp(e,-1*de.PI_OVER_TWO,de.PI_OVER_TWO)};de.negativePiToPi=function(e){return e>=-de.PI&&e<=de.PI?e:de.zeroToTwoPi(e+de.PI)-de.PI};de.zeroToTwoPi=function(e){if(e>=0&&e<=de.TWO_PI)return e;let t=de.mod(e,de.TWO_PI);return Math.abs(t)<de.EPSILON14&&Math.abs(e)>de.EPSILON14?de.TWO_PI:t};de.mod=function(e,t){return de.sign(e)===de.sign(t)&&Math.abs(e)<Math.abs(t)?e:(e%t+t)%t};de.equalsEpsilon=function(e,t,n,i){n=C(n,0),i=C(i,n);let o=Math.abs(e-t);return o<=i||o<=n*Math.max(Math.abs(e),Math.abs(t))};de.lessThan=function(e,t,n){return e-t<-n};de.lessThanOrEquals=function(e,t,n){return e-t<n};de.greaterThan=function(e,t,n){return e-t>n};de.greaterThanOrEquals=function(e,t,n){return e-t>-n};var Pc=[1];de.factorial=function(e){let t=Pc.length;if(e>=t){let n=Pc[t-1];for(let i=t;i<=e;i++){let o=n*i;Pc.push(o),n=o}}return Pc[e]};de.incrementWrap=function(e,t,n){return n=C(n,0),++e,e>t&&(e=n),e};de.isPowerOfTwo=function(e){return e!==0&&(e&e-1)===0};de.nextPowerOfTwo=function(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e,e};de.previousPowerOfTwo=function(e){return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e=(e>>>0)-(e>>>1),e};de.clamp=function(e,t,n){return e<t?t:e>n?n:e};var v_=new Rp.default;de.setRandomNumberSeed=function(e){v_=new Rp.default(e)};de.nextRandomNumber=function(){return v_.random()};de.randomBetween=function(e,t){return de.nextRandomNumber()*(t-e)+e};de.acosClamped=function(e){return Math.acos(de.clamp(e,-1,1))};de.asinClamped=function(e){return Math.asin(de.clamp(e,-1,1))};de.chordLength=function(e,t){return 2*t*Math.sin(e*.5)};de.logBase=function(e,t){return Math.log(e)/Math.log(t)};de.cbrt=C(Math.cbrt,function(t){let n=Math.pow(Math.abs(t),.3333333333333333);return t<0?-n:n});de.log2=C(Math.log2,function(t){return Math.log(t)*Math.LOG2E});de.fog=function(e,t){let n=e*t;return 1-Math.exp(-(n*n))};de.fastApproximateAtan=function(e){return e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)};de.fastApproximateAtan2=function(e,t){let n,i=Math.abs(e);n=Math.abs(t);let o=Math.max(i,n);n=Math.min(i,n);let r=n/o;return i=de.fastApproximateAtan(r),i=Math.abs(t)>Math.abs(e)?de.PI_OVER_TWO-i:i,i=e<0?de.PI-i:i,i=t<0?-i:i,i};var j=de;var Dc=`in vec2 v_textureCoordinates;
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform vec3 u_relativePos;
uniform mat4 u_sceneInverseViewRelative;
uniform sampler2D u_videoColorTexture;
uniform sampler2D u_videoCameraDepthTexture;
uniform mat4 u_videoViewProjectionRelative;
uniform mat4 u_videoInverseViewRelative;
uniform float u_log2FarDepthFromNearPlusOneInVideo;
uniform vec2 u_videoFrustum;
uniform vec4 u_videoViewport;
uniform mat4 u_videoViewportTransformation; 
uniform mat4 u_videoInverseProjection; 
uniform vec4 u_videoFrustumPlanes;
uniform float u_depthType;
uniform float u_alpha;
uniform vec3 u_hsv;
uniform sampler2D u_clipPlaneColorTexture;
uniform vec4 u_clipPlaneColor;
uniform float u_projectMode;
uniform vec4 u_pureColor;
uniform float k1;
uniform float k2;
uniform float textureWidth;
uniform float textureHeight;
uniform vec2 u_videoTextureClipLUPos;
uniform vec2 u_videoTextureClipLBPos;
uniform vec2 u_videoTextureClipRBPos;
uniform vec2 u_videoTextureClipRUPos;
uniform float u_distanceError;

vec3 clipToRelativeWorld(float u,float v)
{
vec2 uv = vec2(u,v);
float depth = czm_unpackDepth(texture(depthTexture, uv));
vec4 eyeCoordinate = czm_windowToEyeCoordinates(uv*czm_viewport.zw, depth);
vec4 worldCoordinate4 = u_sceneInverseViewRelative * eyeCoordinate;
vec3 worldPosition = worldCoordinate4.xyz / worldCoordinate4.w;
return worldPosition;
}
vec4 windowToEyeCoordinatesInVideo2(vec4 fragmentCoordinate)
{
    float x = 2.0 * (fragmentCoordinate.x - u_videoViewport.x) / u_videoViewport.z - 1.0;
    float y = 2.0 * (fragmentCoordinate.y - u_videoViewport.y) / u_videoViewport.w - 1.0;
    float z = (fragmentCoordinate.z - u_videoViewportTransformation[3][2]) / u_videoViewportTransformation[2][2];
    vec4 q = vec4(x, y, z, 1.0);
    q = q/fragmentCoordinate.w;
    if (!(u_videoInverseProjection == mat4(0.0))) 
    {
        q = u_videoInverseProjection * q;
    }
    else
    {
        float top = u_videoFrustumPlanes.x;
        float bottom = u_videoFrustumPlanes.y;
        float left = u_videoFrustumPlanes.z;
        float right = u_videoFrustumPlanes.w;
        float near = u_videoFrustum.x;
        float far = u_videoFrustum.y;
        q.x = (q.x * (right - left) + left + right) * 0.5;
        q.y = (q.y * (top - bottom) + bottom + top) * 0.5;
        q.z = (q.z * (near - far) - near - far) * 0.5;
        q.w = 1.0;
    }
    return q;
}
vec4 windowToEyeCoordinatesInVideo(vec2 fragmentCoordinateXY, float depthOrLogDepth) 
{
  #ifdef LOG_DEPTH
  float near = u_videoFrustum.x;
  float far = u_videoFrustum.y;
  float log2Depth = depthOrLogDepth * u_log2FarDepthFromNearPlusOneInVideo;
  float depthFromNear = pow(2.0, log2Depth) - 1.0;
  float depthFromCamera = depthFromNear + near;
  vec4 windowCoord = vec4(fragmentCoordinateXY, far * float(1.0 - near / depthFromCamera) / float(far - near), 1.0);
  vec4 eyeCoordinate = windowToEyeCoordinatesInVideo2(windowCoord);
  eyeCoordinate.w = 1.0 / depthFromCamera; 
  return eyeCoordinate;
  #else
  vec4 windowCoord = vec4(fragmentCoordinateXY, depthOrLogDepth, 1.0);
  vec4 eyeCoordinate = windowToEyeCoordinatesInVideo2(windowCoord);
  #endif
  return eyeCoordinate;
}
vec3 videoCameraClipToRelativeWorld(float u,float v) 
{
  vec2 uv = vec2(u,v);
  float depth = czm_unpackDepth(texture(u_videoCameraDepthTexture, uv));
  vec4 eyeCoordinate = windowToEyeCoordinatesInVideo(uv*u_videoViewport.zw, depth);
  vec4 worldCoordinate4 = u_videoInverseViewRelative * eyeCoordinate;
  vec3 worldPosition = worldCoordinate4.xyz / worldCoordinate4.w;
  return worldPosition;
}
vec3 rgb2hsv(vec3 c)
{
vec4 K = vec4(0.0, -1.0/3.0, 2.0/3.0, -1.0);
vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y)/(6.0*d+e)), d/(q.x + e), q.x);
}
vec3 hsv2rgb(vec3 c)
{
vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
void main(void){
float depth = czm_unpackDepth(texture(depthTexture, v_textureCoordinates));
out_FragColor = texture(colorTexture, v_textureCoordinates);
vec4 clipColor = texture(u_clipPlaneColorTexture, v_textureCoordinates);
#ifdef CZM_SELECTED_FEATURE
float padx = czm_pixelRatio / czm_viewport.z;
float pady = czm_pixelRatio / czm_viewport.w;
if(czm_selected(vec2(padx, pady))){
return;
}
#endif
if(depth>0.0){
vec3 worldPos = clipToRelativeWorld(v_textureCoordinates.x, v_textureCoordinates.y);
vec4 realWorldPos = vec4(worldPos.x + u_relativePos.x, worldPos.y + u_relativePos.y, worldPos.z + u_relativePos.z, 1.0);
vec4 projectPtInVideo = u_videoViewProjectionRelative * realWorldPos;
projectPtInVideo = projectPtInVideo/projectPtInVideo.w;
if(projectPtInVideo.x >=-1.0 && projectPtInVideo.x <= 1.0
&& projectPtInVideo.y >=-1.0 && projectPtInVideo.y <= 1.0
&& projectPtInVideo.z >=0.0 && projectPtInVideo.z <= 1.0){
vec2 texCoord = vec2(0.5, 0.5) + projectPtInVideo.xy * 0.5;
//Inverse calculation of world coordinates relative to the video camera. added by zak 2021.2.19 
if(u_depthType>2.5 && u_depthType<3.5){
   vec3 worldPtInVideoCamera = videoCameraClipToRelativeWorld(texCoord.x, texCoord.y);   
   float dis = distance(realWorldPos.xyz, worldPtInVideoCamera);
   if(dis > u_distanceError){
  	  return;
   }
}
float maxWidthHeight = textureWidth;
float percent = textureHeight / textureWidth;
vec2 centerUV = vec2((textureWidth / 2.0) / maxWidthHeight, (textureHeight / 2.0) / maxWidthHeight);
vec2 currentUV = vec2(texCoord.x, texCoord.y * percent);
float length_2 = (currentUV.x - centerUV.x) * (currentUV.x - centerUV.x) + (currentUV.y - centerUV.y) * (currentUV.y - centerUV.y);
float length_4 = length_2 * length_2;
texCoord.x = (currentUV.x - centerUV.x) / (k1 * length_2 + k2 * length_4 + 1.0) + centerUV.x;
texCoord.y = (currentUV.y - centerUV.y) / (k1 * length_2 + k2 * length_4 + 1.0) + centerUV.y;
texCoord.y = texCoord.y / percent;
bool intersect = false;
if (((u_videoTextureClipLBPos.y>texCoord.y) != (u_videoTextureClipRBPos.y>texCoord.y)) &&(texCoord.x < 
    (u_videoTextureClipRBPos.x-u_videoTextureClipLBPos.x) * (texCoord.y-u_videoTextureClipLBPos.y) / (u_videoTextureClipRBPos.y-u_videoTextureClipLBPos.y) + u_videoTextureClipLBPos.x)){
      intersect = !intersect;
}
if (((u_videoTextureClipLUPos.y>texCoord.y) != (u_videoTextureClipLBPos.y>texCoord.y)) &&(texCoord.x < 
    (u_videoTextureClipLBPos.x-u_videoTextureClipLUPos.x) * (texCoord.y-u_videoTextureClipLUPos.y) / (u_videoTextureClipLBPos.y-u_videoTextureClipLUPos.y) + u_videoTextureClipLUPos.x)){
      intersect = !intersect;
}
if (((u_videoTextureClipRUPos.y>texCoord.y) != (u_videoTextureClipLUPos.y>texCoord.y)) &&(texCoord.x < 
    (u_videoTextureClipLUPos.x-u_videoTextureClipRUPos.x) * (texCoord.y-u_videoTextureClipRUPos.y) / (u_videoTextureClipLUPos.y-u_videoTextureClipRUPos.y) + u_videoTextureClipRUPos.x)){
      intersect = !intersect;
}
if (((u_videoTextureClipRBPos.y>texCoord.y) != (u_videoTextureClipRUPos.y>texCoord.y)) &&(texCoord.x < 
    (u_videoTextureClipRUPos.x-u_videoTextureClipRBPos.x) * (texCoord.y-u_videoTextureClipRBPos.y) / (u_videoTextureClipRUPos.y-u_videoTextureClipRBPos.y) + u_videoTextureClipRBPos.x)){
      intersect = !intersect;
}
if(!intersect){
  return;
}
vec4 videoColor = texture(u_videoColorTexture, texCoord);
vec3 rgb = videoColor.xyz;
vec3 hsv = rgb2hsv(rgb);
hsv += u_hsv;
rgb = hsv2rgb(hsv);
rgb = clamp(rgb, 0.0, 1.0);
videoColor.xyz = rgb;
if(u_projectMode>0.5 && u_projectMode<1.5){
out_FragColor = (1.0 - u_alpha) * out_FragColor + u_alpha * videoColor;
}else if(u_projectMode>1.5 && u_projectMode<2.5){
if(czm_equalsEpsilon(u_clipPlaneColor.r, clipColor.r, 0.001) && czm_equalsEpsilon(u_clipPlaneColor.g, clipColor.g, 0.001) &&
czm_equalsEpsilon(u_clipPlaneColor.b, clipColor.b, 0.001)){
out_FragColor = (1.0 - u_alpha) * out_FragColor + u_alpha * videoColor;
  }
}else if(u_projectMode>2.5 && u_projectMode<3.5){
out_FragColor = (1.0 - u_alpha) * out_FragColor + u_alpha * videoColor;
}
  }
}
}
`;function At(e){if(!Cesium.defined(e))throw new Cesium.DeveloperError("\u53C2\u6570options\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.viewer))throw new Cesium.DeveloperError("Viewer\u5BF9\u8C61options.viewer\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.videoElement))throw new Cesium.DeveloperError("\u524D\u7AEFvideo\u5BB9\u5668\u7684ID\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.originLon))throw new Cesium.DeveloperError("\u89C2\u5BDF\u70B9\u7ECF\u5EA6\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.originLat))throw new Cesium.DeveloperError("\u89C2\u5BDF\u70B9\u7EAC\u5EA6\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.originHeight))throw new Cesium.DeveloperError("\u89C2\u5BDF\u70B9\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.clipPlaneFramebuffer))throw new Cesium.DeveloperError("\u88C1\u526A\u9762\u5E27\u7F13\u5B58\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.width)||!Cesium.defined(e.height))throw new Cesium.DeveloperError("\u89C6\u9891\u5BBD\u5EA6\u6216\u9AD8\u5EA6\u6CA1\u6709\u5B9A\u4E49\u3002");if(this._videoElement=e.videoElement,!this._videoElement||!(this._videoElement instanceof HTMLVideoElement||this._videoElement instanceof HTMLCanvasElement||this._videoElement instanceof HTMLImageElement))throw new Cesium.DeveloperError("options.videoElement\u5E76\u4E0D\u662F\u89C6\u9891\u5BB9\u5668\u3002");this._videoElement.paused&&this._videoElement.play(),this._projectMode=Cesium.defaultValue(e.projectMode,1),this._depthType=Cesium.defaultValue(e.depthType,0),this._show=Cesium.defaultValue(e.show,!0),this._name=Cesium.defaultValue(e.name,Cesium.createGuid()),this._manufacturer=Cesium.defaultValue(e.manufacturer,"HIKVISION"),this._wsplayer=e.wsplayer,this._wsplayerType=e.wsplayerType,this._wsplayerGBAddress=e.wsplayerGBAddress,this._ptzReverse=Cesium.defaultValue(e.ptzReverse,new Cesium.Cartesian2(0,0)),this._ptzDelay=Cesium.defaultValue(e.ptzDelay,300),this._follow=!1,this._pureColor=Cesium.defaultValue(e.pureColor,new Cesium.Color(1,1,1,1)),this._viewer=e.viewer,this._scene=this._viewer.scene,this._mainCamera=this._scene.camera,this._delayTimerArray=[],this._readyState=0,this._projectionMode=1,this._mainCameraFrontPos=Cesium.Cartesian3.clone(this._mainCamera.position);let t=this._viewer.canvas,n=this._scene._frameState.context;if(!Cesium.defined(n))throw new Cesium.DeveloperError("_scene._frameState.context\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(this.clipPlaneColor=Cesium.defaultValue(e.clipPlaneColor,new Cesium.Color(1,0,0,1)),this.clipPlaneFramebuffer=e.clipPlaneFramebuffer,this.clipPlaneTexture=e.clipPlaneTexture,this.projectionPlanes=[],Cesium.defined(e.projection))for(let i=0;i<e.projection.length;i++)this.projectionPlanes.push(new Ic({viewer:this._viewer,framebuffer:this.clipPlaneFramebuffer,coordinates:e.projection[i],planeColor:this.clipPlaneColor,canvas:t}));else this.projectionPlanes.push(n.defaultTexture);if(this._filterPrimitives=Cesium.defaultValue(e.filterPrimitives,void 0),m(this._filterPrimitives)||(this._filterPrimitives=[]),this._cachedFilterFeatures=Cesium.defaultValue(e.cachedFilterFeatures,void 0),this._originLon=e.originLon,this._originLat=e.originLat,this._originHeight=e.originHeight,this._pitch=Cesium.defaultValue(e.pitch,0),this._heading=Cesium.defaultValue(e.heading,0),this._roll=Cesium.defaultValue(e.roll,0),this._fov=Cesium.defaultValue(e.fov,60),this._videoCameraPos=Cesium.Cartesian3.fromDegrees(this._originLon,this._originLat,this._originHeight),this.videoAlpha=Cesium.defaultValue(e.videoAlpha,1),this.videoAlphaRate=1,this._videoVisiableAngle=45,this._videoGradientAngle=30,this.isEditMode=Cesium.defaultValue(e.isEditMode,!1),this.videoHsv=Cesium.defaultValue(e.hsvParam,new Cesium.Cartesian3(0,0,0)),this.videoCamera=void 0,this.videoWidth=e.width,this.videoHeight=e.height,this.videoViewport=new Cesium.BoundingRectangle(0,0,t.width,t.height),this.videoView=void 0,this.videoUniform={videoInverseViewRelative:new Cesium.Matrix4,log2FarDepthFromNearPlusOneInVideo:0,videoFrustum:new Cesium.Cartesian2,videoViewport:new Cesium.Cartesian4,videoViewportTransformation:new Cesium.Matrix4,videoInverseProjection:new Cesium.Matrix4,videoFrustumPlanes:new Cesium.Cartesian4},this._videoTexture=void 0,this._videoStage=void 0,this._panPos=Cesium.defaultValue(e.pan,0),this._tiltPos=Cesium.defaultValue(e.tilt,0),this._zoomPos=Cesium.defaultValue(e.zoom,1),this._ptzType=Cesium.defaultValue(e.ptzType,"Degree"),this._ptzZoomRatio=Cesium.defaultValue(e.ptzZoomRatio,4),this._auxiliaryPTZ=Cesium.defaultValue(e.auxiliaryPTZ,[]),this._panCurrent=0,this._tiltCurrent=0,this._zoomCurrent=0,this._offsetAngle=Cesium.defaultValue(e.offsetAngle,0),this.minTilt=Cesium.defaultValue(e.minTilt,-90),this.maxTilt=Cesium.defaultValue(e.maxTilt,40),this.cameraInversion=Cesium.defaultValue(e.cameraInversion,!0),this._nearClip=Cesium.defaultValue(e.nearClip,.01),this._farClip=Cesium.defaultValue(e.farClip,100),this._distanceError=Cesium.defaultValue(e.distanceError,.1),this._distortion=Cesium.defaultValue(e.distortion,new Cesium.Cartesian2(0,0)),this._visibleDistance=Cesium.defaultValue(e.visibleDistance,100),this.targetPosition=new Cesium.Cartesian3,this.targetOrientation=new Cesium.Cartesian3,this.targetZoom=1,this._layer=e.layer,this._viewPoint=e.viewPoint,e.clipPoints){let i=e.clipPoints;this._videoTextureClipLUPos=new Cesium.Cartesian2(i[0],i[1]),this._videoTextureClipLBPos=new Cesium.Cartesian2(i[2],i[3]),this._videoTextureClipRUPos=new Cesium.Cartesian2(i[4],i[5]),this._videoTextureClipRBPos=new Cesium.Cartesian2(i[6],i[7])}else this._videoTextureClipLUPos=new Cesium.Cartesian2(0,1),this._videoTextureClipLBPos=new Cesium.Cartesian2(0,0),this._videoTextureClipRUPos=new Cesium.Cartesian2(1,1),this._videoTextureClipRBPos=new Cesium.Cartesian2(1,0);this.delayPan="",this.delayTilt="",this.delayZoom="",this._boundingSphere=new Cesium.BoundingSphere,this._videoCameraPostureChanged=!1,this._changed=new Cesium.Event,this._isRequestIDB=!1,this._cameraPromise=Cesium.defer()}Object.defineProperties(At.prototype,{videoStage:{get:function(){return this._videoStage}},name:{get:function(){return this._name}},show:{get:function(){return this._show},set:function(e){this._show=e,this._videoStage&&(this._videoStage.enabled=e),this._wsplayer&&(this._wsplayer.needRecv=e)}},boundingSphere:{get:function(){return this._computeBoundingSphere()}},changed:{get:function(){return this._changed}},distanceError:{get:function(){return this._distanceError},set:function(e){if(e<=0)throw new Cesium.DeveloperError("invalid distanceError value.");this._distanceError=e}},visibleDistance:{get:function(){return this._visibleDistance},set:function(e){this._visibleDistance=e}},cameraPromise:{get:function(){return this._cameraPromise.promise}},projectionMode:{get:function(){return this._projectionMode}}});function pA(e){let t=e._scene._frameState;if(Cesium.defined(t)&&(!(e._videoElement instanceof HTMLVideoElement)||e._videoElement.readyState>=2))return new Cesium.Texture({context:t.context,source:e._videoElement,sampler:new Cesium.Sampler({wrapS:Cesium.TextureWrap.CLAMP_TO_EDGE,wrapT:Cesium.TextureWrap.CLAMP_TO_EDGE,minificationFilter:Cesium.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium.TextureMagnificationFilter.LINEAR})})}function b_(e){let t=Cesium.Cartesian3.fromDegrees(e._originLon,e._originLat,e._originHeight),n=new Cesium.Camera(e._viewer.scene);n._name=`vCamera_${e._name}`,e.videoView=new Cesium.View(e._viewer.scene,n,e.videoViewport),e.videoView._name=`vView_${e._name}`,n.setView({destination:t,orientation:{heading:Cesium.Math.toRadians(e._heading),pitch:Cesium.Math.toRadians(e._pitch),roll:Cesium.Math.toRadians(e._roll)}});let i=n.frustum;return i.fov=Cesium.Math.toRadians(e._fov),i.aspectRatio=e.videoWidth/e.videoHeight,i.near=e._nearClip,i.far=e._farClip,i._fovy=i.aspectRatio<=1?i.fov:Math.atan(Math.tan(i.fov*.5)/i.aspectRatio)*2,i.top=i.near*Math.tan(.5*i._fovy),i.bottom=-i.top,i.right=i.aspectRatio*i.top,i.left=-i.right,n}function dA(e,t,n){let i=n.viewport,o=i.width,r=i.height,a=e.videoView._name;e.videoView=Cesium.defined(e.videoView)&&e.videoView.destroy(),e.videoViewport=new Cesium.BoundingRectangle(0,0,o,r),e.videoView=new Cesium.View(t,e.videoCamera,e.videoViewport),e.videoView._name=a,t.view=e.videoView;let s=e.videoView.passState;s.viewport=Cesium.BoundingRectangle.clone(e.videoViewport,s.viewport),s=t.view.passState,t.jobScheduler.disableThisFrame(),fA(t);let u=t.frameState,l=u.context.uniformState;u.invertClassification=!1,u.passes.pick=!1,l.update(u),t.updateAndExecuteRttCommands(s,new Cesium.Color(0,0,0,1))}function fA(e){let t=e.frameState,n=e.camera;t.camera=n,t.cullingVolume=n.frustum.computeCullingVolume(n.positionWC,n.directionWC,n.upWC),t.useLogDepth=e._logDepthBuffer&&!(n.frustum instanceof Cesium.OrthographicFrustum||n.frustum instanceof Cesium.OrthographicOffCenterFrustum)}function mA(e,t){if(hA(e,t),e.videoAlphaRate===0)return;let n=e._scene,i=n.view;if(e._depthType>2.5&&e._depthType<3.5&&(!e._mainCameraFrontPos.equals(i.camera.position)||e._videoCameraPostureChanged)&&e.show){let o=new Cesium.PostProcessStageCollection;o.fxaa.enabled=!1;let r=n.postProcessStages;if(n.postProcessStages=o,dA(e,n,i),Cesium.defined(e.videoView)&&Cesium.defined(e.videoView.passState.context.uniformState)){let a=e.videoView.passState.context.uniformState;e.videoUniform.videoInverseViewRelative=Cesium.Matrix4.setTranslation(a.inverseView,new Cesium.Cartesian3,new Cesium.Matrix4),e.videoUniform.log2FarDepthFromNearPlusOneInVideo=a.log2FarDepthFromNearPlusOne,e.videoUniform.videoFrustum=Cesium.Cartesian2.clone(a.currentFrustum),e.videoUniform.videoViewport=new Cesium.Cartesian4(a.viewport.x,a.viewport.y,a.viewport.width,a.viewport.height),e.videoUniform.videoViewportTransformation=Cesium.Matrix4.clone(a.viewportTransformation),e.videoUniform.videoInverseProjection=Cesium.Matrix4.clone(a.inverseProjection),e.videoUniform.videoFrustumPlanes=Cesium.Cartesian4.clone(a.frustumPlanes)}e._scene.view=i,e._scene.postProcessStages=r,o=void 0,e._mainCameraFrontPos=Cesium.Cartesian3.clone(i.camera.position)}e._videoCameraPostureChanged=!1}function hA(e,t){if(e._videoStage.selected=[],e._filterPrimitives.cesium3DTileNames.length===0&&e._filterPrimitives.cesium3DTileIds.length===0&&e._filterPrimitives.entityIds.length===0){e._cachedFilterFeatures._features=[];return}if(Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._frameNumber===t.frameNumber){e._videoStage.selected=e._cachedFilterFeatures._features;return}else Cesium.defined(e._cachedFilterFeatures)&&(e._cachedFilterFeatures._frameNumber=t.frameNumber,e._cachedFilterFeatures._features=[]);let i=e._scene._primitives;for(let r=0;r<i.length;r++){let a=i.get(r);if(a instanceof Cesium.Cesium3DTileset){if(!a.ready)continue;if(a.asset.tilesetVersion.indexOf("lodmodel")>-1){let u=a._selectedTiles;for(let l=0;l<u.length;l++){let d=u[l].content;if(d instanceof Cesium.Batched3DModel3DTileContent||d instanceof Cesium.Instanced3DModel3DTileContent){d.featuresLength>0&&d.getFeature(0);let f=d.batchTable,g=d._features;for(let x=0;x<d.featuresLength;x++)(e._filterPrimitives.cesium3DTileIds.indexOf(f._properties.id[x])>-1||e._filterPrimitives.cesium3DTileNames.indexOf(f._properties.name[x])>-1)&&(e._videoStage.selected.push(g[x]),Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._features.push(g[x]));let b=d._model.ev_E3MInternalInstance.modelInstanceCollections;for(let x=0;x<b.length;x++){d._model.ev_E3MInternalInstance.getFeature(b[x],0);let T=b[x].batchTable,R=b[x]._features;for(let D=0;D<b[x].featuresLength;D++)(e._filterPrimitives.cesium3DTileIds.indexOf(T._properties.id[D])>-1||e._filterPrimitives.cesium3DTileNames.indexOf(T._properties.name[D])>-1)&&(e._videoStage.selected.push(R[D]),Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._features.push(R[D]))}}else if(d instanceof Cesium.Composite3DTileContent){let f=d.innerContents;for(let g=0;g<f.length;g++)if(f[g]instanceof Cesium.Batched3DModel3DTileContent||f[g]instanceof Cesium.Instanced3DModel3DTileContent){f[g].featuresLength>0&&f[g].getFeature(0);let b=f[g].batchTable,x=f[g]._features;for(let R=0;R<f[g].featuresLength;R++)(e._filterPrimitives.cesium3DTileIds.indexOf(b._properties.id[R])>-1||e._filterPrimitives.cesium3DTileNames.indexOf(b._properties.name[R])>-1)&&(e._videoStage.selected.push(x[R]),Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._features.push(x[R]));let T=f[g]._model.ev_E3MInternalInstance.modelInstanceCollections;for(let R=0;R<T.length;R++){f[g]._model.ev_E3MInternalInstance.getFeature(T[R],0);let D=T[R].batchTable,M=T[R]._features;for(let N=0;N<T[R].featuresLength;N++)(e._filterPrimitives.cesium3DTileIds.indexOf(D._properties.id[N])>-1||e._filterPrimitives.cesium3DTileNames.indexOf(D._properties.name[N])>-1)&&(e._videoStage.selected.push(M[N]),Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._features.push(M[N]))}}}}}}else if(a instanceof Cesium.Model)Cesium.defined(a.id)&&a.id instanceof Cesium.Entity&&e._filterPrimitives.entityIds.indexOf(a.id.id)>-1&&(e._videoStage.selected.push(a),Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._features.push(a));else if(a instanceof Cesium.PrimitiveCollection)for(let s=0;s<a.length;s++){let u=a.get(s);if(u instanceof Cesium.PrimitiveCollection)for(let l=0;l<u.length;l++){let d=u.get(l);if(Cesium.defined(d._instanceIds))for(let f=0;f<d._instanceIds.length;f++){let g=d._instanceIds[f];e._filterPrimitives.entityIds.indexOf(g.id)>-1&&(e._videoStage.selected.push(d),Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._features.push(d))}}else console.log("filterProjectedFeatures PrimitiveCollection is empty!")}}let o=e._viewer.entities;if(o instanceof Cesium.EntityCollection)for(let r=0;r<o.values.length;r++){let a=o.values[r];if(a instanceof Cesium.Entity){let s=a;if(e._filterPrimitives.entityIds.indexOf(s.id)>-1){let u=e._scene.context._pickObjects;for(let l in u){let d=u[l];Cesium.defined(d.id)&&Cesium.defined(d.id.id)&&d.id.id===s.id&&e._videoStage.selected.push(d.primitive)}}}}}At.prototype.checkPlay=function(){if(!this._show)return this._wsplayer&&this._wsplayer.socketConnect&&this._wsplayer.stop(),!1;if(this._checkVideoCameraAngle(),this.videoAlphaRate===0)return!1;let e=this._mainCamera.positionWC;if(Cesium.Cartesian3.distance(e,this._videoCameraPos)>this._visibleDistance)return this._wsplayer&&this._wsplayer.socketConnect&&this._wsplayer.stop(),!1;if(this._wsplayer&&this._wsplayer instanceof zi&&!this._wsplayer.socketConnect){if(this._wsplayerType==="rtsp"?this._wsplayer.openws():this._wsplayerType==="gb"&&(this._wsplayer.openws(),this._wsplayer.playGB(),this._wsplayer.playGBDevice(this._wsplayerGBAddress)),!this._videoTexture&&this._isRequestIDB){let n=this;if(this._isRequestIDB=!0,this._wsplayer&&this._wsplayer.wsserverurl){let i=this._wsplayer.wsserverurl.split("//");if(i.length==2){let o=`https://${i[1]}/addCamera`,r=this._wsplayerType.toUpperCase(),a=this._wsplayer.mRtspurl;r==="GB"&&(a=this._wsplayerGBAddress);let s=new XMLHttpRequest;s.open("POST",o,!0),s.responseType="text",s.send(JSON.stringify({url:a,type:r})),s.onload=function(){if(s.readyState==4&&s.status==200){let u=`https://${i[1]}/getCameraPicture`,l=new XMLHttpRequest;l.open("POST",u,!0),l.responseType="text",l.send(JSON.stringify({url:a})),l.onload=function(){if(s.readyState==4&&s.status==200){let d=`data:image/jpg;base64,${l.responseText}`;if(!n._videoTexture){let f=Cesium.Resource.createIfNeeded(d),g=Cesium.when(f.fetchImage(),function(b){n._videoTexture||(n.videoWidth=b.width,n.videoHeight=b.height,n._videoTexture=new Cesium.Texture({context:n._scene._frameState.context,source:b,pixelFormat:Cesium.PixelFormat.RGB,sampler:new Cesium.Sampler({wrapS:Cesium.TextureWrap.CLAMP_TO_EDGE,wrapT:Cesium.TextureWrap.CLAMP_TO_EDGE,minificationFilter:Cesium.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium.TextureMagnificationFilter.LINEAR})}))})}}}}}}}}}else this._wsplayer&&this._wsplayer instanceof Vr&&!this._wsplayer.socketConnect&&this._wsplayer.play();return!0};At.prototype.preRender=function(){if(this.checkPlay())this._videoStage&&(this._videoStage.enabled=!0);else{this._videoStage&&(this._videoStage.enabled=!1);return}if(this._videoElement.readyState>=1&&!this._videoElement.paused&&Cesium.defined(this._videoTexture)&&(this._videoElement.width!=this._videoElement.videoWidth&&(this._videoElement.width=this._videoElement.videoWidth),this._videoElement.height!=this._videoElement.videoHeight&&(this._videoElement.height=this._videoElement.videoHeight),this._videoTexture.copyFrom({source:this._videoElement})),Cesium.defined(this._videoTexture)&&this._videoElement.readyState>=2&&!(this._videoElement instanceof HTMLVideoElement)&&(this._videoTexture._height!=this._videoElement.videoHeight||this._videoTexture._width!=this._videoElement.videoWidth)&&(this._videoTexture.destroy(),this.videoWidth=this._videoElement.videoWidth,this.videoHeight=this._videoElement.videoHeight,this._readyState=0),this._videoElement.readyState>=2&&this._readyState==0||Cesium.defined(this._videoTexture)&&!Cesium.defined(this._videoStage)){console.log(`create post process:${new Date().getTime()}`),this._readyState=1,Cesium.defined(this._videoTexture)||(this.videoWidth=this._videoElement.videoWidth,this.videoHeight=this._videoElement.videoHeight,this._videoTexture=pA(this)),this.videoCamera=b_(this),this._cameraPromise.resolve(this.videoCamera);let e="dmFyeWluZyB2ZWMyIHZfdGV4dHVyZUNvb3JkaW5hdGVzOwp1bmlmb3JtIHNhbXBsZXIyRCBjb2xvclRleHR1cmU7CnVuaWZvcm0gc2FtcGxlcjJEIGRlcHRoVGV4dHVyZTsKdW5pZm9ybSB2ZWMzIHVfcmVsYXRpdmVQb3M7CnVuaWZvcm0gbWF0NCB1X3NjZW5lSW52ZXJzZVZpZXdSZWxhdGl2ZTsKdW5pZm9ybSBzYW1wbGVyMkQgdV92aWRlb0NvbG9yVGV4dHVyZTsKdW5pZm9ybSBzYW1wbGVyMkQgdV92aWRlb0NhbWVyYURlcHRoVGV4dHVyZTsKdW5pZm9ybSBtYXQ0IHVfdmlkZW9WaWV3UHJvamVjdGlvblJlbGF0aXZlOwp1bmlmb3JtIG1hdDQgdV92aWRlb0ludmVyc2VWaWV3UmVsYXRpdmU7CnVuaWZvcm0gZmxvYXQgdV9sb2cyRmFyRGVwdGhGcm9tTmVhclBsdXNPbmVJblZpZGVvOwp1bmlmb3JtIHZlYzIgdV92aWRlb0ZydXN0dW07CnVuaWZvcm0gdmVjNCB1X3ZpZGVvVmlld3BvcnQ7CnVuaWZvcm0gbWF0NCB1X3ZpZGVvVmlld3BvcnRUcmFuc2Zvcm1hdGlvbjsgCnVuaWZvcm0gbWF0NCB1X3ZpZGVvSW52ZXJzZVByb2plY3Rpb247IAp1bmlmb3JtIHZlYzQgdV92aWRlb0ZydXN0dW1QbGFuZXM7CnVuaWZvcm0gZmxvYXQgdV9kZXB0aFR5cGU7CnVuaWZvcm0gZmxvYXQgdV9hbHBoYTsKdW5pZm9ybSB2ZWMzIHVfaHN2Owp1bmlmb3JtIHNhbXBsZXIyRCB1X2NsaXBQbGFuZUNvbG9yVGV4dHVyZTsKdW5pZm9ybSB2ZWM0IHVfY2xpcFBsYW5lQ29sb3I7CnVuaWZvcm0gZmxvYXQgdV9wcm9qZWN0TW9kZTsKdW5pZm9ybSB2ZWM0IHVfcHVyZUNvbG9yOwp1bmlmb3JtIGZsb2F0IGsxOwp1bmlmb3JtIGZsb2F0IGsyOwp1bmlmb3JtIGZsb2F0IHRleHR1cmVXaWR0aDsKdW5pZm9ybSBmbG9hdCB0ZXh0dXJlSGVpZ2h0Owp2ZWMzIGNsaXBUb1JlbGF0aXZlV29ybGQoZmxvYXQgdSxmbG9hdCB2KQp7CnZlYzIgdXYgPSB2ZWMyKHUsdik7CmZsb2F0IGRlcHRoID0gY3ptX3VucGFja0RlcHRoKHRleHR1cmUyRChkZXB0aFRleHR1cmUsIHV2KSk7CnZlYzQgZXllQ29vcmRpbmF0ZSA9IGN6bV93aW5kb3dUb0V5ZUNvb3JkaW5hdGVzKHV2KmN6bV92aWV3cG9ydC56dywgZGVwdGgpOwp2ZWM0IHdvcmxkQ29vcmRpbmF0ZTQgPSB1X3NjZW5lSW52ZXJzZVZpZXdSZWxhdGl2ZSAqIGV5ZUNvb3JkaW5hdGU7CnZlYzMgd29ybGRQb3NpdGlvbiA9IHdvcmxkQ29vcmRpbmF0ZTQueHl6IC8gd29ybGRDb29yZGluYXRlNC53OwpyZXR1cm4gd29ybGRQb3NpdGlvbjsKfQp2ZWM0IHdpbmRvd1RvRXllQ29vcmRpbmF0ZXNJblZpZGVvMih2ZWM0IGZyYWdtZW50Q29vcmRpbmF0ZSkKewogICAgZmxvYXQgeCA9IDIuMCAqIChmcmFnbWVudENvb3JkaW5hdGUueCAtIHVfdmlkZW9WaWV3cG9ydC54KSAvIHVfdmlkZW9WaWV3cG9ydC56IC0gMS4wOwogICAgZmxvYXQgeSA9IDIuMCAqIChmcmFnbWVudENvb3JkaW5hdGUueSAtIHVfdmlkZW9WaWV3cG9ydC55KSAvIHVfdmlkZW9WaWV3cG9ydC53IC0gMS4wOwogICAgZmxvYXQgeiA9IChmcmFnbWVudENvb3JkaW5hdGUueiAtIHVfdmlkZW9WaWV3cG9ydFRyYW5zZm9ybWF0aW9uWzNdWzJdKSAvIHVfdmlkZW9WaWV3cG9ydFRyYW5zZm9ybWF0aW9uWzJdWzJdOwogICAgdmVjNCBxID0gdmVjNCh4LCB5LCB6LCAxLjApOwogICAgcSA9IHEvZnJhZ21lbnRDb29yZGluYXRlLnc7CiAgICBpZiAoISh1X3ZpZGVvSW52ZXJzZVByb2plY3Rpb24gPT0gbWF0NCgwLjApKSkgCiAgICB7CiAgICAgICAgcSA9IHVfdmlkZW9JbnZlcnNlUHJvamVjdGlvbiAqIHE7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgZmxvYXQgdG9wID0gdV92aWRlb0ZydXN0dW1QbGFuZXMueDsKICAgICAgICBmbG9hdCBib3R0b20gPSB1X3ZpZGVvRnJ1c3R1bVBsYW5lcy55OwogICAgICAgIGZsb2F0IGxlZnQgPSB1X3ZpZGVvRnJ1c3R1bVBsYW5lcy56OwogICAgICAgIGZsb2F0IHJpZ2h0ID0gdV92aWRlb0ZydXN0dW1QbGFuZXMudzsKICAgICAgICBmbG9hdCBuZWFyID0gdV92aWRlb0ZydXN0dW0ueDsKICAgICAgICBmbG9hdCBmYXIgPSB1X3ZpZGVvRnJ1c3R1bS55OwogICAgICAgIHEueCA9IChxLnggKiAocmlnaHQgLSBsZWZ0KSArIGxlZnQgKyByaWdodCkgKiAwLjU7CiAgICAgICAgcS55ID0gKHEueSAqICh0b3AgLSBib3R0b20pICsgYm90dG9tICsgdG9wKSAqIDAuNTsKICAgICAgICBxLnogPSAocS56ICogKG5lYXIgLSBmYXIpIC0gbmVhciAtIGZhcikgKiAwLjU7CiAgICAgICAgcS53ID0gMS4wOwogICAgfQogICAgcmV0dXJuIHE7Cn0KdmVjNCB3aW5kb3dUb0V5ZUNvb3JkaW5hdGVzSW5WaWRlbyh2ZWMyIGZyYWdtZW50Q29vcmRpbmF0ZVhZLCBmbG9hdCBkZXB0aE9yTG9nRGVwdGgpIAp7CiAgI2lmZGVmIExPR19ERVBUSAogIGZsb2F0IG5lYXIgPSB1X3ZpZGVvRnJ1c3R1bS54OwogIGZsb2F0IGZhciA9IHVfdmlkZW9GcnVzdHVtLnk7CiAgZmxvYXQgbG9nMkRlcHRoID0gZGVwdGhPckxvZ0RlcHRoICogdV9sb2cyRmFyRGVwdGhGcm9tTmVhclBsdXNPbmVJblZpZGVvOwogIGZsb2F0IGRlcHRoRnJvbU5lYXIgPSBwb3coMi4wLCBsb2cyRGVwdGgpIC0gMS4wOwogIGZsb2F0IGRlcHRoRnJvbUNhbWVyYSA9IGRlcHRoRnJvbU5lYXIgKyBuZWFyOwogIHZlYzQgd2luZG93Q29vcmQgPSB2ZWM0KGZyYWdtZW50Q29vcmRpbmF0ZVhZLCBmYXIgKiBmbG9hdCgxLjAgLSBuZWFyIC8gZGVwdGhGcm9tQ2FtZXJhKSAvIGZsb2F0KGZhciAtIG5lYXIpLCAxLjApOwogIHZlYzQgZXllQ29vcmRpbmF0ZSA9IHdpbmRvd1RvRXllQ29vcmRpbmF0ZXNJblZpZGVvMih3aW5kb3dDb29yZCk7CiAgZXllQ29vcmRpbmF0ZS53ID0gMS4wIC8gZGVwdGhGcm9tQ2FtZXJhOyAKICByZXR1cm4gZXllQ29vcmRpbmF0ZTsKICAjZWxzZQogIHZlYzQgd2luZG93Q29vcmQgPSB2ZWM0KGZyYWdtZW50Q29vcmRpbmF0ZVhZLCBkZXB0aE9yTG9nRGVwdGgsIDEuMCk7CiAgdmVjNCBleWVDb29yZGluYXRlID0gd2luZG93VG9FeWVDb29yZGluYXRlc0luVmlkZW8yKHdpbmRvd0Nvb3JkKTsKICAjZW5kaWYKICByZXR1cm4gZXllQ29vcmRpbmF0ZTsKfQp2ZWMzIHZpZGVvQ2FtZXJhQ2xpcFRvUmVsYXRpdmVXb3JsZChmbG9hdCB1LGZsb2F0IHYpIAp7CiAgdmVjMiB1diA9IHZlYzIodSx2KTsKICBmbG9hdCBkZXB0aCA9IGN6bV91bnBhY2tEZXB0aCh0ZXh0dXJlMkQodV92aWRlb0NhbWVyYURlcHRoVGV4dHVyZSwgdXYpKTsKICB2ZWM0IGV5ZUNvb3JkaW5hdGUgPSB3aW5kb3dUb0V5ZUNvb3JkaW5hdGVzSW5WaWRlbyh1dip1X3ZpZGVvVmlld3BvcnQuencsIGRlcHRoKTsKICB2ZWM0IHdvcmxkQ29vcmRpbmF0ZTQgPSB1X3ZpZGVvSW52ZXJzZVZpZXdSZWxhdGl2ZSAqIGV5ZUNvb3JkaW5hdGU7CiAgdmVjMyB3b3JsZFBvc2l0aW9uID0gd29ybGRDb29yZGluYXRlNC54eXogLyB3b3JsZENvb3JkaW5hdGU0Lnc7CiAgcmV0dXJuIHdvcmxkUG9zaXRpb247Cn0KdmVjMyByZ2IyaHN2KHZlYzMgYykKewp2ZWM0IEsgPSB2ZWM0KDAuMCwgLTEuMC8zLjAsIDIuMC8zLjAsIC0xLjApOwp2ZWM0IHAgPSBtaXgodmVjNChjLmJnLCBLLnd6KSwgdmVjNChjLmdiLCBLLnh5KSwgc3RlcChjLmIsIGMuZykpOwp2ZWM0IHEgPSBtaXgodmVjNChwLnh5dywgYy5yKSwgdmVjNChjLnIsIHAueXp4KSwgc3RlcChwLngsIGMucikpOwpmbG9hdCBkID0gcS54IC0gbWluKHEudywgcS55KTsKZmxvYXQgZSA9IDEuMGUtMTA7CnJldHVybiB2ZWMzKGFicyhxLnogKyAocS53IC0gcS55KS8oNi4wKmQrZSkpLCBkLyhxLnggKyBlKSwgcS54KTsKfQp2ZWMzIGhzdjJyZ2IodmVjMyBjKQp7CnZlYzQgSyA9IHZlYzQoMS4wLCAyLjAvMy4wLCAxLjAvMy4wLCAzLjApOwp2ZWMzIHAgPSBhYnMoZnJhY3QoYy54eHggKyBLLnh5eikgKiA2LjAgLSBLLnd3dyk7CnJldHVybiBjLnogKiBtaXgoSy54eHgsIGNsYW1wKHAgLSBLLnh4eCwgMC4wLCAxLjApLCBjLnkpOwp9CnZvaWQgbWFpbih2b2lkKXsKZmxvYXQgZGVwdGggPSBjem1fdW5wYWNrRGVwdGgodGV4dHVyZTJEKGRlcHRoVGV4dHVyZSwgdl90ZXh0dXJlQ29vcmRpbmF0ZXMpKTsKZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKGNvbG9yVGV4dHVyZSwgdl90ZXh0dXJlQ29vcmRpbmF0ZXMpOwp2ZWM0IGNsaXBDb2xvciA9IHRleHR1cmUyRCh1X2NsaXBQbGFuZUNvbG9yVGV4dHVyZSwgdl90ZXh0dXJlQ29vcmRpbmF0ZXMpOwojaWZkZWYgQ1pNX1NFTEVDVEVEX0ZFQVRVUkUKZmxvYXQgcGFkeCA9IGN6bV9waXhlbFJhdGlvIC8gY3ptX3ZpZXdwb3J0Lno7CmZsb2F0IHBhZHkgPSBjem1fcGl4ZWxSYXRpbyAvIGN6bV92aWV3cG9ydC53OwppZihjem1fc2VsZWN0ZWQodmVjMihwYWR4LCBwYWR5KSkpewpyZXR1cm47Cn0KI2VuZGlmCmlmKGRlcHRoPjAuMCl7CnZlYzMgd29ybGRQb3MgPSBjbGlwVG9SZWxhdGl2ZVdvcmxkKHZfdGV4dHVyZUNvb3JkaW5hdGVzLngsIHZfdGV4dHVyZUNvb3JkaW5hdGVzLnkpOwp2ZWM0IHJlYWxXb3JsZFBvcyA9IHZlYzQod29ybGRQb3MueCArIHVfcmVsYXRpdmVQb3MueCwgd29ybGRQb3MueSArIHVfcmVsYXRpdmVQb3MueSwgd29ybGRQb3MueiArIHVfcmVsYXRpdmVQb3MueiwgMS4wKTsKdmVjNCBwcm9qZWN0UHRJblZpZGVvID0gdV92aWRlb1ZpZXdQcm9qZWN0aW9uUmVsYXRpdmUgKiByZWFsV29ybGRQb3M7CnByb2plY3RQdEluVmlkZW8gPSBwcm9qZWN0UHRJblZpZGVvL3Byb2plY3RQdEluVmlkZW8udzsKaWYocHJvamVjdFB0SW5WaWRlby54ID49LTEuMCAmJiBwcm9qZWN0UHRJblZpZGVvLnggPD0gMS4wCiYmIHByb2plY3RQdEluVmlkZW8ueSA+PS0xLjAgJiYgcHJvamVjdFB0SW5WaWRlby55IDw9IDEuMAomJiBwcm9qZWN0UHRJblZpZGVvLnogPj0wLjAgJiYgcHJvamVjdFB0SW5WaWRlby56IDw9IDEuMCl7CnZlYzIgdGV4Q29vcmQgPSB2ZWMyKDAuNSwgMC41KSArIHByb2plY3RQdEluVmlkZW8ueHkgKiAwLjU7Ci8vSW52ZXJzZSBjYWxjdWxhdGlvbiBvZiB3b3JsZCBjb29yZGluYXRlcyByZWxhdGl2ZSB0byB0aGUgdmlkZW8gY2FtZXJhLiBhZGRlZCBieSB6YWsgMjAyMS4yLjE5IAppZih1X2RlcHRoVHlwZT4yLjUgJiYgdV9kZXB0aFR5cGU8My41KXsKICAgdmVjMyB3b3JsZFB0SW5WaWRlb0NhbWVyYSA9IHZpZGVvQ2FtZXJhQ2xpcFRvUmVsYXRpdmVXb3JsZCh0ZXhDb29yZC54LCB0ZXhDb29yZC55KTsgICAKICAgZmxvYXQgZGlzID0gZGlzdGFuY2UocmVhbFdvcmxkUG9zLnh5eiwgd29ybGRQdEluVmlkZW9DYW1lcmEpOwogICBpZihkaXMgPiAxLjApewogIAkgIHJldHVybjsKICAgfQp9CmZsb2F0IG1heFdpZHRoSGVpZ2h0ID0gdGV4dHVyZVdpZHRoOwpmbG9hdCBwZXJjZW50ID0gdGV4dHVyZUhlaWdodCAvIHRleHR1cmVXaWR0aDsKdmVjMiBjZW50ZXJVViA9IHZlYzIoKHRleHR1cmVXaWR0aCAvIDIuMCkgLyBtYXhXaWR0aEhlaWdodCwgKHRleHR1cmVIZWlnaHQgLyAyLjApIC8gbWF4V2lkdGhIZWlnaHQpOwp2ZWMyIGN1cnJlbnRVViA9IHZlYzIodGV4Q29vcmQueCwgdGV4Q29vcmQueSAqIHBlcmNlbnQpOwpmbG9hdCBsZW5ndGhfMiA9IChjdXJyZW50VVYueCAtIGNlbnRlclVWLngpICogKGN1cnJlbnRVVi54IC0gY2VudGVyVVYueCkgKyAoY3VycmVudFVWLnkgLSBjZW50ZXJVVi55KSAqIChjdXJyZW50VVYueSAtIGNlbnRlclVWLnkpOwpmbG9hdCBsZW5ndGhfNCA9IGxlbmd0aF8yICogbGVuZ3RoXzI7CnRleENvb3JkLnggPSAoY3VycmVudFVWLnggLSBjZW50ZXJVVi54KSAvIChrMSAqIGxlbmd0aF8yICsgazIgKiBsZW5ndGhfNCArIDEuMCkgKyBjZW50ZXJVVi54Owp0ZXhDb29yZC55ID0gKGN1cnJlbnRVVi55IC0gY2VudGVyVVYueSkgLyAoazEgKiBsZW5ndGhfMiArIGsyICogbGVuZ3RoXzQgKyAxLjApICsgY2VudGVyVVYueTsKdGV4Q29vcmQueSA9IHRleENvb3JkLnkgLyBwZXJjZW50Owp2ZWM0IHZpZGVvQ29sb3IgPSB0ZXh0dXJlMkQodV92aWRlb0NvbG9yVGV4dHVyZSwgdGV4Q29vcmQpOwp2ZWMzIHJnYiA9IHZpZGVvQ29sb3IueHl6Owp2ZWMzIGhzdiA9IHJnYjJoc3YocmdiKTsKaHN2ICs9IHVfaHN2OwpyZ2IgPSBoc3YycmdiKGhzdik7CnJnYiA9IGNsYW1wKHJnYiwgMC4wLCAxLjApOwp2aWRlb0NvbG9yLnh5eiA9IHJnYjsKaWYodV9wcm9qZWN0TW9kZT4wLjUgJiYgdV9wcm9qZWN0TW9kZTwxLjUpewpnbF9GcmFnQ29sb3IgPSAoMS4wIC0gdV9hbHBoYSkgKiBnbF9GcmFnQ29sb3IgKyB1X2FscGhhICogdmlkZW9Db2xvcjsKfWVsc2UgaWYodV9wcm9qZWN0TW9kZT4xLjUgJiYgdV9wcm9qZWN0TW9kZTwyLjUpewppZihjem1fZXF1YWxzRXBzaWxvbih1X2NsaXBQbGFuZUNvbG9yLnIsIGNsaXBDb2xvci5yLCAwLjAwMSkgJiYgY3ptX2VxdWFsc0Vwc2lsb24odV9jbGlwUGxhbmVDb2xvci5nLCBjbGlwQ29sb3IuZywgMC4wMDEpICYmCmN6bV9lcXVhbHNFcHNpbG9uKHVfY2xpcFBsYW5lQ29sb3IuYiwgY2xpcENvbG9yLmIsIDAuMDAxKSl7CmdsX0ZyYWdDb2xvciA9ICgxLjAgLSB1X2FscGhhKSAqIGdsX0ZyYWdDb2xvciArIHVfYWxwaGEgKiB2aWRlb0NvbG9yOwogIH0KfWVsc2UgaWYodV9wcm9qZWN0TW9kZT4yLjUgJiYgdV9wcm9qZWN0TW9kZTwzLjUpewpnbF9GcmFnQ29sb3IgPSAoMS4wIC0gdV9hbHBoYSkgKiBnbF9GcmFnQ29sb3IgKyB1X2FscGhhICogdmlkZW9Db2xvcjsKfQogIH0KfQp9Cg==",t=Cesium.Matrix4.setTranslation(this.videoCamera.viewMatrix,new Cesium.Cartesian3,new Cesium.Matrix4);this.videoViewProjectionMat4=Cesium.Matrix4.multiply(this.videoCamera.frustum.projectionMatrix,t,new Cesium.Matrix4);let n=this;this._videoStage=new Cesium.PostProcessStage({name:`VideoP_${n._name}`,fragmentShader:Dc,uniforms:{u_videoColorTexture:function(){return n._videoTexture},u_depthType:function(){return n._depthType},u_videoCameraDepthTexture:function(){return Cesium.defined(n.videoView.globeDepth.depthStencilTexture)?n.videoView.globeDepth.depthStencilTexture:n._scene.view.globeDepth.depthStencilTexture},u_videoViewProjectionRelative:function(){let i=Cesium.Matrix4.setTranslation(n.videoCamera.viewMatrix,new Cesium.Cartesian3,new Cesium.Matrix4);return n.videoViewProjectionMat4=Cesium.Matrix4.multiply(n.videoCamera.frustum.projectionMatrix,i,new Cesium.Matrix4),n.videoViewProjectionMat4},u_videoInverseViewRelative:function(){return n.videoUniform.videoInverseViewRelative},u_log2FarDepthFromNearPlusOneInVideo:function(){return n.videoUniform.log2FarDepthFromNearPlusOneInVideo},u_videoFrustum:function(){return n.videoUniform.videoFrustum},u_videoViewport:function(){return n.videoUniform.videoViewport},u_videoViewportTransformation:function(){return n.videoUniform.videoViewportTransformation},u_videoInverseProjection:function(){return n.videoUniform.videoInverseProjection},u_videoFrustumPlanes:function(){return n.videoUniform.videoFrustumPlanes},u_relativePos:function(){return Cesium.defined(n._mainCamera)&&Cesium.defined(n.videoCamera)?Cesium.Cartesian3.subtract(n._mainCamera.positionWC,n.videoCamera.positionWC,new Cesium.Cartesian3):new Cesium.Cartesian3},u_sceneInverseViewRelative:function(){let i=Cesium.Matrix4.setTranslation(n._mainCamera.viewMatrix,new Cesium.Cartesian3,new Cesium.Matrix4);return Cesium.Matrix4.inverse(i,new Cesium.Matrix4)},u_alpha:function(){return n.videoAlpha*n.videoAlphaRate},u_hsv:function(){return n.videoHsv},u_clipPlaneColorTexture:function(){return n.clipPlaneTexture},u_clipPlaneColor:function(){return n.clipPlaneColor},u_projectMode:function(){return n._projectMode},u_pureColor:function(){return n._pureColor},k1:function(){return n._distortion.x},k2:function(){return n._distortion.y},textureWidth:function(){return Cesium.defined(n._videoTexture)?n._videoTexture.width:0},textureHeight:function(){return Cesium.defined(n._videoTexture)?n._videoTexture.height:0},u_videoTextureClipLUPos:function(){return n._videoTextureClipLUPos},u_videoTextureClipLBPos:function(){return n._videoTextureClipLBPos},u_videoTextureClipRBPos:function(){return n._videoTextureClipRBPos},u_videoTextureClipRUPos:function(){return n._videoTextureClipRUPos},u_distanceError:function(){return n._distanceError}},type:this,preUpdateFunction:mA}),this._viewer.scene.postProcessStages.add(this._videoStage),this._videoStage.enabled=!0,this._computeBoundingSphere()}this._wsplayer&&this._wsplayer.updateVideo()};At.prototype.updateClipPlaneFramebuffer=function(e,t){this.clipPlaneFramebuffer=e,this.clipPlaneTexture=t;for(let n=0;n<this.projectionPlanes.length;n++)this.projectionPlanes[n].framebuffer=e};At.prototype._checkVideoCameraAngle=function(){if(!this.videoCamera||this.videoCamera.directionWC===void 0||!this._mainCamera||this._mainCamera.directionWC===void 0)return;let e=Cesium.Cartesian3.angleBetween(this._mainCamera.directionWC,this.videoCamera.directionWC);e=Cesium.Math.toDegrees(e),e>this._videoVisiableAngle+this._videoGradientAngle?this.videoAlphaRate=0:e<this._videoVisiableAngle?this.videoAlphaRate=1:this.videoAlphaRate=1-(e-this._videoVisiableAngle)/this._videoGradientAngle};function x_(e,t,n,i){if(e._delayTimerArray.length!==0&&(clearTimeout(e._delayTimerArray[0]),e._delayTimerArray.shift()),!e.videoCamera)return;e._manufacturer==="DAHUA"&&(t>180?t=540-t:t=180-t);let o=parseFloat(t),r=parseFloat(n),a=parseFloat(i),s=1e-5;if(Math.abs(o-e.panCurrent)<s&&Math.abs(r-e.tiltCurrent)<s&&Math.abs(a-e.zoomCurrent)<s)return;e.panCurrent=o,e.tiltCurrent=r,e.zoomCurrent=a;let u=1e3,l=-1,d=e._panPos,f=e._tiltPos,g=e._zoomPos,b=e._heading,x=e._pitch,T=e._roll;for(let N=0;N<e._auxiliaryPTZ.length;N++){let V=e._auxiliaryPTZ[N],q=V[0],_=V[1];q=Math.abs(q-o),_=Math.abs(_-r);let ee=q;ee<u&&(u=ee,l=N)}l!==-1&&(d=e._auxiliaryPTZ[l][0],f=e._auxiliaryPTZ[l][1],g=e._auxiliaryPTZ[l][2],b=e._auxiliaryPTZ[l][3],x=e._auxiliaryPTZ[l][4],T=e._auxiliaryPTZ[l][5]);let R=b-(d-o),D=x-(f-r);if(e._manufacturer==="DAHUA"&&(D=x+(f-r)),e.cameraInversion||(e._manufacturer==="DAHUA"?D=x-(f-r):e._manufacturer==="HIKVISION"&&(D=x+(f-r))),D<-90?D=-90:D>90&&(D=90),isNaN(R)||isNaN(D))return;e.videoCamera.setView({orientation:{heading:Cesium.Math.toRadians(R),pitch:Cesium.Math.toRadians(D),roll:Cesium.Math.toRadians(T)}});let M=e.videoCamera.frustum;M.fov=Cesium.Math.toRadians(e._fov*e._zoomPos/e.zoomCurrent),M.aspectRatio=e.videoWidth/e.videoHeight,M.near=e._nearClip,M.far=e._farClip,M._fovy=M.aspectRatio<=1?M.fov:Math.atan(Math.tan(M.fov*.5)/M.aspectRatio)*2,M._fovy=M._fovy*e._zoomPos/e.zoomCurrent,M.top=M.near*Math.tan(.5*M._fovy),M.bottom=-M.top,M.right=M.aspectRatio*M.top,M.left=-M.right,e.followCamera(),e._computeBoundingSphere()}At.prototype.setVideoCameraPosition=function(e,t){if(!this.videoCamera)return;let n=Cesium.Cartesian3.subtract(this._viewPoint,e,new Cesium.Cartesian3);Cesium.Cartesian3.normalize(n,n);let i=this.videoCamera.roll;this.videoCamera.setView({destination:e,orientation:{direction:n,up:this.videoCamera.up}}),this.videoCamera.setView({orientation:{heading:this.videoCamera.heading,pitch:this.videoCamera.pitch,roll:i}});let o=this._viewer.scene.globe.ellipsoid.cartesianToCartographic(e);this._originLon=Cesium.Math.toDegrees(o.longitude),this._originLat=Cesium.Math.toDegrees(o.latitude),this._originHeight=o.height,this._videoCameraPos=e,this._videoCameraPostureChanged=!0,this._computeBoundingSphere(),t=Cesium.defaultValue(t,!0),t&&this._changed.raiseEvent()};At.prototype.setCameraOrientation=function(e,t){this.videoCamera&&(this.videoCamera.setView({orientation:{direction:e,up:t}}),this._heading=Cesium.Math.toDegrees(this.videoCamera.heading),this._pitch=Cesium.Math.toDegrees(this.videoCamera.pitch),this._roll=Cesium.Math.toDegrees(this.videoCamera.roll),this._videoCameraPostureChanged=!0,this._computeBoundingSphere(),this._changed.raiseEvent())};At.prototype.setCameraHeadingPitchRoll=function(e,t,n){this.videoCamera&&(this._heading=Cesium.Math.toDegrees(e),this._pitch=Cesium.Math.toDegrees(t),this._roll=Cesium.Math.toDegrees(n),this.videoCamera.setView({orientation:{heading:e,pitch:t,roll:n}}),this._videoCameraPostureChanged=!0,this._computeBoundingSphere(),this._changed.raiseEvent())};At.prototype.setCameraViewPoint=function(e,t){if(this._viewPoint=e,!this.videoCamera)return;let n=j.toRadians(this._roll),i=Cesium.Cartesian3.subtract(e,this.videoCamera.positionWC,new Cesium.Cartesian3);Cesium.Cartesian3.normalize(i,i),this.videoCamera.setView({orientation:{direction:i,up:this.videoCamera.upWC}}),this.videoCamera.setView({orientation:{heading:this.videoCamera.heading,pitch:this.videoCamera.pitch,roll:n}}),this._heading=Cesium.Math.toDegrees(this.videoCamera.heading),this._pitch=Cesium.Math.toDegrees(this.videoCamera.pitch),this._panPos=this.panCurrent,this._tiltPos=this.tiltCurrent,this._offsetAngle=this._pitch-this._tiltPos,this._videoCameraPostureChanged=!0,this._computeBoundingSphere(),Cesium.defaultValue(t,!0)&&this._changed.raiseEvent()};At.prototype.setCameraFov=function(e){e<=0?e=.001:e>=180&&(e=180),e=e/this.delayZoom,this._fov=e,this.videoCamera&&(this.videoCamera.frustum.fov=Cesium.Math.toRadians(e))};At.prototype.setNearClip=function(e){e<=0||e>=this._farClip||(this._nearClip=e,this.videoCamera&&(this.videoCamera.frustum.near=e))};At.prototype.setFarClip=function(e){e<=this._nearClip||(this._farClip=e,this.videoCamera&&(this.videoCamera.frustum.far=e,this._computeBoundingSphere()))};At.prototype.setDistortion=function(e){this._distortion=e};At.prototype.updateParameter=function(e){let t=Cesium.Cartesian3.fromDegrees(e.originLon,e.originLat,e.originHeight);this.setVideoCameraPosition(t,!1),this.setCameraHeadingPitchRoll(e.heading,e.pitch,e.roll),Cesium.defined(e.fov)&&this.setCameraFov(e.fov),Cesium.defined(e.alpha)&&(this.videoAlpha=e.alpha),Cesium.defined(e.videoHsv)&&(this.videoHsv=e.videoHsv.clone()),Cesium.defined(e.distortion)&&(this._distortion=e.distortion.clone())};At.prototype.delayAdjustVideoCamera=function(e,t,n,i){let o=(this.maxTilt-this.minTilt)/2;if(this._manufacturer==="HIKVISION"?(e>0&&e<=1?e=180*e:e<=0&&e>=-1&&(e=180+180*(1+e)),t=o+this.minTilt-t*o,n=(this._ptzZoomRatio-1)*n+1):this._manufacturer==="DAHUA"&&(e=180*(1-e),t=o+this.minTilt-t*o,n=this._ptzZoomRatio*n),!this.videoCamera||this.delayPan===e&&this.delayTilt===t&&this.delayZoom===n)return;this.delayPan=e,this.delayTilt=t,this.delayZoom=n;let r=this,a=e,s=t,u=n;r._ptzType==="Unit"&&r._wsplayer&&(a=r._wsplayer.panUnit2Degree(e),s=r._wsplayer.tiltUnit2Degree(t),u=n),x_(r,a,s,u)};At.prototype.delayAdjustVideoCamera2=function(e,t,n,i){if(!this.videoCamera||this.delayPan===e&&this.delayTilt===t&&this.delayZoom===n)return;this.delayPan=e,this.delayTilt=t,this.delayZoom=n;let o=this,r=e,a=t,s=n;o._ptzType==="Unit"&&o._wsplayer&&(r=o._wsplayer.panUnit2Degree(e),a=o._wsplayer.tiltUnit2Degree(t),s=n),x_(this,r,a,s)};At.prototype.saveCurrentAuxiliaryPTZ=function(){if(!this.videoCamera)return;let e=j.toDegrees(this.videoCamera.heading),t=j.toDegrees(this.videoCamera.pitch),n=j.toDegrees(this.videoCamera.roll),i=[this.delayPan,this.delayTilt,this.delayZoom,e,t,n],o=-1;for(let r=0;r<this._auxiliaryPTZ.length;r++){let a=this._auxiliaryPTZ[r],s=a[0],u=a[1],l=a[2];if(s=Math.abs(s-this.delayPan),u=Math.abs(u-this.delayTilt),l=Math.abs(l-this.delayZoom),s<.1&&u<.1&&l<.1){o=r;break}}o===-1?this._auxiliaryPTZ.push(i):this._auxiliaryPTZ.splice(o,1,i)};At.prototype.deleteAuxiliaryPTZByIndex=function(e){this._auxiliaryPTZ.length>e&&this._auxiliaryPTZ.splice(0,e)};At.prototype.createVirtualCamera=function(e,t){this.videoWidth=e,this.videoHeight=t,this.videoCamera===void 0&&(this.videoCamera=b_(this))};At.prototype.setPTZViewPoint=function(e){if(!this.videoCamera||!this._wsplayer)return;let t=new Cesium.Cartesian4(e.x,e.y,e.z,1);Cesium.Matrix4.multiplyByVector(this.videoCamera.viewMatrix,t,t),Cesium.Cartesian3.normalize(t,t);let n=Math.asin(t.y),i=Math.asin(t.x/Math.cos(n)),o=this.panCurrent+i*180/Math.PI,r=this.tiltCurrent-n*180/Math.PI;o>360?o=o-360:o<0&&(o=o+360),this._wsplayer.ptzType==="Degree"?this._wsplayer.setPTZPosition(o,r,this.zoomCurrent):this._wsplayer.ptzType==="Unit"&&(this.zoomCurrent=0,this._wsplayer.setPTZPosition(this._wsplayer.panDegree2Unit(o),this._wsplayer.tiltDegree2Unit(r),this.zoomCurrent))};At.prototype.followCamera=function(){let e=this;if(!e.videoCamera||!e._follow||!e._wsplayer)return;let t=e.videoCamera.position,n=e.videoCamera.heading,i=e.videoCamera.pitch,o=e.videoCamera.roll,r=1e-8;if(Math.abs(t.x-this.targetPosition.x)<r&&Math.abs(t.y-this.targetPosition.y)<r&&Math.abs(t.z-this.targetPosition.z)<r&&Math.abs(n-this.targetOrientation.x)<r&&Math.abs(this.targetOrientation.y-i)<r&&Math.abs(this.targetOrientation.z-o)<r&&Math.abs(this.targetZoom-e.zoomCurrent)<r)return;let a=new Cesium.Ray(e.videoCamera.position,e.videoCamera.direction),s=e._viewer.scene.pickFromRay(a),u=t;if(s&&s.position){let l=Cesium.Cartesian3.distance(e.videoCamera.position,s.position);this.targetZoom=e.zoomCurrent,l=l*(1-1/e.zoomCurrent),u=Cesium.Ray.getPoint(a,l,new Cesium.Cartesian3)}this.targetPosition=u,this.targetOrientation.x=n,this.targetOrientation.y=i,this.targetOrientation.z=o,e._viewer.camera.setView({destination:u,orientation:{heading:this.targetOrientation.x,pitch:this.targetOrientation.y,roll:this.targetOrientation.z}})};At.prototype.incompatibleConsole=function(){let e=this;this._viewer.scene.renderError.addEventListener(function(){e._viewer.cesiumWidget.showErrorPanel("This browser does not support cross-origin WebGL video textures.","","")})};At.prototype._computeBoundingSphere=function(){if(!this.videoCamera)return this._boundingSphere;let e=this.videoCamera.frustum.far*.5,t=Cesium.Cartesian3.multiplyComponents(this.videoCamera.direction,new Cesium.Cartesian3(e,e,e),new Cesium.Cartesian3);return this._boundingSphere.center=Cesium.Cartesian3.add(this.videoCamera.positionWC,t,this._boundingSphere.center),this._boundingSphere.radius=e,this._boundingSphere};At.prototype.getConfiguration=function(){let e={},t=this._wsplayer;t?(t.mSipID?e.gb=t.mSipID:t.mRtspurl&&(e.url=t.mRtspurl),e.protocol=t.protocol):e.file=this._fileName,e.alpha=this.videoAlpha,e.distortion=[this._distortion.x,this._distortion.y],e.hsv=[this.videoHsv.x,this.videoHsv.y,this.videoHsv.z],e.depthType=this._depthType,e.clipPoints=[this._videoTextureClipLUPos.x,this._videoTextureClipLUPos.y,this._videoTextureClipLBPos.x,this._videoTextureClipLBPos.y,this._videoTextureClipRUPos.x,this._videoTextureClipRUPos.y,this._videoTextureClipRBPos.x,this._videoTextureClipRBPos.y],e.nearClip=this._nearClip,e.farClip=this._farClip,e.distanceError=this._distanceError;let n={position:[this._originLon,this._originLat,this._originHeight],orientation:[this._heading,this._pitch,this._roll],fov:this._fov};if(this._viewPoint){let i=this._viewer.scene.globe.ellipsoid.cartesianToCartographic(this._viewPoint);i&&(n.visitPoint=[Cesium.Math.toDegrees(i.longitude),Cesium.Math.toDegrees(i.latitude),i.height])}return n.ptzType=this._ptzType,n.ptz=[this.delayPan,this.delayTilt,this.delayZoom],n.ptzZoomRatio=this._ptzZoomRatio,n.minTilt=this.minTilt,n.maxTilt=this.maxTilt,n.manufacturer=this._manufacturer,n.cameraInversion=this.cameraInversion,n.auxiliaryPTZ=this._auxiliaryPTZ,{name:this._name,type:this._projectionMode,visibleDistance:this._visibleDistance,video:e,camera:n}};At.prototype.destroy=function(){this._videoStage&&(this._videoStage.enabled=!1),this._scene.postProcessStages.remove(this._videoStage),this._wsplayer&&(this._wsplayer.stop(),this._wsplayer=null);for(let e=0;e<this.projectionPlanes.length;e++)this.projectionPlanes[e]!==this._scene._frameState.context.defaultTexture&&this.projectionPlanes[e].destroy();return this._videoTexture!==void 0&&(this._videoTexture.destroy(),this._videoTexture=void 0),this.projectionPlanes=[],Cesium.destroyObject(this)};var oo=At;function gA(){this._frameNumber=-1,this._features=[]}function Un(e){if(!Cesium.defined(e))throw new Cesium.DeveloperError("\u53C2\u6570options\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.viewer))throw new Cesium.DeveloperError("Viewer\u5BF9\u8C61options.viewer\u4E0D\u80FD\u4E3A\u7A7A\u3002");this._viewer=e.viewer,this._scene=this._viewer.scene,this._sceneCamera=this._scene.camera;let t=this._viewer.canvas,n=this._scene._frameState.context;if(this._width=t.width,this._height=t.height,!Cesium.defined(n))throw new Cesium.DeveloperError("_scene._frameState.context\u4E0D\u80FD\u4E3A\u7A7A\u3002");this._videoProjections=[],this.clipPlaneTexture=new Cesium.Texture({context:n,width:this._width,height:this._height,pixelFormat:Cesium.PixelFormat.RGBA,sampler:Cesium.Sampler.NEAREST}),this.framebuffer=new Cesium.Framebuffer({context:n,colorTextures:[this.clipPlaneTexture],destroyAttachments:!1}),this._clearCommand=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),framebuffer:this.framebuffer,depth:1,owner:this}),this._viewer.scene.preRender.addEventListener(this.preRender,this),this._cachedFilterFeatures=new gA,this._filterPrimitives={cesium3DTileIds:[],cesium3DTileNames:[],entityIds:[]}}Object.defineProperties(Un.prototype,{filterPrimitives:{get:function(){return this._filterPrimitives}}});Un.prototype.createVideoProjection=function(e){let t=this._videoProjections.length+1;e.clipPlaneFramebuffer=this.framebuffer,e.clipPlaneColor=Cesium.Color.fromRgba(t),e.clipPlaneColor.alpha=1,e.clipPlaneTexture=this.clipPlaneTexture,e.pureColor=new Cesium.Color(0,1,0,1),e.filterPrimitives=this.filterPrimitives,e.cachedFilterFeatures=this._cachedFilterFeatures,e.width=this._width,e.height=this._height;let n=new oo(e);return this._videoProjections.push(n),n};Un.prototype.updateVideoCamera=function(e,t,n,i){for(let o=0;o<this._videoProjections.length;o++){let r=this._videoProjections[o];if(r._videoElement.id===e){r.delayAdjustVideoCamera(t,n,i,r._ptzDelay);return}}};Un.prototype.preRender=function(e){let t=e.frameState.context,n=e.frameState.commandList,i=t.canvas;if(i.width!==this._width||i.height!==this._height){this._width=i.width,this._height=i.height,this.framebuffer=this.framebuffer&&this.framebuffer.destroy(),this.clipPlaneTexture=new Cesium.Texture({context:t,width:this._width,height:this._height,pixelFormat:Cesium.PixelFormat.RGBA,sampler:Cesium.Sampler.NEAREST}),this.framebuffer=new Cesium.Framebuffer({context:t,colorTextures:[this.clipPlaneTexture],destroyAttachments:!1}),this._clearCommand.framebuffer=this.framebuffer;for(let o=0;o<this._videoProjections.length;o++)this._videoProjections[o].updateClipPlaneFramebuffer(this.framebuffer,this.clipPlaneTexture)}for(let o=0;o<this._videoProjections.length;o++)this._videoProjections[o].preRender();this._clearCommand.execute(t)};Un.prototype.addFilter3DTileId=function(e){this.filterPrimitives.cesium3DTileIds.indexOf(e)===-1&&this.filterPrimitives.cesium3DTileIds.push(e)};Un.prototype.removeFilter3DTileId=function(e){this.filterPrimitives.cesium3DTileIds.splice(this.filterPrimitives.cesium3DTileIds.indexOf(e),1)};Un.prototype.addFilter3DTileName=function(e){this.filterPrimitives.cesium3DTileNames.indexOf(e)===-1&&this.filterPrimitives.cesium3DTileNames.push(e)};Un.prototype.removeFilter3DTileName=function(e){this.filterPrimitives.cesium3DTileNames.splice(this.filterPrimitives.cesium3DTileNames.indexOf(e),1)};Un.prototype.addFilterEntity=function(e){Cesium.defined(e)&&this.filterPrimitives.entityIds.indexOf(e.id)===-1&&this.filterPrimitives.entityIds.push(e.id)};Un.prototype.removeFilterEntity=function(e){Cesium.defined(e)&&this.filterPrimitives.entityIds.splice(this.filterPrimitives.entityIds.indexOf(e.id),1)};Un.prototype.getComponentsInVideoCamera=function(e,t){let n,i=this._videoProjections.length;for(let r=0;r<i;r++)if(e===this._videoProjections[r].name){n=this._videoProjections[r];break}let o=[];if(Cesium.defined(n)){let r=n.videoCamera,a=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC);o=t.getComponentsInCullingVolume(a)}return o};Un.prototype.remove=function(e){for(let t=0,n=this._videoProjections.length;t<n;++t)if(this._videoProjections[t]===e){this._videoProjections.splice(t,1);break}};Un.prototype.destroy=function(){this._scene.preRender.removeEventListener(this.preRender,this),this.framebuffer=this.framebuffer&&this.framebuffer.destroy(),this.clipPlaneTexture=this.clipPlaneTexture&&this.clipPlaneTexture.destroy(),this.framebuffer=void 0,this.clipPlaneTexture=void 0,this._videoProjections=[]};var Mc=Un;function In(e){if(!e)throw new Cesium.DeveloperError("options is required.");if(this._readyPromise=Cesium.defer(),this._videoModelArray=[],this._videoPlaneArray=[],this._videoProjectionArray=[],this._jsmpegPlayerArray=[],this._visibleDistance=Cesium.defaultValue(e.visibleDistance,500),this._show=!0,this._name=e.name,this._boundingSphere=new Cesium.BoundingSphere,this._added=new Cesium.Event,this._changed=new Cesium.Event,this._viewer=e.viewer,this._name=e.name,this.wsServe=e.wsServer,this.ev_VideoProjectionManager=new Mc({viewer:e.viewer}),Cesium.defined(e.videoJsonFile)){let t=this,n=e.videoJsonFile;if(typeof n=="object")setTimeout(function(){t._init(n,e.videoCatalog)},0);else if(typeof n=="string")if(/\.json$/.test(n)){let i=Cesium.Resource.createIfNeeded(n),o=e.videoCatalog;!o&&n.lastIndexOf("/")!==-1&&(o=n.substring(0,n.lastIndexOf("/")+1)),i.fetchJson().then(function(r){t._init(r,o)}).catch(function(a){console.warn(`\u83B7\u53D6\u89C6\u9891json\u6587\u4EF6\u5931\u8D25\uFF1A${a.message}`)})}else setTimeout(function(){t._init(JSON.parse(n),e.videoCatalog)},0);else throw new Cesium.DeveloperError("options.videoJsonFile is invalid.")}}Object.defineProperties(In.prototype,{readyPromise:{get:function(){return this._readyPromise.promise}},videoFusionArray:{get:function(){return this._videoProjectionArray}},visibleDistance:{get:function(){return this._visibleDistance},set:function(e){this._visibleDistance=e}},name:{get:function(){return this._name},set:function(e){this._name=e}},show:{get:function(){return this._show},set:function(e){this._show=e;for(let t=0;t<this._videoProjectionArray.length;t++)this._videoProjectionArray[t]._show=e}},boundingSphere:{get:function(){return this._updateBoundingSphere()}},added:{get:function(){return this._added}},changed:{get:function(){return this._changed}}});In.prototype._init=function(e,t){if(Cesium.defined(e.layerName)&&(this._name=e.layerName),this.wsServe=e.wsserver,Cesium.defined(e.boundingSphere)){let o=e.boundingSphere,r=new Cesium.Cartesian3(o[0],o[1],o[2]);this._boundingSphere=new Cesium.BoundingSphere(r,o[3])}let n=e.data;for(let o=0;o<n.length;o++){let r=n[o],a={};a.viewer=this._viewer,a.originLon=r.camera.position[0],a.originLat=r.camera.position[1],a.originHeight=r.camera.position[2],a.heading=r.camera.orientation[0],a.pitch=r.camera.orientation[1],a.roll=r.camera.orientation[2],a.fov=r.camera.fov,r.video.hsv&&(a.hsvParam=new Cesium.Cartesian3(r.video.hsv[0],r.video.hsv[1],r.video.hsv[2])),r.video.distortion&&(a.distortion=new Cesium.Cartesian2(r.video.distortion[0],r.video.distortion[1])),r.video.alpha&&(a.videoAlpha=r.video.alpha),a.ptzReverse=new Cesium.Cartesian2(0,0),r.camera.ptzReverse&&(a.ptzReverse.x=r.camera.ptzReverse[0],a.ptzReverse.y=r.camera.ptzReverse[1]),a.ptzDelay=300,r.camera.ptzReverse&&(a.ptzDelay=r.camera.ptzDelay);let s=r.camera.visitPoint;s&&(a.viewPoint=Cesium.Cartesian3.fromDegrees(s[0],s[1],s[2]));let u=document.createElement("video");u.id=`v${new Date().getTime()+Math.floor(Math.random()*1e3)}`,a.videoElementID=u.id,u.muted=!0,u.autoplay=!0,u.setAttribute("crossorigin","anonymous"),u.style.display="none",document.body.appendChild(u),a.videoElement=u,a.wsplayerType="",a.wsplayerGBAddress="";let l;if(Cesium.defined(r.video.file)){u.loop=!0;let f=r.video.file;l=f,/^http[s]?:\/\//.test(f)||Cesium.defined(t)&&(f=t+f),u.src=f,u.play()}else if(Cesium.defined(r.video.url)){let f=new zi({layer:this,wsserver:e.wsserver,rtspurl:r.video.url,mediaplayer:u,isMainStream:r.video.isMainStream,protocol:r.video.protocol,pan:r.camera.ptz?r.camera.ptz[0]:void 0,tilt:r.camera.ptz?r.camera.ptz[1]:void 0,zoom:r.camera.ptz?r.camera.ptz[2]:void 0,ptzType:r.camera.ptzType});a.wsplayerType="rtsp",a.wsplayer=f}else if(r.video.gb){let f=new zi({layer:this,wsserver:e.wsserver,rtspurl:"",mediaplayer:u,isMainStream:r.video.isMainStream,protocol:r.video.protocol,pan:r.camera.ptz?r.camera.ptz[0]:void 0,tilt:r.camera.ptz?r.camera.ptz[1]:void 0,zoom:r.camera.ptz?r.camera.ptz[2]:void 0,ptzType:r.camera.ptzType});a.wsplayerType="gb",a.wsplayerGBAddress=r.video.gb,a.wsplayer=f}else if(r.video.dahuaUrl){this.dahuaWSPlayerManager||(this.dahuaWSPlayerManager=new Oc({server:e.server}));var i=new Vr({mediaplayer:u,serverIp:e.server,deviceIp:r.video.dahuaUrl,playerManager:this.dahuaWSPlayerManager});a.wsplayer=i}r.camera.ptz&&a.wsplayer&&(a.ptzType=r.camera.ptzType,a.ptzZoomRatio=r.camera.ptzZoomRatio,a.wsplayer.ptzType==="Degree"?(a.pan=r.camera.ptz[0],a.tilt=r.camera.ptz[1],a.zoom=r.camera.ptz[2]):a.wsplayer.ptzType==="Unit"&&(a.pan=a.wsplayer.panUnit2Degree(r.camera.ptz[0]),a.tilt=a.wsplayer.tiltUnit2Degree(r.camera.ptz[1]),a.zoom=r.camera.ptz[2])),r.projection&&(a.projection=r.projection),r.name&&(a.name=r.name),r.video.nearClip&&(a.nearClip=r.video.nearClip),r.video.farClip&&(a.farClip=r.video.farClip),r.camera.manufacturer&&(a.manufacturer=r.camera.manufacturer),r.camera.minTilt&&(a.minTilt=r.camera.minTilt),r.camera.maxTilt&&(a.maxTilt=r.camera.maxTilt),r.camera.ptzZoomRatio&&(a.ptzZoomRatio=r.camera.ptzZoomRatio),r.camera.ptzType&&(a.ptzType=r.camera.ptzType),r.camera.cameraInversion&&(a.cameraInversion=r.camera.cameraInversion),r.camera.auxiliaryPTZ&&(a.auxiliaryPTZ=r.camera.auxiliaryPTZ),a.layer=this,a.depthType=0,Cesium.defined(r.video)&&Cesium.defined(r.video.depthType)&&(a.depthType=r.video.depthType),a.visibleDistance=r.visibleDistance||r.video.viewDistanceFar;let d=null;r.type&&r.type>0?(a.projectMode=r.type,a.clipPoints=r.video.clipPoints,a.distanceError=r.video.distanceError,d=this.ev_VideoProjectionManager.createVideoProjection(a),this._videoModelArray.push(d)):(d=new Mo(a),this._videoPlaneArray.push(d)),d._fileName=l,this._videoProjectionArray.push(d),this._added.raiseEvent(d)}this._readyPromise.resolve(!0)};In.prototype.addVideoModelProjection=function(e){let t=this.ev_VideoProjectionManager.createVideoProjection(e);return this._videoModelArray.push(t),this._videoProjectionArray.push(t),this._added.raiseEvent(t),t};In.prototype.addVideoPlaneProjection=function(e){let t=new Mo(e);return this._videoPlaneArray.push(t),this._videoProjectionArray.push(t),this._added.raiseEvent(t),t};In.prototype.getProjectionByName=function(e){for(let t=0;t<this._videoProjectionArray.length;++t)if(this._videoProjectionArray[t]._name===e)return this._videoProjectionArray[t]};In.prototype.getPositionFromVideoCoordinates=function(e,t,n){let i=new Cesium.Cartesian3;for(let o=0;o<this._videoProjectionArray.length;++o)if(this._videoProjectionArray[o]._name===e){if(this._videoProjectionArray[o].videoWidth==0||this._videoProjectionArray[o].videoHeight==0)return i;let r=this._videoProjectionArray[o]._originLon,a=this._videoProjectionArray[o]._originLat,s=this._videoProjectionArray[o]._originHeight,u=this._videoProjectionArray[o].videoCamera,l=Cesium.Cartesian3.fromDegrees(r,a,s),d=new Cesium.Cartesian3;Cesium.Cartesian3.normalize(l,d),(t>1||n>1)&&(t=t/this._videoProjectionArray[o].videoWidth,n=n/this._videoProjectionArray[o].videoHeight,t=t*2-1,n=n*2-1);let f=Cesium.Matrix4.setTranslation(u.viewMatrix,new Cesium.Cartesian3,new Cesium.Matrix4),g=Cesium.Matrix4.multiply(u.frustum.projectionMatrix,f,new Cesium.Matrix4),b=Cesium.Matrix4.inverse(g,new Cesium.Matrix4),x=new Cesium.Cartesian4(t,n,100,1);Cesium.Matrix4.multiplyByVector(b,x,x);let T=new Cesium.Ray(l,x),R=this._viewer.scene.pickFromRay(T);if(R&&R.position)i=R.position;else return i=void 0,i;let M=this._viewer.scene.globe.ellipsoid.cartesianToCartographic(i);return i.x=Cesium.Math.toDegrees(M.longitude),i.y=Cesium.Math.toDegrees(M.latitude),i.z=M.height,i}return i};In.prototype.getVideoCoordinatesFromPosition=function(e,t){let n=new Cesium.Cartesian2,i=Cesium.Cartesian3.fromDegrees(t.x,t.y,t.z);for(let o=0;o<this._videoProjectionArray.length;++o)if(this._videoProjectionArray[o]._name===e){if(this._videoProjectionArray[o].videoWidth==0||this._videoProjectionArray[o].videoHeight==0)return n;let r=this._videoProjectionArray[o]._originLon,a=this._videoProjectionArray[o]._originLat,s=this._videoProjectionArray[o]._originHeight,u=this._videoProjectionArray[o].videoCamera,l=Cesium.Cartesian3.fromDegrees(r,a,s),d=Cesium.Cartesian3.subtract(i,l,new Cesium.Cartesian3),f=new Cesium.Cartesian4(d.x,d.y,d.z,1),g=Cesium.Matrix4.setTranslation(u.viewMatrix,new Cesium.Cartesian3,new Cesium.Matrix4),b=Cesium.Matrix4.multiply(u.frustum.projectionMatrix,g,new Cesium.Matrix4);return Cesium.Matrix4.multiplyByVector(b,f,f),n.x=f.x/f.w,n.x=(n.x+1)/2*this._videoProjectionArray[o].videoWidth,n.y=f.y/f.w,n.y=(n.y+1)/2*this._videoProjectionArray[o].videoHeight,n}return n};In.prototype.getProjections=function(){return this._videoProjectionArray};In.prototype.getPlaneProjections=function(){return this._videoPlaneArray};In.prototype.getModelProjections=function(){return this._videoModelArray};In.prototype.getJsonData=function(){let e=this.boundingSphere,t={layerName:this._name,wsserver:this.wsServe,boundingSphere:[e.center.x,e.center.y,e.center.z,e.radius],data:[]},n=this._videoProjectionArray;for(let i=0;i<n.length;++i){let o=n[i].getConfiguration();o&&t.data.push(o)}return t};In.prototype._updateBoundingSphere=function(){let e=[];for(let t=0;t<this._videoProjectionArray.length;++t){let i=this._videoProjectionArray[t].videoCamera;if(!i)return this._boundingSphere;e.push(i.positionWC)}return this._boundingSphere=Cesium.BoundingSphere.fromPoints(e,this._boundingSphere),this._boundingSphere.radius+=100,this._boundingSphere};In.prototype.remove=function(e){if(e instanceof oo){for(let t=0,n=this._videoModelArray.length;t<n;++t)if(this._videoModelArray[t]===e){this._videoModelArray.splice(t,1);break}this.ev_VideoProjectionManager.remove(e)}else if(e instanceof Mo){for(let t=0,n=this._videoPlaneArray.length;t<n;++t)if(this._videoPlaneArray[t]===e){this._videoPlaneArray.splice(t,1);break}}else return;for(let t=0,n=this._videoProjectionArray.length;t<n;++t)if(this._videoProjectionArray[t]===e){this._videoProjectionArray.splice(t,1),e.destroy();break}};In.prototype.destroy=function(){this.ev_VideoProjectionManager!==null&&(this.ev_VideoProjectionManager.destroy(),this.ev_VideoProjectionManager=null);for(let e=0;e<this._videoProjectionArray.length;++e){let t=this._videoProjectionArray[e];this._viewer.scene.primitives.remove(t)}for(let e=0;e<this._videoProjectionArray.length;e++)document.body.removeChild(this._videoProjectionArray[e]._videoElement),this._videoProjectionArray[e].destroy();this._videoModelArray.length=0,this._videoPlaneArray.length=0,this._videoProjectionArray.length=0,this._added=null,this._changed=null,this._viewer=null};var ps=In;function lr(e){e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),this._clock=void 0,this._element=void 0,this._clockSubscription=void 0,this._seekFunction=void 0,this._lastPlaybackRate=void 0,this.clock=e.clock,this.element=e.element,this.epoch=Cesium.defaultValue(e.epoch,Cesium.Iso8601.MINIMUM_VALUE),this.tolerance=Cesium.defaultValue(e.tolerance,1),this._seeking=!1,this._seekFunction=void 0,this._firstTickAfterSeek=!1}Object.defineProperties(lr.prototype,{clock:{get:function(){return this._clock},set:function(e){let t=this._clock;t!==e&&(Cesium.defined(t)&&(this._clockSubscription(),this._clockSubscription=void 0),Cesium.defined(e)&&(this._clockSubscription=e.onTick.addEventListener(lr.prototype._onTick,this)),this._clock=e)}},element:{get:function(){return this._element},set:function(e){let t=this._element;t!==e&&(Cesium.defined(t)&&t.removeEventListener("seeked",this._seekFunction,!1),Cesium.defined(e)&&(this._seeking=!1,this._seekFunction=_A(this),e.addEventListener("seeked",this._seekFunction,!1)),this._element=e,this._seeking=!1,this._firstTickAfterSeek=!1)}}});lr.prototype.destroy=function(){return this.element=void 0,this.clock=void 0,Cesium.destroyObject(this)};lr.prototype.isDestroyed=function(){return!1};lr.prototype._trySetPlaybackRate=function(e){if(this._lastPlaybackRate===e.multiplier)return;let t=this._element;try{t.playbackRate=e.multiplier}catch{t.playbackRate=0}this._lastPlaybackRate=e.multiplier};lr.prototype._onTick=function(e){let t=this._element;if(!Cesium.defined(t)||t.readyState<2)return;let n=t.paused,i=e.shouldAnimate;if(i===n&&(i?t.play():t.pause()),this._seeking||this._firstTickAfterSeek){this._firstTickAfterSeek=!1;return}this._trySetPlaybackRate(e);let o=new Date().getTime()/1e3,r=t.duration,a,s=t.currentTime;t.loop?(o=o%r,o<0&&(o=r-o),a=o):o>r?a=r:o<0?a=0:a=o;let u=i?Cesium.defaultValue(this.tolerance,1):.001;Math.abs(a-s)>u&&(this._seeking=!0,t.currentTime=a)};function _A(e){return function(){e._seeking=!1,e._firstTickAfterSeek=!0}}var E_=lr;var Lt={_maximumCombinedTextureImageUnits:0,_maximumCubeMapSize:0,_maximumFragmentUniformVectors:0,_maximumTextureImageUnits:0,_maximumRenderbufferSize:0,_maximumTextureSize:0,_maximumVaryingVectors:0,_maximumVertexAttributes:0,_maximumVertexTextureImageUnits:0,_maximumVertexUniformVectors:0,_minimumAliasedLineWidth:0,_maximumAliasedLineWidth:0,_minimumAliasedPointSize:0,_maximumAliasedPointSize:0,_maximumViewportWidth:0,_maximumViewportHeight:0,_maximumTextureFilterAnisotropy:0,_maximumDrawBuffers:0,_maximumColorAttachments:0,_maximumSamples:0,_highpFloatSupported:!1,_highpIntSupported:!1};Object.defineProperties(Lt,{maximumCombinedTextureImageUnits:{get:function(){return Lt._maximumCombinedTextureImageUnits}},maximumCubeMapSize:{get:function(){return Lt._maximumCubeMapSize}},maximumFragmentUniformVectors:{get:function(){return Lt._maximumFragmentUniformVectors}},maximumTextureImageUnits:{get:function(){return Lt._maximumTextureImageUnits}},maximumRenderbufferSize:{get:function(){return Lt._maximumRenderbufferSize}},maximumTextureSize:{get:function(){return Lt._maximumTextureSize}},maximumVaryingVectors:{get:function(){return Lt._maximumVaryingVectors}},maximumVertexAttributes:{get:function(){return Lt._maximumVertexAttributes}},maximumVertexTextureImageUnits:{get:function(){return Lt._maximumVertexTextureImageUnits}},maximumVertexUniformVectors:{get:function(){return Lt._maximumVertexUniformVectors}},minimumAliasedLineWidth:{get:function(){return Lt._minimumAliasedLineWidth}},maximumAliasedLineWidth:{get:function(){return Lt._maximumAliasedLineWidth}},minimumAliasedPointSize:{get:function(){return Lt._minimumAliasedPointSize}},maximumAliasedPointSize:{get:function(){return Lt._maximumAliasedPointSize}},maximumViewportWidth:{get:function(){return Lt._maximumViewportWidth}},maximumViewportHeight:{get:function(){return Lt._maximumViewportHeight}},maximumTextureFilterAnisotropy:{get:function(){return Lt._maximumTextureFilterAnisotropy}},maximumDrawBuffers:{get:function(){return Lt._maximumDrawBuffers}},maximumColorAttachments:{get:function(){return Lt._maximumColorAttachments}},maximumSamples:{get:function(){return Lt._maximumSamples}},highpFloatSupported:{get:function(){return Lt._highpFloatSupported}},highpIntSupported:{get:function(){return Lt._highpIntSupported}}});var yt=Lt;function yA(e,t){yt._maximumCombinedTextureImageUnits=Cesium.ContextLimits._maximumCombinedTextureImageUnits,yt._maximumCubeMapSize=Cesium.ContextLimits._maximumCubeMapSize,yt._maximumFragmentUniformVectors=Cesium.ContextLimits._maximumFragmentUniformVectors,yt._maximumTextureImageUnits=Cesium.ContextLimits._maximumTextureImageUnits,yt._maximumRenderbufferSize=Cesium.ContextLimits._maximumRenderbufferSize,yt._maximumTextureSize=Cesium.ContextLimits._maximumTextureSize,yt._maximumVertexAttributes=Cesium.ContextLimits._maximumVertexAttributes,yt._maximumVertexTextureImageUnits=Cesium.ContextLimits._maximumVertexTextureImageUnits,yt._maximumVertexUniformVectors=Cesium.ContextLimits._maximumVertexUniformVectors,yt._minimumAliasedLineWidth=Cesium.ContextLimits._minimumAliasedLineWidth,yt._maximumAliasedLineWidth=Cesium.ContextLimits._maximumAliasedLineWidth,yt._minimumAliasedPointSize=Cesium.ContextLimits._minimumAliasedPointSize,yt._maximumAliasedPointSize=Cesium.ContextLimits._maximumAliasedPointSize,yt._maximumViewportWidth=Cesium.ContextLimits._maximumViewportWidth,yt._maximumViewportHeight=Cesium.ContextLimits._maximumViewportHeight,yt._highpFloatSupported=Cesium.ContextLimits._highpFloatSupported,yt._highpIntSupported=Cesium.ContextLimits._highpIntSupported,yt._maximumTextureFilterAnisotropy=Cesium.ContextLimits._maximumTextureFilterAnisotropy,yt._maximumDrawBuffers=Cesium.ContextLimits._maximumDrawBuffers,yt._maximumColorAttachments=Cesium.ContextLimits._maximumColorAttachments}var C_=yA;function ce(e,t,n){this.x=C(e,0),this.y=C(t,0),this.z=C(n,0)}ce.fromSpherical=function(e,t){m(t)||(t=new ce);let n=e.clock,i=e.cone,o=C(e.magnitude,1),r=o*Math.sin(i);return t.x=r*Math.cos(n),t.y=r*Math.sin(n),t.z=o*Math.cos(i),t};ce.fromElements=function(e,t,n,i){return m(i)?(i.x=e,i.y=t,i.z=n,i):new ce(e,t,n)};ce.clone=function(e,t){if(m(e))return m(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new ce(e.x,e.y,e.z)};ce.fromCartesian4=ce.clone;ce.packedLength=3;ce.pack=function(e,t,n){return n=C(n,0),t[n++]=e.x,t[n++]=e.y,t[n]=e.z,t};ce.unpack=function(e,t,n){return t=C(t,0),m(n)||(n=new ce),n.x=e[t++],n.y=e[t++],n.z=e[t],n};ce.packArray=function(e,t){let n=e.length,i=n*3;m(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)ce.pack(e[o],t,o*3);return t};ce.unpackArray=function(e,t){let n=e.length;m(t)?t.length=n/3:t=new Array(n/3);for(let i=0;i<n;i+=3){let o=i/3;t[o]=ce.unpack(e,i,t[o])}return t};ce.fromArray=ce.unpack;ce.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)};ce.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)};ce.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n};ce.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n};ce.clamp=function(e,t,n,i){let o=j.clamp(e.x,t.x,n.x),r=j.clamp(e.y,t.y,n.y),a=j.clamp(e.z,t.z,n.z);return i.x=o,i.y=r,i.z=a,i};ce.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z};ce.magnitude=function(e){return Math.sqrt(ce.magnitudeSquared(e))};var Lc=new ce;ce.distance=function(e,t){return ce.subtract(e,t,Lc),ce.magnitude(Lc)};ce.distanceSquared=function(e,t){return ce.subtract(e,t,Lc),ce.magnitudeSquared(Lc)};ce.normalize=function(e,t){let n=ce.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t};ce.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z};ce.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n};ce.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n};ce.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n};ce.subtract=function(e,t,n){return m(n)||(n=new ce),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n};ce.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n};ce.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n};ce.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t};ce.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var T_=new ce;ce.lerp=function(e,t,n,i){return ce.multiplyByScalar(t,n,T_),i=ce.multiplyByScalar(e,1-n,i),ce.add(T_,i,i)};var Nc=new ce,Op=new ce;ce.angleBetween=function(e,t){ce.normalize(e,Nc),ce.normalize(t,Op);let n=ce.dot(Nc,Op),i=ce.magnitude(ce.cross(Nc,Op,Nc));return Math.atan2(i,n)};var vA=new ce;ce.mostOrthogonalAxis=function(e,t){let n=ce.normalize(e,vA);return ce.abs(n,n),n.x<=n.y?n.x<=n.z?t=ce.clone(ce.UNIT_X,t):t=ce.clone(ce.UNIT_Z,t):n.y<=n.z?t=ce.clone(ce.UNIT_Y,t):t=ce.clone(ce.UNIT_Z,t),t};ce.projectVector=function(e,t,n){let i=ce.dot(e,t)/ce.dot(t,t);return ce.multiplyByScalar(t,i,n)};ce.equals=function(e,t){return e===t||m(e)&&m(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z};ce.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]};ce.equalsEpsilon=function(e,t,n,i){return e===t||m(e)&&m(t)&&j.equalsEpsilon(e.x,t.x,n,i)&&j.equalsEpsilon(e.y,t.y,n,i)&&j.equalsEpsilon(e.z,t.z,n,i)};ce.cross=function(e,t,n){let i=e.x,o=e.y,r=e.z,a=t.x,s=t.y,u=t.z,l=o*u-r*s,d=r*a-i*u,f=i*s-o*a;return n.x=l,n.y=d,n.z=f,n};ce.midpoint=function(e,t,n){return n.x=(e.x+t.x)*.5,n.y=(e.y+t.y)*.5,n.z=(e.z+t.z)*.5,n};ce.fromDegrees=function(e,t,n,i,o){return e=j.toRadians(e),t=j.toRadians(t),ce.fromRadians(e,t,n,i,o)};var oi=new ce,aa=new ce;ce.wgs84RadiiSquared=new ce(6378137*6378137,6378137*6378137,6356752314245179e-9*6356752314245179e-9);ce.fromRadians=function(e,t,n,i,o){n=C(n,0);let r=m(i)?i.radiiSquared:this.wgs84RadiiSquared,a=Math.cos(t);oi.x=a*Math.cos(e),oi.y=a*Math.sin(e),oi.z=Math.sin(t),oi=ce.normalize(oi,oi),ce.multiplyComponents(r,oi,aa);let s=Math.sqrt(ce.dot(oi,aa));return aa=ce.divideByScalar(aa,s,aa),oi=ce.multiplyByScalar(oi,n,oi),m(o)||(o=new ce),ce.add(aa,oi,o)};ce.fromDegreesArray=function(e,t,n){let i=e.length;m(n)?n.length=i/2:n=new Array(i/2);for(let o=0;o<i;o+=2){let r=e[o],a=e[o+1],s=o/2;n[s]=ce.fromDegrees(r,a,0,t,n[s])}return n};ce.fromRadiansArray=function(e,t,n){let i=e.length;m(n)?n.length=i/2:n=new Array(i/2);for(let o=0;o<i;o+=2){let r=e[o],a=e[o+1],s=o/2;n[s]=ce.fromRadians(r,a,0,t,n[s])}return n};ce.fromDegreesArrayHeights=function(e,t,n){let i=e.length;m(n)?n.length=i/3:n=new Array(i/3);for(let o=0;o<i;o+=3){let r=e[o],a=e[o+1],s=e[o+2],u=o/3;n[u]=ce.fromDegrees(r,a,s,t,n[u])}return n};ce.fromRadiansArrayHeights=function(e,t,n){let i=e.length;m(n)?n.length=i/3:n=new Array(i/3);for(let o=0;o<i;o+=3){let r=e[o],a=e[o+1],s=e[o+2],u=o/3;n[u]=ce.fromRadians(r,a,s,t,n[u])}return n};ce.ZERO=Object.freeze(new ce(0,0,0));ce.ONE=Object.freeze(new ce(1,1,1));ce.UNIT_X=Object.freeze(new ce(1,0,0));ce.UNIT_Y=Object.freeze(new ce(0,1,0));ce.UNIT_Z=Object.freeze(new ce(0,0,1));ce.prototype.clone=function(e){return ce.clone(this,e)};ce.prototype.equals=function(e){return ce.equals(this,e)};ce.prototype.equalsEpsilon=function(e,t,n){return ce.equalsEpsilon(this,e,t,n)};ce.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z})`};var h=ce;var Lo,Ft={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},kn={};Object.defineProperties(kn,{element:{get:function(){if(kn.supportsFullscreen())return document[Ft.fullscreenElement]}},changeEventName:{get:function(){if(kn.supportsFullscreen())return Ft.fullscreenchange}},errorEventName:{get:function(){if(kn.supportsFullscreen())return Ft.fullscreenerror}},enabled:{get:function(){if(kn.supportsFullscreen())return document[Ft.fullscreenEnabled]}},fullscreen:{get:function(){if(kn.supportsFullscreen())return kn.element!==null}}});kn.supportsFullscreen=function(){if(m(Lo))return Lo;Lo=!1;let e=document.body;if(typeof e.requestFullscreen=="function")return Ft.requestFullscreen="requestFullscreen",Ft.exitFullscreen="exitFullscreen",Ft.fullscreenEnabled="fullscreenEnabled",Ft.fullscreenElement="fullscreenElement",Ft.fullscreenchange="fullscreenchange",Ft.fullscreenerror="fullscreenerror",Lo=!0,Lo;let t=["webkit","moz","o","ms","khtml"],n;for(let i=0,o=t.length;i<o;++i){let r=t[i];n=`${r}RequestFullscreen`,typeof e[n]=="function"?(Ft.requestFullscreen=n,Lo=!0):(n=`${r}RequestFullScreen`,typeof e[n]=="function"&&(Ft.requestFullscreen=n,Lo=!0)),n=`${r}ExitFullscreen`,typeof document[n]=="function"?Ft.exitFullscreen=n:(n=`${r}CancelFullScreen`,typeof document[n]=="function"&&(Ft.exitFullscreen=n)),n=`${r}FullscreenEnabled`,document[n]!==void 0?Ft.fullscreenEnabled=n:(n=`${r}FullScreenEnabled`,document[n]!==void 0&&(Ft.fullscreenEnabled=n)),n=`${r}FullscreenElement`,document[n]!==void 0?Ft.fullscreenElement=n:(n=`${r}FullScreenElement`,document[n]!==void 0&&(Ft.fullscreenElement=n)),n=`${r}fullscreenchange`,document[`on${n}`]!==void 0&&(r==="ms"&&(n="MSFullscreenChange"),Ft.fullscreenchange=n),n=`${r}fullscreenerror`,document[`on${n}`]!==void 0&&(r==="ms"&&(n="MSFullscreenError"),Ft.fullscreenerror=n)}return Lo};kn.requestFullscreen=function(e,t){kn.supportsFullscreen()&&e[Ft.requestFullscreen]({vrDisplay:t})};kn.exitFullscreen=function(){kn.supportsFullscreen()&&document[Ft.exitFullscreen]()};kn._names=Ft;var w_=kn;var En;typeof navigator<"u"?En=navigator:En={};function pr(e){let t=e.split(".");for(let n=0,i=t.length;n<i;++n)t[n]=parseInt(t[n],10);return t}var zc,S_;function Lp(){if(!m(zc)&&(zc=!1,!jc())){let e=/ Chrome\/([\.0-9]+)/.exec(En.userAgent);e!==null&&(zc=!0,S_=pr(e[1]))}return zc}function bA(){return Lp()&&S_}var Bc,A_;function R_(){if(!m(Bc)&&(Bc=!1,!Lp()&&!jc()&&/ Safari\/[\.0-9]+/.test(En.userAgent))){let e=/ Version\/([\.0-9]+)/.exec(En.userAgent);e!==null&&(Bc=!0,A_=pr(e[1]))}return Bc}function xA(){return R_()&&A_}var Fc,Mp;function O_(){if(!m(Fc)){Fc=!1;let e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(En.userAgent);e!==null&&(Fc=!0,Mp=pr(e[1]),Mp.isNightly=!!e[2])}return Fc}function EA(){return O_()&&Mp}var ds,Np;function I_(){if(!m(ds)){ds=!1;let e;En.appName==="Microsoft Internet Explorer"?(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(En.userAgent),e!==null&&(ds=!0,Np=pr(e[1]))):En.appName==="Netscape"&&(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(En.userAgent),e!==null&&(ds=!0,Np=pr(e[1])))}return ds}function CA(){return I_()&&Np}var Uc,P_;function jc(){if(!m(Uc)){Uc=!1;let e=/ Edg\/([\.0-9]+)/.exec(En.userAgent);e!==null&&(Uc=!0,P_=pr(e[1]))}return Uc}function TA(){return jc()&&P_}var kc,D_;function zp(){if(!m(kc)){kc=!1;let e=/Firefox\/([\.0-9]+)/.exec(En.userAgent);e!==null&&(kc=!0,D_=pr(e[1]))}return kc}var Ip;function wA(){return m(Ip)||(Ip=/Windows/i.test(En.appVersion)),Ip}var Pp;function SA(){return m(Pp)||(Pp=navigator.platform==="iPhone"||navigator.platform==="iPod"||navigator.platform==="iPad"),Pp}function AA(){return zp()&&D_}var Dp;function RA(){return m(Dp)||(Dp=!zp()&&typeof PointerEvent<"u"&&(!m(En.pointerEnabled)||En.pointerEnabled)),Dp}var M_,Vc;function N_(){if(!m(Vc)){let e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");let t=e.style.imageRendering;Vc=m(t)&&t!=="",Vc&&(M_=t)}return Vc}function OA(){return N_()?M_:void 0}function Pn(){return Pn._result}Pn._promise=void 0;Pn._result=void 0;Pn.initialize=function(){return m(Pn._promise)||(Pn._promise=new Promise(e=>{let t=new Image;t.onload=function(){Pn._result=t.width>0&&t.height>0,e(Pn._result)},t.onerror=function(){Pn._result=!1,e(Pn._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"})),Pn._promise};Object.defineProperties(Pn,{initialized:{get:function(){return m(Pn._result)}}});var sa=[];typeof ArrayBuffer<"u"&&(sa.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),typeof Uint8ClampedArray<"u"&&sa.push(Uint8ClampedArray),typeof Uint8ClampedArray<"u"&&sa.push(Uint8ClampedArray),typeof BigInt64Array<"u"&&sa.push(BigInt64Array),typeof BigUint64Array<"u"&&sa.push(BigUint64Array));var _i={isChrome:Lp,chromeVersion:bA,isSafari:R_,safariVersion:xA,isWebkit:O_,webkitVersion:EA,isInternetExplorer:I_,internetExplorerVersion:CA,isEdge:jc,edgeVersion:TA,isFirefox:zp,firefoxVersion:AA,isWindows:wA,isIPadOrIOS:SA,hardwareConcurrency:C(En.hardwareConcurrency,3),supportsPointerEvents:RA,supportsImageRenderingPixelated:N_,supportsWebP:Pn,imageRenderingValue:OA,typedArrayTypes:sa};_i.supportsBasis=function(e){return _i.supportsWebAssembly()&&e.context.supportsBasis};_i.supportsFullscreen=function(){return w_.supportsFullscreen()};_i.supportsTypedArrays=function(){return typeof ArrayBuffer<"u"};_i.supportsBigInt64Array=function(){return typeof BigInt64Array<"u"};_i.supportsBigUint64Array=function(){return typeof BigUint64Array<"u"};_i.supportsBigInt=function(){return typeof BigInt<"u"};_i.supportsWebWorkers=function(){return typeof Worker<"u"};_i.supportsWebAssembly=function(){return typeof WebAssembly<"u"};_i.supportsWebgl2=function(e){return e.context.webgl2};var yi=_i;function Bp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n*6<1?e+(t-e)*6*n:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}function I(e,t,n,i){this.red=C(e,1),this.green=C(t,1),this.blue=C(n,1),this.alpha=C(i,1)}I.fromCartesian4=function(e,t){return m(t)?(t.red=e.x,t.green=e.y,t.blue=e.z,t.alpha=e.w,t):new I(e.x,e.y,e.z,e.w)};I.fromBytes=function(e,t,n,i,o){return e=I.byteToFloat(C(e,255)),t=I.byteToFloat(C(t,255)),n=I.byteToFloat(C(n,255)),i=I.byteToFloat(C(i,255)),m(o)?(o.red=e,o.green=t,o.blue=n,o.alpha=i,o):new I(e,t,n,i)};I.fromAlpha=function(e,t,n){return m(n)?(n.red=e.red,n.green=e.green,n.blue=e.blue,n.alpha=t,n):new I(e.red,e.green,e.blue,t)};var Fp,Up,ro;yi.supportsTypedArrays()&&(Fp=new ArrayBuffer(4),Up=new Uint32Array(Fp),ro=new Uint8Array(Fp));I.fromRgba=function(e,t){return Up[0]=e,I.fromBytes(ro[0],ro[1],ro[2],ro[3],t)};I.fromHsl=function(e,t,n,i,o){e=C(e,0)%1,t=C(t,0),n=C(n,0),i=C(i,1);let r=n,a=n,s=n;if(t!==0){let u;n<.5?u=n*(1+t):u=n+t-n*t;let l=2*n-u;r=Bp(l,u,e+1/3),a=Bp(l,u,e),s=Bp(l,u,e-1/3)}return m(o)?(o.red=r,o.green=a,o.blue=s,o.alpha=i,o):new I(r,a,s,i)};I.fromRandom=function(e,t){e=C(e,C.EMPTY_OBJECT);let n=e.red;if(!m(n)){let a=C(e.minimumRed,0),s=C(e.maximumRed,1);n=a+j.nextRandomNumber()*(s-a)}let i=e.green;if(!m(i)){let a=C(e.minimumGreen,0),s=C(e.maximumGreen,1);i=a+j.nextRandomNumber()*(s-a)}let o=e.blue;if(!m(o)){let a=C(e.minimumBlue,0),s=C(e.maximumBlue,1);o=a+j.nextRandomNumber()*(s-a)}let r=e.alpha;if(!m(r)){let a=C(e.minimumAlpha,0),s=C(e.maximumAlpha,1);r=a+j.nextRandomNumber()*(s-a)}return m(t)?(t.red=n,t.green=i,t.blue=o,t.alpha=r,t):new I(n,i,o,r)};var IA=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,PA=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,DA=/^rgba?\(\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)(?:\s*,\s*([0-9.]+))?\s*\)$/i,MA=/^hsla?\(\s*([0-9.]+)\s*,\s*([0-9.]+%)\s*,\s*([0-9.]+%)(?:\s*,\s*([0-9.]+))?\s*\)$/i;I.fromCssColorString=function(e,t){m(t)||(t=new I),e=e.replace(/\s/g,"");let n=I[e.toUpperCase()];if(m(n))return I.clone(n,t),t;let i=IA.exec(e);return i!==null?(t.red=parseInt(i[1],16)/15,t.green=parseInt(i[2],16)/15,t.blue=parseInt(i[3],16)/15,t.alpha=parseInt(C(i[4],"f"),16)/15,t):(i=PA.exec(e),i!==null?(t.red=parseInt(i[1],16)/255,t.green=parseInt(i[2],16)/255,t.blue=parseInt(i[3],16)/255,t.alpha=parseInt(C(i[4],"ff"),16)/255,t):(i=DA.exec(e),i!==null?(t.red=parseFloat(i[1])/(i[1].substr(-1)==="%"?100:255),t.green=parseFloat(i[2])/(i[2].substr(-1)==="%"?100:255),t.blue=parseFloat(i[3])/(i[3].substr(-1)==="%"?100:255),t.alpha=parseFloat(C(i[4],"1.0")),t):(i=MA.exec(e),i!==null?I.fromHsl(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(C(i[4],"1.0")),t):(t=void 0,t))))};I.packedLength=4;I.pack=function(e,t,n){return n=C(n,0),t[n++]=e.red,t[n++]=e.green,t[n++]=e.blue,t[n]=e.alpha,t};I.unpack=function(e,t,n){return t=C(t,0),m(n)||(n=new I),n.red=e[t++],n.green=e[t++],n.blue=e[t++],n.alpha=e[t],n};I.byteToFloat=function(e){return e/255};I.floatToByte=function(e){return e===1?255:e*256|0};I.clone=function(e,t){if(m(e))return m(t)?(t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha,t):new I(e.red,e.green,e.blue,e.alpha)};I.equals=function(e,t){return e===t||m(e)&&m(t)&&e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha};I.equalsArray=function(e,t,n){return e.red===t[n]&&e.green===t[n+1]&&e.blue===t[n+2]&&e.alpha===t[n+3]};I.prototype.clone=function(e){return I.clone(this,e)};I.prototype.equals=function(e){return I.equals(this,e)};I.prototype.equalsEpsilon=function(e,t){return this===e||m(e)&&Math.abs(this.red-e.red)<=t&&Math.abs(this.green-e.green)<=t&&Math.abs(this.blue-e.blue)<=t&&Math.abs(this.alpha-e.alpha)<=t};I.prototype.toString=function(){return`(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`};I.prototype.toCssColorString=function(){let e=I.floatToByte(this.red),t=I.floatToByte(this.green),n=I.floatToByte(this.blue);return this.alpha===1?`rgb(${e},${t},${n})`:`rgba(${e},${t},${n},${this.alpha})`};I.prototype.toCssHexString=function(){let e=I.floatToByte(this.red).toString(16);e.length<2&&(e=`0${e}`);let t=I.floatToByte(this.green).toString(16);t.length<2&&(t=`0${t}`);let n=I.floatToByte(this.blue).toString(16);if(n.length<2&&(n=`0${n}`),this.alpha<1){let i=I.floatToByte(this.alpha).toString(16);return i.length<2&&(i=`0${i}`),`#${e}${t}${n}${i}`}return`#${e}${t}${n}`};I.prototype.toBytes=function(e){let t=I.floatToByte(this.red),n=I.floatToByte(this.green),i=I.floatToByte(this.blue),o=I.floatToByte(this.alpha);return m(e)?(e[0]=t,e[1]=n,e[2]=i,e[3]=o,e):[t,n,i,o]};I.prototype.toRgba=function(){return ro[0]=I.floatToByte(this.red),ro[1]=I.floatToByte(this.green),ro[2]=I.floatToByte(this.blue),ro[3]=I.floatToByte(this.alpha),Up[0]};I.prototype.brighten=function(e,t){return e=1-e,t.red=1-(1-this.red)*e,t.green=1-(1-this.green)*e,t.blue=1-(1-this.blue)*e,t.alpha=this.alpha,t};I.prototype.darken=function(e,t){return e=1-e,t.red=this.red*e,t.green=this.green*e,t.blue=this.blue*e,t.alpha=this.alpha,t};I.prototype.withAlpha=function(e,t){return I.fromAlpha(this,e,t)};I.add=function(e,t,n){return n.red=e.red+t.red,n.green=e.green+t.green,n.blue=e.blue+t.blue,n.alpha=e.alpha+t.alpha,n};I.subtract=function(e,t,n){return n.red=e.red-t.red,n.green=e.green-t.green,n.blue=e.blue-t.blue,n.alpha=e.alpha-t.alpha,n};I.multiply=function(e,t,n){return n.red=e.red*t.red,n.green=e.green*t.green,n.blue=e.blue*t.blue,n.alpha=e.alpha*t.alpha,n};I.divide=function(e,t,n){return n.red=e.red/t.red,n.green=e.green/t.green,n.blue=e.blue/t.blue,n.alpha=e.alpha/t.alpha,n};I.mod=function(e,t,n){return n.red=e.red%t.red,n.green=e.green%t.green,n.blue=e.blue%t.blue,n.alpha=e.alpha%t.alpha,n};I.lerp=function(e,t,n,i){return i.red=j.lerp(e.red,t.red,n),i.green=j.lerp(e.green,t.green,n),i.blue=j.lerp(e.blue,t.blue,n),i.alpha=j.lerp(e.alpha,t.alpha,n),i};I.multiplyByScalar=function(e,t,n){return n.red=e.red*t,n.green=e.green*t,n.blue=e.blue*t,n.alpha=e.alpha*t,n};I.divideByScalar=function(e,t,n){return n.red=e.red/t,n.green=e.green/t,n.blue=e.blue/t,n.alpha=e.alpha/t,n};I.ALICEBLUE=Object.freeze(I.fromCssColorString("#F0F8FF"));I.ANTIQUEWHITE=Object.freeze(I.fromCssColorString("#FAEBD7"));I.AQUA=Object.freeze(I.fromCssColorString("#00FFFF"));I.AQUAMARINE=Object.freeze(I.fromCssColorString("#7FFFD4"));I.AZURE=Object.freeze(I.fromCssColorString("#F0FFFF"));I.BEIGE=Object.freeze(I.fromCssColorString("#F5F5DC"));I.BISQUE=Object.freeze(I.fromCssColorString("#FFE4C4"));I.BLACK=Object.freeze(I.fromCssColorString("#000000"));I.BLANCHEDALMOND=Object.freeze(I.fromCssColorString("#FFEBCD"));I.BLUE=Object.freeze(I.fromCssColorString("#0000FF"));I.BLUEVIOLET=Object.freeze(I.fromCssColorString("#8A2BE2"));I.BROWN=Object.freeze(I.fromCssColorString("#A52A2A"));I.BURLYWOOD=Object.freeze(I.fromCssColorString("#DEB887"));I.CADETBLUE=Object.freeze(I.fromCssColorString("#5F9EA0"));I.CHARTREUSE=Object.freeze(I.fromCssColorString("#7FFF00"));I.CHOCOLATE=Object.freeze(I.fromCssColorString("#D2691E"));I.CORAL=Object.freeze(I.fromCssColorString("#FF7F50"));I.CORNFLOWERBLUE=Object.freeze(I.fromCssColorString("#6495ED"));I.CORNSILK=Object.freeze(I.fromCssColorString("#FFF8DC"));I.CRIMSON=Object.freeze(I.fromCssColorString("#DC143C"));I.CYAN=Object.freeze(I.fromCssColorString("#00FFFF"));I.DARKBLUE=Object.freeze(I.fromCssColorString("#00008B"));I.DARKCYAN=Object.freeze(I.fromCssColorString("#008B8B"));I.DARKGOLDENROD=Object.freeze(I.fromCssColorString("#B8860B"));I.DARKGRAY=Object.freeze(I.fromCssColorString("#A9A9A9"));I.DARKGREEN=Object.freeze(I.fromCssColorString("#006400"));I.DARKGREY=I.DARKGRAY;I.DARKKHAKI=Object.freeze(I.fromCssColorString("#BDB76B"));I.DARKMAGENTA=Object.freeze(I.fromCssColorString("#8B008B"));I.DARKOLIVEGREEN=Object.freeze(I.fromCssColorString("#556B2F"));I.DARKORANGE=Object.freeze(I.fromCssColorString("#FF8C00"));I.DARKORCHID=Object.freeze(I.fromCssColorString("#9932CC"));I.DARKRED=Object.freeze(I.fromCssColorString("#8B0000"));I.DARKSALMON=Object.freeze(I.fromCssColorString("#E9967A"));I.DARKSEAGREEN=Object.freeze(I.fromCssColorString("#8FBC8F"));I.DARKSLATEBLUE=Object.freeze(I.fromCssColorString("#483D8B"));I.DARKSLATEGRAY=Object.freeze(I.fromCssColorString("#2F4F4F"));I.DARKSLATEGREY=I.DARKSLATEGRAY;I.DARKTURQUOISE=Object.freeze(I.fromCssColorString("#00CED1"));I.DARKVIOLET=Object.freeze(I.fromCssColorString("#9400D3"));I.DEEPPINK=Object.freeze(I.fromCssColorString("#FF1493"));I.DEEPSKYBLUE=Object.freeze(I.fromCssColorString("#00BFFF"));I.DIMGRAY=Object.freeze(I.fromCssColorString("#696969"));I.DIMGREY=I.DIMGRAY;I.DODGERBLUE=Object.freeze(I.fromCssColorString("#1E90FF"));I.FIREBRICK=Object.freeze(I.fromCssColorString("#B22222"));I.FLORALWHITE=Object.freeze(I.fromCssColorString("#FFFAF0"));I.FORESTGREEN=Object.freeze(I.fromCssColorString("#228B22"));I.FUCHSIA=Object.freeze(I.fromCssColorString("#FF00FF"));I.GAINSBORO=Object.freeze(I.fromCssColorString("#DCDCDC"));I.GHOSTWHITE=Object.freeze(I.fromCssColorString("#F8F8FF"));I.GOLD=Object.freeze(I.fromCssColorString("#FFD700"));I.GOLDENROD=Object.freeze(I.fromCssColorString("#DAA520"));I.GRAY=Object.freeze(I.fromCssColorString("#808080"));I.GREEN=Object.freeze(I.fromCssColorString("#008000"));I.GREENYELLOW=Object.freeze(I.fromCssColorString("#ADFF2F"));I.GREY=I.GRAY;I.HONEYDEW=Object.freeze(I.fromCssColorString("#F0FFF0"));I.HOTPINK=Object.freeze(I.fromCssColorString("#FF69B4"));I.INDIANRED=Object.freeze(I.fromCssColorString("#CD5C5C"));I.INDIGO=Object.freeze(I.fromCssColorString("#4B0082"));I.IVORY=Object.freeze(I.fromCssColorString("#FFFFF0"));I.KHAKI=Object.freeze(I.fromCssColorString("#F0E68C"));I.LAVENDER=Object.freeze(I.fromCssColorString("#E6E6FA"));I.LAVENDAR_BLUSH=Object.freeze(I.fromCssColorString("#FFF0F5"));I.LAWNGREEN=Object.freeze(I.fromCssColorString("#7CFC00"));I.LEMONCHIFFON=Object.freeze(I.fromCssColorString("#FFFACD"));I.LIGHTBLUE=Object.freeze(I.fromCssColorString("#ADD8E6"));I.LIGHTCORAL=Object.freeze(I.fromCssColorString("#F08080"));I.LIGHTCYAN=Object.freeze(I.fromCssColorString("#E0FFFF"));I.LIGHTGOLDENRODYELLOW=Object.freeze(I.fromCssColorString("#FAFAD2"));I.LIGHTGRAY=Object.freeze(I.fromCssColorString("#D3D3D3"));I.LIGHTGREEN=Object.freeze(I.fromCssColorString("#90EE90"));I.LIGHTGREY=I.LIGHTGRAY;I.LIGHTPINK=Object.freeze(I.fromCssColorString("#FFB6C1"));I.LIGHTSEAGREEN=Object.freeze(I.fromCssColorString("#20B2AA"));I.LIGHTSKYBLUE=Object.freeze(I.fromCssColorString("#87CEFA"));I.LIGHTSLATEGRAY=Object.freeze(I.fromCssColorString("#778899"));I.LIGHTSLATEGREY=I.LIGHTSLATEGRAY;I.LIGHTSTEELBLUE=Object.freeze(I.fromCssColorString("#B0C4DE"));I.LIGHTYELLOW=Object.freeze(I.fromCssColorString("#FFFFE0"));I.LIME=Object.freeze(I.fromCssColorString("#00FF00"));I.LIMEGREEN=Object.freeze(I.fromCssColorString("#32CD32"));I.LINEN=Object.freeze(I.fromCssColorString("#FAF0E6"));I.MAGENTA=Object.freeze(I.fromCssColorString("#FF00FF"));I.MAROON=Object.freeze(I.fromCssColorString("#800000"));I.MEDIUMAQUAMARINE=Object.freeze(I.fromCssColorString("#66CDAA"));I.MEDIUMBLUE=Object.freeze(I.fromCssColorString("#0000CD"));I.MEDIUMORCHID=Object.freeze(I.fromCssColorString("#BA55D3"));I.MEDIUMPURPLE=Object.freeze(I.fromCssColorString("#9370DB"));I.MEDIUMSEAGREEN=Object.freeze(I.fromCssColorString("#3CB371"));I.MEDIUMSLATEBLUE=Object.freeze(I.fromCssColorString("#7B68EE"));I.MEDIUMSPRINGGREEN=Object.freeze(I.fromCssColorString("#00FA9A"));I.MEDIUMTURQUOISE=Object.freeze(I.fromCssColorString("#48D1CC"));I.MEDIUMVIOLETRED=Object.freeze(I.fromCssColorString("#C71585"));I.MIDNIGHTBLUE=Object.freeze(I.fromCssColorString("#191970"));I.MINTCREAM=Object.freeze(I.fromCssColorString("#F5FFFA"));I.MISTYROSE=Object.freeze(I.fromCssColorString("#FFE4E1"));I.MOCCASIN=Object.freeze(I.fromCssColorString("#FFE4B5"));I.NAVAJOWHITE=Object.freeze(I.fromCssColorString("#FFDEAD"));I.NAVY=Object.freeze(I.fromCssColorString("#000080"));I.OLDLACE=Object.freeze(I.fromCssColorString("#FDF5E6"));I.OLIVE=Object.freeze(I.fromCssColorString("#808000"));I.OLIVEDRAB=Object.freeze(I.fromCssColorString("#6B8E23"));I.ORANGE=Object.freeze(I.fromCssColorString("#FFA500"));I.ORANGERED=Object.freeze(I.fromCssColorString("#FF4500"));I.ORCHID=Object.freeze(I.fromCssColorString("#DA70D6"));I.PALEGOLDENROD=Object.freeze(I.fromCssColorString("#EEE8AA"));I.PALEGREEN=Object.freeze(I.fromCssColorString("#98FB98"));I.PALETURQUOISE=Object.freeze(I.fromCssColorString("#AFEEEE"));I.PALEVIOLETRED=Object.freeze(I.fromCssColorString("#DB7093"));I.PAPAYAWHIP=Object.freeze(I.fromCssColorString("#FFEFD5"));I.PEACHPUFF=Object.freeze(I.fromCssColorString("#FFDAB9"));I.PERU=Object.freeze(I.fromCssColorString("#CD853F"));I.PINK=Object.freeze(I.fromCssColorString("#FFC0CB"));I.PLUM=Object.freeze(I.fromCssColorString("#DDA0DD"));I.POWDERBLUE=Object.freeze(I.fromCssColorString("#B0E0E6"));I.PURPLE=Object.freeze(I.fromCssColorString("#800080"));I.RED=Object.freeze(I.fromCssColorString("#FF0000"));I.ROSYBROWN=Object.freeze(I.fromCssColorString("#BC8F8F"));I.ROYALBLUE=Object.freeze(I.fromCssColorString("#4169E1"));I.SADDLEBROWN=Object.freeze(I.fromCssColorString("#8B4513"));I.SALMON=Object.freeze(I.fromCssColorString("#FA8072"));I.SANDYBROWN=Object.freeze(I.fromCssColorString("#F4A460"));I.SEAGREEN=Object.freeze(I.fromCssColorString("#2E8B57"));I.SEASHELL=Object.freeze(I.fromCssColorString("#FFF5EE"));I.SIENNA=Object.freeze(I.fromCssColorString("#A0522D"));I.SILVER=Object.freeze(I.fromCssColorString("#C0C0C0"));I.SKYBLUE=Object.freeze(I.fromCssColorString("#87CEEB"));I.SLATEBLUE=Object.freeze(I.fromCssColorString("#6A5ACD"));I.SLATEGRAY=Object.freeze(I.fromCssColorString("#708090"));I.SLATEGREY=I.SLATEGRAY;I.SNOW=Object.freeze(I.fromCssColorString("#FFFAFA"));I.SPRINGGREEN=Object.freeze(I.fromCssColorString("#00FF7F"));I.STEELBLUE=Object.freeze(I.fromCssColorString("#4682B4"));I.TAN=Object.freeze(I.fromCssColorString("#D2B48C"));I.TEAL=Object.freeze(I.fromCssColorString("#008080"));I.THISTLE=Object.freeze(I.fromCssColorString("#D8BFD8"));I.TOMATO=Object.freeze(I.fromCssColorString("#FF6347"));I.TURQUOISE=Object.freeze(I.fromCssColorString("#40E0D0"));I.VIOLET=Object.freeze(I.fromCssColorString("#EE82EE"));I.WHEAT=Object.freeze(I.fromCssColorString("#F5DEB3"));I.WHITE=Object.freeze(I.fromCssColorString("#FFFFFF"));I.WHITESMOKE=Object.freeze(I.fromCssColorString("#F5F5F5"));I.YELLOW=Object.freeze(I.fromCssColorString("#FFFF00"));I.YELLOWGREEN=Object.freeze(I.fromCssColorString("#9ACD32"));I.TRANSPARENT=Object.freeze(new I(0,0,0,0));var Et=I;var NA={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_ASTC_4x4_WEBGL:37808,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGBA_BPTC_UNORM:36492,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047},z=Object.freeze(NA);var Be={BYTE:z.BYTE,UNSIGNED_BYTE:z.UNSIGNED_BYTE,SHORT:z.SHORT,UNSIGNED_SHORT:z.UNSIGNED_SHORT,INT:z.INT,UNSIGNED_INT:z.UNSIGNED_INT,FLOAT:z.FLOAT,DOUBLE:z.DOUBLE};Be.getSizeInBytes=function(e){switch(e){case Be.BYTE:return Int8Array.BYTES_PER_ELEMENT;case Be.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Be.SHORT:return Int16Array.BYTES_PER_ELEMENT;case Be.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Be.INT:return Int32Array.BYTES_PER_ELEMENT;case Be.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Be.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case Be.DOUBLE:return Float64Array.BYTES_PER_ELEMENT}};Be.fromTypedArray=function(e){if(e instanceof Int8Array)return Be.BYTE;if(e instanceof Uint8Array)return Be.UNSIGNED_BYTE;if(e instanceof Int16Array)return Be.SHORT;if(e instanceof Uint16Array)return Be.UNSIGNED_SHORT;if(e instanceof Int32Array)return Be.INT;if(e instanceof Uint32Array)return Be.UNSIGNED_INT;if(e instanceof Float32Array)return Be.FLOAT;if(e instanceof Float64Array)return Be.DOUBLE};Be.validate=function(e){return m(e)&&(e===Be.BYTE||e===Be.UNSIGNED_BYTE||e===Be.SHORT||e===Be.UNSIGNED_SHORT||e===Be.INT||e===Be.UNSIGNED_INT||e===Be.FLOAT||e===Be.DOUBLE)};Be.createTypedArray=function(e,t){switch(e){case Be.BYTE:return new Int8Array(t);case Be.UNSIGNED_BYTE:return new Uint8Array(t);case Be.SHORT:return new Int16Array(t);case Be.UNSIGNED_SHORT:return new Uint16Array(t);case Be.INT:return new Int32Array(t);case Be.UNSIGNED_INT:return new Uint32Array(t);case Be.FLOAT:return new Float32Array(t);case Be.DOUBLE:return new Float64Array(t)}};Be.createArrayBufferView=function(e,t,n,i){switch(n=C(n,0),i=C(i,(t.byteLength-n)/Be.getSizeInBytes(e)),e){case Be.BYTE:return new Int8Array(t,n,i);case Be.UNSIGNED_BYTE:return new Uint8Array(t,n,i);case Be.SHORT:return new Int16Array(t,n,i);case Be.UNSIGNED_SHORT:return new Uint16Array(t,n,i);case Be.INT:return new Int32Array(t,n,i);case Be.UNSIGNED_INT:return new Uint32Array(t,n,i);case Be.FLOAT:return new Float32Array(t,n,i);case Be.DOUBLE:return new Float64Array(t,n,i)}};Be.fromName=function(e){switch(e){case"BYTE":return Be.BYTE;case"UNSIGNED_BYTE":return Be.UNSIGNED_BYTE;case"SHORT":return Be.SHORT;case"UNSIGNED_SHORT":return Be.UNSIGNED_SHORT;case"INT":return Be.INT;case"UNSIGNED_INT":return Be.UNSIGNED_INT;case"FLOAT":return Be.FLOAT;case"DOUBLE":return Be.DOUBLE}};var Re=Object.freeze(Be);function ca(e,t,n,i){e=C(e,1),t=C(t,1),n=C(n,1),i=C(i,1),this.value=new Uint8Array([Et.floatToByte(e),Et.floatToByte(t),Et.floatToByte(n),Et.floatToByte(i)])}Object.defineProperties(ca.prototype,{componentDatatype:{get:function(){return Re.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 4}},normalize:{get:function(){return!0}}});ca.fromColor=function(e){return new ca(e.red,e.green,e.blue,e.alpha)};ca.toValue=function(e,t){return m(t)?e.toBytes(t):new Uint8Array(e.toBytes())};ca.equals=function(e,t){return e===t||m(e)&&m(t)&&e.value[0]===t.value[0]&&e.value[1]===t.value[1]&&e.value[2]===t.value[2]&&e.value[3]===t.value[3]};var Gc=ca;function ge(e,t,n,i){this.x=C(e,0),this.y=C(t,0),this.z=C(n,0),this.w=C(i,0)}ge.fromElements=function(e,t,n,i,o){return m(o)?(o.x=e,o.y=t,o.z=n,o.w=i,o):new ge(e,t,n,i)};ge.fromColor=function(e,t){return m(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new ge(e.red,e.green,e.blue,e.alpha)};ge.clone=function(e,t){if(m(e))return m(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new ge(e.x,e.y,e.z,e.w)};ge.packedLength=4;ge.pack=function(e,t,n){return n=C(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t};ge.unpack=function(e,t,n){return t=C(t,0),m(n)||(n=new ge),n.x=e[t++],n.y=e[t++],n.z=e[t++],n.w=e[t],n};ge.packArray=function(e,t){let n=e.length,i=n*4;m(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)ge.pack(e[o],t,o*4);return t};ge.unpackArray=function(e,t){let n=e.length;m(t)?t.length=n/4:t=new Array(n/4);for(let i=0;i<n;i+=4){let o=i/4;t[o]=ge.unpack(e,i,t[o])}return t};ge.fromArray=ge.unpack;ge.maximumComponent=function(e){return Math.max(e.x,e.y,e.z,e.w)};ge.minimumComponent=function(e){return Math.min(e.x,e.y,e.z,e.w)};ge.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n.w=Math.min(e.w,t.w),n};ge.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n.w=Math.max(e.w,t.w),n};ge.clamp=function(e,t,n,i){let o=j.clamp(e.x,t.x,n.x),r=j.clamp(e.y,t.y,n.y),a=j.clamp(e.z,t.z,n.z),s=j.clamp(e.w,t.w,n.w);return i.x=o,i.y=r,i.z=a,i.w=s,i};ge.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w};ge.magnitude=function(e){return Math.sqrt(ge.magnitudeSquared(e))};var Hc=new ge;ge.distance=function(e,t){return ge.subtract(e,t,Hc),ge.magnitude(Hc)};ge.distanceSquared=function(e,t){return ge.subtract(e,t,Hc),ge.magnitudeSquared(Hc)};ge.normalize=function(e,t){let n=ge.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t.w=e.w/n,t};ge.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w};ge.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n.w=e.w*t.w,n};ge.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n.w=e.w/t.w,n};ge.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n};ge.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n};ge.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n};ge.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n};ge.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t};ge.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var L_=new ge;ge.lerp=function(e,t,n,i){return ge.multiplyByScalar(t,n,L_),i=ge.multiplyByScalar(e,1-n,i),ge.add(L_,i,i)};var LA=new ge;ge.mostOrthogonalAxis=function(e,t){let n=ge.normalize(e,LA);return ge.abs(n,n),n.x<=n.y?n.x<=n.z?n.x<=n.w?t=ge.clone(ge.UNIT_X,t):t=ge.clone(ge.UNIT_W,t):n.z<=n.w?t=ge.clone(ge.UNIT_Z,t):t=ge.clone(ge.UNIT_W,t):n.y<=n.z?n.y<=n.w?t=ge.clone(ge.UNIT_Y,t):t=ge.clone(ge.UNIT_W,t):n.z<=n.w?t=ge.clone(ge.UNIT_Z,t):t=ge.clone(ge.UNIT_W,t),t};ge.equals=function(e,t){return e===t||m(e)&&m(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w};ge.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]&&e.w===t[n+3]};ge.equalsEpsilon=function(e,t,n,i){return e===t||m(e)&&m(t)&&j.equalsEpsilon(e.x,t.x,n,i)&&j.equalsEpsilon(e.y,t.y,n,i)&&j.equalsEpsilon(e.z,t.z,n,i)&&j.equalsEpsilon(e.w,t.w,n,i)};ge.ZERO=Object.freeze(new ge(0,0,0,0));ge.ONE=Object.freeze(new ge(1,1,1,1));ge.UNIT_X=Object.freeze(new ge(1,0,0,0));ge.UNIT_Y=Object.freeze(new ge(0,1,0,0));ge.UNIT_Z=Object.freeze(new ge(0,0,1,0));ge.UNIT_W=Object.freeze(new ge(0,0,0,1));ge.prototype.clone=function(e){return ge.clone(this,e)};ge.prototype.equals=function(e){return ge.equals(this,e)};ge.prototype.equalsEpsilon=function(e,t,n){return ge.equalsEpsilon(this,e,t,n)};ge.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};var kp=new Float32Array(1),Cn=new Uint8Array(kp.buffer),zA=new Uint32Array([287454020]),BA=new Uint8Array(zA.buffer),z_=BA[0]===68;ge.packFloat=function(e,t){return m(t)||(t=new ge),kp[0]=e,z_?(t.x=Cn[0],t.y=Cn[1],t.z=Cn[2],t.w=Cn[3]):(t.x=Cn[3],t.y=Cn[2],t.z=Cn[1],t.w=Cn[0]),t};ge.unpackFloat=function(e){return z_?(Cn[0]=e.x,Cn[1]=e.y,Cn[2]=e.z,Cn[3]=e.w):(Cn[0]=e.w,Cn[1]=e.z,Cn[2]=e.y,Cn[3]=e.x),kp[0]};var De=ge;function ue(e,t,n,i,o,r,a,s,u){this[0]=C(e,0),this[1]=C(i,0),this[2]=C(a,0),this[3]=C(t,0),this[4]=C(o,0),this[5]=C(s,0),this[6]=C(n,0),this[7]=C(r,0),this[8]=C(u,0)}ue.packedLength=9;ue.pack=function(e,t,n){return n=C(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t};ue.unpack=function(e,t,n){return t=C(t,0),m(n)||(n=new ue),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n};ue.packArray=function(e,t){let n=e.length,i=n*9;m(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)ue.pack(e[o],t,o*9);return t};ue.unpackArray=function(e,t){let n=e.length;m(t)?t.length=n/9:t=new Array(n/9);for(let i=0;i<n;i+=9){let o=i/9;t[o]=ue.unpack(e,i,t[o])}return t};ue.clone=function(e,t){if(m(e))return m(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new ue(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])};ue.fromArray=ue.unpack;ue.fromColumnMajorArray=function(e,t){return ue.clone(e,t)};ue.fromRowMajorArray=function(e,t){return m(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new ue(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])};ue.fromQuaternion=function(e,t){let n=e.x*e.x,i=e.x*e.y,o=e.x*e.z,r=e.x*e.w,a=e.y*e.y,s=e.y*e.z,u=e.y*e.w,l=e.z*e.z,d=e.z*e.w,f=e.w*e.w,g=n-a-l+f,b=2*(i-d),x=2*(o+u),T=2*(i+d),R=-n+a-l+f,D=2*(s-r),M=2*(o-u),N=2*(s+r),V=-n-a+l+f;return m(t)?(t[0]=g,t[1]=T,t[2]=M,t[3]=b,t[4]=R,t[5]=N,t[6]=x,t[7]=D,t[8]=V,t):new ue(g,b,x,T,R,D,M,N,V)};ue.fromHeadingPitchRoll=function(e,t){let n=Math.cos(-e.pitch),i=Math.cos(-e.heading),o=Math.cos(e.roll),r=Math.sin(-e.pitch),a=Math.sin(-e.heading),s=Math.sin(e.roll),u=n*i,l=-o*a+s*r*i,d=s*a+o*r*i,f=n*a,g=o*i+s*r*a,b=-s*i+o*r*a,x=-r,T=s*n,R=o*n;return m(t)?(t[0]=u,t[1]=f,t[2]=x,t[3]=l,t[4]=g,t[5]=T,t[6]=d,t[7]=b,t[8]=R,t):new ue(u,l,d,f,g,b,x,T,R)};ue.fromScale=function(e,t){return m(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new ue(e.x,0,0,0,e.y,0,0,0,e.z)};ue.fromUniformScale=function(e,t){return m(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new ue(e,0,0,0,e,0,0,0,e)};ue.fromCrossProduct=function(e,t){return m(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new ue(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)};ue.fromRotationX=function(e,t){let n=Math.cos(e),i=Math.sin(e);return m(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=n,t[5]=i,t[6]=0,t[7]=-i,t[8]=n,t):new ue(1,0,0,0,n,-i,0,i,n)};ue.fromRotationY=function(e,t){let n=Math.cos(e),i=Math.sin(e);return m(t)?(t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=1,t[5]=0,t[6]=i,t[7]=0,t[8]=n,t):new ue(n,0,i,0,1,0,-i,0,n)};ue.fromRotationZ=function(e,t){let n=Math.cos(e),i=Math.sin(e);return m(t)?(t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new ue(n,-i,0,i,n,0,0,0,1)};ue.toArray=function(e,t){return m(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]};ue.getElementIndex=function(e,t){return e*3+t};ue.getColumn=function(e,t,n){let i=t*3,o=e[i],r=e[i+1],a=e[i+2];return n.x=o,n.y=r,n.z=a,n};ue.setColumn=function(e,t,n,i){i=ue.clone(e,i);let o=t*3;return i[o]=n.x,i[o+1]=n.y,i[o+2]=n.z,i};ue.getRow=function(e,t,n){let i=e[t],o=e[t+3],r=e[t+6];return n.x=i,n.y=o,n.z=r,n};ue.setRow=function(e,t,n,i){return i=ue.clone(e,i),i[t]=n.x,i[t+3]=n.y,i[t+6]=n.z,i};var FA=new h;ue.setScale=function(e,t,n){let i=ue.getScale(e,FA),o=t.x/i.x,r=t.y/i.y,a=t.z/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*a,n[7]=e[7]*a,n[8]=e[8]*a,n};var UA=new h;ue.setUniformScale=function(e,t,n){let i=ue.getScale(e,UA),o=t/i.x,r=t/i.y,a=t/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*a,n[7]=e[7]*a,n[8]=e[8]*a,n};var Vp=new h;ue.getScale=function(e,t){return t.x=h.magnitude(h.fromElements(e[0],e[1],e[2],Vp)),t.y=h.magnitude(h.fromElements(e[3],e[4],e[5],Vp)),t.z=h.magnitude(h.fromElements(e[6],e[7],e[8],Vp)),t};var B_=new h;ue.getMaximumScale=function(e){return ue.getScale(e,B_),h.maximumComponent(B_)};var kA=new h;ue.setRotation=function(e,t,n){let i=ue.getScale(e,kA);return n[0]=t[0]*i.x,n[1]=t[1]*i.x,n[2]=t[2]*i.x,n[3]=t[3]*i.y,n[4]=t[4]*i.y,n[5]=t[5]*i.y,n[6]=t[6]*i.z,n[7]=t[7]*i.z,n[8]=t[8]*i.z,n};var VA=new h;ue.getRotation=function(e,t){let n=ue.getScale(e,VA);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.x,t[3]=e[3]/n.y,t[4]=e[4]/n.y,t[5]=e[5]/n.y,t[6]=e[6]/n.z,t[7]=e[7]/n.z,t[8]=e[8]/n.z,t};ue.multiply=function(e,t,n){let i=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],o=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],r=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],a=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],u=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],l=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],d=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],f=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return n[0]=i,n[1]=o,n[2]=r,n[3]=a,n[4]=s,n[5]=u,n[6]=l,n[7]=d,n[8]=f,n};ue.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n};ue.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n};ue.multiplyByVector=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=e[0]*i+e[3]*o+e[6]*r,s=e[1]*i+e[4]*o+e[7]*r,u=e[2]*i+e[5]*o+e[8]*r;return n.x=a,n.y=s,n.z=u,n};ue.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n};ue.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.x,n[3]=e[3]*t.y,n[4]=e[4]*t.y,n[5]=e[5]*t.y,n[6]=e[6]*t.z,n[7]=e[7]*t.z,n[8]=e[8]*t.z,n};ue.multiplyByUniformScale=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n};ue.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t};ue.transpose=function(e,t){let n=e[0],i=e[3],o=e[6],r=e[1],a=e[4],s=e[7],u=e[2],l=e[5],d=e[8];return t[0]=n,t[1]=i,t[2]=o,t[3]=r,t[4]=a,t[5]=s,t[6]=u,t[7]=l,t[8]=d,t};function jA(e){let t=0;for(let n=0;n<9;++n){let i=e[n];t+=i*i}return Math.sqrt(t)}var jp=[1,0,0],Gp=[2,2,1];function GA(e){let t=0;for(let n=0;n<3;++n){let i=e[ue.getElementIndex(Gp[n],jp[n])];t+=2*i*i}return Math.sqrt(t)}function HA(e,t){let n=j.EPSILON15,i=0,o=1;for(let l=0;l<3;++l){let d=Math.abs(e[ue.getElementIndex(Gp[l],jp[l])]);d>i&&(o=l,i=d)}let r=1,a=0,s=jp[o],u=Gp[o];if(Math.abs(e[ue.getElementIndex(u,s)])>n){let l=e[ue.getElementIndex(u,u)],d=e[ue.getElementIndex(s,s)],f=e[ue.getElementIndex(u,s)],g=(l-d)/2/f,b;g<0?b=-1/(-g+Math.sqrt(1+g*g)):b=1/(g+Math.sqrt(1+g*g)),r=1/Math.sqrt(1+b*b),a=b*r}return t=ue.clone(ue.IDENTITY,t),t[ue.getElementIndex(s,s)]=t[ue.getElementIndex(u,u)]=r,t[ue.getElementIndex(u,s)]=a,t[ue.getElementIndex(s,u)]=-a,t}var qc=new ue,F_=new ue;ue.computeEigenDecomposition=function(e,t){let n=j.EPSILON20,i=10,o=0,r=0;m(t)||(t={});let a=t.unitary=ue.clone(ue.IDENTITY,t.unitary),s=t.diagonal=ue.clone(e,t.diagonal),u=n*jA(s);for(;r<i&&GA(s)>u;)HA(s,qc),ue.transpose(qc,F_),ue.multiply(s,qc,s),ue.multiply(F_,s,s),ue.multiply(a,qc,a),++o>2&&(++r,o=0);return t};ue.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t};ue.determinant=function(e){let t=e[0],n=e[3],i=e[6],o=e[1],r=e[4],a=e[7],s=e[2],u=e[5],l=e[8];return t*(r*l-u*a)+o*(u*i-n*l)+s*(n*a-r*i)};ue.inverse=function(e,t){let n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],u=e[6],l=e[7],d=e[8],f=ue.determinant(e);t[0]=a*d-l*s,t[1]=l*o-i*d,t[2]=i*s-a*o,t[3]=u*s-r*d,t[4]=n*d-u*o,t[5]=r*o-n*s,t[6]=r*l-u*a,t[7]=u*i-n*l,t[8]=n*a-r*i;let g=1/f;return ue.multiplyByScalar(t,g,t)};var qA=new ue;ue.inverseTranspose=function(e,t){return ue.inverse(ue.transpose(e,qA),t)};ue.equals=function(e,t){return e===t||m(e)&&m(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]};ue.equalsEpsilon=function(e,t,n){return n=C(n,0),e===t||m(e)&&m(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n};ue.IDENTITY=Object.freeze(new ue(1,0,0,0,1,0,0,0,1));ue.ZERO=Object.freeze(new ue(0,0,0,0,0,0,0,0,0));ue.COLUMN0ROW0=0;ue.COLUMN0ROW1=1;ue.COLUMN0ROW2=2;ue.COLUMN1ROW0=3;ue.COLUMN1ROW1=4;ue.COLUMN1ROW2=5;ue.COLUMN2ROW0=6;ue.COLUMN2ROW1=7;ue.COLUMN2ROW2=8;Object.defineProperties(ue.prototype,{length:{get:function(){return ue.packedLength}}});ue.prototype.clone=function(e){return ue.clone(this,e)};ue.prototype.equals=function(e){return ue.equals(this,e)};ue.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]};ue.prototype.equalsEpsilon=function(e,t){return ue.equalsEpsilon(this,e,t)};ue.prototype.toString=function(){return`(${this[0]}, ${this[3]}, ${this[6]})
(${this[1]}, ${this[4]}, ${this[7]})
(${this[2]}, ${this[5]}, ${this[8]})`};var _e=ue;function fs(e){this.name="RuntimeError",this.message=e;let t;try{throw new Error}catch(n){t=n.stack}this.stack=t}m(Object.create)&&(fs.prototype=Object.create(Error.prototype),fs.prototype.constructor=fs);fs.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return m(this.stack)&&(e+=`
${this.stack.toString()}`),e};var It=fs;function oe(e,t,n,i,o,r,a,s,u,l,d,f,g,b,x,T){this[0]=C(e,0),this[1]=C(o,0),this[2]=C(u,0),this[3]=C(g,0),this[4]=C(t,0),this[5]=C(r,0),this[6]=C(l,0),this[7]=C(b,0),this[8]=C(n,0),this[9]=C(a,0),this[10]=C(d,0),this[11]=C(x,0),this[12]=C(i,0),this[13]=C(s,0),this[14]=C(f,0),this[15]=C(T,0)}oe.packedLength=16;oe.computeReflection=function(e,t,n,i,o){return m(o)||(o=new oe),o[0]=1-2*e*e,o[1]=-2*e*t,o[2]=-2*e*n,o[3]=0,o[4]=-2*t*e,o[5]=1-2*t*t,o[6]=-2*t*n,o[7]=0,o[8]=-2*n*e,o[9]=-2*n*t,o[10]=1-2*n*n,o[11]=0,o[12]=-2*i*e,o[13]=-2*i*t,o[14]=-2*i*n,o[15]=1,o};oe.computeObliquePerspective=function(e,t,n){let i=oe.inverse(n,new oe),o=oe.inverseTranspose(t,new oe),r=oe.multiplyByVector(o,e,new De),a=new De(U_(r.x),U_(r.y),1,1),s=oe.multiplyByVector(i,a,new De),u=2/De.dot(r,s),l=[r.x*u,r.y*u,r.z*u+1,r.w*u];return new oe(n[0],n[4],n[8],n[12],n[1],n[5],n[9],n[13],l[0],l[1],l[2],l[3],n[3],n[7],n[11],n[15])};function U_(e){return e>0?1:e<0?-1:0}oe.pack=function(e,t,n){return n=C(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t[n++]=e[9],t[n++]=e[10],t[n++]=e[11],t[n++]=e[12],t[n++]=e[13],t[n++]=e[14],t[n]=e[15],t};oe.unpack=function(e,t,n){return t=C(t,0),m(n)||(n=new oe),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n[9]=e[t++],n[10]=e[t++],n[11]=e[t++],n[12]=e[t++],n[13]=e[t++],n[14]=e[t++],n[15]=e[t],n};oe.packArray=function(e,t){let n=e.length,i=n*16;m(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)oe.pack(e[o],t,o*16);return t};oe.unpackArray=function(e,t){let n=e.length;m(t)?t.length=n/16:t=new Array(n/16);for(let i=0;i<n;i+=16){let o=i/16;t[o]=oe.unpack(e,i,t[o])}return t};oe.clone=function(e,t){if(m(e))return m(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new oe(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])};oe.fromArray=oe.unpack;oe.fromColumnMajorArray=function(e,t){return oe.clone(e,t)};oe.fromRowMajorArray=function(e,t){return m(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new oe(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])};oe.fromRotationTranslation=function(e,t,n){return t=C(t,h.ZERO),m(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=0,n[4]=e[3],n[5]=e[4],n[6]=e[5],n[7]=0,n[8]=e[6],n[9]=e[7],n[10]=e[8],n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,n):new oe(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)};oe.fromTranslationQuaternionRotationScale=function(e,t,n,i){m(i)||(i=new oe);let o=n.x,r=n.y,a=n.z,s=t.x*t.x,u=t.x*t.y,l=t.x*t.z,d=t.x*t.w,f=t.y*t.y,g=t.y*t.z,b=t.y*t.w,x=t.z*t.z,T=t.z*t.w,R=t.w*t.w,D=s-f-x+R,M=2*(u-T),N=2*(l+b),V=2*(u+T),q=-s+f-x+R,_=2*(g-d),ee=2*(l-b),Z=2*(g+d),J=-s-f+x+R;return i[0]=D*o,i[1]=V*o,i[2]=ee*o,i[3]=0,i[4]=M*r,i[5]=q*r,i[6]=Z*r,i[7]=0,i[8]=N*a,i[9]=_*a,i[10]=J*a,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,i};oe.fromTranslationRotationScale=function(e,t){return oe.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)};oe.fromTranslation=function(e,t){return oe.fromRotationTranslation(_e.IDENTITY,e,t)};oe.fromScale=function(e,t){return m(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new oe(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)};oe.fromUniformScale=function(e,t){return m(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new oe(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};oe.fromRotation=function(e,t){return m(t)||(t=new oe),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=0,t[4]=e[3],t[5]=e[4],t[6]=e[5],t[7]=0,t[8]=e[6],t[9]=e[7],t[10]=e[8],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var ua=new h,la=new h,ms=new h;oe.fromCamera=function(e,t){let n=e.position,i=e.direction,o=e.up;h.normalize(i,ua),h.normalize(h.cross(ua,o,la),la),h.normalize(h.cross(la,ua,ms),ms);let r=la.x,a=la.y,s=la.z,u=ua.x,l=ua.y,d=ua.z,f=ms.x,g=ms.y,b=ms.z,x=n.x,T=n.y,R=n.z,D=r*-x+a*-T+s*-R,M=f*-x+g*-T+b*-R,N=u*x+l*T+d*R;return m(t)?(t[0]=r,t[1]=f,t[2]=-u,t[3]=0,t[4]=a,t[5]=g,t[6]=-l,t[7]=0,t[8]=s,t[9]=b,t[10]=-d,t[11]=0,t[12]=D,t[13]=M,t[14]=N,t[15]=1,t):new oe(r,a,s,D,f,g,b,M,-u,-l,-d,N,0,0,0,1)};oe.computePerspectiveFieldOfView=function(e,t,n,i,o){let a=1/Math.tan(e*.5),s=a/t,u=(i+n)/(n-i),l=2*i*n/(n-i);return o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=u,o[11]=-1,o[12]=0,o[13]=0,o[14]=l,o[15]=0,o};oe.computeOrthographicOffCenter=function(e,t,n,i,o,r,a){let s=1/(t-e),u=1/(i-n),l=1/(r-o),d=-(t+e)*s,f=-(i+n)*u,g=-(r+o)*l;return s*=2,u*=2,l*=-2,a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=l,a[11]=0,a[12]=d,a[13]=f,a[14]=g,a[15]=1,a};oe.computePerspectiveOffCenter=function(e,t,n,i,o,r,a){let s=2*o/(t-e),u=2*o/(i-n),l=(t+e)/(t-e),d=(i+n)/(i-n),f=-(r+o)/(r-o),g=-1,b=-2*r*o/(r-o);return a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=l,a[9]=d,a[10]=f,a[11]=g,a[12]=0,a[13]=0,a[14]=b,a[15]=0,a};oe.computeInfinitePerspectiveOffCenter=function(e,t,n,i,o,r){let a=2*o/(t-e),s=2*o/(i-n),u=(t+e)/(t-e),l=(i+n)/(i-n),d=-1,f=-1,g=-2*o;return r[0]=a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=u,r[9]=l,r[10]=d,r[11]=f,r[12]=0,r[13]=0,r[14]=g,r[15]=0,r};oe.computeViewportTransformation=function(e,t,n,i){m(i)||(i=new oe),e=C(e,C.EMPTY_OBJECT);let o=C(e.x,0),r=C(e.y,0),a=C(e.width,0),s=C(e.height,0);t=C(t,0),n=C(n,1);let u=a*.5,l=s*.5,d=(n-t)*.5,f=u,g=l,b=d,x=o+u,T=r+l,R=t+d,D=1;return i[0]=f,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=g,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=b,i[11]=0,i[12]=x,i[13]=T,i[14]=R,i[15]=D,i};oe.computeView=function(e,t,n,i,o){return o[0]=i.x,o[1]=n.x,o[2]=-t.x,o[3]=0,o[4]=i.y,o[5]=n.y,o[6]=-t.y,o[7]=0,o[8]=i.z,o[9]=n.z,o[10]=-t.z,o[11]=0,o[12]=-h.dot(i,e),o[13]=-h.dot(n,e),o[14]=h.dot(t,e),o[15]=1,o};oe.toArray=function(e,t){return m(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]};oe.getElementIndex=function(e,t){return e*4+t};oe.getColumn=function(e,t,n){let i=t*4,o=e[i],r=e[i+1],a=e[i+2],s=e[i+3];return n.x=o,n.y=r,n.z=a,n.w=s,n};oe.setColumn=function(e,t,n,i){i=oe.clone(e,i);let o=t*4;return i[o]=n.x,i[o+1]=n.y,i[o+2]=n.z,i[o+3]=n.w,i};oe.getRow=function(e,t,n){let i=e[t],o=e[t+4],r=e[t+8],a=e[t+12];return n.x=i,n.y=o,n.z=r,n.w=a,n};oe.setRow=function(e,t,n,i){return i=oe.clone(e,i),i[t]=n.x,i[t+4]=n.y,i[t+8]=n.z,i[t+12]=n.w,i};oe.setTranslation=function(e,t,n){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=e[15],n};var WA=new h;oe.setScale=function(e,t,n){let i=oe.getScale(e,WA),o=t.x/i.x,r=t.y/i.y,a=t.z/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3],n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7],n[8]=e[8]*a,n[9]=e[9]*a,n[10]=e[10]*a,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};var KA=new h;oe.setUniformScale=function(e,t,n){let i=oe.getScale(e,KA),o=t/i.x,r=t/i.y,a=t/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3],n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7],n[8]=e[8]*a,n[9]=e[9]*a,n[10]=e[10]*a,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};var Hp=new h;oe.getScale=function(e,t){return t.x=h.magnitude(h.fromElements(e[0],e[1],e[2],Hp)),t.y=h.magnitude(h.fromElements(e[4],e[5],e[6],Hp)),t.z=h.magnitude(h.fromElements(e[8],e[9],e[10],Hp)),t};var k_=new h;oe.getMaximumScale=function(e){return oe.getScale(e,k_),h.maximumComponent(k_)};var YA=new h;oe.setRotation=function(e,t,n){let i=oe.getScale(e,YA);return n[0]=t[0]*i.x,n[1]=t[1]*i.x,n[2]=t[2]*i.x,n[3]=e[3],n[4]=t[3]*i.y,n[5]=t[4]*i.y,n[6]=t[5]*i.y,n[7]=e[7],n[8]=t[6]*i.z,n[9]=t[7]*i.z,n[10]=t[8]*i.z,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};var ZA=new h;oe.getRotation=function(e,t){let n=oe.getScale(e,ZA);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.x,t[3]=e[4]/n.y,t[4]=e[5]/n.y,t[5]=e[6]/n.y,t[6]=e[8]/n.z,t[7]=e[9]/n.z,t[8]=e[10]/n.z,t};oe.multiply=function(e,t,n){let i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],u=e[5],l=e[6],d=e[7],f=e[8],g=e[9],b=e[10],x=e[11],T=e[12],R=e[13],D=e[14],M=e[15],N=t[0],V=t[1],q=t[2],_=t[3],ee=t[4],Z=t[5],J=t[6],H=t[7],te=t[8],y=t[9],w=t[10],P=t[11],B=t[12],Y=t[13],K=t[14],U=t[15],re=i*N+s*V+f*q+T*_,ye=o*N+u*V+g*q+R*_,Oe=r*N+l*V+b*q+D*_,Fe=a*N+d*V+x*q+M*_,Je=i*ee+s*Z+f*J+T*H,He=o*ee+u*Z+g*J+R*H,Ye=r*ee+l*Z+b*J+D*H,at=a*ee+d*Z+x*J+M*H,ht=i*te+s*y+f*w+T*P,qe=o*te+u*y+g*w+R*P,ot=r*te+l*y+b*w+D*P,Xe=a*te+d*y+x*w+M*P,Nt=i*B+s*Y+f*K+T*U,Zt=o*B+u*Y+g*K+R*U,yn=r*B+l*Y+b*K+D*U,li=a*B+d*Y+x*K+M*U;return n[0]=re,n[1]=ye,n[2]=Oe,n[3]=Fe,n[4]=Je,n[5]=He,n[6]=Ye,n[7]=at,n[8]=ht,n[9]=qe,n[10]=ot,n[11]=Xe,n[12]=Nt,n[13]=Zt,n[14]=yn,n[15]=li,n};oe.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n};oe.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n};oe.multiplyTransformation=function(e,t,n){let i=e[0],o=e[1],r=e[2],a=e[4],s=e[5],u=e[6],l=e[8],d=e[9],f=e[10],g=e[12],b=e[13],x=e[14],T=t[0],R=t[1],D=t[2],M=t[4],N=t[5],V=t[6],q=t[8],_=t[9],ee=t[10],Z=t[12],J=t[13],H=t[14],te=i*T+a*R+l*D,y=o*T+s*R+d*D,w=r*T+u*R+f*D,P=i*M+a*N+l*V,B=o*M+s*N+d*V,Y=r*M+u*N+f*V,K=i*q+a*_+l*ee,U=o*q+s*_+d*ee,re=r*q+u*_+f*ee,ye=i*Z+a*J+l*H+g,Oe=o*Z+s*J+d*H+b,Fe=r*Z+u*J+f*H+x;return n[0]=te,n[1]=y,n[2]=w,n[3]=0,n[4]=P,n[5]=B,n[6]=Y,n[7]=0,n[8]=K,n[9]=U,n[10]=re,n[11]=0,n[12]=ye,n[13]=Oe,n[14]=Fe,n[15]=1,n};oe.multiplyByMatrix3=function(e,t,n){let i=e[0],o=e[1],r=e[2],a=e[4],s=e[5],u=e[6],l=e[8],d=e[9],f=e[10],g=t[0],b=t[1],x=t[2],T=t[3],R=t[4],D=t[5],M=t[6],N=t[7],V=t[8],q=i*g+a*b+l*x,_=o*g+s*b+d*x,ee=r*g+u*b+f*x,Z=i*T+a*R+l*D,J=o*T+s*R+d*D,H=r*T+u*R+f*D,te=i*M+a*N+l*V,y=o*M+s*N+d*V,w=r*M+u*N+f*V;return n[0]=q,n[1]=_,n[2]=ee,n[3]=0,n[4]=Z,n[5]=J,n[6]=H,n[7]=0,n[8]=te,n[9]=y,n[10]=w,n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};oe.multiplyByTranslation=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=i*e[0]+o*e[4]+r*e[8]+e[12],s=i*e[1]+o*e[5]+r*e[9]+e[13],u=i*e[2]+o*e[6]+r*e[10]+e[14];return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=a,n[13]=s,n[14]=u,n[15]=e[15],n};oe.multiplyByScale=function(e,t,n){let i=t.x,o=t.y,r=t.z;return i===1&&o===1&&r===1?oe.clone(e,n):(n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=e[3],n[4]=o*e[4],n[5]=o*e[5],n[6]=o*e[6],n[7]=e[7],n[8]=r*e[8],n[9]=r*e[9],n[10]=r*e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n)};oe.multiplyByUniformScale=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3],n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7],n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};oe.multiplyByVector=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=t.w,s=e[0]*i+e[4]*o+e[8]*r+e[12]*a,u=e[1]*i+e[5]*o+e[9]*r+e[13]*a,l=e[2]*i+e[6]*o+e[10]*r+e[14]*a,d=e[3]*i+e[7]*o+e[11]*r+e[15]*a;return n.x=s,n.y=u,n.z=l,n.w=d,n};oe.multiplyByPointAsVector=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=e[0]*i+e[4]*o+e[8]*r,s=e[1]*i+e[5]*o+e[9]*r,u=e[2]*i+e[6]*o+e[10]*r;return n.x=a,n.y=s,n.z=u,n};oe.multiplyByPoint=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=e[0]*i+e[4]*o+e[8]*r+e[12],s=e[1]*i+e[5]*o+e[9]*r+e[13],u=e[2]*i+e[6]*o+e[10]*r+e[14];return n.x=a,n.y=s,n.z=u,n};oe.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n};oe.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t};oe.transpose=function(e,t){let n=e[1],i=e[2],o=e[3],r=e[6],a=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=r,t[10]=e[10],t[11]=e[14],t[12]=o,t[13]=a,t[14]=s,t[15]=e[15],t};oe.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t};oe.equals=function(e,t){return e===t||m(e)&&m(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]};oe.equalsEpsilon=function(e,t,n){return n=C(n,0),e===t||m(e)&&m(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n&&Math.abs(e[9]-t[9])<=n&&Math.abs(e[10]-t[10])<=n&&Math.abs(e[11]-t[11])<=n&&Math.abs(e[12]-t[12])<=n&&Math.abs(e[13]-t[13])<=n&&Math.abs(e[14]-t[14])<=n&&Math.abs(e[15]-t[15])<=n};oe.getTranslation=function(e,t){return t.x=e[12],t.y=e[13],t.z=e[14],t};oe.getMatrix3=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var JA=new _e,XA=new _e,$A=new De,QA=new De(0,0,0,1);oe.inverse=function(e,t){let n=e[0],i=e[4],o=e[8],r=e[12],a=e[1],s=e[5],u=e[9],l=e[13],d=e[2],f=e[6],g=e[10],b=e[14],x=e[3],T=e[7],R=e[11],D=e[15],M=g*D,N=b*R,V=f*D,q=b*T,_=f*R,ee=g*T,Z=d*D,J=b*x,H=d*R,te=g*x,y=d*T,w=f*x,P=M*s+q*u+_*l-(N*s+V*u+ee*l),B=N*a+Z*u+te*l-(M*a+J*u+H*l),Y=V*a+J*s+y*l-(q*a+Z*s+w*l),K=ee*a+H*s+w*u-(_*a+te*s+y*u),U=N*i+V*o+ee*r-(M*i+q*o+_*r),re=M*n+J*o+H*r-(N*n+Z*o+te*r),ye=q*n+Z*i+w*r-(V*n+J*i+y*r),Oe=_*n+te*i+y*o-(ee*n+H*i+w*o);M=o*l,N=r*u,V=i*l,q=r*s,_=i*u,ee=o*s,Z=n*l,J=r*a,H=n*u,te=o*a,y=n*s,w=i*a;let Fe=M*T+q*R+_*D-(N*T+V*R+ee*D),Je=N*x+Z*R+te*D-(M*x+J*R+H*D),He=V*x+J*T+y*D-(q*x+Z*T+w*D),Ye=ee*x+H*T+w*R-(_*x+te*T+y*R),at=V*g+ee*b+N*f-(_*b+M*f+q*g),ht=H*b+M*d+J*g-(Z*g+te*b+N*d),qe=Z*f+w*b+q*d-(y*b+V*d+J*f),ot=y*g+_*d+te*f-(H*f+w*g+ee*d),Xe=n*P+i*B+o*Y+r*K;if(Math.abs(Xe)<j.EPSILON21){if(_e.equalsEpsilon(oe.getMatrix3(e,JA),XA,j.EPSILON7)&&De.equals(oe.getRow(e,3,$A),QA))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new It("matrix is not invertible because its determinate is zero.")}return Xe=1/Xe,t[0]=P*Xe,t[1]=B*Xe,t[2]=Y*Xe,t[3]=K*Xe,t[4]=U*Xe,t[5]=re*Xe,t[6]=ye*Xe,t[7]=Oe*Xe,t[8]=Fe*Xe,t[9]=Je*Xe,t[10]=He*Xe,t[11]=Ye*Xe,t[12]=at*Xe,t[13]=ht*Xe,t[14]=qe*Xe,t[15]=ot*Xe,t};oe.inverseTransformation=function(e,t){let n=e[0],i=e[1],o=e[2],r=e[4],a=e[5],s=e[6],u=e[8],l=e[9],d=e[10],f=e[12],g=e[13],b=e[14],x=-n*f-i*g-o*b,T=-r*f-a*g-s*b,R=-u*f-l*g-d*b;return t[0]=n,t[1]=r,t[2]=u,t[3]=0,t[4]=i,t[5]=a,t[6]=l,t[7]=0,t[8]=o,t[9]=s,t[10]=d,t[11]=0,t[12]=x,t[13]=T,t[14]=R,t[15]=1,t};var eR=new oe;oe.inverseTranspose=function(e,t){return oe.inverse(oe.transpose(e,eR),t)};oe.IDENTITY=Object.freeze(new oe(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));oe.ZERO=Object.freeze(new oe(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0));oe.COLUMN0ROW0=0;oe.COLUMN0ROW1=1;oe.COLUMN0ROW2=2;oe.COLUMN0ROW3=3;oe.COLUMN1ROW0=4;oe.COLUMN1ROW1=5;oe.COLUMN1ROW2=6;oe.COLUMN1ROW3=7;oe.COLUMN2ROW0=8;oe.COLUMN2ROW1=9;oe.COLUMN2ROW2=10;oe.COLUMN2ROW3=11;oe.COLUMN3ROW0=12;oe.COLUMN3ROW1=13;oe.COLUMN3ROW2=14;oe.COLUMN3ROW3=15;Object.defineProperties(oe.prototype,{length:{get:function(){return oe.packedLength}}});oe.prototype.clone=function(e){return oe.clone(this,e)};oe.prototype.equals=function(e){return oe.equals(this,e)};oe.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]&&e[9]===t[n+9]&&e[10]===t[n+10]&&e[11]===t[n+11]&&e[12]===t[n+12]&&e[13]===t[n+13]&&e[14]===t[n+14]&&e[15]===t[n+15]};oe.prototype.equalsEpsilon=function(e,t){return oe.equalsEpsilon(this,e,t)};oe.prototype.toString=function(){return`(${this[0]}, ${this[4]}, ${this[8]}, ${this[12]})
(${this[1]}, ${this[5]}, ${this[9]}, ${this[13]})
(${this[2]}, ${this[6]}, ${this[10]}, ${this[14]})
(${this[3]}, ${this[7]}, ${this[11]}, ${this[15]})`};var fe=oe;function tR(e){e=C(e,C.EMPTY_OBJECT),this.geometry=e.geometry,this.modelMatrix=fe.clone(C(e.modelMatrix,fe.IDENTITY)),this.id=e.id,this.pickPrimitive=e.pickPrimitive,this.attributes=C(e.attributes,{}),this.westHemisphereGeometry=void 0,this.eastHemisphereGeometry=void 0}var dr=tR;function Ht(e){e=C(e,C.EMPTY_OBJECT),this.position=C(e.position,!1),this.normal=C(e.normal,!1),this.st=C(e.st,!1),this.bitangent=C(e.bitangent,!1),this.tangent=C(e.tangent,!1),this.color=C(e.color,!1)}Ht.POSITION_ONLY=Object.freeze(new Ht({position:!0}));Ht.POSITION_AND_NORMAL=Object.freeze(new Ht({position:!0,normal:!0}));Ht.POSITION_NORMAL_AND_ST=Object.freeze(new Ht({position:!0,normal:!0,st:!0}));Ht.POSITION_AND_ST=Object.freeze(new Ht({position:!0,st:!0}));Ht.POSITION_AND_COLOR=Object.freeze(new Ht({position:!0,color:!0}));Ht.ALL=Object.freeze(new Ht({position:!0,normal:!0,st:!0,tangent:!0,bitangent:!0}));Ht.DEFAULT=Ht.POSITION_NORMAL_AND_ST;Ht.packedLength=6;Ht.pack=function(e,t,n){return n=C(n,0),t[n++]=e.position?1:0,t[n++]=e.normal?1:0,t[n++]=e.st?1:0,t[n++]=e.tangent?1:0,t[n++]=e.bitangent?1:0,t[n]=e.color?1:0,t};Ht.unpack=function(e,t,n){return t=C(t,0),m(n)||(n=new Ht),n.position=e[t++]===1,n.normal=e[t++]===1,n.st=e[t++]===1,n.tangent=e[t++]===1,n.bitangent=e[t++]===1,n.color=e[t]===1,n};Ht.clone=function(e,t){if(m(e))return m(t)||(t=new Ht),t.position=e.position,t.normal=e.normal,t.st=e.st,t.tangent=e.tangent,t.bitangent=e.bitangent,t.color=e.color,t};var Tn=Ht;var V_=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec4 v_color;
in vec4 ev_pickColor;

void main()
{
    vec3 positionToEyeEC = -v_positionEC;

    vec3 normalEC = normalize(v_normalEC);
#ifdef FACE_FORWARD
    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
#endif

    vec4 color = czm_gammaCorrect(v_color);

    czm_materialInput materialInput;
    materialInput.normalEC = normalEC;
    materialInput.positionToEyeEC = positionToEyeEC;
    czm_material material = czm_getDefaultMaterial(materialInput);
    material.diffuse = color.rgb;
    material.alpha = color.a;

    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
    out_FragColor.rgb*=ev_pickColor.rgb;
}
`;var j_=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec4 color;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;
out vec4 v_color;

void main()
{
    vec4 p = czm_computePosition();

    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
    v_normalEC = czm_normal * normal;                         // normal in eye coordinates
    v_color = color;

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;var G_=`in vec4 v_color;
in vec4 ev_pickColor;

void main()
{
    out_FragColor = czm_gammaCorrect(v_color);
    out_FragColor.rgb*=ev_pickColor.rgb;
}
`;var H_=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec4 color;
in float batchId;

out vec4 v_color;

void main()
{
    vec4 p = czm_computePosition();

    v_color = color;

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;function q_(e,t){if(e===null||typeof e!="object")return e;t=C(t,!1);let n=new e.constructor;for(let i in e)if(e.hasOwnProperty(i)){let o=e[i];t&&(o=q_(o,t)),n[i]=o}return n}var ri=q_;function W_(e,t,n){n=C(n,!1);let i={},o=m(e),r=m(t),a,s,u;if(o)for(a in e)e.hasOwnProperty(a)&&(s=e[a],r&&n&&typeof s=="object"&&t.hasOwnProperty(a)?(u=t[a],typeof u=="object"?i[a]=W_(s,u,n):i[a]=s):i[a]=s);if(r)for(a in t)t.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(u=t[a],i[a]=u);return i}var Vn=W_;var nR={ADD:z.FUNC_ADD,SUBTRACT:z.FUNC_SUBTRACT,REVERSE_SUBTRACT:z.FUNC_REVERSE_SUBTRACT,MIN:z.MIN,MAX:z.MAX},fr=Object.freeze(nR);var iR={ZERO:z.ZERO,ONE:z.ONE,SOURCE_COLOR:z.SRC_COLOR,ONE_MINUS_SOURCE_COLOR:z.ONE_MINUS_SRC_COLOR,DESTINATION_COLOR:z.DST_COLOR,ONE_MINUS_DESTINATION_COLOR:z.ONE_MINUS_DST_COLOR,SOURCE_ALPHA:z.SRC_ALPHA,ONE_MINUS_SOURCE_ALPHA:z.ONE_MINUS_SRC_ALPHA,DESTINATION_ALPHA:z.DST_ALPHA,ONE_MINUS_DESTINATION_ALPHA:z.ONE_MINUS_DST_ALPHA,CONSTANT_COLOR:z.CONSTANT_COLOR,ONE_MINUS_CONSTANT_COLOR:z.ONE_MINUS_CONSTANT_COLOR,CONSTANT_ALPHA:z.CONSTANT_ALPHA,ONE_MINUS_CONSTANT_ALPHA:z.ONE_MINUS_CONSTANT_ALPHA,SOURCE_ALPHA_SATURATE:z.SRC_ALPHA_SATURATE},Zn=Object.freeze(iR);var oR={DISABLED:Object.freeze({enabled:!1}),ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:fr.ADD,equationAlpha:fr.ADD,functionSourceRgb:Zn.SOURCE_ALPHA,functionSourceAlpha:Zn.ONE,functionDestinationRgb:Zn.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:Zn.ONE_MINUS_SOURCE_ALPHA}),PRE_MULTIPLIED_ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:fr.ADD,equationAlpha:fr.ADD,functionSourceRgb:Zn.ONE,functionSourceAlpha:Zn.ONE,functionDestinationRgb:Zn.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:Zn.ONE_MINUS_SOURCE_ALPHA}),ADDITIVE_BLEND:Object.freeze({enabled:!0,equationRgb:fr.ADD,equationAlpha:fr.ADD,functionSourceRgb:Zn.SOURCE_ALPHA,functionSourceAlpha:Zn.ONE,functionDestinationRgb:Zn.ONE,functionDestinationAlpha:Zn.ONE})},qp=Object.freeze(oR);var rR={FRONT:z.FRONT,BACK:z.BACK,FRONT_AND_BACK:z.FRONT_AND_BACK},mr=Object.freeze(rR);function pa(e){e=C(e,C.EMPTY_OBJECT),this.material=e.material,this.translucent=C(e.translucent,!0),this._vertexShaderSource=e.vertexShaderSource,this._fragmentShaderSource=e.fragmentShaderSource,this._renderState=e.renderState,this._closed=C(e.closed,!1)}Object.defineProperties(pa.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}}});pa.prototype.getFragmentShaderSource=function(){let e=[];return this.flat&&e.push("#define FLAT"),this.faceForward&&e.push("#define FACE_FORWARD"),m(this.material)&&e.push(this.material.shaderSource),e.push(this.fragmentShaderSource),e.join(`
`)};pa.prototype.isTranslucent=function(){return m(this.material)&&this.material.isTranslucent()||!m(this.material)&&this.translucent};pa.prototype.getRenderState=function(){let e=this.isTranslucent(),t=ri(this.renderState,!1);return e?(t.depthMask=!1,t.blending=qp.ALPHA_BLEND):t.depthMask=!0,t};pa.getDefaultRenderState=function(e,t,n){let i={depthTest:{enabled:!0}};return e&&(i.depthMask=!1,i.blending=qp.ALPHA_BLEND),t&&(i.cull={enabled:!0,face:mr.BACK}),m(n)&&(i=Vn(n,i,!0)),i};var hs=pa;function ao(e){e=C(e,C.EMPTY_OBJECT);let t=C(e.translucent,!0),n=C(e.closed,!1),i=C(e.flat,!1),o=i?H_:j_,r=i?G_:V_,a=i?ao.FLAT_VERTEX_FORMAT:ao.VERTEX_FORMAT;this.material=void 0,this.translucent=t,this._vertexShaderSource=C(e.vertexShaderSource,o),this._fragmentShaderSource=C(e.fragmentShaderSource,r),this._renderState=hs.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=a,this._flat=i,this._faceForward=C(e.faceForward,!n)}Object.defineProperties(ao.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}});ao.VERTEX_FORMAT=Tn.POSITION_AND_NORMAL;ao.FLAT_VERTEX_FORMAT=Tn.POSITION_ONLY;ao.prototype.getFragmentShaderSource=hs.prototype.getFragmentShaderSource;ao.prototype.isTranslucent=hs.prototype.isTranslucent;ao.prototype.getRenderState=hs.prototype.getRenderState;var K_=ao;var aR=new h,sR=new h;function cR(e,t,n,i,o){let r=e.x,a=e.y,s=e.z,u=t.x,l=t.y,d=t.z,f=r*r*u*u,g=a*a*l*l,b=s*s*d*d,x=f+g+b,T=Math.sqrt(1/x),R=h.multiplyByScalar(e,T,aR);if(x<i)return isFinite(T)?h.clone(R,o):void 0;let D=n.x,M=n.y,N=n.z,V=sR;V.x=R.x*D*2,V.y=R.y*M*2,V.z=R.z*N*2;let q=(1-T)*h.magnitude(e)/(.5*h.magnitude(V)),_=0,ee,Z,J,H,te,y,w,P,B,Y,K;do{q-=_,J=1/(1+q*D),H=1/(1+q*M),te=1/(1+q*N),y=J*J,w=H*H,P=te*te,B=y*J,Y=w*H,K=P*te,ee=f*y+g*w+b*P-1,Z=f*B*D+g*Y*M+b*K*N;let U=-2*Z;_=ee/U}while(Math.abs(ee)>j.EPSILON12);return m(o)?(o.x=r*J,o.y=a*H,o.z=s*te,o):new h(r*J,a*H,s*te)}var Wc=cR;function Ut(e,t,n){this.longitude=C(e,0),this.latitude=C(t,0),this.height=C(n,0)}Ut.fromRadians=function(e,t,n,i){return n=C(n,0),m(i)?(i.longitude=e,i.latitude=t,i.height=n,i):new Ut(e,t,n)};Ut.fromDegrees=function(e,t,n,i){return e=j.toRadians(e),t=j.toRadians(t),Ut.fromRadians(e,t,n,i)};var uR=new h,lR=new h,pR=new h;Ut.wgs84OneOverRadii=new h(1/6378137,1/6378137,1/6356752314245179e-9);Ut.wgs84OneOverRadiiSquared=new h(1/(6378137*6378137),1/(6378137*6378137),1/(6356752314245179e-9*6356752314245179e-9));var dR=j.EPSILON1;Ut.fromCartesian=function(e,t,n){let i=m(t)?t.oneOverRadii:this.wgs84OneOverRadii,o=m(t)?t.oneOverRadiiSquared:this.wgs84OneOverRadiiSquared,r=m(t)?t._centerToleranceSquared:dR,a=Wc(e,i,o,r,lR);if(!m(a))return;let s=h.multiplyComponents(a,o,uR);s=h.normalize(s,s);let u=h.subtract(e,a,pR),l=Math.atan2(s.y,s.x),d=Math.asin(s.z),f=j.sign(h.dot(u,e))*h.magnitude(u);return m(n)?(n.longitude=l,n.latitude=d,n.height=f,n):new Ut(l,d,f)};Ut.toCartesian=function(e,t,n){return h.fromRadians(e.longitude,e.latitude,e.height,t,n)};Ut.clone=function(e,t){if(m(e))return m(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new Ut(e.longitude,e.latitude,e.height)};Ut.equals=function(e,t){return e===t||m(e)&&m(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height};Ut.equalsEpsilon=function(e,t,n){return n=C(n,0),e===t||m(e)&&m(t)&&Math.abs(e.longitude-t.longitude)<=n&&Math.abs(e.latitude-t.latitude)<=n&&Math.abs(e.height-t.height)<=n};Ut.ZERO=Object.freeze(new Ut(0,0,0));Ut.prototype.clone=function(e){return Ut.clone(this,e)};Ut.prototype.equals=function(e){return Ut.equals(this,e)};Ut.prototype.equalsEpsilon=function(e,t){return Ut.equalsEpsilon(this,e,t)};Ut.prototype.toString=function(){return`(${this.longitude}, ${this.latitude}, ${this.height})`};var rt=Ut;function Z_(e,t,n,i){t=C(t,0),n=C(n,0),i=C(i,0),e._radii=new h(t,n,i),e._radiiSquared=new h(t*t,n*n,i*i),e._radiiToTheFourth=new h(t*t*t*t,n*n*n*n,i*i*i*i),e._oneOverRadii=new h(t===0?0:1/t,n===0?0:1/n,i===0?0:1/i),e._oneOverRadiiSquared=new h(t===0?0:1/(t*t),n===0?0:1/(n*n),i===0?0:1/(i*i)),e._minimumRadius=Math.min(t,n,i),e._maximumRadius=Math.max(t,n,i),e._centerToleranceSquared=j.EPSILON1,e._radiiSquared.z!==0&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function pt(e,t,n){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,Z_(this,e,t,n)}Object.defineProperties(pt.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}});pt.clone=function(e,t){if(!m(e))return;let n=e._radii;return m(t)?(h.clone(n,t._radii),h.clone(e._radiiSquared,t._radiiSquared),h.clone(e._radiiToTheFourth,t._radiiToTheFourth),h.clone(e._oneOverRadii,t._oneOverRadii),h.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new pt(n.x,n.y,n.z)};pt.fromCartesian3=function(e,t){return m(t)||(t=new pt),m(e)&&Z_(t,e.x,e.y,e.z),t};pt.WGS84=Object.freeze(new pt(6378137,6378137,6356752314140356e-9));pt.UNIT_SPHERE=Object.freeze(new pt(1,1,1));pt.MOON=Object.freeze(new pt(j.LUNAR_RADIUS,j.LUNAR_RADIUS,j.LUNAR_RADIUS));pt.prototype.clone=function(e){return pt.clone(this,e)};pt.packedLength=h.packedLength;pt.pack=function(e,t,n){return n=C(n,0),h.pack(e._radii,t,n),t};pt.unpack=function(e,t,n){t=C(t,0);let i=h.unpack(e,t);return pt.fromCartesian3(i,n)};pt.prototype.geocentricSurfaceNormal=h.normalize;pt.prototype.geodeticSurfaceNormalCartographic=function(e,t){let n=e.longitude,i=e.latitude,o=Math.cos(i),r=o*Math.cos(n),a=o*Math.sin(n),s=Math.sin(i);return m(t)||(t=new h),t.x=r,t.y=a,t.z=s,h.normalize(t,t)};pt.prototype.geodeticSurfaceNormal=function(e,t){if(!h.equalsEpsilon(e,h.ZERO,j.EPSILON14))return m(t)||(t=new h),t=h.multiplyComponents(e,this._oneOverRadiiSquared,t),h.normalize(t,t)};var fR=new h,mR=new h;pt.prototype.cartographicToCartesian=function(e,t){let n=fR,i=mR;this.geodeticSurfaceNormalCartographic(e,n),h.multiplyComponents(this._radiiSquared,n,i);let o=Math.sqrt(h.dot(n,i));return h.divideByScalar(i,o,i),h.multiplyByScalar(n,e.height,n),m(t)||(t=new h),h.add(i,n,t)};pt.prototype.cartographicArrayToCartesianArray=function(e,t){let n=e.length;m(t)?t.length=n:t=new Array(n);for(let i=0;i<n;i++)t[i]=this.cartographicToCartesian(e[i],t[i]);return t};var hR=new h,gR=new h,_R=new h;pt.prototype.cartesianToCartographic=function(e,t){let n=this.scaleToGeodeticSurface(e,gR);if(!m(n))return;let i=this.geodeticSurfaceNormal(n,hR),o=h.subtract(e,n,_R),r=Math.atan2(i.y,i.x),a=Math.asin(i.z),s=j.sign(h.dot(o,e))*h.magnitude(o);return m(t)?(t.longitude=r,t.latitude=a,t.height=s,t):new rt(r,a,s)};pt.prototype.cartesianArrayToCartographicArray=function(e,t){let n=e.length;m(t)?t.length=n:t=new Array(n);for(let i=0;i<n;++i)t[i]=this.cartesianToCartographic(e[i],t[i]);return t};pt.prototype.scaleToGeodeticSurface=function(e,t){return Wc(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)};pt.prototype.scaleToGeocentricSurface=function(e,t){m(t)||(t=new h);let n=e.x,i=e.y,o=e.z,r=this._oneOverRadiiSquared,a=1/Math.sqrt(n*n*r.x+i*i*r.y+o*o*r.z);return h.multiplyByScalar(e,a,t)};pt.prototype.transformPositionToScaledSpace=function(e,t){return m(t)||(t=new h),h.multiplyComponents(e,this._oneOverRadii,t)};pt.prototype.transformPositionFromScaledSpace=function(e,t){return m(t)||(t=new h),h.multiplyComponents(e,this._radii,t)};pt.prototype.equals=function(e){return this===e||m(e)&&h.equals(this._radii,e._radii)};pt.prototype.toString=function(){return this._radii.toString()};pt.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,n){t=C(t,0);let i=this._squaredXOverSquaredZ;if(m(n)||(n=new h),n.x=0,n.y=0,n.z=e.z*(1-i),!(Math.abs(n.z)>=this._radii.z-t))return n};var yR=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],vR=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function Y_(e,t,n){let i=.5*(t+e),o=.5*(t-e),r=0;for(let a=0;a<5;a++){let s=o*yR[a];r+=vR[a]*(n(i+s)+n(i-s))}return r*=o,r}pt.prototype.surfaceArea=function(e){let t=e.west,n=e.east,i=e.south,o=e.north;for(;n<t;)n+=j.TWO_PI;let r=this._radiiSquared,a=r.x,s=r.y,u=r.z,l=a*s;return Y_(i,o,function(d){let f=Math.cos(d),g=Math.sin(d);return Math.cos(d)*Y_(t,n,function(b){let x=Math.cos(b),T=Math.sin(b);return Math.sqrt(l*g*g+u*(s*x*x+a*T*T)*f*f)})})};var Dn=pt;function Kc(e){this._ellipsoid=C(e,Dn.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(Kc.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});Kc.prototype.project=function(e,t){let n=this._semimajorAxis,i=e.longitude*n,o=e.latitude*n,r=e.height;return m(t)?(t.x=i,t.y=o,t.z=r,t):new h(i,o,r)};Kc.prototype.unproject=function(e,t){let n=this._oneOverSemimajorAxis,i=e.x*n,o=e.y*n,r=e.z;return m(t)?(t.longitude=i,t.latitude=o,t.height=r,t):new rt(i,o,r)};var Bi=Kc;var bR={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},vi=Object.freeze(bR);function xR(e,t){this.start=C(e,0),this.stop=C(t,0)}var zo=xR;function je(e,t,n,i){this.west=C(e,0),this.south=C(t,0),this.east=C(n,0),this.north=C(i,0)}Object.defineProperties(je.prototype,{width:{get:function(){return je.computeWidth(this)}},height:{get:function(){return je.computeHeight(this)}}});je.packedLength=4;je.pack=function(e,t,n){return n=C(n,0),t[n++]=e.west,t[n++]=e.south,t[n++]=e.east,t[n]=e.north,t};je.unpack=function(e,t,n){return t=C(t,0),m(n)||(n=new je),n.west=e[t++],n.south=e[t++],n.east=e[t++],n.north=e[t],n};je.computeWidth=function(e){let t=e.east,n=e.west;return t<n&&(t+=j.TWO_PI),t-n};je.computeHeight=function(e){return e.north-e.south};je.fromDegrees=function(e,t,n,i,o){return e=j.toRadians(C(e,0)),t=j.toRadians(C(t,0)),n=j.toRadians(C(n,0)),i=j.toRadians(C(i,0)),m(o)?(o.west=e,o.south=t,o.east=n,o.north=i,o):new je(e,t,n,i)};je.fromRadians=function(e,t,n,i,o){return m(o)?(o.west=C(e,0),o.south=C(t,0),o.east=C(n,0),o.north=C(i,0),o):new je(e,t,n,i)};je.fromCartographicArray=function(e,t){let n=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,r=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE;for(let u=0,l=e.length;u<l;u++){let d=e[u];n=Math.min(n,d.longitude),i=Math.max(i,d.longitude),a=Math.min(a,d.latitude),s=Math.max(s,d.latitude);let f=d.longitude>=0?d.longitude:d.longitude+j.TWO_PI;o=Math.min(o,f),r=Math.max(r,f)}return i-n>r-o&&(n=o,i=r,i>j.PI&&(i=i-j.TWO_PI),n>j.PI&&(n=n-j.TWO_PI)),m(t)?(t.west=n,t.south=a,t.east=i,t.north=s,t):new je(n,a,i,s)};je.fromCartesianArray=function(e,t,n){t=C(t,Dn.WGS84);let i=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=Number.MAX_VALUE,u=-Number.MAX_VALUE;for(let l=0,d=e.length;l<d;l++){let f=t.cartesianToCartographic(e[l]);i=Math.min(i,f.longitude),o=Math.max(o,f.longitude),s=Math.min(s,f.latitude),u=Math.max(u,f.latitude);let g=f.longitude>=0?f.longitude:f.longitude+j.TWO_PI;r=Math.min(r,g),a=Math.max(a,g)}return o-i>a-r&&(i=r,o=a,o>j.PI&&(o=o-j.TWO_PI),i>j.PI&&(i=i-j.TWO_PI)),m(n)?(n.west=i,n.south=s,n.east=o,n.north=u,n):new je(i,s,o,u)};je.clone=function(e,t){if(m(e))return m(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t):new je(e.west,e.south,e.east,e.north)};je.equalsEpsilon=function(e,t,n){return n=C(n,0),e===t||m(e)&&m(t)&&Math.abs(e.west-t.west)<=n&&Math.abs(e.south-t.south)<=n&&Math.abs(e.east-t.east)<=n&&Math.abs(e.north-t.north)<=n};je.prototype.clone=function(e){return je.clone(this,e)};je.prototype.equals=function(e){return je.equals(this,e)};je.equals=function(e,t){return e===t||m(e)&&m(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north};je.prototype.equalsEpsilon=function(e,t){return je.equalsEpsilon(this,e,t)};je.validate=function(e){};je.southwest=function(e,t){return m(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new rt(e.west,e.south)};je.northwest=function(e,t){return m(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new rt(e.west,e.north)};je.northeast=function(e,t){return m(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new rt(e.east,e.north)};je.southeast=function(e,t){return m(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new rt(e.east,e.south)};je.center=function(e,t){let n=e.east,i=e.west;n<i&&(n+=j.TWO_PI);let o=j.negativePiToPi((i+n)*.5),r=(e.south+e.north)*.5;return m(t)?(t.longitude=o,t.latitude=r,t.height=0,t):new rt(o,r)};je.intersection=function(e,t,n){let i=e.east,o=e.west,r=t.east,a=t.west;i<o&&r>0?i+=j.TWO_PI:r<a&&i>0&&(r+=j.TWO_PI),i<o&&a<0?a+=j.TWO_PI:r<a&&o<0&&(o+=j.TWO_PI);let s=j.negativePiToPi(Math.max(o,a)),u=j.negativePiToPi(Math.min(i,r));if((e.west<e.east||t.west<t.east)&&u<=s)return;let l=Math.max(e.south,t.south),d=Math.min(e.north,t.north);if(!(l>=d))return m(n)?(n.west=s,n.south=l,n.east=u,n.north=d,n):new je(s,l,u,d)};je.simpleIntersection=function(e,t,n){let i=Math.max(e.west,t.west),o=Math.max(e.south,t.south),r=Math.min(e.east,t.east),a=Math.min(e.north,t.north);if(!(o>=a||i>=r))return m(n)?(n.west=i,n.south=o,n.east=r,n.north=a,n):new je(i,o,r,a)};je.union=function(e,t,n){m(n)||(n=new je);let i=e.east,o=e.west,r=t.east,a=t.west;i<o&&r>0?i+=j.TWO_PI:r<a&&i>0&&(r+=j.TWO_PI),i<o&&a<0?a+=j.TWO_PI:r<a&&o<0&&(o+=j.TWO_PI);let s=j.negativePiToPi(Math.min(o,a)),u=j.negativePiToPi(Math.max(i,r));return n.west=s,n.south=Math.min(e.south,t.south),n.east=u,n.north=Math.max(e.north,t.north),n};je.expand=function(e,t,n){return m(n)||(n=new je),n.west=Math.min(e.west,t.longitude),n.south=Math.min(e.south,t.latitude),n.east=Math.max(e.east,t.longitude),n.north=Math.max(e.north,t.latitude),n};je.contains=function(e,t){let n=t.longitude,i=t.latitude,o=e.west,r=e.east;return r<o&&(r+=j.TWO_PI,n<0&&(n+=j.TWO_PI)),(n>o||j.equalsEpsilon(n,o,j.EPSILON14))&&(n<r||j.equalsEpsilon(n,r,j.EPSILON14))&&i>=e.south&&i<=e.north};var ER=new rt;je.subsample=function(e,t,n,i){t=C(t,Dn.WGS84),n=C(n,0),m(i)||(i=[]);let o=0,r=e.north,a=e.south,s=e.east,u=e.west,l=ER;l.height=n,l.longitude=u,l.latitude=r,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.longitude=s,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.latitude=a,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.longitude=u,i[o]=t.cartographicToCartesian(l,i[o]),o++,r<0?l.latitude=r:a>0?l.latitude=a:l.latitude=0;for(let d=1;d<8;++d)l.longitude=-Math.PI+d*j.PI_OVER_TWO,je.contains(e,l)&&(i[o]=t.cartographicToCartesian(l,i[o]),o++);return l.latitude===0&&(l.longitude=u,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.longitude=s,i[o]=t.cartographicToCartesian(l,i[o]),o++),i.length=o,i};je.subsection=function(e,t,n,i,o,r){if(m(r)||(r=new je),e.west<=e.east){let s=e.east-e.west;r.west=e.west+t*s,r.east=e.west+i*s}else{let s=j.TWO_PI+e.east-e.west;r.west=j.negativePiToPi(e.west+t*s),r.east=j.negativePiToPi(e.west+i*s)}let a=e.north-e.south;return r.south=e.south+n*a,r.north=e.south+o*a,t===1&&(r.west=e.east),i===1&&(r.east=e.east),n===1&&(r.south=e.north),o===1&&(r.north=e.north),r};je.MAX_VALUE=Object.freeze(new je(-Math.PI,-j.PI_OVER_TWO,Math.PI,j.PI_OVER_TWO));var so=je;function Ne(e,t){this.center=h.clone(C(e,h.ZERO)),this.radius=C(t,0)}var Yp=new h,Zp=new h,Jp=new h,Xp=new h,$p=new h,Qp=new h,ed=new h,sn=new h,td=new h,nd=new h,id=new h,od=new h,CR=4/3*j.PI;Ne.fromPoints=function(e,t){if(m(t)||(t=new Ne),!m(e)||e.length===0)return t.center=h.clone(h.ZERO,t.center),t.radius=0,t;let n=h.clone(e[0],ed),i=h.clone(n,Yp),o=h.clone(n,Zp),r=h.clone(n,Jp),a=h.clone(n,Xp),s=h.clone(n,$p),u=h.clone(n,Qp),l=e.length,d;for(d=1;d<l;d++){h.clone(e[d],n);let Z=n.x,J=n.y,H=n.z;Z<i.x&&h.clone(n,i),Z>a.x&&h.clone(n,a),J<o.y&&h.clone(n,o),J>s.y&&h.clone(n,s),H<r.z&&h.clone(n,r),H>u.z&&h.clone(n,u)}let f=h.magnitudeSquared(h.subtract(a,i,sn)),g=h.magnitudeSquared(h.subtract(s,o,sn)),b=h.magnitudeSquared(h.subtract(u,r,sn)),x=i,T=a,R=f;g>R&&(R=g,x=o,T=s),b>R&&(R=b,x=r,T=u);let D=td;D.x=(x.x+T.x)*.5,D.y=(x.y+T.y)*.5,D.z=(x.z+T.z)*.5;let M=h.magnitudeSquared(h.subtract(T,D,sn)),N=Math.sqrt(M),V=nd;V.x=i.x,V.y=o.y,V.z=r.z;let q=id;q.x=a.x,q.y=s.y,q.z=u.z;let _=h.midpoint(V,q,od),ee=0;for(d=0;d<l;d++){h.clone(e[d],n);let Z=h.magnitude(h.subtract(n,_,sn));Z>ee&&(ee=Z);let J=h.magnitudeSquared(h.subtract(n,D,sn));if(J>M){let H=Math.sqrt(J);N=(N+H)*.5,M=N*N;let te=H-N;D.x=(N*D.x+te*n.x)/H,D.y=(N*D.y+te*n.y)/H,D.z=(N*D.z+te*n.z)/H}}return N<ee?(h.clone(D,t.center),t.radius=N):(h.clone(_,t.center),t.radius=ee),t};var TR=new Bi,wR=new h,SR=new h,Wp=new rt,Kp=new rt;Ne.fromRectangle2D=function(e,t,n){return Ne.fromRectangleWithHeights2D(e,t,0,0,n)};Ne.fromRectangleWithHeights2D=function(e,t,n,i,o){if(m(o)||(o=new Ne),!m(e))return o.center=h.clone(h.ZERO,o.center),o.radius=0,o;t=C(t,TR),so.southwest(e,Wp),Wp.height=n,so.northeast(e,Kp),Kp.height=i;let r=t.project(Wp,wR),a=t.project(Kp,SR),s=a.x-r.x,u=a.y-r.y,l=a.z-r.z;o.radius=Math.sqrt(s*s+u*u+l*l)*.5;let d=o.center;return d.x=r.x+s*.5,d.y=r.y+u*.5,d.z=r.z+l*.5,o};var AR=[];Ne.fromRectangle3D=function(e,t,n,i){if(t=C(t,Dn.WGS84),n=C(n,0),m(i)||(i=new Ne),!m(e))return i.center=h.clone(h.ZERO,i.center),i.radius=0,i;let o=so.subsample(e,t,n,AR);return Ne.fromPoints(o,i)};Ne.fromVertices=function(e,t,n,i){if(m(i)||(i=new Ne),!m(e)||e.length===0)return i.center=h.clone(h.ZERO,i.center),i.radius=0,i;t=C(t,h.ZERO),n=C(n,3);let o=ed;o.x=e[0]+t.x,o.y=e[1]+t.y,o.z=e[2]+t.z;let r=h.clone(o,Yp),a=h.clone(o,Zp),s=h.clone(o,Jp),u=h.clone(o,Xp),l=h.clone(o,$p),d=h.clone(o,Qp),f=e.length,g;for(g=0;g<f;g+=n){let H=e[g]+t.x,te=e[g+1]+t.y,y=e[g+2]+t.z;o.x=H,o.y=te,o.z=y,H<r.x&&h.clone(o,r),H>u.x&&h.clone(o,u),te<a.y&&h.clone(o,a),te>l.y&&h.clone(o,l),y<s.z&&h.clone(o,s),y>d.z&&h.clone(o,d)}let b=h.magnitudeSquared(h.subtract(u,r,sn)),x=h.magnitudeSquared(h.subtract(l,a,sn)),T=h.magnitudeSquared(h.subtract(d,s,sn)),R=r,D=u,M=b;x>M&&(M=x,R=a,D=l),T>M&&(M=T,R=s,D=d);let N=td;N.x=(R.x+D.x)*.5,N.y=(R.y+D.y)*.5,N.z=(R.z+D.z)*.5;let V=h.magnitudeSquared(h.subtract(D,N,sn)),q=Math.sqrt(V),_=nd;_.x=r.x,_.y=a.y,_.z=s.z;let ee=id;ee.x=u.x,ee.y=l.y,ee.z=d.z;let Z=h.midpoint(_,ee,od),J=0;for(g=0;g<f;g+=n){o.x=e[g]+t.x,o.y=e[g+1]+t.y,o.z=e[g+2]+t.z;let H=h.magnitude(h.subtract(o,Z,sn));H>J&&(J=H);let te=h.magnitudeSquared(h.subtract(o,N,sn));if(te>V){let y=Math.sqrt(te);q=(q+y)*.5,V=q*q;let w=y-q;N.x=(q*N.x+w*o.x)/y,N.y=(q*N.y+w*o.y)/y,N.z=(q*N.z+w*o.z)/y}}return q<J?(h.clone(N,i.center),i.radius=q):(h.clone(Z,i.center),i.radius=J),i};Ne.fromEncodedCartesianVertices=function(e,t,n){if(m(n)||(n=new Ne),!m(e)||!m(t)||e.length!==t.length||e.length===0)return n.center=h.clone(h.ZERO,n.center),n.radius=0,n;let i=ed;i.x=e[0]+t[0],i.y=e[1]+t[1],i.z=e[2]+t[2];let o=h.clone(i,Yp),r=h.clone(i,Zp),a=h.clone(i,Jp),s=h.clone(i,Xp),u=h.clone(i,$p),l=h.clone(i,Qp),d=e.length,f;for(f=0;f<d;f+=3){let J=e[f]+t[f],H=e[f+1]+t[f+1],te=e[f+2]+t[f+2];i.x=J,i.y=H,i.z=te,J<o.x&&h.clone(i,o),J>s.x&&h.clone(i,s),H<r.y&&h.clone(i,r),H>u.y&&h.clone(i,u),te<a.z&&h.clone(i,a),te>l.z&&h.clone(i,l)}let g=h.magnitudeSquared(h.subtract(s,o,sn)),b=h.magnitudeSquared(h.subtract(u,r,sn)),x=h.magnitudeSquared(h.subtract(l,a,sn)),T=o,R=s,D=g;b>D&&(D=b,T=r,R=u),x>D&&(D=x,T=a,R=l);let M=td;M.x=(T.x+R.x)*.5,M.y=(T.y+R.y)*.5,M.z=(T.z+R.z)*.5;let N=h.magnitudeSquared(h.subtract(R,M,sn)),V=Math.sqrt(N),q=nd;q.x=o.x,q.y=r.y,q.z=a.z;let _=id;_.x=s.x,_.y=u.y,_.z=l.z;let ee=h.midpoint(q,_,od),Z=0;for(f=0;f<d;f+=3){i.x=e[f]+t[f],i.y=e[f+1]+t[f+1],i.z=e[f+2]+t[f+2];let J=h.magnitude(h.subtract(i,ee,sn));J>Z&&(Z=J);let H=h.magnitudeSquared(h.subtract(i,M,sn));if(H>N){let te=Math.sqrt(H);V=(V+te)*.5,N=V*V;let y=te-V;M.x=(V*M.x+y*i.x)/te,M.y=(V*M.y+y*i.y)/te,M.z=(V*M.z+y*i.z)/te}}return V<Z?(h.clone(M,n.center),n.radius=V):(h.clone(ee,n.center),n.radius=Z),n};Ne.fromCornerPoints=function(e,t,n){m(n)||(n=new Ne);let i=h.midpoint(e,t,n.center);return n.radius=h.distance(i,t),n};Ne.fromEllipsoid=function(e,t){return m(t)||(t=new Ne),h.clone(h.ZERO,t.center),t.radius=e.maximumRadius,t};var RR=new h;Ne.fromBoundingSpheres=function(e,t){if(m(t)||(t=new Ne),!m(e)||e.length===0)return t.center=h.clone(h.ZERO,t.center),t.radius=0,t;let n=e.length;if(n===1)return Ne.clone(e[0],t);if(n===2)return Ne.union(e[0],e[1],t);let i=[],o;for(o=0;o<n;o++)i.push(e[o].center);t=Ne.fromPoints(i,t);let r=t.center,a=t.radius;for(o=0;o<n;o++){let s=e[o];a=Math.max(a,h.distance(r,s.center,RR)+s.radius)}return t.radius=a,t};var OR=new h,IR=new h,PR=new h;Ne.fromOrientedBoundingBox=function(e,t){m(t)||(t=new Ne);let n=e.halfAxes,i=_e.getColumn(n,0,OR),o=_e.getColumn(n,1,IR),r=_e.getColumn(n,2,PR);return h.add(i,o,i),h.add(i,r,i),t.center=h.clone(e.center,t.center),t.radius=h.magnitude(i),t};var DR=new h,MR=new h;Ne.fromTransformation=function(e,t){m(t)||(t=new Ne);let n=fe.getTranslation(e,DR),i=fe.getScale(e,MR),o=.5*h.magnitude(i);return t.center=h.clone(n,t.center),t.radius=o,t};Ne.clone=function(e,t){if(m(e))return m(t)?(t.center=h.clone(e.center,t.center),t.radius=e.radius,t):new Ne(e.center,e.radius)};Ne.packedLength=4;Ne.pack=function(e,t,n){n=C(n,0);let i=e.center;return t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n]=e.radius,t};Ne.unpack=function(e,t,n){t=C(t,0),m(n)||(n=new Ne);let i=n.center;return i.x=e[t++],i.y=e[t++],i.z=e[t++],n.radius=e[t],n};var NR=new h,LR=new h;Ne.union=function(e,t,n){m(n)||(n=new Ne);let i=e.center,o=e.radius,r=t.center,a=t.radius,s=h.subtract(r,i,NR),u=h.magnitude(s);if(o>=u+a)return e.clone(n),n;if(a>=u+o)return t.clone(n),n;let l=(o+u+a)*.5,d=h.multiplyByScalar(s,(-o+l)/u,LR);return h.add(d,i,d),h.clone(d,n.center),n.radius=l,n};var zR=new h;Ne.expand=function(e,t,n){n=Ne.clone(e,n);let i=h.magnitude(h.subtract(t,n.center,zR));return i>n.radius&&(n.radius=i),n};Ne.intersectPlane=function(e,t){let n=e.center,i=e.radius,o=t.normal,r=h.dot(o,n)+t.distance;return r<-i?vi.OUTSIDE:r<i?vi.INTERSECTING:vi.INSIDE};Ne.transform=function(e,t,n){return m(n)||(n=new Ne),n.center=fe.multiplyByPoint(t,e.center,n.center),n.radius=fe.getMaximumScale(t)*e.radius,n};var BR=new h;Ne.distanceSquaredTo=function(e,t){let n=h.subtract(e.center,t,BR),i=h.magnitude(n)-e.radius;return i<=0?0:i*i};Ne.transformWithoutScale=function(e,t,n){return m(n)||(n=new Ne),n.center=fe.multiplyByPoint(t,e.center,n.center),n.radius=e.radius,n};var FR=new h;Ne.computePlaneDistances=function(e,t,n,i){m(i)||(i=new zo);let o=h.subtract(e.center,t,FR),r=h.dot(n,o);return i.start=r-e.radius,i.stop=r+e.radius,i};var J_=new h,UR=new h,kR=new h,VR=new h,jR=new h,GR=new rt,X_=new Array(8);for(let e=0;e<8;++e)X_[e]=new h;var HR=new Bi;Ne.projectTo2D=function(e,t,n){t=C(t,HR);let i=t.ellipsoid,o=e.center,r=e.radius,a;h.equals(o,h.ZERO)?a=h.clone(h.UNIT_X,J_):a=i.geodeticSurfaceNormal(o,J_);let s=h.cross(h.UNIT_Z,a,UR);h.normalize(s,s);let u=h.cross(a,s,kR);h.normalize(u,u),h.multiplyByScalar(a,r,a),h.multiplyByScalar(u,r,u),h.multiplyByScalar(s,r,s);let l=h.negate(u,jR),d=h.negate(s,VR),f=X_,g=f[0];h.add(a,u,g),h.add(g,s,g),g=f[1],h.add(a,u,g),h.add(g,d,g),g=f[2],h.add(a,l,g),h.add(g,d,g),g=f[3],h.add(a,l,g),h.add(g,s,g),h.negate(a,a),g=f[4],h.add(a,u,g),h.add(g,s,g),g=f[5],h.add(a,u,g),h.add(g,d,g),g=f[6],h.add(a,l,g),h.add(g,d,g),g=f[7],h.add(a,l,g),h.add(g,s,g);let b=f.length;for(let D=0;D<b;++D){let M=f[D];h.add(o,M,M);let N=i.cartesianToCartographic(M,GR);t.project(N,M)}n=Ne.fromPoints(f,n),o=n.center;let x=o.x,T=o.y,R=o.z;return o.x=R,o.y=x,o.z=T,n};Ne.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)};Ne.equals=function(e,t){return e===t||m(e)&&m(t)&&h.equals(e.center,t.center)&&e.radius===t.radius};Ne.prototype.intersectPlane=function(e){return Ne.intersectPlane(this,e)};Ne.prototype.distanceSquaredTo=function(e){return Ne.distanceSquaredTo(this,e)};Ne.prototype.computePlaneDistances=function(e,t,n){return Ne.computePlaneDistances(this,e,t,n)};Ne.prototype.isOccluded=function(e){return Ne.isOccluded(this,e)};Ne.prototype.equals=function(e){return Ne.equals(this,e)};Ne.prototype.clone=function(e){return Ne.clone(this,e)};Ne.prototype.volume=function(){let e=this.radius;return CR*e*e*e};var ke=Ne;function Ee(e,t){this.x=C(e,0),this.y=C(t,0)}Ee.fromElements=function(e,t,n){return m(n)?(n.x=e,n.y=t,n):new Ee(e,t)};Ee.clone=function(e,t){if(m(e))return m(t)?(t.x=e.x,t.y=e.y,t):new Ee(e.x,e.y)};Ee.fromCartesian3=Ee.clone;Ee.fromCartesian4=Ee.clone;Ee.packedLength=2;Ee.pack=function(e,t,n){return n=C(n,0),t[n++]=e.x,t[n]=e.y,t};Ee.unpack=function(e,t,n){return t=C(t,0),m(n)||(n=new Ee),n.x=e[t++],n.y=e[t],n};Ee.packArray=function(e,t){let n=e.length,i=n*2;m(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)Ee.pack(e[o],t,o*2);return t};Ee.unpackArray=function(e,t){let n=e.length;m(t)?t.length=n/2:t=new Array(n/2);for(let i=0;i<n;i+=2){let o=i/2;t[o]=Ee.unpack(e,i,t[o])}return t};Ee.fromArray=Ee.unpack;Ee.maximumComponent=function(e){return Math.max(e.x,e.y)};Ee.minimumComponent=function(e){return Math.min(e.x,e.y)};Ee.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n};Ee.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n};Ee.clamp=function(e,t,n,i){let o=j.clamp(e.x,t.x,n.x),r=j.clamp(e.y,t.y,n.y);return i.x=o,i.y=r,i};Ee.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y};Ee.magnitude=function(e){return Math.sqrt(Ee.magnitudeSquared(e))};var Yc=new Ee;Ee.distance=function(e,t){return Ee.subtract(e,t,Yc),Ee.magnitude(Yc)};Ee.distanceSquared=function(e,t){return Ee.subtract(e,t,Yc),Ee.magnitudeSquared(Yc)};Ee.normalize=function(e,t){let n=Ee.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t};Ee.dot=function(e,t){return e.x*t.x+e.y*t.y};Ee.cross=function(e,t){return e.x*t.y-e.y*t.x};Ee.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n};Ee.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n};Ee.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n};Ee.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n};Ee.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n};Ee.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n};Ee.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t};Ee.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var $_=new Ee;Ee.lerp=function(e,t,n,i){return Ee.multiplyByScalar(t,n,$_),i=Ee.multiplyByScalar(e,1-n,i),Ee.add($_,i,i)};var Q_=new Ee,e0=new Ee;Ee.angleBetween=function(e,t){return Ee.normalize(e,Q_),Ee.normalize(t,e0),j.acosClamped(Ee.dot(Q_,e0))};var qR=new Ee;Ee.mostOrthogonalAxis=function(e,t){let n=Ee.normalize(e,qR);return Ee.abs(n,n),n.x<=n.y?t=Ee.clone(Ee.UNIT_X,t):t=Ee.clone(Ee.UNIT_Y,t),t};Ee.equals=function(e,t){return e===t||m(e)&&m(t)&&e.x===t.x&&e.y===t.y};Ee.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]};Ee.equalsEpsilon=function(e,t,n,i){return e===t||m(e)&&m(t)&&j.equalsEpsilon(e.x,t.x,n,i)&&j.equalsEpsilon(e.y,t.y,n,i)};Ee.ZERO=Object.freeze(new Ee(0,0));Ee.ONE=Object.freeze(new Ee(1,1));Ee.UNIT_X=Object.freeze(new Ee(1,0));Ee.UNIT_Y=Object.freeze(new Ee(0,1));Ee.prototype.clone=function(e){return Ee.clone(this,e)};Ee.prototype.equals=function(e){return Ee.equals(this,e)};Ee.prototype.equalsEpsilon=function(e,t,n){return Ee.equalsEpsilon(this,e,t,n)};Ee.prototype.toString=function(){return`(${this.x}, ${this.y})`};var Ce=Ee;var t0={};function gs(e,t){m(t0[e])||(t0[e]=!0,console.warn(C(t,e)))}gs.geometryOutlines="Entity geometry outlines are unsupported on terrain. Outlines will be disabled. To enable outlines, disable geometry terrain clamping by explicitly setting height to 0.";gs.geometryZIndex="Entity geometry with zIndex are unsupported when height or extrudedHeight are defined.  zIndex will be ignored";gs.geometryHeightReference="Entity corridor, ellipse, polygon or rectangle with heightReference must also have a defined height.  heightReference will be ignored";gs.geometryExtrudedHeightReference="Entity corridor, ellipse, polygon or rectangle with extrudedHeightReference must also have a defined extrudedHeight.  extrudedHeightReference will be ignored";var n0=gs;function WR(e,t){n0(e,t)}var i0=WR;function KR(){return!0}function YR(e,t){t=C(t,"This object was destroyed, i.e., destroy() was called.");function n(){}for(let i in e)typeof e[i]=="function"&&(e[i]=n);e.isDestroyed=KR}var jn=YR;function Fi(){this.high=h.clone(h.ZERO),this.low=h.clone(h.ZERO)}Fi.encode=function(e,t){m(t)||(t={high:0,low:0});let n;return e>=0?(n=Math.floor(e/65536)*65536,t.high=n,t.low=e-n):(n=Math.floor(-e/65536)*65536,t.high=-n,t.low=e+n),t};var co={high:0,low:0};Fi.fromCartesian=function(e,t){m(t)||(t=new Fi);let n=t.high,i=t.low;return Fi.encode(e.x,co),n.x=co.high,i.x=co.low,Fi.encode(e.y,co),n.y=co.high,i.y=co.low,Fi.encode(e.z,co),n.z=co.high,i.z=co.low,t};var rd=new Fi;Fi.writeElements=function(e,t,n){Fi.fromCartesian(e,rd);let i=rd.high,o=rd.low;t[n]=i.x,t[n+1]=i.y,t[n+2]=i.z,t[n+3]=o.x,t[n+4]=o.y,t[n+5]=o.z};var da=Fi;var ZR={NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3},hr=Object.freeze(ZR);function we(e,t,n,i){this[0]=C(e,0),this[1]=C(n,0),this[2]=C(t,0),this[3]=C(i,0)}we.packedLength=4;we.pack=function(e,t,n){return n=C(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t};we.unpack=function(e,t,n){return t=C(t,0),m(n)||(n=new we),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n};we.packArray=function(e,t){let n=e.length,i=n*4;m(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)we.pack(e[o],t,o*4);return t};we.unpackArray=function(e,t){let n=e.length;m(t)?t.length=n/4:t=new Array(n/4);for(let i=0;i<n;i+=4){let o=i/4;t[o]=we.unpack(e,i,t[o])}return t};we.clone=function(e,t){if(m(e))return m(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new we(e[0],e[2],e[1],e[3])};we.fromArray=we.unpack;we.fromColumnMajorArray=function(e,t){return we.clone(e,t)};we.fromRowMajorArray=function(e,t){return m(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new we(e[0],e[1],e[2],e[3])};we.fromScale=function(e,t){return m(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new we(e.x,0,0,e.y)};we.fromUniformScale=function(e,t){return m(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new we(e,0,0,e)};we.fromRotation=function(e,t){let n=Math.cos(e),i=Math.sin(e);return m(t)?(t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t):new we(n,-i,i,n)};we.toArray=function(e,t){return m(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]};we.getElementIndex=function(e,t){return e*2+t};we.getColumn=function(e,t,n){let i=t*2,o=e[i],r=e[i+1];return n.x=o,n.y=r,n};we.setColumn=function(e,t,n,i){i=we.clone(e,i);let o=t*2;return i[o]=n.x,i[o+1]=n.y,i};we.getRow=function(e,t,n){let i=e[t],o=e[t+2];return n.x=i,n.y=o,n};we.setRow=function(e,t,n,i){return i=we.clone(e,i),i[t]=n.x,i[t+2]=n.y,i};var JR=new Ce;we.setScale=function(e,t,n){let i=we.getScale(e,JR),o=t.x/i.x,r=t.y/i.y;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*r,n[3]=e[3]*r,n};var XR=new Ce;we.setUniformScale=function(e,t,n){let i=we.getScale(e,XR),o=t/i.x,r=t/i.y;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*r,n[3]=e[3]*r,n};var o0=new Ce;we.getScale=function(e,t){return t.x=Ce.magnitude(Ce.fromElements(e[0],e[1],o0)),t.y=Ce.magnitude(Ce.fromElements(e[2],e[3],o0)),t};var r0=new Ce;we.getMaximumScale=function(e){return we.getScale(e,r0),Ce.maximumComponent(r0)};var $R=new Ce;we.setRotation=function(e,t,n){let i=we.getScale(e,$R);return n[0]=t[0]*i.x,n[1]=t[1]*i.x,n[2]=t[2]*i.y,n[3]=t[3]*i.y,n};var QR=new Ce;we.getRotation=function(e,t){let n=we.getScale(e,QR);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.y,t[3]=e[3]/n.y,t};we.multiply=function(e,t,n){let i=e[0]*t[0]+e[2]*t[1],o=e[0]*t[2]+e[2]*t[3],r=e[1]*t[0]+e[3]*t[1],a=e[1]*t[2]+e[3]*t[3];return n[0]=i,n[1]=r,n[2]=o,n[3]=a,n};we.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n};we.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n};we.multiplyByVector=function(e,t,n){let i=e[0]*t.x+e[2]*t.y,o=e[1]*t.x+e[3]*t.y;return n.x=i,n.y=o,n};we.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n};we.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.y,n[3]=e[3]*t.y,n};we.multiplyByUniformScale=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n};we.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t};we.transpose=function(e,t){let n=e[0],i=e[2],o=e[1],r=e[3];return t[0]=n,t[1]=i,t[2]=o,t[3]=r,t};we.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t};we.equals=function(e,t){return e===t||m(e)&&m(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]};we.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]};we.equalsEpsilon=function(e,t,n){return n=C(n,0),e===t||m(e)&&m(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n};we.IDENTITY=Object.freeze(new we(1,0,0,1));we.ZERO=Object.freeze(new we(0,0,0,0));we.COLUMN0ROW0=0;we.COLUMN0ROW1=1;we.COLUMN1ROW0=2;we.COLUMN1ROW1=3;Object.defineProperties(we.prototype,{length:{get:function(){return we.packedLength}}});we.prototype.clone=function(e){return we.clone(this,e)};we.prototype.equals=function(e){return we.equals(this,e)};we.prototype.equalsEpsilon=function(e,t){return we.equalsEpsilon(this,e,t)};we.prototype.toString=function(){return`(${this[0]}, ${this[2]})
(${this[1]}, ${this[3]})`};var Gn=we;var mn={POINTS:z.POINTS,LINES:z.LINES,LINE_LOOP:z.LINE_LOOP,LINE_STRIP:z.LINE_STRIP,TRIANGLES:z.TRIANGLES,TRIANGLE_STRIP:z.TRIANGLE_STRIP,TRIANGLE_FAN:z.TRIANGLE_FAN};mn.isLines=function(e){return e===mn.LINES||e===mn.LINE_LOOP||e===mn.LINE_STRIP};mn.isTriangles=function(e){return e===mn.TRIANGLES||e===mn.TRIANGLE_STRIP||e===mn.TRIANGLE_FAN};mn.validate=function(e){return e===mn.POINTS||e===mn.LINES||e===mn.LINE_LOOP||e===mn.LINE_STRIP||e===mn.TRIANGLES||e===mn.TRIANGLE_STRIP||e===mn.TRIANGLE_FAN};var bt=Object.freeze(mn);function le(e,t,n,i){this.x=C(e,0),this.y=C(t,0),this.z=C(n,0),this.w=C(i,0)}var _s=new h;le.fromAxisAngle=function(e,t,n){let i=t/2,o=Math.sin(i);_s=h.normalize(e,_s);let r=_s.x*o,a=_s.y*o,s=_s.z*o,u=Math.cos(i);return m(n)?(n.x=r,n.y=a,n.z=s,n.w=u,n):new le(r,a,s,u)};var eO=[1,2,0],tO=new Array(3);le.fromRotationMatrix=function(e,t){let n,i,o,r,a,s=e[_e.COLUMN0ROW0],u=e[_e.COLUMN1ROW1],l=e[_e.COLUMN2ROW2],d=s+u+l;if(d>0)n=Math.sqrt(d+1),a=.5*n,n=.5/n,i=(e[_e.COLUMN1ROW2]-e[_e.COLUMN2ROW1])*n,o=(e[_e.COLUMN2ROW0]-e[_e.COLUMN0ROW2])*n,r=(e[_e.COLUMN0ROW1]-e[_e.COLUMN1ROW0])*n;else{let f=eO,g=0;u>s&&(g=1),l>s&&l>u&&(g=2);let b=f[g],x=f[b];n=Math.sqrt(e[_e.getElementIndex(g,g)]-e[_e.getElementIndex(b,b)]-e[_e.getElementIndex(x,x)]+1);let T=tO;T[g]=.5*n,n=.5/n,a=(e[_e.getElementIndex(x,b)]-e[_e.getElementIndex(b,x)])*n,T[b]=(e[_e.getElementIndex(b,g)]+e[_e.getElementIndex(g,b)])*n,T[x]=(e[_e.getElementIndex(x,g)]+e[_e.getElementIndex(g,x)])*n,i=-T[0],o=-T[1],r=-T[2]}return m(t)?(t.x=i,t.y=o,t.z=r,t.w=a,t):new le(i,o,r,a)};var a0=new le,s0=new le,ad=new le,c0=new le;le.fromHeadingPitchRoll=function(e,t){return c0=le.fromAxisAngle(h.UNIT_X,e.roll,a0),ad=le.fromAxisAngle(h.UNIT_Y,-e.pitch,t),t=le.multiply(ad,c0,ad),s0=le.fromAxisAngle(h.UNIT_Z,-e.heading,a0),le.multiply(s0,t,t)};var Zc=new h,sd=new h,bi=new le,u0=new le,Jc=new le;le.packedLength=4;le.pack=function(e,t,n){return n=C(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t};le.unpack=function(e,t,n){return t=C(t,0),m(n)||(n=new le),n.x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n};le.packedInterpolationLength=3;le.convertPackedArrayForInterpolation=function(e,t,n,i){le.unpack(e,n*4,Jc),le.conjugate(Jc,Jc);for(let o=0,r=n-t+1;o<r;o++){let a=o*3;le.unpack(e,(t+o)*4,bi),le.multiply(bi,Jc,bi),bi.w<0&&le.negate(bi,bi),le.computeAxis(bi,Zc);let s=le.computeAngle(bi);m(i)||(i=[]),i[a]=Zc.x*s,i[a+1]=Zc.y*s,i[a+2]=Zc.z*s}};le.unpackInterpolationResult=function(e,t,n,i,o){m(o)||(o=new le),h.fromArray(e,0,sd);let r=h.magnitude(sd);return le.unpack(t,i*4,u0),r===0?le.clone(le.IDENTITY,bi):le.fromAxisAngle(sd,r,bi),le.multiply(bi,u0,o)};le.clone=function(e,t){if(m(e))return m(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new le(e.x,e.y,e.z,e.w)};le.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t};le.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w};le.magnitude=function(e){return Math.sqrt(le.magnitudeSquared(e))};le.normalize=function(e,t){let n=1/le.magnitude(e),i=e.x*n,o=e.y*n,r=e.z*n,a=e.w*n;return t.x=i,t.y=o,t.z=r,t.w=a,t};le.inverse=function(e,t){let n=le.magnitudeSquared(e);return t=le.conjugate(e,t),le.multiplyByScalar(t,1/n,t)};le.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n};le.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n};le.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t};le.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w};le.multiply=function(e,t,n){let i=e.x,o=e.y,r=e.z,a=e.w,s=t.x,u=t.y,l=t.z,d=t.w,f=a*s+i*d+o*l-r*u,g=a*u-i*l+o*d+r*s,b=a*l+i*u-o*s+r*d,x=a*d-i*s-o*u-r*l;return n.x=f,n.y=g,n.z=b,n.w=x,n};le.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n};le.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n};le.computeAxis=function(e,t){let n=e.w;if(Math.abs(n-1)<j.EPSILON6)return t.x=t.y=t.z=0,t;let i=1/Math.sqrt(1-n*n);return t.x=e.x*i,t.y=e.y*i,t.z=e.z*i,t};le.computeAngle=function(e){return Math.abs(e.w-1)<j.EPSILON6?0:2*Math.acos(e.w)};var cd=new le;le.lerp=function(e,t,n,i){return cd=le.multiplyByScalar(t,n,cd),i=le.multiplyByScalar(e,1-n,i),le.add(cd,i,i)};var l0=new le,ud=new le,ld=new le;le.slerp=function(e,t,n,i){let o=le.dot(e,t),r=t;if(o<0&&(o=-o,r=l0=le.negate(t,l0)),1-o<j.EPSILON6)return le.lerp(e,r,n,i);let a=Math.acos(o);return ud=le.multiplyByScalar(e,Math.sin((1-n)*a),ud),ld=le.multiplyByScalar(r,Math.sin(n*a),ld),i=le.add(ud,ld,i),le.multiplyByScalar(i,1/Math.sin(a),i)};le.log=function(e,t){let n=j.acosClamped(e.w),i=0;return n!==0&&(i=n/Math.sin(n)),h.multiplyByScalar(e,i,t)};le.exp=function(e,t){let n=h.magnitude(e),i=0;return n!==0&&(i=Math.sin(n)/n),t.x=e.x*i,t.y=e.y*i,t.z=e.z*i,t.w=Math.cos(n),t};var nO=new h,iO=new h,ys=new le,fa=new le;le.computeInnerQuadrangle=function(e,t,n,i){let o=le.conjugate(t,ys);le.multiply(o,n,fa);let r=le.log(fa,nO);le.multiply(o,e,fa);let a=le.log(fa,iO);return h.add(r,a,r),h.multiplyByScalar(r,.25,r),h.negate(r,r),le.exp(r,ys),le.multiply(t,ys,i)};le.squad=function(e,t,n,i,o,r){let a=le.slerp(e,t,o,ys),s=le.slerp(n,i,o,fa);return le.slerp(a,s,2*o*(1-o),r)};var oO=new le,p0=1.9011074535173003,Xc=yi.supportsTypedArrays()?new Float32Array(8):[],$c=yi.supportsTypedArrays()?new Float32Array(8):[],uo=yi.supportsTypedArrays()?new Float32Array(8):[],lo=yi.supportsTypedArrays()?new Float32Array(8):[];for(let e=0;e<7;++e){let t=e+1,n=2*t+1;Xc[e]=1/(t*n),$c[e]=t/n}Xc[7]=p0/(8*17);$c[7]=p0*8/17;le.fastSlerp=function(e,t,n,i){let o=le.dot(e,t),r;o>=0?r=1:(r=-1,o=-o);let a=o-1,s=1-n,u=n*n,l=s*s;for(let b=7;b>=0;--b)uo[b]=(Xc[b]*u-$c[b])*a,lo[b]=(Xc[b]*l-$c[b])*a;let d=r*n*(1+uo[0]*(1+uo[1]*(1+uo[2]*(1+uo[3]*(1+uo[4]*(1+uo[5]*(1+uo[6]*(1+uo[7])))))))),f=s*(1+lo[0]*(1+lo[1]*(1+lo[2]*(1+lo[3]*(1+lo[4]*(1+lo[5]*(1+lo[6]*(1+lo[7])))))))),g=le.multiplyByScalar(e,f,oO);return le.multiplyByScalar(t,d,i),le.add(g,i,i)};le.fastSquad=function(e,t,n,i,o,r){let a=le.fastSlerp(e,t,o,ys),s=le.fastSlerp(n,i,o,fa);return le.fastSlerp(a,s,2*o*(1-o),r)};le.equals=function(e,t){return e===t||m(e)&&m(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w};le.equalsEpsilon=function(e,t,n){return n=C(n,0),e===t||m(e)&&m(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n};le.ZERO=Object.freeze(new le(0,0,0,0));le.IDENTITY=Object.freeze(new le(0,0,0,1));le.prototype.clone=function(e){return le.clone(this,e)};le.prototype.equals=function(e){return le.equals(this,e)};le.prototype.equalsEpsilon=function(e,t){return le.equalsEpsilon(this,e,t)};le.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};var Ui=le;function rO(e,t,n){let i=0,o=e.length-1,r,a;for(;i<=o;){if(r=~~((i+o)/2),a=n(e[r],t),a<0){i=r+1;continue}if(a>0){o=r-1;continue}return r}return~(o+1)}var gr=rO;function aO(e,t,n,i,o){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=i,this.ut1MinusUtc=o}var vs=aO;function sO(e,t,n,i,o,r,a,s){this.year=e,this.month=t,this.day=n,this.hour=i,this.minute=o,this.second=r,this.millisecond=a,this.isLeapSecond=s}var pd=sO;function cO(e){return e%4===0&&e%100!==0||e%400===0}var dd=cO;function uO(e,t){this.julianDate=e,this.offset=t}var gt=uO;var lO={SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:24000005e-1},wt=Object.freeze(lO);var pO={UTC:0,TAI:1},Ze=Object.freeze(pO);var f0=new pd,fd=[31,28,31,30,31,30,31,31,30,31,30,31],md=29;function hd(e,t){return be.compare(e.julianDate,t.julianDate)}var ma=new gt;function eu(e){ma.julianDate=e;let t=be.leapSeconds,n=gr(t,ma,hd);n<0&&(n=~n),n>=t.length&&(n=t.length-1);let i=t[n].offset;n>0&&be.secondsDifference(t[n].julianDate,e)>i&&(n--,i=t[n].offset),be.addSeconds(e,i,e)}function d0(e,t){ma.julianDate=e;let n=be.leapSeconds,i=gr(n,ma,hd);if(i<0&&(i=~i),i===0)return be.addSeconds(e,-n[0].offset,t);if(i>=n.length)return be.addSeconds(e,-n[i-1].offset,t);let o=be.secondsDifference(n[i].julianDate,e);if(o===0)return be.addSeconds(e,-n[i].offset,t);if(!(o<=1))return be.addSeconds(e,-n[--i].offset,t)}function Bo(e,t,n){let i=t/wt.SECONDS_PER_DAY|0;return e+=i,t-=wt.SECONDS_PER_DAY*i,t<0&&(e--,t+=wt.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function gd(e,t,n,i,o,r,a){let s=(t-14)/12|0,u=e+4800+s,l=(1461*u/4|0)+(367*(t-2-12*s)/12|0)-(3*((u+100)/100|0)/4|0)+n-32075;i=i-12,i<0&&(i+=24);let d=r+(i*wt.SECONDS_PER_HOUR+o*wt.SECONDS_PER_MINUTE+a*wt.SECONDS_PER_MILLISECOND);return d>=43200&&(l-=1),[l,d]}var dO=/^(\d{4})$/,fO=/^(\d{4})-(\d{2})$/,mO=/^(\d{4})-?(\d{3})$/,hO=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,gO=/^(\d{4})-?(\d{2})-?(\d{2})$/,_d=/([Z+\-])?(\d{2})?:?(\d{2})?$/,_O=/^(\d{2})(\.\d+)?/.source+_d.source,yO=/^(\d{2}):?(\d{2})(\.\d+)?/.source+_d.source,vO=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+_d.source;function be(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=C(e,0),t=C(t,0),n=C(n,Ze.UTC);let i=e|0;t=t+(e-i)*wt.SECONDS_PER_DAY,Bo(i,t,this),n===Ze.UTC&&eu(this)}be.fromGregorianDate=function(e,t){let n=gd(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return m(t)?(Bo(n[0],n[1],t),eu(t),t):new be(n[0],n[1],Ze.UTC)};be.fromDate=function(e,t){let n=gd(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return m(t)?(Bo(n[0],n[1],t),eu(t),t):new be(n[0],n[1],Ze.UTC)};be.fromIso8601=function(e,t){e=e.replace(",",".");let n=e.split("T"),i,o=1,r=1,a=0,s=0,u=0,l=0,d=n[0],f=n[1],g,b;if(n=d.match(gO),n!==null)i=+n[1],o=+n[2],r=+n[3];else if(n=d.match(fO),n!==null)i=+n[1],o=+n[2];else if(n=d.match(dO),n!==null)i=+n[1];else{let D;if(n=d.match(mO),n!==null)i=+n[1],D=+n[2],b=dd(i);else if(n=d.match(hO),n!==null){i=+n[1];let M=+n[2],N=+n[3]||0,V=new Date(Date.UTC(i,0,4));D=M*7+N-V.getUTCDay()-3}g=new Date(Date.UTC(i,0,1)),g.setUTCDate(D),o=g.getUTCMonth()+1,r=g.getUTCDate()}b=dd(i);let x;if(m(f)){n=f.match(vO),n!==null?(a=+n[1],s=+n[2],u=+n[3],l=+(n[4]||0)*1e3,x=5):(n=f.match(yO),n!==null?(a=+n[1],s=+n[2],u=+(n[3]||0)*60,x=4):(n=f.match(_O),n!==null&&(a=+n[1],s=+(n[2]||0)*60,x=3)));let D=n[x],M=+n[x+1],N=+(n[x+2]||0);switch(D){case"+":a=a-M,s=s-N;break;case"-":a=a+M,s=s+N;break;case"Z":break;default:s=s+new Date(Date.UTC(i,o-1,r,a,s)).getTimezoneOffset();break}}let T=u===60;for(T&&u--;s>=60;)s-=60,a++;for(;a>=24;)a-=24,r++;for(g=b&&o===2?md:fd[o-1];r>g;)r-=g,o++,o>12&&(o-=12,i++),g=b&&o===2?md:fd[o-1];for(;s<0;)s+=60,a--;for(;a<0;)a+=24,r--;for(;r<1;)o--,o<1&&(o+=12,i--),g=b&&o===2?md:fd[o-1],r+=g;let R=gd(i,o,r,a,s,u,l);return m(t)?(Bo(R[0],R[1],t),eu(t)):t=new be(R[0],R[1],Ze.UTC),T&&be.addSeconds(t,1,t),t};be.now=function(e){return be.fromDate(new Date,e)};var Qc=new be(0,0,Ze.TAI);be.toGregorianDate=function(e,t){let n=!1,i=d0(e,Qc);m(i)||(be.addSeconds(e,-1,Qc),i=d0(Qc,Qc),n=!0);let o=i.dayNumber,r=i.secondsOfDay;r>=43200&&(o+=1);let a=o+68569|0,s=4*a/146097|0;a=a-((146097*s+3)/4|0)|0;let u=4e3*(a+1)/1461001|0;a=a-(1461*u/4|0)+31|0;let l=80*a/2447|0,d=a-(2447*l/80|0)|0;a=l/11|0;let f=l+2-12*a|0,g=100*(s-49)+u+a|0,b=r/wt.SECONDS_PER_HOUR|0,x=r-b*wt.SECONDS_PER_HOUR,T=x/wt.SECONDS_PER_MINUTE|0;x=x-T*wt.SECONDS_PER_MINUTE;let R=x|0,D=(x-R)/wt.SECONDS_PER_MILLISECOND;return b+=12,b>23&&(b-=24),n&&(R+=1),m(t)?(t.year=g,t.month=f,t.day=d,t.hour=b,t.minute=T,t.second=R,t.millisecond=D,t.isLeapSecond=n,t):new pd(g,f,d,b,T,R,D,n)};be.toDate=function(e){let t=be.toGregorianDate(e,f0),n=t.second;return t.isLeapSecond&&(n-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,n,t.millisecond))};be.toIso8601=function(e,t){let n=be.toGregorianDate(e,f0),i=n.year,o=n.month,r=n.day,a=n.hour,s=n.minute,u=n.second,l=n.millisecond;i===1e4&&o===1&&r===1&&a===0&&s===0&&u===0&&l===0&&(i=9999,o=12,r=31,a=24);let d;return!m(t)&&l!==0?(d=(l*.01).toString().replace(".",""),`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}.${d}Z`):!m(t)||t===0?`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}Z`:(d=(l*.01).toFixed(t).replace(".","").slice(0,t),`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}.${d}Z`)};be.clone=function(e,t){if(m(e))return m(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new be(e.dayNumber,e.secondsOfDay,Ze.TAI)};be.compare=function(e,t){let n=e.dayNumber-t.dayNumber;return n!==0?n:e.secondsOfDay-t.secondsOfDay};be.equals=function(e,t){return e===t||m(e)&&m(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay};be.equalsEpsilon=function(e,t,n){return n=C(n,0),e===t||m(e)&&m(t)&&Math.abs(be.secondsDifference(e,t))<=n};be.totalDays=function(e){return e.dayNumber+e.secondsOfDay/wt.SECONDS_PER_DAY};be.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*wt.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)};be.daysDifference=function(e,t){let n=e.dayNumber-t.dayNumber,i=(e.secondsOfDay-t.secondsOfDay)/wt.SECONDS_PER_DAY;return n+i};be.computeTaiMinusUtc=function(e){ma.julianDate=e;let t=be.leapSeconds,n=gr(t,ma,hd);return n<0&&(n=~n,--n,n<0&&(n=0)),t[n].offset};be.addSeconds=function(e,t,n){return Bo(e.dayNumber,e.secondsOfDay+t,n)};be.addMinutes=function(e,t,n){let i=e.secondsOfDay+t*wt.SECONDS_PER_MINUTE;return Bo(e.dayNumber,i,n)};be.addHours=function(e,t,n){let i=e.secondsOfDay+t*wt.SECONDS_PER_HOUR;return Bo(e.dayNumber,i,n)};be.addDays=function(e,t,n){let i=e.dayNumber+t;return Bo(i,e.secondsOfDay,n)};be.lessThan=function(e,t){return be.compare(e,t)<0};be.lessThanOrEquals=function(e,t){return be.compare(e,t)<=0};be.greaterThan=function(e,t){return be.compare(e,t)>0};be.greaterThanOrEquals=function(e,t){return be.compare(e,t)>=0};be.prototype.clone=function(e){return be.clone(this,e)};be.prototype.equals=function(e){return be.equals(this,e)};be.prototype.equalsEpsilon=function(e,t){return be.equalsEpsilon(this,e,t)};be.prototype.toString=function(){return be.toIso8601(this)};be.leapSeconds=[new gt(new be(2441317,43210,Ze.TAI),10),new gt(new be(2441499,43211,Ze.TAI),11),new gt(new be(2441683,43212,Ze.TAI),12),new gt(new be(2442048,43213,Ze.TAI),13),new gt(new be(2442413,43214,Ze.TAI),14),new gt(new be(2442778,43215,Ze.TAI),15),new gt(new be(2443144,43216,Ze.TAI),16),new gt(new be(2443509,43217,Ze.TAI),17),new gt(new be(2443874,43218,Ze.TAI),18),new gt(new be(2444239,43219,Ze.TAI),19),new gt(new be(2444786,43220,Ze.TAI),20),new gt(new be(2445151,43221,Ze.TAI),21),new gt(new be(2445516,43222,Ze.TAI),22),new gt(new be(2446247,43223,Ze.TAI),23),new gt(new be(2447161,43224,Ze.TAI),24),new gt(new be(2447892,43225,Ze.TAI),25),new gt(new be(2448257,43226,Ze.TAI),26),new gt(new be(2448804,43227,Ze.TAI),27),new gt(new be(2449169,43228,Ze.TAI),28),new gt(new be(2449534,43229,Ze.TAI),29),new gt(new be(2450083,43230,Ze.TAI),30),new gt(new be(2450630,43231,Ze.TAI),31),new gt(new be(2451179,43232,Ze.TAI),32),new gt(new be(2453736,43233,Ze.TAI),33),new gt(new be(2454832,43234,Ze.TAI),34),new gt(new be(2456109,43235,Ze.TAI),35),new gt(new be(2457204,43236,Ze.TAI),36),new gt(new be(2457754,43237,Ze.TAI),37)];var cn=be;var V0=Ct(Fo(),1);function bO(e){return(e.length===0||e[e.length-1]!=="/")&&(e=`${e}/`),e}var b0=bO;function xO(){let e,t,n=new Promise(function(i,o){e=i,t=o});return{resolve:e,reject:t,promise:n}}var xi=xO;var x0=Ct(Fo(),1);function yd(e,t){let n;return typeof document<"u"&&(n=document),yd._implementation(e,t,n)}yd._implementation=function(e,t,n){if(!m(t)){if(typeof n>"u")return e;t=C(n.baseURI,n.location.href)}let i=new x0.default(e);return i.scheme()!==""?i.toString():i.absoluteTo(t).toString()};var ou=yd;var E0=Ct(Fo(),1);function EO(e,t){let n="",i=e.lastIndexOf("/");return i!==-1&&(n=e.substring(0,i+1)),t&&(e=new E0.default(e),e.query().length!==0&&(n+=`?${e.query()}`),e.fragment().length!==0&&(n+=`#${e.fragment()}`)),n}var C0=EO;var T0=Ct(Fo(),1);function CO(e){let t=new T0.default(e);t.normalize();let n=t.path(),i=n.lastIndexOf("/");return i!==-1&&(n=n.substr(i+1)),i=n.lastIndexOf("."),i===-1?n="":n=n.substr(i+1),n}var w0=CO;var S0={};function TO(e,t,n){m(t)||(t=e.width),m(n)||(n=e.height);let i=S0[t];m(i)||(i={},S0[t]=i);let o=i[n];if(!m(o)){let r=document.createElement("canvas");r.width=t,r.height=n,o=r.getContext("2d",{willReadFrequently:!0}),o.globalCompositeOperation="copy",i[n]=o}return o.drawImage(e,0,0,t,n),o.getImageData(0,0,t,n).data}var vd=TO;var wO=/^blob:/i;function SO(e){return wO.test(e)}var ru=SO;var ki;function AO(e){m(ki)||(ki=document.createElement("a")),ki.href=window.location.href;let t=ki.host,n=ki.protocol;return ki.href=e,ki.href=ki.href,n!==ki.protocol||t!==ki.host}var au=AO;var RO=/^data:/i;function OO(e){return RO.test(e)}var su=OO;function IO(e){let t=document.createElement("script");return t.async=!0,t.src=e,new Promise((n,i)=>{window.crossOriginIsolated&&t.setAttribute("crossorigin","anonymous");let o=document.getElementsByTagName("head")[0];t.onload=function(){t.onload=void 0,o.removeChild(t),n()},t.onerror=function(r){i(r)},o.appendChild(t)})}var A0=IO;function PO(e){let t="";for(let n in e)if(e.hasOwnProperty(n)){let i=e[n],o=`${encodeURIComponent(n)}=`;if(Array.isArray(i))for(let r=0,a=i.length;r<a;++r)t+=`${o+encodeURIComponent(i[r])}&`;else t+=`${o+encodeURIComponent(i)}&`}return t=t.slice(0,-1),t}var R0=PO;function DO(e){let t={};if(e==="")return t;let n=e.replace(/\+/g,"%20").split(/[&;]/);for(let i=0,o=n.length;i<o;++i){let r=n[i].split("="),a=decodeURIComponent(r[0]),s=r[1];m(s)?s=decodeURIComponent(s):s="";let u=t[a];typeof u=="string"?t[a]=[u,s]:Array.isArray(u)?u.push(s):t[a]=s}return t}var O0=DO;var MO={UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5},Pt=Object.freeze(MO);var NO={TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3},I0=Object.freeze(NO);function cu(e){e=C(e,C.EMPTY_OBJECT);let t=C(e.throttleByServer,!1),n=C(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=C(e.priority,0),this.throttle=n,this.throttleByServer=t,this.type=C(e.type,I0.OTHER),this.serverKey=e.serverKey,this.state=Pt.UNISSUED,this.deferred=void 0,this.cancelled=!1}cu.prototype.cancel=function(){this.cancelled=!0};cu.prototype.clone=function(e){return m(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=Pt.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new cu(this)};var P0=cu;function LO(e){let t={};if(!e)return t;let n=e.split(`\r
`);for(let i=0;i<n.length;++i){let o=n[i],r=o.indexOf(": ");if(r>0){let a=o.substring(0,r),s=o.substring(r+2);t[a]=s}}return t}var D0=LO;function M0(e,t,n){this.statusCode=e,this.response=t,this.responseHeaders=n,typeof this.responseHeaders=="string"&&(this.responseHeaders=D0(this.responseHeaders))}M0.prototype.toString=function(){let e="Request has failed.";return m(this.statusCode)&&(e+=` Status Code: ${this.statusCode}`),e};var bs=M0;var lu=Ct(Fo(),1);function xs(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}Object.defineProperties(xs.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}});xs.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);let n=this;return function(){n.removeEventListener(e,t)}};xs.prototype.removeEventListener=function(e,t){let n=this._listeners,i=this._scopes,o=-1;for(let r=0;r<n.length;r++)if(n[r]===e&&i[r]===t){o=r;break}return o!==-1?(this._insideRaiseEvent?(this._toRemove.push(o),n[o]=void 0,i[o]=void 0):(n.splice(o,1),i.splice(o,1)),!0):!1};function zO(e,t){return t-e}xs.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;let e,t=this._listeners,n=this._scopes,i=t.length;for(e=0;e<i;e++){let r=t[e];m(r)&&t[e].apply(n[e],arguments)}let o=this._toRemove;if(i=o.length,i>0){for(o.sort(zO),e=0;e<i;e++){let r=o[e];t.splice(r,1),n.splice(r,1)}o.length=0}this._insideRaiseEvent=!1};var uu=xs;function _r(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}Object.defineProperties(_r.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){let t=this._length;if(e<t){let n=this._array;for(let i=e;i<t;++i)n[i]=void 0;this._length=e,n.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}});function bd(e,t,n){let i=e[t];e[t]=e[n],e[n]=i}_r.prototype.reserve=function(e){e=C(e,this._length),this._array.length=e};_r.prototype.heapify=function(e){e=C(e,0);let t=this._length,n=this._comparator,i=this._array,o=-1,r=!0;for(;r;){let a=2*(e+1),s=a-1;s<t&&n(i[s],i[e])<0?o=s:o=e,a<t&&n(i[a],i[o])<0&&(o=a),o!==e?(bd(i,o,e),e=o):r=!1}};_r.prototype.resort=function(){let e=this._length;for(let t=Math.ceil(e/2);t>=0;--t)this.heapify(t)};_r.prototype.insert=function(e){let t=this._array,n=this._comparator,i=this._maximumLength,o=this._length++;for(o<t.length?t[o]=e:t.push(e);o!==0;){let a=Math.floor((o-1)/2);if(n(t[o],t[a])<0)bd(t,o,a),o=a;else break}let r;return m(i)&&this._length>i&&(r=t[i],this._length=i),r};_r.prototype.pop=function(e){if(e=C(e,0),this._length===0)return;let t=this._array,n=t[e];return bd(t,e,--this._length),this.heapify(e),t[this._length]=void 0,n};var N0=_r;function BO(e,t){return e.priority-t.priority}var dt={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},_a=20,wn=new N0({comparator:BO});wn.maximumLength=_a;wn.reserve(_a);var Vi=[],po={},FO=typeof document<"u"?new lu.default(document.location.href):new lu.default,pu=new uu;function Rt(){}Rt.maximumRequests=250;Rt.maximumRequestsPerServer=30;Rt.requestsByServer={"api.cesium.com:443":18,"assets.ion.cesium.com:443":18,"ibasemaps-api.arcgis.com:443":18,"tile.googleapis.com:443":18};Rt.throttleRequests=!0;Rt.debugShowStatistics=!1;Rt.requestCompletedEvent=pu;Object.defineProperties(Rt,{statistics:{get:function(){return dt}},priorityHeapLength:{get:function(){return _a},set:function(e){if(e<_a)for(;wn.length>e;){let t=wn.pop();yr(t)}_a=e,wn.maximumLength=e,wn.reserve(e)}}});function L0(e){m(e.priorityFunction)&&(e.priority=e.priorityFunction())}Rt.serverHasOpenSlots=function(e,t){t=C(t,1);let n=C(Rt.requestsByServer[e],Rt.maximumRequestsPerServer);return po[e]+t<=n};Rt.heapHasOpenSlots=function(e){return wn.length+e<=_a};function z0(e){return e.state===Pt.UNISSUED&&(e.state=Pt.ISSUED,e.deferred=xi()),e.deferred.promise}function UO(e){return function(t){if(e.state===Pt.CANCELLED)return;let n=e.deferred;--dt.numberOfActiveRequests,--po[e.serverKey],pu.raiseEvent(),e.state=Pt.RECEIVED,e.deferred=void 0,n.resolve(t)}}function kO(e){return function(t){e.state!==Pt.CANCELLED&&(++dt.numberOfFailedRequests,--dt.numberOfActiveRequests,--po[e.serverKey],pu.raiseEvent(t),e.state=Pt.FAILED,e.deferred.reject(t))}}function B0(e){let t=z0(e);return e.state=Pt.ACTIVE,Vi.push(e),++dt.numberOfActiveRequests,++dt.numberOfActiveRequestsEver,++po[e.serverKey],e.requestFunction().then(UO(e)).catch(kO(e)),t}function yr(e){let t=e.state===Pt.ACTIVE;if(e.state=Pt.CANCELLED,++dt.numberOfCancelledRequests,m(e.deferred)){let n=e.deferred;e.deferred=void 0,n.reject()}t&&(--dt.numberOfActiveRequests,--po[e.serverKey],++dt.numberOfCancelledActiveRequests),m(e.cancelFunction)&&e.cancelFunction()}Rt.update=function(){let e,t,n=0,i=Vi.length;for(e=0;e<i;++e){if(t=Vi[e],t.cancelled&&yr(t),t.state!==Pt.ACTIVE){++n;continue}n>0&&(Vi[e-n]=t)}Vi.length-=n;let o=wn.internalArray,r=wn.length;for(e=0;e<r;++e)L0(o[e]);wn.resort();let a=Math.max(Rt.maximumRequests-Vi.length,0),s=0;for(;s<a&&wn.length>0;){if(t=wn.pop(),t.cancelled){yr(t);continue}if(t.throttleByServer&&!Rt.serverHasOpenSlots(t.serverKey)){yr(t);continue}B0(t),++s}VO()};Rt.getServerKey=function(e){let t=new lu.default(e);t.scheme()===""&&(t=t.absoluteTo(FO),t.normalize());let n=t.authority();/:/.test(n)||(n=`${n}:${t.scheme()==="https"?"443":"80"}`);let i=po[n];return m(i)||(po[n]=0),n};Rt.request=function(e){if(su(e.url)||ru(e.url))return pu.raiseEvent(),e.state=Pt.RECEIVED,e.requestFunction();if(++dt.numberOfAttemptedRequests,m(e.serverKey)||(e.serverKey=Rt.getServerKey(e.url)),Rt.throttleRequests&&e.throttleByServer&&!Rt.serverHasOpenSlots(e.serverKey))return;if(!Rt.throttleRequests||!e.throttle)return B0(e);if(Vi.length>=Rt.maximumRequests)return;L0(e);let t=wn.insert(e);if(m(t)){if(t===e)return;yr(t)}return z0(e)};function VO(){Rt.debugShowStatistics&&(dt.numberOfActiveRequests===0&&dt.lastNumberOfActiveRequests>0&&(dt.numberOfAttemptedRequests>0&&(console.log(`Number of attempted requests: ${dt.numberOfAttemptedRequests}`),dt.numberOfAttemptedRequests=0),dt.numberOfCancelledRequests>0&&(console.log(`Number of cancelled requests: ${dt.numberOfCancelledRequests}`),dt.numberOfCancelledRequests=0),dt.numberOfCancelledActiveRequests>0&&(console.log(`Number of cancelled active requests: ${dt.numberOfCancelledActiveRequests}`),dt.numberOfCancelledActiveRequests=0),dt.numberOfFailedRequests>0&&(console.log(`Number of failed requests: ${dt.numberOfFailedRequests}`),dt.numberOfFailedRequests=0)),dt.lastNumberOfActiveRequests=dt.numberOfActiveRequests)}Rt.clearForSpecs=function(){for(;wn.length>0;){let t=wn.pop();yr(t)}let e=Vi.length;for(let t=0;t<e;++t)yr(Vi[t]);Vi.length=0,po={},dt.numberOfAttemptedRequests=0,dt.numberOfActiveRequests=0,dt.numberOfCancelledRequests=0,dt.numberOfCancelledActiveRequests=0,dt.numberOfFailedRequests=0,dt.numberOfActiveRequestsEver=0,dt.lastNumberOfActiveRequests=0};Rt.numberOfActiveRequestsByServer=function(e){return po[e]};Rt.requestHeap=wn;var du=Rt;var F0=Ct(Fo(),1);var Es={},ya={};Es.add=function(e,t){let n=`${e.toLowerCase()}:${t}`;m(ya[n])||(ya[n]=!0)};Es.remove=function(e,t){let n=`${e.toLowerCase()}:${t}`;m(ya[n])&&delete ya[n]};function jO(e){let t=new F0.default(e);t.normalize();let n=t.authority();if(n.length!==0){if(t.authority(n),n.indexOf("@")!==-1&&(n=n.split("@")[1]),n.indexOf(":")===-1){let i=t.scheme();if(i.length===0&&(i=window.location.protocol,i=i.substring(0,i.length-1)),i==="http")n+=":80";else if(i==="https")n+=":443";else return}return n}}Es.contains=function(e){let t=jO(e);return!!(m(t)&&m(ya[t]))};Es.clear=function(){ya={}};var xd=Es;var j0=function(){try{let e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob",e.responseType==="blob"}catch{return!1}}();function ve(e){e=C(e,C.EMPTY_OBJECT),typeof e=="string"&&(e={url:e}),this._url=void 0,this._templateValues=ji(e.templateValues,{}),this._queryParameters=ji(e.queryParameters,{}),this.headers=ji(e.headers,{}),this.request=C(e.request,new P0),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=C(e.retryAttempts,0),this._retryCount=0,C(e.parseUrl,!0)?this.parseUrl(e.url,!0,!0):this._url=e.url,this._credits=e.credits}function ji(e,t){return m(e)?ri(e):t}ve.createIfNeeded=function(e){return e instanceof ve?e.getDerivedResource({request:e.request}):typeof e!="string"?e:new ve({url:e})};var va;ve.supportsImageBitmapOptions=function(){if(m(va))return va;if(typeof createImageBitmap!="function")return va=Promise.resolve(!1),va;let e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAAE4g3rEiDgAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADElEQVQI12Ng6GAAAAEUAIngE3ZiAAAAAElFTkSuQmCC";return va=ve.fetchBlob({url:e}).then(function(t){let n={imageOrientation:"flipY",premultiplyAlpha:"none",colorSpaceConversion:"none"};return Promise.all([createImageBitmap(t,n),createImageBitmap(t)])}).then(function(t){let n=vd(t[0]),i=vd(t[1]);return n[1]!==i[1]}).catch(function(){return!1}),va};Object.defineProperties(ve,{isBlobSupported:{get:function(){return j0}}});Object.defineProperties(ve.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){this.parseUrl(e,!1,!1)}},extension:{get:function(){return w0(this._url)}},isDataUri:{get:function(){return su(this._url)}},isBlobUri:{get:function(){return ru(this._url)}},isCrossOriginUrl:{get:function(){return au(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}},credits:{get:function(){return this._credits}}});ve.prototype.toString=function(){return this.getUrlComponent(!0,!0)};ve.prototype.parseUrl=function(e,t,n,i){let o=new V0.default(e),r=GO(o.query());this._queryParameters=t?mu(r,this.queryParameters,n):r,o.search(""),o.fragment(""),m(i)&&o.scheme()===""&&(o=o.absoluteTo(ou(i))),this._url=o.toString()};function GO(e){return e.length===0?{}:e.indexOf("=")===-1?{[e]:void 0}:O0(e)}function mu(e,t,n){if(!n)return Vn(e,t);let i=ri(e,!0);for(let o in t)if(t.hasOwnProperty(o)){let r=i[o],a=t[o];m(r)?(Array.isArray(r)||(r=i[o]=[r]),i[o]=r.concat(a)):i[o]=Array.isArray(a)?a.slice():a}return i}ve.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;let n=this._url;e&&(n=`${n}${HO(this.queryParameters)}`),n=n.replace(/%7B/g,"{").replace(/%7D/g,"}");let i=this._templateValues;return Object.keys(i).length>0&&(n=n.replace(/{(.*?)}/g,function(o,r){let a=i[r];return m(a)?encodeURIComponent(a):o})),t&&m(this.proxy)&&(n=this.proxy.getURL(n)),n};function HO(e){let t=Object.keys(e);return t.length===0?"":t.length===1&&!m(e[t[0]])?`?${t[0]}`:`?${R0(e)}`}ve.prototype.setQueryParameters=function(e,t){t?this._queryParameters=mu(this._queryParameters,e,!1):this._queryParameters=mu(e,this._queryParameters,!1)};ve.prototype.appendQueryParameters=function(e){this._queryParameters=mu(e,this._queryParameters,!0)};ve.prototype.setTemplateValues=function(e,t){t?this._templateValues=Vn(this._templateValues,e):this._templateValues=Vn(e,this._templateValues)};ve.prototype.getDerivedResource=function(e){let t=this.clone();if(t._retryCount=0,m(e.url)){let n=C(e.preserveQueryParameters,!1);t.parseUrl(e.url,!0,n,this._url)}return m(e.queryParameters)&&(t._queryParameters=Vn(e.queryParameters,t.queryParameters)),m(e.templateValues)&&(t._templateValues=Vn(e.templateValues,t.templateValues)),m(e.headers)&&(t.headers=Vn(e.headers,t.headers)),m(e.proxy)&&(t.proxy=e.proxy),m(e.request)&&(t.request=e.request),m(e.retryCallback)&&(t.retryCallback=e.retryCallback),m(e.retryAttempts)&&(t.retryAttempts=e.retryAttempts),t};ve.prototype.retryOnError=function(e){let t=this.retryCallback;if(typeof t!="function"||this._retryCount>=this.retryAttempts)return Promise.resolve(!1);let n=this;return Promise.resolve(t(this,e)).then(function(i){return++n._retryCount,i})};ve.prototype.clone=function(e){return m(e)?(e._url=this._url,e._queryParameters=ri(this._queryParameters),e._templateValues=ri(this._templateValues),e.headers=ri(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e):new ve({url:this._url,queryParameters:this.queryParameters,templateValues:this.templateValues,headers:this.headers,proxy:this.proxy,retryCallback:this.retryCallback,retryAttempts:this.retryAttempts,request:this.request.clone(),parseUrl:!1,credits:m(this.credits)?this.credits.slice():void 0})};ve.prototype.getBaseUri=function(e){return C0(this.getUrlComponent(e),e)};ve.prototype.appendForwardSlash=function(){this._url=b0(this._url)};ve.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})};ve.fetchArrayBuffer=function(e){return new ve(e).fetchArrayBuffer()};ve.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})};ve.fetchBlob=function(e){return new ve(e).fetchBlob()};ve.prototype.fetchImage=function(e){e=C(e,C.EMPTY_OBJECT);let t=C(e.preferImageBitmap,!1),n=C(e.preferBlob,!1),i=C(e.flipY,!1),o=C(e.skipColorSpaceConversion,!1);if(Cd(this.request),!j0||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return Ed({resource:this,flipY:i,skipColorSpaceConversion:o,preferImageBitmap:t});let r=this.fetchBlob();if(!m(r))return;let a,s,u,l;return ve.supportsImageBitmapOptions().then(function(d){return a=d,s=a&&t,r}).then(function(d){if(!m(d))return;if(l=d,s)return ve.createImageBitmapFromBlob(d,{flipY:i,premultiplyAlpha:!1,skipColorSpaceConversion:o});let f=window.URL.createObjectURL(d);return u=new ve({url:f}),Ed({resource:u,flipY:i,skipColorSpaceConversion:o,preferImageBitmap:!1})}).then(function(d){if(m(d))return d.blob=l,s||window.URL.revokeObjectURL(u.url),d}).catch(function(d){return m(u)&&window.URL.revokeObjectURL(u.url),d.blob=l,Promise.reject(d)})};function Ed(e){let t=e.resource,n=e.flipY,i=e.skipColorSpaceConversion,o=e.preferImageBitmap,r=t.request;r.url=t.url,r.requestFunction=function(){let s=!1;!t.isDataUri&&!t.isBlobUri&&(s=t.isCrossOriginUrl);let u=xi();return ve._Implementations.createImage(r,s,u,n,i,o),u.promise};let a=du.request(r);if(m(a))return a.catch(function(s){return r.state!==Pt.FAILED?Promise.reject(s):t.retryOnError(s).then(function(u){return u?(r.state=Pt.UNISSUED,r.deferred=void 0,Ed({resource:t,flipY:n,skipColorSpaceConversion:i,preferImageBitmap:o})):Promise.reject(s)})})}ve.fetchImage=function(e){return new ve(e).fetchImage({flipY:e.flipY,skipColorSpaceConversion:e.skipColorSpaceConversion,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})};ve.prototype.fetchText=function(){return this.fetch({responseType:"text"})};ve.fetchText=function(e){return new ve(e).fetchText()};ve.prototype.fetchJson=function(){let e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(m(e))return e.then(function(t){if(m(t))return JSON.parse(t)})};ve.fetchJson=function(e){return new ve(e).fetchJson()};ve.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})};ve.fetchXML=function(e){return new ve(e).fetchXML()};ve.prototype.fetchJsonp=function(e){e=C(e,"callback"),Cd(this.request);let t;do t=`loadJsonp${j.nextRandomNumber().toString().substring(2,8)}`;while(m(window[t]));return G0(this,e,t)};function G0(e,t,n){let i={};i[t]=n,e.setQueryParameters(i);let o=e.request,r=e.url;o.url=r,o.requestFunction=function(){let s=xi();return window[n]=function(u){s.resolve(u);try{delete window[n]}catch{window[n]=void 0}},ve._Implementations.loadAndExecuteScript(r,n,s),s.promise};let a=du.request(o);if(m(a))return a.catch(function(s){return o.state!==Pt.FAILED?Promise.reject(s):e.retryOnError(s).then(function(u){return u?(o.state=Pt.UNISSUED,o.deferred=void 0,G0(e,t,n)):Promise.reject(s)})})}ve.fetchJsonp=function(e){return new ve(e).fetchJsonp(e.callbackParameterName)};ve.prototype._makeRequest=function(e){let t=this;Cd(t.request);let n=t.request,i=t.url;n.url=i,n.requestFunction=function(){let r=e.responseType,a=Vn(e.headers,t.headers),s=e.overrideMimeType,u=e.method,l=e.data,d=xi(),f=ve._Implementations.loadWithXhr(i,r,u,l,a,d,s);return m(f)&&m(f.abort)&&(n.cancelFunction=function(){f.abort()}),d.promise};let o=du.request(n);if(m(o))return o.then(function(r){return n.cancelFunction=void 0,r}).catch(function(r){return n.cancelFunction=void 0,n.state!==Pt.FAILED?Promise.reject(r):t.retryOnError(r).then(function(a){return a?(n.state=Pt.UNISSUED,n.deferred=void 0,t.fetch(e)):Promise.reject(r)})})};function Cd(e){if(e.state===Pt.ISSUED||e.state===Pt.ACTIVE)throw new It("The Resource is already being fetched.");e.state=Pt.UNISSUED,e.deferred=void 0}var qO=/^data:(.*?)(;base64)?,(.*)$/;function fu(e,t){let n=decodeURIComponent(t);return e?atob(n):n}function U0(e,t){let n=fu(e,t),i=new ArrayBuffer(n.length),o=new Uint8Array(i);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return i}function WO(e,t){t=C(t,"");let n=e[1],i=!!e[2],o=e[3],r,a;switch(t){case"":case"text":return fu(i,o);case"arraybuffer":return U0(i,o);case"blob":return r=U0(i,o),new Blob([r],{type:n});case"document":return a=new DOMParser,a.parseFromString(fu(i,o),n);case"json":return JSON.parse(fu(i,o));default:}}ve.prototype.fetch=function(e){return e=ji(e,{}),e.method="GET",this._makeRequest(e)};ve.fetch=function(e){return new ve(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})};ve.prototype.delete=function(e){return e=ji(e,{}),e.method="DELETE",this._makeRequest(e)};ve.delete=function(e){return new ve(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})};ve.prototype.head=function(e){return e=ji(e,{}),e.method="HEAD",this._makeRequest(e)};ve.head=function(e){return new ve(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})};ve.prototype.options=function(e){return e=ji(e,{}),e.method="OPTIONS",this._makeRequest(e)};ve.options=function(e){return new ve(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})};ve.prototype.post=function(e,t){return No.defined("data",e),t=ji(t,{}),t.method="POST",t.data=e,this._makeRequest(t)};ve.post=function(e){return new ve(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})};ve.prototype.put=function(e,t){return No.defined("data",e),t=ji(t,{}),t.method="PUT",t.data=e,this._makeRequest(t)};ve.put=function(e){return new ve(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})};ve.prototype.patch=function(e,t){return No.defined("data",e),t=ji(t,{}),t.method="PATCH",t.data=e,this._makeRequest(t)};ve.patch=function(e){return new ve(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})};ve._Implementations={};ve._Implementations.loadImageElement=function(e,t,n){let i=new Image;i.crossOrigin="anonymous",i.onload=function(){i.naturalWidth===0&&i.naturalHeight===0&&i.width===0&&i.height===0&&(i.width=300,i.height=150),n.resolve(i)},i.onerror=function(o){n.reject(o)},t&&(xd.contains(e)?i.crossOrigin="use-credentials":i.crossOrigin=""),i.src=e};ve._Implementations.createImage=function(e,t,n,i,o,r){let a=e.url;ve.supportsImageBitmapOptions().then(function(s){if(!(s&&r)){ve._Implementations.loadImageElement(a,t,n);return}let u="blob",l="GET",d=xi(),f=ve._Implementations.loadWithXhr(a,u,l,void 0,void 0,d,void 0,void 0,void 0);return m(f)&&m(f.abort)&&(e.cancelFunction=function(){f.abort()}),d.promise.then(function(g){if(!m(g)){n.reject(new It(`Successfully retrieved ${a} but it contained no content.`));return}return ve.createImageBitmapFromBlob(g,{flipY:i,premultiplyAlpha:!1,skipColorSpaceConversion:o})}).then(function(g){n.resolve(g)})}).catch(function(s){n.reject(s)})};ve.createImageBitmapFromBlob=function(e,t){return No.defined("options",t),No.typeOf.bool("options.flipY",t.flipY),No.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),No.typeOf.bool("options.skipColorSpaceConversion",t.skipColorSpaceConversion),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none",colorSpaceConversion:t.skipColorSpaceConversion?"none":"default"})};function k0(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}function KO(e,t,n,i,o,r,a){let s,u;Promise.all([import("url"),import("zlib")]).then(([l,d])=>(s=l.parse(e),u=d,s.protocol==="https:"?import("https"):import("http"))).then(l=>{let d={protocol:s.protocol,hostname:s.hostname,port:s.port,path:s.path,query:s.query,method:n,headers:o};l.request(d).on("response",function(f){if(f.statusCode<200||f.statusCode>=300){r.reject(new bs(f.statusCode,f,f.headers));return}let g=[];f.on("data",function(b){g.push(b)}),f.on("end",function(){let b=Buffer.concat(g);f.headers["content-encoding"]==="gzip"?u.gunzip(b,function(x,T){x?r.reject(new It("Error decompressing response.")):r.resolve(k0(T,t))}):r.resolve(k0(b,t))})}).on("error",function(f){r.reject(new bs)}).end()})}var YO=typeof XMLHttpRequest>"u";ve._Implementations.loadWithXhr=function(e,t,n,i,o,r,a){let s=qO.exec(e);if(s!==null){r.resolve(WO(s,t));return}if(YO){KO(e,t,n,i,o,r,a);return}let u=new XMLHttpRequest;if(xd.contains(e)&&(u.withCredentials=!0),u.open(n,e,!0),m(a)&&m(u.overrideMimeType)&&u.overrideMimeType(a),m(o))for(let d in o)o.hasOwnProperty(d)&&u.setRequestHeader(d,o[d]);m(t)&&(u.responseType=t);let l=!1;return typeof e=="string"&&(l=e.indexOf("file://")===0||typeof window<"u"&&window.location.origin==="file://"),u.onload=function(){if((u.status<200||u.status>=300)&&!(l&&u.status===0)){r.reject(new bs(u.status,u.response,u.getAllResponseHeaders()));return}let d=u.response,f=u.responseType;if(n==="HEAD"||n==="OPTIONS"){let b=u.getAllResponseHeaders().trim().split(/[\r\n]+/),x={};b.forEach(function(T){let R=T.split(": "),D=R.shift();x[D]=R.join(": ")}),r.resolve(x);return}if(u.status===204)r.resolve();else if(m(d)&&(!m(t)||f===t))r.resolve(d);else if(t==="json"&&typeof d=="string")try{r.resolve(JSON.parse(d))}catch(g){r.reject(g)}else(f===""||f==="document")&&m(u.responseXML)&&u.responseXML.hasChildNodes()?r.resolve(u.responseXML):(f===""||f==="text")&&m(u.responseText)?r.resolve(u.responseText):r.reject(new It("Invalid XMLHttpRequest response type."))},u.onerror=function(d){r.reject(new bs)},u.send(i),u};ve._Implementations.loadAndExecuteScript=function(e,t,n){return A0(e,t).catch(function(i){n.reject(i)})};ve._DefaultImplementations={};ve._DefaultImplementations.createImage=ve._Implementations.createImage;ve._DefaultImplementations.loadWithXhr=ve._Implementations.loadWithXhr;ve._DefaultImplementations.loadAndExecuteScript=ve._Implementations.loadAndExecuteScript;ve.DEFAULT=Object.freeze(new ve({url:typeof document>"u"?"":document.location.href.split("?")[0]}));var Gi=ve;function Ts(e){e=C(e,C.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._addNewLeapSeconds=C(e.addNewLeapSeconds,!0),m(e.data)?H0(this,e.data):H0(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}Ts.fromUrl=async function(e,t){t=C(t,C.EMPTY_OBJECT);let n=Gi.createIfNeeded(e),i;try{i=await n.fetchJson()}catch{throw new It(`An error occurred while retrieving the EOP data from the URL ${n.url}.`)}return new Ts({addNewLeapSeconds:t.addNewLeapSeconds,data:i})};Ts.NONE=Object.freeze({compute:function(e,t){return m(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new vs(0,0,0,0,0),t}});Ts.prototype.compute=function(e,t){if(!m(this._samples))return;if(m(t)||(t=new vs(0,0,0,0,0)),this._samples.length===0)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;let n=this._dates,i=this._lastIndex,o=0,r=0;if(m(i)){let s=n[i],u=n[i+1],l=cn.lessThanOrEquals(s,e),d=!m(u),f=d||cn.greaterThanOrEquals(u,e);if(l&&f)return o=i,!d&&u.equals(e)&&++o,r=o+1,W0(this,n,this._samples,e,o,r,t),t}let a=gr(n,e,cn.compare,this._dateColumn);return a>=0?(a<n.length-1&&n[a+1].equals(e)&&++a,o=a,r=a):(r=~a,o=r-1,o<0&&(o=0)),this._lastIndex=o,W0(this,n,this._samples,e,o,r,t),t};function ZO(e,t){return cn.compare(e.julianDate,t)}function H0(e,t){if(!m(t.columnNames))throw new It("Error in loaded EOP data: The columnNames property is required.");if(!m(t.samples))throw new It("Error in loaded EOP data: The samples property is required.");let n=t.columnNames.indexOf("modifiedJulianDateUtc"),i=t.columnNames.indexOf("xPoleWanderRadians"),o=t.columnNames.indexOf("yPoleWanderRadians"),r=t.columnNames.indexOf("ut1MinusUtcSeconds"),a=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||i<0||o<0||r<0||a<0||s<0||u<0)throw new It("Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns");let l=e._samples=t.samples,d=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=i,e._yPoleWanderRadiansColumn=o,e._ut1MinusUtcSecondsColumn=r,e._xCelestialPoleOffsetRadiansColumn=a,e._yCelestialPoleOffsetRadiansColumn=s,e._taiMinusUtcSecondsColumn=u,e._columnCount=t.columnNames.length,e._lastIndex=void 0;let f,g=e._addNewLeapSeconds;for(let b=0,x=l.length;b<x;b+=e._columnCount){let T=l[b+n],R=l[b+u],D=T+wt.MODIFIED_JULIAN_DATE_DIFFERENCE,M=new cn(D,R,Ze.TAI);if(d.push(M),g){if(R!==f&&m(f)){let N=cn.leapSeconds,V=gr(N,M,ZO);if(V<0){let q=new gt(M,R);N.splice(~V,0,q)}}f=R}}}function q0(e,t,n,i,o){let r=n*i;o.xPoleWander=t[r+e._xPoleWanderRadiansColumn],o.yPoleWander=t[r+e._yPoleWanderRadiansColumn],o.xPoleOffset=t[r+e._xCelestialPoleOffsetRadiansColumn],o.yPoleOffset=t[r+e._yCelestialPoleOffsetRadiansColumn],o.ut1MinusUtc=t[r+e._ut1MinusUtcSecondsColumn]}function Cs(e,t,n){return t+e*(n-t)}function W0(e,t,n,i,o,r,a){let s=e._columnCount;if(r>t.length-1)return a.xPoleWander=0,a.yPoleWander=0,a.xPoleOffset=0,a.yPoleOffset=0,a.ut1MinusUtc=0,a;let u=t[o],l=t[r];if(u.equals(l)||i.equals(u))return q0(e,n,o,s,a),a;if(i.equals(l))return q0(e,n,r,s,a),a;let d=cn.secondsDifference(i,u)/cn.secondsDifference(l,u),f=o*s,g=r*s,b=n[f+e._ut1MinusUtcSecondsColumn],x=n[g+e._ut1MinusUtcSecondsColumn],T=x-b;if(T>.5||T<-.5){let R=n[f+e._taiMinusUtcSecondsColumn],D=n[g+e._taiMinusUtcSecondsColumn];R!==D&&(l.equals(i)?b=x:x-=D-R)}return a.xPoleWander=Cs(d,n[f+e._xPoleWanderRadiansColumn],n[g+e._xPoleWanderRadiansColumn]),a.yPoleWander=Cs(d,n[f+e._yPoleWanderRadiansColumn],n[g+e._yPoleWanderRadiansColumn]),a.xPoleOffset=Cs(d,n[f+e._xCelestialPoleOffsetRadiansColumn],n[g+e._xCelestialPoleOffsetRadiansColumn]),a.yPoleOffset=Cs(d,n[f+e._yCelestialPoleOffsetRadiansColumn],n[g+e._yCelestialPoleOffsetRadiansColumn]),a.ut1MinusUtc=Cs(d,b,x),a}var K0=Ts;function Sn(e,t,n){this.heading=C(e,0),this.pitch=C(t,0),this.roll=C(n,0)}Sn.fromQuaternion=function(e,t){m(t)||(t=new Sn);let n=2*(e.w*e.y-e.z*e.x),i=1-2*(e.x*e.x+e.y*e.y),o=2*(e.w*e.x+e.y*e.z),r=1-2*(e.y*e.y+e.z*e.z),a=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(a,r),t.roll=Math.atan2(o,i),t.pitch=-j.asinClamped(n),t};Sn.fromDegrees=function(e,t,n,i){return m(i)||(i=new Sn),i.heading=e*j.RADIANS_PER_DEGREE,i.pitch=t*j.RADIANS_PER_DEGREE,i.roll=n*j.RADIANS_PER_DEGREE,i};Sn.clone=function(e,t){if(m(e))return m(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new Sn(e.heading,e.pitch,e.roll)};Sn.equals=function(e,t){return e===t||m(e)&&m(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll};Sn.equalsEpsilon=function(e,t,n,i){return e===t||m(e)&&m(t)&&j.equalsEpsilon(e.heading,t.heading,n,i)&&j.equalsEpsilon(e.pitch,t.pitch,n,i)&&j.equalsEpsilon(e.roll,t.roll,n,i)};Sn.prototype.clone=function(e){return Sn.clone(this,e)};Sn.prototype.equals=function(e){return Sn.equals(this,e)};Sn.prototype.equalsEpsilon=function(e,t,n){return Sn.equalsEpsilon(this,e,t,n)};Sn.prototype.toString=function(){return`(${this.heading}, ${this.pitch}, ${this.roll})`};var Td=Sn;var Y0=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function JO(){let e=document.getElementsByTagName("script");for(let t=0,n=e.length;t<n;++t){let i=e[t].getAttribute("src"),o=Y0.exec(i);if(o!==null)return o[1]}}var ba;function Z0(e){return typeof document>"u"?e:(m(ba)||(ba=document.createElement("a")),ba.href=e,ba.href=ba.href,ba.href)}var vr;function J0(){if(m(vr))return vr;let e;return typeof CESIUM_BASE_URL<"u"?e=CESIUM_BASE_URL:typeof define=="object"&&m(define.amd)&&!define.amd.toUrlUndefined&&m(require.toUrl)?e=ou("..",br("Core/buildModuleUrl.js")):e=JO(),vr=new Gi({url:Z0(e)}),vr.appendForwardSlash(),vr}function XO(e){return Z0(require.toUrl(`../${e}`))}function X0(e){return J0().getDerivedResource({url:e}).url}var hu;function br(e){return m(hu)||(typeof define=="object"&&m(define.amd)&&!define.amd.toUrlUndefined&&m(require.toUrl)?hu=XO:hu=X0),hu(e)}br._cesiumScriptRegex=Y0;br._buildModuleUrlFromBaseUrl=X0;br._clearBaseResource=function(){vr=void 0};br.setBaseUrl=function(e){vr=Gi.DEFAULT.getDerivedResource({url:e})};br.getCesiumBaseUrl=J0;var fo=br;function $O(e,t,n){this.x=e,this.y=t,this.s=n}var gu=$O;function Ad(e){e=C(e,C.EMPTY_OBJECT),this._xysFileUrlTemplate=Gi.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=C(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=C(e.sampleZeroJulianEphemerisDate,24423965e-1),this._sampleZeroDateTT=new cn(this._sampleZeroJulianEphemerisDate,0,Ze.TAI),this._stepSizeDays=C(e.stepSizeDays,1),this._samplesPerXysFile=C(e.samplesPerXysFile,1e3),this._totalSamples=C(e.totalSamples,27426),this._samples=new Array(this._totalSamples*3),this._chunkDownloadsInProgress=[];let t=this._interpolationOrder,n=this._denominators=new Array(t+1),i=this._xTable=new Array(t+1),o=Math.pow(this._stepSizeDays,t);for(let r=0;r<=t;++r){n[r]=o,i[r]=r*this._stepSizeDays;for(let a=0;a<=t;++a)a!==r&&(n[r]*=r-a);n[r]=1/n[r]}this._work=new Array(t+1),this._coef=new Array(t+1)}var QO=new cn(0,0,Ze.TAI);function wd(e,t,n){let i=QO;return i.dayNumber=t,i.secondsOfDay=n,cn.daysDifference(i,e._sampleZeroDateTT)}Ad.prototype.preload=function(e,t,n,i){let o=wd(this,e,t),r=wd(this,n,i),a=o/this._stepSizeDays-this._interpolationOrder/2|0;a<0&&(a=0);let s=r/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;s>=this._totalSamples&&(s=this._totalSamples-1);let u=a/this._samplesPerXysFile|0,l=s/this._samplesPerXysFile|0,d=[];for(let f=u;f<=l;++f)d.push(Sd(this,f));return Promise.all(d)};Ad.prototype.computeXysRadians=function(e,t,n){let i=wd(this,e,t);if(i<0)return;let o=i/this._stepSizeDays|0;if(o>=this._totalSamples)return;let r=this._interpolationOrder,a=o-(r/2|0);a<0&&(a=0);let s=a+r;s>=this._totalSamples&&(s=this._totalSamples-1,a=s-r,a<0&&(a=0));let u=!1,l=this._samples;if(m(l[a*3])||(Sd(this,a/this._samplesPerXysFile|0),u=!0),m(l[s*3])||(Sd(this,s/this._samplesPerXysFile|0),u=!0),u)return;m(n)?(n.x=0,n.y=0,n.s=0):n=new gu(0,0,0);let d=i-a*this._stepSizeDays,f=this._work,g=this._denominators,b=this._coef,x=this._xTable,T,R;for(T=0;T<=r;++T)f[T]=d-x[T];for(T=0;T<=r;++T){for(b[T]=1,R=0;R<=r;++R)R!==T&&(b[T]*=f[R]);b[T]*=g[T];let D=(a+T)*3;n.x+=b[T]*l[D++],n.y+=b[T]*l[D++],n.s+=b[T]*l[D]}return n};function Sd(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];let n,i=e._xysFileUrlTemplate;m(i)?n=i.getDerivedResource({templateValues:{0:t}}):n=new Gi({url:fo(`Assets/IAU2006_XYS/IAU2006_XYS_${t}.json`)});let o=n.fetchJson().then(function(r){e._chunkDownloadsInProgress[t]=!1;let a=e._samples,s=r.samples,u=t*e._samplesPerXysFile*3;for(let l=0,d=s.length;l<d;++l)a[u+l]=s[l]});return e._chunkDownloadsInProgress[t]=o,o}var $0=Ad;var ct={},Rd={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},xa={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Od={},Hn={east:new h,north:new h,up:new h,west:new h,south:new h,down:new h},Uo=new h,ko=new h,Vo=new h;ct.localFrameToFixedFrameGenerator=function(e,t){if(!Rd.hasOwnProperty(e)||!Rd[e].hasOwnProperty(t))throw new fn("firstAxis and secondAxis must be east, north, up, west, south or down.");let n=Rd[e][t],i,o=e+t;return m(Od[o])?i=Od[o]:(i=function(r,a,s){if(m(s)||(s=new fe),h.equalsEpsilon(r,h.ZERO,j.EPSILON14))h.unpack(xa[e],0,Uo),h.unpack(xa[t],0,ko),h.unpack(xa[n],0,Vo);else if(j.equalsEpsilon(r.x,0,j.EPSILON14)&&j.equalsEpsilon(r.y,0,j.EPSILON14)){let u=j.sign(r.z);h.unpack(xa[e],0,Uo),e!=="east"&&e!=="west"&&h.multiplyByScalar(Uo,u,Uo),h.unpack(xa[t],0,ko),t!=="east"&&t!=="west"&&h.multiplyByScalar(ko,u,ko),h.unpack(xa[n],0,Vo),n!=="east"&&n!=="west"&&h.multiplyByScalar(Vo,u,Vo)}else{a=C(a,Dn.WGS84),a.geodeticSurfaceNormal(r,Hn.up);let u=Hn.up,l=Hn.east;l.x=-r.y,l.y=r.x,l.z=0,h.normalize(l,Hn.east),h.cross(u,l,Hn.north),h.multiplyByScalar(Hn.up,-1,Hn.down),h.multiplyByScalar(Hn.east,-1,Hn.west),h.multiplyByScalar(Hn.north,-1,Hn.south),Uo=Hn[e],ko=Hn[t],Vo=Hn[n]}return s[0]=Uo.x,s[1]=Uo.y,s[2]=Uo.z,s[3]=0,s[4]=ko.x,s[5]=ko.y,s[6]=ko.z,s[7]=0,s[8]=Vo.x,s[9]=Vo.y,s[10]=Vo.z,s[11]=0,s[12]=r.x,s[13]=r.y,s[14]=r.z,s[15]=1,s},Od[o]=i),i};ct.eastNorthUpToFixedFrame=ct.localFrameToFixedFrameGenerator("east","north");ct.northEastDownToFixedFrame=ct.localFrameToFixedFrameGenerator("north","east");ct.northUpEastToFixedFrame=ct.localFrameToFixedFrameGenerator("north","up");ct.northWestUpToFixedFrame=ct.localFrameToFixedFrameGenerator("north","west");var eI=new Ui,tI=new h(1,1,1),nI=new fe;ct.headingPitchRollToFixedFrame=function(e,t,n,i,o){i=C(i,ct.eastNorthUpToFixedFrame);let r=Ui.fromHeadingPitchRoll(t,eI),a=fe.fromTranslationQuaternionRotationScale(h.ZERO,r,tI,nI);return o=i(e,n,o),fe.multiply(o,a,o)};var iI=new fe,oI=new _e;ct.headingPitchRollQuaternion=function(e,t,n,i,o){let r=ct.headingPitchRollToFixedFrame(e,t,n,i,iI),a=fe.getMatrix3(r,oI);return Ui.fromRotationMatrix(a,o)};var rI=new h(1,1,1),aI=new h,Q0=new fe,sI=new fe,cI=new _e,uI=new Ui;ct.fixedFrameToHeadingPitchRoll=function(e,t,n,i){t=C(t,Dn.WGS84),n=C(n,ct.eastNorthUpToFixedFrame),m(i)||(i=new Td);let o=fe.getTranslation(e,aI);if(h.equals(o,h.ZERO))return i.heading=0,i.pitch=0,i.roll=0,i;let r=fe.inverseTransformation(n(o,t,Q0),Q0),a=fe.setScale(e,rI,sI);a=fe.setTranslation(a,h.ZERO,a),r=fe.multiply(r,a,r);let s=Ui.fromRotationMatrix(fe.getMatrix3(r,cI),uI);return s=Ui.normalize(s,s),Td.fromQuaternion(s,i)};var lI=6*3600+41*60+50.54841,pI=8640184812866e-6,dI=.093104,fI=-62e-7,mI=11772758384668e-32,hI=72921158553e-15,gI=j.TWO_PI/86400,_u=new cn;ct.computeTemeToPseudoFixedMatrix=function(e,t){_u=cn.addSeconds(e,-cn.computeTaiMinusUtc(e),_u);let n=_u.dayNumber,i=_u.secondsOfDay,o,r=n-2451545;i>=43200?o=(r+.5)/wt.DAYS_PER_JULIAN_CENTURY:o=(r-.5)/wt.DAYS_PER_JULIAN_CENTURY;let s=(lI+o*(pI+o*(dI+o*fI)))*gI%j.TWO_PI,u=hI+mI*(n-24515455e-1),l=(i+wt.SECONDS_PER_DAY*.5)%wt.SECONDS_PER_DAY,d=s+u*l,f=Math.cos(d),g=Math.sin(d);return m(t)?(t[0]=f,t[1]=-g,t[2]=0,t[3]=g,t[4]=f,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new _e(f,g,0,-g,f,0,0,0,1)};ct.iau2006XysData=new $0;ct.earthOrientationParameters=K0.NONE;var Dd=32.184,_I=2451545;ct.preloadIcrfFixed=function(e){let t=e.start.dayNumber,n=e.start.secondsOfDay+Dd,i=e.stop.dayNumber,o=e.stop.secondsOfDay+Dd;return ct.iau2006XysData.preload(t,n,i,o)};ct.computeIcrfToFixedMatrix=function(e,t){m(t)||(t=new _e);let n=ct.computeFixedToIcrfMatrix(e,t);if(m(n))return _e.transpose(n,t)};var yI=new gu(0,0,0),vI=new vs(0,0,0,0,0,0),Id=new _e,Pd=new _e;ct.computeFixedToIcrfMatrix=function(e,t){m(t)||(t=new _e);let n=ct.earthOrientationParameters.compute(e,vI);if(!m(n))return;let i=e.dayNumber,o=e.secondsOfDay+Dd,r=ct.iau2006XysData.computeXysRadians(i,o,yI);if(!m(r))return;let a=r.x+n.xPoleOffset,s=r.y+n.yPoleOffset,u=1/(1+Math.sqrt(1-a*a-s*s)),l=Id;l[0]=1-u*a*a,l[3]=-u*a*s,l[6]=a,l[1]=-u*a*s,l[4]=1-u*s*s,l[7]=s,l[2]=-a,l[5]=-s,l[8]=1-u*(a*a+s*s);let d=_e.fromRotationZ(-r.s,Pd),f=_e.multiply(l,d,Id),g=e.dayNumber,b=e.secondsOfDay-cn.computeTaiMinusUtc(e)+n.ut1MinusUtc,x=g-2451545,T=b/wt.SECONDS_PER_DAY,R=.779057273264+T+.00273781191135448*(x+T);R=R%1*j.TWO_PI;let D=_e.fromRotationZ(R,Pd),M=_e.multiply(f,D,Id),N=Math.cos(n.xPoleWander),V=Math.cos(n.yPoleWander),q=Math.sin(n.xPoleWander),_=Math.sin(n.yPoleWander),ee=i-_I+o/wt.SECONDS_PER_DAY;ee/=36525;let Z=-47e-6*ee*j.RADIANS_PER_DEGREE/3600,J=Math.cos(Z),H=Math.sin(Z),te=Pd;return te[0]=N*J,te[1]=N*H,te[2]=q,te[3]=-V*H+_*q*J,te[4]=V*J+_*q*H,te[5]=-_*N,te[6]=-_*H-V*q*J,te[7]=_*J-V*q*H,te[8]=V*N,_e.multiply(M,te,t)};var bI=new De;ct.pointToWindowCoordinates=function(e,t,n,i){return i=ct.pointToGLWindowCoordinates(e,t,n,i),i.y=2*t[5]-i.y,i};ct.pointToGLWindowCoordinates=function(e,t,n,i){m(i)||(i=new Ce);let o=bI;return fe.multiplyByVector(e,De.fromElements(n.x,n.y,n.z,1,o),o),De.multiplyByScalar(o,1/o.w,o),fe.multiplyByVector(t,o,o),Ce.fromCartesian4(o,i)};var xI=new h,EI=new h,CI=new h;ct.rotationMatrixFromPositionVelocity=function(e,t,n,i){let o=C(n,Dn.WGS84).geodeticSurfaceNormal(e,xI),r=h.cross(t,o,EI);h.equalsEpsilon(r,h.ZERO,j.EPSILON6)&&(r=h.clone(h.UNIT_X,r));let a=h.cross(r,t,CI);return h.normalize(a,a),h.cross(t,a,r),h.negate(r,r),h.normalize(r,r),m(i)||(i=new _e),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=r.x,i[4]=r.y,i[5]=r.z,i[6]=a.x,i[7]=a.y,i[8]=a.z,i};var ey=new fe(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),ty=new rt,ny=new h,TI=new h,wI=new _e,Md=new fe,iy=new fe;ct.basisTo2D=function(e,t,n){let i=fe.getTranslation(t,TI),o=e.ellipsoid,r=o.cartesianToCartographic(i,ty),a=e.project(r,ny);h.fromElements(a.z,a.x,a.y,a);let s=ct.eastNorthUpToFixedFrame(i,o,Md),u=fe.inverseTransformation(s,iy),l=fe.getMatrix3(t,wI),d=fe.multiplyByMatrix3(u,l,n);return fe.multiply(ey,d,n),fe.setTranslation(n,a,n),n};ct.wgs84To2DModelMatrix=function(e,t,n){let i=e.ellipsoid,o=ct.eastNorthUpToFixedFrame(t,i,Md),r=fe.inverseTransformation(o,iy),a=i.cartesianToCartographic(t,ty),s=e.project(a,ny);h.fromElements(s.z,s.x,s.y,s);let u=fe.fromTranslation(s,Md);return fe.multiply(ey,r,n),fe.multiply(u,n,n),n};var oy=ct;function Nd(e){e=C(e,C.EMPTY_OBJECT),this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=C(e.primitiveType,bt.TRIANGLES),this.boundingSphere=e.boundingSphere,this.geometryType=C(e.geometryType,hr.NONE),this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}Nd.computeNumberOfVertices=function(e){let t=-1;for(let n in e.attributes)if(e.attributes.hasOwnProperty(n)&&m(e.attributes[n])&&m(e.attributes[n].values)){let i=e.attributes[n];t=i.values.length/i.componentsPerAttribute}return t};var SI=new rt,AI=new h,ry=new fe,RI=[new rt,new rt,new rt],OI=[new Ce,new Ce,new Ce],II=[new Ce,new Ce,new Ce],PI=new h,DI=new Ui,MI=new fe,NI=new Gn;Nd._textureCoordinateRotationPoints=function(e,t,n,i){let o,r=so.center(i,SI),a=rt.toCartesian(r,n,AI),s=oy.eastNorthUpToFixedFrame(a,n,ry),u=fe.inverse(s,ry),l=OI,d=RI;d[0].longitude=i.west,d[0].latitude=i.south,d[1].longitude=i.west,d[1].latitude=i.north,d[2].longitude=i.east,d[2].latitude=i.south;let f=PI;for(o=0;o<3;o++)rt.toCartesian(d[o],n,f),f=fe.multiplyByPointAsVector(u,f,f),l[o].x=f.x,l[o].y=f.y;let g=Ui.fromAxisAngle(h.UNIT_Z,-t,DI),b=_e.fromQuaternion(g,MI),x=e.length,T=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY,D=Number.NEGATIVE_INFINITY,M=Number.NEGATIVE_INFINITY;for(o=0;o<x;o++)f=fe.multiplyByPointAsVector(u,e[o],f),f=_e.multiplyByVector(b,f,f),T=Math.min(T,f.x),R=Math.min(R,f.y),D=Math.max(D,f.x),M=Math.max(M,f.y);let N=Gn.fromRotation(t,NI),V=II;V[0].x=T,V[0].y=R,V[1].x=T,V[1].y=M,V[2].x=D,V[2].y=R;let q=l[0],_=l[2].x-q.x,ee=l[1].y-q.y;for(o=0;o<3;o++){let y=V[o];Gn.multiplyByVector(N,y,y),y.x=(y.x-q.x)/_,y.y=(y.y-q.y)/ee}let Z=V[0],J=V[1],H=V[2],te=new Array(6);return Ce.pack(Z,te),Ce.pack(J,te,2),Ce.pack(H,te,4),te};var Ot=Nd;function LI(e){e=C(e,C.EMPTY_OBJECT),this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=C(e.normalize,!1),this.values=e.values}var Dt=LI;function zI(e){e=C(e,C.EMPTY_OBJECT),this.position=e.position,this.normal=e.normal,this.st=e.st,this.bitangent=e.bitangent,this.tangent=e.tangent,this.color=e.color}var Ea=zI;var BI={NONE:0,TOP:1,ALL:2},ws=Object.freeze(BI);function en(e,t){this.normal=h.clone(e),this.distance=t}en.fromPointNormal=function(e,t,n){let i=-h.dot(t,e);return m(n)?(h.clone(t,n.normal),n.distance=i,n):new en(t,i)};var FI=new h;en.fromCartesian4=function(e,t){let n=h.fromCartesian4(e,FI),i=e.w;return m(t)?(h.clone(n,t.normal),t.distance=i,t):new en(n,i)};en.getPointDistance=function(e,t){return h.dot(e.normal,t)+e.distance};var UI=new h;en.projectPointOntoPlane=function(e,t,n){m(n)||(n=new h);let i=en.getPointDistance(e,t),o=h.multiplyByScalar(e.normal,i,UI);return h.subtract(t,o,n)};var kI=new fe,VI=new De,jI=new h;en.transform=function(e,t,n){let i=e.normal,o=e.distance,r=fe.inverseTranspose(t,kI),a=De.fromElements(i.x,i.y,i.z,o,VI);a=fe.multiplyByVector(r,a,a);let s=h.fromCartesian4(a,jI);return a=De.divideByScalar(a,h.magnitude(s),a),en.fromCartesian4(a,n)};en.clone=function(e,t){return m(t)?(h.clone(e.normal,t.normal),t.distance=e.distance,t):new en(e.normal,e.distance)};en.equals=function(e,t){return e.distance===t.distance&&h.equals(e.normal,t.normal)};en.ORIGIN_XY_PLANE=Object.freeze(new en(h.UNIT_Z,0));en.ORIGIN_YZ_PLANE=Object.freeze(new en(h.UNIT_X,0));en.ORIGIN_ZX_PLANE=Object.freeze(new en(h.UNIT_Y,0));var Ss=en;function GI(e,t){let n=[],i=e.length,o=0;for(;o<i;){let r=Math.ceil((i-o)/t--);n.push(e.slice(o,o+r)),o+=r}return n}var ay=GI;var sy=Ct(Fo(),1);function cy(){if(!m(hn._canTransferArrayBuffer)){let e=new Worker(ly("Workers/transferTypedArrayTest.js"));e.postMessage=C(e.webkitPostMessage,e.postMessage);let t=99,n=new Int8Array([t]);try{e.postMessage({array:n},[n.buffer])}catch{return hn._canTransferArrayBuffer=!1,hn._canTransferArrayBuffer}let i=xi();e.onmessage=function(o){let r=o.data.array,a=m(r)&&r[0]===t;i.resolve(a),e.terminate(),hn._canTransferArrayBuffer=a},hn._canTransferArrayBuffer=i.promise}return hn._canTransferArrayBuffer}var zd=new uu;function uy(e,t){--e._activeTasks;let n=t.id;if(!m(n))return;let i=e._deferreds,o=i[n];if(m(t.error)){let r=t.error;r.name==="RuntimeError"?(r=new It(t.error.message),r.stack=t.error.stack):r.name==="DeveloperError"&&(r=new fn(t.error.message),r.stack=t.error.stack),zd.raiseEvent(r),o.reject(r)}else zd.raiseEvent(),o.resolve(t.result);delete i[n]}function ly(e){let t=fo(e);if(au(t)){let n=`importScripts("${t}");`,i;try{i=new Blob([n],{type:"application/javascript"})}catch{let a=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,s=new a;s.append(n),i=s.getBlob("application/javascript")}t=(window.URL||window.webkitURL).createObjectURL(i)}return t}var Ld;function HI(){return m(Ld)||(Ld=ly("Workers/cesiumWorkerBootstrapper.js")),Ld}function py(e){let t=new Worker(HI());t.postMessage=C(t.webkitPostMessage,t.postMessage);let n={loaderConfig:{paths:{Workers:fo("Workers")},baseUrl:fo.getCesiumBaseUrl().url},workerModule:e._workerPath};return t.postMessage(n),t.onmessage=function(i){uy(e,i.data)},t}function qI(e,t){let n={modulePath:void 0,wasmBinaryFile:void 0,wasmBinary:void 0};if(!yi.supportsWebAssembly()){if(!m(t.fallbackModulePath))throw new It(`This browser does not support Web Assembly, and no backup module was provided for ${e._workerPath}`);return n.modulePath=fo(t.fallbackModulePath),Promise.resolve(n)}return n.modulePath=fo(t.modulePath),n.wasmBinaryFile=fo(t.wasmBinaryFile),Gi.fetchArrayBuffer({url:n.wasmBinaryFile}).then(function(i){return n.wasmBinary=i,n})}function hn(e,t){let n=new sy.default(e);this._workerPath=n.scheme().length!==0&&n.fragment().length===0?e:hn._workerModulePrefix+e,this._maximumActiveTasks=C(t,Number.POSITIVE_INFINITY),this._activeTasks=0,this._deferreds={},this._nextID=0}var WI=[];hn.prototype.scheduleTask=function(e,t){if(m(this._worker)||(this._worker=py(this)),this._activeTasks>=this._maximumActiveTasks)return;++this._activeTasks;let n=this;return Promise.resolve(cy()).then(function(i){m(t)?i||(t.length=0):t=WI;let o=n._nextID++,r=xi();return n._deferreds[o]=r,n._worker.postMessage({id:o,parameters:e,canTransferArrayBuffer:i},t),r.promise})};hn.prototype.initWebAssemblyModule=function(e){m(this._worker)||(this._worker=py(this));let t=xi(),n=this,i=this._worker;return qI(this,e).then(function(o){return Promise.resolve(cy()).then(function(r){let a,s=o.wasmBinary;m(s)&&r&&(a=[s]),i.onmessage=function(u){i.onmessage=function(l){uy(n,l.data)},t.resolve(u.data)},i.postMessage({webAssemblyConfig:o},a)})}),t.promise};hn.prototype.isDestroyed=function(){return!1};hn.prototype.destroy=function(){return m(this._worker)&&this._worker.terminate(),jn(this)};hn.taskCompletedEvent=zd;hn._defaultWorkerModulePrefix="Workers/";hn._workerModulePrefix=hn._defaultWorkerModulePrefix;hn._canTransferArrayBuffer=void 0;var Bd=hn;var yu={STREAM_DRAW:z.STREAM_DRAW,STATIC_DRAW:z.STATIC_DRAW,DYNAMIC_DRAW:z.DYNAMIC_DRAW,validate:function(e){return e===yu.STREAM_DRAW||e===yu.STATIC_DRAW||e===yu.DYNAMIC_DRAW}},vu=Object.freeze(yu);var zt={CULL:1,OCCLUDE:2,EXECUTE_IN_CLOSEST_FRUSTUM:4,DEBUG_SHOW_BOUNDING_VOLUME:8,CAST_SHADOWS:16,RECEIVE_SHADOWS:32,PICK_ONLY:64,DEPTH_FOR_TRANSLUCENT_CLASSIFICATION:128};function As(e){e=C(e,C.EMPTY_OBJECT),this._boundingVolume=e.boundingVolume,this._orientedBoundingBox=e.orientedBoundingBox,this._modelMatrix=e.modelMatrix,this._primitiveType=C(e.primitiveType,bt.TRIANGLES),this._vertexArray=e.vertexArray,this._count=e.count,this._offset=C(e.offset,0),this._instanceCount=C(e.instanceCount,0),this._shaderProgram=e.shaderProgram,this._uniformMap=e.uniformMap,this._renderState=e.renderState,this._framebuffer=e.framebuffer,this._pass=e.pass,this._owner=e.owner,this._debugOverlappingFrustums=0,this._pickId=e.pickId,this._flags=0,this.cull=C(e.cull,!0),this.occlude=C(e.occlude,!0),this.executeInClosestFrustum=C(e.executeInClosestFrustum,!1),this.debugShowBoundingVolume=C(e.debugShowBoundingVolume,!1),this.castShadows=C(e.castShadows,!1),this.receiveShadows=C(e.receiveShadows,!1),this.pickOnly=C(e.pickOnly,!1),this.depthForTranslucentClassification=C(e.depthForTranslucentClassification,!1),this.dirty=!0,this.lastDirtyTime=0,this.derivedCommands={}}function An(e,t){return(e._flags&t)===t}function jo(e,t,n){n?e._flags|=t:e._flags&=~t}Object.defineProperties(As.prototype,{boundingVolume:{get:function(){return this._boundingVolume},set:function(e){this._boundingVolume!==e&&(this._boundingVolume=e,this.dirty=!0)}},orientedBoundingBox:{get:function(){return this._orientedBoundingBox},set:function(e){this._orientedBoundingBox!==e&&(this._orientedBoundingBox=e,this.dirty=!0)}},cull:{get:function(){return An(this,zt.CULL)},set:function(e){An(this,zt.CULL)!==e&&(jo(this,zt.CULL,e),this.dirty=!0)}},occlude:{get:function(){return An(this,zt.OCCLUDE)},set:function(e){An(this,zt.OCCLUDE)!==e&&(jo(this,zt.OCCLUDE,e),this.dirty=!0)}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix!==e&&(this._modelMatrix=e,this.dirty=!0)}},primitiveType:{get:function(){return this._primitiveType},set:function(e){this._primitiveType!==e&&(this._primitiveType=e,this.dirty=!0)}},vertexArray:{get:function(){return this._vertexArray},set:function(e){this._vertexArray!==e&&(this._vertexArray=e,this.dirty=!0)}},count:{get:function(){return this._count},set:function(e){this._count!==e&&(this._count=e,this.dirty=!0)}},offset:{get:function(){return this._offset},set:function(e){this._offset!==e&&(this._offset=e,this.dirty=!0)}},instanceCount:{get:function(){return this._instanceCount},set:function(e){this._instanceCount!==e&&(this._instanceCount=e,this.dirty=!0)}},shaderProgram:{get:function(){return this._shaderProgram},set:function(e){this._shaderProgram!==e&&(this._shaderProgram=e,this.dirty=!0)}},castShadows:{get:function(){return An(this,zt.CAST_SHADOWS)},set:function(e){An(this,zt.CAST_SHADOWS)!==e&&(jo(this,zt.CAST_SHADOWS,e),this.dirty=!0)}},receiveShadows:{get:function(){return An(this,zt.RECEIVE_SHADOWS)},set:function(e){An(this,zt.RECEIVE_SHADOWS)!==e&&(jo(this,zt.RECEIVE_SHADOWS,e),this.dirty=!0)}},uniformMap:{get:function(){return this._uniformMap},set:function(e){this._uniformMap!==e&&(this._uniformMap=e,this.dirty=!0)}},renderState:{get:function(){return this._renderState},set:function(e){this._renderState!==e&&(this._renderState=e,this.dirty=!0)}},framebuffer:{get:function(){return this._framebuffer},set:function(e){this._framebuffer!==e&&(this._framebuffer=e,this.dirty=!0)}},pass:{get:function(){return this._pass},set:function(e){this._pass!==e&&(this._pass=e,this.dirty=!0)}},executeInClosestFrustum:{get:function(){return An(this,zt.EXECUTE_IN_CLOSEST_FRUSTUM)},set:function(e){An(this,zt.EXECUTE_IN_CLOSEST_FRUSTUM)!==e&&(jo(this,zt.EXECUTE_IN_CLOSEST_FRUSTUM,e),this.dirty=!0)}},owner:{get:function(){return this._owner},set:function(e){this._owner!==e&&(this._owner=e,this.dirty=!0)}},debugShowBoundingVolume:{get:function(){return An(this,zt.DEBUG_SHOW_BOUNDING_VOLUME)},set:function(e){An(this,zt.DEBUG_SHOW_BOUNDING_VOLUME)!==e&&(jo(this,zt.DEBUG_SHOW_BOUNDING_VOLUME,e),this.dirty=!0)}},debugOverlappingFrustums:{get:function(){return this._debugOverlappingFrustums},set:function(e){this._debugOverlappingFrustums!==e&&(this._debugOverlappingFrustums=e,this.dirty=!0)}},pickId:{get:function(){return this._pickId},set:function(e){this._pickId!==e&&(this._pickId=e,this.dirty=!0)}},pickOnly:{get:function(){return An(this,zt.PICK_ONLY)},set:function(e){An(this,zt.PICK_ONLY)!==e&&(jo(this,zt.PICK_ONLY,e),this.dirty=!0)}},depthForTranslucentClassification:{get:function(){return An(this,zt.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION)},set:function(e){An(this,zt.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION)!==e&&(jo(this,zt.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION,e),this.dirty=!0)}}});As.shallowClone=function(e,t){if(m(e))return m(t)||(t=new As),t._boundingVolume=e._boundingVolume,t._orientedBoundingBox=e._orientedBoundingBox,t._modelMatrix=e._modelMatrix,t._primitiveType=e._primitiveType,t._vertexArray=e._vertexArray,t._count=e._count,t._offset=e._offset,t._instanceCount=e._instanceCount,t._shaderProgram=e._shaderProgram,t._uniformMap=e._uniformMap,t._renderState=e._renderState,t._framebuffer=e._framebuffer,t._pass=e._pass,t._owner=e._owner,t._debugOverlappingFrustums=e._debugOverlappingFrustums,t._pickId=e._pickId,t._flags=e._flags,t.dirty=!0,t.lastDirtyTime=0,t};As.prototype.execute=function(e,t){e.draw(this,t)};var Rs=As;var KI={ENVIRONMENT:0,COMPUTE:1,GLOBE:2,TERRAIN_CLASSIFICATION:3,CESIUM_3D_TILE:4,CESIUM_3D_TILE_CLASSIFICATION:5,CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW:6,OPAQUE:7,TRANSLUCENT:8,VOXELS:9,OVERLAY:10,NUMBER_OF_PASSES:11},Fd=Object.freeze(KI);function kt(e,t,n,i){this.x=C(e,0),this.y=C(t,0),this.width=C(n,0),this.height=C(i,0)}kt.packedLength=4;kt.pack=function(e,t,n){return n=C(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.width,t[n]=e.height,t};kt.unpack=function(e,t,n){return t=C(t,0),m(n)||(n=new kt),n.x=e[t++],n.y=e[t++],n.width=e[t++],n.height=e[t],n};kt.fromPoints=function(e,t){if(m(t)||(t=new kt),!m(e)||e.length===0)return t.x=0,t.y=0,t.width=0,t.height=0,t;let n=e.length,i=e[0].x,o=e[0].y,r=e[0].x,a=e[0].y;for(let s=1;s<n;s++){let u=e[s],l=u.x,d=u.y;i=Math.min(l,i),r=Math.max(l,r),o=Math.min(d,o),a=Math.max(d,a)}return t.x=i,t.y=o,t.width=r-i,t.height=a-o,t};var YI=new Bi,ZI=new rt,JI=new rt;kt.fromRectangle=function(e,t,n){if(m(n)||(n=new kt),!m(e))return n.x=0,n.y=0,n.width=0,n.height=0,n;t=C(t,YI);let i=t.project(so.southwest(e,ZI)),o=t.project(so.northeast(e,JI));return Ce.subtract(o,i,o),n.x=i.x,n.y=i.y,n.width=o.x,n.height=o.y,n};kt.clone=function(e,t){if(m(e))return m(t)?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):new kt(e.x,e.y,e.width,e.height)};kt.union=function(e,t,n){m(n)||(n=new kt);let i=Math.min(e.x,t.x),o=Math.min(e.y,t.y),r=Math.max(e.x+e.width,t.x+t.width),a=Math.max(e.y+e.height,t.y+t.height);return n.x=i,n.y=o,n.width=r-i,n.height=a-o,n};kt.expand=function(e,t,n){n=kt.clone(e,n);let i=t.x-n.x,o=t.y-n.y;return i>n.width?n.width=i:i<0&&(n.width-=i,n.x=t.x),o>n.height?n.height=o:o<0&&(n.height-=o,n.y=t.y),n};kt.intersect=function(e,t){let n=e.x,i=e.y,o=t.x,r=t.y;return n>o+t.width||n+e.width<o||i+e.height<r||i>r+t.height?vi.OUTSIDE:vi.INTERSECTING};kt.equals=function(e,t){return e===t||m(e)&&m(t)&&e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};kt.prototype.clone=function(e){return kt.clone(this,e)};kt.prototype.intersect=function(e){return kt.intersect(this,e)};kt.prototype.equals=function(e){return kt.equals(this,e)};var Ca=kt;var bu={CLOCKWISE:z.CW,COUNTER_CLOCKWISE:z.CCW};bu.validate=function(e){return e===bu.CLOCKWISE||e===bu.COUNTER_CLOCKWISE};var dy=Object.freeze(bu);function qi(e){let t=C(e,C.EMPTY_OBJECT),n=C(t.cull,C.EMPTY_OBJECT),i=C(t.polygonOffset,C.EMPTY_OBJECT),o=C(t.scissorTest,C.EMPTY_OBJECT),r=C(o.rectangle,C.EMPTY_OBJECT),a=C(t.depthRange,C.EMPTY_OBJECT),s=C(t.depthTest,C.EMPTY_OBJECT),u=C(t.colorMask,C.EMPTY_OBJECT),l=C(t.blending,C.EMPTY_OBJECT),d=C(l.color,C.EMPTY_OBJECT),f=C(t.stencilTest,C.EMPTY_OBJECT),g=C(f.frontOperation,C.EMPTY_OBJECT),b=C(f.backOperation,C.EMPTY_OBJECT),x=C(t.sampleCoverage,C.EMPTY_OBJECT),T=t.viewport;this.frontFace=C(t.frontFace,dy.COUNTER_CLOCKWISE),this.cull={enabled:C(n.enabled,!1),face:C(n.face,z.BACK)},this.lineWidth=C(t.lineWidth,1),this.polygonOffset={enabled:C(i.enabled,!1),factor:C(i.factor,0),units:C(i.units,0)},this.scissorTest={enabled:C(o.enabled,!1),rectangle:Ca.clone(r)},this.depthRange={near:C(a.near,0),far:C(a.far,1)},this.depthTest={enabled:C(s.enabled,!1),func:C(s.func,z.LESS)},this.colorMask={red:C(u.red,!0),green:C(u.green,!0),blue:C(u.blue,!0),alpha:C(u.alpha,!0)},this.depthMask=C(t.depthMask,!0),this.stencilMask=C(t.stencilMask,-1),this.blending={enabled:C(l.enabled,!1),color:new Et(C(d.red,0),C(d.green,0),C(d.blue,0),C(d.alpha,0)),equationRgb:C(l.equationRgb,z.FUNC_ADD),equationAlpha:C(l.equationAlpha,z.FUNC_ADD),functionSourceRgb:C(l.functionSourceRgb,z.ONE),functionSourceAlpha:C(l.functionSourceAlpha,z.ONE),functionDestinationRgb:C(l.functionDestinationRgb,z.ZERO),functionDestinationAlpha:C(l.functionDestinationAlpha,z.ZERO)},this.stencilTest={enabled:C(f.enabled,!1),frontFunction:C(f.frontFunction,z.ALWAYS),backFunction:C(f.backFunction,z.ALWAYS),reference:C(f.reference,0),mask:C(f.mask,-1),frontOperation:{fail:C(g.fail,z.KEEP),zFail:C(g.zFail,z.KEEP),zPass:C(g.zPass,z.KEEP)},backOperation:{fail:C(b.fail,z.KEEP),zFail:C(b.zFail,z.KEEP),zPass:C(b.zPass,z.KEEP)}},this.sampleCoverage={enabled:C(x.enabled,!1),value:C(x.value,1),invert:C(x.invert,!1)},this.viewport=m(T)?new Ca(T.x,T.y,T.width,T.height):void 0,this.id=0,this._applyFunctions=[]}var XI=0,Hi={};qi.fromCache=function(e){let t=JSON.stringify(e),n=Hi[t];if(m(n))return++n.referenceCount,n.state;let i=new qi(e),o=JSON.stringify(i);return n=Hi[o],m(n)||(i.id=XI++,n={referenceCount:0,state:i},Hi[o]=n),++n.referenceCount,Hi[t]={referenceCount:1,state:n.state},n.state};qi.removeFromCache=function(e){let t=new qi(e),n=JSON.stringify(t),i=Hi[n],o=JSON.stringify(e),r=Hi[o];m(r)&&(--r.referenceCount,r.referenceCount===0&&(delete Hi[o],m(i)&&--i.referenceCount)),m(i)&&i.referenceCount===0&&delete Hi[n]};qi.getCache=function(){return Hi};qi.clearCache=function(){Hi={}};function xr(e,t,n){n?e.enable(t):e.disable(t)}function fy(e,t){e.frontFace(t.frontFace)}function my(e,t){let n=t.cull,i=n.enabled;xr(e,e.CULL_FACE,i),i&&e.cullFace(n.face)}function hy(e,t){e.lineWidth(t.lineWidth)}function gy(e,t){let n=t.polygonOffset,i=n.enabled;xr(e,e.POLYGON_OFFSET_FILL,i),i&&e.polygonOffset(n.factor,n.units)}function _y(e,t,n){let i=t.scissorTest,o=m(n.scissorTest)?n.scissorTest.enabled:i.enabled;if(xr(e,e.SCISSOR_TEST,o),o){let r=m(n.scissorTest)?n.scissorTest.rectangle:i.rectangle;e.scissor(r.x,r.y,r.width,r.height)}}function yy(e,t){let n=t.depthRange;e.depthRange(n.near,n.far)}function vy(e,t){let n=t.depthTest,i=n.enabled;xr(e,e.DEPTH_TEST,i),i&&e.depthFunc(n.func)}function by(e,t){let n=t.colorMask;e.colorMask(n.red,n.green,n.blue,n.alpha)}function xy(e,t){e.depthMask(t.depthMask)}function Ey(e,t){e.stencilMask(t.stencilMask)}function $I(e,t){e.blendColor(t.red,t.green,t.blue,t.alpha)}function Cy(e,t,n){let i=t.blending,o=m(n.blendingEnabled)?n.blendingEnabled:i.enabled;xr(e,e.BLEND,o),o&&($I(e,i.color),e.blendEquationSeparate(i.equationRgb,i.equationAlpha),e.blendFuncSeparate(i.functionSourceRgb,i.functionDestinationRgb,i.functionSourceAlpha,i.functionDestinationAlpha))}function Ty(e,t){let n=t.stencilTest,i=n.enabled;if(xr(e,e.STENCIL_TEST,i),i){let o=n.frontFunction,r=n.backFunction,a=n.reference,s=n.mask;e.stencilFunc(o,a,s),e.stencilFuncSeparate(e.BACK,r,a,s),e.stencilFuncSeparate(e.FRONT,o,a,s);let u=n.frontOperation,l=u.fail,d=u.zFail,f=u.zPass;e.stencilOpSeparate(e.FRONT,l,d,f);let g=n.backOperation,b=g.fail,x=g.zFail,T=g.zPass;e.stencilOpSeparate(e.BACK,b,x,T)}}function wy(e,t){let n=t.sampleCoverage,i=n.enabled;xr(e,e.SAMPLE_COVERAGE,i),i&&e.sampleCoverage(n.value,n.invert)}var QI=new Ca;function Sy(e,t,n){let i=C(t.viewport,n.viewport);m(i)||(i=QI,i.width=n.context.drawingBufferWidth,i.height=n.context.drawingBufferHeight),n.context.uniformState.viewport=i,e.viewport(i.x,i.y,i.width,i.height)}qi.apply=function(e,t,n){fy(e,t),my(e,t),hy(e,t),gy(e,t),yy(e,t),vy(e,t),by(e,t),xy(e,t),Ey(e,t),Ty(e,t),wy(e,t),_y(e,t,n),Cy(e,t,n),Sy(e,t,n)};function eP(e,t){let n=[];return e.frontFace!==t.frontFace&&n.push(fy),(e.cull.enabled!==t.cull.enabled||e.cull.face!==t.cull.face)&&n.push(my),e.lineWidth!==t.lineWidth&&n.push(hy),(e.polygonOffset.enabled!==t.polygonOffset.enabled||e.polygonOffset.factor!==t.polygonOffset.factor||e.polygonOffset.units!==t.polygonOffset.units)&&n.push(gy),(e.depthRange.near!==t.depthRange.near||e.depthRange.far!==t.depthRange.far)&&n.push(yy),(e.depthTest.enabled!==t.depthTest.enabled||e.depthTest.func!==t.depthTest.func)&&n.push(vy),(e.colorMask.red!==t.colorMask.red||e.colorMask.green!==t.colorMask.green||e.colorMask.blue!==t.colorMask.blue||e.colorMask.alpha!==t.colorMask.alpha)&&n.push(by),e.depthMask!==t.depthMask&&n.push(xy),e.stencilMask!==t.stencilMask&&n.push(Ey),(e.stencilTest.enabled!==t.stencilTest.enabled||e.stencilTest.frontFunction!==t.stencilTest.frontFunction||e.stencilTest.backFunction!==t.stencilTest.backFunction||e.stencilTest.reference!==t.stencilTest.reference||e.stencilTest.mask!==t.stencilTest.mask||e.stencilTest.frontOperation.fail!==t.stencilTest.frontOperation.fail||e.stencilTest.frontOperation.zFail!==t.stencilTest.frontOperation.zFail||e.stencilTest.backOperation.fail!==t.stencilTest.backOperation.fail||e.stencilTest.backOperation.zFail!==t.stencilTest.backOperation.zFail||e.stencilTest.backOperation.zPass!==t.stencilTest.backOperation.zPass)&&n.push(Ty),(e.sampleCoverage.enabled!==t.sampleCoverage.enabled||e.sampleCoverage.value!==t.sampleCoverage.value||e.sampleCoverage.invert!==t.sampleCoverage.invert)&&n.push(wy),n}qi.partialApply=function(e,t,n,i,o,r){if(t!==n){let d=n._applyFunctions[t.id];m(d)||(d=eP(t,n),n._applyFunctions[t.id]=d);let f=d.length;for(let g=0;g<f;++g)d[g](e,n)}let a=m(i.scissorTest)?i.scissorTest:t.scissorTest,s=m(o.scissorTest)?o.scissorTest:n.scissorTest;(a!==s||r)&&_y(e,n,o);let u=m(i.blendingEnabled)?i.blendingEnabled:t.blending.enabled,l=m(o.blendingEnabled)?o.blendingEnabled:n.blending.enabled;(u!==l||l&&t.blending!==n.blending)&&Cy(e,n,o),(t!==n||i!==o||i.context!==o.context)&&Sy(e,n,o)};qi.getState=function(e){return{frontFace:e.frontFace,cull:{enabled:e.cull.enabled,face:e.cull.face},lineWidth:e.lineWidth,polygonOffset:{enabled:e.polygonOffset.enabled,factor:e.polygonOffset.factor,units:e.polygonOffset.units},scissorTest:{enabled:e.scissorTest.enabled,rectangle:Ca.clone(e.scissorTest.rectangle)},depthRange:{near:e.depthRange.near,far:e.depthRange.far},depthTest:{enabled:e.depthTest.enabled,func:e.depthTest.func},colorMask:{red:e.colorMask.red,green:e.colorMask.green,blue:e.colorMask.blue,alpha:e.colorMask.alpha},depthMask:e.depthMask,stencilMask:e.stencilMask,blending:{enabled:e.blending.enabled,color:Et.clone(e.blending.color),equationRgb:e.blending.equationRgb,equationAlpha:e.blending.equationAlpha,functionSourceRgb:e.blending.functionSourceRgb,functionSourceAlpha:e.blending.functionSourceAlpha,functionDestinationRgb:e.blending.functionDestinationRgb,functionDestinationAlpha:e.blending.functionDestinationAlpha},stencilTest:{enabled:e.stencilTest.enabled,frontFunction:e.stencilTest.frontFunction,backFunction:e.stencilTest.backFunction,reference:e.stencilTest.reference,mask:e.stencilTest.mask,frontOperation:{fail:e.stencilTest.frontOperation.fail,zFail:e.stencilTest.frontOperation.zFail,zPass:e.stencilTest.frontOperation.zPass},backOperation:{fail:e.stencilTest.backOperation.fail,zFail:e.stencilTest.backOperation.zFail,zPass:e.stencilTest.backOperation.zPass}},sampleCoverage:{enabled:e.sampleCoverage.enabled,value:e.sampleCoverage.value,invert:e.sampleCoverage.invert},viewport:m(e.viewport)?Ca.clone(e.viewport):void 0}};var Er=qi;var tP=new h;function Te(e){this._size=e.size,this._datatype=e.datatype,this.getValue=e.getValue}var un={};un[z.FLOAT]="float";un[z.FLOAT_VEC2]="vec2";un[z.FLOAT_VEC3]="vec3";un[z.FLOAT_VEC4]="vec4";un[z.INT]="int";un[z.INT_VEC2]="ivec2";un[z.INT_VEC3]="ivec3";un[z.INT_VEC4]="ivec4";un[z.BOOL]="bool";un[z.BOOL_VEC2]="bvec2";un[z.BOOL_VEC3]="bvec3";un[z.BOOL_VEC4]="bvec4";un[z.FLOAT_MAT2]="mat2";un[z.FLOAT_MAT3]="mat3";un[z.FLOAT_MAT4]="mat4";un[z.SAMPLER_2D]="sampler2D";un[z.SAMPLER_CUBE]="samplerCube";Te.prototype.getDeclaration=function(e){let t=`uniform ${un[this._datatype]} ${e}`,n=this._size;return n===1?t+=";":t+=`[${n.toString()}];`,t};var nP={czm_viewport:new Te({size:1,datatype:z.FLOAT_VEC4,getValue:function(e){return e.viewportCartesian4}}),czm_viewportOrthographic:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.viewportOrthographic}}),czm_viewportTransformation:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.viewportTransformation}}),czm_globeDepthTexture:new Te({size:1,datatype:z.SAMPLER_2D,getValue:function(e){return e.globeDepthTexture}}),czm_model:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.model}}),czm_inverseModel:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.inverseModel}}),czm_view:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.view}}),czm_view3D:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.view3D}}),czm_viewRotation:new Te({size:1,datatype:z.FLOAT_MAT3,getValue:function(e){return e.viewRotation}}),czm_viewRotation3D:new Te({size:1,datatype:z.FLOAT_MAT3,getValue:function(e){return e.viewRotation3D}}),czm_inverseView:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.inverseView}}),czm_inverseView3D:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.inverseView3D}}),czm_inverseViewRotation:new Te({size:1,datatype:z.FLOAT_MAT3,getValue:function(e){return e.inverseViewRotation}}),czm_inverseViewRotation3D:new Te({size:1,datatype:z.FLOAT_MAT3,getValue:function(e){return e.inverseViewRotation3D}}),czm_projection:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.projection}}),czm_inverseProjection:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.inverseProjection}}),czm_infiniteProjection:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.infiniteProjection}}),czm_modelView:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.modelView}}),czm_modelView3D:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.modelView3D}}),czm_modelViewRelativeToEye:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.modelViewRelativeToEye}}),czm_inverseModelView:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.inverseModelView}}),czm_inverseModelView3D:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.inverseModelView3D}}),czm_viewProjection:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.viewProjection}}),czm_inverseViewProjection:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.inverseViewProjection}}),czm_modelViewProjection:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.modelViewProjection}}),czm_inverseModelViewProjection:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.inverseModelViewProjection}}),czm_modelViewProjectionRelativeToEye:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.modelViewProjectionRelativeToEye}}),czm_modelViewInfiniteProjection:new Te({size:1,datatype:z.FLOAT_MAT4,getValue:function(e){return e.modelViewInfiniteProjection}}),czm_orthographicIn3D:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.orthographicIn3D?1:0}}),czm_normal:new Te({size:1,datatype:z.FLOAT_MAT3,getValue:function(e){return e.normal}}),czm_normal3D:new Te({size:1,datatype:z.FLOAT_MAT3,getValue:function(e){return e.normal3D}}),czm_inverseNormal:new Te({size:1,datatype:z.FLOAT_MAT3,getValue:function(e){return e.inverseNormal}}),czm_inverseNormal3D:new Te({size:1,datatype:z.FLOAT_MAT3,getValue:function(e){return e.inverseNormal3D}}),czm_eyeHeight:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.eyeHeight}}),czm_eyeHeight2D:new Te({size:1,datatype:z.FLOAT_VEC2,getValue:function(e){return e.eyeHeight2D}}),czm_entireFrustum:new Te({size:1,datatype:z.FLOAT_VEC2,getValue:function(e){return e.entireFrustum}}),czm_currentFrustum:new Te({size:1,datatype:z.FLOAT_VEC2,getValue:function(e){return e.currentFrustum}}),czm_frustumPlanes:new Te({size:1,datatype:z.FLOAT_VEC4,getValue:function(e){return e.frustumPlanes}}),czm_farDepthFromNearPlusOne:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.farDepthFromNearPlusOne}}),czm_log2FarDepthFromNearPlusOne:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.log2FarDepthFromNearPlusOne}}),czm_oneOverLog2FarDepthFromNearPlusOne:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.oneOverLog2FarDepthFromNearPlusOne}}),czm_sunPositionWC:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.sunPositionWC}}),czm_sunPositionColumbusView:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.sunPositionColumbusView}}),czm_sunDirectionEC:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.sunDirectionEC}}),czm_sunDirectionWC:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.sunDirectionWC}}),czm_moonDirectionEC:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.moonDirectionEC}}),czm_lightDirectionEC:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.lightDirectionEC}}),czm_lightDirectionWC:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.lightDirectionWC}}),czm_lightColor:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.lightColor}}),czm_lightColorHdr:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.lightColorHdr}}),czm_encodedCameraPositionMCHigh:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.encodedCameraPositionMCHigh}}),czm_encodedCameraPositionMCLow:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.encodedCameraPositionMCLow}}),czm_viewerPositionWC:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return fe.getTranslation(e.inverseView,tP)}}),czm_frameNumber:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.frameState.frameNumber}}),czm_morphTime:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.frameState.morphTime}}),czm_sceneMode:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.frameState.mode}}),czm_pass:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.pass}}),czm_backgroundColor:new Te({size:1,datatype:z.FLOAT_VEC4,getValue:function(e){return e.backgroundColor}}),czm_brdfLut:new Te({size:1,datatype:z.SAMPLER_2D,getValue:function(e){return e.brdfLut}}),czm_environmentMap:new Te({size:1,datatype:z.SAMPLER_CUBE,getValue:function(e){return e.environmentMap}}),czm_specularEnvironmentMaps:new Te({size:1,datatype:z.SAMPLER_2D,getValue:function(e){return e.specularEnvironmentMaps}}),czm_specularEnvironmentMapSize:new Te({size:1,datatype:z.FLOAT_VEC2,getValue:function(e){return e.specularEnvironmentMapsDimensions}}),czm_specularEnvironmentMapsMaximumLOD:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.specularEnvironmentMapsMaximumLOD}}),czm_sphericalHarmonicCoefficients:new Te({size:9,datatype:z.FLOAT_VEC3,getValue:function(e){return e.sphericalHarmonicCoefficients}}),czm_temeToPseudoFixed:new Te({size:1,datatype:z.FLOAT_MAT3,getValue:function(e){return e.temeToPseudoFixedMatrix}}),czm_pixelRatio:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.pixelRatio}}),czm_fogDensity:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.fogDensity}}),czm_splitPosition:new Te({size:1,datatype:z.FLOAT_VEC2,getValue:function(e){return e.splitPosition}}),czm_geometricToleranceOverMeter:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.geometricToleranceOverMeter}}),czm_minimumDisableDepthTestDistance:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.minimumDisableDepthTestDistance}}),czm_invertClassificationColor:new Te({size:1,datatype:z.FLOAT_VEC4,getValue:function(e){return e.invertClassificationColor}}),czm_gamma:new Te({size:1,datatype:z.FLOAT,getValue:function(e){return e.gamma}}),czm_ellipsoidRadii:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.ellipsoid.radii}}),czm_ellipsoidInverseRadii:new Te({size:1,datatype:z.FLOAT_VEC3,getValue:function(e){return e.ellipsoid.oneOverRadii}})},Ta=nP;function iP(e,t,n,i){switch(t.type){case e.FLOAT:return new Ay(e,t,n,i);case e.FLOAT_VEC2:return new Ry(e,t,n,i);case e.FLOAT_VEC3:return new Oy(e,t,n,i);case e.FLOAT_VEC4:return new Iy(e,t,n,i);case e.SAMPLER_2D:case e.SAMPLER_CUBE:case e.SAMPLER_3D:return new Ud(e,t,n,i);case e.INT:case e.BOOL:return new Py(e,t,n,i);case e.INT_VEC2:case e.BOOL_VEC2:return new Dy(e,t,n,i);case e.INT_VEC3:case e.BOOL_VEC3:return new My(e,t,n,i);case e.INT_VEC4:case e.BOOL_VEC4:return new Ny(e,t,n,i);case e.FLOAT_MAT2:return new Ly(e,t,n,i);case e.FLOAT_MAT3:return new zy(e,t,n,i);case e.FLOAT_MAT4:return new By(e,t,n,i);default:throw new It(`Unrecognized uniform type: ${t.type} for uniform "${n}".`)}}function Ay(e,t,n,i){this.name=n,this.value=void 0,this._value=0,this._gl=e,this._location=i}Ay.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1f(this._location,this.value))};function Ry(e,t,n,i){this.name=n,this.value=void 0,this._value=new Ce,this._gl=e,this._location=i}Ry.prototype.set=function(){let e=this.value;Ce.equals(e,this._value)||(Ce.clone(e,this._value),this._gl.uniform2f(this._location,e.x,e.y))};function Oy(e,t,n,i){this.name=n,this.value=void 0,this._value=void 0,this._gl=e,this._location=i}Oy.prototype.set=function(){let e=this.value;m(e.red)?Et.equals(e,this._value)||(this._value=Et.clone(e,this._value),this._gl.uniform3f(this._location,e.red,e.green,e.blue)):m(e.x)&&(h.equals(e,this._value)||(this._value=h.clone(e,this._value),this._gl.uniform3f(this._location,e.x,e.y,e.z)))};function Iy(e,t,n,i){this.name=n,this.value=void 0,this._value=void 0,this._gl=e,this._location=i}Iy.prototype.set=function(){let e=this.value;m(e.red)?Et.equals(e,this._value)||(this._value=Et.clone(e,this._value),this._gl.uniform4f(this._location,e.red,e.green,e.blue,e.alpha)):m(e.x)&&(De.equals(e,this._value)||(this._value=De.clone(e,this._value),this._gl.uniform4f(this._location,e.x,e.y,e.z,e.w)))};function Ud(e,t,n,i){this.name=n,this.value=void 0,this._gl=e,this._location=i,this.textureUnitIndex=void 0}Ud.prototype.set=function(){let e=this._gl;e.activeTexture(e.TEXTURE0+this.textureUnitIndex);let t=this.value;m(t)&&e.bindTexture(t._target,t._texture)};Ud.prototype._setSampler=function(e){return this.textureUnitIndex=e,this._gl.uniform1i(this._location,e),e+1};function Py(e,t,n,i){this.name=n,this.value=void 0,this._value=0,this._gl=e,this._location=i}Py.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1i(this._location,this.value))};function Dy(e,t,n,i){this.name=n,this.value=void 0,this._value=new Ce,this._gl=e,this._location=i}Dy.prototype.set=function(){let e=this.value;Ce.equals(e,this._value)||(Ce.clone(e,this._value),this._gl.uniform2i(this._location,e.x,e.y))};function My(e,t,n,i){this.name=n,this.value=void 0,this._value=new h,this._gl=e,this._location=i}My.prototype.set=function(){let e=this.value;h.equals(e,this._value)||(h.clone(e,this._value),this._gl.uniform3i(this._location,e.x,e.y,e.z))};function Ny(e,t,n,i){this.name=n,this.value=void 0,this._value=new De,this._gl=e,this._location=i}Ny.prototype.set=function(){let e=this.value;De.equals(e,this._value)||(De.clone(e,this._value),this._gl.uniform4i(this._location,e.x,e.y,e.z,e.w))};var oP=new Float32Array(4);function Ly(e,t,n,i){this.name=n,this.value=void 0,this._value=new Gn,this._gl=e,this._location=i}Ly.prototype.set=function(){if(!Gn.equalsArray(this.value,this._value,0)){Gn.clone(this.value,this._value);let e=Gn.toArray(this.value,oP);this._gl.uniformMatrix2fv(this._location,!1,e)}};var rP=new Float32Array(9);function zy(e,t,n,i){this.name=n,this.value=void 0,this._value=new _e,this._gl=e,this._location=i}zy.prototype.set=function(){if(!_e.equalsArray(this.value,this._value,0)){_e.clone(this.value,this._value);let e=_e.toArray(this.value,rP);this._gl.uniformMatrix3fv(this._location,!1,e)}};var aP=new Float32Array(16);function By(e,t,n,i){this.name=n,this.value=void 0,this._value=new fe,this._gl=e,this._location=i}By.prototype.set=function(){if(!fe.equalsArray(this.value,this._value,0)){fe.clone(this.value,this._value);let e=fe.toArray(this.value,aP);this._gl.uniformMatrix4fv(this._location,!1,e)}};var Fy=iP;function sP(e,t,n,i){switch(t.type){case e.FLOAT:return new Uy(e,t,n,i);case e.FLOAT_VEC2:return new ky(e,t,n,i);case e.FLOAT_VEC3:return new Vy(e,t,n,i);case e.FLOAT_VEC4:return new jy(e,t,n,i);case e.SAMPLER_2D:case e.SAMPLER_CUBE:return new kd(e,t,n,i);case e.INT:case e.BOOL:return new Gy(e,t,n,i);case e.INT_VEC2:case e.BOOL_VEC2:return new Hy(e,t,n,i);case e.INT_VEC3:case e.BOOL_VEC3:return new qy(e,t,n,i);case e.INT_VEC4:case e.BOOL_VEC4:return new Wy(e,t,n,i);case e.FLOAT_MAT2:return new Ky(e,t,n,i);case e.FLOAT_MAT3:return new Yy(e,t,n,i);case e.FLOAT_MAT4:return new Zy(e,t,n,i);default:throw new It(`Unrecognized uniform type: ${t.type} for uniform "${n}".`)}}function Uy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o),this._gl=e,this._location=i[0]}Uy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1;for(let o=0;o<t;++o){let r=e[o];r!==n[o]&&(n[o]=r,i=!0)}i&&this._gl.uniform1fv(this._location,n)};function ky(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*2),this._gl=e,this._location=i[0]}ky.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];Ce.equalsArray(a,n,o)||(Ce.pack(a,n,o),i=!0),o+=2}i&&this._gl.uniform2fv(this._location,n)};function Vy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*3),this._gl=e,this._location=i[0]}Vy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];m(a.red)?(a.red!==n[o]||a.green!==n[o+1]||a.blue!==n[o+2])&&(n[o]=a.red,n[o+1]=a.green,n[o+2]=a.blue,i=!0):m(a.x)&&(h.equalsArray(a,n,o)||(h.pack(a,n,o),i=!0)),o+=3}i&&this._gl.uniform3fv(this._location,n)};function jy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*4),this._gl=e,this._location=i[0]}jy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];m(a.red)?Et.equalsArray(a,n,o)||(Et.pack(a,n,o),i=!0):m(a.x)&&(De.equalsArray(a,n,o)||(De.pack(a,n,o),i=!0)),o+=4}i&&this._gl.uniform4fv(this._location,n)};function kd(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o),this._gl=e,this._locations=i,this.textureUnitIndex=void 0}kd.prototype.set=function(){let e=this._gl,t=e.TEXTURE0+this.textureUnitIndex,n=this.value,i=n.length;for(let o=0;o<i;++o){let r=n[o];e.activeTexture(t+o),e.bindTexture(r._target,r._texture)}};kd.prototype._setSampler=function(e){this.textureUnitIndex=e;let t=this._locations,n=t.length;for(let i=0;i<n;++i){let o=e+i;this._gl.uniform1i(t[i],o)}return e+n};function Gy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o),this._gl=e,this._location=i[0]}Gy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1;for(let o=0;o<t;++o){let r=e[o];r!==n[o]&&(n[o]=r,i=!0)}i&&this._gl.uniform1iv(this._location,n)};function Hy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o*2),this._gl=e,this._location=i[0]}Hy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];Ce.equalsArray(a,n,o)||(Ce.pack(a,n,o),i=!0),o+=2}i&&this._gl.uniform2iv(this._location,n)};function qy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o*3),this._gl=e,this._location=i[0]}qy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];h.equalsArray(a,n,o)||(h.pack(a,n,o),i=!0),o+=3}i&&this._gl.uniform3iv(this._location,n)};function Wy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o*4),this._gl=e,this._location=i[0]}Wy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];De.equalsArray(a,n,o)||(De.pack(a,n,o),i=!0),o+=4}i&&this._gl.uniform4iv(this._location,n)};function Ky(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*4),this._gl=e,this._location=i[0]}Ky.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];Gn.equalsArray(a,n,o)||(Gn.pack(a,n,o),i=!0),o+=4}i&&this._gl.uniformMatrix2fv(this._location,!1,n)};function Yy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*9),this._gl=e,this._location=i[0]}Yy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];_e.equalsArray(a,n,o)||(_e.pack(a,n,o),i=!0),o+=9}i&&this._gl.uniformMatrix3fv(this._location,!1,n)};function Zy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*16),this._gl=e,this._location=i[0]}Zy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];fe.equalsArray(a,n,o)||(fe.pack(a,n,o),i=!0),o+=16}i&&this._gl.uniformMatrix4fv(this._location,!1,n)};var Jy=sP;var cP=0;function mo(e){let t=e.vertexShaderText,n=e.fragmentShaderText;typeof spector<"u"&&(t=t.replace(/^#line/gm,"//#line"),n=n.replace(/^#line/gm,"//#line"));let i=uP(t,n);this._gl=e.gl,this._logShaderCompilation=e.logShaderCompilation,this._debugShaders=e.debugShaders,this._attributeLocations=e.attributeLocations,this._program=void 0,this._numberOfVertexAttributes=void 0,this._vertexAttributes=void 0,this._uniformsByName=void 0,this._uniforms=void 0,this._automaticUniforms=void 0,this._manualUniforms=void 0,this._duplicateUniformNames=i.duplicateUniformNames,this._cachedShader=void 0,this.maximumTextureUnitIndex=void 0,this._vertexShaderSource=e.vertexShaderSource,this._vertexShaderText=e.vertexShaderText,this._fragmentShaderSource=e.fragmentShaderSource,this._fragmentShaderText=i.fragmentShaderText,this.id=cP++}mo.fromCache=function(e){return e=C(e,C.EMPTY_OBJECT),e.context.shaderCache.getShaderProgram(e)};mo.replaceCache=function(e){return e=C(e,C.EMPTY_OBJECT),e.context.shaderCache.replaceShaderProgram(e)};Object.defineProperties(mo.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},vertexAttributes:{get:function(){return xu(this),this._vertexAttributes}},numberOfVertexAttributes:{get:function(){return xu(this),this._numberOfVertexAttributes}},allUniforms:{get:function(){return xu(this),this._uniformsByName}}});function Xy(e){let t=[],n=e.match(/uniform.*?(?![^{]*})(?=[=\[;])/g);if(m(n)){let i=n.length;for(let o=0;o<i;o++){let r=n[o].trim(),a=r.slice(r.lastIndexOf(" ")+1);t.push(a)}}return t}function uP(e,t){let n={};if(!yt.highpFloatSupported||!yt.highpIntSupported){let i,o,r,a,s=Xy(e),u=Xy(t),l=s.length,d=u.length;for(i=0;i<l;i++)for(o=0;o<d;o++)if(s[i]===u[o]){r=s[i],a=`czm_mediump_${r}`;let f=new RegExp(`${r}\\b`,"g");t=t.replace(f,a),n[a]=r}}return{fragmentShaderText:t,duplicateUniformNames:n}}var Wi="[Cesium WebGL] ";function lP(e,t){let n=t._vertexShaderText,i=t._fragmentShaderText,o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,n),e.compileShader(o);let r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,i),e.compileShader(r);let a=e.createProgram();e.attachShader(a,o),e.attachShader(a,r);let s=t._attributeLocations;if(m(s))for(let g in s)s.hasOwnProperty(g)&&e.bindAttribLocation(a,s[g],g);e.linkProgram(a);let u;if(e.getProgramParameter(a,e.LINK_STATUS))return t._logShaderCompilation&&(u=e.getShaderInfoLog(o),m(u)&&u.length>0&&console.log(`${Wi}Vertex shader compile log: ${u}`),u=e.getShaderInfoLog(r),m(u)&&u.length>0&&console.log(`${Wi}Fragment shader compile log: ${u}`),u=e.getProgramInfoLog(a),m(u)&&u.length>0&&console.log(`${Wi}Shader program link log: ${u}`)),e.deleteShader(o),e.deleteShader(r),a;let l,d=t._debugShaders;throw e.getShaderParameter(r,e.COMPILE_STATUS)?e.getShaderParameter(o,e.COMPILE_STATUS)?(u=e.getProgramInfoLog(a),console.error(`${Wi}Shader program link log: ${u}`),f(o,"vertex"),f(r,"fragment"),l=`Program failed to link.  Link log: ${u}`):(u=e.getShaderInfoLog(o),console.error(`${Wi}Vertex shader compile log: ${u}`),console.error(`${Wi} Vertex shader source:
${n}`),l=`Vertex shader failed to compile.  Compile log: ${u}`):(u=e.getShaderInfoLog(r),console.error(`${Wi}Fragment shader compile log: ${u}`),console.error(`${Wi} Fragment shader source:
${i}`),l=`Fragment shader failed to compile.  Compile log: ${u}`),e.deleteShader(o),e.deleteShader(r),e.deleteProgram(a),new It(l);function f(g,b){if(!m(d))return;let x=d.getTranslatedShaderSource(g);if(x===""){console.error(`${Wi}${b} shader translation failed.`);return}console.error(`${Wi}Translated ${b} shaderSource:
${x}`)}}function pP(e,t,n){let i={};for(let o=0;o<n;++o){let r=e.getActiveAttrib(t,o),a=e.getAttribLocation(t,r.name);i[r.name]={name:r.name,type:r.type,index:a}}return i}function dP(e,t){let n={},i=[],o=[],r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let a=0;a<r;++a){let s=e.getActiveUniform(t,a),u="[0]",l=s.name.indexOf(u,s.name.length-u.length)!==-1?s.name.slice(0,s.name.length-3):s.name;if(l.indexOf("gl_")!==0)if(s.name.indexOf("[")<0){let d=e.getUniformLocation(t,l);if(d!==null){let f=Fy(e,s,l,d);n[l]=f,i.push(f),f._setSampler&&o.push(f)}}else{let d,f,g,b,x=l.indexOf("[");if(x>=0){if(d=n[l.slice(0,x)],!m(d))continue;f=d._locations,f.length<=1&&(g=d.value,b=e.getUniformLocation(t,l),b!==null&&(f.push(b),g.push(e.getUniform(t,b))))}else{f=[];for(let T=0;T<s.size;++T)b=e.getUniformLocation(t,`${l}[${T}]`),b!==null&&f.push(b);d=Jy(e,s,l,f),n[l]=d,i.push(d),d._setSampler&&o.push(d)}}}return{uniformsByName:n,uniforms:i,samplerUniforms:o}}function fP(e,t){let n=[],i=[];for(let o in t)if(t.hasOwnProperty(o)){let r=t[o],a=o,s=e._duplicateUniformNames[a];m(s)&&(r.name=s,a=s);let u=Ta[a];m(u)?n.push({uniform:r,automaticUniform:u}):i.push(r)}return{automaticUniforms:n,manualUniforms:i}}function mP(e,t,n){e.useProgram(t);let i=0,o=n.length;for(let r=0;r<o;++r)i=n[r]._setSampler(i);return e.useProgram(null),i}function xu(e){m(e._program)||$y(e)}function $y(e){let t=e._program,n=e._gl,i=lP(n,e,e._debugShaders),o=n.getProgramParameter(i,n.ACTIVE_ATTRIBUTES),r=dP(n,i),a=fP(e,r.uniformsByName);e._program=i,e._numberOfVertexAttributes=o,e._vertexAttributes=pP(n,i,o),e._uniformsByName=r.uniformsByName,e._uniforms=r.uniforms,e._automaticUniforms=a.automaticUniforms,e._manualUniforms=a.manualUniforms,e.maximumTextureUnitIndex=mP(n,i,r.samplerUniforms),t&&e._gl.deleteProgram(t),typeof spector<"u"&&(e._program.__SPECTOR_rebuildProgram=function(s,u,l,d){let f=e._vertexShaderText,g=e._fragmentShaderText,b=/ ! = /g;e._vertexShaderText=s.replace(b," != "),e._fragmentShaderText=u.replace(b," != ");try{$y(e),l(e._program)}catch(x){e._vertexShaderText=f,e._fragmentShaderText=g;let R=/(?:Compile|Link) error: ([^]*)/.exec(x.message);d(R?R[1]:x.message)}})}mo.prototype._bind=function(){xu(this),this._gl.useProgram(this._program)};mo.prototype._setUniforms=function(e,t,n){let i,o;if(m(e)){let s=this._manualUniforms;for(i=s.length,o=0;o<i;++o){let u=s[o];if(e[u.name])u.value=e[u.name]();else{let l=new RegExp(`${u.name}\\[\\d+]$`);for(let d in e)l.test(d)&&(u.value=e[d]())}}}let r=this._automaticUniforms;for(i=r.length,o=0;o<i;++o){let s=r[o];s.uniform.value=s.automaticUniform.getValue(t)}let a=this._uniforms;for(i=a.length,o=0;o<i;++o)a[o].set();if(n){let s=this._gl,u=this._program;s.validateProgram(u)}};mo.prototype.isDestroyed=function(){return!1};mo.prototype.destroy=function(){this._cachedShader.cache.releaseShaderProgram(this)};mo.prototype.finalDestroy=function(){return this._gl.deleteProgram(this._program),jn(this)};var Vd=mo;var Qy=`/**
 * A built-in GLSL floating-point constant for converting radians to degrees.
 *
 * @alias czm_degreesPerRadian
 * @glslConstant
 *
 * @see CesiumMath.DEGREES_PER_RADIAN
 *
 * @example
 * // GLSL declaration
 * const float czm_degreesPerRadian = ...;
 *
 * // Example
 * float deg = czm_degreesPerRadian * rad;
 */
const float czm_degreesPerRadian = 57.29577951308232;
`;var ev=`/**
 * A built-in GLSL vec2 constant for defining the depth range.
 * This is a workaround to a bug where IE11 does not implement gl_DepthRange.
 *
 * @alias czm_depthRange
 * @glslConstant
 *
 * @example
 * // GLSL declaration
 * float depthRangeNear = czm_depthRange.near;
 * float depthRangeFar = czm_depthRange.far;
 *
 */
const czm_depthRangeStruct czm_depthRange = czm_depthRangeStruct(0.0, 1.0);
`;var tv=`/**
 * 0.1
 *
 * @name czm_epsilon1
 * @glslConstant
 */
const float czm_epsilon1 = 0.1;
`;var nv=`/**
 * 0.01
 *
 * @name czm_epsilon2
 * @glslConstant
 */
const float czm_epsilon2 = 0.01;
`;var iv=`/**
 * 0.001
 *
 * @name czm_epsilon3
 * @glslConstant
 */
const float czm_epsilon3 = 0.001;
`;var ov=`/**
 * 0.0001
 *
 * @name czm_epsilon4
 * @glslConstant
 */
const float czm_epsilon4 = 0.0001;
`;var rv=`/**
 * 0.00001
 *
 * @name czm_epsilon5
 * @glslConstant
 */
const float czm_epsilon5 = 0.00001;
`;var av=`/**
 * 0.000001
 *
 * @name czm_epsilon6
 * @glslConstant
 */
const float czm_epsilon6 = 0.000001;
`;var sv=`/**
 * 0.0000001
 *
 * @name czm_epsilon7
 * @glslConstant
 */
const float czm_epsilon7 = 0.0000001;
`;var cv=`/**
 * DOC_TBA
 *
 * @name czm_infinity
 * @glslConstant
 */
const float czm_infinity = 5906376272000.0;  // Distance from the Sun to Pluto in meters.  TODO: What is best given lowp, mediump, and highp?
`;var uv=`/**
 * A built-in GLSL floating-point constant for <code>1/pi</code>.
 *
 * @alias czm_oneOverPi
 * @glslConstant
 *
 * @see CesiumMath.ONE_OVER_PI
 *
 * @example
 * // GLSL declaration
 * const float czm_oneOverPi = ...;
 *
 * // Example
 * float pi = 1.0 / czm_oneOverPi;
 */
const float czm_oneOverPi = 0.3183098861837907;
`;var lv=`/**
 * A built-in GLSL floating-point constant for <code>1/2pi</code>.
 *
 * @alias czm_oneOverTwoPi
 * @glslConstant
 *
 * @see CesiumMath.ONE_OVER_TWO_PI
 *
 * @example
 * // GLSL declaration
 * const float czm_oneOverTwoPi = ...;
 *
 * // Example
 * float pi = 2.0 * czm_oneOverTwoPi;
 */
const float czm_oneOverTwoPi = 0.15915494309189535;
`;var pv=`/**
 * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE}
 *
 * @name czm_passCesium3DTile
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCesium3DTile = 4.0;
`;var dv=`/**
 * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE_CLASSIFICATION}
 *
 * @name czm_passCesium3DTileClassification
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCesium3DTileClassification = 5.0;
`;var fv=`/**
 * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW}
 *
 * @name czm_passCesium3DTileClassificationIgnoreShow
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCesium3DTileClassificationIgnoreShow = 6.0;
`;var mv=`/**
 * The automatic GLSL constant for {@link Pass#CLASSIFICATION}
 *
 * @name czm_passClassification
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passClassification = 7.0;
`;var hv=`/**
 * The automatic GLSL constant for {@link Pass#COMPUTE}
 *
 * @name czm_passCompute
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCompute = 1.0;
`;var gv=`/**
 * The automatic GLSL constant for {@link Pass#ENVIRONMENT}
 *
 * @name czm_passEnvironment
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passEnvironment = 0.0;
`;var _v=`/**
 * The automatic GLSL constant for {@link Pass#GLOBE}
 *
 * @name czm_passGlobe
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passGlobe = 2.0;
`;var yv=`/**
 * The automatic GLSL constant for {@link Pass#OPAQUE}
 *
 * @name czm_passOpaque
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passOpaque = 7.0;
`;var vv=`/**
 * The automatic GLSL constant for {@link Pass#OVERLAY}
 *
 * @name czm_passOverlay
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passOverlay = 10.0;
`;var bv=`/**
 * The automatic GLSL constant for {@link Pass#TERRAIN_CLASSIFICATION}
 *
 * @name czm_passTerrainClassification
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passTerrainClassification = 3.0;
`;var xv=`/**
 * The automatic GLSL constant for {@link Pass#TRANSLUCENT}
 *
 * @name czm_passTranslucent
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passTranslucent = 8.0;
`;var Ev=`/**
 * The automatic GLSL constant for {@link Pass#VOXELS}
 *
 * @name czm_passVoxels
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passVoxels = 9.0;
`;var Cv=`/**
 * A built-in GLSL floating-point constant for <code>Math.PI</code>.
 *
 * @alias czm_pi
 * @glslConstant
 *
 * @see CesiumMath.PI
 *
 * @example
 * // GLSL declaration
 * const float czm_pi = ...;
 *
 * // Example
 * float twoPi = 2.0 * czm_pi;
 */
const float czm_pi = 3.141592653589793;
`;var Tv=`/**
 * A built-in GLSL floating-point constant for <code>pi/4</code>.
 *
 * @alias czm_piOverFour
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_FOUR
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverFour = ...;
 *
 * // Example
 * float pi = 4.0 * czm_piOverFour;
 */
const float czm_piOverFour = 0.7853981633974483;
`;var wv=`/**
 * A built-in GLSL floating-point constant for <code>pi/6</code>.
 *
 * @alias czm_piOverSix
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_SIX
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverSix = ...;
 *
 * // Example
 * float pi = 6.0 * czm_piOverSix;
 */
const float czm_piOverSix = 0.5235987755982988;
`;var Sv=`/**
 * A built-in GLSL floating-point constant for <code>pi/3</code>.
 *
 * @alias czm_piOverThree
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_THREE
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverThree = ...;
 *
 * // Example
 * float pi = 3.0 * czm_piOverThree;
 */
const float czm_piOverThree = 1.0471975511965976;
`;var Av=`/**
 * A built-in GLSL floating-point constant for <code>pi/2</code>.
 *
 * @alias czm_piOverTwo
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_TWO
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverTwo = ...;
 *
 * // Example
 * float pi = 2.0 * czm_piOverTwo;
 */
const float czm_piOverTwo = 1.5707963267948966;
`;var Rv=`/**
 * A built-in GLSL floating-point constant for converting degrees to radians.
 *
 * @alias czm_radiansPerDegree
 * @glslConstant
 *
 * @see CesiumMath.RADIANS_PER_DEGREE
 *
 * @example
 * // GLSL declaration
 * const float czm_radiansPerDegree = ...;
 *
 * // Example
 * float rad = czm_radiansPerDegree * deg;
 */
const float czm_radiansPerDegree = 0.017453292519943295;
`;var Ov=`/**
 * The constant identifier for the 2D {@link SceneMode}
 *
 * @name czm_sceneMode2D
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneModeColumbusView
 * @see czm_sceneMode3D
 * @see czm_sceneModeMorphing
 */
const float czm_sceneMode2D = 2.0;
`;var Iv=`/**
 * The constant identifier for the 3D {@link SceneMode}
 *
 * @name czm_sceneMode3D
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneMode2D
 * @see czm_sceneModeColumbusView
 * @see czm_sceneModeMorphing
 */
const float czm_sceneMode3D = 3.0;
`;var Pv=`/**
 * The constant identifier for the Columbus View {@link SceneMode}
 *
 * @name czm_sceneModeColumbusView
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneMode2D
 * @see czm_sceneMode3D
 * @see czm_sceneModeMorphing
 */
const float czm_sceneModeColumbusView = 1.0;
`;var Dv=`/**
 * The constant identifier for the Morphing {@link SceneMode}
 *
 * @name czm_sceneModeMorphing
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneMode2D
 * @see czm_sceneModeColumbusView
 * @see czm_sceneMode3D
 */
const float czm_sceneModeMorphing = 0.0;
`;var Mv=`/**
 * A built-in GLSL floating-point constant for one solar radius.
 *
 * @alias czm_solarRadius
 * @glslConstant
 *
 * @see CesiumMath.SOLAR_RADIUS
 *
 * @example
 * // GLSL declaration
 * const float czm_solarRadius = ...;
 */
const float czm_solarRadius = 695500000.0;
`;var Nv=`/**
 * A built-in GLSL floating-point constant for <code>3pi/2</code>.
 *
 * @alias czm_threePiOver2
 * @glslConstant
 *
 * @see CesiumMath.THREE_PI_OVER_TWO
 *
 * @example
 * // GLSL declaration
 * const float czm_threePiOver2 = ...;
 *
 * // Example
 * float pi = (2.0 / 3.0) * czm_threePiOver2;
 */
const float czm_threePiOver2 = 4.71238898038469;
`;var Lv=`/**
 * A built-in GLSL floating-point constant for <code>2pi</code>.
 *
 * @alias czm_twoPi
 * @glslConstant
 *
 * @see CesiumMath.TWO_PI
 *
 * @example
 * // GLSL declaration
 * const float czm_twoPi = ...;
 *
 * // Example
 * float pi = czm_twoPi / 2.0;
 */
const float czm_twoPi = 6.283185307179586;
`;var zv=`/**
 * The maximum latitude, in radians, both North and South, supported by a Web Mercator
 * (EPSG:3857) projection.  Technically, the Mercator projection is defined
 * for any latitude up to (but not including) 90 degrees, but it makes sense
 * to cut it off sooner because it grows exponentially with increasing latitude.
 * The logic behind this particular cutoff value, which is the one used by
 * Google Maps, Bing Maps, and Esri, is that it makes the projection
 * square.  That is, the rectangle is equal in the X and Y directions.
 *
 * The constant value is computed as follows:
 *   czm_pi * 0.5 - (2.0 * atan(exp(-czm_pi)))
 *
 * @name czm_webMercatorMaxLatitude
 * @glslConstant
 */
const float czm_webMercatorMaxLatitude = 1.4844222297453324;
`;var Bv=`/**
 * @name czm_depthRangeStruct
 * @glslStruct
 */
struct czm_depthRangeStruct
{
    float near;
    float far;
};
`;var Fv=`/**
 * Holds material information that can be used for lighting. Returned by all czm_getMaterial functions.
 *
 * @name czm_material
 * @glslStruct
 *
 * @property {vec3} diffuse Incoming light that scatters evenly in all directions.
 * @property {float} specular Intensity of incoming light reflecting in a single direction.
 * @property {float} shininess The sharpness of the specular reflection.  Higher values create a smaller, more focused specular highlight.
 * @property {vec3} normal Surface's normal in eye coordinates. It is used for effects such as normal mapping. The default is the surface's unmodified normal.
 * @property {vec3} emission Light emitted by the material equally in all directions. The default is vec3(0.0), which emits no light.
 * @property {float} alpha Alpha of this material. 0.0 is completely transparent; 1.0 is completely opaque.
 */
struct czm_material
{
    vec3 diffuse;
    float specular;
    float shininess;
    vec3 normal;
    vec3 emission;
    float alpha;
};
`;var Uv=`/**
 * Used as input to every material's czm_getMaterial function.
 *
 * @name czm_materialInput
 * @glslStruct
 *
 * @property {float} s 1D texture coordinates.
 * @property {vec2} st 2D texture coordinates.
 * @property {vec3} str 3D texture coordinates.
 * @property {vec3} normalEC Unperturbed surface normal in eye coordinates.
 * @property {mat3} tangentToEyeMatrix Matrix for converting a tangent space normal to eye space.
 * @property {vec3} positionToEyeEC Vector from the fragment to the eye in eye coordinates.  The magnitude is the distance in meters from the fragment to the eye.
 * @property {float} height The height of the terrain in meters above or below the WGS84 ellipsoid.  Only available for globe materials.
 * @property {float} slope The slope of the terrain in radians.  0 is flat; pi/2 is vertical.  Only available for globe materials.
 * @property {float} aspect The aspect of the terrain in radians.  0 is East, pi/2 is North, pi is West, 3pi/2 is South.  Only available for globe materials.
 */
struct czm_materialInput
{
    float s;
    vec2 st;
    vec3 str;
    vec3 normalEC;
    mat3 tangentToEyeMatrix;
    vec3 positionToEyeEC;
    float height;
    float slope;
    float aspect;
};
`;var kv=`/**
 * Struct for representing a material for a {@link Model}. The model
 * rendering pipeline will pass this struct between material, custom shaders,
 * and lighting stages. This is not to be confused with {@link czm_material}
 * which is used by the older Fabric materials system, although they are similar.
 * <p>
 * All color values (diffuse, specular, emissive) are in linear color space.
 * </p>
 *
 * @name czm_modelMaterial
 * @glslStruct
 *
 * @property {vec3} diffuse Incoming light that scatters evenly in all directions.
 * @property {float} alpha Alpha of this material. 0.0 is completely transparent; 1.0 is completely opaque.
 * @property {vec3} specular Color of reflected light at normal incidence in PBR materials. This is sometimes referred to as f0 in the literature.
 * @property {float} roughness A number from 0.0 to 1.0 representing how rough the surface is. Values near 0.0 produce glossy surfaces, while values near 1.0 produce rough surfaces.
 * @property {vec3} normalEC Surface's normal in eye coordinates. It is used for effects such as normal mapping. The default is the surface's unmodified normal.
 * @property {float} occlusion Ambient occlusion recieved at this point on the material. 1.0 means fully lit, 0.0 means fully occluded.
 * @property {vec3} emissive Light emitted by the material equally in all directions. The default is vec3(0.0), which emits no light.
 */
struct czm_modelMaterial {
    vec3 diffuse;
    float alpha;
    vec3 specular;
    float roughness;
    vec3 normalEC;
    float occlusion;
    vec3 emissive;
};
`;var Vv=`/**
 * Struct for representing the output of a custom vertex shader.
 * 
 * @name czm_modelVertexOutput
 * @glslStruct
 *
 * @see {@link CustomShader}
 * @see {@link Model}
 *
 * @property {vec3} positionMC The position of the vertex in model coordinates
 * @property {float} pointSize A custom value for gl_PointSize. This is only used for point primitives. 
 */
struct czm_modelVertexOutput {
  vec3 positionMC;
  float pointSize;
};
`;var jv=`/**
 * Parameters for {@link czm_pbrLighting}
 *
 * @name czm_material
 * @glslStruct
 *
 * @property {vec3} diffuseColor the diffuse color of the material for the lambert term of the rendering equation
 * @property {float} roughness a value from 0.0 to 1.0 that indicates how rough the surface of the material is.
 * @property {vec3} f0 The reflectance of the material at normal incidence
 */
struct czm_pbrParameters
{
    vec3 diffuseColor;
    float roughness;
    vec3 f0;
};
`;var Gv=`/**
 * DOC_TBA
 *
 * @name czm_ray
 * @glslStruct
 */
struct czm_ray
{
    vec3 origin;
    vec3 direction;
};
`;var Hv=`/**
 * DOC_TBA
 *
 * @name czm_raySegment
 * @glslStruct
 */
struct czm_raySegment
{
    float start;
    float stop;
};

/**
 * DOC_TBA
 *
 * @name czm_emptyRaySegment
 * @glslConstant 
 */
const czm_raySegment czm_emptyRaySegment = czm_raySegment(-czm_infinity, -czm_infinity);

/**
 * DOC_TBA
 *
 * @name czm_fullRaySegment
 * @glslConstant 
 */
const czm_raySegment czm_fullRaySegment = czm_raySegment(0.0, czm_infinity);
`;var qv=`struct czm_shadowParameters
{
#ifdef USE_CUBE_MAP_SHADOW
    vec3 texCoords;
#else
    vec2 texCoords;
#endif

    float depthBias;
    float depth;
    float nDotL;
    vec2 texelStepSize;
    float normalShadingSmooth;
    float darkness;
};
`;var Wv=`// See:
//    https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/

vec3 czm_acesTonemapping(vec3 color) {
    float g = 0.985;
    float a = 0.065;
    float b = 0.0001;
    float c = 0.433;
    float d = 0.238;

    color = (color * (color + a) - b) / (color * (g * color + c) + d);

    color = clamp(color, 0.0, 1.0);

    return color;
}
`;var Kv=`/**
 * @private
 */
float czm_alphaWeight(float a)
{
    float z = (gl_FragCoord.z - czm_viewportTransformation[3][2]) / czm_viewportTransformation[2][2];

    // See Weighted Blended Order-Independent Transparency for examples of different weighting functions:
    // http://jcgt.org/published/0002/02/09/
    return pow(a + 0.01, 4.0) + max(1e-2, min(3.0 * 1e3, 0.003 / (1e-5 + pow(abs(z) / 200.0, 4.0))));
}
`;var Yv=`/**
 * Procedural anti-aliasing by blurring two colors that meet at a sharp edge.
 *
 * @name czm_antialias
 * @glslFunction
 *
 * @param {vec4} color1 The color on one side of the edge.
 * @param {vec4} color2 The color on the other side of the edge.
 * @param {vec4} currentcolor The current color, either <code>color1</code> or <code>color2</code>.
 * @param {float} dist The distance to the edge in texture coordinates.
 * @param {float} [fuzzFactor=0.1] Controls the blurriness between the two colors.
 * @returns {vec4} The anti-aliased color.
 *
 * @example
 * // GLSL declarations
 * vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist, float fuzzFactor);
 * vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist);
 *
 * // get the color for a material that has a sharp edge at the line y = 0.5 in texture space
 * float dist = abs(textureCoordinates.t - 0.5);
 * vec4 currentColor = mix(bottomColor, topColor, step(0.5, textureCoordinates.t));
 * vec4 color = czm_antialias(bottomColor, topColor, currentColor, dist, 0.1);
 */
vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist, float fuzzFactor)
{
    float val1 = clamp(dist / fuzzFactor, 0.0, 1.0);
    float val2 = clamp((dist - 0.5) / fuzzFactor, 0.0, 1.0);
    val1 = val1 * (1.0 - val2);
    val1 = val1 * val1 * (3.0 - (2.0 * val1));
    val1 = pow(val1, 0.5); //makes the transition nicer
    
    vec4 midColor = (color1 + color2) * 0.5;
    return mix(midColor, currentColor, val1);
}

vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist)
{
    return czm_antialias(color1, color2, currentColor, dist, 0.1);
}
`;var Zv=`/**
 * Approximately computes spherical coordinates given a normal.
 * Uses approximate inverse trigonometry for speed and consistency,
 * since inverse trigonometry can differ from vendor-to-vendor and when compared with the CPU.
 *
 * @name czm_approximateSphericalCoordinates
 * @glslFunction
 *
 * @param {vec3} normal arbitrary-length normal.
 *
 * @returns {vec2} Approximate latitude and longitude spherical coordinates.
 */
vec2 czm_approximateSphericalCoordinates(vec3 normal) {
    // Project into plane with vertical for latitude
    float latitudeApproximation = czm_fastApproximateAtan(sqrt(normal.x * normal.x + normal.y * normal.y), normal.z);
    float longitudeApproximation = czm_fastApproximateAtan(normal.x, normal.y);
    return vec2(latitudeApproximation, longitudeApproximation);
}
`;var Jv=`/**
 * Determines if the fragment is back facing
 *
 * @name czm_backFacing
 * @glslFunction 
 * 
 * @returns {bool} <code>true</code> if the fragment is back facing; otherwise, <code>false</code>.
 */
bool czm_backFacing()
{
    // !gl_FrontFacing doesn't work as expected on Mac/Intel so use the more verbose form instead. See https://github.com/CesiumGS/cesium/pull/8494.
    return gl_FrontFacing == false;
}
`;var Xv=`/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a float expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {float} a Value to return if the comparison is true.
 * @param {float} b Value to return if the comparison is false.
 *
 * @returns {float} equivalent of comparison ? a : b
 */
float czm_branchFreeTernary(bool comparison, float a, float b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}

/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a vec2 expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {vec2} a Value to return if the comparison is true.
 * @param {vec2} b Value to return if the comparison is false.
 *
 * @returns {vec2} equivalent of comparison ? a : b
 */
vec2 czm_branchFreeTernary(bool comparison, vec2 a, vec2 b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}

/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a vec3 expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {vec3} a Value to return if the comparison is true.
 * @param {vec3} b Value to return if the comparison is false.
 *
 * @returns {vec3} equivalent of comparison ? a : b
 */
vec3 czm_branchFreeTernary(bool comparison, vec3 a, vec3 b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}

/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a vec4 expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {vec3} a Value to return if the comparison is true.
 * @param {vec3} b Value to return if the comparison is false.
 *
 * @returns {vec3} equivalent of comparison ? a : b
 */
vec4 czm_branchFreeTernary(bool comparison, vec4 a, vec4 b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}
`;var $v=`
vec4 czm_cascadeColor(vec4 weights)
{
    return vec4(1.0, 0.0, 0.0, 1.0) * weights.x +
           vec4(0.0, 1.0, 0.0, 1.0) * weights.y +
           vec4(0.0, 0.0, 1.0, 1.0) * weights.z +
           vec4(1.0, 0.0, 1.0, 1.0) * weights.w;
}
`;var Qv=`
uniform vec4 shadowMap_cascadeDistances;

float czm_cascadeDistance(vec4 weights)
{
    return dot(shadowMap_cascadeDistances, weights);
}
`;var eb=`
uniform mat4 shadowMap_cascadeMatrices[4];

mat4 czm_cascadeMatrix(vec4 weights)
{
    return shadowMap_cascadeMatrices[0] * weights.x +
           shadowMap_cascadeMatrices[1] * weights.y +
           shadowMap_cascadeMatrices[2] * weights.z +
           shadowMap_cascadeMatrices[3] * weights.w;
}
`;var tb=`
uniform vec4 shadowMap_cascadeSplits[2];

vec4 czm_cascadeWeights(float depthEye)
{
    // One component is set to 1.0 and all others set to 0.0.
    vec4 near = step(shadowMap_cascadeSplits[0], vec4(depthEye));
    vec4 far = step(depthEye, shadowMap_cascadeSplits[1]);
    return near * far;
}
`;var nb=`/**
 * DOC_TBA
 *
 * @name czm_columbusViewMorph
 * @glslFunction
 */
vec4 czm_columbusViewMorph(vec4 position2D, vec4 position3D, float time)
{
    // Just linear for now.
    vec3 p = mix(position2D.xyz, position3D.xyz, time);
    return vec4(p, 1.0);
}
`;var ib=`/**
 * Returns a position in model coordinates relative to eye taking into
 * account the current scene mode: 3D, 2D, or Columbus view.
 * <p>
 * This uses standard position attributes, <code>position3DHigh</code>, 
 * <code>position3DLow</code>, <code>position2DHigh</code>, and <code>position2DLow</code>, 
 * and should be used when writing a vertex shader for an {@link Appearance}.
 * </p>
 *
 * @name czm_computePosition
 * @glslFunction
 *
 * @returns {vec4} The position relative to eye.
 *
 * @example
 * vec4 p = czm_computePosition();
 * v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
 * gl_Position = czm_modelViewProjectionRelativeToEye * p;
 *
 * @see czm_translateRelativeToEye
 */
vec4 czm_computePosition();
`;var ob=`/**
 * @private
 */
vec2 cordic(float angle)
{
// Scale the vector by the appropriate factor for the 24 iterations to follow.
    vec2 vector = vec2(6.0725293500888267e-1, 0.0);
// Iteration 1
    float sense = (angle < 0.0) ? -1.0 : 1.0;
 //   float factor = sense * 1.0;  // 2^-0
    mat2 rotation = mat2(1.0, sense, -sense, 1.0);
    vector = rotation * vector;
    angle -= sense * 7.8539816339744828e-1;  // atan(2^-0)
// Iteration 2
    sense = (angle < 0.0) ? -1.0 : 1.0;
    float factor = sense * 5.0e-1;  // 2^-1
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 4.6364760900080609e-1;  // atan(2^-1)
// Iteration 3
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 2.5e-1;  // 2^-2
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 2.4497866312686414e-1;  // atan(2^-2)
// Iteration 4
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.25e-1;  // 2^-3
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.2435499454676144e-1;  // atan(2^-3)
// Iteration 5
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 6.25e-2;  // 2^-4
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 6.2418809995957350e-2;  // atan(2^-4)
// Iteration 6
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.125e-2;  // 2^-5
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.1239833430268277e-2;  // atan(2^-5)
// Iteration 7
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.5625e-2;  // 2^-6
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.5623728620476831e-2;  // atan(2^-6)
// Iteration 8
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 7.8125e-3;  // 2^-7
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 7.8123410601011111e-3;  // atan(2^-7)
// Iteration 9
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.90625e-3;  // 2^-8
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.9062301319669718e-3;  // atan(2^-8)
// Iteration 10
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.953125e-3;  // 2^-9
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.9531225164788188e-3;  // atan(2^-9)
// Iteration 11
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 9.765625e-4;  // 2^-10
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 9.7656218955931946e-4;  // atan(2^-10)
// Iteration 12
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 4.8828125e-4;  // 2^-11
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 4.8828121119489829e-4;  // atan(2^-11)
// Iteration 13
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 2.44140625e-4;  // 2^-12
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 2.4414062014936177e-4;  // atan(2^-12)
// Iteration 14
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.220703125e-4;  // 2^-13
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.2207031189367021e-4;  // atan(2^-13)
// Iteration 15
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 6.103515625e-5;  // 2^-14
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 6.1035156174208773e-5;  // atan(2^-14)
// Iteration 16
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.0517578125e-5;  // 2^-15
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.0517578115526096e-5;  // atan(2^-15)
// Iteration 17
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.52587890625e-5;  // 2^-16
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.5258789061315762e-5;  // atan(2^-16)
// Iteration 18
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 7.62939453125e-6;  // 2^-17
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 7.6293945311019700e-6;  // atan(2^-17)
// Iteration 19
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.814697265625e-6;  // 2^-18
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.8146972656064961e-6;  // atan(2^-18)
// Iteration 20
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.9073486328125e-6;  // 2^-19
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.9073486328101870e-6;  // atan(2^-19)
// Iteration 21
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 9.5367431640625e-7;  // 2^-20
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 9.5367431640596084e-7;  // atan(2^-20)
// Iteration 22
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 4.76837158203125e-7;  // 2^-21
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 4.7683715820308884e-7;  // atan(2^-21)
// Iteration 23
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 2.384185791015625e-7;  // 2^-22
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 2.3841857910155797e-7;  // atan(2^-22)
// Iteration 24
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.1920928955078125e-7;  // 2^-23
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
//    angle -= sense * 1.1920928955078068e-7;  // atan(2^-23)

    return vector;
}

/**
 * Computes the cosine and sine of the provided angle using the CORDIC algorithm.
 *
 * @name czm_cosineAndSine
 * @glslFunction
 *
 * @param {float} angle The angle in radians.
 *
 * @returns {vec2} The resulting cosine of the angle (as the x coordinate) and sine of the angle (as the y coordinate).
 *
 * @example
 * vec2 v = czm_cosineAndSine(czm_piOverSix);
 * float cosine = v.x;
 * float sine = v.y;
 */
vec2 czm_cosineAndSine(float angle)
{
    if (angle < -czm_piOverTwo || angle > czm_piOverTwo)
    {
        if (angle < 0.0)
        {
            return -cordic(angle + czm_pi);
        }
        else
        {
            return -cordic(angle - czm_pi);
        }
    }
    else
    {
        return cordic(angle);
    }
}
`;var rb=`/**
 * Decompresses texture coordinates that were packed into a single float.
 *
 * @name czm_decompressTextureCoordinates
 * @glslFunction
 *
 * @param {float} encoded The compressed texture coordinates.
 * @returns {vec2} The decompressed texture coordinates.
 */
 vec2 czm_decompressTextureCoordinates(float encoded)
 {
    float temp = encoded / 4096.0;
    float xZeroTo4095 = floor(temp);
    float stx = xZeroTo4095 / 4095.0;
    float sty = (encoded - xZeroTo4095 * 4096.0) / 4095.0;
    return vec2(stx, sty);
 }
`;var ab=`/**
 * Get default parameters for physically based rendering. These defaults
 * describe a rough dielectric (non-metal) surface (e.g. rough plastic).
 *
 * @return {czm_pbrParameters} Default parameters for {@link czm_pbrLighting}
 */
czm_pbrParameters czm_defaultPbrMaterial()
{
    czm_pbrParameters results;
    results.diffuseColor = vec3(1.0);
    results.roughness = 1.0;

    const vec3 REFLECTANCE_DIELECTRIC = vec3(0.04);
    results.f0 = REFLECTANCE_DIELECTRIC;
    return results;
}
`;var sb=`// emulated noperspective
#if (__VERSION__ == 300 || defined(GL_EXT_frag_depth)) && !defined(LOG_DEPTH)
out float v_WindowZ;
#endif

/**
 * Emulates GL_DEPTH_CLAMP, which is not available in WebGL 1 or 2.
 * GL_DEPTH_CLAMP clamps geometry that is outside the near and far planes, 
 * capping the shadow volume. More information here: 
 * https://www.khronos.org/registry/OpenGL/extensions/ARB/ARB_depth_clamp.txt.
 *
 * When GL_EXT_frag_depth is available we emulate GL_DEPTH_CLAMP by ensuring 
 * no geometry gets clipped by setting the clip space z value to 0.0 and then
 * sending the unaltered screen space z value (using emulated noperspective
 * interpolation) to the frag shader where it is clamped to [0,1] and then
 * written with gl_FragDepth (see czm_writeDepthClamp). This technique is based on:
 * https://stackoverflow.com/questions/5960757/how-to-emulate-gl-depth-clamp-nv.
 *
 * When GL_EXT_frag_depth is not available, which is the case on some mobile 
 * devices, we must attempt to fix this only in the vertex shader. 
 * The approach is to clamp the z value to the far plane, which closes the 
 * shadow volume but also distorts the geometry, so there can still be artifacts
 * on frustum seams.
 *
 * @name czm_depthClamp
 * @glslFunction
 *
 * @param {vec4} coords The vertex in clip coordinates.
 * @returns {vec4} The modified vertex.
 *
 * @example
 * gl_Position = czm_depthClamp(czm_modelViewProjection * vec4(position, 1.0));
 *
 * @see czm_writeDepthClamp
 */
vec4 czm_depthClamp(vec4 coords)
{
#ifndef LOG_DEPTH
#if __VERSION__ == 300 || defined(GL_EXT_frag_depth)
    v_WindowZ = (0.5 * (coords.z / coords.w) + 0.5) * coords.w;
    coords.z = 0.0;
#else
    coords.z = min(coords.z, coords.w);
#endif
#endif
    return coords;
}
`;var cb=`/**
 * Computes a 3x3 rotation matrix that transforms vectors from an ellipsoid's east-north-up coordinate system 
 * to eye coordinates.  In east-north-up coordinates, x points east, y points north, and z points along the 
 * surface normal.  East-north-up can be used as an ellipsoid's tangent space for operations such as bump mapping.
 * <br /><br />
 * The ellipsoid is assumed to be centered at the model coordinate's origin.
 *
 * @name czm_eastNorthUpToEyeCoordinates
 * @glslFunction
 *
 * @param {vec3} positionMC The position on the ellipsoid in model coordinates.
 * @param {vec3} normalEC The normalized ellipsoid surface normal, at <code>positionMC</code>, in eye coordinates.
 *
 * @returns {mat3} A 3x3 rotation matrix that transforms vectors from the east-north-up coordinate system to eye coordinates.
 *
 * @example
 * // Transform a vector defined in the east-north-up coordinate 
 * // system, (0, 0, 1) which is the surface normal, to eye 
 * // coordinates.
 * mat3 m = czm_eastNorthUpToEyeCoordinates(positionMC, normalEC);
 * vec3 normalEC = m * vec3(0.0, 0.0, 1.0);
 */
mat3 czm_eastNorthUpToEyeCoordinates(vec3 positionMC, vec3 normalEC)
{
    vec3 tangentMC = normalize(vec3(-positionMC.y, positionMC.x, 0.0));  // normalized surface tangent in model coordinates
    vec3 tangentEC = normalize(czm_normal3D * tangentMC);                // normalized surface tangent in eye coordiantes
    vec3 bitangentEC = normalize(cross(normalEC, tangentEC));            // normalized surface bitangent in eye coordinates

    return mat3(
        tangentEC.x,   tangentEC.y,   tangentEC.z,
        bitangentEC.x, bitangentEC.y, bitangentEC.z,
        normalEC.x,    normalEC.y,    normalEC.z);
}
`;var ub=`/**
 * DOC_TBA
 *
 * @name czm_ellipsoidContainsPoint
 * @glslFunction
 *
 */
bool czm_ellipsoidContainsPoint(vec3 ellipsoid_inverseRadii, vec3 point)
{
    vec3 scaled = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(point, 1.0)).xyz;
    return (dot(scaled, scaled) <= 1.0);
}
`;var lb=`/**
 * DOC_TBA
 *
 * @name czm_ellipsoidWgs84TextureCoordinates
 * @glslFunction
 */
vec2 czm_ellipsoidWgs84TextureCoordinates(vec3 normal)
{
    return vec2(atan(normal.y, normal.x) * czm_oneOverTwoPi + 0.5, asin(normal.z) * czm_oneOverPi + 0.5);
}
`;var pb=`/**
 * Compares <code>left</code> and <code>right</code> componentwise. Returns <code>true</code>
 * if they are within <code>epsilon</code> and <code>false</code> otherwise. The inputs
 * <code>left</code> and <code>right</code> can be <code>float</code>s, <code>vec2</code>s,
 * <code>vec3</code>s, or <code>vec4</code>s.
 *
 * @name czm_equalsEpsilon
 * @glslFunction
 *
 * @param {} left The first vector.
 * @param {} right The second vector.
 * @param {float} epsilon The epsilon to use for equality testing.
 * @returns {bool} <code>true</code> if the components are within <code>epsilon</code> and <code>false</code> otherwise.
 *
 * @example
 * // GLSL declarations
 * bool czm_equalsEpsilon(float left, float right, float epsilon);
 * bool czm_equalsEpsilon(vec2 left, vec2 right, float epsilon);
 * bool czm_equalsEpsilon(vec3 left, vec3 right, float epsilon);
 * bool czm_equalsEpsilon(vec4 left, vec4 right, float epsilon);
 */
bool czm_equalsEpsilon(vec4 left, vec4 right, float epsilon) {
    return all(lessThanEqual(abs(left - right), vec4(epsilon)));
}

bool czm_equalsEpsilon(vec3 left, vec3 right, float epsilon) {
    return all(lessThanEqual(abs(left - right), vec3(epsilon)));
}

bool czm_equalsEpsilon(vec2 left, vec2 right, float epsilon) {
    return all(lessThanEqual(abs(left - right), vec2(epsilon)));
}

bool czm_equalsEpsilon(float left, float right, float epsilon) {
    return (abs(left - right) <= epsilon);
}
`;var db=`/**
 * DOC_TBA
 *
 * @name czm_eyeOffset
 * @glslFunction
 *
 * @param {vec4} positionEC DOC_TBA.
 * @param {vec3} eyeOffset DOC_TBA.
 *
 * @returns {vec4} DOC_TBA.
 */
vec4 czm_eyeOffset(vec4 positionEC, vec3 eyeOffset)
{
    // This equation is approximate in x and y.
    vec4 p = positionEC;
    vec4 zEyeOffset = normalize(p) * eyeOffset.z;
    p.xy += eyeOffset.xy + zEyeOffset.xy;
    p.z += zEyeOffset.z;
    return p;
}
`;var fb=`/**
 * Transforms a position from eye to window coordinates.  The transformation
 * from eye to clip coordinates is done using {@link czm_projection}.
 * The transform from normalized device coordinates to window coordinates is
 * done using {@link czm_viewportTransformation}, which assumes a depth range
 * of <code>near = 0</code> and <code>far = 1</code>.
 * <br /><br />
 * This transform is useful when there is a need to manipulate window coordinates
 * in a vertex shader as done by {@link BillboardCollection}.
 *
 * @name czm_eyeToWindowCoordinates
 * @glslFunction
 *
 * @param {vec4} position The position in eye coordinates to transform.
 *
 * @returns {vec4} The transformed position in window coordinates.
 *
 * @see czm_modelToWindowCoordinates
 * @see czm_projection
 * @see czm_viewportTransformation
 * @see BillboardCollection
 *
 * @example
 * vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);
 */
vec4 czm_eyeToWindowCoordinates(vec4 positionEC)
{
    vec4 q = czm_projection * positionEC;                        // clip coordinates
    q.xyz /= q.w;                                                // normalized device coordinates
    q.xyz = (czm_viewportTransformation * vec4(q.xyz, 1.0)).xyz; // window coordinates
    return q;
}
`;var mb=`/**
 * Approxiamtes atan over the range [0, 1]. Safe to flip output for negative input.
 *
 * Based on Michal Drobot's approximation from ShaderFastLibs, which in turn is based on
 * "Efficient approximations for the arctangent function," Rajan, S. Sichun Wang Inkol, R. Joyal, A., May 2006.
 * Adapted from ShaderFastLibs under MIT License.
 *
 * Chosen for the following characteristics over range [0, 1]:
 * - basically no error at 0 and 1, important for getting around range limit (naive atan2 via atan requires infinite range atan)
 * - no visible artifacts from first-derivative discontinuities, unlike latitude via range-reduced sqrt asin approximations (at equator)
 *
 * The original code is x * (-0.1784 * abs(x) - 0.0663 * x * x + 1.0301);
 * Removed the abs() in here because it isn't needed, the input range is guaranteed as [0, 1] by how we're approximating atan2.
 *
 * @name czm_fastApproximateAtan
 * @glslFunction
 *
 * @param {float} x Value between 0 and 1 inclusive.
 *
 * @returns {float} Approximation of atan(x)
 */
float czm_fastApproximateAtan(float x) {
    return x * (-0.1784 * x - 0.0663 * x * x + 1.0301);
}

/**
 * Approximation of atan2.
 *
 * Range reduction math based on nvidia's cg reference implementation for atan2: http://developer.download.nvidia.com/cg/atan2.html
 * However, we replaced their atan curve with Michael Drobot's (see above).
 *
 * @name czm_fastApproximateAtan
 * @glslFunction
 *
 * @param {float} x Value between -1 and 1 inclusive.
 * @param {float} y Value between -1 and 1 inclusive.
 *
 * @returns {float} Approximation of atan2(x, y)
 */
float czm_fastApproximateAtan(float x, float y) {
    // atan approximations are usually only reliable over [-1, 1], or, in our case, [0, 1] due to modifications.
    // So range-reduce using abs and by flipping whether x or y is on top.
    float t = abs(x); // t used as swap and atan result.
    float opposite = abs(y);
    float adjacent = max(t, opposite);
    opposite = min(t, opposite);

    t = czm_fastApproximateAtan(opposite / adjacent);

    // Undo range reduction
    t = czm_branchFreeTernary(abs(y) > abs(x), czm_piOverTwo - t, t);
    t = czm_branchFreeTernary(x < 0.0, czm_pi - t, t);
    t = czm_branchFreeTernary(y < 0.0, -t, t);
    return t;
}
`;var hb=`/**
 * Gets the color with fog at a distance from the camera.
 *
 * @name czm_fog
 * @glslFunction
 *
 * @param {float} distanceToCamera The distance to the camera in meters.
 * @param {vec3} color The original color.
 * @param {vec3} fogColor The color of the fog.
 *
 * @returns {vec3} The color adjusted for fog at the distance from the camera.
 */
vec3 czm_fog(float distanceToCamera, vec3 color, vec3 fogColor)
{
    float scalar = distanceToCamera * czm_fogDensity;
    float fog = 1.0 - exp(-(scalar * scalar));
    return mix(color, fogColor, fog);
}

/**
 * Gets the color with fog at a distance from the camera.
 *
 * @name czm_fog
 * @glslFunction
 *
 * @param {float} distanceToCamera The distance to the camera in meters.
 * @param {vec3} color The original color.
 * @param {vec3} fogColor The color of the fog.
 * @param {float} fogModifierConstant A constant to modify the appearance of fog.
 *
 * @returns {vec3} The color adjusted for fog at the distance from the camera.
 */
vec3 czm_fog(float distanceToCamera, vec3 color, vec3 fogColor, float fogModifierConstant)
{
    float scalar = distanceToCamera * czm_fogDensity;
    float fog = 1.0 - exp(-((fogModifierConstant * scalar + fogModifierConstant) * (scalar * (1.0 + fogModifierConstant))));
    return mix(color, fogColor, fog);
}
`;var gb=`/**
 * Converts a color from RGB space to linear space.
 *
 * @name czm_gammaCorrect
 * @glslFunction
 *
 * @param {vec3} color The color in RGB space.
 * @returns {vec3} The color in linear space.
 */
vec3 czm_gammaCorrect(vec3 color) {
#ifdef HDR
    color = pow(color, vec3(czm_gamma));
#endif
    return color;
}

vec4 czm_gammaCorrect(vec4 color) {
#ifdef HDR
    color.rgb = pow(color.rgb, vec3(czm_gamma));
#endif
    return color;
}
`;var _b=`/**
 * DOC_TBA
 *
 * @name czm_geodeticSurfaceNormal
 * @glslFunction
 *
 * @param {vec3} positionOnEllipsoid DOC_TBA
 * @param {vec3} ellipsoidCenter DOC_TBA
 * @param {vec3} oneOverEllipsoidRadiiSquared DOC_TBA
 * 
 * @returns {vec3} DOC_TBA.
 */
vec3 czm_geodeticSurfaceNormal(vec3 positionOnEllipsoid, vec3 ellipsoidCenter, vec3 oneOverEllipsoidRadiiSquared)
{
    return normalize((positionOnEllipsoid - ellipsoidCenter) * oneOverEllipsoidRadiiSquared);
}
`;var yb=`/**
 * An czm_material with default values. Every material's czm_getMaterial
 * should use this default material as a base for the material it returns.
 * The default normal value is given by materialInput.normalEC.
 *
 * @name czm_getDefaultMaterial
 * @glslFunction
 *
 * @param {czm_materialInput} input The input used to construct the default material.
 *
 * @returns {czm_material} The default material.
 *
 * @see czm_materialInput
 * @see czm_material
 * @see czm_getMaterial
 */
czm_material czm_getDefaultMaterial(czm_materialInput materialInput)
{
    czm_material material;
    material.diffuse = vec3(0.0);
    material.specular = 0.0;
    material.shininess = 1.0;
    material.normal = materialInput.normalEC;
    material.emission = vec3(0.0);
    material.alpha = 1.0;
    return material;
}
`;var vb=`/**
 * Calculates the intensity of diffusely reflected light.
 *
 * @name czm_getLambertDiffuse
 * @glslFunction
 *
 * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.
 * @param {vec3} normalEC The surface normal in eye coordinates.
 *
 * @returns {float} The intensity of the diffuse reflection.
 *
 * @see czm_phong
 *
 * @example
 * float diffuseIntensity = czm_getLambertDiffuse(lightDirectionEC, normalEC);
 * float specularIntensity = czm_getSpecular(lightDirectionEC, toEyeEC, normalEC, 200);
 * vec3 color = (diffuseColor * diffuseIntensity) + (specularColor * specularIntensity);
 */
float czm_getLambertDiffuse(vec3 lightDirectionEC, vec3 normalEC)
{
    return max(dot(lightDirectionEC, normalEC), 0.0);
}
`;var bb=`/**
 * Calculates the specular intensity of reflected light.
 *
 * @name czm_getSpecular
 * @glslFunction
 *
 * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.
 * @param {vec3} toEyeEC Unit vector pointing to the eye position in eye coordinates.
 * @param {vec3} normalEC The surface normal in eye coordinates.
 * @param {float} shininess The sharpness of the specular reflection.  Higher values create a smaller, more focused specular highlight.
 *
 * @returns {float} The intensity of the specular highlight.
 *
 * @see czm_phong
 *
 * @example
 * float diffuseIntensity = czm_getLambertDiffuse(lightDirectionEC, normalEC);
 * float specularIntensity = czm_getSpecular(lightDirectionEC, toEyeEC, normalEC, 200);
 * vec3 color = (diffuseColor * diffuseIntensity) + (specularColor * specularIntensity);
 */
float czm_getSpecular(vec3 lightDirectionEC, vec3 toEyeEC, vec3 normalEC, float shininess)
{
    vec3 toReflectedLight = reflect(-lightDirectionEC, normalEC);
    float specular = max(dot(toReflectedLight, toEyeEC), 0.0);

    // pow has undefined behavior if both parameters <= 0.
    // Prevent this by making sure shininess is at least czm_epsilon2.
    return pow(specular, max(shininess, czm_epsilon2));
}
`;var xb=`/**
 * @private
 */
vec4 czm_getWaterNoise(sampler2D normalMap, vec2 uv, float time, float angleInRadians)
{
    float cosAngle = cos(angleInRadians);
    float sinAngle = sin(angleInRadians);

    // time dependent sampling directions
    vec2 s0 = vec2(1.0/17.0, 0.0);
    vec2 s1 = vec2(-1.0/29.0, 0.0);
    vec2 s2 = vec2(1.0/101.0, 1.0/59.0);
    vec2 s3 = vec2(-1.0/109.0, -1.0/57.0);

    // rotate sampling direction by specified angle
    s0 = vec2((cosAngle * s0.x) - (sinAngle * s0.y), (sinAngle * s0.x) + (cosAngle * s0.y));
    s1 = vec2((cosAngle * s1.x) - (sinAngle * s1.y), (sinAngle * s1.x) + (cosAngle * s1.y));
    s2 = vec2((cosAngle * s2.x) - (sinAngle * s2.y), (sinAngle * s2.x) + (cosAngle * s2.y));
    s3 = vec2((cosAngle * s3.x) - (sinAngle * s3.y), (sinAngle * s3.x) + (cosAngle * s3.y));

    vec2 uv0 = (uv/103.0) + (time * s0);
    vec2 uv1 = uv/107.0 + (time * s1) + vec2(0.23);
    vec2 uv2 = uv/vec2(897.0, 983.0) + (time * s2) + vec2(0.51);
    vec2 uv3 = uv/vec2(991.0, 877.0) + (time * s3) + vec2(0.71);

    uv0 = fract(uv0);
    uv1 = fract(uv1);
    uv2 = fract(uv2);
    uv3 = fract(uv3);
    vec4 noise = (texture(normalMap, uv0)) +
                 (texture(normalMap, uv1)) +
                 (texture(normalMap, uv2)) +
                 (texture(normalMap, uv3));

    // average and scale to between -1 and 1
    return ((noise / 4.0) - 0.5) * 2.0;
}
`;var Eb=`/**
 * Converts an HSB color (hue, saturation, brightness) to RGB
 * HSB <-> RGB conversion with minimal branching: {@link http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl}
 *
 * @name czm_HSBToRGB
 * @glslFunction
 * 
 * @param {vec3} hsb The color in HSB.
 *
 * @returns {vec3} The color in RGB.
 *
 * @example
 * vec3 hsb = czm_RGBToHSB(rgb);
 * hsb.z *= 0.1;
 * rgb = czm_HSBToRGB(hsb);
 */

const vec4 K_HSB2RGB = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);

vec3 czm_HSBToRGB(vec3 hsb)
{
    vec3 p = abs(fract(hsb.xxx + K_HSB2RGB.xyz) * 6.0 - K_HSB2RGB.www);
    return hsb.z * mix(K_HSB2RGB.xxx, clamp(p - K_HSB2RGB.xxx, 0.0, 1.0), hsb.y);
}
`;var Cb=`/**
 * Converts an HSL color (hue, saturation, lightness) to RGB
 * HSL <-> RGB conversion: {@link http://www.chilliant.com/rgb2hsv.html}
 *
 * @name czm_HSLToRGB
 * @glslFunction
 * 
 * @param {vec3} rgb The color in HSL.
 *
 * @returns {vec3} The color in RGB.
 *
 * @example
 * vec3 hsl = czm_RGBToHSL(rgb);
 * hsl.z *= 0.1;
 * rgb = czm_HSLToRGB(hsl);
 */

vec3 hueToRGB(float hue)
{
    float r = abs(hue * 6.0 - 3.0) - 1.0;
    float g = 2.0 - abs(hue * 6.0 - 2.0);
    float b = 2.0 - abs(hue * 6.0 - 4.0);
    return clamp(vec3(r, g, b), 0.0, 1.0);
}

vec3 czm_HSLToRGB(vec3 hsl)
{
    vec3 rgb = hueToRGB(hsl.x);
    float c = (1.0 - abs(2.0 * hsl.z - 1.0)) * hsl.y;
    return (rgb - 0.5) * c + hsl.z;
}
`;var Tb=`/**
 * Adjusts the hue of a color.
 * 
 * @name czm_hue
 * @glslFunction
 * 
 * @param {vec3} rgb The color.
 * @param {float} adjustment The amount to adjust the hue of the color in radians.
 *
 * @returns {float} The color with the hue adjusted.
 *
 * @example
 * vec3 adjustHue = czm_hue(color, czm_pi); // The same as czm_hue(color, -czm_pi)
 */
vec3 czm_hue(vec3 rgb, float adjustment)
{
    const mat3 toYIQ = mat3(0.299,     0.587,     0.114,
                            0.595716, -0.274453, -0.321263,
                            0.211456, -0.522591,  0.311135);
    const mat3 toRGB = mat3(1.0,  0.9563,  0.6210,
                            1.0, -0.2721, -0.6474,
                            1.0, -1.107,   1.7046);
    
    vec3 yiq = toYIQ * rgb;
    float hue = atan(yiq.z, yiq.y) + adjustment;
    float chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);
    
    vec3 color = vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));
    return toRGB * color;
}
`;var wb=`/**
 * Converts a color in linear space to RGB space.
 *
 * @name czm_inverseGamma
 * @glslFunction
 *
 * @param {vec3} color The color in linear space.
 * @returns {vec3} The color in RGB space.
 */
vec3 czm_inverseGamma(vec3 color) {
    return pow(color, vec3(1.0 / czm_gamma));
}
`;var Sb=`/**
 * Determines if a time interval is empty.
 *
 * @name czm_isEmpty
 * @glslFunction 
 * 
 * @param {czm_raySegment} interval The interval to test.
 * 
 * @returns {bool} <code>true</code> if the time interval is empty; otherwise, <code>false</code>.
 *
 * @example
 * bool b0 = czm_isEmpty(czm_emptyRaySegment);      // true
 * bool b1 = czm_isEmpty(czm_raySegment(0.0, 1.0)); // false
 * bool b2 = czm_isEmpty(czm_raySegment(1.0, 1.0)); // false, contains 1.0.
 */
bool czm_isEmpty(czm_raySegment interval)
{
    return (interval.stop < 0.0);
}
`;var Ab=`/**
 * Determines if a time interval is empty.
 *
 * @name czm_isFull
 * @glslFunction 
 * 
 * @param {czm_raySegment} interval The interval to test.
 * 
 * @returns {bool} <code>true</code> if the time interval is empty; otherwise, <code>false</code>.
 *
 * @example
 * bool b0 = czm_isEmpty(czm_emptyRaySegment);      // true
 * bool b1 = czm_isEmpty(czm_raySegment(0.0, 1.0)); // false
 * bool b2 = czm_isEmpty(czm_raySegment(1.0, 1.0)); // false, contains 1.0.
 */
bool czm_isFull(czm_raySegment interval)
{
    return (interval.start == 0.0 && interval.stop == czm_infinity);
}
`;var Rb=`/**
 * Computes the fraction of a Web Wercator rectangle at which a given geodetic latitude is located.
 *
 * @name czm_latitudeToWebMercatorFraction
 * @glslFunction
 *
 * @param {float} latitude The geodetic latitude, in radians.
 * @param {float} southMercatorY The Web Mercator coordinate of the southern boundary of the rectangle.
 * @param {float} oneOverMercatorHeight The total height of the rectangle in Web Mercator coordinates.
 *
 * @returns {float} The fraction of the rectangle at which the latitude occurs.  If the latitude is the southern
 *          boundary of the rectangle, the return value will be zero.  If it is the northern boundary, the return
 *          value will be 1.0.  Latitudes in between are mapped according to the Web Mercator projection.
 */ 
float czm_latitudeToWebMercatorFraction(float latitude, float southMercatorY, float oneOverMercatorHeight)
{
    float sinLatitude = sin(latitude);
    float mercatorY = 0.5 * log((1.0 + sinLatitude) / (1.0 - sinLatitude));
    
    return (mercatorY - southMercatorY) * oneOverMercatorHeight;
}
`;var Ob=`/**
 * Converts a linear RGB color to an sRGB color.
 *
 * @param {vec3|vec4} linearIn The color in linear color space.
 * @returns {vec3|vec4} The color in sRGB color space. The vector type matches the input.
 */
vec3 czm_linearToSrgb(vec3 linearIn) 
{
    return pow(linearIn, vec3(1.0/2.2));
}

vec4 czm_linearToSrgb(vec4 linearIn) 
{
    vec3 srgbOut = pow(linearIn.rgb, vec3(1.0/2.2));
    return vec4(srgbOut, linearIn.a);
}
`;var Ib=`/**
 * Computes distance from an point in 2D to a line in 2D.
 *
 * @name czm_lineDistance
 * @glslFunction
 *
 * param {vec2} point1 A point along the line.
 * param {vec2} point2 A point along the line.
 * param {vec2} point A point that may or may not be on the line.
 * returns {float} The distance from the point to the line.
 */
float czm_lineDistance(vec2 point1, vec2 point2, vec2 point) {
    return abs((point2.y - point1.y) * point.x - (point2.x - point1.x) * point.y + point2.x * point1.y - point2.y * point1.x) / distance(point2, point1);
}
`;var Pb=`/**
 * Computes the luminance of a color. 
 *
 * @name czm_luminance
 * @glslFunction
 *
 * @param {vec3} rgb The color.
 * 
 * @returns {float} The luminance.
 *
 * @example
 * float light = czm_luminance(vec3(0.0)); // 0.0
 * float dark = czm_luminance(vec3(1.0));  // ~1.0 
 */
float czm_luminance(vec3 rgb)
{
    // Algorithm from Chapter 10 of Graphics Shaders.
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    return dot(rgb, W);
}
`;var Db=`/**
 * Computes the size of a pixel in meters at a distance from the eye.
 * <p>
 * Use this version when passing in a custom pixel ratio. For example, passing in 1.0 will return meters per native device pixel.
 * </p>
 * @name czm_metersPerPixel
 * @glslFunction
 *
 * @param {vec3} positionEC The position to get the meters per pixel in eye coordinates.
 * @param {float} pixelRatio The scaling factor from pixel space to coordinate space
 *
 * @returns {float} The meters per pixel at positionEC.
 */
float czm_metersPerPixel(vec4 positionEC, float pixelRatio)
{
    float width = czm_viewport.z;
    float height = czm_viewport.w;
    float pixelWidth;
    float pixelHeight;

    float top = czm_frustumPlanes.x;
    float bottom = czm_frustumPlanes.y;
    float left = czm_frustumPlanes.z;
    float right = czm_frustumPlanes.w;

    if (czm_sceneMode == czm_sceneMode2D || czm_orthographicIn3D == 1.0)
    {
        float frustumWidth = right - left;
        float frustumHeight = top - bottom;
        pixelWidth = frustumWidth / width;
        pixelHeight = frustumHeight / height;
    }
    else
    {
        float distanceToPixel = -positionEC.z;
        float inverseNear = 1.0 / czm_currentFrustum.x;
        float tanTheta = top * inverseNear;
        pixelHeight = 2.0 * distanceToPixel * tanTheta / height;
        tanTheta = right * inverseNear;
        pixelWidth = 2.0 * distanceToPixel * tanTheta / width;
    }

    return max(pixelWidth, pixelHeight) * pixelRatio;
}

/**
 * Computes the size of a pixel in meters at a distance from the eye.
 * <p>
 * Use this version when scaling by pixel ratio.
 * </p>
 * @name czm_metersPerPixel
 * @glslFunction
 *
 * @param {vec3} positionEC The position to get the meters per pixel in eye coordinates.
 *
 * @returns {float} The meters per pixel at positionEC.
 */
float czm_metersPerPixel(vec4 positionEC)
{
    return czm_metersPerPixel(positionEC, czm_pixelRatio);
}
`;var Mb=`/**
 * Transforms a position from model to window coordinates.  The transformation
 * from model to clip coordinates is done using {@link czm_modelViewProjection}.
 * The transform from normalized device coordinates to window coordinates is
 * done using {@link czm_viewportTransformation}, which assumes a depth range
 * of <code>near = 0</code> and <code>far = 1</code>.
 * <br /><br />
 * This transform is useful when there is a need to manipulate window coordinates
 * in a vertex shader as done by {@link BillboardCollection}.
 * <br /><br />
 * This function should not be confused with {@link czm_viewportOrthographic},
 * which is an orthographic projection matrix that transforms from window 
 * coordinates to clip coordinates.
 *
 * @name czm_modelToWindowCoordinates
 * @glslFunction
 *
 * @param {vec4} position The position in model coordinates to transform.
 *
 * @returns {vec4} The transformed position in window coordinates.
 *
 * @see czm_eyeToWindowCoordinates
 * @see czm_modelViewProjection
 * @see czm_viewportTransformation
 * @see czm_viewportOrthographic
 * @see BillboardCollection
 *
 * @example
 * vec4 positionWC = czm_modelToWindowCoordinates(positionMC);
 */
vec4 czm_modelToWindowCoordinates(vec4 position)
{
    vec4 q = czm_modelViewProjection * position;                // clip coordinates
    q.xyz /= q.w;                                                // normalized device coordinates
    q.xyz = (czm_viewportTransformation * vec4(q.xyz, 1.0)).xyz; // window coordinates
    return q;
}
`;var Nb=`/**
 * DOC_TBA
 *
 * @name czm_multiplyWithColorBalance
 * @glslFunction
 */
vec3 czm_multiplyWithColorBalance(vec3 left, vec3 right)
{
    // Algorithm from Chapter 10 of Graphics Shaders.
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    
    vec3 target = left * right;
    float leftLuminance = dot(left, W);
    float rightLuminance = dot(right, W);
    float targetLuminance = dot(target, W);
    
    return ((leftLuminance + rightLuminance) / (2.0 * targetLuminance)) * target;
}
`;var Lb=`/**
 * Computes a value that scales with distance.  The scaling is clamped at the near and
 * far distances, and does not extrapolate.  This function works with the
 * {@link NearFarScalar} JavaScript class.
 *
 * @name czm_nearFarScalar
 * @glslFunction
 *
 * @param {vec4} nearFarScalar A vector with 4 components: Near distance (x), Near value (y), Far distance (z), Far value (w).
 * @param {float} cameraDistSq The square of the current distance from the camera.
 *
 * @returns {float} The value at this distance.
 */
float czm_nearFarScalar(vec4 nearFarScalar, float cameraDistSq)
{
    float valueAtMin = nearFarScalar.y;
    float valueAtMax = nearFarScalar.w;
    float nearDistanceSq = nearFarScalar.x * nearFarScalar.x;
    float farDistanceSq = nearFarScalar.z * nearFarScalar.z;

    float t = (cameraDistSq - nearDistanceSq) / (farDistanceSq - nearDistanceSq);

    t = pow(clamp(t, 0.0, 1.0), 0.2);

    return mix(valueAtMin, valueAtMax, t);
}
`;var zb=` /**
  * Decodes a unit-length vector in 'oct' encoding to a normalized 3-component Cartesian vector.
  * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
  * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
  *
  * @name czm_octDecode
  * @param {vec2} encoded The oct-encoded, unit-length vector
  * @param {float} range The maximum value of the SNORM range. The encoded vector is stored in log2(rangeMax+1) bits.
  * @returns {vec3} The decoded and normalized vector
  */
  vec3 czm_octDecode(vec2 encoded, float range)
  {
      if (encoded.x == 0.0 && encoded.y == 0.0) {
          return vec3(0.0, 0.0, 0.0);
      }

     encoded = encoded / range * 2.0 - 1.0;
     vec3 v = vec3(encoded.x, encoded.y, 1.0 - abs(encoded.x) - abs(encoded.y));
     if (v.z < 0.0)
     {
         v.xy = (1.0 - abs(v.yx)) * czm_signNotZero(v.xy);
     }

     return normalize(v);
  }

/**
 * Decodes a unit-length vector in 'oct' encoding to a normalized 3-component Cartesian vector.
 * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
 * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
 *
 * @name czm_octDecode
 * @param {vec2} encoded The oct-encoded, unit-length vector
 * @returns {vec3} The decoded and normalized vector
 */
 vec3 czm_octDecode(vec2 encoded)
 {
    return czm_octDecode(encoded, 255.0);
 }

 /**
 * Decodes a unit-length vector in 'oct' encoding packed into a floating-point number to a normalized 3-component Cartesian vector.
 * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
 * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
 *
 * @name czm_octDecode
 * @param {float} encoded The oct-encoded, unit-length vector
 * @returns {vec3} The decoded and normalized vector
 */
 vec3 czm_octDecode(float encoded)
 {
    float temp = encoded / 256.0;
    float x = floor(temp);
    float y = (temp - x) * 256.0;
    return czm_octDecode(vec2(x, y));
 }

/**
 * Decodes three unit-length vectors in 'oct' encoding packed into two floating-point numbers to normalized 3-component Cartesian vectors.
 * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
 * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
 *
 * @name czm_octDecode
 * @param {vec2} encoded The packed oct-encoded, unit-length vectors.
 * @param {vec3} vector1 One decoded and normalized vector.
 * @param {vec3} vector2 One decoded and normalized vector.
 * @param {vec3} vector3 One decoded and normalized vector.
 */
  void czm_octDecode(vec2 encoded, out vec3 vector1, out vec3 vector2, out vec3 vector3)
 {
    float temp = encoded.x / 65536.0;
    float x = floor(temp);
    float encodedFloat1 = (temp - x) * 65536.0;

    temp = encoded.y / 65536.0;
    float y = floor(temp);
    float encodedFloat2 = (temp - y) * 65536.0;

    vector1 = czm_octDecode(encodedFloat1);
    vector2 = czm_octDecode(encodedFloat2);
    vector3 = czm_octDecode(vec2(x, y));
 }

`;var Bb=`/**
 * Packs a depth value into a vec3 that can be represented by unsigned bytes.
 *
 * @name czm_packDepth
 * @glslFunction
 *
 * @param {float} depth The floating-point depth.
 * @returns {vec3} The packed depth.
 */
vec4 czm_packDepth(float depth)
{
    // See Aras Pranckevi\u010Dius' post Encoding Floats to RGBA
    // http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/
    vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * depth;
    enc = fract(enc);
    enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
    return enc;
}
`;var Fb=`vec3 lambertianDiffuse(vec3 diffuseColor)
{
    return diffuseColor / czm_pi;
}

vec3 fresnelSchlick2(vec3 f0, vec3 f90, float VdotH)
{
    return f0 + (f90 - f0) * pow(clamp(1.0 - VdotH, 0.0, 1.0), 5.0);
}

float smithVisibilityG1(float NdotV, float roughness)
{
    // this is the k value for direct lighting.
    // for image based lighting it will be roughness^2 / 2
    float k = (roughness + 1.0) * (roughness + 1.0) / 8.0;
    return NdotV / (NdotV * (1.0 - k) + k);
}

float smithVisibilityGGX(float roughness, float NdotL, float NdotV)
{
    return (
        smithVisibilityG1(NdotL, roughness) *
        smithVisibilityG1(NdotV, roughness)
    );
}

float GGX(float roughness, float NdotH)
{
    float roughnessSquared = roughness * roughness;
    float f = (NdotH * roughnessSquared - NdotH) * NdotH + 1.0;
    return roughnessSquared / (czm_pi * f * f);
}

/**
 * Compute the diffuse and specular contributions using physically based
 * rendering. This function only handles direct lighting.
 * <p>
 * This function only handles the lighting calculations. Metallic/roughness
 * and specular/glossy must be handled separately. See {@czm_pbrMetallicRoughnessMaterial}, {@czm_pbrSpecularGlossinessMaterial} and {@czm_defaultPbrMaterial}
 * </p>
 *
 * @name czm_pbrlighting
 * @glslFunction
 *
 * @param {vec3} positionEC The position of the fragment in eye coordinates
 * @param {vec3} normalEC The surface normal in eye coordinates
 * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.
 * @param {vec3} lightColorHdr radiance of the light source. This is a HDR value.
 * @param {czm_pbrParameters} The computed PBR parameters.
 * @return {vec3} The computed HDR color
 *
 * @example
 * czm_pbrParameters pbrParameters = czm_pbrMetallicRoughnessMaterial(
 *  baseColor,
 *  metallic,
 *  roughness
 * );
 * vec3 color = czm_pbrlighting(
 *  positionEC,
 *  normalEC,
 *  lightDirectionEC,
 *  lightColorHdr,
 *  pbrParameters);
 */
vec3 czm_pbrLighting(
    vec3 positionEC,
    vec3 normalEC,
    vec3 lightDirectionEC,
    vec3 lightColorHdr,
    czm_pbrParameters pbrParameters
)
{
    vec3 v = -normalize(positionEC);
    vec3 l = normalize(lightDirectionEC);
    vec3 h = normalize(v + l);
    vec3 n = normalEC;
    float NdotL = clamp(dot(n, l), 0.001, 1.0);
    float NdotV = abs(dot(n, v)) + 0.001;
    float NdotH = clamp(dot(n, h), 0.0, 1.0);
    float LdotH = clamp(dot(l, h), 0.0, 1.0);
    float VdotH = clamp(dot(v, h), 0.0, 1.0);

    vec3 f0 = pbrParameters.f0;
    float reflectance = max(max(f0.r, f0.g), f0.b);
    vec3 f90 = vec3(clamp(reflectance * 25.0, 0.0, 1.0));
    vec3 F = fresnelSchlick2(f0, f90, VdotH);

    float alpha = pbrParameters.roughness;
    float G = smithVisibilityGGX(alpha, NdotL, NdotV);
    float D = GGX(alpha, NdotH);
    vec3 specularContribution = F * G * D / (4.0 * NdotL * NdotV);

    vec3 diffuseColor = pbrParameters.diffuseColor;
    // F here represents the specular contribution
    vec3 diffuseContribution = (1.0 - F) * lambertianDiffuse(diffuseColor);

    // Lo = (diffuse + specular) * Li * NdotL
    return (diffuseContribution + specularContribution) * NdotL * lightColorHdr;
}
`;var Ub=`/**
 * Compute parameters for physically based rendering using the
 * metallic/roughness workflow. All inputs are linear; sRGB texture values must
 * be decoded beforehand
 *
 * @name czm_pbrMetallicRoughnessMaterial
 * @glslFunction
 *
 * @param {vec3} baseColor For dielectrics, this is the base color. For metals, this is the f0 value (reflectance at normal incidence)
 * @param {float} metallic 0.0 indicates dielectric. 1.0 indicates metal. Values in between are allowed (e.g. to model rust or dirt);
 * @param {float} roughness A value between 0.0 and 1.0
 * @return {czm_pbrParameters} parameters to pass into {@link czm_pbrLighting}
 */
czm_pbrParameters czm_pbrMetallicRoughnessMaterial(
    vec3 baseColor,
    float metallic,
    float roughness
) 
{
    czm_pbrParameters results;

    // roughness is authored as perceptual roughness
    // square it to get material roughness
    roughness = clamp(roughness, 0.0, 1.0);
    results.roughness = roughness * roughness;

    // dielectrics use f0 = 0.04, metals use albedo as f0
    metallic = clamp(metallic, 0.0, 1.0);
    const vec3 REFLECTANCE_DIELECTRIC = vec3(0.04);
    vec3 f0 = mix(REFLECTANCE_DIELECTRIC, baseColor, metallic);
    results.f0 = f0;

    // diffuse only applies to dielectrics.
    results.diffuseColor = baseColor * (1.0 - f0) * (1.0 - metallic);

    return results;
}
`;var kb=`/**
 * Compute parameters for physically based rendering using the
 * specular/glossy workflow. All inputs are linear; sRGB texture values must
 * be decoded beforehand
 *
 * @name czm_pbrSpecularGlossinessMaterial
 * @glslFunction
 *
 * @param {vec3} diffuse The diffuse color for dielectrics (non-metals)
 * @param {vec3} specular The reflectance at normal incidence (f0)
 * @param {float} glossiness A number from 0.0 to 1.0 indicating how smooth the surface is.
 * @return {czm_pbrParameters} parameters to pass into {@link czm_pbrLighting}
 */
czm_pbrParameters czm_pbrSpecularGlossinessMaterial(
    vec3 diffuse,
    vec3 specular,
    float glossiness
) 
{
    czm_pbrParameters results;

    // glossiness is the opposite of roughness, but easier for artists to use.
    float roughness = 1.0 - glossiness;
    results.roughness = roughness * roughness;

    results.diffuseColor = diffuse * (1.0 - max(max(specular.r, specular.g), specular.b));
    results.f0 = specular;

    return results;
}
`;var Vb=`float czm_private_getLambertDiffuseOfMaterial(vec3 lightDirectionEC, czm_material material)
{
    return czm_getLambertDiffuse(lightDirectionEC, material.normal);
}

float czm_private_getSpecularOfMaterial(vec3 lightDirectionEC, vec3 toEyeEC, czm_material material)
{
    return czm_getSpecular(lightDirectionEC, toEyeEC, material.normal, material.shininess);
}

/**
 * Computes a color using the Phong lighting model.
 *
 * @name czm_phong
 * @glslFunction
 *
 * @param {vec3} toEye A normalized vector from the fragment to the eye in eye coordinates.
 * @param {czm_material} material The fragment's material.
 *
 * @returns {vec4} The computed color.
 *
 * @example
 * vec3 positionToEyeEC = // ...
 * czm_material material = // ...
 * vec3 lightDirectionEC = // ...
 * out_FragColor = czm_phong(normalize(positionToEyeEC), material, lightDirectionEC);
 *
 * @see czm_getMaterial
 */
vec4 czm_phong(vec3 toEye, czm_material material, vec3 lightDirectionEC)
{
    // Diffuse from directional light sources at eye (for top-down)
    float diffuse = czm_private_getLambertDiffuseOfMaterial(vec3(0.0, 0.0, 1.0), material);
    if (czm_sceneMode == czm_sceneMode3D) {
        // (and horizon views in 3D)
        diffuse += czm_private_getLambertDiffuseOfMaterial(vec3(0.0, 1.0, 0.0), material);
    }

    float specular = czm_private_getSpecularOfMaterial(lightDirectionEC, toEye, material);

    // Temporary workaround for adding ambient.
    vec3 materialDiffuse = material.diffuse * 0.5;

    vec3 ambient = materialDiffuse;
    vec3 color = ambient + material.emission;
    color += materialDiffuse * diffuse * czm_lightColor;
    color += material.specular * specular * czm_lightColor;

    return vec4(color, material.alpha);
}

//added by xuebin  2020.5.18 begin
vec4 czm_phong(vec3 toEye, czm_material material)
{
	return czm_phong(toEye, material,czm_lightDirectionEC);
}
//added by xuebin  end
vec4 czm_private_phong(vec3 toEye, czm_material material, vec3 lightDirectionEC)
{
    float diffuse = czm_private_getLambertDiffuseOfMaterial(lightDirectionEC, material);
    float specular = czm_private_getSpecularOfMaterial(lightDirectionEC, toEye, material);

    vec3 ambient = vec3(0.0);
    vec3 color = ambient + material.emission;
    color += material.diffuse * diffuse * czm_lightColor;
    color += material.specular * specular * czm_lightColor;

    return vec4(color, material.alpha);
}
`;var jb=`/**
 * Computes distance from a point to a plane.
 *
 * @name czm_planeDistance
 * @glslFunction
 *
 * param {vec4} plane A Plane in Hessian Normal Form. See Plane.js
 * param {vec3} point A point in the same space as the plane.
 * returns {float} The distance from the point to the plane.
 */
float czm_planeDistance(vec4 plane, vec3 point) {
    return (dot(plane.xyz, point) + plane.w);
}

/**
 * Computes distance from a point to a plane.
 *
 * @name czm_planeDistance
 * @glslFunction
 *
 * param {vec3} planeNormal Normal for a plane in Hessian Normal Form. See Plane.js
 * param {float} planeDistance Distance for a plane in Hessian Normal form. See Plane.js
 * param {vec3} point A point in the same space as the plane.
 * returns {float} The distance from the point to the plane.
 */
float czm_planeDistance(vec3 planeNormal, float planeDistance, vec3 point) {
    return (dot(planeNormal, point) + planeDistance);
}
`;var Gb=`/**
 * Computes the point along a ray at the given time.  <code>time</code> can be positive, negative, or zero.
 *
 * @name czm_pointAlongRay
 * @glslFunction
 *
 * @param {czm_ray} ray The ray to compute the point along.
 * @param {float} time The time along the ray.
 * 
 * @returns {vec3} The point along the ray at the given time.
 * 
 * @example
 * czm_ray ray = czm_ray(vec3(0.0), vec3(1.0, 0.0, 0.0)); // origin, direction
 * vec3 v = czm_pointAlongRay(ray, 2.0); // (2.0, 0.0, 0.0)
 */
vec3 czm_pointAlongRay(czm_ray ray, float time)
{
    return ray.origin + (time * ray.direction);
}
`;var Hb=`/**
 * DOC_TBA
 *
 * @name czm_rayEllipsoidIntersectionInterval
 * @glslFunction
 */
czm_raySegment czm_rayEllipsoidIntersectionInterval(czm_ray ray, vec3 ellipsoid_center, vec3 ellipsoid_inverseRadii)
{
   // ray and ellipsoid center in eye coordinates.  radii in model coordinates.
    vec3 q = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ray.origin, 1.0)).xyz;
    vec3 w = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ray.direction, 0.0)).xyz;

    q = q - ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ellipsoid_center, 1.0)).xyz;

    float q2 = dot(q, q);
    float qw = dot(q, w);

    if (q2 > 1.0) // Outside ellipsoid.
    {
        if (qw >= 0.0) // Looking outward or tangent (0 intersections).
        {
            return czm_emptyRaySegment;
        }
        else // qw < 0.0.
        {
            float qw2 = qw * qw;
            float difference = q2 - 1.0; // Positively valued.
            float w2 = dot(w, w);
            float product = w2 * difference;

            if (qw2 < product) // Imaginary roots (0 intersections).
            {
                return czm_emptyRaySegment;
            }
            else if (qw2 > product) // Distinct roots (2 intersections).
            {
                float discriminant = qw * qw - product;
                float temp = -qw + sqrt(discriminant); // Avoid cancellation.
                float root0 = temp / w2;
                float root1 = difference / temp;
                if (root0 < root1)
                {
                    czm_raySegment i = czm_raySegment(root0, root1);
                    return i;
                }
                else
                {
                    czm_raySegment i = czm_raySegment(root1, root0);
                    return i;
                }
            }
            else // qw2 == product.  Repeated roots (2 intersections).
            {
                float root = sqrt(difference / w2);
                czm_raySegment i = czm_raySegment(root, root);
                return i;
            }
        }
    }
    else if (q2 < 1.0) // Inside ellipsoid (2 intersections).
    {
        float difference = q2 - 1.0; // Negatively valued.
        float w2 = dot(w, w);
        float product = w2 * difference; // Negatively valued.
        float discriminant = qw * qw - product;
        float temp = -qw + sqrt(discriminant); // Positively valued.
        czm_raySegment i = czm_raySegment(0.0, temp / w2);
        return i;
    }
    else // q2 == 1.0. On ellipsoid.
    {
        if (qw < 0.0) // Looking inward.
        {
            float w2 = dot(w, w);
            czm_raySegment i = czm_raySegment(0.0, -qw / w2);
            return i;
        }
        else // qw >= 0.0.  Looking outward or tangent.
        {
            return czm_emptyRaySegment;
        }
    }
}
`;var qb=`/**
 * Compute the intersection interval of a ray with a sphere.
 *
 * @name czm_raySphereIntersectionInterval
 * @glslFunction
 *
 * @param {czm_ray} ray The ray.
 * @param {vec3} center The center of the sphere.
 * @param {float} radius The radius of the sphere.
 * @return {czm_raySegment} The intersection interval of the ray with the sphere.
 */
czm_raySegment czm_raySphereIntersectionInterval(czm_ray ray, vec3 center, float radius)
{
    vec3 o = ray.origin;
    vec3 d = ray.direction;

    vec3 oc = o - center;

    float a = dot(d, d);
    float b = 2.0 * dot(d, oc);
    float c = dot(oc, oc) - (radius * radius);

    float det = (b * b) - (4.0 * a * c);

    if (det < 0.0) {
        return czm_emptyRaySegment;
    }

    float sqrtDet = sqrt(det);

    float t0 = (-b - sqrtDet) / (2.0 * a);
    float t1 = (-b + sqrtDet) / (2.0 * a);

    czm_raySegment result = czm_raySegment(t0, t1);
    return result;
}
`;var Wb=`float czm_readDepth(sampler2D depthTexture, vec2 texCoords)
{
    return czm_reverseLogDepth(texture(depthTexture, texCoords).r);
}
`;var Kb=`/**
 * Reads a value previously transformed with {@link czm_writeNonPerspective}
 * by dividing it by \`w\`, the value used in the perspective divide.
 * This function is intended to be called in a fragment shader to access a
 * \`varying\` that should not be subject to perspective interpolation.
 * For example, screen-space texture coordinates. The value should have been
 * previously written in the vertex shader with a call to
 * {@link czm_writeNonPerspective}.
 *
 * @name czm_readNonPerspective
 * @glslFunction
 *
 * @param {float|vec2|vec3|vec4} value The non-perspective value to be read.
 * @param {float} oneOverW One over the perspective divide value, \`w\`. Usually this is simply \`gl_FragCoord.w\`.
 * @returns {float|vec2|vec3|vec4} The usable value.
 */
float czm_readNonPerspective(float value, float oneOverW) {
    return value * oneOverW;
}

vec2 czm_readNonPerspective(vec2 value, float oneOverW) {
    return value * oneOverW;
}

vec3 czm_readNonPerspective(vec3 value, float oneOverW) {
    return value * oneOverW;
}

vec4 czm_readNonPerspective(vec4 value, float oneOverW) {
    return value * oneOverW;
}
`;var Yb=`float czm_reverseLogDepth(float logZ)
{
#ifdef LOG_DEPTH
    float near = czm_currentFrustum.x;
    float far = czm_currentFrustum.y;
    float log2Depth = logZ * czm_log2FarDepthFromNearPlusOne;
    float depthFromNear = pow(2.0, log2Depth) - 1.0;
    return far * (1.0 - near / (depthFromNear + near)) / (far - near);
#endif
    return logZ;
}
`;var Zb=`/**
 * Converts an RGB color to HSB (hue, saturation, brightness)
 * HSB <-> RGB conversion with minimal branching: {@link http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl}
 *
 * @name czm_RGBToHSB
 * @glslFunction
 * 
 * @param {vec3} rgb The color in RGB.
 *
 * @returns {vec3} The color in HSB.
 *
 * @example
 * vec3 hsb = czm_RGBToHSB(rgb);
 * hsb.z *= 0.1;
 * rgb = czm_HSBToRGB(hsb);
 */

const vec4 K_RGB2HSB = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);

vec3 czm_RGBToHSB(vec3 rgb)
{
    vec4 p = mix(vec4(rgb.bg, K_RGB2HSB.wz), vec4(rgb.gb, K_RGB2HSB.xy), step(rgb.b, rgb.g));
    vec4 q = mix(vec4(p.xyw, rgb.r), vec4(rgb.r, p.yzx), step(p.x, rgb.r));

    float d = q.x - min(q.w, q.y);
    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + czm_epsilon7)), d / (q.x + czm_epsilon7), q.x);
}
`;var Jb=`/**
 * Converts an RGB color to HSL (hue, saturation, lightness)
 * HSL <-> RGB conversion: {@link http://www.chilliant.com/rgb2hsv.html}
 *
 * @name czm_RGBToHSL
 * @glslFunction
 * 
 * @param {vec3} rgb The color in RGB.
 *
 * @returns {vec3} The color in HSL.
 *
 * @example
 * vec3 hsl = czm_RGBToHSL(rgb);
 * hsl.z *= 0.1;
 * rgb = czm_HSLToRGB(hsl);
 */
 
vec3 RGBtoHCV(vec3 rgb)
{
    // Based on work by Sam Hocevar and Emil Persson
    vec4 p = (rgb.g < rgb.b) ? vec4(rgb.bg, -1.0, 2.0 / 3.0) : vec4(rgb.gb, 0.0, -1.0 / 3.0);
    vec4 q = (rgb.r < p.x) ? vec4(p.xyw, rgb.r) : vec4(rgb.r, p.yzx);
    float c = q.x - min(q.w, q.y);
    float h = abs((q.w - q.y) / (6.0 * c + czm_epsilon7) + q.z);
    return vec3(h, c, q.x);
}

vec3 czm_RGBToHSL(vec3 rgb)
{
    vec3 hcv = RGBtoHCV(rgb);
    float l = hcv.z - hcv.y * 0.5;
    float s = hcv.y / (1.0 - abs(l * 2.0 - 1.0) + czm_epsilon7);
    return vec3(hcv.x, s, l);
}
`;var Xb=`/**
 * Converts an RGB color to CIE Yxy.
 * <p>The conversion is described in
 * {@link http://content.gpwiki.org/index.php/D3DBook:High-Dynamic_Range_Rendering#Luminance_Transform|Luminance Transform}
 * </p>
 * 
 * @name czm_RGBToXYZ
 * @glslFunction
 * 
 * @param {vec3} rgb The color in RGB.
 *
 * @returns {vec3} The color in CIE Yxy.
 *
 * @example
 * vec3 xyz = czm_RGBToXYZ(rgb);
 * xyz.x = max(xyz.x - luminanceThreshold, 0.0);
 * rgb = czm_XYZToRGB(xyz);
 */
vec3 czm_RGBToXYZ(vec3 rgb)
{
    const mat3 RGB2XYZ = mat3(0.4124, 0.2126, 0.0193,
                              0.3576, 0.7152, 0.1192,
                              0.1805, 0.0722, 0.9505);
    vec3 xyz = RGB2XYZ * rgb;
    vec3 Yxy;
    Yxy.r = xyz.g;
    float temp = dot(vec3(1.0), xyz);
    Yxy.gb = xyz.rg / temp;
    return Yxy;
}
`;var $b=`/**
 *
 * @name czm_rollerShutter
 * @glslFunction 
 * 
 * xuebing
 */
void czm_rollerShutter(vec2 coord,vec4 region)
{
	vec2 st = coord / czm_viewport.zw;
	if(st.x < region.x || st.x > region.z){
		discard;
	}
	if(st.y < region.y || st.y > region.w){
		discard;
	}
}
`;var Qb=`/**
 * Round a floating point value. This function exists because round() doesn't
 * exist in GLSL 1.00. 
 *
 * @param {float|vec2|vec3|vec4} value The value to round
 * @param {float|vec2|vec3|vec3} The rounded value. The type matches the input.
 */
float czm_round(float value) {
  return floor(value + 0.5);
}

vec2 czm_round(vec2 value) {
  return floor(value + 0.5);
}

vec3 czm_round(vec3 value) {
  return floor(value + 0.5);
}

vec4 czm_round(vec4 value) {
  return floor(value + 0.5);
}
`;var ex=`/**
 * Samples the 4 neighboring pixels and return the weighted average.
 *
 * @private
 */
vec3 czm_sampleOctahedralProjectionWithFiltering(sampler2D projectedMap, vec2 textureSize, vec3 direction, float lod)
{
    direction /= dot(vec3(1.0), abs(direction));
    vec2 rev = abs(direction.zx) - vec2(1.0);
    vec2 neg = vec2(direction.x < 0.0 ? rev.x : -rev.x,
                    direction.z < 0.0 ? rev.y : -rev.y);
    vec2 uv = direction.y < 0.0 ? neg : direction.xz;
    vec2 coord = 0.5 * uv + vec2(0.5);
    vec2 pixel = 1.0 / textureSize;

    if (lod > 0.0)
    {
        // Each subseqeuent mip level is half the size
        float scale = 1.0 / pow(2.0, lod);
        float offset = ((textureSize.y + 1.0) / textureSize.x);

        coord.x *= offset;
        coord *= scale;

        coord.x += offset + pixel.x;
        coord.y += (1.0 - (1.0 / pow(2.0, lod - 1.0))) + pixel.y * (lod - 1.0) * 2.0;
    }
    else
    {
        coord.x *= (textureSize.y / textureSize.x);
    }

    // Do bilinear filtering
    #ifndef OES_texture_float_linear
        vec3 color1 = texture(projectedMap, coord + vec2(0.0, pixel.y)).rgb;
        vec3 color2 = texture(projectedMap, coord + vec2(pixel.x, 0.0)).rgb;
        vec3 color3 = texture(projectedMap, coord + pixel).rgb;
        vec3 color4 = texture(projectedMap, coord).rgb;

        vec2 texturePosition = coord * textureSize;

        float fu = fract(texturePosition.x);
        float fv = fract(texturePosition.y);

        vec3 average1 = mix(color4, color2, fu);
        vec3 average2 = mix(color1, color3, fu);

        vec3 color = mix(average1, average2, fv);
    #else
        vec3 color = texture(projectedMap, coord).rgb;
    #endif

    return color;
}


/**
 * Samples from a cube map that has been projected using an octahedral projection from the given direction.
 *
 * @name czm_sampleOctahedralProjection
 * @glslFunction
 *
 * @param {sampler2D} projectedMap The texture with the octahedral projected cube map.
 * @param {vec2} textureSize The width and height dimensions in pixels of the projected map.
 * @param {vec3} direction The normalized direction used to sample the cube map.
 * @param {float} lod The level of detail to sample.
 * @param {float} maxLod The maximum level of detail.
 * @returns {vec3} The color of the cube map at the direction.
 */
vec3 czm_sampleOctahedralProjection(sampler2D projectedMap, vec2 textureSize, vec3 direction, float lod, float maxLod) {
    float currentLod = floor(lod + 0.5);
    float nextLod = min(currentLod + 1.0, maxLod);

    vec3 colorCurrentLod = czm_sampleOctahedralProjectionWithFiltering(projectedMap, textureSize, direction, currentLod);
    vec3 colorNextLod = czm_sampleOctahedralProjectionWithFiltering(projectedMap, textureSize, direction, nextLod);

    return mix(colorNextLod, colorCurrentLod, nextLod - lod);
}
`;var tx=`/**
 * Adjusts the saturation of a color.
 * 
 * @name czm_saturation
 * @glslFunction
 * 
 * @param {vec3} rgb The color.
 * @param {float} adjustment The amount to adjust the saturation of the color.
 *
 * @returns {float} The color with the saturation adjusted.
 *
 * @example
 * vec3 greyScale = czm_saturation(color, 0.0);
 * vec3 doubleSaturation = czm_saturation(color, 2.0);
 */
vec3 czm_saturation(vec3 rgb, float adjustment)
{
    // Algorithm from Chapter 16 of OpenGL Shading Language
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    vec3 intensity = vec3(dot(rgb, W));
    return mix(intensity, rgb, adjustment);
}
`;var nx=`
float czm_sampleShadowMap(highp samplerCube shadowMap, vec3 d)
{
    return czm_unpackDepth(czm_textureCube(shadowMap, d));
}

float czm_sampleShadowMap(highp sampler2D shadowMap, vec2 uv)
{
#ifdef USE_SHADOW_DEPTH_TEXTURE
    return texture(shadowMap, uv).r;
#else
    return czm_unpackDepth(texture(shadowMap, uv));
#endif
}

float czm_shadowDepthCompare(samplerCube shadowMap, vec3 uv, float depth)
{
    return step(depth, czm_sampleShadowMap(shadowMap, uv));
}

float czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth)
{
    return step(depth, czm_sampleShadowMap(shadowMap, uv));
}
`;var ix=`
float czm_private_shadowVisibility(float visibility, float nDotL, float normalShadingSmooth, float darkness)
{
#ifdef USE_NORMAL_SHADING
#ifdef USE_NORMAL_SHADING_SMOOTH
    float strength = clamp(nDotL / normalShadingSmooth, 0.0, 1.0);
#else
    float strength = step(0.0, nDotL);
#endif
    visibility *= strength;
#endif

    visibility = max(visibility, darkness);
    return visibility;
}

#ifdef USE_CUBE_MAP_SHADOW
float czm_shadowVisibility(samplerCube shadowMap, czm_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec3 uvw = shadowParameters.texCoords;

    depth -= depthBias;
    float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);
    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}
#else
float czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec2 uv = shadowParameters.texCoords;

    depth -= depthBias;
#ifdef USE_SOFT_SHADOWS
    vec2 texelStepSize = shadowParameters.texelStepSize;
    float radius = 1.0;
    float dx0 = -texelStepSize.x * radius;
    float dy0 = -texelStepSize.y * radius;
    float dx1 = texelStepSize.x * radius;
    float dy1 = texelStepSize.y * radius;
    float visibility = (
        czm_shadowDepthCompare(shadowMap, uv, depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)
    ) * (1.0 / 9.0);
#else
    float visibility = czm_shadowDepthCompare(shadowMap, uv, depth);
#endif

    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}
#endif
`;var ox=`/**
 * Returns 1.0 if the given value is positive or zero, and -1.0 if it is negative.  This is similar to the GLSL
 * built-in function <code>sign</code> except that returns 1.0 instead of 0.0 when the input value is 0.0.
 * 
 * @name czm_signNotZero
 * @glslFunction
 *
 * @param {} value The value for which to determine the sign.
 * @returns {} 1.0 if the value is positive or zero, -1.0 if the value is negative.
 */
float czm_signNotZero(float value)
{
    return value >= 0.0 ? 1.0 : -1.0;
}

vec2 czm_signNotZero(vec2 value)
{
    return vec2(czm_signNotZero(value.x), czm_signNotZero(value.y));
}

vec3 czm_signNotZero(vec3 value)
{
    return vec3(czm_signNotZero(value.x), czm_signNotZero(value.y), czm_signNotZero(value.z));
}

vec4 czm_signNotZero(vec4 value)
{
    return vec4(czm_signNotZero(value.x), czm_signNotZero(value.y), czm_signNotZero(value.z), czm_signNotZero(value.w));
}
`;var rx=`/**
 * Computes a color from the third order spherical harmonic coefficients and a normalized direction vector.
 * <p>
 * The order of the coefficients is [L00, L1_1, L10, L11, L2_2, L2_1, L20, L21, L22].
 * </p>
 *
 * @name czm_sphericalHarmonics
 * @glslFunction
 *
 * @param {vec3} normal The normalized direction.
 * @param {vec3[9]} coefficients The third order spherical harmonic coefficients.
 * @returns {vec3} The color at the direction.
 *
 * @see https://graphics.stanford.edu/papers/envmap/envmap.pdf
 */
vec3 czm_sphericalHarmonics(vec3 normal, vec3 coefficients[9])
{
    vec3 L00 = coefficients[0];
    vec3 L1_1 = coefficients[1];
    vec3 L10 = coefficients[2];
    vec3 L11 = coefficients[3];
    vec3 L2_2 = coefficients[4];
    vec3 L2_1 = coefficients[5];
    vec3 L20 = coefficients[6];
    vec3 L21 = coefficients[7];
    vec3 L22 = coefficients[8];

    float x = normal.x;
    float y = normal.y;
    float z = normal.z;

    return
          L00
        + L1_1 * y
        + L10 * z
        + L11 * x
        + L2_2 * (y * x)
        + L2_1 * (y * z)
        + L20 * (3.0 * z * z - 1.0)
        + L21 * (z * x)
        + L22 * (x * x - y * y);
}
`;var ax=`/**
 * Converts an sRGB color to a linear RGB color.
 *
 * @param {vec3|vec4} srgbIn The color in sRGB space
 * @returns {vec3|vec4} The color in linear color space. The vector type matches the input.
 */
vec3 czm_srgbToLinear(vec3 srgbIn)
{
    return pow(srgbIn, vec3(2.2));
}

vec4 czm_srgbToLinear(vec4 srgbIn) 
{
    vec3 linearOut = pow(srgbIn.rgb, vec3(2.2));
    return vec4(linearOut, srgbIn.a);
}
`;var sx=`/**
 * Creates a matrix that transforms vectors from tangent space to eye space.
 *
 * @name czm_tangentToEyeSpaceMatrix
 * @glslFunction
 *
 * @param {vec3} normalEC The normal vector in eye coordinates.
 * @param {vec3} tangentEC The tangent vector in eye coordinates.
 * @param {vec3} bitangentEC The bitangent vector in eye coordinates.
 *
 * @returns {mat3} The matrix that transforms from tangent space to eye space.
 *
 * @example
 * mat3 tangentToEye = czm_tangentToEyeSpaceMatrix(normalEC, tangentEC, bitangentEC);
 * vec3 normal = tangentToEye * texture(normalMap, st).xyz;
 */
mat3 czm_tangentToEyeSpaceMatrix(vec3 normalEC, vec3 tangentEC, vec3 bitangentEC)
{
    vec3 normal = normalize(normalEC);
    vec3 tangent = normalize(tangentEC);
    vec3 bitangent = normalize(bitangentEC);
    return mat3(tangent.x  , tangent.y  , tangent.z,
                bitangent.x, bitangent.y, bitangent.z,
                normal.x   , normal.y   , normal.z);
}
`;var cx=`/**
 * A wrapper around the texture (WebGL2) / textureCube (WebGL1)
 * function to allow for WebGL 1 support.
 * 
 * @name czm_textureCube
 * @glslFunction
 *
 * @param {samplerCube} sampler The sampler.
 * @param {vec3} p The coordinates to sample the texture at.
 */
vec4 czm_textureCube(samplerCube sampler, vec3 p) {
#if __VERSION__ == 300
    return texture(sampler, p);
#else  
    return textureCube(sampler, p);
#endif
}`;var ux=`/**
 * Transforms a plane.
 * 
 * @name czm_transformPlane
 * @glslFunction
 *
 * @param {vec4} plane The plane in Hessian Normal Form.
 * @param {mat4} transform The inverse-transpose of a transformation matrix.
 */
vec4 czm_transformPlane(vec4 plane, mat4 transform) {
    vec4 transformedPlane = transform * plane;
    // Convert the transformed plane to Hessian Normal Form
    float normalMagnitude = length(transformedPlane.xyz);
    return transformedPlane / normalMagnitude;
}
`;var lx=`/**
 * Transforms a plane.
 * 
 * @name czm_transformPlaneOld
 * @glslFunction
 *
 * @param {vec4} plane The plane in Hessian Normal Form.
 * @param {mat4} transform The inverse-transpose of a transformation matrix.
 */
// add 20221019
vec4 czm_transformPlaneOld(vec4 clippingPlane, mat4 transform) {
    vec3 transformedDirection = normalize((transform * vec4(clippingPlane.xyz, 0.0)).xyz);
    vec3 transformedPosition = (transform * vec4(clippingPlane.xyz * -clippingPlane.w, 1.0)).xyz;
    vec4 transformedPlane;
    transformedPlane.xyz = transformedDirection;
    transformedPlane.w = -dot(transformedDirection, transformedPosition);
    return transformedPlane;
}

`;var px=`/**
 * Translates a position (or any <code>vec3</code>) that was encoded with {@link EncodedCartesian3},
 * and then provided to the shader as separate <code>high</code> and <code>low</code> bits to
 * be relative to the eye.  As shown in the example, the position can then be transformed in eye
 * or clip coordinates using {@link czm_modelViewRelativeToEye} or {@link czm_modelViewProjectionRelativeToEye},
 * respectively.
 * <p>
 * This technique, called GPU RTE, eliminates jittering artifacts when using large coordinates as
 * described in {@link http://help.agi.com/AGIComponents/html/BlogPrecisionsPrecisions.htm|Precisions, Precisions}.
 * </p>
 *
 * @name czm_translateRelativeToEye
 * @glslFunction
 *
 * @param {vec3} high The position's high bits.
 * @param {vec3} low The position's low bits.
 * @returns {vec3} The position translated to be relative to the camera's position.
 *
 * @example
 * in vec3 positionHigh;
 * in vec3 positionLow;
 *
 * void main()
 * {
 *   vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);
 *   gl_Position = czm_modelViewProjectionRelativeToEye * p;
 * }
 *
 * @see czm_modelViewRelativeToEye
 * @see czm_modelViewProjectionRelativeToEye
 * @see czm_computePosition
 * @see EncodedCartesian3
 */
vec4 czm_translateRelativeToEye(vec3 high, vec3 low)
{
    vec3 highDifference = high - czm_encodedCameraPositionMCHigh;
    vec3 lowDifference = low - czm_encodedCameraPositionMCLow;

    return vec4(highDifference + lowDifference, 1.0);
}
`;var dx=`/**
 * @private
 */
vec4 czm_translucentPhong(vec3 toEye, czm_material material, vec3 lightDirectionEC)
{
    // Diffuse from directional light sources at eye (for top-down and horizon views)
    float diffuse = czm_getLambertDiffuse(vec3(0.0, 0.0, 1.0), material.normal);

    if (czm_sceneMode == czm_sceneMode3D) {
        // (and horizon views in 3D)
        diffuse += czm_getLambertDiffuse(vec3(0.0, 1.0, 0.0), material.normal);
    }

    diffuse = clamp(diffuse, 0.0, 1.0);

    float specular = czm_getSpecular(lightDirectionEC, toEye, material.normal, material.shininess);

    // Temporary workaround for adding ambient.
    vec3 materialDiffuse = material.diffuse * 0.5;

    vec3 ambient = materialDiffuse;
    vec3 color = ambient + material.emission;
    color += materialDiffuse * diffuse * czm_lightColor;
    color += material.specular * specular * czm_lightColor;

    return vec4(color, material.alpha);
}
//added by xuebin 2020.5.18   wuhanguoyao
vec4 czm_translucentPhong(vec3 toEye, czm_material material)
{
   return czm_translucentPhong(toEye, material, czm_lightDirectionEC);
}
`;var fx=`/**
 * Returns the transpose of the matrix.  The input <code>matrix</code> can be
 * a <code>mat2</code>, <code>mat3</code>, or <code>mat4</code>.
 *
 * @name czm_transpose
 * @glslFunction
 *
 * @param {} matrix The matrix to transpose.
 *
 * @returns {} The transposed matrix.
 *
 * @example
 * // GLSL declarations
 * mat2 czm_transpose(mat2 matrix);
 * mat3 czm_transpose(mat3 matrix);
 * mat4 czm_transpose(mat4 matrix);
 *
 * // Transpose a 3x3 rotation matrix to find its inverse.
 * mat3 eastNorthUpToEye = czm_eastNorthUpToEyeCoordinates(
 *     positionMC, normalEC);
 * mat3 eyeToEastNorthUp = czm_transpose(eastNorthUpToEye);
 */
mat2 czm_transpose(mat2 matrix)
{
    return mat2(
        matrix[0][0], matrix[1][0],
        matrix[0][1], matrix[1][1]);
}

mat3 czm_transpose(mat3 matrix)
{
    return mat3(
        matrix[0][0], matrix[1][0], matrix[2][0],
        matrix[0][1], matrix[1][1], matrix[2][1],
        matrix[0][2], matrix[1][2], matrix[2][2]);
}

mat4 czm_transpose(mat4 matrix)
{
    return mat4(
        matrix[0][0], matrix[1][0], matrix[2][0], matrix[3][0],
        matrix[0][1], matrix[1][1], matrix[2][1], matrix[3][1],
        matrix[0][2], matrix[1][2], matrix[2][2], matrix[3][2],
        matrix[0][3], matrix[1][3], matrix[2][3], matrix[3][3]);
}
`;var mx=`/**
 * Unpacks a vec4 depth value to a float in [0, 1) range.
 *
 * @name czm_unpackDepth
 * @glslFunction
 *
 * @param {vec4} packedDepth The packed depth.
 *
 * @returns {float} The floating-point depth in [0, 1) range.
 */
 float czm_unpackDepth(vec4 packedDepth)
 {
    // See Aras Pranckevi\u010Dius' post Encoding Floats to RGBA
    // http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/
    return dot(packedDepth, vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 16581375.0));
 }
`;var hx=`/**
 * Unpack an IEEE 754 single-precision float that is packed as a little-endian unsigned normalized vec4.
 *
 * @name czm_unpackFloat
 * @glslFunction
 *
 * @param {vec4} packedFloat The packed float.
 *
 * @returns {float} The floating-point depth in arbitrary range.
 */
float czm_unpackFloat(vec4 packedFloat)
{
    // Convert to [0.0, 255.0] and round to integer
    packedFloat = floor(packedFloat * 255.0 + 0.5);
    float sign = 1.0 - step(128.0, packedFloat[3]) * 2.0;
    float exponent = 2.0 * mod(packedFloat[3], 128.0) + step(128.0, packedFloat[2]) - 127.0;    
    if (exponent == -127.0)
    {
        return 0.0;
    }
    float mantissa = mod(packedFloat[2], 128.0) * 65536.0 + packedFloat[1] * 256.0 + packedFloat[0] + float(0x800000);
    float result = sign * exp2(exponent - 23.0) * mantissa;
    return result;
}
`;var gx=`/**
 * Unpack unsigned integers of 1-4 bytes. in WebGL 1, there is no uint type,
 * so the return value is an int.
 * <p>
 * There are also precision limitations in WebGL 1. highp int is still limited
 * to 24 bits. Above the value of 2^24 = 16777216, precision loss may occur.
 * </p>
 *
 * @param {float|vec2|vec3|vec4} packed The packed value. For vectors, the components are listed in little-endian order.
 *
 * @return {int} The unpacked value.
 */
 int czm_unpackUint(float packedValue) {
   float rounded = czm_round(packedValue * 255.0);
   return int(rounded);
 }

 int czm_unpackUint(vec2 packedValue) {
   vec2 rounded = czm_round(packedValue * 255.0);
   return int(dot(rounded, vec2(1.0, 256.0)));
 }

 int czm_unpackUint(vec3 packedValue) {
   vec3 rounded = czm_round(packedValue * 255.0);
   return int(dot(rounded, vec3(1.0, 256.0, 65536.0)));
 }

 int czm_unpackUint(vec4 packedValue) {
   vec4 rounded = czm_round(packedValue * 255.0);
   return int(dot(rounded, vec4(1.0, 256.0, 65536.0, 16777216.0)));
 }
`;var _x=`/**
 * Transform metadata values following the EXT_structural_metadata spec
 * by multiplying by scale and adding the offset. Operations are always
 * performed component-wise, even for matrices.
 * 
 * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} offset The offset to add
 * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} scale The scale factor to multiply
 * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} value The original value.
 *
 * @return {float|vec2|vec3|vec4|mat2|mat3|mat4} The transformed value of the same scalar/vector/matrix type as the input.
 */
float czm_valueTransform(float offset, float scale, float value) {
  return scale * value + offset;
}

vec2 czm_valueTransform(vec2 offset, vec2 scale, vec2 value) {
  return scale * value + offset;
}

vec3 czm_valueTransform(vec3 offset, vec3 scale, vec3 value) {
  return scale * value + offset;
}

vec4 czm_valueTransform(vec4 offset, vec4 scale, vec4 value) {
  return scale * value + offset;
}

mat2 czm_valueTransform(mat2 offset, mat2 scale, mat2 value) {
  return matrixCompMult(scale, value) + offset;
}

mat3 czm_valueTransform(mat3 offset, mat3 scale, mat3 value) {
  return matrixCompMult(scale, value) + offset;
}

mat4 czm_valueTransform(mat4 offset, mat4 scale, mat4 value) {
  return matrixCompMult(scale, value) + offset;
}
`;var yx=`#ifdef LOG_DEPTH
// 1.0 at the near plane, increasing linearly from there.
out float v_depthFromNearPlusOne;
#ifdef SHADOW_MAP
out vec3 v_logPositionEC;
#endif
#endif

vec4 czm_updatePositionDepth(vec4 coords) {
#if defined(LOG_DEPTH)

#ifdef SHADOW_MAP
    vec3 logPositionEC = (czm_inverseProjection * coords).xyz;
    v_logPositionEC = logPositionEC;
#endif

    // With the very high far/near ratios used with the logarithmic depth
    // buffer, floating point rounding errors can cause linear depth values
    // to end up on the wrong side of the far plane, even for vertices that
    // are really nowhere near it. Since we always write a correct logarithmic
    // depth value in the fragment shader anyway, we just need to make sure
    // such errors don't cause the primitive to be clipped entirely before
    // we even get to the fragment shader.
    coords.z = clamp(coords.z / coords.w, -1.0, 1.0) * coords.w;
#endif

    return coords;
}

/**
 * Writes the logarithmic depth to gl_Position using the already computed gl_Position.
 *
 * @name czm_vertexLogDepth
 * @glslFunction
 */
void czm_vertexLogDepth()
{
#ifdef LOG_DEPTH
    v_depthFromNearPlusOne = (gl_Position.w - czm_currentFrustum.x) + 1.0;
    gl_Position = czm_updatePositionDepth(gl_Position);
#endif
}

/**
 * Writes the logarithmic depth to gl_Position using the provided clip coordinates.
 * <p>
 * An example use case for this function would be moving the vertex in window coordinates
 * before converting back to clip coordinates. Use the original vertex clip coordinates.
 * </p>
 * @name czm_vertexLogDepth
 * @glslFunction
 *
 * @param {vec4} clipCoords The vertex in clip coordinates.
 *
 * @example
 * czm_vertexLogDepth(czm_projection * vec4(positionEyeCoordinates, 1.0));
 */
void czm_vertexLogDepth(vec4 clipCoords)
{
#ifdef LOG_DEPTH
    v_depthFromNearPlusOne = (clipCoords.w - czm_currentFrustum.x) + 1.0;
    czm_updatePositionDepth(clipCoords);
#endif
}
`;var vx=`vec4 czm_screenToEyeCoordinates(vec4 screenCoordinate)
{
    // Reconstruct NDC coordinates
    float x = 2.0 * screenCoordinate.x - 1.0;
    float y = 2.0 * screenCoordinate.y - 1.0;
    float z = (screenCoordinate.z - czm_viewportTransformation[3][2]) / czm_viewportTransformation[2][2];
    vec4 q = vec4(x, y, z, 1.0);

    // Reverse the perspective division to obtain clip coordinates.
    q /= screenCoordinate.w;

    // Reverse the projection transformation to obtain eye coordinates.
    if (!(czm_inverseProjection == mat4(0.0))) // IE and Edge sometimes do something weird with != between mat4s
    {
        q = czm_inverseProjection * q;
    }
    else
    {
        float top = czm_frustumPlanes.x;
        float bottom = czm_frustumPlanes.y;
        float left = czm_frustumPlanes.z;
        float right = czm_frustumPlanes.w;

        float near = czm_currentFrustum.x;
        float far = czm_currentFrustum.y;

        q.x = (q.x * (right - left) + left + right) * 0.5;
        q.y = (q.y * (top - bottom) + bottom + top) * 0.5;
        q.z = (q.z * (near - far) - near - far) * 0.5;
        q.w = 1.0;
    }

    return q;
}

/**
 * Transforms a position from window to eye coordinates.
 * The transform from window to normalized device coordinates is done using components
 * of (@link czm_viewport} and {@link czm_viewportTransformation} instead of calculating
 * the inverse of <code>czm_viewportTransformation</code>. The transformation from
 * normalized device coordinates to clip coordinates is done using <code>fragmentCoordinate.w</code>,
 * which is expected to be the scalar used in the perspective divide. The transformation
 * from clip to eye coordinates is done using {@link czm_inverseProjection}.
 *
 * @name czm_windowToEyeCoordinates
 * @glslFunction
 *
 * @param {vec4} fragmentCoordinate The position in window coordinates to transform.
 *
 * @returns {vec4} The transformed position in eye coordinates.
 *
 * @see czm_modelToWindowCoordinates
 * @see czm_eyeToWindowCoordinates
 * @see czm_inverseProjection
 * @see czm_viewport
 * @see czm_viewportTransformation
 *
 * @example
 * vec4 positionEC = czm_windowToEyeCoordinates(gl_FragCoord);
 */
vec4 czm_windowToEyeCoordinates(vec4 fragmentCoordinate)
{
    vec2 screenCoordXY = (fragmentCoordinate.xy - czm_viewport.xy) / czm_viewport.zw;
    return czm_screenToEyeCoordinates(vec4(screenCoordXY, fragmentCoordinate.zw));
}

vec4 czm_screenToEyeCoordinates(vec2 screenCoordinateXY, float depthOrLogDepth)
{
    // See reverseLogDepth.glsl. This is separate to re-use the pow.
#if defined(LOG_DEPTH) || defined(LOG_DEPTH_READ_ONLY)
    float near = czm_currentFrustum.x;
    float far = czm_currentFrustum.y;
    float log2Depth = depthOrLogDepth * czm_log2FarDepthFromNearPlusOne;
    float depthFromNear = pow(2.0, log2Depth) - 1.0;
    float depthFromCamera = depthFromNear + near;
    vec4 screenCoord = vec4(screenCoordinateXY, far * (1.0 - near / depthFromCamera) / (far - near), 1.0);
    vec4 eyeCoordinate = czm_screenToEyeCoordinates(screenCoord);
    eyeCoordinate.w = 1.0 / depthFromCamera; // Better precision
    return eyeCoordinate;
#else
    vec4 screenCoord = vec4(screenCoordinateXY, depthOrLogDepth, 1.0);
    vec4 eyeCoordinate = czm_screenToEyeCoordinates(screenCoord);
#endif
    return eyeCoordinate;
}

/**
 * Transforms a position given as window x/y and a depth or a log depth from window to eye coordinates.
 * This function produces more accurate results for window positions with log depth than
 * conventionally unpacking the log depth using czm_reverseLogDepth and using the standard version
 * of czm_windowToEyeCoordinates.
 *
 * @name czm_windowToEyeCoordinates
 * @glslFunction
 *
 * @param {vec2} fragmentCoordinateXY The XY position in window coordinates to transform.
 * @param {float} depthOrLogDepth A depth or log depth for the fragment.
 *
 * @see czm_modelToWindowCoordinates
 * @see czm_eyeToWindowCoordinates
 * @see czm_inverseProjection
 * @see czm_viewport
 * @see czm_viewportTransformation
 *
 * @returns {vec4} The transformed position in eye coordinates.
 */
vec4 czm_windowToEyeCoordinates(vec2 fragmentCoordinateXY, float depthOrLogDepth)
{
    vec2 screenCoordXY = (fragmentCoordinateXY.xy - czm_viewport.xy) / czm_viewport.zw;
    return czm_screenToEyeCoordinates(screenCoordXY, depthOrLogDepth);
}
`;var bx=`// emulated noperspective
#if !defined(LOG_DEPTH)
in float v_WindowZ;
#endif

/**
 * Emulates GL_DEPTH_CLAMP. Clamps a fragment to the near and far plane
 * by writing the fragment's depth. See czm_depthClamp for more details.
 *
 * @name czm_writeDepthClamp
 * @glslFunction
 *
 * @example
 * out_FragColor = color;
 * czm_writeDepthClamp();
 *
 * @see czm_depthClamp
 */
void czm_writeDepthClamp()
{
#if (!defined(LOG_DEPTH) && (__VERSION__ == 300 || defined(GL_EXT_frag_depth)))
    gl_FragDepth = clamp(v_WindowZ * gl_FragCoord.w, 0.0, 1.0);
#endif
}
`;var xx=`#ifdef LOG_DEPTH
in float v_depthFromNearPlusOne;

#ifdef POLYGON_OFFSET
uniform vec2 u_polygonOffset;
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
#endif
#endif

#endif

/**
 * Writes the fragment depth to the logarithmic depth buffer.
 * <p>
 * Use this when the vertex shader does not call {@link czm_vertexlogDepth}, for example, when
 * ray-casting geometry using a full screen quad.
 * </p>
 * @name czm_writeLogDepth
 * @glslFunction
 *
 * @param {float} depth The depth coordinate, where 1.0 is on the near plane and
 *                      depth increases in eye-space units from there
 *
 * @example
 * czm_writeLogDepth((czm_projection * v_positionEyeCoordinates).w + 1.0);
 */
void czm_writeLogDepth(float depth)
{
#if (defined(LOG_DEPTH) && (__VERSION__ == 300 || defined(GL_EXT_frag_depth)))
    // Discard the vertex if it's not between the near and far planes.
    // We allow a bit of epsilon on the near plane comparison because a 1.0
    // from the vertex shader (indicating the vertex should be _on_ the near
    // plane) will not necessarily come here as exactly 1.0.
    if (depth <= 0.9999999 || depth > czm_farDepthFromNearPlusOne) {
        discard;
    }

#ifdef POLYGON_OFFSET
    // Polygon offset: m * factor + r * units
    float factor = u_polygonOffset[0];
    float units = u_polygonOffset[1];

#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))
    // This factor doesn't work in IE 10
    if (factor != 0.0) {
        // m = sqrt(dZdX^2 + dZdY^2);
        float x = dFdx(depth);
        float y = dFdy(depth);
        float m = sqrt(x * x + y * y);

        // Apply the factor before computing the log depth.
        depth += m * factor;
    }
#endif

#endif

    gl_FragDepth = log2(depth) * czm_oneOverLog2FarDepthFromNearPlusOne;

#ifdef POLYGON_OFFSET
    // Apply the units after the log depth.
    gl_FragDepth += czm_epsilon7 * units;
#endif

#endif
}

/**
 * Writes the fragment depth to the logarithmic depth buffer.
 * <p>
 * Use this when the vertex shader calls {@link czm_vertexlogDepth}.
 * </p>
 *
 * @name czm_writeLogDepth
 * @glslFunction
 */
void czm_writeLogDepth() {
#ifdef LOG_DEPTH
    czm_writeLogDepth(v_depthFromNearPlusOne);
#endif
}
`;var Ex=`/**
 * Transforms a value for non-perspective interpolation by multiplying
 * it by w, the value used in the perspective divide. This function is
 * intended to be called in a vertex shader to compute the value of a
 * \`varying\` that should not be subject to perspective interpolation.
 * For example, screen-space texture coordinates. The fragment shader
 * must call {@link czm_readNonPerspective} to retrieve the final
 * non-perspective value.
 *
 * @name czm_writeNonPerspective
 * @glslFunction
 *
 * @param {float|vec2|vec3|vec4} value The value to be interpolated without accounting for perspective.
 * @param {float} w The perspective divide value. Usually this is the computed \`gl_Position.w\`.
 * @returns {float|vec2|vec3|vec4} The transformed value, intended to be stored in a \`varying\` and read in the
 *          fragment shader with {@link czm_readNonPerspective}.
 */
float czm_writeNonPerspective(float value, float w) {
    return value * w;
}

vec2 czm_writeNonPerspective(vec2 value, float w) {
    return value * w;
}

vec3 czm_writeNonPerspective(vec3 value, float w) {
    return value * w;
}

vec4 czm_writeNonPerspective(vec4 value, float w) {
    return value * w;
}
`;var Cx=`/**
 * Converts a CIE Yxy color to RGB.
 * <p>The conversion is described in
 * {@link http://content.gpwiki.org/index.php/D3DBook:High-Dynamic_Range_Rendering#Luminance_Transform|Luminance Transform}
 * </p>
 * 
 * @name czm_XYZToRGB
 * @glslFunction
 * 
 * @param {vec3} Yxy The color in CIE Yxy.
 *
 * @returns {vec3} The color in RGB.
 *
 * @example
 * vec3 xyz = czm_RGBToXYZ(rgb);
 * xyz.x = max(xyz.x - luminanceThreshold, 0.0);
 * rgb = czm_XYZToRGB(xyz);
 */
vec3 czm_XYZToRGB(vec3 Yxy)
{
    const mat3 XYZ2RGB = mat3( 3.2405, -0.9693,  0.0556,
                              -1.5371,  1.8760, -0.2040,
                              -0.4985,  0.0416,  1.0572);
    vec3 xyz;
    xyz.r = Yxy.r * Yxy.g / Yxy.b;
    xyz.g = Yxy.r;
    xyz.b = Yxy.r * (1.0 - Yxy.g - Yxy.b) / Yxy.b;
    
    return XYZ2RGB * xyz;
}
`;var Eu={czm_degreesPerRadian:Qy,czm_depthRange:ev,czm_epsilon1:tv,czm_epsilon2:nv,czm_epsilon3:iv,czm_epsilon4:ov,czm_epsilon5:rv,czm_epsilon6:av,czm_epsilon7:sv,czm_infinity:cv,czm_oneOverPi:uv,czm_oneOverTwoPi:lv,czm_passCesium3DTile:pv,czm_passCesium3DTileClassification:dv,czm_passCesium3DTileClassificationIgnoreShow:fv,czm_passClassification:mv,czm_passCompute:hv,czm_passEnvironment:gv,czm_passGlobe:_v,czm_passOpaque:yv,czm_passOverlay:vv,czm_passTerrainClassification:bv,czm_passTranslucent:xv,czm_passVoxels:Ev,czm_pi:Cv,czm_piOverFour:Tv,czm_piOverSix:wv,czm_piOverThree:Sv,czm_piOverTwo:Av,czm_radiansPerDegree:Rv,czm_sceneMode2D:Ov,czm_sceneMode3D:Iv,czm_sceneModeColumbusView:Pv,czm_sceneModeMorphing:Dv,czm_solarRadius:Mv,czm_threePiOver2:Nv,czm_twoPi:Lv,czm_webMercatorMaxLatitude:zv,czm_depthRangeStruct:Bv,czm_material:Fv,czm_materialInput:Uv,czm_modelMaterial:kv,czm_modelVertexOutput:Vv,czm_pbrParameters:jv,czm_ray:Gv,czm_raySegment:Hv,czm_shadowParameters:qv,czm_acesTonemapping:Wv,czm_alphaWeight:Kv,czm_antialias:Yv,czm_approximateSphericalCoordinates:Zv,czm_backFacing:Jv,czm_branchFreeTernary:Xv,czm_cascadeColor:$v,czm_cascadeDistance:Qv,czm_cascadeMatrix:eb,czm_cascadeWeights:tb,czm_columbusViewMorph:nb,czm_computePosition:ib,czm_cosineAndSine:ob,czm_decompressTextureCoordinates:rb,czm_defaultPbrMaterial:ab,czm_depthClamp:sb,czm_eastNorthUpToEyeCoordinates:cb,czm_ellipsoidContainsPoint:ub,czm_ellipsoidWgs84TextureCoordinates:lb,czm_equalsEpsilon:pb,czm_eyeOffset:db,czm_eyeToWindowCoordinates:fb,czm_fastApproximateAtan:mb,czm_fog:hb,czm_gammaCorrect:gb,czm_geodeticSurfaceNormal:_b,czm_getDefaultMaterial:yb,czm_getLambertDiffuse:vb,czm_getSpecular:bb,czm_getWaterNoise:xb,czm_HSBToRGB:Eb,czm_HSLToRGB:Cb,czm_hue:Tb,czm_inverseGamma:wb,czm_isEmpty:Sb,czm_isFull:Ab,czm_latitudeToWebMercatorFraction:Rb,czm_linearToSrgb:Ob,czm_lineDistance:Ib,czm_luminance:Pb,czm_metersPerPixel:Db,czm_modelToWindowCoordinates:Mb,czm_multiplyWithColorBalance:Nb,czm_nearFarScalar:Lb,czm_octDecode:zb,czm_packDepth:Bb,czm_pbrLighting:Fb,czm_pbrMetallicRoughnessMaterial:Ub,czm_pbrSpecularGlossinessMaterial:kb,czm_phong:Vb,czm_planeDistance:jb,czm_pointAlongRay:Gb,czm_rayEllipsoidIntersectionInterval:Hb,czm_raySphereIntersectionInterval:qb,czm_readDepth:Wb,czm_readNonPerspective:Kb,czm_reverseLogDepth:Yb,czm_RGBToHSB:Zb,czm_RGBToHSL:Jb,czm_RGBToXYZ:Xb,czm_rollerShutter:$b,czm_round:Qb,czm_sampleOctahedralProjection:ex,czm_saturation:tx,czm_shadowDepthCompare:nx,czm_shadowVisibility:ix,czm_signNotZero:ox,czm_sphericalHarmonics:rx,czm_srgbToLinear:ax,czm_tangentToEyeSpaceMatrix:sx,czm_textureCube:cx,czm_transformPlane:ux,czm_transformPlaneOld:lx,czm_translateRelativeToEye:px,czm_translucentPhong:dx,czm_transpose:fx,czm_unpackDepth:mx,czm_unpackFloat:hx,czm_unpackUint:gx,czm_valueTransform:_x,czm_vertexLogDepth:yx,czm_windowToEyeCoordinates:vx,czm_writeDepthClamp:bx,czm_writeLogDepth:xx,czm_writeNonPerspective:Ex,czm_XYZToRGB:Cx};function hP(e,t,n){let i=e;return i=i.replaceAll("version 300 es",""),i=i.replaceAll(/(texture\()/g,"texture2D("),t?(n||(i=i.replaceAll(/(in)\s+(vec\d|mat\d|float)/g,"varying $2")),/out_FragData_(\d+)/.test(i)&&(i=`#extension GL_EXT_draw_buffers : enable
${i}`,i=i.replaceAll(/layout\s+\(location\s*=\s*\d+\)\s*out\s+vec4\s+out_FragData_\d+;/g,""),i=i.replaceAll(/out_FragData_(\d+)/g,"gl_FragData[$1]")),i=i.replaceAll(/layout\s+\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g,""),i=i.replaceAll(/out_FragColor/g,"gl_FragColor"),i=i.replaceAll(/out_FragColor\[(\d+)\]/g,"gl_FragColor[$1]"),/gl_FragDepth/.test(i)&&(i=`#extension GL_EXT_frag_depth : enable
${i}`,i=i.replaceAll(/gl_FragDepth/g,"gl_FragDepthEXT"))):(i=i.replaceAll(/(in)\s+(vec\d|mat\d|float)/g,"attribute $2"),i=i.replaceAll(/(out)\s+(vec\d|mat\d|float)\s+([\w]+);/g,"varying $2 $3;")),n||(i=`#version 100
${i}`),i}var Tx=hP;function wx(e){return e=e.replace(/\/\/.*/g,""),e.replace(/\/\*\*[\s\S]*?\*\//gm,function(t){let n=t.match(/\n/gm).length,i="";for(let o=0;o<n;++o)i+=`
`;return i})}function Sx(e,t,n){let i;for(let o=0;o<n.length;++o)n[o].name===e&&(i=n[o]);return m(i)||(t=wx(t),i={name:e,glslSource:t,dependsOn:[],requiredBy:[],evaluated:!1},n.push(i)),i}function Ax(e,t){if(e.evaluated)return;e.evaluated=!0;let n=e.glslSource.match(/\bczm_[a-zA-Z0-9_]*/g);m(n)&&n!==null&&(n=n.filter(function(i,o){return n.indexOf(i)===o}),n.forEach(function(i){if(i!==e.name&&tn._czmBuiltinsAndUniforms.hasOwnProperty(i)){let o=Sx(i,tn._czmBuiltinsAndUniforms[i],t);e.dependsOn.push(o),o.requiredBy.push(e),Ax(o,t)}}))}function gP(e){let t=[],n=[];for(;e.length>0;){let o=e.pop();n.push(o),o.requiredBy.length===0&&t.push(o)}for(;t.length>0;){let o=t.shift();e.push(o);for(let r=0;r<o.dependsOn.length;++r){let a=o.dependsOn[r],s=a.requiredBy.indexOf(o);a.requiredBy.splice(s,1),a.requiredBy.length===0&&t.push(a)}}let i=[];for(let o=0;o<n.length;++o)n[o].requiredBy.length!==0&&i.push(n[o])}function _P(e){let t=[],n=Sx("main",e,t);Ax(n,t),gP(t);let i="";for(let o=t.length-1;o>=0;--o)i=`${i+t[o].glslSource}
`;return i.replace(n.glslSource,"")}function Rx(e,t,n,i){let o,r,a="",s=e.sources;if(m(s))for(o=0,r=s.length;o<r;++o)a+=`
#line 0
${s[o]}`;a=wx(a);let u;a=a.replace(/#version\s+(.*?)\n/gm,function(R,D){return u=D,`
`});let l=[];a=a.replace(/#extension.*\n/gm,function(R){return l.push(R),`
`}),a=a.replace(/precision\s(lowp|mediump|highp)\s(float|int);/,"");let d=e.pickColorQualifier;m(d)&&(a=tn.createPickFragmentShaderSource(a,d));let f="",g=l.length;for(o=0;o<g;o++)f+=l[o];t&&(f+=`#ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    precision highp int;
#else
    precision mediump float;
    precision mediump int;
    #define highp mediump
#endif

`);let b=e.defines;if(m(b))for(o=0,r=b.length;o<r;++o){let R=b[o];R.length!==0&&(f+=`#define ${R}
`)}n.textureFloatLinear&&(f+=`#define OES_texture_float_linear

`),n.floatingPointTexture&&(f+=`#define OES_texture_float

`);let x="";e.includeBuiltIns&&(x=_P(a)),f+=`
#line 0
`;let T=x+a;return n.webgl2&&t&&!/layout\s*\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g.test(T)&&!/czm_out_FragColor/g.test(T)&&/out_FragColor/g.test(T)&&(f+=`layout(location = 0) out vec4 out_FragColor;

`),n.webgl2||(x=x.replaceAll(/(in)\s+(vec\d|mat\d|float)/g,"varying $2")),f+=x,f+=a,n.webgl2?f=`#version 300 es
${f}`:f=Tx(f,t,i),f}function tn(e){e=C(e,C.EMPTY_OBJECT);let t=e.pickColorQualifier;this.defines=m(e.defines)?e.defines.slice(0):[],this.sources=m(e.sources)?e.sources.slice(0):[],this.pickColorQualifier=t,this.includeBuiltIns=C(e.includeBuiltIns,!0)}tn.prototype.clone=function(){return new tn({sources:this.sources,defines:this.defines,pickColorQualifier:this.pickColorQualifier,includeBuiltIns:this.includeBuiltIns})};tn.replaceMain=function(e,t){return t=`void ${t}()`,e.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,t)};tn.prototype.getCacheKey=function(){let t=this.defines.slice().sort().join(","),n=this.pickColorQualifier,i=this.includeBuiltIns,o=this.sources.join(`
`);return`${t}:${n}:${i}:${o}`};tn.prototype.createCombinedVertexShader=function(e){return Rx(this,!1,e)};tn.prototype.createCombinedFragmentShader=function(e,t){return Rx(this,!0,e,t)};tn._czmBuiltinsAndUniforms={};for(let e in Eu)Eu.hasOwnProperty(e)&&(tn._czmBuiltinsAndUniforms[e]=Eu[e]);for(let e in Ta)if(Ta.hasOwnProperty(e)){let t=Ta[e];typeof t.getDeclaration=="function"&&(tn._czmBuiltinsAndUniforms[e]=t.getDeclaration(e))}tn.createPickVertexShaderSource=function(e){return`${tn.replaceMain(e,"czm_old_main")}
in vec4 pickColor; 
out vec4 czm_pickColor; 
void main() 
{ 
    czm_old_main(); 
    czm_pickColor = pickColor; 
}`};tn.createPickFragmentShaderSource=function(e,t){let n=tn.replaceMain(e,"czm_old_main"),i=`${t} vec4 czm_pickColor; 
void main() 
{ 
    czm_old_main(); 
    if (out_FragColor.a == 0.0) { 
       discard; 
    } 
    out_FragColor = czm_pickColor; 
}`;return`${n}
${i}`};function yP(e,t){let n=e.defines,i=n.length;for(let o=0;o<i;++o)if(n[o]===t)return!0;return!1}function Ox(e,t){let n=e.sources,i=n.length;for(let o=0;o<i;++o)if(n[o].indexOf(t)!==-1)return!0;return!1}function Ix(e,t){let n=t.length;for(let i=0;i<n;++i){let o=t[i];if(Ox(e,o))return o}}var vP=["v_normalEC","v_normal"];tn.findNormalVarying=function(e){return Ox(e,"#ifdef HAS_NORMALS")?yP(e,"HAS_NORMALS")?"v_normalEC":void 0:Ix(e,vP)};var bP=["v_positionEC"];tn.findPositionVarying=function(e){return Ix(e,bP)};var Cr=tn;var nn={UNSIGNED_BYTE:z.UNSIGNED_BYTE,UNSIGNED_SHORT:z.UNSIGNED_SHORT,UNSIGNED_INT:z.UNSIGNED_INT};nn.getSizeInBytes=function(e){switch(e){case nn.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case nn.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case nn.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT}};nn.fromSizeInBytes=function(e){switch(e){case 2:return nn.UNSIGNED_SHORT;case 4:return nn.UNSIGNED_INT;case 1:return nn.UNSIGNED_BYTE}};nn.validate=function(e){return m(e)&&(e===nn.UNSIGNED_BYTE||e===nn.UNSIGNED_SHORT||e===nn.UNSIGNED_INT)};nn.createTypedArray=function(e,t){return e>=j.SIXTY_FOUR_KILOBYTES?new Uint32Array(t):new Uint16Array(t)};nn.createTypedArrayFromArrayBuffer=function(e,t,n,i){return e>=j.SIXTY_FOUR_KILOBYTES?new Uint32Array(t,n,i):new Uint16Array(t,n,i)};nn.fromTypedArray=function(e){if(e instanceof Uint8Array)return nn.UNSIGNED_BYTE;if(e instanceof Uint16Array)return nn.UNSIGNED_SHORT;if(e instanceof Uint32Array)return nn.UNSIGNED_INT};var Gt=Object.freeze(nn);function xP(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}var Cu=xP;function ai(e){e=C(e,C.EMPTY_OBJECT);let t=e.context._gl,n=e.bufferTarget,i=e.typedArray,o=e.sizeInBytes,r=e.usage,a=m(i);a&&(o=i.byteLength);let s=t.createBuffer();t.bindBuffer(n,s),t.bufferData(n,a?i:o,r),t.bindBuffer(n,null),this._id=Cu(),this._gl=t,this._webgl2=e.context._webgl2,this._bufferTarget=n,this._sizeInBytes=o,this._usage=r,this._buffer=s,this.vertexArrayDestroyable=!0}ai.createVertexBuffer=function(e){return new ai({context:e.context,bufferTarget:z.ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage})};ai.createIndexBuffer=function(e){let t=e.context,n=e.indexDatatype,i=Gt.getSizeInBytes(n),o=new ai({context:t,bufferTarget:z.ELEMENT_ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage}),r=o.sizeInBytes/i;return Object.defineProperties(o,{indexDatatype:{get:function(){return n}},bytesPerIndex:{get:function(){return i}},numberOfIndices:{get:function(){return r}}}),o};Object.defineProperties(ai.prototype,{sizeInBytes:{get:function(){return this._sizeInBytes}},usage:{get:function(){return this._usage}}});ai.prototype._getBuffer=function(){return this._buffer};ai.prototype.copyFromArrayView=function(e,t){t=C(t,0);let n=this._gl,i=this._bufferTarget;n.bindBuffer(i,this._buffer),n.bufferSubData(i,t,e),n.bindBuffer(i,null)};ai.prototype.copyFromBuffer=function(e,t,n,i){let o=z.COPY_READ_BUFFER,r=z.COPY_WRITE_BUFFER,a=this._gl;a.bindBuffer(r,this._buffer),a.bindBuffer(o,e._buffer),a.copyBufferSubData(o,r,t,n,i),a.bindBuffer(r,null),a.bindBuffer(o,null)};ai.prototype.getBufferData=function(e,t,n,i){t=C(t,0),n=C(n,0);let o=this._gl,r=z.COPY_READ_BUFFER;o.bindBuffer(r,this._buffer),o.getBufferSubData(r,t,e,n,i),o.bindBuffer(r,null)};ai.prototype.isDestroyed=function(){return!1};ai.prototype.destroy=function(){return this._gl.deleteBuffer(this._buffer),jn(this)};var Os=ai;function EP(e,t,n,i){let o=m(t.vertexBuffer),r=m(t.value),a=t.value?t.value.length:t.componentsPerAttribute,s={index:C(t.index,n),enabled:C(t.enabled,!0),vertexBuffer:t.vertexBuffer,value:r?t.value.slice(0):void 0,componentsPerAttribute:a,componentDatatype:C(t.componentDatatype,Re.FLOAT),normalize:C(t.normalize,!1),offsetInBytes:C(t.offsetInBytes,0),strideInBytes:C(t.strideInBytes,0),instanceDivisor:C(t.instanceDivisor,0)};if(o)s.vertexAttrib=function(u){let l=this.index;u.bindBuffer(u.ARRAY_BUFFER,this.vertexBuffer._getBuffer()),u.vertexAttribPointer(l,this.componentsPerAttribute,this.componentDatatype,this.normalize,this.strideInBytes,this.offsetInBytes),u.enableVertexAttribArray(l),this.instanceDivisor>0&&(i.glVertexAttribDivisor(l,this.instanceDivisor),i._vertexAttribDivisors[l]=this.instanceDivisor,i._previousDrawInstanced=!0)},s.disableVertexAttribArray=function(u){u.disableVertexAttribArray(this.index),this.instanceDivisor>0&&i.glVertexAttribDivisor(n,0)};else{switch(s.componentsPerAttribute){case 1:s.vertexAttrib=function(u){u.vertexAttrib1fv(this.index,this.value)};break;case 2:s.vertexAttrib=function(u){u.vertexAttrib2fv(this.index,this.value)};break;case 3:s.vertexAttrib=function(u){u.vertexAttrib3fv(this.index,this.value)};break;case 4:s.vertexAttrib=function(u){u.vertexAttrib4fv(this.index,this.value)};break}s.disableVertexAttribArray=function(u){}}e.push(s)}function Dx(e,t,n){for(let i=0;i<t.length;++i){let o=t[i];o.enabled&&o.vertexAttrib(e)}m(n)&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n._getBuffer())}function ho(e){e=C(e,C.EMPTY_OBJECT);let t=e.context,n=t._gl,i=e.attributes,o=e.indexBuffer,r,a=[],s=1,u=!1,l=!1,d=i.length;for(r=0;r<d;++r)EP(a,i[r],r,t);for(d=a.length,r=0;r<d;++r){let g=a[r];if(m(g.vertexBuffer)&&g.instanceDivisor===0){let b=g.strideInBytes||g.componentsPerAttribute*Re.getSizeInBytes(g.componentDatatype);s=g.vertexBuffer.sizeInBytes/b;break}}for(r=0;r<d;++r)a[r].instanceDivisor>0&&(u=!0),m(a[r].value)&&(l=!0);let f;t.vertexArrayObject&&(f=t.glCreateVertexArray(),t.glBindVertexArray(f),Dx(n,a,o),t.glBindVertexArray(null)),this._numberOfVertices=s,this._hasInstancedAttributes=u,this._hasConstantAttributes=l,this._context=t,this._gl=n,this._vao=f,this._attributes=a,this._indexBuffer=o}function Px(e){return e.values.length/e.componentsPerAttribute}function CP(e){return Re.getSizeInBytes(e.componentDatatype)*e.componentsPerAttribute}function TP(e){let t,n,i,o=[];for(n in e)e.hasOwnProperty(n)&&m(e[n])&&m(e[n].values)&&(o.push(n),e[n].componentDatatype===Re.DOUBLE&&(e[n].componentDatatype=Re.FLOAT,e[n].values=Re.createTypedArray(Re.FLOAT,e[n].values)));let r,a=o.length;if(a>0)for(r=Px(e[o[0]]),t=1;t<a;++t){let l=Px(e[o[t]]);if(l!==r)throw new It(`Each attribute list must have the same number of vertices.  Attribute ${o[t]} has a different number of vertices (${l.toString()}) than attribute ${o[0]} (${r.toString()}).`)}o.sort(function(l,d){return Re.getSizeInBytes(e[d].componentDatatype)-Re.getSizeInBytes(e[l].componentDatatype)});let s=0,u={};for(t=0;t<a;++t)n=o[t],i=e[n],u[n]=s,s+=CP(i);if(s>0){let l=Re.getSizeInBytes(e[o[0]].componentDatatype),d=s%l;d!==0&&(s+=l-d);let f=r*s,g=new ArrayBuffer(f),b={};for(t=0;t<a;++t){n=o[t];let x=Re.getSizeInBytes(e[n].componentDatatype);b[n]={pointer:Re.createTypedArray(e[n].componentDatatype,g),index:u[n]/x,strideInComponentType:s/x}}for(t=0;t<r;++t)for(let x=0;x<a;++x){n=o[x],i=e[n];let T=i.values,R=b[n],D=R.pointer,M=i.componentsPerAttribute;for(let N=0;N<M;++N)D[R.index+N]=T[t*M+N];R.index+=R.strideInComponentType}return{buffer:g,offsetsInBytes:u,vertexSizeInBytes:s}}}ho.fromGeometry=function(e){e=C(e,C.EMPTY_OBJECT);let t=e.context,n=C(e.geometry,C.EMPTY_OBJECT),i=C(e.bufferUsage,vu.DYNAMIC_DRAW),o=C(e.attributeLocations,C.EMPTY_OBJECT),r=C(e.interleave,!1),a=e.vertexArrayAttributes,s,u,l,d=m(a)?a:[],f=n.attributes;if(r){let x=TP(f);if(m(x)){l=Os.createVertexBuffer({context:t,typedArray:x.buffer,usage:i});let T=x.offsetsInBytes,R=x.vertexSizeInBytes;for(s in f)f.hasOwnProperty(s)&&m(f[s])&&(u=f[s],m(u.values)?d.push({index:o[s],vertexBuffer:l,componentDatatype:u.componentDatatype,componentsPerAttribute:u.componentsPerAttribute,normalize:u.normalize,offsetInBytes:T[s],strideInBytes:R}):d.push({index:o[s],value:u.value,componentDatatype:u.componentDatatype,normalize:u.normalize}))}}else for(s in f)if(f.hasOwnProperty(s)&&m(f[s])){u=f[s];let x=u.componentDatatype;x===Re.DOUBLE&&(x=Re.FLOAT),l=void 0,m(u.values)&&(l=Os.createVertexBuffer({context:t,typedArray:Re.createTypedArray(x,u.values),usage:i})),d.push({index:o[s],vertexBuffer:l,value:u.value,componentDatatype:x,componentsPerAttribute:u.componentsPerAttribute,normalize:u.normalize})}let g,b=n.indices;return m(b)&&(Ot.computeNumberOfVertices(n)>=j.SIXTY_FOUR_KILOBYTES&&t.elementIndexUint?g=Os.createIndexBuffer({context:t,typedArray:new Uint32Array(b),usage:i,indexDatatype:Gt.UNSIGNED_INT}):g=Os.createIndexBuffer({context:t,typedArray:new Uint16Array(b),usage:i,indexDatatype:Gt.UNSIGNED_SHORT})),new ho({context:t,attributes:d,indexBuffer:g})};Object.defineProperties(ho.prototype,{numberOfAttributes:{get:function(){return this._attributes.length}},numberOfVertices:{get:function(){return this._numberOfVertices}},indexBuffer:{get:function(){return this._indexBuffer}}});ho.prototype.getAttribute=function(e){return this._attributes[e]};function wP(e){let t=e._context,n=e._hasInstancedAttributes;if(!n&&!t._previousDrawInstanced)return;t._previousDrawInstanced=n;let i=t._vertexAttribDivisors,o=e._attributes,r=yt.maximumVertexAttributes,a;if(n){let s=o.length;for(a=0;a<s;++a){let u=o[a];if(u.enabled){let l=u.instanceDivisor,d=u.index;l!==i[d]&&(t.glVertexAttribDivisor(d,l),i[d]=l)}}}else for(a=0;a<r;++a)i[a]>0&&(t.glVertexAttribDivisor(a,0),i[a]=0)}function SP(e,t){let n=e._attributes,i=n.length;for(let o=0;o<i;++o){let r=n[o];r.enabled&&m(r.value)&&r.vertexAttrib(t)}}ho.prototype._bind=function(){m(this._vao)?(this._context.glBindVertexArray(this._vao),this._context.instancedArrays&&wP(this),this._hasConstantAttributes&&SP(this,this._gl)):Dx(this._gl,this._attributes,this._indexBuffer)};ho.prototype._unBind=function(){if(m(this._vao))this._context.glBindVertexArray(null);else{let e=this._attributes,t=this._gl;for(let n=0;n<e.length;++n){let i=e[n];i.enabled&&i.disableVertexAttribArray(t)}this._indexBuffer&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}};ho.prototype.isDestroyed=function(){return!1};ho.prototype.destroy=function(){let e=this._attributes;for(let n=0;n<e.length;++n){let i=e[n].vertexBuffer;m(i)&&!i.isDestroyed()&&i.vertexArrayDestroyable&&i.destroy()}let t=this._indexBuffer;return m(t)&&!t.isDestroyed()&&t.vertexArrayDestroyable&&t.destroy(),m(this._vao)&&this._context.glDeleteVertexArray(this._vao),jn(this)};var Mx=ho;var tt={UNSIGNED_BYTE:z.UNSIGNED_BYTE,UNSIGNED_SHORT:z.UNSIGNED_SHORT,UNSIGNED_INT:z.UNSIGNED_INT,FLOAT:z.FLOAT,HALF_FLOAT:z.HALF_FLOAT_OES,UNSIGNED_INT_24_8:z.UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:z.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:z.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:z.UNSIGNED_SHORT_5_6_5};tt.toWebGLConstant=function(e,t){switch(e){case tt.UNSIGNED_BYTE:return z.UNSIGNED_BYTE;case tt.UNSIGNED_SHORT:return z.UNSIGNED_SHORT;case tt.UNSIGNED_INT:return z.UNSIGNED_INT;case tt.FLOAT:return z.FLOAT;case tt.HALF_FLOAT:return t.webgl2?z.HALF_FLOAT:z.HALF_FLOAT_OES;case tt.UNSIGNED_INT_24_8:return z.UNSIGNED_INT_24_8;case tt.UNSIGNED_SHORT_4_4_4_4:return z.UNSIGNED_SHORT_4_4_4_4;case tt.UNSIGNED_SHORT_5_5_5_1:return z.UNSIGNED_SHORT_5_5_5_1;case tt.UNSIGNED_SHORT_5_6_5:return tt.UNSIGNED_SHORT_5_6_5}};tt.isPacked=function(e){return e===tt.UNSIGNED_INT_24_8||e===tt.UNSIGNED_SHORT_4_4_4_4||e===tt.UNSIGNED_SHORT_5_5_5_1||e===tt.UNSIGNED_SHORT_5_6_5};tt.sizeInBytes=function(e){switch(e){case tt.UNSIGNED_BYTE:return 1;case tt.UNSIGNED_SHORT:case tt.UNSIGNED_SHORT_4_4_4_4:case tt.UNSIGNED_SHORT_5_5_5_1:case tt.UNSIGNED_SHORT_5_6_5:case tt.HALF_FLOAT:return 2;case tt.UNSIGNED_INT:case tt.FLOAT:case tt.UNSIGNED_INT_24_8:return 4}};tt.validate=function(e){return e===tt.UNSIGNED_BYTE||e===tt.UNSIGNED_SHORT||e===tt.UNSIGNED_INT||e===tt.FLOAT||e===tt.HALF_FLOAT||e===tt.UNSIGNED_INT_24_8||e===tt.UNSIGNED_SHORT_4_4_4_4||e===tt.UNSIGNED_SHORT_5_5_5_1||e===tt.UNSIGNED_SHORT_5_6_5};var ft=Object.freeze(tt);var pe={DEPTH_COMPONENT:z.DEPTH_COMPONENT,DEPTH_STENCIL:z.DEPTH_STENCIL,ALPHA:z.ALPHA,RED:z.RED,RG:z.RG,RGB:z.RGB,RGBA:z.RGBA,LUMINANCE:z.LUMINANCE,LUMINANCE_ALPHA:z.LUMINANCE_ALPHA,RGB_DXT1:z.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:z.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:z.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:z.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:z.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:z.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:z.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:z.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGBA_ASTC:z.COMPRESSED_RGBA_ASTC_4x4_WEBGL,RGB_ETC1:z.COMPRESSED_RGB_ETC1_WEBGL,RGB8_ETC2:z.COMPRESSED_RGB8_ETC2,RGBA8_ETC2_EAC:z.COMPRESSED_RGBA8_ETC2_EAC,RGBA_BC7:z.COMPRESSED_RGBA_BPTC_UNORM};pe.componentsLength=function(e){switch(e){case pe.RGB:return 3;case pe.RGBA:return 4;case pe.LUMINANCE_ALPHA:case pe.RG:return 2;case pe.ALPHA:case pe.RED:case pe.LUMINANCE:return 1;default:return 1}};pe.validate=function(e){return e===pe.DEPTH_COMPONENT||e===pe.DEPTH_STENCIL||e===pe.ALPHA||e===pe.RED||e===pe.RG||e===pe.RGB||e===pe.RGBA||e===pe.LUMINANCE||e===pe.LUMINANCE_ALPHA||e===pe.RGB_DXT1||e===pe.RGBA_DXT1||e===pe.RGBA_DXT3||e===pe.RGBA_DXT5||e===pe.RGB_PVRTC_4BPPV1||e===pe.RGB_PVRTC_2BPPV1||e===pe.RGBA_PVRTC_4BPPV1||e===pe.RGBA_PVRTC_2BPPV1||e===pe.RGBA_ASTC||e===pe.RGB_ETC1||e===pe.RGB8_ETC2||e===pe.RGBA8_ETC2_EAC||e===pe.RGBA_BC7};pe.isColorFormat=function(e){return e===pe.ALPHA||e===pe.RGB||e===pe.RGBA||e===pe.LUMINANCE||e===pe.LUMINANCE_ALPHA};pe.isDepthFormat=function(e){return e===pe.DEPTH_COMPONENT||e===pe.DEPTH_STENCIL};pe.isCompressedFormat=function(e){return e===pe.RGB_DXT1||e===pe.RGBA_DXT1||e===pe.RGBA_DXT3||e===pe.RGBA_DXT5||e===pe.RGB_PVRTC_4BPPV1||e===pe.RGB_PVRTC_2BPPV1||e===pe.RGBA_PVRTC_4BPPV1||e===pe.RGBA_PVRTC_2BPPV1||e===pe.RGBA_ASTC||e===pe.RGB_ETC1||e===pe.RGB8_ETC2||e===pe.RGBA8_ETC2_EAC||e===pe.RGBA_BC7};pe.isDXTFormat=function(e){return e===pe.RGB_DXT1||e===pe.RGBA_DXT1||e===pe.RGBA_DXT3||e===pe.RGBA_DXT5};pe.isPVRTCFormat=function(e){return e===pe.RGB_PVRTC_4BPPV1||e===pe.RGB_PVRTC_2BPPV1||e===pe.RGBA_PVRTC_4BPPV1||e===pe.RGBA_PVRTC_2BPPV1};pe.isASTCFormat=function(e){return e===pe.RGBA_ASTC};pe.isETC1Format=function(e){return e===pe.RGB_ETC1};pe.isETC2Format=function(e){return e===pe.RGB8_ETC2||e===pe.RGBA8_ETC2_EAC};pe.isBC7Format=function(e){return e===pe.RGBA_BC7};pe.compressedTextureSizeInBytes=function(e,t,n){switch(e){case pe.RGB_DXT1:case pe.RGBA_DXT1:case pe.RGB_ETC1:case pe.RGB8_ETC2:return Math.floor((t+3)/4)*Math.floor((n+3)/4)*8;case pe.RGBA_DXT3:case pe.RGBA_DXT5:case pe.RGBA_ASTC:case pe.RGBA8_ETC2_EAC:return Math.floor((t+3)/4)*Math.floor((n+3)/4)*16;case pe.RGB_PVRTC_4BPPV1:case pe.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(t,8)*Math.max(n,8)*4+7)/8);case pe.RGB_PVRTC_2BPPV1:case pe.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(t,16)*Math.max(n,8)*2+7)/8);case pe.RGBA_BC7:return Math.ceil(t/4)*Math.ceil(n/4)*16;default:return 0}};pe.textureSizeInBytes=function(e,t,n,i){let o=pe.componentsLength(e);return ft.isPacked(t)&&(o=1),o*ft.sizeInBytes(t)*n*i};pe.alignmentInBytes=function(e,t,n){let i=pe.textureSizeInBytes(e,t,n,1)%4;return i===0?4:i===2?2:1};pe.createTypedArray=function(e,t,n,i){let o,r=ft.sizeInBytes(t);r===Uint8Array.BYTES_PER_ELEMENT?o=Uint8Array:r===Uint16Array.BYTES_PER_ELEMENT?o=Uint16Array:r===Float32Array.BYTES_PER_ELEMENT&&t===ft.FLOAT?o=Float32Array:o=Uint32Array;let a=pe.componentsLength(e)*n*i;return new o(a)};pe.flipY=function(e,t,n,i,o){if(o===1)return e;let r=pe.createTypedArray(t,n,i,o),a=pe.componentsLength(t),s=i*a;for(let u=0;u<o;++u){let l=u*i*a,d=(o-u-1)*i*a;for(let f=0;f<s;++f)r[d+f]=e[l+f]}return r};pe.toInternalFormat=function(e,t,n){if(!n.webgl2)return e;if(e===pe.DEPTH_STENCIL)return z.DEPTH24_STENCIL8;if(e===pe.DEPTH_COMPONENT){if(t===ft.UNSIGNED_SHORT)return z.DEPTH_COMPONENT16;if(t===ft.UNSIGNED_INT)return z.DEPTH_COMPONENT24}if(t===ft.FLOAT)switch(e){case pe.RGBA:return z.RGBA32F;case pe.RGB:return z.RGB32F;case pe.RG:return z.RG32F;case pe.RED:return z.R32F}if(t===ft.HALF_FLOAT)switch(e){case pe.RGBA:return z.RGBA16F;case pe.RGB:return z.RGB16F;case pe.RG:return z.RG16F;case pe.RED:return z.R16F}return e};var ln=Object.freeze(pe);var Tu={NEAREST:z.NEAREST,LINEAR:z.LINEAR};Tu.validate=function(e){return e===Tu.NEAREST||e===Tu.LINEAR};var wa=Object.freeze(Tu);var Go={NEAREST:z.NEAREST,LINEAR:z.LINEAR,NEAREST_MIPMAP_NEAREST:z.NEAREST_MIPMAP_NEAREST,LINEAR_MIPMAP_NEAREST:z.LINEAR_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:z.NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_LINEAR:z.LINEAR_MIPMAP_LINEAR};Go.validate=function(e){return e===Go.NEAREST||e===Go.LINEAR||e===Go.NEAREST_MIPMAP_NEAREST||e===Go.LINEAR_MIPMAP_NEAREST||e===Go.NEAREST_MIPMAP_LINEAR||e===Go.LINEAR_MIPMAP_LINEAR};var Ei=Object.freeze(Go);var wu={CLAMP_TO_EDGE:z.CLAMP_TO_EDGE,REPEAT:z.REPEAT,MIRRORED_REPEAT:z.MIRRORED_REPEAT,validate:function(e){return e===wu.CLAMP_TO_EDGE||e===wu.REPEAT||e===wu.MIRRORED_REPEAT}},Is=Object.freeze(wu);function Ps(e){e=C(e,C.EMPTY_OBJECT);let t=C(e.wrapS,Is.CLAMP_TO_EDGE),n=C(e.wrapT,Is.CLAMP_TO_EDGE),i=C(e.minificationFilter,Ei.LINEAR),o=C(e.magnificationFilter,wa.LINEAR),r=m(e.maximumAnisotropy)?e.maximumAnisotropy:1;this._wrapS=t,this._wrapT=n,this._minificationFilter=i,this._magnificationFilter=o,this._maximumAnisotropy=r}Object.defineProperties(Ps.prototype,{wrapS:{get:function(){return this._wrapS}},wrapT:{get:function(){return this._wrapT}},minificationFilter:{get:function(){return this._minificationFilter}},magnificationFilter:{get:function(){return this._magnificationFilter}},maximumAnisotropy:{get:function(){return this._maximumAnisotropy}}});Ps.equals=function(e,t){return e===t||m(e)&&m(t)&&e._wrapS===t._wrapS&&e._wrapT===t._wrapT&&e._minificationFilter===t._minificationFilter&&e._magnificationFilter===t._magnificationFilter&&e._maximumAnisotropy===t._maximumAnisotropy};Ps.NEAREST=Object.freeze(new Ps({wrapS:Is.CLAMP_TO_EDGE,wrapT:Is.CLAMP_TO_EDGE,minificationFilter:Ei.NEAREST,magnificationFilter:wa.NEAREST}));var Su=Ps;var Au={DONT_CARE:z.DONT_CARE,FASTEST:z.FASTEST,NICEST:z.NICEST,validate:function(e){return e===Au.DONT_CARE||e===Au.FASTEST||e===Au.NICEST}},Nx=Object.freeze(Au);function Ci(e){e=C(e,C.EMPTY_OBJECT);let t=e.context,n=e.width,i=e.height,o=e.source;m(o)&&(m(n)||(n=C(o.videoWidth,o.width)),m(i)||(i=C(o.videoHeight,o.height)));let r=C(e.pixelFormat,ln.RGBA),a=C(e.pixelDatatype,ft.UNSIGNED_BYTE),s=ln.toInternalFormat(r,a,t),u=ln.isCompressedFormat(s),l=e.preMultiplyAlpha||r===ln.RGB||r===ln.LUMINANCE,d=C(e.flipY,!0),f=C(e.skipColorSpaceConversion,!1),g=!0,b=t._gl,x=b.TEXTURE_2D,T=b.createTexture();b.activeTexture(b.TEXTURE0),b.bindTexture(x,T);let R=4;if(m(o)&&m(o.arrayBufferView)&&!u&&(R=ln.alignmentInBytes(r,a,n)),b.pixelStorei(b.UNPACK_ALIGNMENT,R),f?b.pixelStorei(b.UNPACK_COLORSPACE_CONVERSION_WEBGL,b.NONE):b.pixelStorei(b.UNPACK_COLORSPACE_CONVERSION_WEBGL,b.BROWSER_DEFAULT_WEBGL),m(o))if(m(o.arrayBufferView)){b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);let M=o.arrayBufferView,N,V,q;if(u){if(b.compressedTexImage2D(x,0,s,n,i,0,M),m(o.mipLevels))for(V=n,q=i,N=0;N<o.mipLevels.length;++N)V=Math.floor(V/2)|0,V<1&&(V=1),q=Math.floor(q/2)|0,q<1&&(q=1),b.compressedTexImage2D(x,N+1,s,V,q,0,o.mipLevels[N])}else if(d&&(M=ln.flipY(M,r,a,n,i)),b.texImage2D(x,0,s,n,i,0,r,ft.toWebGLConstant(a,t),M),m(o.mipLevels))for(V=n,q=i,N=0;N<o.mipLevels.length;++N)V=Math.floor(V/2)|0,V<1&&(V=1),q=Math.floor(q/2)|0,q<1&&(q=1),b.texImage2D(x,N+1,s,V,q,0,r,ft.toWebGLConstant(a,t),o.mipLevels[N])}else m(o.framebuffer)?(b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),o.framebuffer!==t.defaultFramebuffer&&o.framebuffer._bind(),b.copyTexImage2D(x,0,s,o.xOffset,o.yOffset,n,i,0),o.framebuffer!==t.defaultFramebuffer&&o.framebuffer._unBind()):(b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,d),b.texImage2D(x,0,s,r,ft.toWebGLConstant(a,t),o));else b.texImage2D(x,0,s,n,i,0,r,ft.toWebGLConstant(a,t),null),g=!1;b.bindTexture(x,null);let D;u?D=ln.compressedTextureSizeInBytes(r,n,i):D=ln.textureSizeInBytes(r,a,n,i),this._id=Cu(),this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=x,this._texture=T,this._internalFormat=s,this._pixelFormat=r,this._pixelDatatype=a,this._width=n,this._height=i,this._dimensions=new Ce(n,i),this._hasMipmap=!1,this._sizeInBytes=D,this._preMultiplyAlpha=l,this._flipY=d,this._initialized=g,this._sampler=void 0,this.sampler=m(e.sampler)?e.sampler:new Su}Ci.create=function(e){return new Ci(e)};Ci.fromFramebuffer=function(e){e=C(e,C.EMPTY_OBJECT);let t=e.context,n=t._gl,i=C(e.pixelFormat,ln.RGB),o=C(e.framebufferXOffset,0),r=C(e.framebufferYOffset,0),a=C(e.width,n.drawingBufferWidth),s=C(e.height,n.drawingBufferHeight),u=e.framebuffer;return new Ci({context:t,width:a,height:s,pixelFormat:i,source:{framebuffer:m(u)?u:t.defaultFramebuffer,xOffset:o,yOffset:r,width:a,height:s}})};Object.defineProperties(Ci.prototype,{id:{get:function(){return this._id}},sampler:{get:function(){return this._sampler},set:function(e){let t=e.minificationFilter,n=e.magnificationFilter,i=this._context,o=this._pixelFormat,r=this._pixelDatatype,a=t===Ei.NEAREST_MIPMAP_NEAREST||t===Ei.NEAREST_MIPMAP_LINEAR||t===Ei.LINEAR_MIPMAP_NEAREST||t===Ei.LINEAR_MIPMAP_LINEAR;(r===ft.FLOAT&&!i.textureFloatLinear||r===ft.HALF_FLOAT&&!i.textureHalfFloatLinear)&&(t=a?Ei.NEAREST_MIPMAP_NEAREST:Ei.NEAREST,n=wa.NEAREST),i.webgl2&&ln.isDepthFormat(o)&&(t=Ei.NEAREST,n=wa.NEAREST);let s=i._gl,u=this._textureTarget;s.activeTexture(s.TEXTURE0),s.bindTexture(u,this._texture),s.texParameteri(u,s.TEXTURE_MIN_FILTER,t),s.texParameteri(u,s.TEXTURE_MAG_FILTER,n),s.texParameteri(u,s.TEXTURE_WRAP_S,e.wrapS),s.texParameteri(u,s.TEXTURE_WRAP_T,e.wrapT),m(this._textureFilterAnisotropic)&&s.texParameteri(u,this._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.maximumAnisotropy),s.bindTexture(u,null),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},dimensions:{get:function(){return this._dimensions}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(this._sizeInBytes*4/3):this._sizeInBytes}},_target:{get:function(){return this._textureTarget}}});Ci.prototype.copyFrom=function(e){let t=C(e.xOffset,0),n=C(e.yOffset,0),i=e.source,o=this._context,r=o._gl,a=this._textureTarget;r.activeTexture(r.TEXTURE0),r.bindTexture(a,this._texture);let s=i.width,u=i.height,l=i.arrayBufferView,d=this._width,f=this._height,g=this._internalFormat,b=this._pixelFormat,x=this._pixelDatatype,T=this._preMultiplyAlpha,R=this._flipY,D=C(e.skipColorSpaceConversion,!1),M=4;m(l)&&(M=ln.alignmentInBytes(b,x,s)),r.pixelStorei(r.UNPACK_ALIGNMENT,M),D?r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE):r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.BROWSER_DEFAULT_WEBGL);let N=!1;if(!this._initialized){if(t===0&&n===0&&s===d&&u===f)m(l)?(r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),R&&(l=ln.flipY(l,b,x,d,f)),r.texImage2D(a,0,g,d,f,0,b,ft.toWebGLConstant(x,o),l)):(r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,R),r.texImage2D(a,0,g,b,ft.toWebGLConstant(x,o),i)),N=!0;else{r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);let V=ln.createTypedArray(b,x,d,f);r.texImage2D(a,0,g,d,f,0,b,ft.toWebGLConstant(x,o),V)}this._initialized=!0}N||(m(l)?(r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),R&&(l=ln.flipY(l,b,x,s,u)),r.texSubImage2D(a,0,t,n,s,u,b,ft.toWebGLConstant(x,o),l)):(r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,R),r.texSubImage2D(a,0,t,n,b,ft.toWebGLConstant(x,o),i))),r.bindTexture(a,null)};Ci.prototype.copyFromFramebuffer=function(e,t,n,i,o,r){e=C(e,0),t=C(t,0),n=C(n,0),i=C(i,0),o=C(o,this._width),r=C(r,this._height);let a=this._context._gl,s=this._textureTarget;a.activeTexture(a.TEXTURE0),a.bindTexture(s,this._texture),a.copyTexSubImage2D(s,0,e,t,n,i,o,r),a.bindTexture(s,null),this._initialized=!0};Ci.prototype.generateMipmap=function(e){e=C(e,Nx.DONT_CARE),this._hasMipmap=!0;let t=this._context._gl,n=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(n,this._texture),t.generateMipmap(n),t.bindTexture(n,null)};Ci.prototype.isDestroyed=function(){return!1};Ci.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),jn(this)};var Lx=Ci;function go(e,t,n){if(this._attributes=t,this._numberOfInstances=n,t.length===0)return;let i=AP(t),o=e.floatingPointTexture,r=i===ft.FLOAT&&!o,a=RP(t,r),s=OP(a,t,r),u=Math.floor(yt.maximumTextureSize/s),l=Math.min(n,u),d=s*l,f=Math.ceil(n/l),g=1/d,b=g*.5,x=1/f,T=x*.5;this._textureDimensions=new Ce(d,f),this._textureStep=new De(g,b,x,T),this._pixelDatatype=r?ft.UNSIGNED_BYTE:i,this._packFloats=r,this._offsets=a,this._stride=s,this._texture=void 0;let R=4*d*f;this._batchValues=i===ft.FLOAT&&!r?new Float32Array(R):new Uint8Array(R),this._batchValuesDirty=!1}Object.defineProperties(go.prototype,{attributes:{get:function(){return this._attributes}},numberOfInstances:{get:function(){return this._numberOfInstances}}});function AP(e){let t=!1,n=e.length;for(let i=0;i<n;++i)if(e[i].componentDatatype!==Re.UNSIGNED_BYTE){t=!0;break}return t?ft.FLOAT:ft.UNSIGNED_BYTE}function Bx(e,t){let n=e[t].componentsPerAttribute;return n===2?Ce:n===3?h:n===4?De:Number}function RP(e,t){let n=new Array(e.length),i=0,o=e.length;for(let r=0;r<o;++r){let s=e[r].componentDatatype;n[r]=i,s!==Re.UNSIGNED_BYTE&&t?i+=4:++i}return n}function OP(e,t,n){let i=e.length,o=e[i-1];return t[i-1].componentDatatype!==Re.UNSIGNED_BYTE&&n?o+4:o+1}var Ds=new De;function IP(e,t,n){let i=De.unpack(e,t,Ds),o=De.unpackFloat(i);i=De.unpack(e,t+4,Ds);let r=De.unpackFloat(i);i=De.unpack(e,t+8,Ds);let a=De.unpackFloat(i);i=De.unpack(e,t+12,Ds);let s=De.unpackFloat(i);return De.fromElements(o,r,a,s,n)}function PP(e,t,n){let i=De.packFloat(e.x,Ds);De.pack(i,t,n),i=De.packFloat(e.y,i),De.pack(i,t,n+4),i=De.packFloat(e.z,i),De.pack(i,t,n+8),i=De.packFloat(e.w,i),De.pack(i,t,n+12)}var zx=new De;go.prototype.getBatchedAttribute=function(e,t,n){let i=this._attributes,o=this._offsets[t],a=4*this._stride*e+4*o,s;this._packFloats&&i[t].componentDatatype!==ft.UNSIGNED_BYTE?s=IP(this._batchValues,a,zx):s=De.unpack(this._batchValues,a,zx);let u=Bx(i,t);return m(u.fromCartesian4)?u.fromCartesian4(s,n):m(u.clone)?u.clone(s,n):s.x};var DP=[void 0,void 0,new Ce,new h,new De],MP=new De;go.prototype.setBatchedAttribute=function(e,t,n){let i=this._attributes,o=DP[i[t].componentsPerAttribute],r=this.getBatchedAttribute(e,t,o),a=Bx(this._attributes,t);if(m(a.equals)?a.equals(r,n):r===n)return;let u=MP;u.x=m(n.x)?n.x:n,u.y=m(n.y)?n.y:0,u.z=m(n.z)?n.z:0,u.w=m(n.w)?n.w:0;let l=this._offsets[t],f=4*this._stride*e+4*l;this._packFloats&&i[t].componentDatatype!==ft.UNSIGNED_BYTE?PP(u,this._batchValues,f):De.pack(u,this._batchValues,f),this._batchValuesDirty=!0};function NP(e,t){let n=e._textureDimensions;e._texture=new Lx({context:t,pixelFormat:ln.RGBA,pixelDatatype:e._pixelDatatype,width:n.x,height:n.y,sampler:Su.NEAREST,flipY:!1})}function LP(e){let t=e._textureDimensions;e._texture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}go.prototype.update=function(e){m(this._texture)&&!this._batchValuesDirty||this._attributes.length===0||(this._batchValuesDirty=!1,m(this._texture)||NP(this,e.context),LP(this))};go.prototype.getUniformMapCallback=function(){let e=this;return function(t){return e._attributes.length===0?t:Vn(t,{batchTexture:function(){return e._texture},batchTextureDimensions:function(){return e._textureDimensions},batchTextureStep:function(){return e._textureStep}})}};function zP(e){let t=e._stride;return e._textureDimensions.y===1?`uniform vec4 batchTextureStep; 
vec2 computeSt(float batchId) 
{ 
    float stepX = batchTextureStep.x; 
    float centerX = batchTextureStep.y; 
    float numberOfAttributes = float(${t}); 
    return vec2(centerX + (batchId * numberOfAttributes * stepX), 0.5); 
} 
`:`uniform vec4 batchTextureStep; 
uniform vec2 batchTextureDimensions; 
vec2 computeSt(float batchId) 
{ 
    float stepX = batchTextureStep.x; 
    float centerX = batchTextureStep.y; 
    float stepY = batchTextureStep.z; 
    float centerY = batchTextureStep.w; 
    float numberOfAttributes = float(${t}); 
    float xId = mod(batchId * numberOfAttributes, batchTextureDimensions.x); 
    float yId = floor(batchId * numberOfAttributes / batchTextureDimensions.x); 
    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); 
} 
`}function BP(e){return e===1?"float":`vec${e}`}function FP(e){return e===1?".x":e===2?".xy":e===3?".xyz":""}function UP(e,t){let i=e._attributes[t],o=i.componentsPerAttribute,r=i.functionName,a=BP(o),s=FP(o),u=e._offsets[t],l=`${a} ${r}(float batchId) 
{ 
    vec2 st = computeSt(batchId); 
    st.x += batchTextureStep.x * float(${u}); 
`;return e._packFloats&&i.componentDatatype!==ft.UNSIGNED_BYTE?l+=`vec4 textureValue; 
textureValue.x = czm_unpackFloat(texture(batchTexture, st)); 
textureValue.y = czm_unpackFloat(texture(batchTexture, st + vec2(batchTextureStep.x, 0.0))); 
textureValue.z = czm_unpackFloat(texture(batchTexture, st + vec2(batchTextureStep.x * 2.0, 0.0))); 
textureValue.w = czm_unpackFloat(texture(batchTexture, st + vec2(batchTextureStep.x * 3.0, 0.0))); 
`:l+=`    vec4 textureValue = texture(batchTexture, st); 
`,l+=`    ${a} value = textureValue${s}; 
`,e._pixelDatatype===ft.UNSIGNED_BYTE&&i.componentDatatype===Re.UNSIGNED_BYTE&&!i.normalize?l+=`value *= 255.0; 
`:e._pixelDatatype===ft.FLOAT&&i.componentDatatype===Re.UNSIGNED_BYTE&&i.normalize&&(l+=`value /= 255.0; 
`),l+=`    return value; 
} 
`,l}go.prototype.getVertexShaderCallback=function(){let e=this._attributes;if(e.length===0)return function(i){return i};let t=`uniform highp sampler2D batchTexture; 
`;t+=`${zP(this)}
`;let n=e.length;for(let i=0;i<n;++i)t+=UP(this,i);return function(i){let o=i.indexOf("void main"),r=i.substring(0,o),a=i.substring(o);return`${r}
${t}
${a}`}};go.prototype.isDestroyed=function(){return!1};go.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),jn(this)};var Fx=go;var kP={NEVER:z.NEVER,LESS:z.LESS,EQUAL:z.EQUAL,LESS_OR_EQUAL:z.LEQUAL,GREATER:z.GREATER,NOT_EQUAL:z.NOTEQUAL,GREATER_OR_EQUAL:z.GEQUAL,ALWAYS:z.ALWAYS},Ux=Object.freeze(kP);var mt={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};mt.getMathType=function(e){switch(e){case mt.SCALAR:return Number;case mt.VEC2:return Ce;case mt.VEC3:return h;case mt.VEC4:return De;case mt.MAT2:return Gn;case mt.MAT3:return _e;case mt.MAT4:return fe}};mt.getNumberOfComponents=function(e){switch(e){case mt.SCALAR:return 1;case mt.VEC2:return 2;case mt.VEC3:return 3;case mt.VEC4:case mt.MAT2:return 4;case mt.MAT3:return 9;case mt.MAT4:return 16}};mt.getAttributeLocationCount=function(e){switch(e){case mt.SCALAR:case mt.VEC2:case mt.VEC3:case mt.VEC4:return 1;case mt.MAT2:return 2;case mt.MAT3:return 3;case mt.MAT4:return 4}};mt.getGlslType=function(e){switch(e){case mt.SCALAR:return"float";case mt.VEC2:return"vec2";case mt.VEC3:return"vec3";case mt.VEC4:return"vec4";case mt.MAT2:return"mat2";case mt.MAT3:return"mat3";case mt.MAT4:return"mat4"}};var kx=Object.freeze(mt);var Vx=1/256,jx=256,vt={};vt.octEncodeInRange=function(e,t,n){if(n.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),n.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0){let i=n.x,o=n.y;n.x=(1-Math.abs(o))*j.signNotZero(i),n.y=(1-Math.abs(i))*j.signNotZero(o)}return n.x=j.toSNorm(n.x,t),n.y=j.toSNorm(n.y,t),n};vt.octEncode=function(e,t){return vt.octEncodeInRange(e,255,t)};var Ms=new Ce,Gx=new Uint8Array(1);function Ru(e){return Gx[0]=e,Gx[0]}vt.octEncodeToCartesian4=function(e,t){return vt.octEncodeInRange(e,65535,Ms),t.x=Ru(Ms.x*Vx),t.y=Ru(Ms.x),t.z=Ru(Ms.y*Vx),t.w=Ru(Ms.y),t};vt.octDecodeInRange=function(e,t,n,i){if(i.x=j.fromSNorm(e,n),i.y=j.fromSNorm(t,n),i.z=1-(Math.abs(i.x)+Math.abs(i.y)),i.z<0){let o=i.x;i.x=(1-Math.abs(i.y))*j.signNotZero(o),i.y=(1-Math.abs(o))*j.signNotZero(i.y)}return h.normalize(i,i)};vt.octDecode=function(e,t,n){return vt.octDecodeInRange(e,t,255,n)};vt.octDecodeFromCartesian4=function(e,t){let n=e.x,i=e.y,o=e.z,r=e.w,a=n*jx+i,s=o*jx+r;return vt.octDecodeInRange(a,s,65535,t)};vt.octPackFloat=function(e){return 256*e.x+e.y};var Gd=new Ce;vt.octEncodeFloat=function(e){return vt.octEncode(e,Gd),vt.octPackFloat(Gd)};vt.octDecodeFloat=function(e,t){let n=e/256,i=Math.floor(n),o=(n-i)*256;return vt.octDecode(i,o,t)};vt.octPack=function(e,t,n,i){let o=vt.octEncodeFloat(e),r=vt.octEncodeFloat(t),a=vt.octEncode(n,Gd);return i.x=65536*a.x+o,i.y=65536*a.y+r,i};vt.octUnpack=function(e,t,n,i){let o=e.x/65536,r=Math.floor(o),a=(o-r)*65536;o=e.y/65536;let s=Math.floor(o),u=(o-s)*65536;vt.octDecodeFloat(a,t),vt.octDecodeFloat(u,n),vt.octDecode(r,s,i)};vt.compressTextureCoordinates=function(e){let t=e.x*4095|0,n=e.y*4095|0;return 4096*t+n};vt.decompressTextureCoordinates=function(e,t){let n=e/4096,i=Math.floor(n);return t.x=i/4095,t.y=(e-i*4096)/4095,t};function jd(e){return e>>1^-(e&1)}vt.zigZagDeltaDecode=function(e,t,n){let i=e.length,o=0,r=0,a=0;for(let s=0;s<i;++s)o+=jd(e[s]),r+=jd(t[s]),e[s]=o,t[s]=r,m(n)&&(a+=jd(n[s]),n[s]=a)};vt.dequantize=function(e,t,n,i){let o=kx.getNumberOfComponents(n),r;switch(t){case Re.BYTE:r=127;break;case Re.UNSIGNED_BYTE:r=255;break;case Re.SHORT:r=32767;break;case Re.UNSIGNED_SHORT:r=65535;break;case Re.INT:r=2147483647;break;case Re.UNSIGNED_INT:r=4294967295;break}let a=new Float32Array(i*o);for(let s=0;s<i;s++)for(let u=0;u<o;u++){let l=s*o+u;a[l]=Math.max(e[l]/r,-1)}return a};vt.decodeRGB565=function(e,t){let n=e.length;m(t)||(t=new Float32Array(n*3));let i=32-1,o=64-1,r=1/31,a=1/63;for(let s=0;s<n;s++){let u=e[s],l=u>>11,d=u>>5&o,f=u&i,g=3*s;t[g]=l*r,t[g+1]=d*a,t[g+2]=f*r}return t};var Tr=vt;var Hx=new h,qx=new h,Wx=new h;function VP(e,t,n,i,o){m(o)||(o=new h);let r,a,s,u,l,d,f,g;if(m(t.z)){if(h.equalsEpsilon(e,t,j.EPSILON14))return h.clone(h.UNIT_X,o);if(h.equalsEpsilon(e,n,j.EPSILON14))return h.clone(h.UNIT_Y,o);if(h.equalsEpsilon(e,i,j.EPSILON14))return h.clone(h.UNIT_Z,o);r=h.subtract(n,t,Hx),a=h.subtract(i,t,qx),s=h.subtract(e,t,Wx),u=h.dot(r,r),l=h.dot(r,a),d=h.dot(r,s),f=h.dot(a,a),g=h.dot(a,s)}else{if(Ce.equalsEpsilon(e,t,j.EPSILON14))return h.clone(h.UNIT_X,o);if(Ce.equalsEpsilon(e,n,j.EPSILON14))return h.clone(h.UNIT_Y,o);if(Ce.equalsEpsilon(e,i,j.EPSILON14))return h.clone(h.UNIT_Z,o);r=Ce.subtract(n,t,Hx),a=Ce.subtract(i,t,qx),s=Ce.subtract(e,t,Wx),u=Ce.dot(r,r),l=Ce.dot(r,a),d=Ce.dot(r,s),f=Ce.dot(a,a),g=Ce.dot(a,s)}o.y=f*d-l*g,o.z=u*g-l*d;let b=u*f-l*l;if(b!==0)return o.y/=b,o.z/=b,o.x=1-o.y-o.z,o}var Kx=VP;var Hd={};Hd.computeDiscriminant=function(e,t,n){return t*t-4*e*n};function Yx(e,t,n){let i=e+t;return j.sign(e)!==j.sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<n?0:i}Hd.computeRealRoots=function(e,t,n){let i;if(e===0)return t===0?[]:[-n/t];if(t===0){if(n===0)return[0,0];let u=Math.abs(n),l=Math.abs(e);if(u<l&&u/l<j.EPSILON14)return[0,0];if(u>l&&l/u<j.EPSILON14)return[];if(i=-n/e,i<0)return[];let d=Math.sqrt(i);return[-d,d]}else if(n===0)return i=-t/e,i<0?[i,0]:[0,i];let o=t*t,r=4*e*n,a=Yx(o,-r,j.EPSILON14);if(a<0)return[];let s=-.5*Yx(t,j.sign(t)*Math.sqrt(a),j.EPSILON14);return t>0?[s/e,n/s]:[n/s,s/e]};var si=Hd;var Wd={};Wd.computeDiscriminant=function(e,t,n,i){let o=e*e,r=t*t,a=n*n,s=i*i;return 18*e*t*n*i+r*a-27*o*s-4*(e*a*n+r*t*i)};function qd(e,t,n,i){let o=e,r=t/3,a=n/3,s=i,u=o*a,l=r*s,d=r*r,f=a*a,g=o*a-d,b=o*s-r*a,x=r*s-f,T=4*g*x-b*b,R,D;if(T<0){let Oe,Fe,Je;d*l>=u*f?(Oe=o,Fe=g,Je=-2*r*g+o*b):(Oe=s,Fe=x,Je=-s*b+2*a*x);let Ye=-(Je<0?-1:1)*Math.abs(Oe)*Math.sqrt(-T);D=-Je+Ye;let at=D/2,ht=at<0?-Math.pow(-at,1/3):Math.pow(at,1/3),qe=D===Ye?-ht:-Fe/ht;return R=Fe<=0?ht+qe:-Je/(ht*ht+qe*qe+Fe),d*l>=u*f?[(R-r)/o]:[-s/(R+a)]}let M=g,N=-2*r*g+o*b,V=x,q=-s*b+2*a*x,_=Math.sqrt(T),ee=Math.sqrt(3)/2,Z=Math.abs(Math.atan2(o*_,-N)/3);R=2*Math.sqrt(-M);let J=Math.cos(Z);D=R*J;let H=R*(-J/2-ee*Math.sin(Z)),te=D+H>2*r?D-r:H-r,y=o,w=te/y;Z=Math.abs(Math.atan2(s*_,-q)/3),R=2*Math.sqrt(-V),J=Math.cos(Z),D=R*J,H=R*(-J/2-ee*Math.sin(Z));let P=-s,B=D+H<2*a?D+a:H+a,Y=P/B,K=y*B,U=-te*B-y*P,re=te*P,ye=(a*U-r*re)/(-r*U+a*K);return w<=ye?w<=Y?ye<=Y?[w,ye,Y]:[w,Y,ye]:[Y,w,ye]:w<=Y?[ye,w,Y]:ye<=Y?[ye,Y,w]:[Y,ye,w]}Wd.computeRealRoots=function(e,t,n,i){let o,r;if(e===0)return si.computeRealRoots(t,n,i);if(t===0){if(n===0){if(i===0)return[0,0,0];r=-i/e;let a=r<0?-Math.pow(-r,1/3):Math.pow(r,1/3);return[a,a,a]}else if(i===0)return o=si.computeRealRoots(e,0,n),o.Length===0?[0]:[o[0],0,o[1]];return qd(e,0,n,i)}else{if(n===0)return i===0?(r=-t/e,r<0?[r,0,0]:[0,0,r]):qd(e,t,0,i);if(i===0)return o=si.computeRealRoots(e,t,n),o.length===0?[0]:o[1]<=0?[o[0],o[1],0]:o[0]>=0?[0,o[0],o[1]]:[o[0],0,o[1]]}return qd(e,t,n,i)};var Ou=Wd;var Kd={};Kd.computeDiscriminant=function(e,t,n,i,o){let r=e*e,a=r*e,s=t*t,u=s*t,l=n*n,d=l*n,f=i*i,g=f*i,b=o*o,x=b*o;return s*l*f-4*u*g-4*e*d*f+18*e*t*n*g-27*r*f*f+256*a*x+o*(18*u*n*i-4*s*d+16*e*l*l-80*e*t*l*i-6*e*s*f+144*r*n*f)+b*(144*e*s*n-27*s*s-128*r*l-192*r*t*i)};function Ti(e,t,n,i){let o=e*e,r=t-3*o/8,a=n-t*e/2+o*e/8,s=i-n*e/4+t*o/16-3*o*o/256,u=Ou.computeRealRoots(1,2*r,r*r-4*s,-a*a);if(u.length>0){let l=-e/4,d=u[u.length-1];if(Math.abs(d)<j.EPSILON14){let f=si.computeRealRoots(1,r,s);if(f.length===2){let g=f[0],b=f[1],x;if(g>=0&&b>=0){let T=Math.sqrt(g),R=Math.sqrt(b);return[l-R,l-T,l+T,l+R]}else{if(g>=0&&b<0)return x=Math.sqrt(g),[l-x,l+x];if(g<0&&b>=0)return x=Math.sqrt(b),[l-x,l+x]}}return[]}else if(d>0){let f=Math.sqrt(d),g=(r+d-a/f)/2,b=(r+d+a/f)/2,x=si.computeRealRoots(1,f,g),T=si.computeRealRoots(1,-f,b);return x.length!==0?(x[0]+=l,x[1]+=l,T.length!==0?(T[0]+=l,T[1]+=l,x[1]<=T[0]?[x[0],x[1],T[0],T[1]]:T[1]<=x[0]?[T[0],T[1],x[0],x[1]]:x[0]>=T[0]&&x[1]<=T[1]?[T[0],x[0],x[1],T[1]]:T[0]>=x[0]&&T[1]<=x[1]?[x[0],T[0],T[1],x[1]]:x[0]>T[0]&&x[0]<T[1]?[T[0],x[0],T[1],x[1]]:[x[0],T[0],x[1],T[1]]):x):T.length!==0?(T[0]+=l,T[1]+=l,T):[]}}return[]}function Ns(e,t,n,i){let o=n*n,r=t*t,a=e*e,s=-2*t,u=n*e+r-4*i,l=a*i-n*t*e+o,d=Ou.computeRealRoots(1,s,u,l);if(d.length>0){let f=d[0],g=t-f,b=g*g,x=e/2,T=g/2,R=b-4*i,D=b+4*Math.abs(i),M=a-4*f,N=a+4*Math.abs(f),V,q;if(f<0||R*N<M*D){let y=Math.sqrt(M);V=y/2,q=y===0?0:(e*T-n)/y}else{let y=Math.sqrt(R);V=y===0?0:(e*T-n)/y,q=y/2}let _,ee;x===0&&V===0?(_=0,ee=0):j.sign(x)===j.sign(V)?(_=x+V,ee=f/_):(ee=x-V,_=f/ee);let Z,J;T===0&&q===0?(Z=0,J=0):j.sign(T)===j.sign(q)?(Z=T+q,J=i/Z):(J=T-q,Z=i/J);let H=si.computeRealRoots(1,_,Z),te=si.computeRealRoots(1,ee,J);if(H.length!==0)return te.length!==0?H[1]<=te[0]?[H[0],H[1],te[0],te[1]]:te[1]<=H[0]?[te[0],te[1],H[0],H[1]]:H[0]>=te[0]&&H[1]<=te[1]?[te[0],H[0],H[1],te[1]]:te[0]>=H[0]&&te[1]<=H[1]?[H[0],te[0],te[1],H[1]]:H[0]>te[0]&&H[0]<te[1]?[te[0],H[0],te[1],H[1]]:[H[0],te[0],H[1],te[1]]:H;if(te.length!==0)return te}return[]}Kd.computeRealRoots=function(e,t,n,i,o){if(Math.abs(e)<j.EPSILON15)return Ou.computeRealRoots(t,n,i,o);let r=t/e,a=n/e,s=i/e,u=o/e,l=r<0?1:0;switch(l+=a<0?l+1:l,l+=s<0?l+1:l,l+=u<0?l+1:l,l){case 0:return Ti(r,a,s,u);case 1:return Ns(r,a,s,u);case 2:return Ns(r,a,s,u);case 3:return Ti(r,a,s,u);case 4:return Ti(r,a,s,u);case 5:return Ns(r,a,s,u);case 6:return Ti(r,a,s,u);case 7:return Ti(r,a,s,u);case 8:return Ns(r,a,s,u);case 9:return Ti(r,a,s,u);case 10:return Ti(r,a,s,u);case 11:return Ns(r,a,s,u);case 12:return Ti(r,a,s,u);case 13:return Ti(r,a,s,u);case 14:return Ti(r,a,s,u);case 15:return Ti(r,a,s,u);default:return}};var Zx=Kd;function Iu(e,t){t=h.clone(C(t,h.ZERO)),h.equals(t,h.ZERO)||h.normalize(t,t),this.origin=h.clone(C(e,h.ZERO)),this.direction=t}Iu.clone=function(e,t){if(m(e))return m(t)?(t.origin=h.clone(e.origin),t.direction=h.clone(e.direction),t):new Iu(e.origin,e.direction)};Iu.getPoint=function(e,t,n){return m(n)||(n=new h),n=h.multiplyByScalar(e.direction,t,n),h.add(e.origin,n,n)};var Yd=Iu;var Mt={};Mt.rayPlane=function(e,t,n){m(n)||(n=new h);let i=e.origin,o=e.direction,r=t.normal,a=h.dot(r,o);if(Math.abs(a)<j.EPSILON15)return;let s=(-t.distance-h.dot(r,i))/a;if(!(s<0))return n=h.multiplyByScalar(o,s,n),h.add(i,n,n)};var jP=new h,GP=new h,iE=new h,Jx=new h,Xx=new h;Mt.rayTriangleParametric=function(e,t,n,i,o){o=C(o,!1);let r=e.origin,a=e.direction,s=h.subtract(n,t,jP),u=h.subtract(i,t,GP),l=h.cross(a,u,iE),d=h.dot(s,l),f,g,b,x,T;if(o){if(d<j.EPSILON6||(f=h.subtract(r,t,Jx),b=h.dot(f,l),b<0||b>d)||(g=h.cross(f,s,Xx),x=h.dot(a,g),x<0||b+x>d))return;T=h.dot(u,g)/d}else{if(Math.abs(d)<j.EPSILON6)return;let R=1/d;if(f=h.subtract(r,t,Jx),b=h.dot(f,l)*R,b<0||b>1||(g=h.cross(f,s,Xx),x=h.dot(a,g)*R,x<0||b+x>1))return;T=h.dot(u,g)*R}return T};Mt.rayTriangle=function(e,t,n,i,o,r){let a=Mt.rayTriangleParametric(e,t,n,i,o);if(!(!m(a)||a<0))return m(r)||(r=new h),h.multiplyByScalar(e.direction,a,r),h.add(e.origin,r,r)};var HP=new Yd;Mt.lineSegmentTriangle=function(e,t,n,i,o,r,a){let s=HP;h.clone(e,s.origin),h.subtract(t,e,s.direction),h.normalize(s.direction,s.direction);let u=Mt.rayTriangleParametric(s,n,i,o,r);if(!(!m(u)||u<0||u>h.distance(e,t)))return m(a)||(a=new h),h.multiplyByScalar(s.direction,u,a),h.add(s.origin,a,a)};function qP(e,t,n,i){let o=t*t-4*e*n;if(o<0)return;if(o>0){let a=1/(2*e),s=Math.sqrt(o),u=(-t+s)*a,l=(-t-s)*a;return u<l?(i.root0=u,i.root1=l):(i.root0=l,i.root1=u),i}let r=-t/(2*e);if(r!==0)return i.root0=i.root1=r,i}var WP={root0:0,root1:0};function oE(e,t,n){m(n)||(n=new zo);let i=e.origin,o=e.direction,r=t.center,a=t.radius*t.radius,s=h.subtract(i,r,iE),u=h.dot(o,o),l=2*h.dot(o,s),d=h.magnitudeSquared(s)-a,f=qP(u,l,d,WP);if(m(f))return n.start=f.root0,n.stop=f.root1,n}Mt.raySphere=function(e,t,n){if(n=oE(e,t,n),!(!m(n)||n.stop<0))return n.start=Math.max(n.start,0),n};var KP=new Yd;Mt.lineSegmentSphere=function(e,t,n,i){let o=KP;h.clone(e,o.origin);let r=h.subtract(t,e,o.direction),a=h.magnitude(r);if(h.normalize(r,r),i=oE(o,n,i),!(!m(i)||i.stop<0||i.start>a))return i.start=Math.max(i.start,0),i.stop=Math.min(i.stop,a),i};var YP=new h,ZP=new h;Mt.rayEllipsoid=function(e,t){let n=t.oneOverRadii,i=h.multiplyComponents(n,e.origin,YP),o=h.multiplyComponents(n,e.direction,ZP),r=h.magnitudeSquared(i),a=h.dot(i,o),s,u,l,d,f;if(r>1){if(a>=0)return;let g=a*a;if(s=r-1,u=h.magnitudeSquared(o),l=u*s,g<l)return;if(g>l){d=a*a-l,f=-a+Math.sqrt(d);let x=f/u,T=s/f;return x<T?new zo(x,T):{start:T,stop:x}}let b=Math.sqrt(s/u);return new zo(b,b)}else if(r<1)return s=r-1,u=h.magnitudeSquared(o),l=u*s,d=a*a-l,f=-a+Math.sqrt(d),new zo(0,f/u);if(a<0)return u=h.magnitudeSquared(o),new zo(0,-a/u)};function wr(e,t,n){let i=e+t;return j.sign(e)!==j.sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<n?0:i}function JP(e,t,n,i,o){let r=i*i,a=o*o,s=(e[_e.COLUMN1ROW1]-e[_e.COLUMN2ROW2])*a,u=o*(i*wr(e[_e.COLUMN1ROW0],e[_e.COLUMN0ROW1],j.EPSILON15)+t.y),l=e[_e.COLUMN0ROW0]*r+e[_e.COLUMN2ROW2]*a+i*t.x+n,d=a*wr(e[_e.COLUMN2ROW1],e[_e.COLUMN1ROW2],j.EPSILON15),f=o*(i*wr(e[_e.COLUMN2ROW0],e[_e.COLUMN0ROW2])+t.z),g,b=[];if(f===0&&d===0){if(g=si.computeRealRoots(s,u,l),g.length===0)return b;let Z=g[0],J=Math.sqrt(Math.max(1-Z*Z,0));if(b.push(new h(i,o*Z,o*-J)),b.push(new h(i,o*Z,o*J)),g.length===2){let H=g[1],te=Math.sqrt(Math.max(1-H*H,0));b.push(new h(i,o*H,o*-te)),b.push(new h(i,o*H,o*te))}return b}let x=f*f,T=d*d,R=s*s,D=f*d,M=R+T,N=2*(u*s+D),V=2*l*s+u*u-T+x,q=2*(l*u-D),_=l*l-x;if(M===0&&N===0&&V===0&&q===0)return b;g=Zx.computeRealRoots(M,N,V,q,_);let ee=g.length;if(ee===0)return b;for(let Z=0;Z<ee;++Z){let J=g[Z],H=J*J,te=Math.max(1-H,0),y=Math.sqrt(te),w;j.sign(s)===j.sign(l)?w=wr(s*H+l,u*J,j.EPSILON12):j.sign(l)===j.sign(u*J)?w=wr(s*H,u*J+l,j.EPSILON12):w=wr(s*H+u*J,l,j.EPSILON12);let P=wr(d*J,f,j.EPSILON15),B=w*P;B<0?b.push(new h(i,o*J,o*y)):B>0?b.push(new h(i,o*J,o*-y)):y!==0?(b.push(new h(i,o*J,o*-y)),b.push(new h(i,o*J,o*y)),++Z):b.push(new h(i,o*J,o*y))}return b}var Zd=new h,$x=new h,Qx=new h,Pu=new h,XP=new h,$P=new _e,QP=new _e,eD=new _e,tD=new _e,nD=new _e,eE=new _e,tE=new _e,nE=new h,iD=new h,oD=new rt;Mt.grazingAltitudeLocation=function(e,t){let n=e.origin,i=e.direction;if(!h.equals(n,h.ZERO)){let _=t.geodeticSurfaceNormal(n,Zd);if(h.dot(i,_)>=0)return n}let o=m(this.rayEllipsoid(e,t)),r=t.transformPositionToScaledSpace(i,Zd),a=h.normalize(r,r),s=h.mostOrthogonalAxis(r,Pu),u=h.normalize(h.cross(s,a,$x),$x),l=h.normalize(h.cross(a,u,Qx),Qx),d=$P;d[0]=a.x,d[1]=a.y,d[2]=a.z,d[3]=u.x,d[4]=u.y,d[5]=u.z,d[6]=l.x,d[7]=l.y,d[8]=l.z;let f=_e.transpose(d,QP),g=_e.fromScale(t.radii,eD),b=_e.fromScale(t.oneOverRadii,tD),x=nD;x[0]=0,x[1]=-i.z,x[2]=i.y,x[3]=i.z,x[4]=0,x[5]=-i.x,x[6]=-i.y,x[7]=i.x,x[8]=0;let T=_e.multiply(_e.multiply(f,b,eE),x,eE),R=_e.multiply(_e.multiply(T,g,tE),d,tE),D=_e.multiplyByVector(T,n,XP),M=JP(R,h.negate(D,Zd),0,0,1),N,V,q=M.length;if(q>0){let _=h.clone(h.ZERO,iD),ee=Number.NEGATIVE_INFINITY;for(let J=0;J<q;++J){N=_e.multiplyByVector(g,_e.multiplyByVector(d,M[J],nE),nE);let H=h.normalize(h.subtract(N,n,Pu),Pu),te=h.dot(H,i);te>ee&&(ee=te,_=h.clone(N,_))}let Z=t.cartesianToCartographic(_,oD);return ee=j.clamp(ee,0,1),V=h.magnitude(h.subtract(_,n,Pu))*Math.sqrt(1-ee*ee),V=o?-V:V,Z.height=V,t.cartographicToCartesian(Z,new h)}};var rD=new h;Mt.lineSegmentPlane=function(e,t,n,i){m(i)||(i=new h);let o=h.subtract(t,e,rD),r=n.normal,a=h.dot(r,o);if(Math.abs(a)<j.EPSILON6)return;let s=h.dot(r,e),u=-(n.distance+s)/a;if(!(u<0||u>1))return h.multiplyByScalar(o,u,i),h.add(e,i,i),i};Mt.trianglePlaneIntersection=function(e,t,n,i){let o=i.normal,r=i.distance,a=h.dot(o,e)+r<0,s=h.dot(o,t)+r<0,u=h.dot(o,n)+r<0,l=0;l+=a?1:0,l+=s?1:0,l+=u?1:0;let d,f;if((l===1||l===2)&&(d=new h,f=new h),l===1){if(a)return Mt.lineSegmentPlane(e,t,i,d),Mt.lineSegmentPlane(e,n,i,f),{positions:[e,t,n,d,f],indices:[0,3,4,1,2,4,1,4,3]};if(s)return Mt.lineSegmentPlane(t,n,i,d),Mt.lineSegmentPlane(t,e,i,f),{positions:[e,t,n,d,f],indices:[1,3,4,2,0,4,2,4,3]};if(u)return Mt.lineSegmentPlane(n,e,i,d),Mt.lineSegmentPlane(n,t,i,f),{positions:[e,t,n,d,f],indices:[2,3,4,0,1,4,0,4,3]}}else if(l===2)if(a)if(s){if(!u)return Mt.lineSegmentPlane(e,n,i,d),Mt.lineSegmentPlane(t,n,i,f),{positions:[e,t,n,d,f],indices:[0,1,4,0,4,3,2,3,4]}}else return Mt.lineSegmentPlane(n,t,i,d),Mt.lineSegmentPlane(e,t,i,f),{positions:[e,t,n,d,f],indices:[2,0,4,2,4,3,1,3,4]};else return Mt.lineSegmentPlane(t,e,i,d),Mt.lineSegmentPlane(n,e,i,f),{positions:[e,t,n,d,f],indices:[1,2,4,1,4,3,0,3,4]}};var Jd=Mt;var Xd={};Xd.calculateACMR=function(e){e=C(e,C.EMPTY_OBJECT);let t=e.indices,n=e.maximumIndex,i=C(e.cacheSize,24),o=t.length;if(!m(n)){n=0;let s=0,u=t[s];for(;s<o;)u>n&&(n=u),++s,u=t[s]}let r=[];for(let s=0;s<n+1;s++)r[s]=0;let a=i+1;for(let s=0;s<o;++s)a-r[t[s]]>i&&(r[t[s]]=a,++a);return(a-i+1)/(o/3)};Xd.tipsify=function(e){e=C(e,C.EMPTY_OBJECT);let t=e.indices,n=e.maximumIndex,i=C(e.cacheSize,24),o;function r(te,y,w,P){for(;y.length>=1;){let B=y[y.length-1];if(y.splice(y.length-1,1),te[B].numLiveTriangles>0)return B}for(;o<P;){if(te[o].numLiveTriangles>0)return++o,o-1;++o}return-1}function a(te,y,w,P,B,Y,K){let U=-1,re,ye=-1,Oe=0;for(;Oe<w.length;){let Fe=w[Oe];P[Fe].numLiveTriangles&&(re=0,B-P[Fe].timeStamp+2*P[Fe].numLiveTriangles<=y&&(re=B-P[Fe].timeStamp),(re>ye||ye===-1)&&(ye=re,U=Fe)),++Oe}return U===-1?r(P,Y,te,K):U}let s=t.length,u=0,l=0,d=t[l],f=s;if(m(n))u=n+1;else{for(;l<f;)d>u&&(u=d),++l,d=t[l];if(u===-1)return 0;++u}let g=[],b;for(b=0;b<u;b++)g[b]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};l=0;let x=0;for(;l<f;)g[t[l]].vertexTriangles.push(x),++g[t[l]].numLiveTriangles,g[t[l+1]].vertexTriangles.push(x),++g[t[l+1]].numLiveTriangles,g[t[l+2]].vertexTriangles.push(x),++g[t[l+2]].numLiveTriangles,++x,l+=3;let T=0,R=i+1;o=1;let D=[],M=[],N,V,q=0,_=[],ee=s/3,Z=[];for(b=0;b<ee;b++)Z[b]=!1;let J,H;for(;T!==-1;){D=[],V=g[T],H=V.vertexTriangles.length;for(let te=0;te<H;++te)if(x=V.vertexTriangles[te],!Z[x]){Z[x]=!0,l=x+x+x;for(let y=0;y<3;++y)J=t[l],D.push(J),M.push(J),_[q]=J,++q,N=g[J],--N.numLiveTriangles,R-N.timeStamp>i&&(N.timeStamp=R,++R),++l}T=a(t,i,D,g,R,M,u)}return _};var rE=Xd;var Mn={};function Fu(e,t,n,i,o){e[t++]=n,e[t++]=i,e[t++]=i,e[t++]=o,e[t++]=o,e[t]=n}function aD(e){let t=e.length,n=t/3*6,i=Gt.createTypedArray(t,n),o=0;for(let r=0;r<t;r+=3,o+=6)Fu(i,o,e[r],e[r+1],e[r+2]);return i}function sD(e){let t=e.length;if(t>=3){let n=(t-2)*6,i=Gt.createTypedArray(t,n);Fu(i,0,e[0],e[1],e[2]);let o=6;for(let r=3;r<t;++r,o+=6)Fu(i,o,e[r-1],e[r],e[r-2]);return i}return new Uint16Array}function cD(e){if(e.length>0){let t=e.length-1,n=(t-1)*6,i=Gt.createTypedArray(t,n),o=e[0],r=0;for(let a=1;a<t;++a,r+=6)Fu(i,r,o,e[a],e[a+1]);return i}return new Uint16Array}Mn.toWireframe=function(e){let t=e.indices;if(m(t)){switch(e.primitiveType){case bt.TRIANGLES:e.indices=aD(t);break;case bt.TRIANGLE_STRIP:e.indices=sD(t);break;case bt.TRIANGLE_FAN:e.indices=cD(t);break}e.primitiveType=bt.LINES}return e};Mn.createLineSegmentsForVectors=function(e,t,n){t=C(t,"normal"),n=C(n,1e4);let i=e.attributes.position.values,o=e.attributes[t].values,r=i.length,a=new Float64Array(2*r),s=0;for(let d=0;d<r;d+=3)a[s++]=i[d],a[s++]=i[d+1],a[s++]=i[d+2],a[s++]=i[d]+o[d]*n,a[s++]=i[d+1]+o[d+1]*n,a[s++]=i[d+2]+o[d+2]*n;let u,l=e.boundingSphere;return m(l)&&(u=new ke(l.center,l.radius+n)),new Ot({attributes:{position:new Dt({componentDatatype:Re.DOUBLE,componentsPerAttribute:3,values:a})},primitiveType:bt.LINES,boundingSphere:u})};Mn.createAttributeLocations=function(e){let t=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","tangent","bitangent","extrudeDirection","compressedAttributes"],n=e.attributes,i={},o=0,r,a=t.length;for(r=0;r<a;++r){let s=t[r];m(n[s])&&(i[s]=o++)}for(let s in n)n.hasOwnProperty(s)&&!m(i[s])&&(i[s]=o++);return i};Mn.reorderForPreVertexCache=function(e){let t=Ot.computeNumberOfVertices(e),n=e.indices;if(m(n)){let i=new Int32Array(t);for(let g=0;g<t;g++)i[g]=-1;let o=n,r=o.length,a=Gt.createTypedArray(t,r),s=0,u=0,l=0,d;for(;s<r;)d=i[o[s]],d!==-1?a[u]=d:(d=o[s],i[d]=l,a[u]=l,++l),++s,++u;e.indices=a;let f=e.attributes;for(let g in f)if(f.hasOwnProperty(g)&&m(f[g])&&m(f[g].values)){let b=f[g],x=b.values,T=0,R=b.componentsPerAttribute,D=Re.createTypedArray(b.componentDatatype,l*R);for(;T<t;){let M=i[T];if(M!==-1)for(let N=0;N<R;N++)D[R*M+N]=x[R*T+N];++T}b.values=D}}return e};Mn.reorderForPostVertexCache=function(e,t){let n=e.indices;if(e.primitiveType===bt.TRIANGLES&&m(n)){let i=n.length,o=0;for(let r=0;r<i;r++)n[r]>o&&(o=n[r]);e.indices=rE.tipsify({indices:n,maximumIndex:o,cacheSize:t})}return e};function aE(e){let t={};for(let n in e)if(e.hasOwnProperty(n)&&m(e[n])&&m(e[n].values)){let i=e[n];t[n]=new Dt({componentDatatype:i.componentDatatype,componentsPerAttribute:i.componentsPerAttribute,normalize:i.normalize,values:[]})}return t}function uD(e,t,n){for(let i in t)if(t.hasOwnProperty(i)&&m(t[i])&&m(t[i].values)){let o=t[i];for(let r=0;r<o.componentsPerAttribute;++r)e[i].values.push(o.values[n*o.componentsPerAttribute+r])}}Mn.fitToUnsignedShortIndices=function(e){let t=[],n=Ot.computeNumberOfVertices(e);if(m(e.indices)&&n>=j.SIXTY_FOUR_KILOBYTES){let i=[],o=[],r=0,a=aE(e.attributes),s=e.indices,u=s.length,l;e.primitiveType===bt.TRIANGLES?l=3:e.primitiveType===bt.LINES?l=2:e.primitiveType===bt.POINTS&&(l=1);for(let d=0;d<u;d+=l){for(let f=0;f<l;++f){let g=s[d+f],b=i[g];m(b)||(b=r++,i[g]=b,uD(a,e.attributes,g)),o.push(b)}r+l>=j.SIXTY_FOUR_KILOBYTES&&(t.push(new Ot({attributes:a,indices:o,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV})),i=[],o=[],r=0,a=aE(e.attributes))}o.length!==0&&t.push(new Ot({attributes:a,indices:o,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV}))}else t.push(e);return t};var sE=new h,lD=new rt;Mn.projectTo2D=function(e,t,n,i,o){let r=e.attributes[t];o=m(o)?o:new Bi;let a=o.ellipsoid,s=r.values,u=new Float64Array(s.length),l=0;for(let d=0;d<s.length;d+=3){let f=h.fromArray(s,d,sE),g=a.cartesianToCartographic(f,lD),b=o.project(g,sE);u[l++]=b.x,u[l++]=b.y,u[l++]=b.z}return e.attributes[n]=r,e.attributes[i]=new Dt({componentDatatype:Re.DOUBLE,componentsPerAttribute:3,values:u}),delete e.attributes[t],e};var $d={high:0,low:0};Mn.encodeAttribute=function(e,t,n,i){let o=e.attributes[t],r=o.values,a=r.length,s=new Float32Array(a),u=new Float32Array(a);for(let d=0;d<a;++d)da.encode(r[d],$d),s[d]=$d.high,u[d]=$d.low;let l=o.componentsPerAttribute;return e.attributes[n]=new Dt({componentDatatype:Re.FLOAT,componentsPerAttribute:l,values:s}),e.attributes[i]=new Dt({componentDatatype:Re.FLOAT,componentsPerAttribute:l,values:u}),delete e.attributes[t],e};var Si=new h;function Qd(e,t){if(m(t)){let n=t.values,i=n.length;for(let o=0;o<i;o+=3)h.unpack(n,o,Si),fe.multiplyByPoint(e,Si,Si),h.pack(Si,n,o)}}function ef(e,t){if(m(t)){let n=t.values,i=n.length;for(let o=0;o<i;o+=3)h.unpack(n,o,Si),_e.multiplyByVector(e,Si,Si),Si=h.normalize(Si,Si),h.pack(Si,n,o)}}var Du=new fe,Mu=new _e;Mn.transformToWorldCoordinates=function(e){let t=e.modelMatrix;if(fe.equals(t,fe.IDENTITY))return e;let n=e.geometry.attributes;Qd(t,n.position),Qd(t,n.prevPosition),Qd(t,n.nextPosition),(m(n.normal)||m(n.tangent)||m(n.bitangent))&&(fe.inverse(t,Du),fe.transpose(Du,Du),fe.getMatrix3(Du,Mu),ef(Mu,n.normal),ef(Mu,n.tangent),ef(Mu,n.bitangent));let i=e.geometry.boundingSphere;return m(i)&&(e.geometry.boundingSphere=ke.transform(i,t,i)),e.modelMatrix=fe.clone(fe.IDENTITY),e};function pD(e,t){let n=e.length,i={},o=e[0][t].attributes,r;for(r in o)if(o.hasOwnProperty(r)&&m(o[r])&&m(o[r].values)){let a=o[r],s=a.values.length,u=!0;for(let l=1;l<n;++l){let d=e[l][t].attributes[r];if(!m(d)||a.componentDatatype!==d.componentDatatype||a.componentsPerAttribute!==d.componentsPerAttribute||a.normalize!==d.normalize){u=!1;break}s+=d.values.length}u&&(i[r]=new Dt({componentDatatype:a.componentDatatype,componentsPerAttribute:a.componentsPerAttribute,normalize:a.normalize,values:Re.createTypedArray(a.componentDatatype,s)}))}return i}var dD=new h;function tf(e,t){let n=e.length,i,o,r,a,s=e[0].modelMatrix,u=m(e[0][t].indices),l=e[0][t].primitiveType,d=pD(e,t),f,g,b;for(i in d)if(d.hasOwnProperty(i))for(f=d[i].values,a=0,o=0;o<n;++o)for(g=e[o][t].attributes[i].values,b=g.length,r=0;r<b;++r)f[a++]=g[r];let x;if(u){let M=0;for(o=0;o<n;++o)M+=e[o][t].indices.length;let N=Ot.computeNumberOfVertices(new Ot({attributes:d,primitiveType:bt.POINTS})),V=Gt.createTypedArray(N,M),q=0,_=0;for(o=0;o<n;++o){let ee=e[o][t].indices,Z=ee.length;for(a=0;a<Z;++a)V[q++]=_+ee[a];_+=Ot.computeNumberOfVertices(e[o][t])}x=V}let T=new h,R=0,D;for(o=0;o<n;++o){if(D=e[o][t].boundingSphere,!m(D)){T=void 0;break}h.add(D.center,T,T)}if(m(T))for(h.divideByScalar(T,n,T),o=0;o<n;++o){D=e[o][t].boundingSphere;let M=h.magnitude(h.subtract(D.center,T,dD))+D.radius;M>R&&(R=M)}return new Ot({attributes:d,indices:x,primitiveType:l,boundingSphere:m(T)?new ke(T,R):void 0})}Mn.combineInstances=function(e){let t=[],n=[],i=e.length;for(let r=0;r<i;++r){let a=e[r];m(a.geometry)?t.push(a):m(a.westHemisphereGeometry)&&m(a.eastHemisphereGeometry)&&n.push(a)}let o=[];return t.length>0&&o.push(tf(t,"geometry")),n.length>0&&(o.push(tf(n,"westHemisphereGeometry")),o.push(tf(n,"eastHemisphereGeometry"))),o};var ci=new h,Ls=new h,Sa=new h,Aa=new h;Mn.computeNormal=function(e){let t=e.indices,n=e.attributes,i=n.position.values,o=n.position.values.length/3,r=t.length,a=new Array(o),s=new Array(r/3),u=new Array(r),l;for(l=0;l<o;l++)a[l]={indexOffset:0,count:0,currentCount:0};let d=0;for(l=0;l<r;l+=3){let x=t[l],T=t[l+1],R=t[l+2],D=x*3,M=T*3,N=R*3;Ls.x=i[D],Ls.y=i[D+1],Ls.z=i[D+2],Sa.x=i[M],Sa.y=i[M+1],Sa.z=i[M+2],Aa.x=i[N],Aa.y=i[N+1],Aa.z=i[N+2],a[x].count++,a[T].count++,a[R].count++,h.subtract(Sa,Ls,Sa),h.subtract(Aa,Ls,Aa),s[d]=h.cross(Sa,Aa,new h),d++}let f=0;for(l=0;l<o;l++)a[l].indexOffset+=f,f+=a[l].count;d=0;let g;for(l=0;l<r;l+=3){g=a[t[l]];let x=g.indexOffset+g.currentCount;u[x]=d,g.currentCount++,g=a[t[l+1]],x=g.indexOffset+g.currentCount,u[x]=d,g.currentCount++,g=a[t[l+2]],x=g.indexOffset+g.currentCount,u[x]=d,g.currentCount++,d++}let b=new Float32Array(o*3);for(l=0;l<o;l++){let x=l*3;if(g=a[l],h.clone(h.ZERO,ci),g.count>0){for(d=0;d<g.count;d++)h.add(ci,s[u[g.indexOffset+d]],ci);h.equalsEpsilon(h.ZERO,ci,j.EPSILON10)&&h.clone(s[u[g.indexOffset]],ci)}h.equalsEpsilon(h.ZERO,ci,j.EPSILON10)&&(ci.z=1),h.normalize(ci,ci),b[x]=ci.x,b[x+1]=ci.y,b[x+2]=ci.z}return e.attributes.normal=new Dt({componentDatatype:Re.FLOAT,componentsPerAttribute:3,values:b}),e};var fD=new h,cE=new h,mD=new h;Mn.computeTangentAndBitangent=function(e){let t=e.attributes,n=e.indices,i=e.attributes.position.values,o=e.attributes.normal.values,r=e.attributes.st.values,a=e.attributes.position.values.length/3,s=n.length,u=new Array(a*3),l;for(l=0;l<u.length;l++)u[l]=0;let d,f,g;for(l=0;l<s;l+=3){let T=n[l],R=n[l+1],D=n[l+2];d=T*3,f=R*3,g=D*3;let M=T*2,N=R*2,V=D*2,q=i[d],_=i[d+1],ee=i[d+2],Z=r[M],J=r[M+1],H=r[N+1]-J,te=r[V+1]-J,y=1/((r[N]-Z)*te-(r[V]-Z)*H),w=(te*(i[f]-q)-H*(i[g]-q))*y,P=(te*(i[f+1]-_)-H*(i[g+1]-_))*y,B=(te*(i[f+2]-ee)-H*(i[g+2]-ee))*y;u[d]+=w,u[d+1]+=P,u[d+2]+=B,u[f]+=w,u[f+1]+=P,u[f+2]+=B,u[g]+=w,u[g+1]+=P,u[g+2]+=B}let b=new Float32Array(a*3),x=new Float32Array(a*3);for(l=0;l<a;l++){d=l*3,f=d+1,g=d+2;let T=h.fromArray(o,d,fD),R=h.fromArray(u,d,mD),D=h.dot(T,R);h.multiplyByScalar(T,D,cE),h.normalize(h.subtract(R,cE,R),R),b[d]=R.x,b[f]=R.y,b[g]=R.z,h.normalize(h.cross(T,R,R),R),x[d]=R.x,x[f]=R.y,x[g]=R.z}return e.attributes.tangent=new Dt({componentDatatype:Re.FLOAT,componentsPerAttribute:3,values:b}),e.attributes.bitangent=new Dt({componentDatatype:Re.FLOAT,componentsPerAttribute:3,values:x}),e};var zs=new Ce,wi=new h,uE=new h,lE=new h,Nu=new Ce;Mn.compressVertices=function(e){let t=e.attributes.extrudeDirection,n,i;if(m(t)){let _=t.values;i=_.length/3;let ee=new Float32Array(i*2),Z=0;for(n=0;n<i;++n){if(h.fromArray(_,n*3,wi),h.equals(wi,h.ZERO)){Z+=2;continue}Nu=Tr.octEncodeInRange(wi,65535,Nu),ee[Z++]=Nu.x,ee[Z++]=Nu.y}return e.attributes.compressedAttributes=new Dt({componentDatatype:Re.FLOAT,componentsPerAttribute:2,values:ee}),delete e.attributes.extrudeDirection,e}let o=e.attributes.normal,r=e.attributes.st,a=m(o),s=m(r);if(!a&&!s)return e;let u=e.attributes.tangent,l=e.attributes.bitangent,d=m(u),f=m(l),g,b,x,T;a&&(g=o.values),s&&(b=r.values),d&&(x=u.values),f&&(T=l.values),i=(a?g.length:b.length)/(a?3:2);let M=i,N=s&&a?2:1;N+=d||f?1:0,M*=N;let V=new Float32Array(M),q=0;for(n=0;n<i;++n){s&&(Ce.fromArray(b,n*2,zs),V[q++]=Tr.compressTextureCoordinates(zs));let _=n*3;a&&m(x)&&m(T)?(h.fromArray(g,_,wi),h.fromArray(x,_,uE),h.fromArray(T,_,lE),Tr.octPack(wi,uE,lE,zs),V[q++]=zs.x,V[q++]=zs.y):(a&&(h.fromArray(g,_,wi),V[q++]=Tr.octEncodeFloat(wi)),d&&(h.fromArray(x,_,wi),V[q++]=Tr.octEncodeFloat(wi)),f&&(h.fromArray(T,_,wi),V[q++]=Tr.octEncodeFloat(wi)))}return e.attributes.compressedAttributes=new Dt({componentDatatype:Re.FLOAT,componentsPerAttribute:N,values:V}),a&&delete e.attributes.normal,s&&delete e.attributes.st,f&&delete e.attributes.bitangent,d&&delete e.attributes.tangent,e};function hD(e){if(m(e.indices))return e;let t=Ot.computeNumberOfVertices(e),n=Gt.createTypedArray(t,t);for(let i=0;i<t;++i)n[i]=i;return e.indices=n,e}function gD(e){let t=Ot.computeNumberOfVertices(e),n=Gt.createTypedArray(t,(t-2)*3);n[0]=1,n[1]=0,n[2]=2;let i=3;for(let o=3;o<t;++o)n[i++]=o-1,n[i++]=0,n[i++]=o;return e.indices=n,e.primitiveType=bt.TRIANGLES,e}function _D(e){let t=Ot.computeNumberOfVertices(e),n=Gt.createTypedArray(t,(t-2)*3);n[0]=0,n[1]=1,n[2]=2,t>3&&(n[3]=0,n[4]=2,n[5]=3);let i=6;for(let o=3;o<t-1;o+=2)n[i++]=o,n[i++]=o-1,n[i++]=o+1,o+2<t&&(n[i++]=o,n[i++]=o+1,n[i++]=o+2);return e.indices=n,e.primitiveType=bt.TRIANGLES,e}function yD(e){if(m(e.indices))return e;let t=Ot.computeNumberOfVertices(e),n=Gt.createTypedArray(t,t);for(let i=0;i<t;++i)n[i]=i;return e.indices=n,e}function vD(e){let t=Ot.computeNumberOfVertices(e),n=Gt.createTypedArray(t,(t-1)*2);n[0]=0,n[1]=1;let i=2;for(let o=2;o<t;++o)n[i++]=o-1,n[i++]=o;return e.indices=n,e.primitiveType=bt.LINES,e}function bD(e){let t=Ot.computeNumberOfVertices(e),n=Gt.createTypedArray(t,t*2);n[0]=0,n[1]=1;let i=2;for(let o=2;o<t;++o)n[i++]=o-1,n[i++]=o;return n[i++]=t-1,n[i]=0,e.indices=n,e.primitiveType=bt.LINES,e}function xD(e){switch(e.primitiveType){case bt.TRIANGLE_FAN:return gD(e);case bt.TRIANGLE_STRIP:return _D(e);case bt.TRIANGLES:return hD(e);case bt.LINE_STRIP:return vD(e);case bt.LINE_LOOP:return bD(e);case bt.LINES:return yD(e)}return e}function Ho(e,t){Math.abs(e.y)<j.EPSILON6&&(t?e.y=-j.EPSILON6:e.y=j.EPSILON6)}function ED(e,t,n){if(e.y!==0&&t.y!==0&&n.y!==0){Ho(e,e.y<0),Ho(t,t.y<0),Ho(n,n.y<0);return}let i=Math.abs(e.y),o=Math.abs(t.y),r=Math.abs(n.y),a;i>o?i>r?a=j.sign(e.y):a=j.sign(n.y):o>r?a=j.sign(t.y):a=j.sign(n.y);let s=a<0;Ho(e,s),Ho(t,s),Ho(n,s)}var pE=new h;function ui(e,t,n,i){h.add(e,h.multiplyByScalar(h.subtract(t,e,pE),e.y/(e.y-t.y),pE),n),h.clone(n,i),Ho(n,!0),Ho(i,!1)}var Sr=new h,Ar=new h,Rr=new h,Or=new h,nf={positions:new Array(7),indices:new Array(3*3)};function CD(e,t,n){if(e.x>=0||t.x>=0||n.x>=0)return;ED(e,t,n);let i=e.y<0,o=t.y<0,r=n.y<0,a=0;a+=i?1:0,a+=o?1:0,a+=r?1:0;let s=nf.indices;a===1?(s[1]=3,s[2]=4,s[5]=6,s[7]=6,s[8]=5,i?(ui(e,t,Sr,Rr),ui(e,n,Ar,Or),s[0]=0,s[3]=1,s[4]=2,s[6]=1):o?(ui(t,n,Sr,Rr),ui(t,e,Ar,Or),s[0]=1,s[3]=2,s[4]=0,s[6]=2):r&&(ui(n,e,Sr,Rr),ui(n,t,Ar,Or),s[0]=2,s[3]=0,s[4]=1,s[6]=0)):a===2&&(s[2]=4,s[4]=4,s[5]=3,s[7]=5,s[8]=6,i?o?r||(ui(n,e,Sr,Rr),ui(n,t,Ar,Or),s[0]=0,s[1]=1,s[3]=0,s[6]=2):(ui(t,n,Sr,Rr),ui(t,e,Ar,Or),s[0]=2,s[1]=0,s[3]=2,s[6]=1):(ui(e,t,Sr,Rr),ui(e,n,Ar,Or),s[0]=1,s[1]=2,s[3]=1,s[6]=0));let u=nf.positions;return u[0]=e,u[1]=t,u[2]=n,u.length=3,(a===1||a===2)&&(u[3]=Sr,u[4]=Ar,u[5]=Rr,u[6]=Or,u.length=7),nf}function dE(e,t){let n=e.attributes;if(n.position.values.length===0)return;for(let o in n)if(n.hasOwnProperty(o)&&m(n[o])&&m(n[o].values)){let r=n[o];r.values=Re.createTypedArray(r.componentDatatype,r.values)}let i=Ot.computeNumberOfVertices(e);return e.indices=Gt.createTypedArray(i,e.indices),t&&(e.boundingSphere=ke.fromVertices(n.position.values)),e}function Oa(e){let t=e.attributes,n={};for(let i in t)if(t.hasOwnProperty(i)&&m(t[i])&&m(t[i].values)){let o=t[i];n[i]=new Dt({componentDatatype:o.componentDatatype,componentsPerAttribute:o.componentsPerAttribute,normalize:o.normalize,values:[]})}return new Ot({attributes:n,indices:[],primitiveType:e.primitiveType})}function sf(e,t,n){let i=m(e.geometry.boundingSphere);t=dE(t,i),n=dE(n,i),m(n)&&!m(t)?e.geometry=n:!m(n)&&m(t)?e.geometry=t:(e.westHemisphereGeometry=t,e.eastHemisphereGeometry=n,e.geometry=void 0)}function cf(e,t){let n=new e,i=new e,o=new e;return function(r,a,s,u,l,d,f,g){let b=e.fromArray(l,r*t,n),x=e.fromArray(l,a*t,i),T=e.fromArray(l,s*t,o);e.multiplyByScalar(b,u.x,b),e.multiplyByScalar(x,u.y,x),e.multiplyByScalar(T,u.z,T);let R=e.add(b,x,b);e.add(R,T,R),g&&e.normalize(R,R),e.pack(R,d,f*t)}}var TD=cf(De,4),Bu=cf(h,3),yE=cf(Ce,2),wD=function(e,t,n,i,o,r,a){let s=o[e]*i.x,u=o[t]*i.y,l=o[n]*i.z;r[a]=s+u+l>j.EPSILON6?1:0},Bs=new h,of=new h,rf=new h,SD=new h;function Lu(e,t,n,i,o,r,a,s,u,l,d,f,g,b,x,T){if(!m(r)&&!m(a)&&!m(s)&&!m(u)&&!m(l)&&b===0)return;let R=h.fromArray(o,e*3,Bs),D=h.fromArray(o,t*3,of),M=h.fromArray(o,n*3,rf),N=Kx(i,R,D,M,SD);if(m(N)){if(m(r)&&Bu(e,t,n,N,r,f.normal.values,T,!0),m(l)){let V=h.fromArray(l,e*3,Bs),q=h.fromArray(l,t*3,of),_=h.fromArray(l,n*3,rf);h.multiplyByScalar(V,N.x,V),h.multiplyByScalar(q,N.y,q),h.multiplyByScalar(_,N.z,_);let ee;!h.equals(V,h.ZERO)||!h.equals(q,h.ZERO)||!h.equals(_,h.ZERO)?(ee=h.add(V,q,V),h.add(ee,_,ee),h.normalize(ee,ee)):(ee=Bs,ee.x=0,ee.y=0,ee.z=0),h.pack(ee,f.extrudeDirection.values,T*3)}if(m(d)&&wD(e,t,n,N,d,f.applyOffset.values,T),m(a)&&Bu(e,t,n,N,a,f.tangent.values,T,!0),m(s)&&Bu(e,t,n,N,s,f.bitangent.values,T,!0),m(u)&&yE(e,t,n,N,u,f.st.values,T),b>0)for(let V=0;V<b;V++){let q=g[V];AD(e,t,n,N,T,x[q],f[q])}}}function AD(e,t,n,i,o,r,a){let s=r.componentsPerAttribute,u=r.values,l=a.values;switch(s){case 4:TD(e,t,n,i,u,l,o,!1);break;case 3:Bu(e,t,n,i,u,l,o,!1);break;case 2:yE(e,t,n,i,u,l,o,!1);break;default:l[o]=u[e]*i.x+u[t]*i.y+u[n]*i.z}}function Ki(e,t,n,i,o,r){let a=e.position.values.length/3;if(o!==-1){let s=i[o],u=n[s];return u===-1?(n[s]=a,e.position.values.push(r.x,r.y,r.z),t.push(a),a):(t.push(u),u)}return e.position.values.push(r.x,r.y,r.z),t.push(a),a}var RD={position:!0,normal:!0,bitangent:!0,tangent:!0,st:!0,extrudeDirection:!0,applyOffset:!0};function fE(e){let t=e.geometry,n=t.attributes,i=n.position.values,o=m(n.normal)?n.normal.values:void 0,r=m(n.bitangent)?n.bitangent.values:void 0,a=m(n.tangent)?n.tangent.values:void 0,s=m(n.st)?n.st.values:void 0,u=m(n.extrudeDirection)?n.extrudeDirection.values:void 0,l=m(n.applyOffset)?n.applyOffset.values:void 0,d=t.indices,f=[];for(let ee in n)n.hasOwnProperty(ee)&&!RD[ee]&&m(n[ee])&&f.push(ee);let g=f.length,b=Oa(t),x=Oa(t),T,R,D,M,N,V=[];V.length=i.length/3;let q=[];for(q.length=i.length/3,N=0;N<V.length;++N)V[N]=-1,q[N]=-1;let _=d.length;for(N=0;N<_;N+=3){let ee=d[N],Z=d[N+1],J=d[N+2],H=h.fromArray(i,ee*3),te=h.fromArray(i,Z*3),y=h.fromArray(i,J*3),w=CD(H,te,y);if(m(w)&&w.positions.length>3){let P=w.positions,B=w.indices,Y=B.length;for(let K=0;K<Y;++K){let U=B[K],re=P[U];re.y<0?(T=x.attributes,R=x.indices,D=V):(T=b.attributes,R=b.indices,D=q),M=Ki(T,R,D,d,U<3?N+U:-1,re),Lu(ee,Z,J,re,i,o,a,r,s,u,l,T,f,g,n,M)}}else m(w)&&(H=w.positions[0],te=w.positions[1],y=w.positions[2]),H.y<0?(T=x.attributes,R=x.indices,D=V):(T=b.attributes,R=b.indices,D=q),M=Ki(T,R,D,d,N,H),Lu(ee,Z,J,H,i,o,a,r,s,u,l,T,f,g,n,M),M=Ki(T,R,D,d,N+1,te),Lu(ee,Z,J,te,i,o,a,r,s,u,l,T,f,g,n,M),M=Ki(T,R,D,d,N+2,y),Lu(ee,Z,J,y,i,o,a,r,s,u,l,T,f,g,n,M)}sf(e,x,b)}var vE=Ss.fromPointNormal(h.ZERO,h.UNIT_Y),OD=new h,ID=new h;function Ra(e,t,n,i,o,r,a){if(!m(a))return;let s=h.fromArray(i,e*3,Bs);h.equalsEpsilon(s,n,j.EPSILON10)?r.applyOffset.values[o]=a[e]:r.applyOffset.values[o]=a[t]}function mE(e){let t=e.geometry,n=t.attributes,i=n.position.values,o=m(n.applyOffset)?n.applyOffset.values:void 0,r=t.indices,a=Oa(t),s=Oa(t),u,l=r.length,d=[];d.length=i.length/3;let f=[];for(f.length=i.length/3,u=0;u<d.length;++u)d[u]=-1,f[u]=-1;for(u=0;u<l;u+=2){let g=r[u],b=r[u+1],x=h.fromArray(i,g*3,Bs),T=h.fromArray(i,b*3,of),R;Math.abs(x.y)<j.EPSILON6&&(x.y<0?x.y=-j.EPSILON6:x.y=j.EPSILON6),Math.abs(T.y)<j.EPSILON6&&(T.y<0?T.y=-j.EPSILON6:T.y=j.EPSILON6);let D=a.attributes,M=a.indices,N=f,V=s.attributes,q=s.indices,_=d,ee=Jd.lineSegmentPlane(x,T,vE,rf);if(m(ee)){let Z=h.multiplyByScalar(h.UNIT_Y,5*j.EPSILON9,OD);x.y<0&&(h.negate(Z,Z),D=s.attributes,M=s.indices,N=d,V=a.attributes,q=a.indices,_=f);let J=h.add(ee,Z,ID);R=Ki(D,M,N,r,u,x),Ra(g,b,x,i,R,D,o),R=Ki(D,M,N,r,-1,J),Ra(g,b,J,i,R,D,o),h.negate(Z,Z),h.add(ee,Z,J),R=Ki(V,q,_,r,-1,J),Ra(g,b,J,i,R,V,o),R=Ki(V,q,_,r,u+1,T),Ra(g,b,T,i,R,V,o)}else{let Z,J,H;x.y<0?(Z=s.attributes,J=s.indices,H=d):(Z=a.attributes,J=a.indices,H=f),R=Ki(Z,J,H,r,u,x),Ra(g,b,x,i,R,Z,o),R=Ki(Z,J,H,r,u+1,T),Ra(g,b,T,i,R,Z,o)}}sf(e,s,a)}var hE=new Ce,PD=new Ce,bE=new h,xE=new h,af=new h,DD=new h,MD=new h,ND=new h,gE=new De;function _E(e){let t=e.attributes,n=t.position.values,i=t.prevPosition.values,o=t.nextPosition.values,r=n.length;for(let a=0;a<r;a+=3){let s=h.unpack(n,a,bE);if(s.x>0)continue;let u=h.unpack(i,a,xE);(s.y<0&&u.y>0||s.y>0&&u.y<0)&&(a-3>0?(i[a]=n[a-3],i[a+1]=n[a-2],i[a+2]=n[a-1]):h.pack(s,i,a));let l=h.unpack(o,a,af);(s.y<0&&l.y>0||s.y>0&&l.y<0)&&(a+3<r?(o[a]=n[a+3],o[a+1]=n[a+4],o[a+2]=n[a+5]):h.pack(s,o,a))}}var LD=5*j.EPSILON9,zu=j.EPSILON6;function zD(e){let t=e.geometry,n=t.attributes,i=n.position.values,o=n.prevPosition.values,r=n.nextPosition.values,a=n.expandAndWidth.values,s=m(n.st)?n.st.values:void 0,u=m(n.color)?n.color.values:void 0,l=Oa(t),d=Oa(t),f,g,b,x=!1,T=i.length/3;for(f=0;f<T;f+=4){let R=f,D=f+2,M=h.fromArray(i,R*3,bE),N=h.fromArray(i,D*3,xE);if(Math.abs(M.y)<zu)for(M.y=zu*(N.y<0?-1:1),i[f*3+1]=M.y,i[(f+1)*3+1]=M.y,g=R*3;g<R*3+4*3;g+=3)o[g]=i[f*3],o[g+1]=i[f*3+1],o[g+2]=i[f*3+2];if(Math.abs(N.y)<zu)for(N.y=zu*(M.y<0?-1:1),i[(f+2)*3+1]=N.y,i[(f+3)*3+1]=N.y,g=R*3;g<R*3+4*3;g+=3)r[g]=i[(f+2)*3],r[g+1]=i[(f+2)*3+1],r[g+2]=i[(f+2)*3+2];let V=l.attributes,q=l.indices,_=d.attributes,ee=d.indices,Z=Jd.lineSegmentPlane(M,N,vE,DD);if(m(Z)){x=!0;let J=h.multiplyByScalar(h.UNIT_Y,LD,MD);M.y<0&&(h.negate(J,J),V=d.attributes,q=d.indices,_=l.attributes,ee=l.indices);let H=h.add(Z,J,ND);V.position.values.push(M.x,M.y,M.z,M.x,M.y,M.z),V.position.values.push(H.x,H.y,H.z),V.position.values.push(H.x,H.y,H.z),V.prevPosition.values.push(o[R*3],o[R*3+1],o[R*3+2]),V.prevPosition.values.push(o[R*3+3],o[R*3+4],o[R*3+5]),V.prevPosition.values.push(M.x,M.y,M.z,M.x,M.y,M.z),V.nextPosition.values.push(H.x,H.y,H.z),V.nextPosition.values.push(H.x,H.y,H.z),V.nextPosition.values.push(H.x,H.y,H.z),V.nextPosition.values.push(H.x,H.y,H.z),h.negate(J,J),h.add(Z,J,H),_.position.values.push(H.x,H.y,H.z),_.position.values.push(H.x,H.y,H.z),_.position.values.push(N.x,N.y,N.z,N.x,N.y,N.z),_.prevPosition.values.push(H.x,H.y,H.z),_.prevPosition.values.push(H.x,H.y,H.z),_.prevPosition.values.push(H.x,H.y,H.z),_.prevPosition.values.push(H.x,H.y,H.z),_.nextPosition.values.push(N.x,N.y,N.z,N.x,N.y,N.z),_.nextPosition.values.push(r[D*3],r[D*3+1],r[D*3+2]),_.nextPosition.values.push(r[D*3+3],r[D*3+4],r[D*3+5]);let te=Ce.fromArray(a,R*2,hE),y=Math.abs(te.y);V.expandAndWidth.values.push(-1,y,1,y),V.expandAndWidth.values.push(-1,-y,1,-y),_.expandAndWidth.values.push(-1,y,1,y),_.expandAndWidth.values.push(-1,-y,1,-y);let w=h.magnitudeSquared(h.subtract(Z,M,af));if(w/=h.magnitudeSquared(h.subtract(N,M,af)),m(u)){let P=De.fromArray(u,R*4,gE),B=De.fromArray(u,D*4,gE),Y=j.lerp(P.x,B.x,w),K=j.lerp(P.y,B.y,w),U=j.lerp(P.z,B.z,w),re=j.lerp(P.w,B.w,w);for(g=R*4;g<R*4+2*4;++g)V.color.values.push(u[g]);for(V.color.values.push(Y,K,U,re),V.color.values.push(Y,K,U,re),_.color.values.push(Y,K,U,re),_.color.values.push(Y,K,U,re),g=D*4;g<D*4+2*4;++g)_.color.values.push(u[g])}if(m(s)){let P=Ce.fromArray(s,R*2,hE),B=Ce.fromArray(s,(f+3)*2,PD),Y=j.lerp(P.x,B.x,w);for(g=R*2;g<R*2+2*2;++g)V.st.values.push(s[g]);for(V.st.values.push(Y,P.y),V.st.values.push(Y,B.y),_.st.values.push(Y,P.y),_.st.values.push(Y,B.y),g=D*2;g<D*2+2*2;++g)_.st.values.push(s[g])}b=V.position.values.length/3-4,q.push(b,b+2,b+1),q.push(b+1,b+2,b+3),b=_.position.values.length/3-4,ee.push(b,b+2,b+1),ee.push(b+1,b+2,b+3)}else{let J,H;for(M.y<0?(J=d.attributes,H=d.indices):(J=l.attributes,H=l.indices),J.position.values.push(M.x,M.y,M.z),J.position.values.push(M.x,M.y,M.z),J.position.values.push(N.x,N.y,N.z),J.position.values.push(N.x,N.y,N.z),g=f*3;g<f*3+4*3;++g)J.prevPosition.values.push(o[g]),J.nextPosition.values.push(r[g]);for(g=f*2;g<f*2+4*2;++g)J.expandAndWidth.values.push(a[g]),m(s)&&J.st.values.push(s[g]);if(m(u))for(g=f*4;g<f*4+4*4;++g)J.color.values.push(u[g]);b=J.position.values.length/3-4,H.push(b,b+2,b+1),H.push(b+1,b+2,b+3)}}x&&(_E(d),_E(l)),sf(e,d,l)}Mn.splitLongitude=function(e){let t=e.geometry,n=t.boundingSphere;if(m(n)&&(n.center.x-n.radius>0||ke.intersectPlane(n,Ss.ORIGIN_ZX_PLANE)!==vi.INTERSECTING))return e;if(t.geometryType!==hr.NONE)switch(t.geometryType){case hr.POLYLINES:zD(e);break;case hr.TRIANGLES:fE(e);break;case hr.LINES:mE(e);break}else xD(t),t.primitiveType===bt.TRIANGLES?fE(e):t.primitiveType===bt.LINES&&mE(e);return e};var gn=Mn;function Fs(e,t,n){e=C(e,0),t=C(t,0),n=C(n,0),this.value=new Float32Array([e,t,n])}Object.defineProperties(Fs.prototype,{componentDatatype:{get:function(){return Re.FLOAT}},componentsPerAttribute:{get:function(){return 3}},normalize:{get:function(){return!1}}});Fs.fromCartesian3=function(e){return new Fs(e.x,e.y,e.z)};Fs.toValue=function(e,t){return m(t)||(t=new Float32Array([e.x,e.y,e.z])),t[0]=e.x,t[1]=e.y,t[2]=e.z,t};var EE=Fs;function qn(e){this._ellipsoid=C(e,Dn.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(qn.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});qn.mercatorAngleToGeodeticLatitude=function(e){return j.PI_OVER_TWO-2*Math.atan(Math.exp(-e))};qn.geodeticLatitudeToMercatorAngle=function(e){e>qn.MaximumLatitude?e=qn.MaximumLatitude:e<-qn.MaximumLatitude&&(e=-qn.MaximumLatitude);let t=Math.sin(e);return .5*Math.log((1+t)/(1-t))};qn.MaximumLatitude=qn.mercatorAngleToGeodeticLatitude(Math.PI);qn.prototype.project=function(e,t){let n=this._semimajorAxis,i=e.longitude*n,o=qn.geodeticLatitudeToMercatorAngle(e.latitude)*n,r=e.height;return m(t)?(t.x=i,t.y=o,t.z=r,t):new h(i,o,r)};qn.prototype.unproject=function(e,t){let n=this._oneOverSemimajorAxis,i=e.x*n,o=qn.mercatorAngleToGeodeticLatitude(e.y*n),r=e.z;return m(t)?(t.longitude=i,t.latitude=o,t.height=r,t):new rt(i,o,r)};var CE=qn;function BD(e,t,n){let i=!n,o=e.length,r;if(!i&&o>1){let a=e[0].modelMatrix;for(r=1;r<o;++r)if(!fe.equals(a,e[r].modelMatrix)){i=!0;break}}if(i)for(r=0;r<o;++r)m(e[r].geometry)&&gn.transformToWorldCoordinates(e[r]);else fe.multiplyTransformation(t,e[0].modelMatrix,t)}function uf(e,t){let n=e.attributes,i=n.position,o=i.values.length/i.componentsPerAttribute;n.batchId=new Dt({componentDatatype:Re.FLOAT,componentsPerAttribute:1,values:new Float32Array(o)});let r=n.batchId.values;for(let a=0;a<o;++a)r[a]=t}function FD(e){let t=e.length;for(let n=0;n<t;++n){let i=e[n];m(i.geometry)?uf(i.geometry,n):m(i.westHemisphereGeometry)&&m(i.eastHemisphereGeometry)&&(uf(i.westHemisphereGeometry,n),uf(i.eastHemisphereGeometry,n))}}function UD(e){let t=e.instances,n=e.projection,i=e.elementIndexUintSupported,o=e.scene3DOnly,r=e.vertexCacheOptimize,a=e.compressVertices,s=e.modelMatrix,u,l,d,f=t.length;for(u=0;u<f;++u)if(m(t[u].geometry)){d=t[u].geometry.primitiveType;break}if(BD(t,s,o),!o)for(u=0;u<f;++u)m(t[u].geometry)&&gn.splitLongitude(t[u]);if(FD(t),r)for(u=0;u<f;++u){let b=t[u];m(b.geometry)?(gn.reorderForPostVertexCache(b.geometry),gn.reorderForPreVertexCache(b.geometry)):m(b.westHemisphereGeometry)&&m(b.eastHemisphereGeometry)&&(gn.reorderForPostVertexCache(b.westHemisphereGeometry),gn.reorderForPreVertexCache(b.westHemisphereGeometry),gn.reorderForPostVertexCache(b.eastHemisphereGeometry),gn.reorderForPreVertexCache(b.eastHemisphereGeometry))}let g=gn.combineInstances(t);for(f=g.length,u=0;u<f;++u){l=g[u];let b=l.attributes;if(o)for(let x in b)b.hasOwnProperty(x)&&b[x].componentDatatype===Re.DOUBLE&&gn.encodeAttribute(l,x,`${x}3DHigh`,`${x}3DLow`);else for(let x in b)if(b.hasOwnProperty(x)&&b[x].componentDatatype===Re.DOUBLE){let T=`${x}3D`,R=`${x}2D`;gn.projectTo2D(l,x,T,R,n),m(l.boundingSphere)&&x==="position"&&(l.boundingSphereCV=ke.fromVertices(l.attributes.position2D.values)),gn.encodeAttribute(l,T,`${T}High`,`${T}Low`),gn.encodeAttribute(l,R,`${R}High`,`${R}Low`)}a&&gn.compressVertices(l)}if(!i){let b=[];for(f=g.length,u=0;u<f;++u)l=g[u],b=b.concat(gn.fitToUnsignedShortIndices(l));g=b}return g}function lf(e,t,n,i){let o,r,a,s=i.length-1;if(s>=0){let l=i[s];o=l.offset+l.count,a=l.index,r=n[a].indices.length}else o=0,a=0,r=n[a].indices.length;let u=e.length;for(let l=0;l<u;++l){let f=e[l][t];if(!m(f))continue;let g=f.indices.length;o+g>r&&(o=0,r=n[++a].indices.length),i.push({index:a,offset:o,count:g}),o+=g}}function kD(e,t){let n=[];return lf(e,"geometry",t,n),lf(e,"westHemisphereGeometry",t,n),lf(e,"eastHemisphereGeometry",t,n),n}var _o={};_o.combineGeometry=function(e){let t,n,i=e.instances,o=i.length,r,a,s=!1;o>0&&(t=UD(e),t.length>0&&(n=gn.createAttributeLocations(t[0]),e.createPickOffsets&&(r=kD(i,t))),m(i[0].attributes)&&m(i[0].attributes.offset)&&(a=new Array(o),s=!0));let u=new Array(o),l=new Array(o);for(let d=0;d<o;++d){let f=i[d],g=f.geometry;m(g)&&(u[d]=g.boundingSphere,l[d]=g.boundingSphereCV,s&&(a[d]=f.geometry.offsetAttribute));let b=f.eastHemisphereGeometry,x=f.westHemisphereGeometry;m(b)&&m(x)&&(m(b.boundingSphere)&&m(x.boundingSphere)&&(u[d]=ke.union(b.boundingSphere,x.boundingSphere)),m(b.boundingSphereCV)&&m(x.boundingSphereCV)&&(l[d]=ke.union(b.boundingSphereCV,x.boundingSphereCV)))}return{geometries:t,modelMatrix:e.modelMatrix,attributeLocations:n,pickOffsets:r,offsetInstanceExtend:a,boundingSpheres:u,boundingSpheresCV:l}};function VD(e,t){let n=e.attributes;for(let i in n)if(n.hasOwnProperty(i)){let o=n[i];m(o)&&m(o.values)&&t.push(o.values.buffer)}m(e.indices)&&t.push(e.indices.buffer)}function jD(e,t){let n=e.length;for(let i=0;i<n;++i)VD(e[i],t)}function GD(e){let t=1,n=e.length;for(let i=0;i<n;i++){let o=e[i];if(++t,!m(o))continue;let r=o.attributes;t+=7+2*ke.packedLength+(m(o.indices)?o.indices.length:0);for(let a in r)if(r.hasOwnProperty(a)&&m(r[a])){let s=r[a];t+=5+s.values.length}}return t}_o.packCreateGeometryResults=function(e,t){let n=new Float64Array(GD(e)),i=[],o={},r=e.length,a=0;n[a++]=r;for(let s=0;s<r;s++){let u=e[s],l=m(u);if(n[a++]=l?1:0,!l)continue;n[a++]=u.primitiveType,n[a++]=u.geometryType,n[a++]=C(u.offsetAttribute,-1);let d=m(u.boundingSphere)?1:0;n[a++]=d,d&&ke.pack(u.boundingSphere,n,a),a+=ke.packedLength;let f=m(u.boundingSphereCV)?1:0;n[a++]=f,f&&ke.pack(u.boundingSphereCV,n,a),a+=ke.packedLength;let g=u.attributes,b=[];for(let T in g)g.hasOwnProperty(T)&&m(g[T])&&(b.push(T),m(o[T])||(o[T]=i.length,i.push(T)));n[a++]=b.length;for(let T=0;T<b.length;T++){let R=b[T],D=g[R];n[a++]=o[R],n[a++]=D.componentDatatype,n[a++]=D.componentsPerAttribute,n[a++]=D.normalize?1:0,n[a++]=D.values.length,n.set(D.values,a),a+=D.values.length}let x=m(u.indices)?u.indices.length:0;n[a++]=x,x>0&&(n.set(u.indices,a),a+=x)}return t.push(n.buffer),{stringTable:i,packedData:n}};_o.unpackCreateGeometryResults=function(e){let t=e.stringTable,n=e.packedData,i,o=new Array(n[0]),r=0,a=1;for(;a<n.length;){if(!(n[a++]===1)){o[r++]=void 0;continue}let u=n[a++],l=n[a++],d=n[a++];d===-1&&(d=void 0);let f,g;n[a++]===1&&(f=ke.unpack(n,a)),a+=ke.packedLength,n[a++]===1&&(g=ke.unpack(n,a)),a+=ke.packedLength;let T,R,D,M=new Ea,N=n[a++];for(i=0;i<N;i++){let q=t[n[a++]],_=n[a++];D=n[a++];let ee=n[a++]!==0;T=n[a++],R=Re.createTypedArray(_,T);for(let Z=0;Z<T;Z++)R[Z]=n[a++];M[q]=new Dt({componentDatatype:_,componentsPerAttribute:D,normalize:ee,values:R})}let V;if(T=n[a++],T>0){let q=R.length/D;for(V=Gt.createTypedArray(q,T),i=0;i<T;i++)V[i]=n[a++]}o[r++]=new Ot({primitiveType:u,geometryType:l,boundingSphere:f,boundingSphereCV:g,indices:V,attributes:M,offsetAttribute:d})}return o};function HD(e,t){let n=e.length,i=new Float64Array(1+n*19),o=0;i[o++]=n;for(let r=0;r<n;r++){let a=e[r];if(fe.pack(a.modelMatrix,i,o),o+=fe.packedLength,m(a.attributes)&&m(a.attributes.offset)){let s=a.attributes.offset.value;i[o]=s[0],i[o+1]=s[1],i[o+2]=s[2]}o+=3}return t.push(i.buffer),i}function qD(e){let t=e,n=new Array(t[0]),i=0,o=1;for(;o<t.length;){let r=fe.unpack(t,o),a;o+=fe.packedLength,m(t[o])&&(a={offset:new EE(t[o],t[o+1],t[o+2])}),o+=3,n[i++]={modelMatrix:r,attributes:a}}return n}_o.packCombineGeometryParameters=function(e,t){let n=e.createGeometryResults,i=n.length;for(let o=0;o<i;o++)t.push(n[o].packedData.buffer);return{createGeometryResults:e.createGeometryResults,packedInstances:HD(e.instances,t),ellipsoid:e.ellipsoid,isGeographic:e.projection instanceof Bi,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e.createPickOffsets}};_o.unpackCombineGeometryParameters=function(e){let t=qD(e.packedInstances),n=e.createGeometryResults,i=n.length,o=0;for(let s=0;s<i;s++){let u=_o.unpackCreateGeometryResults(n[s]),l=u.length;for(let d=0;d<l;d++){let f=u[d],g=t[o];g.geometry=f,++o}}let r=Dn.clone(e.ellipsoid),a=e.isGeographic?new Bi(r):new CE(r);return{instances:t,ellipsoid:r,projection:a,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:fe.clone(e.modelMatrix),createPickOffsets:e.createPickOffsets}};function TE(e){let t=e.length,n=1+(ke.packedLength+1)*t,i=new Float32Array(n),o=0;i[o++]=t;for(let r=0;r<t;++r){let a=e[r];m(a)?(i[o++]=1,ke.pack(e[r],i,o)):i[o++]=0,o+=ke.packedLength}return i}function wE(e){let t=new Array(e[0]),n=0,i=1;for(;i<e.length;)e[i++]===1&&(t[n]=ke.unpack(e,i)),++n,i+=ke.packedLength;return t}_o.packCombineGeometryResults=function(e,t){m(e.geometries)&&jD(e.geometries,t);let n=TE(e.boundingSpheres),i=TE(e.boundingSpheresCV);return t.push(n.buffer,i.buffer),{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:n,boundingSpheresCV:i}};_o.unpackCombineGeometryResults=function(e){return{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:wE(e.boundingSpheres),boundingSpheresCV:wE(e.boundingSpheresCV)}};var Uu=_o;var WD={READY:0,CREATING:1,CREATED:2,COMBINING:3,COMBINED:4,COMPLETE:5,FAILED:6},qt=Object.freeze(WD);var ku={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3};ku.getMorphTime=function(e){return e===ku.SCENE3D?1:e===ku.MORPHING?void 0:0};var Us=Object.freeze(ku);var Jn={DISABLED:0,ENABLED:1,CAST_ONLY:2,RECEIVE_ONLY:3};Jn.NUMBER_OF_SHADOW_MODES=4;Jn.castShadows=function(e){return e===Jn.ENABLED||e===Jn.CAST_ONLY};Jn.receiveShadows=function(e){return e===Jn.ENABLED||e===Jn.RECEIVE_ONLY};Jn.fromCastReceive=function(e,t){return e&&t?Jn.ENABLED:e?Jn.CAST_ONLY:t?Jn.RECEIVE_ONLY:Jn.DISABLED};var Vu=Object.freeze(Jn);function Bt(e){e=C(e,C.EMPTY_OBJECT),this.geometryInstances=e.geometryInstances,this._evColor=Et.WHITE,this.batchTableEvColorUpdated=!1,this.owner=e.owner,this.appearance=e.appearance,this._appearance=void 0,this._material=void 0,this.depthFailAppearance=e.depthFailAppearance,this._depthFailAppearance=void 0,this._depthFailMaterial=void 0,this.modelMatrix=fe.clone(C(e.modelMatrix,fe.IDENTITY)),this._modelMatrix=new fe,this.show=C(e.show,!0),this._vertexCacheOptimize=C(e.vertexCacheOptimize,!1),this._interleave=C(e.interleave,!1),this._releaseGeometryInstances=C(e.releaseGeometryInstances,!0),this._allowPicking=C(e.allowPicking,!0),this._asynchronous=C(e.asynchronous,!0),this._compressVertices=C(e.compressVertices,!0),this._noAllowOffScreen=C(e.noAllowOffScreen,!1),this.cull=C(e.cull,!0),this.debugShowBoundingVolume=C(e.debugShowBoundingVolume,!1),this.rtcCenter=e.rtcCenter,this.shadows=C(e.shadows,Vu.DISABLED),this._translucent=void 0,this._state=qt.READY,this._geometries=[],this._error=void 0,this._numberOfInstances=0,this._boundingSpheres=[],this._boundingSphereWC=[],this._boundingSphereCV=[],this._boundingSphere2D=[],this._boundingSphereMorph=[],this._perInstanceAttributeCache=new Map,this._instanceIds=[],this._lastPerInstanceAttributeIndex=0,this._va=[],this._attributeLocations=void 0,this._primitiveType=void 0,this._frontFaceRS=void 0,this._backFaceRS=void 0,this._sp=void 0,this._depthFailAppearance=void 0,this._spDepthFail=void 0,this._frontFaceDepthFailRS=void 0,this._backFaceDepthFailRS=void 0,this._pickIds=[],this._colorCommands=[],this._pickCommands=[],this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._createRenderStatesFunction=e._createRenderStatesFunction,this._createShaderProgramFunction=e._createShaderProgramFunction,this._createCommandsFunction=e._createCommandsFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._createPickOffsets=e._createPickOffsets,this._pickOffsets=void 0,this._createGeometryResults=void 0,this._ready=!1;let t=this;this._readyPromise=new Promise((n,i)=>{t._completeLoad=(o,r,a)=>{this._error=a,this._state=r,o.afterRender.push(function(){if(t._ready=t._state===qt.COMPLETE||t._state===qt.FAILED,!m(a))return n(t),!0;i(a)})}}),this._batchTable=void 0,this._batchTableAttributeIndices=void 0,this._offsetInstanceExtend=void 0,this._batchTableOffsetAttribute2DIndex=void 0,this._batchTableOffsetsUpdated=!1,this._instanceBoundingSpheres=void 0,this._instanceBoundingSpheresCV=void 0,this._tempBoundingSpheres=void 0,this._recomputeBoundingSpheres=!1,this._batchTableBoundingSpheresUpdated=!1,this._batchTableBoundingSphereAttributeIndices=void 0}Object.defineProperties(Bt.prototype,{vertexCacheOptimize:{get:function(){return this._vertexCacheOptimize}},interleave:{get:function(){return this._interleave}},releaseGeometryInstances:{get:function(){return this._releaseGeometryInstances}},allowPicking:{get:function(){return this._allowPicking}},asynchronous:{get:function(){return this._asynchronous}},compressVertices:{get:function(){return this._compressVertices}},noAllowOffScreen:{get:function(){return this._noAllowOffScreen}},evColor:{get:function(){return this._evColor},set:function(e){e instanceof Et&&!Et.equals(e,this._evColor)&&(this._evColor=e,this.batchTableEvColorUpdated=!0)}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return i0("Primitive.readyPromise","Primitive.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Primitive.ready to return true instead."),this._readyPromise}},pickIds:{get:function(){return this._pickIds}}});function KD(e){let t=e.length,n=[],i=e[0].attributes,o;for(o in i)if(i.hasOwnProperty(o)&&m(i[o])){let r=i[o],a=!0;for(let s=1;s<t;++s){let u=e[s].attributes[o];if(!m(u)||r.componentDatatype!==u.componentDatatype||r.componentsPerAttribute!==u.componentsPerAttribute||r.normalize!==u.normalize){a=!1;break}}a&&n.push(o)}return n}var YD=new Ce,ZD=new h,NE=new De;function LE(e){let t=e.length;if(t===1)return e[0];if(t===2)return Ce.unpack(e,0,YD);if(t===3)return h.unpack(e,0,ZD);if(t===4)return De.unpack(e,0,NE)}function JD(e,t){let n=e.geometryInstances,i=Array.isArray(n)?n:[n],o=i.length;if(o===0)return;let r=KD(i),a=r.length,s=[],u={},l={},d,g=i[0].attributes,b,x,T;for(b=0;b<a;++b)x=r[b],T=g[x],u[x]=b,s.push({functionName:`czm_batchTable_${x}`,componentDatatype:T.componentDatatype,componentsPerAttribute:T.componentsPerAttribute,normalize:T.normalize});r.indexOf("distanceDisplayCondition")!==-1&&(s.push({functionName:"czm_batchTable_boundingSphereCenter3DHigh",componentDatatype:Re.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter3DLow",componentDatatype:Re.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DHigh",componentDatatype:Re.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DLow",componentDatatype:Re.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereRadius",componentDatatype:Re.FLOAT,componentsPerAttribute:1}),l.center3DHigh=s.length-5,l.center3DLow=s.length-4,l.center2DHigh=s.length-3,l.center2DLow=s.length-2,l.radius=s.length-1),r.indexOf("offset")!==-1&&(s.push({functionName:"czm_batchTable_offset2D",componentDatatype:Re.FLOAT,componentsPerAttribute:3}),d=s.length-1),s.push({functionName:"czm_batchTable_pickColor",componentDatatype:Re.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0});let R=s.length,D=new Fx(t,s,o);for(b=0;b<o;++b){let M=i[b];g=M.attributes;for(let ee=0;ee<a;++ee){x=r[ee],T=g[x];let Z=LE(T.value),J=u[x];D.setBatchedAttribute(b,J,Z)}let N={primitive:C(M.pickPrimitive,e)};m(M.id)&&(N.id=M.id);let V=t.createPickId(N);e._pickIds.push(V);let q=V.color,_=NE;_.x=Et.floatToByte(q.red),_.y=Et.floatToByte(q.green),_.z=Et.floatToByte(q.blue),_.w=Et.floatToByte(q.alpha),D.setBatchedAttribute(b,R-1,_)}e._batchTable=D,e._batchTableAttributeIndices=u,e._batchTableBoundingSphereAttributeIndices=l,e._batchTableOffsetAttribute2DIndex=d}function XD(e){let t;return Array.isArray(e.values)?t=e.values.slice(0):t=new e.values.constructor(e.values),new Dt({componentDatatype:e.componentDatatype,componentsPerAttribute:e.componentsPerAttribute,normalize:e.normalize,values:t})}function $D(e){let t=e.attributes,n=new Ea;for(let o in t)t.hasOwnProperty(o)&&m(t[o])&&(n[o]=XD(t[o]));let i;if(m(e.indices)){let o=e.indices;Array.isArray(o)?i=o.slice(0):i=new o.constructor(o)}return new Ot({attributes:n,indices:i,primitiveType:e.primitiveType,boundingSphere:ke.clone(e.boundingSphere)})}function QD(e,t){return{geometry:t,attributes:e.attributes,modelMatrix:fe.clone(e.modelMatrix),pickPrimitive:e.pickPrimitive,id:e.id}}var e2=/in\s+vec(?:3|4)\s+(.*)3DHigh;/g;Bt._modifyShaderPosition=function(e,t,n){let i,o="",r="",a="";for(;(i=e2.exec(t))!==null;){let s=i[1],u=`vec4 czm_compute${s[0].toUpperCase()}${s.substr(1)}()`;u!=="vec4 czm_computePosition()"&&(o+=`${u};
`),m(e.rtcCenter)?(t=t.replace(/in\s+vec(?:3|4)\s+position3DHigh;/g,""),t=t.replace(/in\s+vec(?:3|4)\s+position3DLow;/g,""),o+=`uniform mat4 u_modifiedModelView;
`,r+=`in vec4 position;
`,a+=`${u}
{
    return u_modifiedModelView * position;
}

`,t=t.replace(/czm_modelViewRelativeToEye\s+\*\s+/g,""),t=t.replace(/czm_modelViewProjectionRelativeToEye/g,"czm_projection")):n?a+=`${u}
{
    return czm_translateRelativeToEye(${s}3DHigh, ${s}3DLow);
}

`:(r+=`in vec3 ${s}2DHigh;
in vec3 ${s}2DLow;
`,a+=`${u}
{
    vec4 p;
    if (czm_morphTime == 1.0)
    {
        p = czm_translateRelativeToEye(${s}3DHigh, ${s}3DLow);
    }
    else if (czm_morphTime == 0.0)
    {
        p = czm_translateRelativeToEye(${s}2DHigh.zxy, ${s}2DLow.zxy);
    }
    else
    {
        p = czm_columbusViewMorph(
                czm_translateRelativeToEye(${s}2DHigh.zxy, ${s}2DLow.zxy),
                czm_translateRelativeToEye(${s}3DHigh, ${s}3DLow),
                czm_morphTime);
    }
    return p;
}

`)}return[o,r,t,a].join(`
`)};Bt._appendShowToShader=function(e,t){return m(e._batchTableAttributeIndices.show)?`${Cr.replaceMain(t,"czm_non_show_main")}
void main() 
{ 
    czm_non_show_main(); 
    gl_Position *= czm_batchTable_show(batchId); 
}`:t};Bt._updateColorAttribute=function(e,t,n){if(!m(e._batchTableAttributeIndices.color)&&!m(e._batchTableAttributeIndices.depthFailColor)||t.search(/in\s+vec4\s+color;/g)===-1)return t;let i=t;return i=i.replace(/in\s+vec4\s+color;/g,""),n?i=i.replace(/(\b)color(\b)/g,"$1czm_batchTable_depthFailColor(batchId)$2"):i=i.replace(/(\b)color(\b)/g,"$1czm_batchTable_color(batchId)$2"),i};function t2(e,t){return m(e._batchTableAttributeIndices.evColor)&&(t=t.replace("ev_pickColor = vec4(1.0);","ev_pickColor= czm_batchTable_evColor(batchId);")),t}function SE(e){return`${Cr.replaceMain(e,"czm_non_pick_main")}
out vec4 v_pickColor; 
out vec4 ev_pickColor; 
void main() 
{ 
    czm_non_pick_main(); 
    v_pickColor = czm_batchTable_pickColor(batchId); 
    ev_pickColor = vec4(1.0); 
}`}function AE(e){return`in vec4 v_pickColor;
${e}`}Bt._updatePickColorAttribute=function(e){let t=e.replace(/in\s+vec4\s+pickColor;/g,"");return t=t.replace(/(\b)pickColor(\b)/g,"$1czm_batchTable_pickColor(batchId)$2"),t};Bt._appendOffsetToShader=function(e,t){if(!m(e._batchTableAttributeIndices.offset))return t;let n=`in float batchId;
`;n+="in float applyOffset;";let i=t.replace(/in\s+float\s+batchId;/g,n),o=`vec4 $1 = czm_computePosition();
`;return o+=`    if (czm_sceneMode == czm_sceneMode3D)
`,o+=`    {
`,o+="        $1 = $1 + vec4(czm_batchTable_offset(batchId) * applyOffset, 0.0);",o+=`    }
`,o+=`    else
`,o+=`    {
`,o+="        $1 = $1 + vec4(czm_batchTable_offset2D(batchId) * applyOffset, 0.0);",o+=`    }
`,i=i.replace(/vec4\s+([A-Za-z0-9_]+)\s+=\s+czm_computePosition\(\);/g,o),i};Bt._appendDistanceDisplayConditionToShader=function(e,t,n){if(!m(e._batchTableAttributeIndices.distanceDisplayCondition))return t;let i=Cr.replaceMain(t,"czm_non_distanceDisplayCondition_main"),o=`void main() 
{ 
    czm_non_distanceDisplayCondition_main(); 
    vec2 distanceDisplayCondition = czm_batchTable_distanceDisplayCondition(batchId);
    vec3 boundingSphereCenter3DHigh = czm_batchTable_boundingSphereCenter3DHigh(batchId);
    vec3 boundingSphereCenter3DLow = czm_batchTable_boundingSphereCenter3DLow(batchId);
    float boundingSphereRadius = czm_batchTable_boundingSphereRadius(batchId);
`;return n?o+=`    vec4 centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);
`:o+=`    vec3 boundingSphereCenter2DHigh = czm_batchTable_boundingSphereCenter2DHigh(batchId);
    vec3 boundingSphereCenter2DLow = czm_batchTable_boundingSphereCenter2DLow(batchId);
    vec4 centerRTE;
    if (czm_morphTime == 1.0)
    {
        centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);
    }
    else if (czm_morphTime == 0.0)
    {
        centerRTE = czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy);
    }
    else
    {
        centerRTE = czm_columbusViewMorph(
                czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy),
                czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow),
                czm_morphTime);
    }
`,o+=`    float radiusSq = boundingSphereRadius * boundingSphereRadius; 
    float distanceSq; 
    if (czm_sceneMode == czm_sceneMode2D) 
    { 
        distanceSq = czm_eyeHeight2D.y - radiusSq; 
    } 
    else 
    { 
        distanceSq = dot(centerRTE.xyz, centerRTE.xyz) - radiusSq; 
    } 
    distanceSq = max(distanceSq, 0.0); 
    float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x; 
    float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y; 
    float show = (distanceSq >= nearSq && distanceSq <= farSq) ? 1.0 : 0.0; 
    gl_Position *= show; 
}`,`${i}
${o}`};function RE(e,t){if(!e.compressVertices)return t;let n=t.search(/in\s+vec3\s+normal;/g)!==-1,i=t.search(/in\s+vec2\s+st;/g)!==-1;if(!n&&!i)return t;let o=t.search(/in\s+vec3\s+tangent;/g)!==-1,r=t.search(/in\s+vec3\s+bitangent;/g)!==-1,a=i&&n?2:1;a+=o||r?1:0;let s=a>1?`vec${a}`:"float",u="compressedAttributes",l=`in ${s} ${u};`,d="",f="";if(i){d+=`vec2 st;
`;let x=a>1?`${u}.x`:u;f+=`    st = czm_decompressTextureCoordinates(${x});
`}n&&o&&r?(d+=`vec3 normal;
vec3 tangent;
vec3 bitangent;
`,f+=`    czm_octDecode(${u}.${i?"yz":"xy"}, normal, tangent, bitangent);
`):(n&&(d+=`vec3 normal;
`,f+=`    normal = czm_octDecode(${u}${a>1?`.${i?"y":"x"}`:""});
`),o&&(d+=`vec3 tangent;
`,f+=`    tangent = czm_octDecode(${u}.${i&&n?"z":"y"});
`),r&&(d+=`vec3 bitangent;
`,f+=`    bitangent = czm_octDecode(${u}.${i&&n?"z":"y"});
`));let g=t;g=g.replace(/in\s+vec3\s+normal;/g,""),g=g.replace(/in\s+vec2\s+st;/g,""),g=g.replace(/in\s+vec3\s+tangent;/g,""),g=g.replace(/in\s+vec3\s+bitangent;/g,""),g=Cr.replaceMain(g,"czm_non_compressed_main");let b=`void main() 
{ 
${f}    czm_non_compressed_main(); 
}`;return[l,d,g,b].join(`
`)}function n2(e){let t=Cr.replaceMain(e,"czm_non_depth_clamp_main");return t+=`void main() {
    czm_non_depth_clamp_main();
    gl_Position = czm_depthClamp(gl_Position);}
`,t}function i2(e){let t=Cr.replaceMain(e,"czm_non_depth_clamp_main");return t+=`void main() {
    czm_non_depth_clamp_main();
#if defined(GL_EXT_frag_depth)
    #if defined(LOG_DEPTH)
        czm_writeLogDepth();
    #else
        czm_writeDepthClamp();
    #endif
#endif
}
`,t=`#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
#endif
${t}`,t}function OE(e,t){let n=e.vertexAttributes}function o2(e,t){return function(){return e[t]}}var pf=Math.max(yi.hardwareConcurrency-1,1),ju,r2=new Bd("combineGeometry");function a2(e,t){let n,i,o,r,a=e._instanceIds;if(e._state===qt.READY){n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];let s=e._numberOfInstances=n.length,u=[],l=[];for(o=0;o<s;++o)i=n[o].geometry,a.push(n[o].id),l.push({moduleName:i._workerName,geometry:i});if(!m(ju))for(ju=new Array(pf),o=0;o<pf;o++)ju[o]=new Bd("createGeometry");let d;for(l=ay(l,pf),o=0;o<l.length;o++){let f=0,g=l[o],b=g.length;for(r=0;r<b;++r)d=g[r],i=d.geometry,m(i.constructor.pack)&&(d.offset=f,f+=C(i.constructor.packedLength,i.packedLength));let x;if(f>0){let T=new Float64Array(f);for(x=[T.buffer],r=0;r<b;++r)d=g[r],i=d.geometry,m(i.constructor.pack)&&(i.constructor.pack(i,T,d.offset),d.geometry=T)}u.push(ju[o].scheduleTask({subTasks:l[o]},x))}e._state=qt.CREATING,Promise.all(u).then(function(f){e._createGeometryResults=f,e._state=qt.CREATED}).catch(function(f){Vs(e,t,qt.FAILED,f)})}else if(e._state===qt.CREATED){let s=[];n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];let u=t.scene3DOnly,l=t.mapProjection,d=r2.scheduleTask(Uu.packCombineGeometryParameters({createGeometryResults:e._createGeometryResults,instances:n,ellipsoid:l.ellipsoid,projection:l,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:u,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets},s),s);e._createGeometryResults=void 0,e._state=qt.COMBINING,Promise.resolve(d).then(function(f){let g=Uu.unpackCombineGeometryResults(f);e._geometries=g.geometries,e._attributeLocations=g.attributeLocations,e.modelMatrix=fe.clone(g.modelMatrix,e.modelMatrix),e._pickOffsets=g.pickOffsets,e._offsetInstanceExtend=g.offsetInstanceExtend,e._instanceBoundingSpheres=g.boundingSpheres,e._instanceBoundingSpheresCV=g.boundingSpheresCV,m(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=qt.COMBINED):Vs(e,t,qt.FAILED,void 0)}).catch(function(f){Vs(e,t,qt.FAILED,f)})}}function s2(e,t){let n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances],i=e._numberOfInstances=n.length,o=new Array(i),r=e._instanceIds,a,s,u=0;for(s=0;s<i;s++){a=n[s];let g=a.geometry,b;m(g.attributes)&&m(g.primitiveType)?b=$D(g):b=g.constructor.createGeometry(g),o[u++]=QD(a,b),r.push(a.id)}o.length=u;let l=t.scene3DOnly,d=t.mapProjection,f=Uu.combineGeometry({instances:o,ellipsoid:d.ellipsoid,projection:d,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:l,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets});e._geometries=f.geometries,e._attributeLocations=f.attributeLocations,e.modelMatrix=fe.clone(f.modelMatrix,e.modelMatrix),e._pickOffsets=f.pickOffsets,e._offsetInstanceExtend=f.offsetInstanceExtend,e._instanceBoundingSpheres=f.boundingSpheres,e._instanceBoundingSpheresCV=f.boundingSpheresCV,m(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=qt.COMBINED):Vs(e,t,qt.FAILED,void 0)}function c2(e,t){let n=e._batchTableAttributeIndices.offset;if(!e._recomputeBoundingSpheres||!m(n)){e._recomputeBoundingSpheres=!1;return}let i,o=e._offsetInstanceExtend,r=e._instanceBoundingSpheres,a=r.length,s=e._tempBoundingSpheres;if(!m(s)){for(s=new Array(a),i=0;i<a;i++)s[i]=new ke;e._tempBoundingSpheres=s}for(i=0;i<a;++i){let T=s[i],R=e._batchTable.getBatchedAttribute(i,n,new h);T=r[i].clone(T),UE(T,R,o[i])}let u=[],l=[],d=[];for(i=0;i<a;++i){let T=s[i];T.center.x-T.radius>0||ke.intersectPlane(T,Ss.ORIGIN_ZX_PLANE)!==vi.INTERSECTING?u.push(T):(l.push(T),d.push(T))}let f=u[0],g=d[0],b=l[0];for(i=1;i<u.length;i++)f=ke.union(f,u[i]);for(i=1;i<d.length;i++)g=ke.union(g,d[i]);for(i=1;i<l.length;i++)b=ke.union(b,l[i]);let x=[];for(m(f)&&x.push(f),m(g)&&x.push(g),m(b)&&x.push(b),i=0;i<x.length;i++){let T=x[i].clone(e._boundingSpheres[i]);e._boundingSpheres[i]=T,e._boundingSphereCV[i]=ke.projectTo2D(T,t.mapProjection,e._boundingSphereCV[i])}Bt._updateBoundingVolumes(e,t,e.modelMatrix,!0),e._recomputeBoundingSpheres=!1}var IE=new da,zE=new rt,BE=new h,FE=new ke;function u2(e,t){if(!m(e._batchTableAttributeIndices.distanceDisplayCondition)||e._batchTableBoundingSpheresUpdated)return;let i=e._batchTableBoundingSphereAttributeIndices,o=i.center3DHigh,r=i.center3DLow,a=i.center2DHigh,s=i.center2DLow,u=i.radius,l=t.mapProjection,d=l.ellipsoid,f=e._batchTable,g=e._instanceBoundingSpheres,b=g.length;for(let x=0;x<b;++x){let T=g[x];if(!m(T))continue;let R=e.modelMatrix;m(R)&&(T=ke.transform(T,R,FE));let D=T.center,M=T.radius,N=da.fromCartesian(D,IE);if(f.setBatchedAttribute(x,o,N.high),f.setBatchedAttribute(x,r,N.low),!t.scene3DOnly){let V=d.cartesianToCartographic(D,zE),q=l.project(V,BE);N=da.fromCartesian(q,IE),f.setBatchedAttribute(x,a,N.high),f.setBatchedAttribute(x,s,N.low)}f.setBatchedAttribute(x,u,M)}e._batchTableBoundingSpheresUpdated=!0}var df=new h,l2=new h;function PE(e,t){if(!m(e._batchTableAttributeIndices.offset)||e._batchTableOffsetsUpdated||t.scene3DOnly)return;let i=e._batchTableOffsetAttribute2DIndex,o=t.mapProjection,r=o.ellipsoid,a=e._batchTable,s=e._instanceBoundingSpheres,u=s.length;for(let l=0;l<u;++l){let d=s[l];if(!m(d))continue;let f=a.getBatchedAttribute(l,e._batchTableAttributeIndices.offset);if(h.equals(f,h.ZERO)){a.setBatchedAttribute(l,i,h.ZERO);continue}let g=e.modelMatrix;m(g)&&(d=ke.transform(d,g,FE));let b=d.center;b=r.scaleToGeodeticSurface(b,l2);let x=r.cartesianToCartographic(b,zE),T=o.project(x,BE),R=h.add(f,b,df);x=r.cartesianToCartographic(R,x);let D=o.project(x,df),M=h.subtract(D,T,df),N=M.x;M.x=M.z,M.z=M.y,M.y=N,a.setBatchedAttribute(l,i,M)}e._batchTableOffsetsUpdated=!0}function p2(e,t){if(!m(e._batchTableAttributeIndices.evColor)||!e.batchTableEvColorUpdated||t.scene3DOnly)return;let i=e._batchTableAttributeIndices.evColor,o=e.evColor,r=new De(255*o.red,255*o.green,255*o.blue,255*o.alpha),a=e._batchTable,s=a.numberOfInstances;for(let u=0;u<s;u++)a.setBatchedAttribute(u,i,r);e.batchTableEvColorUpdated=!1}function d2(e,t){let n=e._attributeLocations,i=e._geometries,o=t.scene3DOnly,r=t.context,a=[],s=i.length;for(let u=0;u<s;++u){let l=i[u];if(a.push(Mx.fromGeometry({context:r,geometry:l,attributeLocations:n,bufferUsage:vu.STATIC_DRAW,interleave:e._interleave})),m(e._createBoundingVolumeFunction))e._createBoundingVolumeFunction(t,l);else if(e._boundingSpheres.push(ke.clone(l.boundingSphere)),e._boundingSphereWC.push(new ke),!o){let d=l.boundingSphereCV.center,f=d.x,g=d.y,b=d.z;d.x=b,d.y=f,d.z=g,e._boundingSphereCV.push(ke.clone(l.boundingSphereCV)),e._boundingSphere2D.push(new ke),e._boundingSphereMorph.push(new ke)}}e._va=a,e._primitiveType=i[0].primitiveType,e.releaseGeometryInstances&&(e.geometryInstances=void 0);for(let u=0;u<e._geometries.length;u++)for(let l in e._geometries[u].attributes)e._geometries[u].attributes[l].values=void 0,e._geometries[u].attributes[l]=void 0;e._geometries=void 0,Vs(e,t,qt.COMPLETE,void 0)}function f2(e,t,n,i){let o=n.getRenderState(),r;i?(r=ri(o,!1),r.cull={enabled:!0,face:mr.BACK},e._frontFaceRS=Er.fromCache(r),r.cull.face=mr.FRONT,e._backFaceRS=Er.fromCache(r)):(e._frontFaceRS=Er.fromCache(o),e._backFaceRS=e._frontFaceRS),r=ri(o,!1),m(e._depthFailAppearance)&&(r.depthTest.enabled=!1),m(e._depthFailAppearance)&&(o=e._depthFailAppearance.getRenderState(),r=ri(o,!1),r.depthTest.func=Ux.GREATER,i?(r.cull={enabled:!0,face:mr.BACK},e._frontFaceDepthFailRS=Er.fromCache(r),r.cull.face=mr.FRONT,e._backFaceDepthFailRS=Er.fromCache(r)):(e._frontFaceDepthFailRS=Er.fromCache(r),e._backFaceDepthFailRS=e._frontFaceRS))}function m2(e,t,n){let i=t.context,o=e._attributeLocations,r=e._batchTable.getVertexShaderCallback()(n.vertexShaderSource);r=Bt._appendOffsetToShader(e,r),r=Bt._appendShowToShader(e,r),r=Bt._appendDistanceDisplayConditionToShader(e,r,t.scene3DOnly),r=SE(r),r=Bt._updateColorAttribute(e,r,!1),r=t2(e,r),r=RE(e,r),r=Bt._modifyShaderPosition(e,r,t.scene3DOnly);let a=n.getFragmentShaderSource();a=AE(a),e._sp=Vd.replaceCache({context:i,shaderProgram:e._sp,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:o}),OE(e._sp,o),m(e._depthFailAppearance)&&(r=e._batchTable.getVertexShaderCallback()(e._depthFailAppearance.vertexShaderSource),r=Bt._appendShowToShader(e,r),r=Bt._appendDistanceDisplayConditionToShader(e,r,t.scene3DOnly),r=SE(r),r=Bt._updateColorAttribute(e,r,!0),r=RE(e,r),r=Bt._modifyShaderPosition(e,r,t.scene3DOnly),r=n2(r),a=e._depthFailAppearance.getFragmentShaderSource(),a=AE(a),a=i2(a),e._spDepthFail=Vd.replaceCache({context:i,shaderProgram:e._spDepthFail,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:o}),OE(e._spDepthFail,o))}var ks=new fe,DE=new h;function ME(e,t,n,i){let o=m(n)?n._uniforms:void 0,r={},a=t.uniforms;if(m(a))for(let u in a)a.hasOwnProperty(u)&&(r[u]=o2(a,u));let s=Vn(r,o);return s=e._batchTable.getUniformMapCallback()(s),m(e.rtcCenter)&&(s.u_modifiedModelView=function(){let u=i.context.uniformState.view;return fe.multiply(u,e._modelMatrix,ks),fe.multiplyByPoint(ks,e.rtcCenter,DE),fe.setTranslation(ks,DE,ks),ks}),s}function h2(e,t,n,i,o,r,a,s){let u=ME(e,t,n,s),l;m(e._depthFailAppearance)&&(l=ME(e,e._depthFailAppearance,e._depthFailAppearance.material,s));let d=i?Fd.TRANSLUCENT:Fd.OPAQUE,f=o?2:1;f*=m(e._depthFailAppearance)?2:1,r.length=e._va.length*f;let g=r.length,b=0;for(let x=0;x<g;++x){let T;o&&(T=r[x],m(T)||(T=r[x]=new Rs({owner:e,primitiveType:e._primitiveType})),T.vertexArray=e._va[b],T.renderState=e._backFaceRS,T.shaderProgram=e._sp,T.uniformMap=u,T.pass=d,++x),T=r[x],m(T)||(T=r[x]=new Rs({owner:e,primitiveType:e._primitiveType})),T.vertexArray=e._va[b],T.renderState=e._frontFaceRS,T.shaderProgram=e._sp,T.uniformMap=u,T.pass=d,m(e._depthFailAppearance)&&(o&&(++x,T=r[x],m(T)||(T=r[x]=new Rs({owner:e,primitiveType:e._primitiveType})),T.vertexArray=e._va[b],T.renderState=e._backFaceDepthFailRS,T.shaderProgram=e._spDepthFail,T.uniformMap=l,T.pass=d),++x,T=r[x],m(T)||(T=r[x]=new Rs({owner:e,primitiveType:e._primitiveType})),T.vertexArray=e._va[b],T.renderState=e._frontFaceDepthFailRS,T.shaderProgram=e._spDepthFail,T.uniformMap=l,T.pass=d),++b}}Bt._updateBoundingVolumes=function(e,t,n,i){let o,r,a;if(i||!fe.equals(n,e._modelMatrix))for(fe.clone(n,e._modelMatrix),r=e._boundingSpheres.length,o=0;o<r;++o)a=e._boundingSpheres[o],m(a)&&(e._boundingSphereWC[o]=ke.transform(a,n,e._boundingSphereWC[o]),t.scene3DOnly||(e._boundingSphere2D[o]=ke.clone(e._boundingSphereCV[o],e._boundingSphere2D[o]),e._boundingSphere2D[o].center.x=0,e._boundingSphereMorph[o]=ke.union(e._boundingSphereWC[o],e._boundingSphereCV[o])));let s=e.appearance.pixelSize;if(m(s))for(r=e._boundingSpheres.length,o=0;o<r;++o){a=e._boundingSpheres[o];let u=e._boundingSphereWC[o],d=t.camera.getPixelSize(a,t.context.drawingBufferWidth,t.context.drawingBufferHeight)*s;u.radius=a.radius+d}};function g2(e,t,n,i,o,r,a,s){Bt._updateBoundingVolumes(e,t,o);let u;t.mode===Us.SCENE3D?u=e._boundingSphereWC:t.mode===Us.COLUMBUS_VIEW?u=e._boundingSphereCV:t.mode===Us.SCENE2D&&m(e._boundingSphere2D)?u=e._boundingSphere2D:m(e._boundingSphereMorph)&&(u=e._boundingSphereMorph);let l=t.commandList,d=t.passes;if(d.render||d.pick){let f=e.allowPicking,g=Vu.castShadows(e.shadows),b=Vu.receiveShadows(e.shadows),x=n.length,T=s?2:1;T*=m(e._depthFailAppearance)?2:1;for(let R=0;R<x;++R){let D=Math.floor(R/T),M=n[R];M.modelMatrix=o,M.boundingVolume=u[D],M.cull=r,M.debugShowBoundingVolume=a,M.castShadows=g,M.receiveShadows=b,f?M.pickId="v_pickColor":M.pickId=void 0,M.noAllowOffScreen=e.noAllowOffScreen,l.push(M)}}}Bt.prototype.update=function(e){if(!m(this.geometryInstances)&&this._va.length===0||m(this.geometryInstances)&&Array.isArray(this.geometryInstances)&&this.geometryInstances.length===0||!m(this.appearance)||e.mode!==Us.SCENE3D&&e.scene3DOnly||!e.passes.render&&!e.passes.pick)return;if(m(this._error))throw this._error;if(this._state===qt.FAILED)return;let t=e.context;if(m(this._batchTable)||JD(this,t),this._batchTable.attributes.length>0){if(yt.maximumVertexTextureImageUnits===0)throw new It("Vertex texture fetch support is required to render primitives with per-instance attributes. The maximum number of vertex texture image units must be greater than zero.");this._batchTable.update(e)}if(this._state!==qt.COMPLETE&&this._state!==qt.COMBINED&&(this.asynchronous?a2(this,e):s2(this,e)),this._state===qt.COMBINED&&(u2(this,e),PE(this,e),d2(this,e)),!this.show||this._state!==qt.COMPLETE)return;this._batchTableOffsetsUpdated||PE(this,e),this.batchTableEvColorUpdated&&p2(this,e),this._recomputeBoundingSpheres&&c2(this,e);let n=this.appearance,i=n.material,o=!1,r=!1;this._appearance!==n?(this._appearance=n,this._material=i,o=!0,r=!0):this._material!==i&&(this._material=i,r=!0);let a=this.depthFailAppearance,s=m(a)?a.material:void 0;this._depthFailAppearance!==a?(this._depthFailAppearance=a,this._depthFailMaterial=s,o=!0,r=!0):this._depthFailMaterial!==s&&(this._depthFailMaterial=s,r=!0);let u=this._appearance.isTranslucent();this._translucent!==u&&(this._translucent=u,o=!0),m(this._material)&&this._material.update(t);let l=n.closed&&u;o&&C(this._createRenderStatesFunction,f2)(this,t,n,l),r&&C(this._createShaderProgramFunction,m2)(this,e,n),(o||r)&&C(this._createCommandsFunction,h2)(this,n,i,u,l,this._colorCommands,this._pickCommands,e),C(this._updateAndQueueCommandsFunction,g2)(this,e,this._colorCommands,this._pickCommands,this.modelMatrix,this.cull,this.debugShowBoundingVolume,l)};var _2=new ke,y2=new ke;function UE(e,t,n){if(n===ws.TOP){let i=ke.clone(e,_2),o=ke.clone(e,y2);o.center=h.add(o.center,t,o.center),e=ke.union(i,o,e)}else n===ws.ALL&&(e.center=h.add(e.center,t,e.center));return e}function v2(e,t,n){return function(){let i=e.getBatchedAttribute(t,n),o=e.attributes[n],r=o.componentsPerAttribute,a=Re.createTypedArray(o.componentDatatype,r);return m(i.constructor.pack)?i.constructor.pack(i,a,0):a[0]=i,a}}function b2(e,t,n,i,o){return function(r){let a=LE(r);e.setBatchedAttribute(t,n,a),o==="offset"&&(i._recomputeBoundingSpheres=!0,i._batchTableOffsetsUpdated=!1)}}var x2=new h;function E2(e,t,n){t.boundingSphere={get:function(){let i=e._instanceBoundingSpheres[n];if(m(i)){i=i.clone();let o=e.modelMatrix,r=t.offset;m(r)&&UE(i,h.fromArray(r.get(),0,x2),e._offsetInstanceExtend[n]),m(o)&&(i=ke.transform(i,o))}return i}},t.boundingSphereCV={get:function(){return e._instanceBoundingSpheresCV[n]}}}function C2(e,t,n){t.pickId={get:function(){return e._pickIds[n]}}}Bt.prototype.getGeometryInstanceAttributes=function(e){let t=this._perInstanceAttributeCache.get(e);if(m(t))return t;let n=-1,i=this._lastPerInstanceAttributeIndex,o=this._instanceIds,r=o.length;for(let l=0;l<r;++l){let d=(i+l)%r;if(e===o[d]){n=d;break}}if(n===-1)return;let a=this._batchTable,s=this._batchTableAttributeIndices;t={};let u={};for(let l in s)if(s.hasOwnProperty(l)){let d=s[l];u[l]={get:v2(a,n,d),set:b2(a,n,d,this,l)}}return E2(this,u,n),C2(this,u,n),Object.defineProperties(t,u),this._lastPerInstanceAttributeIndex=n,this._perInstanceAttributeCache.set(e,t),t};Bt.prototype.isDestroyed=function(){return!1};Bt.prototype.destroy=function(){let e,t;this._sp=this._sp&&this._sp.destroy(),this._spDepthFail=this._spDepthFail&&this._spDepthFail.destroy();let n=this._va;for(e=n.length,t=0;t<e;++t)n[t].destroy();this._va=void 0;let i=this._pickIds;for(e=i.length,t=0;t<e;++t)i[t].destroy();return this._pickIds=void 0,this._batchTable=this._batchTable&&this._batchTable.destroy(),this._instanceIds=void 0,this._perInstanceAttributeCache=void 0,this._attributeLocations=void 0,jn(this)};function Vs(e,t,n,i){e._completeLoad(t,n,i)}var kE=Bt;var VE={};VE.computePositions=function(e,t,n,i,o){let r=e*.5,a=-r,s=i+i,u=o?2*s:s,l=new Float64Array(u*3),d,f=0,g=0,b=o?s*3:0,x=o?(s+i)*3:i*3;for(d=0;d<i;d++){let T=d/i*j.TWO_PI,R=Math.cos(T),D=Math.sin(T),M=R*n,N=D*n,V=R*t,q=D*t;l[g+b]=M,l[g+b+1]=N,l[g+b+2]=a,l[g+x]=V,l[g+x+1]=q,l[g+x+2]=r,g+=3,o&&(l[f++]=M,l[f++]=N,l[f++]=a,l[f++]=V,l[f++]=q,l[f++]=r)}return l};var jE=VE;var ff=new Ce,T2=new h,w2=new h,S2=new h,A2=new h;function yo(e){e=C(e,C.EMPTY_OBJECT);let t=e.length,n=e.topRadius,i=e.bottomRadius,o=C(e.vertexFormat,Tn.DEFAULT),r=C(e.slices,128);this._length=t,this._topRadius=n,this._bottomRadius=i,this._vertexFormat=Tn.clone(o),this._slices=r,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderGeometry"}yo.packedLength=Tn.packedLength+5;yo.pack=function(e,t,n){return n=C(n,0),Tn.pack(e._vertexFormat,t,n),n+=Tn.packedLength,t[n++]=e._length,t[n++]=e._topRadius,t[n++]=e._bottomRadius,t[n++]=e._slices,t[n]=C(e._offsetAttribute,-1),t};var GE=new Tn,Ia={vertexFormat:GE,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};yo.unpack=function(e,t,n){t=C(t,0);let i=Tn.unpack(e,t,GE);t+=Tn.packedLength;let o=e[t++],r=e[t++],a=e[t++],s=e[t++],u=e[t];return m(n)?(n._vertexFormat=Tn.clone(i,n._vertexFormat),n._length=o,n._topRadius=r,n._bottomRadius=a,n._slices=s,n._offsetAttribute=u===-1?void 0:u,n):(Ia.length=o,Ia.topRadius=r,Ia.bottomRadius=a,Ia.slices=s,Ia.offsetAttribute=u===-1?void 0:u,new yo(Ia))};yo.createGeometry=function(e){let t=e._length,n=e._topRadius,i=e._bottomRadius,o=e._vertexFormat,r=e._slices;if(t<=0||n<0||i<0||n===0&&i===0)return;let a=r+r,s=r+a,u=a+a,l=jE.computePositions(t,n,i,r,!0),d=o.st?new Float32Array(u*2):void 0,f=o.normal?new Float32Array(u*3):void 0,g=o.tangent?new Float32Array(u*3):void 0,b=o.bitangent?new Float32Array(u*3):void 0,x,T=o.normal||o.tangent||o.bitangent;if(T){let ee=o.tangent||o.bitangent,Z=0,J=0,H=0,te=Math.atan2(i-n,t),y=T2;y.z=Math.sin(te);let w=Math.cos(te),P=S2,B=w2;for(x=0;x<r;x++){let Y=x/r*j.TWO_PI,K=w*Math.cos(Y),U=w*Math.sin(Y);T&&(y.x=K,y.y=U,ee&&(P=h.normalize(h.cross(h.UNIT_Z,y,P),P)),o.normal&&(f[Z++]=y.x,f[Z++]=y.y,f[Z++]=y.z,f[Z++]=y.x,f[Z++]=y.y,f[Z++]=y.z),o.tangent&&(g[J++]=P.x,g[J++]=P.y,g[J++]=P.z,g[J++]=P.x,g[J++]=P.y,g[J++]=P.z),o.bitangent&&(B=h.normalize(h.cross(y,P,B),B),b[H++]=B.x,b[H++]=B.y,b[H++]=B.z,b[H++]=B.x,b[H++]=B.y,b[H++]=B.z))}for(x=0;x<r;x++)o.normal&&(f[Z++]=0,f[Z++]=0,f[Z++]=-1),o.tangent&&(g[J++]=1,g[J++]=0,g[J++]=0),o.bitangent&&(b[H++]=0,b[H++]=-1,b[H++]=0);for(x=0;x<r;x++)o.normal&&(f[Z++]=0,f[Z++]=0,f[Z++]=1),o.tangent&&(g[J++]=1,g[J++]=0,g[J++]=0),o.bitangent&&(b[H++]=0,b[H++]=1,b[H++]=0)}let R=12*r-12,D=Gt.createTypedArray(u,R),M=0,N=0;for(x=0;x<r-1;x++)D[M++]=N,D[M++]=N+2,D[M++]=N+3,D[M++]=N,D[M++]=N+3,D[M++]=N+1,N+=2;for(D[M++]=a-2,D[M++]=0,D[M++]=1,D[M++]=a-2,D[M++]=1,D[M++]=a-1,x=1;x<r-1;x++)D[M++]=a+x+1,D[M++]=a+x,D[M++]=a;for(x=1;x<r-1;x++)D[M++]=s,D[M++]=s+x,D[M++]=s+x+1;let V=0;if(o.st){let ee=Math.max(n,i);for(x=0;x<u;x++){let Z=h.fromArray(l,x*3,A2);d[V++]=(Z.x+ee)/(2*ee),d[V++]=(Z.y+ee)/(2*ee)}}let q=new Ea;o.position&&(q.position=new Dt({componentDatatype:Re.DOUBLE,componentsPerAttribute:3,values:l})),o.normal&&(q.normal=new Dt({componentDatatype:Re.FLOAT,componentsPerAttribute:3,values:f})),o.tangent&&(q.tangent=new Dt({componentDatatype:Re.FLOAT,componentsPerAttribute:3,values:g})),o.bitangent&&(q.bitangent=new Dt({componentDatatype:Re.FLOAT,componentsPerAttribute:3,values:b})),o.st&&(q.st=new Dt({componentDatatype:Re.FLOAT,componentsPerAttribute:2,values:d})),ff.x=t*.5,ff.y=Math.max(i,n);let _=new ke(h.ZERO,Ce.magnitude(ff));if(m(e._offsetAttribute)){t=l.length;let ee=e._offsetAttribute===ws.NONE?0:1,Z=new Uint8Array(t/3).fill(ee);q.applyOffset=new Dt({componentDatatype:Re.UNSIGNED_BYTE,componentsPerAttribute:1,values:Z})}return new Ot({attributes:q,indices:D,primitiveType:bt.TRIANGLES,boundingSphere:_,offsetAttribute:e._offsetAttribute})};var mf;yo.getUnitCylinder=function(){return m(mf)||(mf=yo.createGeometry(new yo({topRadius:1,bottomRadius:1,length:1,vertexFormat:Tn.POSITION_ONLY}))),mf};var hf=yo;var R2=Et.RED,O2=Et.GREEN,I2=Et.BLUE;function Gu(e){this._length=e.length,this._modelMatrix=e.modelMatrix,this._radius=e.radius,this._xAxisColor=C(e.xAxisColor,R2),this._yAxisColor=C(e.yAxisColor,O2),this._zAxisColor=C(e.zAxisColor,I2),this._init()}Gu.prototype._init=function(){this._bodyRadius=this._radius?this._radius:this._length*.015,this._headRadius=this._bodyRadius*2,this._headLength=this._headRadius*2,this._bodyLength=this._length-this._headLength,this._bodyLength<0&&(this._bodyLength=0);let e=1;this._xAxisAttr={color:Gc.fromColor(this._xAxisColor.withAlpha(e))},this._yAxisAttr={color:Gc.fromColor(this._yAxisColor.withAlpha(e))},this._zAxisAttr={color:Gc.fromColor(this._zAxisColor.withAlpha(e))},this._primitive=this._createPrimitive()};Gu.prototype._createPrimitive=function(){let e=Tn.POSITION_ONLY,t=new hf({length:this._headLength,topRadius:0,bottomRadius:this._headRadius,vertexFormat:e}),n=new hf({length:this._bodyLength,topRadius:this._bodyRadius,bottomRadius:this._bodyRadius,vertexFormat:e}),i=this._bodyLength/2,o=this._bodyLength+this._headLength/2,r=new h(i,0,0),a=new h(o,0,0),s=new h(0,i,0),u=new h(0,o,0),l=new h(0,0,i),d=new h(0,0,o),f=_e.fromRotationY(Math.toRadians(90)),g=_e.fromRotationX(Math.toRadians(-90)),b=fe.fromRotationTranslation(f,r),x=fe.fromRotationTranslation(f,a),T=fe.fromRotationTranslation(g,s),R=fe.fromRotationTranslation(g,u),D=fe.fromTranslation(l),M=fe.fromTranslation(d),N=[],V=[],q=[],_=new dr({geometry:n,modelMatrix:b,attributes:this._xAxisAttr,id:{isEvCoordAxis:!0,instances:N,vector:new h(1,0,0),normal:h.UNIT_Z},pickPrimitive:this}),ee=new dr({geometry:t,modelMatrix:x,attributes:this._xAxisAttr,id:{isEvCoordAxis:!0,instances:N,vector:new h(1,0,0),normal:h.UNIT_Z},pickPrimitive:this}),Z=new dr({geometry:n,modelMatrix:T,attributes:this._yAxisAttr,id:{isEvCoordAxis:!0,instances:V,vector:new h(0,1,0),normal:h.UNIT_Z},pickPrimitive:this}),J=new dr({geometry:t,modelMatrix:R,attributes:this._yAxisAttr,id:{isEvCoordAxis:!0,instances:V,vector:new h(0,1,0),normal:h.UNIT_Z},pickPrimitive:this}),H=new dr({geometry:n,modelMatrix:D,attributes:this._zAxisAttr,id:{isEvCoordAxis:!0,instances:q,vector:new h(0,0,1),normal:h.UNIT_X},pickPrimitive:this}),te=new dr({geometry:t,modelMatrix:M,attributes:this._zAxisAttr,id:{isEvCoordAxis:!0,instances:q,vector:new h(0,0,1),normal:h.UNIT_X},pickPrimitive:this});return N.push(_,ee),V.push(Z,J),q.push(H,te),new kE({geometryInstances:[_,ee,Z,J,H,te],modelMatrix:this._modelMatrix,appearance:new K_({flat:!0,translucent:!1,renderState:{}}),cull:!0})};Gu.prototype.update=function(e){this._primitive.update(e)};var HE=Gu;function Yt(e){this._viewer=e.viewer,this._handler=new Cesium.ScreenSpaceEventHandler(this._viewer.canvas),this._editObject=null,this._editing=!1,this._positionPrimitive=null,this._positionPlane=null,this._highlightColor=null,this._editingColor=new Cesium.Color(1,0,0,.8),this._editingAxis=null,this._positionChanged=new Cesium.Event,this._modelMatrixChanged=new Cesium.Event,this._createPositionPrimitive({position:Cesium.Cartesian3.ZERO,size:Cesium.defaultValue(e.size,20)})}Object.defineProperties(Yt.prototype,{modelMatrixChanged:{get:function(){return this._modelMatrixChanged}},positionChanged:{get:function(){return this._positionChanged}},coordAxis:{get:function(){return this._modelMatrixPrimitive}}});Yt.prototype.startEdit=function(){this.editPosition(),this._editing=!0};Yt.prototype.stopEdit=function(){this.hideCoordAxis(),this._handler._inputEvents={},this._editing=!1,this._editObject=null};Yt.prototype._preventCameraOperation=function(){this._viewer.scene.screenSpaceCameraController.enableInputs=!1};Yt.prototype._renewCameraOperation=function(){this._viewer.scene.screenSpaceCameraController.enableInputs=!0};Yt.prototype._setEditAction=function(){};Yt.prototype.editPosition=function(e){let t=this,n=0,i=20,o=null,r=new Cesium.Ray,a=!1;this.setPosition(e),this._handler.setInputAction(function(s){let u=t._viewer.scene.pick(s.position);u&&u.id===t._positionPrimitive&&(a=!0,t._preventCameraOperation(),t.hideCoordAxis(),t._createPositionPlane())},Cesium.ScreenSpaceEventType.LEFT_DOWN),this._handler.setInputAction(function(s){if(a){let u=performance.now();if(u-n<i)return;n=u,t._viewer.camera.getPickRay(s.endPosition,r);let l=Cesium.IntersectionTests.rayPlane(r,t._positionPlane);if(!l)return;if(o=l,t._editObject instanceof Mo&&t._editObject._planes.length>0){let d=t._positionPrimitive.position._value,f=t._viewer.scene.globe.pick(t._viewer.camera.getPickRay(s.endPosition),t._viewer.scene),g=Cesium.Cartesian3.subtract(f,d,new Cesium.Cartesian3);t._positionPrimitive.position.setValue(f.clone()),t._editObject._planes[0].updatePointPosition(g)}t._positionChanged.raiseEvent(l)}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this._handler.setInputAction(function(){a&&(t.setPosition(o),t._renewCameraOperation(),o=null,a=!1)},Cesium.ScreenSpaceEventType.LEFT_UP)};Yt.prototype._setTranslation=function(e){let t=this._modelMatrixPrimitive._primitive.modelMatrix,n=Cesium.Matrix4.getTranslation(t,new Cesium.Cartesian3);n=Cesium.Cartesian3.add(n,e,n),Cesium.Matrix4.setTranslation(t,n,t),n=Cesium.Matrix4.getTranslation(this._modelMatrixPrimitive._primitive.modelMatrix,new Cesium.Cartesian3),this._positionChanged.raiseEvent(n),this._modelMatrixChanged.raiseEvent(this._modelMatrixPrimitive._primitive.modelMatrix)};Yt.prototype._createModelMatrixPrimitive=function(e){let t=e.position,n=e.length,i=e.radius,o;t?o=Cesium.Transforms.eastNorthUpToFixedFrame(t):o=Cesium.Matrix4.IDENTITY,this._modelMatrixPrimitive=new HE({length:n,radius:i,modelMatrix:o}),this._viewer.scene.primitives.add(this._modelMatrixPrimitive._primitive)};Yt.prototype._createPositionPrimitive=function(e){let t=e.position,n=e.size;this._positionPrimitive=this._viewer.entities.add({position:t,point:{pixelSize:n,color:Cesium.Color.CYAN,disableDepthTestDistance:1e3}})};Yt.prototype._createPositionPlane=function(){let e=this._positionPrimitive.position._value,t=Cesium.Cartesian3.magnitude(e),n=Cesium.Cartesian3.normalize(e,new Cesium.Cartesian3);this._positionPlane=new Cesium.Plane(n,-t)};Yt.prototype._removeModelMatrixPrimitive=function(){this._positionPrimitive&&(this._viewer.entities.remove(this._positionPrimitive),this._positionPrimitive=null)};Yt.prototype._setEditingColor=function(){this._editObject&&(this._highlightColor=this._editObject.color,this._editObject.color=this._editingColor)};Yt.prototype._removeEditingColor=function(){this._editObject&&(this._editObject.color=this._highlightColor)};Yt.prototype._computeAxisDirection=function(e){if(!this._modelMatrixPrimitive)return;let t=this._modelMatrixPrimitive._primitive.modelMatrix,n=Cesium.Matrix4.multiplyByPoint(t,e,new Cesium.Cartesian3),i=Cesium.Matrix4.getTranslation(t,new Cesium.Cartesian3),o=Cesium.Cartesian3.subtract(n,i,new Cesium.Cartesian3);return o=Cesium.Cartesian3.normalize(o,o),o};Yt.prototype._getAxisPlane=function(){if(!(this._modelMatrixPrimitive&&this._editingAxis))return;let e=this._modelMatrixPrimitive._primitive.modelMatrix;if(!e)return;let t=this._editingAxis.id.vector.clone();t=Cesium.Matrix4.multiplyByPoint(e,t,t);let n=Cesium.Matrix4.getTranslation(e,new Cesium.Cartesian3);t=Cesium.Cartesian3.subtract(t,n,t);let i=Cesium.Cartesian3.cross(t,this._viewer.camera.rightWC,t);i=Cesium.Cartesian3.normalize(i,i),Cesium.Cartesian3.angleBetween(i,n)>Math.PI_OVER_TWO&&(i=Cesium.Cartesian3.negate(i,i));let r=Cesium.Cartesian3.dot(i,n);return r=-r,new Cesium.Plane(i,r)};Yt.prototype.showCoordAxis=function(){this._positionPrimitive&&(this._positionPrimitive.show=!0)};Yt.prototype.hideCoordAxis=function(){this._positionPrimitive&&(this._positionPrimitive.show=!1)};Yt.prototype.setPosition=function(e){this._positionPrimitive.position.setValue(e.clone()),this._positionPrimitive.show||this.showCoordAxis()};var Hu=Yt;var gf=.01;function Ie(e){this.viewer=e.viewer,this._container=P2(e.container),this._handlerForCreate=new Cesium.ScreenSpaceEventHandler(this.viewer.canvas),this._handlerForOrientation=new Cesium.ScreenSpaceEventHandler(this.viewer.canvas),this._planeHandler=new Cesium.ScreenSpaceEventHandler(this.viewer.canvas),this._editor=new Hu({viewer:this.viewer,axisLength:e.axisLength,axisRadius:e.axisRadius}),this._editor.positionChanged.addEventListener(this._onPositionChanged,this),this._videoLayer=null,this._editObject=null,this._videoCameraAxis=null,this._cameraFrustumPrimitive=null,this._cameraPrimitives=[],this._isEditPosition=!1,this._isEditOrientation=!1,this._addedVideo=new Cesium.Event,this._editObjectChanged=new Cesium.Event,this._changed=new Cesium.Event,this._viewPointPlane=null,this._viewPointRay=new Cesium.Ray,this._editing=!1,this._showCameraFrustrum=!0,Cesium.defaultValue(e.createUI,!1)&&(this.top=Cesium.defaultValue(e.top,"0px"),this.left=Cesium.defaultValue(e.left,"0px"),this._styleElement=null,this._UIElement=null,this._createUI(Cesium.defaultValue(e.cssFileUrl,"../css/videoFusionEditor.css")))}Object.defineProperties(Ie.prototype,{addedVideo:{get:function(){return this._addedVideo}},editObjectChanged:{get:function(){return this._editObjectChanged}},changed:{get:function(){return this._changed}},editObject:{get:function(){return this._editObject}}});Ie.prototype.stopEdit=function(){this._editing=!1,this._editor.stopEdit(),this._videoCameraViewPoint&&(this._videoCameraViewPoint.show=!1),this._cameraFrustumPrimitive&&(this._cameraFrustumPrimitive.show=!1)};Ie.prototype.createVideoLayer=function(e){return this._videoLayer=new ps({viewer:this.viewer,name:e.name,visibleDistance:e.visibleDistance,wsServer:e.wsServer}),this._videoLayer.added.addEventListener(function(t){this._addedVideo.raiseEvent(t),this._setEditObject(t),t.isEditMode=!0},this),this._videoLayer};Ie.prototype.loadVideoLayer=function(e){return this._videoLayer=new ps({viewer:this.viewer,videoJsonFile:e.url}),this._videoLayer.added.addEventListener(function(t){t.isEditMode=!0,this.projectionType=t._projectionMode,this._setEditObject(t),this._addedVideo.raiseEvent(t)},this),this._videoLayer};Ie.prototype.createVideoModelProjection=function(e){e.projectionType=1,this._createVideoProjection(e)};Ie.prototype.createVideoPlaneProjection=function(e){e.projectionType=0,this._createVideoProjection(e)};Ie.prototype._createVideoProjection=function(e){let t=e.name,n=e.url,i=Cesium.defaultValue(e.offsetHeight,1),o=Cesium.defaultValue(e.farClip,50),r=this,a=!0,s=null,u=document.createElement("video");u.muted=!0,u.loop=!0,u.setAttribute("crossorigin","anonymous"),u.autoplay=!0,u.style.display="none",u.id=`v${new Date().getTime()+Math.floor(Math.random()*1e3)}`,document.body.appendChild(u);let l,d="",f;if(/^rtsp:\/\//.test(n))l=new zi({layer:this._videoLayer,wsserver:this._videoLayer.wsServe,rtspurl:n,mediaplayer:u,protocol:e.protocol}),l.openws(),d="rtsp";else if(/\./.test(n)){u.src=n;let g=n.split("/");f=g[g.length-1]}else{let g=new zi({layer:this._videoLayer,wsserver:this._videoLayer.wsServe,rtspurl:"",mediaplayer:u,protocol:e.protocol});g.openws(),g.playGB(),g.playGBDevice(n),d="gb"}e.wsplayer=l,this._handlerForCreate.setInputAction(function(g){let b=r.viewer.scene.globe.pick(r.viewer.camera.getPickRay(g.position),r.viewer.scene);b&&(a?(b=r._changeHeight(b,i),r.projectionType=e.projectionType,e.projectionType===0?s=r._createVideoPlaneProjection({name:t,url:n,position:b,videoElement:u,wsplayer:l,wsplayerType:d}):e.projectionType===1&&(s=r._createVideoModelProjection({name:t,url:n,position:b,videoElement:u,wsplayer:l,farClip:o,wsplayerType:d})),r._editing=!0,r._setEditObject(s),r._setVideoCameraViewPoint(b)):(s._fileName=f,r._handlerForCreate.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),r._handlerForCreate.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE)),a=!1)},Cesium.ScreenSpaceEventType.LEFT_CLICK),this._handlerForCreate.setInputAction(function(g){if(a)return;let b=r.viewer.scene.globe.pick(r.viewer.camera.getPickRay(g.endPosition),r.viewer.scene);b&&r._setVideoCameraViewPoint(b)},Cesium.ScreenSpaceEventType.MOUSE_MOVE)};Ie.prototype._createVideoModelProjection=function(e){let t=e.name,n=e.videoElement,i=e.position;i=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(i);let o=this.viewer.camera,r=Cesium.Math.toDegrees(i.longitude),a=Cesium.Math.toDegrees(i.latitude),s=Cesium.Math.toDegrees(o.heading),u=Cesium.Math.toDegrees(o.pitch),l=Cesium.Math.toDegrees(o.roll);return this._videoLayer.addVideoModelProjection({name:t,viewer:this.viewer,layer:this._videoLayer,videoElement:n,originLon:r,originLat:a,originHeight:i.height,heading:s,pitch:u,roll:l,farClip:e.farClip,wsplayer:e.wsplayer,isEditMode:!0,wsplayerType:e.wsplayerType})};Ie.prototype._createVideoPlaneProjection=function(e){let t=e.position;t=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(t);let n=Cesium.Math.toDegrees(t.longitude),i=Cesium.Math.toDegrees(t.latitude),o=this.viewer.camera,r=Cesium.Math.toDegrees(o.heading),a=Cesium.Math.toDegrees(o.pitch),s=Cesium.Math.toDegrees(o.roll);return this._videoLayer.addVideoPlaneProjection({viewer:this.viewer,name:e.name,videoElement:e.videoElement,layer:this._videoLayer,originLon:n,originLat:i,originHeight:t.height,heading:r,pitch:a,roll:s,wsplayer:e.wsplayer,wsplayerType:e.wsplayerType})};var _n=null,qo=[],qu=null,vo=null;Ie.prototype.createProjectionPlane=function(){this._editObject&&this._editObject._projectionMode===0&&(vo=this._editObject._createProjectionPlane(),this._setPlaneToBackFace())};Ie.prototype._editProjectionPlane=function(){let e=!1,t=null,n=null,i,o=Cesium.Color.YELLOW,r=new Cesium.Color(0,1,0,.8),a=null,s=new Cesium.Ray,u=this;this._planeHandler.setInputAction(function(f){let g=u.viewer.scene.pick(f.position);if(g){let b=qo.indexOf(g.id);if(b!==-1){e=!0,t=g.id,i=b,t.show=!1,u._editor._preventCameraOperation();let x=_n[b],T=Cesium.Cartesian3.normalize(x,new Cesium.Cartesian3);a=Cesium.Plane.fromPointNormal(x,T),s.origin=u.viewer.camera.positionWC}}},Cesium.ScreenSpaceEventType.LEFT_DOWN),this._planeHandler.setInputAction(function(f){t&&(t.show=!0,t=null),u._editor._renewCameraOperation(),e=!1},Cesium.ScreenSpaceEventType.LEFT_UP),this._planeHandler.setInputAction(function(f){let g=u.viewer.scene.pick(f.position);if(g&&g.primitive instanceof Do)return u._setEditProjectionPlane(g.primitive);let b=u.viewer.scene.pickPosition(f.position);b&&(b=u._changeHeight(b,.01),vo.addPoint(b),u._addVertexEntity(b),u._createProjectionPlaneOutline())},Cesium.ScreenSpaceEventType.LEFT_CLICK),this._planeHandler.setInputAction(function(f){let g=u.viewer.scene.pick(f.position);if(g){let b=qo.indexOf(g.id);b!==-1&&(vo.deletePointByIndex(b),u.viewer.entities.remove(g.id),qo.splice(b,1))}},Cesium.ScreenSpaceEventType.RIGHT_CLICK);let l=!1;this._planeHandler.setInputAction(function(f){if(e){let g=u.viewer.scene.pickPosition(f.endPosition);if(!g)return;let b=Cesium.Cartesian3.subtract(g,s.origin,g);if(s.direction=b,g=Cesium.IntersectionTests.rayPlane(s,a,g),!g)return;vo.setPoint(g,i),_n[i]=g,t.position.setValue(g)}else{let g=u.viewer.scene.pick(f.endPosition);i=g?qo.indexOf(g.id):-1,i!==-1?(n&&(n.point.color=o),g.id.point.color=r,n=g.id,u._editor._preventCameraOperation(),l=!0,t=g.id):n&&(n.point.color=o,n=null,u._editor._renewCameraOperation(),l=!1)}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this._planeHandler.setInputAction(d,Cesium.ScreenSpaceEventType.WHEEL),this._planeHandler.setInputAction(d,Cesium.ScreenSpaceEventType.WHEEL,Cesium.KeyboardEventModifier.CTRL);function d(f){if(!l)return;let g=_n[i],b=u.viewer.scene.globe.ellipsoid.cartesianToCartographic(g);b.height+=f/100*gf,g=u.viewer.scene.globe.ellipsoid.cartographicToCartesian(b,g),vo.setPoint(g,i),n.position.setValue(g)}};Ie.prototype.setProjectionPlaneVertexHeightStep=function(e){e>0&&(gf=e)};Ie.prototype.getProjectionPlaneVertexHeightStep=function(){return gf};Ie.prototype.stopProjectionPlane=function(){for(let e=0;e<qo.length;++e)this.viewer.entities.remove(qo[e]);this.viewer.entities.remove(qu),_n=null,qo.length=0,qu=null,vo=null,this._planeHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOWN),this._planeHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_UP),this._planeHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),this._planeHandler.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK),this._planeHandler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE),this._planeHandler.removeInputAction(Cesium.ScreenSpaceEventType.WHEEL)};Ie.prototype.adjustProjectionPlane=function(){let e=this;this._planeHandler.setInputAction(function(t){let n=e.viewer.scene.pick(t.position);if(n&&n.primitive instanceof Do){if(e._setEditObject(n.primitive._owner),vo=n.primitive,_n=n.primitive._originalPoints,_n.length>0){for(let i=0;i<_n.length;++i)e._addVertexEntity(_n[i]);e._createProjectionPlaneOutline()}e._editProjectionPlane()}},Cesium.ScreenSpaceEventType.LEFT_CLICK)};Ie.prototype._setEditProjectionPlane=function(e){if(vo&&this.stopProjectionPlane(),this._setEditObject(e._owner),vo=e,_n=e._originalPoints,_n.length>0){for(let t=0;t<_n.length;++t)this._addVertexEntity(_n[t]);this._createProjectionPlaneOutline()}this._editProjectionPlane()};Ie.prototype._addVertexEntity=function(e){let t=this.viewer.entities.add({position:e,point:{pixelSize:10,color:Cesium.Color.YELLOW,disableDepthTestDistance:1e3}});qo.push(t)};Ie.prototype._createProjectionPlaneOutline=function(){!qu&&_n.length>1&&(qu=this.viewer.entities.add({polyline:{positions:new Cesium.CallbackProperty(function(){return _n.length===2?_n:_n.concat(_n[0])},!1),width:3,arcType:Cesium.ArcType.NONE,material:Cesium.Color.YELLOW}}))};Ie.prototype.remove=function(){this._videoLayer.remove(this._editObject),this._editObject=null};Ie.prototype.editVideoCameraPosition=function(){this._editing=!0,this._isEditPosition=!0,this._isEditOrientation=!1,this._removeVideoCameraOrientationAction(),this._videoCameraViewPoint&&(this._videoCameraViewPoint.show=!1),this._editObject&&this._editObject.videoCamera&&(this._createCameraFrustumPrimitive(this._editObject.videoCamera),this._editor.editPosition(this._editObject.videoCamera.positionWC))};Ie.prototype._setPlaneToBackFace=function(){setTimeout(()=>{if(this._cameraFrustumPrimitive&&this.projectionType===0){let e=this._cameraFrustumPrimitive._planePositions,t=[];for(let i=12;i<e.length;i+=3)t.push(Cesium.Cartesian3.fromArray([e[i],e[i+1],e[i+2]]));let n=this._editObject._planes[0];n&&Array.isArray(n._originalPoints)&&(n._originalPoints=t,n._positionDirty=!0)}},100)};Ie.prototype.editVideoCameraOrientation=function(){if(this._editing=!0,this._isEditPosition=!1,this._isEditOrientation=!0,!this._editObject)return;this._editor.hideCoordAxis(),this._videoCameraViewPoint?(this._videoCameraViewPoint.position.setValue(this._editObject._viewPoint),this._videoCameraViewPoint.show||(this._videoCameraViewPoint.show=!0)):this._createVideoCameraViewPoint(),this._editObject._viewPoint&&this._setCameraViewPointPlane(this._editObject._viewPoint);let e=this,t=!1;this._handlerForOrientation.setInputAction(function(a){let s=e.viewer.scene.pick(a.position);s&&s.id===e._videoCameraViewPoint&&(t=!0,e._editor._preventCameraOperation(),e._videoCameraViewPoint.show=!1)},Cesium.ScreenSpaceEventType.LEFT_DOWN);let n=0,i=20,o=e._editObject.videoCamera.positionWC;this._handlerForOrientation.setInputAction(function(a){if(!t||(e._viewPointRay=e.viewer.camera.getPickRay(a.endPosition),!e._viewPointRay))return;let s=Cesium.IntersectionTests.rayPlane(e._viewPointRay,e._viewPointPlane),u=e._videoCameraViewPoint.position._value;s&&(e._videoCameraViewPoint.position.setValue(s.clone()),e._setVideoCameraViewPoint(s),e._setPlaneToBackFace())},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this._handlerForOrientation.setInputAction(function(a){t=!1,e._editor._renewCameraOperation(),e._videoCameraViewPoint.show=!0},Cesium.ScreenSpaceEventType.LEFT_UP);let r=this._editObject.videoCamera;r&&this._createCameraFrustumPrimitive(r)};Ie.prototype._removeVideoCameraOrientationAction=function(){this._handlerForOrientation.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOWN),this._handlerForOrientation.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_UP),this._handlerForOrientation.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE)};Ie.prototype._createCameraFrustumPrimitive=function(e){if(this._cameraFrustumPrimitive)this._cameraFrustumPrimitive._camera=e;else{let t=new Cesium.DebugCameraPrimitive({show:this._showCameraFrustrum,camera:e,depthTest:!1,allowPicking:!1,frustumSplits:[1,200],color:new Cesium.Color(0,1,1,.1)});this._cameraFrustumPrimitive=this.viewer.scene.primitives.add(t)}};Ie.prototype.setFrustumSplits=function(e,t){this._cameraFrustumPrimitive&&this._cameraFrustumPrimitive._frustumSplits.length===2&&(e&&(this._cameraFrustumPrimitive._frustumSplits[0]=e),t&&(this._cameraFrustumPrimitive._frustumSplits[1]=t))};Ie.prototype._createVideoCameraViewPoint=function(){if(!this._editObject)return;let e=this._editObject._viewPoint.clone();e&&(this._videoCameraViewPoint=this.viewer.entities.add({position:e,point:{pixelSize:20,color:Cesium.Color.CYAN,disableDepthTestDistance:1e3}}))};Ie.prototype._setVideoCameraViewPoint=function(e){if(this._editObject&&(this._editObject.setCameraViewPoint(e),this._cameraFrustumPrimitive&&this._cameraFrustumPrimitive._frustumSplits.length===2)){let t=Cesium.Cartesian3.distance(this._cameraFrustumPrimitive._camera.position,e)-10,n=this._cameraFrustumPrimitive._frustumSplits[0];t>n&&this.setFrustumSplits(null,t)}};Ie.prototype.updateByCamera=function(e,t,n,i){this._cameraFrustumPrimitive&&this._cameraFrustumPrimitive._planesPrimitives.length>0&&(this.setPosition(e),this._editObject.videoCamera.setView({orientation:{heading:Cesium.Math.toRadians(t),pitch:Cesium.Math.toRadians(n),roll:Cesium.Math.toRadians(i)}}),this._setPlaneToBackFace())};Ie.prototype._onPositionChanged=function(e){this._editObject.setVideoCameraPosition(e),this._setPlaneToBackFace()};Ie.prototype._changeHeight=function(e,t){let n=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(e);return n.height+=t,this.viewer.scene.globe.ellipsoid.cartographicToCartesian(n,e)};Ie.prototype._setEditObject=function(e){if(e===this._editObject)return;this._editObject&&this._editObject.changed.removeEventListener(this._onEditChanged,this),e.changed.addEventListener(this._onEditChanged,this),this._editObject=e,this._editor._editObject=e,this._editObjectChanged.raiseEvent(e),e.projectionMode!==0&&this.stopProjectionPlane();let t=this;e.cameraPromise.then(function(n){t._editing&&t._createCameraFrustumPrimitive(n),t._isEditPosition?t.editVideoCameraPosition():t._isEditOrientation&&t.editVideoCameraOrientation()})};Ie.prototype._onEditChanged=function(){this._changed.raiseEvent(this._editObject)};Ie.prototype.setEditObjectByName=function(e){let t=this._videoLayer.getProjectionByName(e);if(!t)throw new Error(`\u4E0D\u5B58\u5728\u540D\u79F0\u4E3A \u2018${e}\u2019 \u7684\u89C6\u9891\u6295\u5F71\u5BF9\u8C61\uFF01`);this._setEditObject(t)};Ie.prototype.viewToEditVideo=function(){if(!this._editObject)return;let e=this._editObject;if(e.videoCamera){let t=e.videoCamera.positionWC;this.viewer.camera.setView({destination:t,orientation:{heading:e.videoCamera.heading,pitch:e.videoCamera.pitch}}),e._videoCameraPostureChanged=!0}else{let t=Cesium.Cartographic.fromDegrees(e._originLon,e._originLat,e._originHeight);this.viewer.camera.setView({destination:this.viewer.scene.globe.ellipsoid.cartographicToCartesian(t),orientation:{heading:Cesium.Math.toRadians(e._heading),pitch:Cesium.Math.toRadians(e._pitch)}})}};Ie.prototype.getJson=function(e){return e=Cesium.defaultValue(e,2),JSON.stringify(this._videoLayer.getJsonData(),void 0,e)};Ie.prototype.createConfigurationFile=function(e){e=Cesium.defaultValue(e,{});let t=Cesium.defaultValue(e.fileName,"\u89C6\u9891\u878D\u5408\u914D\u7F6E\u6587\u4EF6"),n=this.getJson(e.space),i=new Blob([n],{type:"text/json"}),o=document.createElement("a");o.download=`${t}.json`,o.href=URL.createObjectURL(i);let r=new MouseEvent("click");o.dispatchEvent(r)};Ie.prototype._createUI=function(e){let t=document.createElement("style");t.textContent=`@import url(${e});`,this._container.ownerDocument.head.appendChild(t),this._styleElement=t;let n=document.createElement("table");n.id="videoFusionEditor",n.innerHTML='        <div class="inlineColumn">\u89C6\u9891\u878D\u5408\u7F16\u8F91\u5668</div>        <!-- \u521D\u59CB\u754C\u9762 -->        <div id="homeUI" class="UI">            <div class="inlineColumn">                <input type="button" id="addVideoLayerBtn" class="menuBtn" value="\u65B0\u5EFA\u89C6\u9891\u56FE\u5C42">                <input type="button" id="loadVideoLayerBtn" class="menuBtn" value="\u52A0\u8F7D\u89C6\u9891\u56FE\u5C42">                <input type="button" id="editVideoLayerBtn" class="menuBtn" value="\u7EE7\u7EED\u7F16\u8F91" style="display: none;">            </div>        </div>        <!-- \u89C6\u9891\u56FE\u5C42\u8F93\u5165\u754C\u9762 -->        <div id="videoLayerUI" style="display: none;"  class="UI">            <div class="inlineColumn">                <div class="columnHead"><span>\u56FE\u5C42\u540D\u79F0</span></div>                <div class="columnBody"><input id="videoLayerName" class="videoInfoInput" placeholder="\u8BF7\u547D\u540D\u8BE5\u56FE\u5C42"></div>            </div>            <div class="inlineColumn">                <div class="columnHead"><span>\u670D\u52A1\u5730\u5740</span></div>                <div class="columnBody"><input id="videoLayerServer" class="videoInfoInput" placeholder="\u8BF7\u8F93\u5165\u89C6\u9891\u670D\u52A1\u5730\u5740"></div>            </div>            <div class="inlineColumn">                <div class="columnHead"><span>\u53EF\u89C6\u8DDD\u79BB</span></div>                <div class="columnBody"><input id="videoLayerVisibleDistance" class="videoInfoInput" value="1000"></div>            </div>            <div class="inlineColumn">                <input type="button" id="createVideoLayer" class="menuBtn confirmBtn" value="\u521B\u5EFA\u89C6\u9891\u56FE\u5C42">            </div>        </div>        <!-- \u52A0\u8F7D\u89C6\u9891\u56FE\u5C42\u754C\u9762 -->    <div id="loadVideoLayerUI" style="display: none;" class="UI">        <div>                <span class="nameForInput">\u914D\u7F6E\u6587\u4EF6\uFF1A</span>                <!-- <input type="file" accept="application/json" id="configFile" style ="width: 80px;height:35px;font-size:15px"> -->        </div>        <div class="inlineColumn">                <input id="configFile" class="videoInfoInput" placeholder="\u8BF7\u8F93\u5165\u914D\u7F6E\u6587\u4EF6\u5730\u5740">        </div>        <div class="inlineColumn">                <input type="button" id="loadVideoLayer" class="menuBtn" value="\u786E\u5B9A">        </div>    </div>        <!-- \u89C6\u9891\u8F93\u5165\u754C\u9762 -->        <div id="videoProjectionUI" style="display: none;" class="UI">            <div id="videoProjectionMenuUI">                <div class="inlineColumn">                    <input id="addVideoModelProjection" class="menuBtn" type="button" value="\u6DFB\u52A0\u6A21\u578B\u6295\u5F71">                    <input id="addVideoPlaneProjection" class="menuBtn disableBtn" type="button" value="\u6DFB\u52A0\u5E73\u9762\u6295\u5F71" disabled>                </div>            </div>            <div id="videoModelProjectionUI"  style="display: none;">                <div class="inlineColumn">                    <div class="columnHead"><span>\u89C6\u9891\u540D\u79F0</span></div>                    <div class="columnBody"><input id="videoName" class="videoInfoInput" placeholder="\u8BF7\u547D\u540D\u8BE5\u89C6\u9891"></div>                </div>                <div class="inlineColumn">                    <div class="columnHead"><span>\u89C6\u9891\u5730\u5740</span></div>                    <div class="columnBody"><input id="videoUrl" class="videoInfoInput" placeholder="\u8BF7\u8F93\u5165\u89C6\u9891\u5730\u5740,\u4E0D\u80FD\u4E3A\u7A7A\uFF01" validationMessage="\u89C6\u9891\u5730\u5740,\u4E0D\u80FD\u4E3A\u7A7A\uFF01" required></div>                </div>                <div class="inlineColumn">                    <input id="createVideoModelProjection" class="menuBtn confirmBtn" type="button" value="&nbsp;\u786E&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u5B9A&nbsp;">                </div>                <div>                    <p class="hint">\u64CD\u4F5C\u63D0\u793A\uFF1A\u70B9\u51FB\u786E\u5B9A\u540E\uFF0C\u5728\u573A\u666F\u4E2D\u5355\u51FB\u9009\u53D6\u89C6\u9891\u76F8\u673A\u4F4D\u7F6E\uFF0C\u968F\u540E\u79FB\u52A8\u9F20\u6807\u8C03\u6574\u59FF\u6001\uFF0C\u518D\u6B21\u5355\u51FB\u786E\u8BA4\u59FF\u6001\u3002</p>                </div>            </div>        </div>        <!-- \u89C6\u9891\u6295\u5F71\u53C2\u6570\u7F16\u8F91\u754C\u9762 -->        <div  id="detailInfo" style="display: none;" class="UI">            <div class="inlineColumn">                <div class="columnHead">\u89C6\u9891\u5217\u8868</div>                <div class="columnBody"><select class="form-control" id="videoname"></select></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u76F8\u673A\u9AD8\u5EA6</div>                <div class="columnBody"><input type="number" id="originHeight"  class="regulatearc" min="0" max="10000" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u89C6\u70B9\u9AD8\u5EA6</div>                <div class="columnBody"><input type="number" id="viewPointHeight"  class="regulatearc" min="0" max="10000" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u7FFB\u6EDA\u89D2\u5EA6</div>                <div class="columnBody"><input type="number" id="roll"  class="regulatearc" min="-180" max="180" value="0"  step="0.1"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="rollv" min="-180" max="180" value="0" step="0.1"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u5F20\u5F00\u89D2\u5EA6</div>                <div class="columnBody"><input type="number" id="fov"  class="regulatearc" min="0" max="180" value="0" step="0.1"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="fovv" min="0" max="180" value="0" step="0.1"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u900F&nbsp;\u660E&nbsp;\u5EA6&nbsp;</div>                <div class="columnBody"><input type="number" id="alpha"  class="regulatearc" min="0" max="1" value="1" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="alphav" min="0" max="1" value="1" step="0.01"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u8FD1\u88C1\u526A\u9762</div>                <div class="columnBody"><input type="number" id="near"  class="regulatearc" min="0.01" max="100" value="1" step="0.1"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="nearv" min="0.01" max="100" value="1" step="0.1"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u8FDC\u88C1\u526A\u9762</div>                <div class="columnBody"><input type="number" id="far"  class="regulatearc" min="1" max="100" value="10" step="0.1"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="farv" min="1" max="100" value="10" step="0.1"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u7578&nbsp;\u53D8&nbsp;k1</div>                <div class="columnBody"><input type="number" id="k1"  class="regulatearc" min="-1" max="1" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="k1v" min="-1" max="1" step="0.01" value="0"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u7578&nbsp;\u53D8&nbsp;k2</div>                <div class="columnBody"><input type="number" id="k2"  class="regulatearc" min="-1" max="1" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="k2v" min="-1" max="1" step="0.01" value="0"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u8272&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u76F8</div>                <div class="columnBody"><input type="number" id="hue"  class="regulatearc" min="-1.0" max="1.0" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="huev" min="-1.0" max="1.0" step="0.01" value="0"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u9971&nbsp;\u548C&nbsp;\u5EA6&nbsp;</div>                <div class="columnBody"><input type="number" id="saturation"  class="regulatearc" min="-1.0" max="1.0" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="saturationv" min="-1.0" max="1.0" step="0.01" value="0"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u660E&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u5EA6</div>                <div class="columnBody"><input type="number" id="val"  class="regulatearc" min="-1.0" max="1.0" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="valv" min="-1.0" max="1.0" step="0.01" value="0"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u8DDD\u79BB\u8BEF\u5DEE</div>                <div class="columnBody"><input type="number" id="distanceError"  class="regulatearc" min="0.01" max="1" value="0.1" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u5DE6\u4E0A\u88C1\u526A</div>                <div class="columnBody">                    <input type="range" class="regulatearcr" id="leftUpX" min="0" max="1" step="0.01" value="0"/>                    <input type="range" class="regulatearcr" id="leftUpY" min="0" max="1" step="0.01" value="1"/>                </div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u5DE6\u4E0B\u88C1\u526A</div>                <div class="columnBody">                    <input type="range" class="regulatearcr" id="leftDownX" min="0" max="1" step="0.01" value="0"/>                    <input type="range" class="regulatearcr" id="leftDownY" min="0" max="1" step="0.01" value="0"/>                </div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u53F3\u4E0A\u88C1\u526A</div>                <div class="columnBody">                    <input type="range" class="regulatearcr" id="rightUpX" min="0" max="1" step="0.01" value="1"/>                    <input type="range" class="regulatearcr" id="rightUpY" min="0" max="1" step="0.01" value="1"/>                </div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u53F3\u4E0B\u88C1\u526A</div>                <div class="columnBody">                    <input type="range" class="regulatearcr" id="rightDownX" min="0" max="1" step="0.01" value="1"/>                    <input type="range" class="regulatearcr" id="rightDownY" min="0" max="1" step="0.01" value="0"/>                </div>            </div>            <div class="inlineColumn">                <div>                    <label class="checkboxText">                        \u6A21\u578B\u906E\u6321<input type="checkbox" id="depthType" checked/>                    </label>                </div>                <div>                    <label class="checkboxText">                        \u663E\u793A\u8F85\u52A9\u7EBF<input type="checkbox" id="showFrustrum" checked/>                    </label>                </div>            </div>            <div class="inlineColumn">                <div colspan="3" class="inlineColumn">                    <input type="button" id="addVideo" class="menuBtn" value="\u6DFB\u52A0\u89C6\u9891">                    <input type="button" id="editPosition" class="menuBtn" value="\u7F16\u8F91\u4F4D\u7F6E">                    <input type="button" id="locationBtn" class="menuBtn" value="\u5230&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u8BBF">                </div>            </div>            <div class="inlineColumn">                <div colspan="3" class="inlineColumn">                    <input type="button" id="delectVideo" class="menuBtn" value="\u5220\u9664\u89C6\u9891">                    <input type="button" id="editOrientation" class="menuBtn"  value="\u7F16\u8F91\u89C6\u70B9">                    <input type="button" id="createJson" class="menuBtn" value="\u5BFC\u51FA\u914D\u7F6E">                    <!-- <input type="button" id="stopEdit" class="menuBtn" value="\u7ED3\u675F\u7F16\u8F91"> -->                </div>            </div>            <div class="inlineColumn">                <div colspan="3" class="inlineColumn">                    <input type="button" id="toMainCamera" class="menuBtn" value="\u5230\u4E3B\u76F8\u673A">                    <input type="button" id="stopEdit" class="menuBtn" value="\u7ED3\u675F\u7F16\u8F91">                </div>            </div>        </div>    ',n.style.top=this.top,n.style.left=this.left,this._container.appendChild(n),this._UIElement=n;let i=this;this.addedVideo.addEventListener(function(ze){let Nn=new Option(ze.name);f.add(Nn),f.selectedIndex=f.length-1,di(ze)}),this.changed.addEventListener(function(ze){di(ze)}),this.editObjectChanged.addEventListener(function(ze){di(ze)});var o=document.getElementById("homeUI"),r=document.getElementById("videoLayerUI"),a=document.getElementById("loadVideoLayerUI"),s=document.getElementById("videoProjectionUI"),u=document.getElementById("videoProjectionMenuUI"),l=document.getElementById("videoModelProjectionUI"),d=document.getElementById("detailInfo"),f=document.getElementById("videoname"),g=document.getElementById("addVideoLayerBtn"),b=document.getElementById("loadVideoLayerBtn"),x=document.getElementById("editVideoLayerBtn"),T=document.getElementById("stopEdit"),R=document.getElementById("addVideo"),D=document.getElementById("delectVideo"),M=document.getElementById("editPosition"),N=document.getElementById("editOrientation"),V=document.getElementById("createVideoLayer"),q=document.getElementById("loadVideoLayer"),_=document.getElementById("configFile"),ee=document.getElementById("addVideoModelProjection"),Z=document.getElementById("addVideoPlaneProjection"),J=document.getElementById("videoName"),H=document.getElementById("videoUrl"),te=document.getElementById("createVideoModelProjection"),y=document.getElementById("locationBtn"),w=document.getElementById("createJson"),P=document.getElementById("toMainCamera");function B(){o.style.display="block",r.style.display="none",a.style.display="none",s.style.display="none",d.style.display="none",i._videoLayer&&(x.style.display="block")}function Y(){o.style.display="none",r.style.display="block",a.style.display="none",s.style.display="none",d.style.display="none"}function K(){o.style.display="none",r.style.display="none",a.style.display="block",s.style.display="none",d.style.display="none"}function U(){o.style.display="none",r.style.display="none",a.style.display="none",s.style.display="block",u.style.display="block",l.style.display="none",d.style.display="none"}function re(){o.style.display="none",r.style.display="none",a.style.display="none",s.style.display="none",d.style.display="block"}g.onclick=function(){Y()},b.onclick=function(){K()},x.onclick=function(){re()},V.onclick=function(){U();let ze=document.getElementById("videoLayerName").value,Nn=document.getElementById("videoLayerServer").value,Kn=Number(document.getElementById("videoLayerVisibleDistance").value);i.createVideoLayer({name:ze,wsServer:Nn,visibleDistance:Kn})},q.onclick=function(){let ze=_.value;if(ze===""){_.placeholder="\u914D\u7F6E\u6587\u4EF6\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A\uFF01";return}i.loadVideoLayer({url:ze}),re()},ee.onclick=function(){u.style.display="none",l.style.display="block"},Z.onclick=function(){},te.onclick=function(){let ze=H.value;if(ze===""){H.placeholder="\u89C6\u9891\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A\uFF01";return}i.createVideoModelProjection({name:J.value,url:ze,farClip:30}),re()},f.onchange=function(){i.setEditObjectByName(this.value)},R.onclick=function(){U()},M.onclick=function(){i.editVideoCameraPosition()},N.onclick=function(){i.editVideoCameraOrientation()},y.onclick=function(){i.viewToEditVideo()},w.onclick=function(){i.createConfigurationFile({fileName:"\u8D35\u9633\u56FD\u9645\u673A\u573A\u89C6\u9891\u878D\u5408"})},T.onclick=function(){i.stopEdit(),B()},D.onclick=function(){layui.use(["layer"],function(){let ze=layui.layer;ze.confirm(`\u60A8\u786E\u5B9A\u5220\u9664\u201C${i.editObject.name}\u201D\u5417\uFF1F`,{title:"\u89C6\u9891\u878D\u5408\u7F16\u8F91\u5668"},function(Nn){ze.close(Nn),i.remove();let Kn=f.selectedIndex;f.options.remove(Kn),f.length!==0&&(f.length>Kn?f.selectedIndex=Kn:f.selectedIndex=Kn-1,i.setEditObjectByName(f.value))})})},P.onclick=function(){i.setToMainCamera()};let ye=document.getElementById("originHeight"),Oe=document.getElementById("viewPointHeight"),Fe=document.getElementById("roll"),Je=document.getElementById("rollv"),He=document.getElementById("fov"),Ye=document.getElementById("fovv"),at=document.getElementById("near"),ht=document.getElementById("nearv"),qe=document.getElementById("far"),ot=document.getElementById("farv"),Xe=document.getElementById("k1"),Nt=document.getElementById("k1v"),Zt=document.getElementById("k2"),yn=document.getElementById("k2v"),li=document.getElementById("alpha"),Wo=document.getElementById("alphav"),Xn=document.getElementById("hue"),$n=document.getElementById("huev"),Yi=document.getElementById("saturation"),js=document.getElementById("saturationv"),Zi=document.getElementById("val"),Wn=document.getElementById("valv"),bo=document.getElementById("distanceError"),Ai=document.getElementById("leftUpX"),Me=document.getElementById("leftUpY"),Jt=document.getElementById("leftDownX"),Ir=document.getElementById("leftDownY"),Pr=document.getElementById("rightUpX"),Dr=document.getElementById("rightUpY"),Ko=document.getElementById("rightDownX"),Yo=document.getElementById("rightDownY"),Ji=document.getElementById("depthType"),pi=document.getElementById("showFrustrum");ye.oninput=function(){i.setCameraHeight(this.valueAsNumber)},Oe.oninput=function(){i.setCameraViewPointHeight(this.valueAsNumber)},Fe.oninput=function(){let ze=this.valueAsNumber;Je.value=ze,ze=Nr(ze),i.setCameraRoll(ze)},Je.oninput=function(){Fe.value=this.valueAsNumber;let ze=Nr(this.valueAsNumber);i.setCameraRoll(ze)},He.oninput=function(){Ye.value=this.value,i.setFov(this.valueAsNumber)},Ye.oninput=function(){He.value=this.value,i.setFov(this.valueAsNumber)},at.oninput=function(){ht.value=this.value,i.setNear(this.valueAsNumber)},ht.oninput=function(){at.value=this.value,i.setNear(this.valueAsNumber)},qe.oninput=function(){ot.value=this.value,i.setFar(this.valueAsNumber)},ot.oninput=function(){qe.value=this.value,i.setFar(this.valueAsNumber)},Xe.oninput=function(){Nt.value=this.value,i.setDistortionK1(this.valueAsNumber)},Nt.oninput=function(){Xe.value=this.value,i.setDistortionK1(this.valueAsNumber)},Zt.oninput=function(){yn.value=this.value,i.setDistortionK2(this.valueAsNumber)},yn.oninput=function(){Zt.value=this.value,i.setDistortionK2(this.valueAsNumber)},li.oninput=function(){Wo.value=this.value,i.setAlpha(this.valueAsNumber)},Wo.oninput=function(){li.value=this.value,i.setAlpha(this.valueAsNumber)},Xn.oninput=function(){$n.value=this.value,i.setHSV(this.valueAsNumber,Yi.valueAsNumber,Zi.valueAsNumber)},$n.oninput=function(){Xn.value=this.value,i.setHSV(this.valueAsNumber,Yi.valueAsNumber,Zi.valueAsNumber)},Yi.oninput=function(){js.value=this.value,i.setHSV(Xn.valueAsNumber,this.valueAsNumber,Zi.valueAsNumber)},js.oninput=function(){Yi.value=this.value,i.setHSV(Xn.valueAsNumber,this.valueAsNumber,Zi.valueAsNumber)},Zi.oninput=function(){Wn.value=this.value,i.setHSV(Xn.valueAsNumber,Yi.valueAsNumber,this.valueAsNumber)},Wn.oninput=function(){Zi.value=this.value,i.setHSV(Xn.valueAsNumber,Yi.valueAsNumber,this.valueAsNumber)},bo.oninput=function(){i.setDistanceError(this.valueAsNumber)},Ai.oninput=function(){i.setVideoLeftUpClipPoint(Ai.valueAsNumber,Me.valueAsNumber)},Me.oninput=function(){i.setVideoLeftUpClipPoint(Ai.valueAsNumber,Me.valueAsNumber)},Jt.oninput=function(){i.setVideoLeftDownClipPoint(Jt.valueAsNumber,Ir.valueAsNumber)},Ir.oninput=function(){i.setVideoLeftDownClipPoint(Jt.valueAsNumber,Ir.valueAsNumber)},Pr.oninput=function(){i.setVideoRightUpClipPoint(Pr.valueAsNumber,Dr.valueAsNumber)},Dr.oninput=function(){i.setVideoRightUpClipPoint(Pr.valueAsNumber,Dr.valueAsNumber)},Ko.oninput=function(){i.setVideoRightDownClipPoint(Ko.valueAsNumber,Yo.valueAsNumber)},Yo.oninput=function(){i.setVideoRightDownClipPoint(Ko.valueAsNumber,Yo.valueAsNumber)},Ji.onchange=function(){this.checked?i.setVideoDepthType(3):i.setVideoDepthType(0)},pi.onchange=function(){i.setVideoCameraFrustumVisibility(this.checked)};function di(ze){ye.value=ze._originHeight.toFixed(2),Oe.value=i.getCameraViewPointHeight().toFixed(2),Fe.value=Je.value=Nr(ze._roll.toFixed(1)),He.value=Ye.value=ze._fov,at.value=ht.value=ze._nearClip,qe.value=ot.value=ze._farClip,Xe.value=Nt.value=ze._distortion.x,Zt.value=yn.value=ze._distortion.y,li.value=Wo.value=ze.videoAlpha;let Nn=ze.videoHsv;Xn.value=Nn.x,Yi.value=Nn.y,Zi.value=Nn.z,bo.value=ze._distanceError,Ai.value=ze._videoTextureClipLUPos.x,Me.value=ze._videoTextureClipLUPos.y,Jt.value=ze._videoTextureClipLBPos.x,Ir.value=ze._videoTextureClipLBPos.y,Pr.value=ze._videoTextureClipRUPos.x,Dr.value=ze._videoTextureClipRUPos.y,Ko.value=ze._videoTextureClipRBPos.x,Yo.value=ze._videoTextureClipRBPos.y,ze._depthType===0?Ji.checked=!1:ze._depthType===3&&(Ji.checked=!0)}let Xi=document.getElementsByClassName("menuBtn");for(let ze=0;ze<Xi.length;++ze){let Nn=Xi[ze];Nn.onmouseenter=Wu,Nn.onmouseout=Mr}function Wu(){this.style.backgroundColor="#a6c9e7"}function Mr(){this.style.backgroundColor=""}function Nr(ze){return ze<0?ze+=360:ze>180&&(ze-=360),ze}};Ie.prototype.showUI=function(){if(!this._UIElement)throw new Error("\u89C6\u9891\u878D\u5408\u7F16\u8F91\u5668\u754C\u9762\u672A\u521B\u5EFA\uFF01");this._UIElement.style.display="block"};Ie.prototype.hideUI=function(){if(!this._UIElement)throw new Error("\u89C6\u9891\u878D\u5408\u7F16\u8F91\u5668\u754C\u9762\u672A\u521B\u5EFA\uFF01");this._UIElement.style.display="none"};Ie.prototype.setPosition=function(e){e&&(this._editObject.setVideoCameraPosition(e.clone(),!1),this._editor.setPosition(e.clone()),this._setPlaneToBackFace())};Ie.prototype.setOrientation=function(e,t,n){let i=this._editObject.videoCamera;i&&(this._editObject._roll=n,this._editObject._heading=e,this._editObject._pitch=t,i.setView({orientation:{heading:Cesium.Math.toRadians(e),pitch:Cesium.Math.toRadians(t),roll:Cesium.Math.toRadians(n)}}),this._setPlaneToBackFace())};Ie.prototype.setFov=function(e){this._editObject.setCameraFov(e),this._setPlaneToBackFace()};Ie.prototype.setAlpha=function(e){this._editObject.videoAlpha=e};Ie.prototype.setHSV=function(e,t,n){let i=this._editObject.videoHsv;i.x=e,i.y=t,i.z=n};Ie.prototype.setNear=function(e){e<=0||(this._editObject instanceof oo&&this._editObject.setNearClip(e),this._setPlaneToBackFace())};Ie.prototype.setFar=function(e){e<=0||(this._editObject instanceof oo&&this._editObject.setFarClip(e),this._setPlaneToBackFace())};Ie.prototype.setDistortion=function(e){this._editObject.setDistortion(e)};Ie.prototype.setDistortionK1=function(e){this._editObject._distortion.x=e};Ie.prototype.setDistortionK2=function(e){this._editObject._distortion.y=e};Ie.prototype.setCameraRoll=function(e){let t=this._editObject.videoCamera;t&&(this._editObject._roll=e,t.setView({orientation:{heading:t.heading,pitch:t.pitch,roll:Cesium.Math.toRadians(e)}}),this._setPlaneToBackFace())};Ie.prototype.setCameraHeight=function(e){let t=this._editor._positionPrimitive.position._value,n=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(t);n&&(n.height=e,this.viewer.scene.globe.ellipsoid.cartographicToCartesian(n,t),this._editObject.setVideoCameraPosition(t.clone(),!0),this._setPlaneToBackFace())};Ie.prototype.setCameraViewPointHeight=function(e){let t=this._editObject._viewPoint,n=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(t);n.height=e,this.viewer.scene.globe.ellipsoid.cartographicToCartesian(n,t),this._setCameraViewPointPlane(t),this._editObject.setCameraViewPoint(t,!1),this._videoCameraViewPoint&&(this._videoCameraViewPoint.position.setValue(t.clone()),this._setPlaneToBackFace())};Ie.prototype.getCameraViewPointHeight=function(){return this._editObject&&this._editObject._viewPoint?this.viewer.scene.globe.ellipsoid.cartesianToCartographic(this._editObject._viewPoint).height:0};Ie.prototype._setCameraViewPointPlane=function(e){let t=Cesium.Cartesian3.normalize(e,new Cesium.Cartesian3),n=Cesium.Cartesian3.magnitude(e);n=-n,this._viewPointPlane?(this._viewPointPlane.normal=t,this._viewPointPlane.distance=n):this._viewPointPlane=new Cesium.Plane(t,n)};Ie.prototype.setVideoLeftUpClipPoint=function(e,t){this._editObject._videoTextureClipLUPos.x=e,this._editObject._videoTextureClipLUPos.y=t};Ie.prototype.setVideoLeftDownClipPoint=function(e,t){this._editObject._videoTextureClipLBPos.x=e,this._editObject._videoTextureClipLBPos.y=t};Ie.prototype.setVideoRightUpClipPoint=function(e,t){this._editObject._videoTextureClipRUPos.x=e,this._editObject._videoTextureClipRUPos.y=t};Ie.prototype.setVideoRightDownClipPoint=function(e,t){this._editObject._videoTextureClipRBPos.x=e,this._editObject._videoTextureClipRBPos.y=t};Ie.prototype.setVideoDepthType=function(e){this._editObject&&(this._editObject._depthType=e)};Ie.prototype.setVideoCameraFrustumVisibility=function(e){this._showCameraFrustrum=e,this._cameraFrustumPrimitive&&(e?this._cameraFrustumPrimitive._color=new Cesium.Color(0,1,1,.1):this._cameraFrustumPrimitive._color=new Cesium.Color(0,1,1,0))};Ie.prototype.setToMainCamera=function(){this._editObject&&this._editObject.videoCamera&&this._editObject.setVideoCameraPosition(this.viewer.camera.positionWC)};Ie.prototype.setDistanceError=function(e){this._editObject&&(this._editObject.distanceError=e)};Ie.prototype.setVisibleDistance=function(e){this._editObject&&(this._editObject.visibleDistance=e)};Ie.prototype.setProtocol=function(e){!this._editObject&&this._editObject._wsplayer||(this._editObject._wsplayer.protocol=e)};Ie.prototype.destroy=function(){};function P2(e){return typeof e=="string"?e=document.getElementById(e):e===void 0&&(e=document.body),e}var qE=Ie;globalThis.CESIUM_VERSION="1.105.2";0&&(module.exports={DahuaWSPlayer,DahuaWSPlayerManager,EV_Editor,EV_ProjectionPlane,EV_VideoFusion,EV_VideoFusionEditor,EV_VideoLayer,EV_VideoProjection,EV_VideoProjectionFS,EV_VideoProjectionManager,EV_VideoProjectionPlane,EV_VideoSynchronizerEx,EV_WSPlayer,VideoFusionMixin});
