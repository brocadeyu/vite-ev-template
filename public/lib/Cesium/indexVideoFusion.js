/**
 * @license
 * Cesium - https://github.com/CesiumGS/cesium
 * Version 1.105.2
 *
 * Copyright 2011-2022 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for full licensing details.
 */

var s1=Object.create;var Mh=Object.defineProperty;var a1=Object.getOwnPropertyDescriptor;var c1=Object.getOwnPropertyNames;var u1=Object.getPrototypeOf,l1=Object.prototype.hasOwnProperty;var Ya=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Ft=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var f1=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of c1(t))!l1.call(e,o)&&o!==n&&Mh(e,o,{get:()=>t[o],enumerable:!(i=a1(t,o))||i.enumerable});return e};var Di=(e,t,n)=>(n=e!=null?s1(u1(e)):{},f1(t||!e||!e.__esModule?Mh(n,"default",{value:e,enumerable:!0}):n,e));var pp=Ft((VD,hp)=>{"use strict";hp.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var o=42;t[n]=o;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var r=Object.getOwnPropertySymbols(t);if(r.length!==1||r[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,n);if(s.value!==o||s.enumerable!==!0)return!1}return!0}});var yp=Ft((UD,gp)=>{"use strict";var mp=typeof Symbol<"u"&&Symbol,fT=pp();gp.exports=function(){return typeof mp!="function"||typeof Symbol!="function"||typeof mp("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:fT()}});var Cp=Ft((kD,vp)=>{"use strict";var _p={foo:{}},dT=Object;vp.exports=function(){return{__proto__:_p}.foo===_p.foo&&!({__proto__:null}instanceof dT)}});var Tp=Ft((GD,bp)=>{"use strict";var hT="Function.prototype.bind called on incompatible ",xl=Array.prototype.slice,pT=Object.prototype.toString,mT="[object Function]";bp.exports=function(t){var n=this;if(typeof n!="function"||pT.call(n)!==mT)throw new TypeError(hT+n);for(var i=xl.call(arguments,1),o,r=function(){if(this instanceof o){var d=n.apply(this,i.concat(xl.call(arguments)));return Object(d)===d?d:this}else return n.apply(t,i.concat(xl.call(arguments)))},s=Math.max(0,n.length-i.length),a=[],c=0;c<s;c++)a.push("$"+c);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(r),n.prototype){var l=function(){};l.prototype=n.prototype,o.prototype=new l,l.prototype=null}return o}});var uc=Ft((HD,Ep)=>{"use strict";var gT=Tp();Ep.exports=Function.prototype.bind||gT});var Sp=Ft((jD,wp)=>{"use strict";var yT=uc();wp.exports=yT.call(Function.call,Object.prototype.hasOwnProperty)});var dc=Ft((WD,Op)=>{"use strict";var it,qr=SyntaxError,Pp=Function,Wr=TypeError,Al=function(e){try{return Pp('"use strict"; return ('+e+").constructor;")()}catch{}},Qo=Object.getOwnPropertyDescriptor;if(Qo)try{Qo({},"")}catch{Qo=null}var Rl=function(){throw new Wr},_T=Qo?function(){try{return arguments.callee,Rl}catch{try{return Qo(arguments,"callee").get}catch{return Rl}}}():Rl,Hr=yp()(),vT=Cp()(),nn=Object.getPrototypeOf||(vT?function(e){return e.__proto__}:null),jr={},CT=typeof Uint8Array>"u"||!nn?it:nn(Uint8Array),Jo={"%AggregateError%":typeof AggregateError>"u"?it:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?it:ArrayBuffer,"%ArrayIteratorPrototype%":Hr&&nn?nn([][Symbol.iterator]()):it,"%AsyncFromSyncIteratorPrototype%":it,"%AsyncFunction%":jr,"%AsyncGenerator%":jr,"%AsyncGeneratorFunction%":jr,"%AsyncIteratorPrototype%":jr,"%Atomics%":typeof Atomics>"u"?it:Atomics,"%BigInt%":typeof BigInt>"u"?it:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?it:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?it:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?it:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?it:Float32Array,"%Float64Array%":typeof Float64Array>"u"?it:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?it:FinalizationRegistry,"%Function%":Pp,"%GeneratorFunction%":jr,"%Int8Array%":typeof Int8Array>"u"?it:Int8Array,"%Int16Array%":typeof Int16Array>"u"?it:Int16Array,"%Int32Array%":typeof Int32Array>"u"?it:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Hr&&nn?nn(nn([][Symbol.iterator]())):it,"%JSON%":typeof JSON=="object"?JSON:it,"%Map%":typeof Map>"u"?it:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Hr||!nn?it:nn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?it:Promise,"%Proxy%":typeof Proxy>"u"?it:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?it:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?it:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Hr||!nn?it:nn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?it:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Hr&&nn?nn(""[Symbol.iterator]()):it,"%Symbol%":Hr?Symbol:it,"%SyntaxError%":qr,"%ThrowTypeError%":_T,"%TypedArray%":CT,"%TypeError%":Wr,"%Uint8Array%":typeof Uint8Array>"u"?it:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?it:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?it:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?it:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?it:WeakMap,"%WeakRef%":typeof WeakRef>"u"?it:WeakRef,"%WeakSet%":typeof WeakSet>"u"?it:WeakSet};if(nn)try{null.error}catch(e){xp=nn(nn(e)),Jo["%Error.prototype%"]=xp}var xp,bT=function e(t){var n;if(t==="%AsyncFunction%")n=Al("async function () {}");else if(t==="%GeneratorFunction%")n=Al("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=Al("async function* () {}");else if(t==="%AsyncGenerator%"){var i=e("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&nn&&(n=nn(o.prototype))}return Jo[t]=n,n},Ap={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Zs=uc(),lc=Sp(),TT=Zs.call(Function.call,Array.prototype.concat),ET=Zs.call(Function.apply,Array.prototype.splice),Rp=Zs.call(Function.call,String.prototype.replace),fc=Zs.call(Function.call,String.prototype.slice),wT=Zs.call(Function.call,RegExp.prototype.exec),ST=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,xT=/\\(\\)?/g,AT=function(t){var n=fc(t,0,1),i=fc(t,-1);if(n==="%"&&i!=="%")throw new qr("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new qr("invalid intrinsic syntax, expected opening `%`");var o=[];return Rp(t,ST,function(r,s,a,c){o[o.length]=a?Rp(c,xT,"$1"):s||r}),o},RT=function(t,n){var i=t,o;if(lc(Ap,i)&&(o=Ap[i],i="%"+o[0]+"%"),lc(Jo,i)){var r=Jo[i];if(r===jr&&(r=bT(i)),typeof r>"u"&&!n)throw new Wr("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:i,value:r}}throw new qr("intrinsic "+t+" does not exist!")};Op.exports=function(t,n){if(typeof t!="string"||t.length===0)throw new Wr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Wr('"allowMissing" argument must be a boolean');if(wT(/^%?[^%]*%?$/,t)===null)throw new qr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=AT(t),o=i.length>0?i[0]:"",r=RT("%"+o+"%",n),s=r.name,a=r.value,c=!1,l=r.alias;l&&(o=l[0],ET(i,TT([0,1],l)));for(var d=1,h=!0;d<i.length;d+=1){var g=i[d],C=fc(g,0,1),b=fc(g,-1);if((C==='"'||C==="'"||C==="`"||b==='"'||b==="'"||b==="`")&&C!==b)throw new qr("property names with quotes must have matching quotes");if((g==="constructor"||!h)&&(c=!0),o+="."+g,s="%"+o+"%",lc(Jo,s))a=Jo[s];else if(a!=null){if(!(g in a)){if(!n)throw new Wr("base intrinsic for "+t+" exists, but the property is not available.");return}if(Qo&&d+1>=i.length){var w=Qo(a,g);h=!!w,h&&"get"in w&&!("originalValue"in w.get)?a=w.get:a=a[g]}else h=lc(a,g),a=a[g];h&&!c&&(Jo[s]=a)}}return a}});var Lp=Ft((qD,hc)=>{"use strict";var Pl=uc(),Yr=dc(),Mp=Yr("%Function.prototype.apply%"),zp=Yr("%Function.prototype.call%"),Np=Yr("%Reflect.apply%",!0)||Pl.call(zp,Mp),Ip=Yr("%Object.getOwnPropertyDescriptor%",!0),er=Yr("%Object.defineProperty%",!0),PT=Yr("%Math.max%");if(er)try{er({},"a",{value:1})}catch{er=null}hc.exports=function(t){var n=Np(Pl,zp,arguments);if(Ip&&er){var i=Ip(n,"length");i.configurable&&er(n,"length",{value:1+PT(0,t.length-(arguments.length-1))})}return n};var Dp=function(){return Np(Pl,Mp,arguments)};er?er(hc.exports,"apply",{value:Dp}):hc.exports.apply=Dp});var Up=Ft((YD,Vp)=>{"use strict";var Bp=dc(),Fp=Lp(),OT=Fp(Bp("String.prototype.indexOf"));Vp.exports=function(t,n){var i=Bp(t,!!n);return typeof i=="function"&&OT(t,".prototype.")>-1?Fp(i):i}});var kp=Ft(()=>{});var am=Ft(($D,sm)=>{var Vl=typeof Map=="function"&&Map.prototype,Ol=Object.getOwnPropertyDescriptor&&Vl?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mc=Vl&&Ol&&typeof Ol.get=="function"?Ol.get:null,Gp=Vl&&Map.prototype.forEach,Ul=typeof Set=="function"&&Set.prototype,Il=Object.getOwnPropertyDescriptor&&Ul?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,gc=Ul&&Il&&typeof Il.get=="function"?Il.get:null,Hp=Ul&&Set.prototype.forEach,IT=typeof WeakMap=="function"&&WeakMap.prototype,$s=IT?WeakMap.prototype.has:null,DT=typeof WeakSet=="function"&&WeakSet.prototype,Ks=DT?WeakSet.prototype.has:null,MT=typeof WeakRef=="function"&&WeakRef.prototype,jp=MT?WeakRef.prototype.deref:null,zT=Boolean.prototype.valueOf,NT=Object.prototype.toString,LT=Function.prototype.toString,BT=String.prototype.match,kl=String.prototype.slice,xo=String.prototype.replace,FT=String.prototype.toUpperCase,Wp=String.prototype.toLowerCase,em=RegExp.prototype.test,qp=Array.prototype.concat,zi=Array.prototype.join,VT=Array.prototype.slice,Yp=Math.floor,zl=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Dl=Object.getOwnPropertySymbols,Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Zr=typeof Symbol=="function"&&typeof Symbol.iterator=="object",vn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Zr||"symbol")?Symbol.toStringTag:null,tm=Object.prototype.propertyIsEnumerable,Zp=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function Xp(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||em.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var i=e<0?-Yp(-e):Yp(e);if(i!==e){var o=String(i),r=kl.call(t,o.length+1);return xo.call(o,n,"$&_")+"."+xo.call(xo.call(r,/([0-9]{3})/g,"$&_"),/_$/,"")}}return xo.call(t,n,"$&_")}var Ll=kp(),$p=Ll.custom,Kp=im($p)?$p:null;sm.exports=function e(t,n,i,o){var r=n||{};if(So(r,"quoteStyle")&&r.quoteStyle!=="single"&&r.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(So(r,"maxStringLength")&&(typeof r.maxStringLength=="number"?r.maxStringLength<0&&r.maxStringLength!==1/0:r.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=So(r,"customInspect")?r.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(So(r,"indent")&&r.indent!==null&&r.indent!=="	"&&!(parseInt(r.indent,10)===r.indent&&r.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(So(r,"numericSeparator")&&typeof r.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=r.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return rm(t,r);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var c=String(t);return a?Xp(t,c):c}if(typeof t=="bigint"){var l=String(t)+"n";return a?Xp(t,l):l}var d=typeof r.depth>"u"?5:r.depth;if(typeof i>"u"&&(i=0),i>=d&&d>0&&typeof t=="object")return Bl(t)?"[Array]":"[Object]";var h=iE(r,i);if(typeof o>"u")o=[];else if(om(o,t)>=0)return"[Circular]";function g(S,I,F){if(I&&(o=VT.call(o),o.push(I)),F){var X={depth:r.depth};return So(r,"quoteStyle")&&(X.quoteStyle=r.quoteStyle),e(S,X,i+1,o)}return e(S,r,i+1,o)}if(typeof t=="function"&&!Qp(t)){var C=ZT(t),b=pc(t,g);return"[Function"+(C?": "+C:" (anonymous)")+"]"+(b.length>0?" { "+zi.call(b,", ")+" }":"")}if(im(t)){var w=Zr?xo.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Nl.call(t);return typeof t=="object"&&!Zr?Xs(w):w}if(eE(t)){for(var R="<"+Wp.call(String(t.nodeName)),D=t.attributes||[],M=0;M<D.length;M++)R+=" "+D[M].name+"="+nm(UT(D[M].value),"double",r);return R+=">",t.childNodes&&t.childNodes.length&&(R+="..."),R+="</"+Wp.call(String(t.nodeName))+">",R}if(Bl(t)){if(t.length===0)return"[]";var z=pc(t,g);return h&&!nE(z)?"["+Fl(z,h)+"]":"[ "+zi.call(z,", ")+" ]"}if(GT(t)){var U=pc(t,g);return!("cause"in Error.prototype)&&"cause"in t&&!tm.call(t,"cause")?"{ ["+String(t)+"] "+zi.call(qp.call("[cause]: "+g(t.cause),U),", ")+" }":U.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+zi.call(U,", ")+" }"}if(typeof t=="object"&&s){if(Kp&&typeof t[Kp]=="function"&&Ll)return Ll(t,{depth:d-i});if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(XT(t)){var Y=[];return Gp&&Gp.call(t,function(S,I){Y.push(g(I,t,!0)+" => "+g(S,t))}),Jp("Map",mc.call(t),Y,h)}if(QT(t)){var m=[];return Hp&&Hp.call(t,function(S){m.push(g(S,t))}),Jp("Set",gc.call(t),m,h)}if($T(t))return Ml("WeakMap");if(JT(t))return Ml("WeakSet");if(KT(t))return Ml("WeakRef");if(jT(t))return Xs(g(Number(t)));if(qT(t))return Xs(g(zl.call(t)));if(WT(t))return Xs(zT.call(t));if(HT(t))return Xs(g(String(t)));if(!kT(t)&&!Qp(t)){var Q=pc(t,g),q=Zp?Zp(t)===Object.prototype:t instanceof Object||t.constructor===Object,Z=t instanceof Object?"":"null prototype",H=!q&&vn&&Object(t)===t&&vn in t?kl.call(Ao(t),8,-1):Z?"Object":"",K=q||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",v=K+(H||Z?"["+zi.call(qp.call([],H||[],Z||[]),": ")+"] ":"");return Q.length===0?v+"{}":h?v+"{"+Fl(Q,h)+"}":v+"{ "+zi.call(Q,", ")+" }"}return String(t)};function nm(e,t,n){var i=(n.quoteStyle||t)==="double"?'"':"'";return i+e+i}function UT(e){return xo.call(String(e),/"/g,"&quot;")}function Bl(e){return Ao(e)==="[object Array]"&&(!vn||!(typeof e=="object"&&vn in e))}function kT(e){return Ao(e)==="[object Date]"&&(!vn||!(typeof e=="object"&&vn in e))}function Qp(e){return Ao(e)==="[object RegExp]"&&(!vn||!(typeof e=="object"&&vn in e))}function GT(e){return Ao(e)==="[object Error]"&&(!vn||!(typeof e=="object"&&vn in e))}function HT(e){return Ao(e)==="[object String]"&&(!vn||!(typeof e=="object"&&vn in e))}function jT(e){return Ao(e)==="[object Number]"&&(!vn||!(typeof e=="object"&&vn in e))}function WT(e){return Ao(e)==="[object Boolean]"&&(!vn||!(typeof e=="object"&&vn in e))}function im(e){if(Zr)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Nl)return!1;try{return Nl.call(e),!0}catch{}return!1}function qT(e){if(!e||typeof e!="object"||!zl)return!1;try{return zl.call(e),!0}catch{}return!1}var YT=Object.prototype.hasOwnProperty||function(e){return e in this};function So(e,t){return YT.call(e,t)}function Ao(e){return NT.call(e)}function ZT(e){if(e.name)return e.name;var t=BT.call(LT.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function om(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function XT(e){if(!mc||!e||typeof e!="object")return!1;try{mc.call(e);try{gc.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function $T(e){if(!$s||!e||typeof e!="object")return!1;try{$s.call(e,$s);try{Ks.call(e,Ks)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function KT(e){if(!jp||!e||typeof e!="object")return!1;try{return jp.call(e),!0}catch{}return!1}function QT(e){if(!gc||!e||typeof e!="object")return!1;try{gc.call(e);try{mc.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function JT(e){if(!Ks||!e||typeof e!="object")return!1;try{Ks.call(e,Ks);try{$s.call(e,$s)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function eE(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function rm(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return rm(kl.call(e,0,t.maxStringLength),t)+i}var o=xo.call(xo.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,tE);return nm(o,"single",t)}function tE(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+FT.call(t.toString(16))}function Xs(e){return"Object("+e+")"}function Ml(e){return e+" { ? }"}function Jp(e,t,n,i){var o=i?Fl(n,i):zi.call(n,", ");return e+" ("+t+") {"+o+"}"}function nE(e){for(var t=0;t<e.length;t++)if(om(e[t],`
`)>=0)return!1;return!0}function iE(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=zi.call(Array(e.indent+1)," ");else return null;return{base:n,prev:zi.call(Array(t+1),n)}}function Fl(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+zi.call(e,","+n)+`
`+t.prev}function pc(e,t){var n=Bl(e),i=[];if(n){i.length=e.length;for(var o=0;o<e.length;o++)i[o]=So(e,o)?t(e[o],e):""}var r=typeof Dl=="function"?Dl(e):[],s;if(Zr){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=r[a]}for(var c in e)So(e,c)&&(n&&String(Number(c))===c&&c<e.length||Zr&&s["$"+c]instanceof Symbol||(em.call(/[^\w$]/,c)?i.push(t(c,e)+": "+t(e[c],e)):i.push(c+": "+t(e[c],e))));if(typeof Dl=="function")for(var l=0;l<r.length;l++)tm.call(e,r[l])&&i.push("["+t(r[l])+"]: "+t(e[r[l]],e));return i}});var um=Ft((KD,cm)=>{"use strict";var Gl=dc(),Xr=Up(),oE=am(),rE=Gl("%TypeError%"),yc=Gl("%WeakMap%",!0),_c=Gl("%Map%",!0),sE=Xr("WeakMap.prototype.get",!0),aE=Xr("WeakMap.prototype.set",!0),cE=Xr("WeakMap.prototype.has",!0),uE=Xr("Map.prototype.get",!0),lE=Xr("Map.prototype.set",!0),fE=Xr("Map.prototype.has",!0),Hl=function(e,t){for(var n=e,i;(i=n.next)!==null;n=i)if(i.key===t)return n.next=i.next,i.next=e.next,e.next=i,i},dE=function(e,t){var n=Hl(e,t);return n&&n.value},hE=function(e,t,n){var i=Hl(e,t);i?i.value=n:e.next={key:t,next:e.next,value:n}},pE=function(e,t){return!!Hl(e,t)};cm.exports=function(){var t,n,i,o={assert:function(r){if(!o.has(r))throw new rE("Side channel does not contain "+oE(r))},get:function(r){if(yc&&r&&(typeof r=="object"||typeof r=="function")){if(t)return sE(t,r)}else if(_c){if(n)return uE(n,r)}else if(i)return dE(i,r)},has:function(r){if(yc&&r&&(typeof r=="object"||typeof r=="function")){if(t)return cE(t,r)}else if(_c){if(n)return fE(n,r)}else if(i)return pE(i,r);return!1},set:function(r,s){yc&&r&&(typeof r=="object"||typeof r=="function")?(t||(t=new yc),aE(t,r,s)):_c?(n||(n=new _c),lE(n,r,s)):(i||(i={key:{},next:null}),hE(i,r,s))}};return o}});var vc=Ft((QD,lm)=>{"use strict";var mE=String.prototype.replace,gE=/%20/g,jl={RFC1738:"RFC1738",RFC3986:"RFC3986"};lm.exports={default:jl.RFC3986,formatters:{RFC1738:function(e){return mE.call(e,gE,"+")},RFC3986:function(e){return String(e)}},RFC1738:jl.RFC1738,RFC3986:jl.RFC3986}});var ql=Ft((JD,dm)=>{"use strict";var yE=vc(),Wl=Object.prototype.hasOwnProperty,tr=Array.isArray,Ni=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),_E=function(t){for(;t.length>1;){var n=t.pop(),i=n.obj[n.prop];if(tr(i)){for(var o=[],r=0;r<i.length;++r)typeof i[r]<"u"&&o.push(i[r]);n.obj[n.prop]=o}}},fm=function(t,n){for(var i=n&&n.plainObjects?Object.create(null):{},o=0;o<t.length;++o)typeof t[o]<"u"&&(i[o]=t[o]);return i},vE=function e(t,n,i){if(!n)return t;if(typeof n!="object"){if(tr(t))t.push(n);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!Wl.call(Object.prototype,n))&&(t[n]=!0);else return[t,n];return t}if(!t||typeof t!="object")return[t].concat(n);var o=t;return tr(t)&&!tr(n)&&(o=fm(t,i)),tr(t)&&tr(n)?(n.forEach(function(r,s){if(Wl.call(t,s)){var a=t[s];a&&typeof a=="object"&&r&&typeof r=="object"?t[s]=e(a,r,i):t.push(r)}else t[s]=r}),t):Object.keys(n).reduce(function(r,s){var a=n[s];return Wl.call(r,s)?r[s]=e(r[s],a,i):r[s]=a,r},o)},CE=function(t,n){return Object.keys(n).reduce(function(i,o){return i[o]=n[o],i},t)},bE=function(e,t,n){var i=e.replace(/\+/g," ");if(n==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},TE=function(t,n,i,o,r){if(t.length===0)return t;var s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),i==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var a="",c=0;c<s.length;++c){var l=s.charCodeAt(c);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||r===yE.RFC1738&&(l===40||l===41)){a+=s.charAt(c);continue}if(l<128){a=a+Ni[l];continue}if(l<2048){a=a+(Ni[192|l>>6]+Ni[128|l&63]);continue}if(l<55296||l>=57344){a=a+(Ni[224|l>>12]+Ni[128|l>>6&63]+Ni[128|l&63]);continue}c+=1,l=65536+((l&1023)<<10|s.charCodeAt(c)&1023),a+=Ni[240|l>>18]+Ni[128|l>>12&63]+Ni[128|l>>6&63]+Ni[128|l&63]}return a},EE=function(t){for(var n=[{obj:{o:t},prop:"o"}],i=[],o=0;o<n.length;++o)for(var r=n[o],s=r.obj[r.prop],a=Object.keys(s),c=0;c<a.length;++c){var l=a[c],d=s[l];typeof d=="object"&&d!==null&&i.indexOf(d)===-1&&(n.push({obj:s,prop:l}),i.push(d))}return _E(n),t},wE=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},SE=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},xE=function(t,n){return[].concat(t,n)},AE=function(t,n){if(tr(t)){for(var i=[],o=0;o<t.length;o+=1)i.push(n(t[o]));return i}return n(t)};dm.exports={arrayToObject:fm,assign:CE,combine:xE,compact:EE,decode:bE,encode:TE,isBuffer:SE,isRegExp:wE,maybeMap:AE,merge:vE}});var _m=Ft((eM,ym)=>{"use strict";var mm=um(),Zl=ql(),Qs=vc(),RE=Object.prototype.hasOwnProperty,hm={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,n){return t+"["+n+"]"},repeat:function(t){return t}},eo=Array.isArray,PE=String.prototype.split,OE=Array.prototype.push,gm=function(e,t){OE.apply(e,eo(t)?t:[t])},IE=Date.prototype.toISOString,pm=Qs.default,ln={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Zl.encode,encodeValuesOnly:!1,format:pm,formatter:Qs.formatters[pm],indices:!1,serializeDate:function(t){return IE.call(t)},skipNulls:!1,strictNullHandling:!1},DE=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Yl={},ME=function e(t,n,i,o,r,s,a,c,l,d,h,g,C,b,w,R){for(var D=t,M=R,z=0,U=!1;(M=M.get(Yl))!==void 0&&!U;){var Y=M.get(t);if(z+=1,typeof Y<"u"){if(Y===z)throw new RangeError("Cyclic object value");U=!0}typeof M.get(Yl)>"u"&&(z=0)}if(typeof c=="function"?D=c(n,D):D instanceof Date?D=h(D):i==="comma"&&eo(D)&&(D=Zl.maybeMap(D,function(le){return le instanceof Date?h(le):le})),D===null){if(r)return a&&!b?a(n,ln.encoder,w,"key",g):n;D=""}if(DE(D)||Zl.isBuffer(D)){if(a){var m=b?n:a(n,ln.encoder,w,"key",g);if(i==="comma"&&b){for(var Q=PE.call(String(D),","),q="",Z=0;Z<Q.length;++Z)q+=(Z===0?"":",")+C(a(Q[Z],ln.encoder,w,"value",g));return[C(m)+(o&&eo(D)&&Q.length===1?"[]":"")+"="+q]}return[C(m)+"="+C(a(D,ln.encoder,w,"value",g))]}return[C(n)+"="+C(String(D))]}var H=[];if(typeof D>"u")return H;var K;if(i==="comma"&&eo(D))K=[{value:D.length>0?D.join(",")||null:void 0}];else if(eo(c))K=c;else{var v=Object.keys(D);K=l?v.sort(l):v}for(var S=o&&eo(D)&&D.length===1?n+"[]":n,I=0;I<K.length;++I){var F=K[I],X=typeof F=="object"&&typeof F.value<"u"?F.value:D[F];if(!(s&&X===null)){var ie=eo(D)?typeof i=="function"?i(S,F):S:S+(d?"."+F:"["+F+"]");R.set(t,z);var j=mm();j.set(Yl,R),gm(H,e(X,ie,i,o,r,s,a,c,l,d,h,g,C,b,w,j))}}return H},zE=function(t){if(!t)return ln;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=t.charset||ln.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Qs.default;if(typeof t.format<"u"){if(!RE.call(Qs.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var o=Qs.formatters[i],r=ln.filter;return(typeof t.filter=="function"||eo(t.filter))&&(r=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:ln.addQueryPrefix,allowDots:typeof t.allowDots>"u"?ln.allowDots:!!t.allowDots,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ln.charsetSentinel,delimiter:typeof t.delimiter>"u"?ln.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:ln.encode,encoder:typeof t.encoder=="function"?t.encoder:ln.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:ln.encodeValuesOnly,filter:r,format:i,formatter:o,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:ln.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:ln.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ln.strictNullHandling}};ym.exports=function(e,t){var n=e,i=zE(t),o,r;typeof i.filter=="function"?(r=i.filter,n=r("",n)):eo(i.filter)&&(r=i.filter,o=r);var s=[];if(typeof n!="object"||n===null)return"";var a;t&&t.arrayFormat in hm?a=t.arrayFormat:t&&"indices"in t?a=t.indices?"indices":"repeat":a="indices";var c=hm[a];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=c==="comma"&&t&&t.commaRoundTrip;o||(o=Object.keys(n)),i.sort&&o.sort(i.sort);for(var d=mm(),h=0;h<o.length;++h){var g=o[h];i.skipNulls&&n[g]===null||gm(s,ME(n[g],g,c,l,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,d))}var C=s.join(i.delimiter),b=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),C.length>0?b+C:""}});var bm=Ft((tM,Cm)=>{"use strict";var $r=ql(),Xl=Object.prototype.hasOwnProperty,NE=Array.isArray,on={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:$r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},LE=function(e){return e.replace(/&#(\d+);/g,function(t,n){return String.fromCharCode(parseInt(n,10))})},vm=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},BE="utf8=%26%2310003%3B",FE="utf8=%E2%9C%93",VE=function(t,n){var i={},o=n.ignoreQueryPrefix?t.replace(/^\?/,""):t,r=n.parameterLimit===1/0?void 0:n.parameterLimit,s=o.split(n.delimiter,r),a=-1,c,l=n.charset;if(n.charsetSentinel)for(c=0;c<s.length;++c)s[c].indexOf("utf8=")===0&&(s[c]===FE?l="utf-8":s[c]===BE&&(l="iso-8859-1"),a=c,c=s.length);for(c=0;c<s.length;++c)if(c!==a){var d=s[c],h=d.indexOf("]="),g=h===-1?d.indexOf("="):h+1,C,b;g===-1?(C=n.decoder(d,on.decoder,l,"key"),b=n.strictNullHandling?null:""):(C=n.decoder(d.slice(0,g),on.decoder,l,"key"),b=$r.maybeMap(vm(d.slice(g+1),n),function(w){return n.decoder(w,on.decoder,l,"value")})),b&&n.interpretNumericEntities&&l==="iso-8859-1"&&(b=LE(b)),d.indexOf("[]=")>-1&&(b=NE(b)?[b]:b),Xl.call(i,C)?i[C]=$r.combine(i[C],b):i[C]=b}return i},UE=function(e,t,n,i){for(var o=i?t:vm(t,n),r=e.length-1;r>=0;--r){var s,a=e[r];if(a==="[]"&&n.parseArrays)s=[].concat(o);else{s=n.plainObjects?Object.create(null):{};var c=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,l=parseInt(c,10);!n.parseArrays&&c===""?s={0:o}:!isNaN(l)&&a!==c&&String(l)===c&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(s=[],s[l]=o):c!=="__proto__"&&(s[c]=o)}o=s}return o},kE=function(t,n,i,o){if(t){var r=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,c=i.depth>0&&s.exec(r),l=c?r.slice(0,c.index):r,d=[];if(l){if(!i.plainObjects&&Xl.call(Object.prototype,l)&&!i.allowPrototypes)return;d.push(l)}for(var h=0;i.depth>0&&(c=a.exec(r))!==null&&h<i.depth;){if(h+=1,!i.plainObjects&&Xl.call(Object.prototype,c[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(c[1])}return c&&d.push("["+r.slice(c.index)+"]"),UE(d,n,i,o)}},GE=function(t){if(!t)return on;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof t.charset>"u"?on.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?on.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:on.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:on.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:on.arrayLimit,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:on.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:on.comma,decoder:typeof t.decoder=="function"?t.decoder:on.decoder,delimiter:typeof t.delimiter=="string"||$r.isRegExp(t.delimiter)?t.delimiter:on.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:on.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:on.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:on.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:on.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:on.strictNullHandling}};Cm.exports=function(e,t){var n=GE(t);if(e===""||e===null||typeof e>"u")return n.plainObjects?Object.create(null):{};for(var i=typeof e=="string"?VE(e,n):e,o=n.plainObjects?Object.create(null):{},r=Object.keys(i),s=0;s<r.length;++s){var a=r[s],c=kE(a,i[a],n,typeof e=="string");o=$r.merge(o,c,n)}return n.allowSparse===!0?o:$r.compact(o)}});var Em=Ft((nM,Tm)=>{"use strict";var HE=_m(),jE=bm(),WE=vc();Tm.exports={formats:WE,parse:jE,stringify:HE}});var Gm=Ft((km,Ac)=>{/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(e,t){"use strict";typeof Ac=="object"&&typeof Ac.exports=="object"?Ac.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(e)})(typeof window<"u"?window:km,function(e,t){"use strict";var n=[],i=Object.getPrototypeOf,o=n.slice,r=n.flat?function(u){return n.flat.call(u)}:function(u){return n.concat.apply([],u)},s=n.push,a=n.indexOf,c={},l=c.toString,d=c.hasOwnProperty,h=d.toString,g=h.call(Object),C={},b=function(f){return typeof f=="function"&&typeof f.nodeType!="number"&&typeof f.item!="function"},w=function(f){return f!=null&&f===f.window},R=e.document,D={type:!0,src:!0,nonce:!0,noModule:!0};function M(u,f,_){_=_||R;var T,x,A=_.createElement("script");if(A.text=u,f)for(T in D)x=f[T]||f.getAttribute&&f.getAttribute(T),x&&A.setAttribute(T,x);_.head.appendChild(A).parentNode.removeChild(A)}function z(u){return u==null?u+"":typeof u=="object"||typeof u=="function"?c[l.call(u)]||"object":typeof u}var U="3.7.0",Y=/HTML$/i,m=function(u,f){return new m.fn.init(u,f)};m.fn=m.prototype={jquery:U,constructor:m,length:0,toArray:function(){return o.call(this)},get:function(u){return u==null?o.call(this):u<0?this[u+this.length]:this[u]},pushStack:function(u){var f=m.merge(this.constructor(),u);return f.prevObject=this,f},each:function(u){return m.each(this,u)},map:function(u){return this.pushStack(m.map(this,function(f,_){return u.call(f,_,f)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(m.grep(this,function(u,f){return(f+1)%2}))},odd:function(){return this.pushStack(m.grep(this,function(u,f){return f%2}))},eq:function(u){var f=this.length,_=+u+(u<0?f:0);return this.pushStack(_>=0&&_<f?[this[_]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},m.extend=m.fn.extend=function(){var u,f,_,T,x,A,P=arguments[0]||{},V=1,B=arguments.length,W=!1;for(typeof P=="boolean"&&(W=P,P=arguments[V]||{},V++),typeof P!="object"&&!b(P)&&(P={}),V===B&&(P=this,V--);V<B;V++)if((u=arguments[V])!=null)for(f in u)T=u[f],!(f==="__proto__"||P===T)&&(W&&T&&(m.isPlainObject(T)||(x=Array.isArray(T)))?(_=P[f],x&&!Array.isArray(_)?A=[]:!x&&!m.isPlainObject(_)?A={}:A=_,x=!1,P[f]=m.extend(W,A,T)):T!==void 0&&(P[f]=T));return P},m.extend({expando:"jQuery"+(U+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isPlainObject:function(u){var f,_;return!u||l.call(u)!=="[object Object]"?!1:(f=i(u),f?(_=d.call(f,"constructor")&&f.constructor,typeof _=="function"&&h.call(_)===g):!0)},isEmptyObject:function(u){var f;for(f in u)return!1;return!0},globalEval:function(u,f,_){M(u,{nonce:f&&f.nonce},_)},each:function(u,f){var _,T=0;if(Q(u))for(_=u.length;T<_&&f.call(u[T],T,u[T])!==!1;T++);else for(T in u)if(f.call(u[T],T,u[T])===!1)break;return u},text:function(u){var f,_="",T=0,x=u.nodeType;if(x){if(x===1||x===9||x===11)return u.textContent;if(x===3||x===4)return u.nodeValue}else for(;f=u[T++];)_+=m.text(f);return _},makeArray:function(u,f){var _=f||[];return u!=null&&(Q(Object(u))?m.merge(_,typeof u=="string"?[u]:u):s.call(_,u)),_},inArray:function(u,f,_){return f==null?-1:a.call(f,u,_)},isXMLDoc:function(u){var f=u&&u.namespaceURI,_=u&&(u.ownerDocument||u).documentElement;return!Y.test(f||_&&_.nodeName||"HTML")},merge:function(u,f){for(var _=+f.length,T=0,x=u.length;T<_;T++)u[x++]=f[T];return u.length=x,u},grep:function(u,f,_){for(var T,x=[],A=0,P=u.length,V=!_;A<P;A++)T=!f(u[A],A),T!==V&&x.push(u[A]);return x},map:function(u,f,_){var T,x,A=0,P=[];if(Q(u))for(T=u.length;A<T;A++)x=f(u[A],A,_),x!=null&&P.push(x);else for(A in u)x=f(u[A],A,_),x!=null&&P.push(x);return r(P)},guid:1,support:C}),typeof Symbol=="function"&&(m.fn[Symbol.iterator]=n[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(u,f){c["[object "+f+"]"]=f.toLowerCase()});function Q(u){var f=!!u&&"length"in u&&u.length,_=z(u);return b(u)||w(u)?!1:_==="array"||f===0||typeof f=="number"&&f>0&&f-1 in u}function q(u,f){return u.nodeName&&u.nodeName.toLowerCase()===f.toLowerCase()}var Z=n.pop,H=n.sort,K=n.splice,v="[\\x20\\t\\r\\n\\f]",S=new RegExp("^"+v+"+|((?:^|[^\\\\])(?:\\\\.)*)"+v+"+$","g");m.contains=function(u,f){var _=f&&f.parentNode;return u===_||!!(_&&_.nodeType===1&&(u.contains?u.contains(_):u.compareDocumentPosition&&u.compareDocumentPosition(_)&16))};var I=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function F(u,f){return f?u==="\0"?"\uFFFD":u.slice(0,-1)+"\\"+u.charCodeAt(u.length-1).toString(16)+" ":"\\"+u}m.escapeSelector=function(u){return(u+"").replace(I,F)};var X=R,ie=s;(function(){var u,f,_,T,x,A=ie,P,V,B,W,ne,se=m.expando,J=0,me=0,He=Ga(),st=Ga(),Ze=Ga(),un=Ga(),Kt=function(N,G){return N===G&&(x=!0),0},Ai="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ri="(?:\\\\[\\da-fA-F]{1,6}"+v+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",tt="\\["+v+"*("+Ri+")(?:"+v+"*([*^$|!~]?=)"+v+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Ri+"))|)"+v+"*\\]",$o=":("+Ri+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+tt+")*)|.*)\\)|)",ct=new RegExp(v+"+","g"),Gt=new RegExp("^"+v+"*,"+v+"*"),Ns=new RegExp("^"+v+"*([>+~]|"+v+")"+v+"*"),nl=new RegExp(v+"|>"),Pi=new RegExp($o),Ls=new RegExp("^"+Ri+"$"),Oi={ID:new RegExp("^#("+Ri+")"),CLASS:new RegExp("^\\.("+Ri+")"),TAG:new RegExp("^("+Ri+"|[*])"),ATTR:new RegExp("^"+tt),PSEUDO:new RegExp("^"+$o),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+v+"*(even|odd|(([+-]|)(\\d*)n|)"+v+"*(?:([+-]|)"+v+"*(\\d+)|))"+v+"*\\)|)","i"),bool:new RegExp("^(?:"+Ai+")$","i"),needsContext:new RegExp("^"+v+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+v+"*((?:-\\d)?\\d*)"+v+"*\\)|)(?=[^-]|$)","i")},vo=/^(?:input|select|textarea|button)$/i,Co=/^h\d$/i,Qn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,il=/[+~]/,Ki=new RegExp("\\\\[\\da-fA-F]{1,6}"+v+"?|\\\\([^\\r\\n\\f])","g"),Qi=function(N,G){var $="0x"+N.slice(1)-65536;return G||($<0?String.fromCharCode($+65536):String.fromCharCode($>>10|55296,$&1023|56320))},Jb=function(){bo()},e1=Wa(function(N){return N.disabled===!0&&q(N,"fieldset")},{dir:"parentNode",next:"legend"});function t1(){try{return P.activeElement}catch{}}try{A.apply(n=o.call(X.childNodes),X.childNodes),n[X.childNodes.length].nodeType}catch{A={apply:function(G,$){ie.apply(G,o.call($))},call:function(G){ie.apply(G,o.call(arguments,1))}}}function bt(N,G,$,ee){var re,Te,Ae,ze,Re,Qe,Ge,je=G&&G.ownerDocument,Je=G?G.nodeType:9;if($=$||[],typeof N!="string"||!N||Je!==1&&Je!==9&&Je!==11)return $;if(!ee&&(bo(G),G=G||P,B)){if(Je!==11&&(Re=Qn.exec(N)))if(re=Re[1]){if(Je===9)if(Ae=G.getElementById(re)){if(Ae.id===re)return A.call($,Ae),$}else return $;else if(je&&(Ae=je.getElementById(re))&&bt.contains(G,Ae)&&Ae.id===re)return A.call($,Ae),$}else{if(Re[2])return A.apply($,G.getElementsByTagName(N)),$;if((re=Re[3])&&G.getElementsByClassName)return A.apply($,G.getElementsByClassName(re)),$}if(!un[N+" "]&&(!W||!W.test(N))){if(Ge=N,je=G,Je===1&&(nl.test(N)||Ns.test(N))){for(je=il.test(N)&&ol(G.parentNode)||G,(je!=G||!C.scope)&&((ze=G.getAttribute("id"))?ze=m.escapeSelector(ze):G.setAttribute("id",ze=se)),Qe=Ha(N),Te=Qe.length;Te--;)Qe[Te]=(ze?"#"+ze:":scope")+" "+ja(Qe[Te]);Ge=Qe.join(",")}try{return A.apply($,je.querySelectorAll(Ge)),$}catch{un(N,!0)}finally{ze===se&&G.removeAttribute("id")}}}return Dh(N.replace(S,"$1"),G,$,ee)}function Ga(){var N=[];function G($,ee){return N.push($+" ")>f.cacheLength&&delete G[N.shift()],G[$+" "]=ee}return G}function hi(N){return N[se]=!0,N}function Nr(N){var G=P.createElement("fieldset");try{return!!N(G)}catch{return!1}finally{G.parentNode&&G.parentNode.removeChild(G),G=null}}function n1(N){return function(G){return q(G,"input")&&G.type===N}}function i1(N){return function(G){return(q(G,"input")||q(G,"button"))&&G.type===N}}function Oh(N){return function(G){return"form"in G?G.parentNode&&G.disabled===!1?"label"in G?"label"in G.parentNode?G.parentNode.disabled===N:G.disabled===N:G.isDisabled===N||G.isDisabled!==!N&&e1(G)===N:G.disabled===N:"label"in G?G.disabled===N:!1}}function Ko(N){return hi(function(G){return G=+G,hi(function($,ee){for(var re,Te=N([],$.length,G),Ae=Te.length;Ae--;)$[re=Te[Ae]]&&($[re]=!(ee[re]=$[re]))})})}function ol(N){return N&&typeof N.getElementsByTagName<"u"&&N}function bo(N){var G,$=N?N.ownerDocument||N:X;return $==P||$.nodeType!==9||!$.documentElement||(P=$,V=P.documentElement,B=!m.isXMLDoc(P),ne=V.matches||V.webkitMatchesSelector||V.msMatchesSelector,X!=P&&(G=P.defaultView)&&G.top!==G&&G.addEventListener("unload",Jb),C.getById=Nr(function(ee){return V.appendChild(ee).id=m.expando,!P.getElementsByName||!P.getElementsByName(m.expando).length}),C.disconnectedMatch=Nr(function(ee){return ne.call(ee,"*")}),C.scope=Nr(function(){return P.querySelectorAll(":scope")}),C.cssHas=Nr(function(){try{return P.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),C.getById?(f.filter.ID=function(ee){var re=ee.replace(Ki,Qi);return function(Te){return Te.getAttribute("id")===re}},f.find.ID=function(ee,re){if(typeof re.getElementById<"u"&&B){var Te=re.getElementById(ee);return Te?[Te]:[]}}):(f.filter.ID=function(ee){var re=ee.replace(Ki,Qi);return function(Te){var Ae=typeof Te.getAttributeNode<"u"&&Te.getAttributeNode("id");return Ae&&Ae.value===re}},f.find.ID=function(ee,re){if(typeof re.getElementById<"u"&&B){var Te,Ae,ze,Re=re.getElementById(ee);if(Re){if(Te=Re.getAttributeNode("id"),Te&&Te.value===ee)return[Re];for(ze=re.getElementsByName(ee),Ae=0;Re=ze[Ae++];)if(Te=Re.getAttributeNode("id"),Te&&Te.value===ee)return[Re]}return[]}}),f.find.TAG=function(ee,re){return typeof re.getElementsByTagName<"u"?re.getElementsByTagName(ee):re.querySelectorAll(ee)},f.find.CLASS=function(ee,re){if(typeof re.getElementsByClassName<"u"&&B)return re.getElementsByClassName(ee)},W=[],Nr(function(ee){var re;V.appendChild(ee).innerHTML="<a id='"+se+"' href='' disabled='disabled'></a><select id='"+se+"-\r\\' disabled='disabled'><option selected=''></option></select>",ee.querySelectorAll("[selected]").length||W.push("\\["+v+"*(?:value|"+Ai+")"),ee.querySelectorAll("[id~="+se+"-]").length||W.push("~="),ee.querySelectorAll("a#"+se+"+*").length||W.push(".#.+[+~]"),ee.querySelectorAll(":checked").length||W.push(":checked"),re=P.createElement("input"),re.setAttribute("type","hidden"),ee.appendChild(re).setAttribute("name","D"),V.appendChild(ee).disabled=!0,ee.querySelectorAll(":disabled").length!==2&&W.push(":enabled",":disabled"),re=P.createElement("input"),re.setAttribute("name",""),ee.appendChild(re),ee.querySelectorAll("[name='']").length||W.push("\\["+v+"*name"+v+"*="+v+`*(?:''|"")`)}),C.cssHas||W.push(":has"),W=W.length&&new RegExp(W.join("|")),Kt=function(ee,re){if(ee===re)return x=!0,0;var Te=!ee.compareDocumentPosition-!re.compareDocumentPosition;return Te||(Te=(ee.ownerDocument||ee)==(re.ownerDocument||re)?ee.compareDocumentPosition(re):1,Te&1||!C.sortDetached&&re.compareDocumentPosition(ee)===Te?ee===P||ee.ownerDocument==X&&bt.contains(X,ee)?-1:re===P||re.ownerDocument==X&&bt.contains(X,re)?1:T?a.call(T,ee)-a.call(T,re):0:Te&4?-1:1)}),P}bt.matches=function(N,G){return bt(N,null,null,G)},bt.matchesSelector=function(N,G){if(bo(N),B&&!un[G+" "]&&(!W||!W.test(G)))try{var $=ne.call(N,G);if($||C.disconnectedMatch||N.document&&N.document.nodeType!==11)return $}catch{un(G,!0)}return bt(G,P,null,[N]).length>0},bt.contains=function(N,G){return(N.ownerDocument||N)!=P&&bo(N),m.contains(N,G)},bt.attr=function(N,G){(N.ownerDocument||N)!=P&&bo(N);var $=f.attrHandle[G.toLowerCase()],ee=$&&d.call(f.attrHandle,G.toLowerCase())?$(N,G,!B):void 0;return ee!==void 0?ee:N.getAttribute(G)},bt.error=function(N){throw new Error("Syntax error, unrecognized expression: "+N)},m.uniqueSort=function(N){var G,$=[],ee=0,re=0;if(x=!C.sortStable,T=!C.sortStable&&o.call(N,0),H.call(N,Kt),x){for(;G=N[re++];)G===N[re]&&(ee=$.push(re));for(;ee--;)K.call(N,$[ee],1)}return T=null,N},m.fn.uniqueSort=function(){return this.pushStack(m.uniqueSort(o.apply(this)))},f=m.expr={cacheLength:50,createPseudo:hi,match:Oi,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(N){return N[1]=N[1].replace(Ki,Qi),N[3]=(N[3]||N[4]||N[5]||"").replace(Ki,Qi),N[2]==="~="&&(N[3]=" "+N[3]+" "),N.slice(0,4)},CHILD:function(N){return N[1]=N[1].toLowerCase(),N[1].slice(0,3)==="nth"?(N[3]||bt.error(N[0]),N[4]=+(N[4]?N[5]+(N[6]||1):2*(N[3]==="even"||N[3]==="odd")),N[5]=+(N[7]+N[8]||N[3]==="odd")):N[3]&&bt.error(N[0]),N},PSEUDO:function(N){var G,$=!N[6]&&N[2];return Oi.CHILD.test(N[0])?null:(N[3]?N[2]=N[4]||N[5]||"":$&&Pi.test($)&&(G=Ha($,!0))&&(G=$.indexOf(")",$.length-G)-$.length)&&(N[0]=N[0].slice(0,G),N[2]=$.slice(0,G)),N.slice(0,3))}},filter:{TAG:function(N){var G=N.replace(Ki,Qi).toLowerCase();return N==="*"?function(){return!0}:function($){return q($,G)}},CLASS:function(N){var G=He[N+" "];return G||(G=new RegExp("(^|"+v+")"+N+"("+v+"|$)"))&&He(N,function($){return G.test(typeof $.className=="string"&&$.className||typeof $.getAttribute<"u"&&$.getAttribute("class")||"")})},ATTR:function(N,G,$){return function(ee){var re=bt.attr(ee,N);return re==null?G==="!=":G?(re+="",G==="="?re===$:G==="!="?re!==$:G==="^="?$&&re.indexOf($)===0:G==="*="?$&&re.indexOf($)>-1:G==="$="?$&&re.slice(-$.length)===$:G==="~="?(" "+re.replace(ct," ")+" ").indexOf($)>-1:G==="|="?re===$||re.slice(0,$.length+1)===$+"-":!1):!0}},CHILD:function(N,G,$,ee,re){var Te=N.slice(0,3)!=="nth",Ae=N.slice(-4)!=="last",ze=G==="of-type";return ee===1&&re===0?function(Re){return!!Re.parentNode}:function(Re,Qe,Ge){var je,Je,Fe,St,Bn,yn=Te!==Ae?"nextSibling":"previousSibling",Jn=Re.parentNode,Ii=ze&&Re.nodeName.toLowerCase(),Lr=!Ge&&!ze,An=!1;if(Jn){if(Te){for(;yn;){for(Fe=Re;Fe=Fe[yn];)if(ze?q(Fe,Ii):Fe.nodeType===1)return!1;Bn=yn=N==="only"&&!Bn&&"nextSibling"}return!0}if(Bn=[Ae?Jn.firstChild:Jn.lastChild],Ae&&Lr){for(Je=Jn[se]||(Jn[se]={}),je=Je[N]||[],St=je[0]===J&&je[1],An=St&&je[2],Fe=St&&Jn.childNodes[St];Fe=++St&&Fe&&Fe[yn]||(An=St=0)||Bn.pop();)if(Fe.nodeType===1&&++An&&Fe===Re){Je[N]=[J,St,An];break}}else if(Lr&&(Je=Re[se]||(Re[se]={}),je=Je[N]||[],St=je[0]===J&&je[1],An=St),An===!1)for(;(Fe=++St&&Fe&&Fe[yn]||(An=St=0)||Bn.pop())&&!((ze?q(Fe,Ii):Fe.nodeType===1)&&++An&&(Lr&&(Je=Fe[se]||(Fe[se]={}),Je[N]=[J,An]),Fe===Re)););return An-=re,An===ee||An%ee===0&&An/ee>=0}}},PSEUDO:function(N,G){var $,ee=f.pseudos[N]||f.setFilters[N.toLowerCase()]||bt.error("unsupported pseudo: "+N);return ee[se]?ee(G):ee.length>1?($=[N,N,"",G],f.setFilters.hasOwnProperty(N.toLowerCase())?hi(function(re,Te){for(var Ae,ze=ee(re,G),Re=ze.length;Re--;)Ae=a.call(re,ze[Re]),re[Ae]=!(Te[Ae]=ze[Re])}):function(re){return ee(re,0,$)}):ee}},pseudos:{not:hi(function(N){var G=[],$=[],ee=cl(N.replace(S,"$1"));return ee[se]?hi(function(re,Te,Ae,ze){for(var Re,Qe=ee(re,null,ze,[]),Ge=re.length;Ge--;)(Re=Qe[Ge])&&(re[Ge]=!(Te[Ge]=Re))}):function(re,Te,Ae){return G[0]=re,ee(G,null,Ae,$),G[0]=null,!$.pop()}}),has:hi(function(N){return function(G){return bt(N,G).length>0}}),contains:hi(function(N){return N=N.replace(Ki,Qi),function(G){return(G.textContent||m.text(G)).indexOf(N)>-1}}),lang:hi(function(N){return Ls.test(N||"")||bt.error("unsupported lang: "+N),N=N.replace(Ki,Qi).toLowerCase(),function(G){var $;do if($=B?G.lang:G.getAttribute("xml:lang")||G.getAttribute("lang"))return $=$.toLowerCase(),$===N||$.indexOf(N+"-")===0;while((G=G.parentNode)&&G.nodeType===1);return!1}}),target:function(N){var G=e.location&&e.location.hash;return G&&G.slice(1)===N.id},root:function(N){return N===V},focus:function(N){return N===t1()&&P.hasFocus()&&!!(N.type||N.href||~N.tabIndex)},enabled:Oh(!1),disabled:Oh(!0),checked:function(N){return q(N,"input")&&!!N.checked||q(N,"option")&&!!N.selected},selected:function(N){return N.parentNode&&N.parentNode.selectedIndex,N.selected===!0},empty:function(N){for(N=N.firstChild;N;N=N.nextSibling)if(N.nodeType<6)return!1;return!0},parent:function(N){return!f.pseudos.empty(N)},header:function(N){return Co.test(N.nodeName)},input:function(N){return vo.test(N.nodeName)},button:function(N){return q(N,"input")&&N.type==="button"||q(N,"button")},text:function(N){var G;return q(N,"input")&&N.type==="text"&&((G=N.getAttribute("type"))==null||G.toLowerCase()==="text")},first:Ko(function(){return[0]}),last:Ko(function(N,G){return[G-1]}),eq:Ko(function(N,G,$){return[$<0?$+G:$]}),even:Ko(function(N,G){for(var $=0;$<G;$+=2)N.push($);return N}),odd:Ko(function(N,G){for(var $=1;$<G;$+=2)N.push($);return N}),lt:Ko(function(N,G,$){var ee;for($<0?ee=$+G:$>G?ee=G:ee=$;--ee>=0;)N.push(ee);return N}),gt:Ko(function(N,G,$){for(var ee=$<0?$+G:$;++ee<G;)N.push(ee);return N})}},f.pseudos.nth=f.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})f.pseudos[u]=n1(u);for(u in{submit:!0,reset:!0})f.pseudos[u]=i1(u);function Ih(){}Ih.prototype=f.filters=f.pseudos,f.setFilters=new Ih;function Ha(N,G){var $,ee,re,Te,Ae,ze,Re,Qe=st[N+" "];if(Qe)return G?0:Qe.slice(0);for(Ae=N,ze=[],Re=f.preFilter;Ae;){(!$||(ee=Gt.exec(Ae)))&&(ee&&(Ae=Ae.slice(ee[0].length)||Ae),ze.push(re=[])),$=!1,(ee=Ns.exec(Ae))&&($=ee.shift(),re.push({value:$,type:ee[0].replace(S," ")}),Ae=Ae.slice($.length));for(Te in f.filter)(ee=Oi[Te].exec(Ae))&&(!Re[Te]||(ee=Re[Te](ee)))&&($=ee.shift(),re.push({value:$,type:Te,matches:ee}),Ae=Ae.slice($.length));if(!$)break}return G?Ae.length:Ae?bt.error(N):st(N,ze).slice(0)}function ja(N){for(var G=0,$=N.length,ee="";G<$;G++)ee+=N[G].value;return ee}function Wa(N,G,$){var ee=G.dir,re=G.next,Te=re||ee,Ae=$&&Te==="parentNode",ze=me++;return G.first?function(Re,Qe,Ge){for(;Re=Re[ee];)if(Re.nodeType===1||Ae)return N(Re,Qe,Ge);return!1}:function(Re,Qe,Ge){var je,Je,Fe=[J,ze];if(Ge){for(;Re=Re[ee];)if((Re.nodeType===1||Ae)&&N(Re,Qe,Ge))return!0}else for(;Re=Re[ee];)if(Re.nodeType===1||Ae)if(Je=Re[se]||(Re[se]={}),re&&q(Re,re))Re=Re[ee]||Re;else{if((je=Je[Te])&&je[0]===J&&je[1]===ze)return Fe[2]=je[2];if(Je[Te]=Fe,Fe[2]=N(Re,Qe,Ge))return!0}return!1}}function rl(N){return N.length>1?function(G,$,ee){for(var re=N.length;re--;)if(!N[re](G,$,ee))return!1;return!0}:N[0]}function o1(N,G,$){for(var ee=0,re=G.length;ee<re;ee++)bt(N,G[ee],$);return $}function qa(N,G,$,ee,re){for(var Te,Ae=[],ze=0,Re=N.length,Qe=G!=null;ze<Re;ze++)(Te=N[ze])&&(!$||$(Te,ee,re))&&(Ae.push(Te),Qe&&G.push(ze));return Ae}function sl(N,G,$,ee,re,Te){return ee&&!ee[se]&&(ee=sl(ee)),re&&!re[se]&&(re=sl(re,Te)),hi(function(Ae,ze,Re,Qe){var Ge,je,Je,Fe,St=[],Bn=[],yn=ze.length,Jn=Ae||o1(G||"*",Re.nodeType?[Re]:Re,[]),Ii=N&&(Ae||!G)?qa(Jn,St,N,Re,Qe):Jn;if($?(Fe=re||(Ae?N:yn||ee)?[]:ze,$(Ii,Fe,Re,Qe)):Fe=Ii,ee)for(Ge=qa(Fe,Bn),ee(Ge,[],Re,Qe),je=Ge.length;je--;)(Je=Ge[je])&&(Fe[Bn[je]]=!(Ii[Bn[je]]=Je));if(Ae){if(re||N){if(re){for(Ge=[],je=Fe.length;je--;)(Je=Fe[je])&&Ge.push(Ii[je]=Je);re(null,Fe=[],Ge,Qe)}for(je=Fe.length;je--;)(Je=Fe[je])&&(Ge=re?a.call(Ae,Je):St[je])>-1&&(Ae[Ge]=!(ze[Ge]=Je))}}else Fe=qa(Fe===ze?Fe.splice(yn,Fe.length):Fe),re?re(null,ze,Fe,Qe):A.apply(ze,Fe)})}function al(N){for(var G,$,ee,re=N.length,Te=f.relative[N[0].type],Ae=Te||f.relative[" "],ze=Te?1:0,Re=Wa(function(je){return je===G},Ae,!0),Qe=Wa(function(je){return a.call(G,je)>-1},Ae,!0),Ge=[function(je,Je,Fe){var St=!Te&&(Fe||Je!=_)||((G=Je).nodeType?Re(je,Je,Fe):Qe(je,Je,Fe));return G=null,St}];ze<re;ze++)if($=f.relative[N[ze].type])Ge=[Wa(rl(Ge),$)];else{if($=f.filter[N[ze].type].apply(null,N[ze].matches),$[se]){for(ee=++ze;ee<re&&!f.relative[N[ee].type];ee++);return sl(ze>1&&rl(Ge),ze>1&&ja(N.slice(0,ze-1).concat({value:N[ze-2].type===" "?"*":""})).replace(S,"$1"),$,ze<ee&&al(N.slice(ze,ee)),ee<re&&al(N=N.slice(ee)),ee<re&&ja(N))}Ge.push($)}return rl(Ge)}function r1(N,G){var $=G.length>0,ee=N.length>0,re=function(Te,Ae,ze,Re,Qe){var Ge,je,Je,Fe=0,St="0",Bn=Te&&[],yn=[],Jn=_,Ii=Te||ee&&f.find.TAG("*",Qe),Lr=J+=Jn==null?1:Math.random()||.1,An=Ii.length;for(Qe&&(_=Ae==P||Ae||Qe);St!==An&&(Ge=Ii[St])!=null;St++){if(ee&&Ge){for(je=0,!Ae&&Ge.ownerDocument!=P&&(bo(Ge),ze=!B);Je=N[je++];)if(Je(Ge,Ae||P,ze)){A.call(Re,Ge);break}Qe&&(J=Lr)}$&&((Ge=!Je&&Ge)&&Fe--,Te&&Bn.push(Ge))}if(Fe+=St,$&&St!==Fe){for(je=0;Je=G[je++];)Je(Bn,yn,Ae,ze);if(Te){if(Fe>0)for(;St--;)Bn[St]||yn[St]||(yn[St]=Z.call(Re));yn=qa(yn)}A.apply(Re,yn),Qe&&!Te&&yn.length>0&&Fe+G.length>1&&m.uniqueSort(Re)}return Qe&&(J=Lr,_=Jn),Bn};return $?hi(re):re}function cl(N,G){var $,ee=[],re=[],Te=Ze[N+" "];if(!Te){for(G||(G=Ha(N)),$=G.length;$--;)Te=al(G[$]),Te[se]?ee.push(Te):re.push(Te);Te=Ze(N,r1(re,ee)),Te.selector=N}return Te}function Dh(N,G,$,ee){var re,Te,Ae,ze,Re,Qe=typeof N=="function"&&N,Ge=!ee&&Ha(N=Qe.selector||N);if($=$||[],Ge.length===1){if(Te=Ge[0]=Ge[0].slice(0),Te.length>2&&(Ae=Te[0]).type==="ID"&&G.nodeType===9&&B&&f.relative[Te[1].type]){if(G=(f.find.ID(Ae.matches[0].replace(Ki,Qi),G)||[])[0],G)Qe&&(G=G.parentNode);else return $;N=N.slice(Te.shift().value.length)}for(re=Oi.needsContext.test(N)?0:Te.length;re--&&(Ae=Te[re],!f.relative[ze=Ae.type]);)if((Re=f.find[ze])&&(ee=Re(Ae.matches[0].replace(Ki,Qi),il.test(Te[0].type)&&ol(G.parentNode)||G))){if(Te.splice(re,1),N=ee.length&&ja(Te),!N)return A.apply($,ee),$;break}}return(Qe||cl(N,Ge))(ee,G,!B,$,!G||il.test(N)&&ol(G.parentNode)||G),$}C.sortStable=se.split("").sort(Kt).join("")===se,bo(),C.sortDetached=Nr(function(N){return N.compareDocumentPosition(P.createElement("fieldset"))&1}),m.find=bt,m.expr[":"]=m.expr.pseudos,m.unique=m.uniqueSort,bt.compile=cl,bt.select=Dh,bt.setDocument=bo,bt.escape=m.escapeSelector,bt.getText=m.text,bt.isXML=m.isXMLDoc,bt.selectors=m.expr,bt.support=m.support,bt.uniqueSort=m.uniqueSort})();var j=function(u,f,_){for(var T=[],x=_!==void 0;(u=u[f])&&u.nodeType!==9;)if(u.nodeType===1){if(x&&m(u).is(_))break;T.push(u)}return T},le=function(u,f){for(var _=[];u;u=u.nextSibling)u.nodeType===1&&u!==f&&_.push(u);return _},be=m.expr.match.needsContext,Be=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Ue(u,f,_){return b(f)?m.grep(u,function(T,x){return!!f.call(T,x,T)!==_}):f.nodeType?m.grep(u,function(T){return T===f!==_}):typeof f!="string"?m.grep(u,function(T){return a.call(f,T)>-1!==_}):m.filter(f,u,_)}m.filter=function(u,f,_){var T=f[0];return _&&(u=":not("+u+")"),f.length===1&&T.nodeType===1?m.find.matchesSelector(T,u)?[T]:[]:m.find.matches(u,m.grep(f,function(x){return x.nodeType===1}))},m.fn.extend({find:function(u){var f,_,T=this.length,x=this;if(typeof u!="string")return this.pushStack(m(u).filter(function(){for(f=0;f<T;f++)if(m.contains(x[f],this))return!0}));for(_=this.pushStack([]),f=0;f<T;f++)m.find(u,x[f],_);return T>1?m.uniqueSort(_):_},filter:function(u){return this.pushStack(Ue(this,u||[],!1))},not:function(u){return this.pushStack(Ue(this,u||[],!0))},is:function(u){return!!Ue(this,typeof u=="string"&&be.test(u)?m(u):u||[],!1).length}});var $e,Xe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ht=m.fn.init=function(u,f,_){var T,x;if(!u)return this;if(_=_||$e,typeof u=="string")if(u[0]==="<"&&u[u.length-1]===">"&&u.length>=3?T=[null,u,null]:T=Xe.exec(u),T&&(T[1]||!f))if(T[1]){if(f=f instanceof m?f[0]:f,m.merge(this,m.parseHTML(T[1],f&&f.nodeType?f.ownerDocument||f:R,!0)),Be.test(T[1])&&m.isPlainObject(f))for(T in f)b(this[T])?this[T](f[T]):this.attr(T,f[T]);return this}else return x=R.getElementById(T[2]),x&&(this[0]=x,this.length=1),this;else return!f||f.jquery?(f||_).find(u):this.constructor(f).find(u);else{if(u.nodeType)return this[0]=u,this.length=1,this;if(b(u))return _.ready!==void 0?_.ready(u):u(m)}return m.makeArray(u,this)};ht.prototype=m.fn,$e=m(R);var _t=/^(?:parents|prev(?:Until|All))/,Ct={children:!0,contents:!0,next:!0,prev:!0};m.fn.extend({has:function(u){var f=m(u,this),_=f.length;return this.filter(function(){for(var T=0;T<_;T++)if(m.contains(this,f[T]))return!0})},closest:function(u,f){var _,T=0,x=this.length,A=[],P=typeof u!="string"&&m(u);if(!be.test(u)){for(;T<x;T++)for(_=this[T];_&&_!==f;_=_.parentNode)if(_.nodeType<11&&(P?P.index(_)>-1:_.nodeType===1&&m.find.matchesSelector(_,u))){A.push(_);break}}return this.pushStack(A.length>1?m.uniqueSort(A):A)},index:function(u){return u?typeof u=="string"?a.call(m(u),this[0]):a.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,f){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(u,f))))},addBack:function(u){return this.add(u==null?this.prevObject:this.prevObject.filter(u))}});function mt(u,f){for(;(u=u[f])&&u.nodeType!==1;);return u}m.each({parent:function(u){var f=u.parentNode;return f&&f.nodeType!==11?f:null},parents:function(u){return j(u,"parentNode")},parentsUntil:function(u,f,_){return j(u,"parentNode",_)},next:function(u){return mt(u,"nextSibling")},prev:function(u){return mt(u,"previousSibling")},nextAll:function(u){return j(u,"nextSibling")},prevAll:function(u){return j(u,"previousSibling")},nextUntil:function(u,f,_){return j(u,"nextSibling",_)},prevUntil:function(u,f,_){return j(u,"previousSibling",_)},siblings:function(u){return le((u.parentNode||{}).firstChild,u)},children:function(u){return le(u.firstChild)},contents:function(u){return u.contentDocument!=null&&i(u.contentDocument)?u.contentDocument:(q(u,"template")&&(u=u.content||u),m.merge([],u.childNodes))}},function(u,f){m.fn[u]=function(_,T){var x=m.map(this,f,_);return u.slice(-5)!=="Until"&&(T=_),T&&typeof T=="string"&&(x=m.filter(T,x)),this.length>1&&(Ct[u]||m.uniqueSort(x),_t.test(u)&&x.reverse()),this.pushStack(x)}});var ot=/[^\x20\t\r\n\f]+/g;function Ye(u){var f={};return m.each(u.match(ot)||[],function(_,T){f[T]=!0}),f}m.Callbacks=function(u){u=typeof u=="string"?Ye(u):m.extend({},u);var f,_,T,x,A=[],P=[],V=-1,B=function(){for(x=x||u.once,T=f=!0;P.length;V=-1)for(_=P.shift();++V<A.length;)A[V].apply(_[0],_[1])===!1&&u.stopOnFalse&&(V=A.length,_=!1);u.memory||(_=!1),f=!1,x&&(_?A=[]:A="")},W={add:function(){return A&&(_&&!f&&(V=A.length-1,P.push(_)),function ne(se){m.each(se,function(J,me){b(me)?(!u.unique||!W.has(me))&&A.push(me):me&&me.length&&z(me)!=="string"&&ne(me)})}(arguments),_&&!f&&B()),this},remove:function(){return m.each(arguments,function(ne,se){for(var J;(J=m.inArray(se,A,J))>-1;)A.splice(J,1),J<=V&&V--}),this},has:function(ne){return ne?m.inArray(ne,A)>-1:A.length>0},empty:function(){return A&&(A=[]),this},disable:function(){return x=P=[],A=_="",this},disabled:function(){return!A},lock:function(){return x=P=[],!_&&!f&&(A=_=""),this},locked:function(){return!!x},fireWith:function(ne,se){return x||(se=se||[],se=[ne,se.slice?se.slice():se],P.push(se),f||B()),this},fire:function(){return W.fireWith(this,arguments),this},fired:function(){return!!T}};return W};function Mt(u){return u}function Xt(u){throw u}function gn(u,f,_,T){var x;try{u&&b(x=u.promise)?x.call(u).done(f).fail(_):u&&b(x=u.then)?x.call(u,f,_):f.apply(void 0,[u].slice(T))}catch(A){_.apply(void 0,[A])}}m.extend({Deferred:function(u){var f=[["notify","progress",m.Callbacks("memory"),m.Callbacks("memory"),2],["resolve","done",m.Callbacks("once memory"),m.Callbacks("once memory"),0,"resolved"],["reject","fail",m.Callbacks("once memory"),m.Callbacks("once memory"),1,"rejected"]],_="pending",T={state:function(){return _},always:function(){return x.done(arguments).fail(arguments),this},catch:function(A){return T.then(null,A)},pipe:function(){var A=arguments;return m.Deferred(function(P){m.each(f,function(V,B){var W=b(A[B[4]])&&A[B[4]];x[B[1]](function(){var ne=W&&W.apply(this,arguments);ne&&b(ne.promise)?ne.promise().progress(P.notify).done(P.resolve).fail(P.reject):P[B[0]+"With"](this,W?[ne]:arguments)})}),A=null}).promise()},then:function(A,P,V){var B=0;function W(ne,se,J,me){return function(){var He=this,st=arguments,Ze=function(){var Kt,Ai;if(!(ne<B)){if(Kt=J.apply(He,st),Kt===se.promise())throw new TypeError("Thenable self-resolution");Ai=Kt&&(typeof Kt=="object"||typeof Kt=="function")&&Kt.then,b(Ai)?me?Ai.call(Kt,W(B,se,Mt,me),W(B,se,Xt,me)):(B++,Ai.call(Kt,W(B,se,Mt,me),W(B,se,Xt,me),W(B,se,Mt,se.notifyWith))):(J!==Mt&&(He=void 0,st=[Kt]),(me||se.resolveWith)(He,st))}},un=me?Ze:function(){try{Ze()}catch(Kt){m.Deferred.exceptionHook&&m.Deferred.exceptionHook(Kt,un.error),ne+1>=B&&(J!==Xt&&(He=void 0,st=[Kt]),se.rejectWith(He,st))}};ne?un():(m.Deferred.getErrorHook?un.error=m.Deferred.getErrorHook():m.Deferred.getStackHook&&(un.error=m.Deferred.getStackHook()),e.setTimeout(un))}}return m.Deferred(function(ne){f[0][3].add(W(0,ne,b(V)?V:Mt,ne.notifyWith)),f[1][3].add(W(0,ne,b(A)?A:Mt)),f[2][3].add(W(0,ne,b(P)?P:Xt))}).promise()},promise:function(A){return A!=null?m.extend(A,T):T}},x={};return m.each(f,function(A,P){var V=P[2],B=P[5];T[P[1]]=V.add,B&&V.add(function(){_=B},f[3-A][2].disable,f[3-A][3].disable,f[0][2].lock,f[0][3].lock),V.add(P[3].fire),x[P[0]]=function(){return x[P[0]+"With"](this===x?void 0:this,arguments),this},x[P[0]+"With"]=V.fireWith}),T.promise(x),u&&u.call(x,x),x},when:function(u){var f=arguments.length,_=f,T=Array(_),x=o.call(arguments),A=m.Deferred(),P=function(V){return function(B){T[V]=this,x[V]=arguments.length>1?o.call(arguments):B,--f||A.resolveWith(T,x)}};if(f<=1&&(gn(u,A.done(P(_)).resolve,A.reject,!f),A.state()==="pending"||b(x[_]&&x[_].then)))return A.then();for(;_--;)gn(x[_],P(_),A.reject);return A.promise()}});var ui=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;m.Deferred.exceptionHook=function(u,f){e.console&&e.console.warn&&u&&ui.test(u.name)&&e.console.warn("jQuery.Deferred exception: "+u.message,u.stack,f)},m.readyException=function(u){e.setTimeout(function(){throw u})};var Wo=m.Deferred();m.fn.ready=function(u){return Wo.then(u).catch(function(f){m.readyException(f)}),this},m.extend({isReady:!1,readyWait:1,ready:function(u){(u===!0?--m.readyWait:m.isReady)||(m.isReady=!0,!(u!==!0&&--m.readyWait>0)&&Wo.resolveWith(R,[m]))}}),m.ready.then=Wo.then;function Xn(){R.removeEventListener("DOMContentLoaded",Xn),e.removeEventListener("load",Xn),m.ready()}R.readyState==="complete"||R.readyState!=="loading"&&!R.documentElement.doScroll?e.setTimeout(m.ready):(R.addEventListener("DOMContentLoaded",Xn),e.addEventListener("load",Xn));var $n=function(u,f,_,T,x,A,P){var V=0,B=u.length,W=_==null;if(z(_)==="object"){x=!0;for(V in _)$n(u,f,V,_[V],!0,A,P)}else if(T!==void 0&&(x=!0,b(T)||(P=!0),W&&(P?(f.call(u,T),f=null):(W=f,f=function(ne,se,J){return W.call(m(ne),J)})),f))for(;V<B;V++)f(u[V],_,P?T:T.call(u[V],V,f(u[V],_)));return x?u:W?f.call(u):B?f(u[0],_):A},Yi=/^-ms-/,Ba=/-([a-z])/g;function Zi(u,f){return f.toUpperCase()}function Wn(u){return u.replace(Yi,"ms-").replace(Ba,Zi)}var _o=function(u){return u.nodeType===1||u.nodeType===9||!+u.nodeType};function xi(){this.expando=m.expando+xi.uid++}xi.uid=1,xi.prototype={cache:function(u){var f=u[this.expando];return f||(f={},_o(u)&&(u.nodeType?u[this.expando]=f:Object.defineProperty(u,this.expando,{value:f,configurable:!0}))),f},set:function(u,f,_){var T,x=this.cache(u);if(typeof f=="string")x[Wn(f)]=_;else for(T in f)x[Wn(T)]=f[T];return x},get:function(u,f){return f===void 0?this.cache(u):u[this.expando]&&u[this.expando][Wn(f)]},access:function(u,f,_){return f===void 0||f&&typeof f=="string"&&_===void 0?this.get(u,f):(this.set(u,f,_),_!==void 0?_:f)},remove:function(u,f){var _,T=u[this.expando];if(T!==void 0){if(f!==void 0)for(Array.isArray(f)?f=f.map(Wn):(f=Wn(f),f=f in T?[f]:f.match(ot)||[]),_=f.length;_--;)delete T[f[_]];(f===void 0||m.isEmptyObject(T))&&(u.nodeType?u[this.expando]=void 0:delete u[this.expando])}},hasData:function(u){var f=u[this.expando];return f!==void 0&&!m.isEmptyObject(f)}};var De=new xi,$t=new xi,xr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ar=/[A-Z]/g;function Rr(u){return u==="true"?!0:u==="false"?!1:u==="null"?null:u===+u+""?+u:xr.test(u)?JSON.parse(u):u}function qo(u,f,_){var T;if(_===void 0&&u.nodeType===1)if(T="data-"+f.replace(Ar,"-$&").toLowerCase(),_=u.getAttribute(T),typeof _=="string"){try{_=Rr(_)}catch{}$t.set(u,f,_)}else _=void 0;return _}m.extend({hasData:function(u){return $t.hasData(u)||De.hasData(u)},data:function(u,f,_){return $t.access(u,f,_)},removeData:function(u,f){$t.remove(u,f)},_data:function(u,f,_){return De.access(u,f,_)},_removeData:function(u,f){De.remove(u,f)}}),m.fn.extend({data:function(u,f){var _,T,x,A=this[0],P=A&&A.attributes;if(u===void 0){if(this.length&&(x=$t.get(A),A.nodeType===1&&!De.get(A,"hasDataAttrs"))){for(_=P.length;_--;)P[_]&&(T=P[_].name,T.indexOf("data-")===0&&(T=Wn(T.slice(5)),qo(A,T,x[T])));De.set(A,"hasDataAttrs",!0)}return x}return typeof u=="object"?this.each(function(){$t.set(this,u)}):$n(this,function(V){var B;if(A&&V===void 0)return B=$t.get(A,u),B!==void 0||(B=qo(A,u),B!==void 0)?B:void 0;this.each(function(){$t.set(this,u,V)})},null,f,arguments.length>1,null,!0)},removeData:function(u){return this.each(function(){$t.remove(this,u)})}}),m.extend({queue:function(u,f,_){var T;if(u)return f=(f||"fx")+"queue",T=De.get(u,f),_&&(!T||Array.isArray(_)?T=De.access(u,f,m.makeArray(_)):T.push(_)),T||[]},dequeue:function(u,f){f=f||"fx";var _=m.queue(u,f),T=_.length,x=_.shift(),A=m._queueHooks(u,f),P=function(){m.dequeue(u,f)};x==="inprogress"&&(x=_.shift(),T--),x&&(f==="fx"&&_.unshift("inprogress"),delete A.stop,x.call(u,P,A)),!T&&A&&A.empty.fire()},_queueHooks:function(u,f){var _=f+"queueHooks";return De.get(u,_)||De.access(u,_,{empty:m.Callbacks("once memory").add(function(){De.remove(u,[f+"queue",_])})})}}),m.fn.extend({queue:function(u,f){var _=2;return typeof u!="string"&&(f=u,u="fx",_--),arguments.length<_?m.queue(this[0],u):f===void 0?this:this.each(function(){var T=m.queue(this,u,f);m._queueHooks(this,u),u==="fx"&&T[0]!=="inprogress"&&m.dequeue(this,u)})},dequeue:function(u){return this.each(function(){m.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,f){var _,T=1,x=m.Deferred(),A=this,P=this.length,V=function(){--T||x.resolveWith(A,[A])};for(typeof u!="string"&&(f=u,u=void 0),u=u||"fx";P--;)_=De.get(A[P],u+"queueHooks"),_&&_.empty&&(T++,_.empty.add(V));return V(),x.promise(f)}});var Yo=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Xi=new RegExp("^(?:([+-])=|)("+Yo+")([a-z%]*)$","i"),li=["Top","Right","Bottom","Left"],fi=R.documentElement,$i=function(u){return m.contains(u.ownerDocument,u)},ku={composed:!0};fi.getRootNode&&($i=function(u){return m.contains(u.ownerDocument,u)||u.getRootNode(ku)===u.ownerDocument});var Pr=function(u,f){return u=f||u,u.style.display==="none"||u.style.display===""&&$i(u)&&m.css(u,"display")==="none"};function Or(u,f,_,T){var x,A,P=20,V=T?function(){return T.cur()}:function(){return m.css(u,f,"")},B=V(),W=_&&_[3]||(m.cssNumber[f]?"":"px"),ne=u.nodeType&&(m.cssNumber[f]||W!=="px"&&+B)&&Xi.exec(m.css(u,f));if(ne&&ne[3]!==W){for(B=B/2,W=W||ne[3],ne=+B||1;P--;)m.style(u,f,ne+W),(1-A)*(1-(A=V()/B||.5))<=0&&(P=0),ne=ne/A;ne=ne*2,m.style(u,f,ne+W),_=_||[]}return _&&(ne=+ne||+B||0,x=_[1]?ne+(_[1]+1)*_[2]:+_[2],T&&(T.unit=W,T.start=ne,T.end=x)),x}var Ne={};function zn(u){var f,_=u.ownerDocument,T=u.nodeName,x=Ne[T];return x||(f=_.body.appendChild(_.createElement(T)),x=m.css(f,"display"),f.parentNode.removeChild(f),x==="none"&&(x="block"),Ne[T]=x,x)}function qn(u,f){for(var _,T,x=[],A=0,P=u.length;A<P;A++)T=u[A],T.style&&(_=T.style.display,f?(_==="none"&&(x[A]=De.get(T,"display")||null,x[A]||(T.style.display="")),T.style.display===""&&Pr(T)&&(x[A]=zn(T))):_!=="none"&&(x[A]="none",De.set(T,"display",_)));for(A=0;A<P;A++)x[A]!=null&&(u[A].style.display=x[A]);return u}m.fn.extend({show:function(){return qn(this,!0)},hide:function(){return qn(this)},toggle:function(u){return typeof u=="boolean"?u?this.show():this.hide():this.each(function(){Pr(this)?m(this).show():m(this).hide()})}});var Os=/^(?:checkbox|radio)$/i,ih=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,oh=/^$|^module$|\/(?:java|ecma)script/i;(function(){var u=R.createDocumentFragment(),f=u.appendChild(R.createElement("div")),_=R.createElement("input");_.setAttribute("type","radio"),_.setAttribute("checked","checked"),_.setAttribute("name","t"),f.appendChild(_),C.checkClone=f.cloneNode(!0).cloneNode(!0).lastChild.checked,f.innerHTML="<textarea>x</textarea>",C.noCloneChecked=!!f.cloneNode(!0).lastChild.defaultValue,f.innerHTML="<option></option>",C.option=!!f.lastChild})();var Kn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Kn.tbody=Kn.tfoot=Kn.colgroup=Kn.caption=Kn.thead,Kn.th=Kn.td,C.option||(Kn.optgroup=Kn.option=[1,"<select multiple='multiple'>","</select>"]);function Nn(u,f){var _;return typeof u.getElementsByTagName<"u"?_=u.getElementsByTagName(f||"*"):typeof u.querySelectorAll<"u"?_=u.querySelectorAll(f||"*"):_=[],f===void 0||f&&q(u,f)?m.merge([u],_):_}function Gu(u,f){for(var _=0,T=u.length;_<T;_++)De.set(u[_],"globalEval",!f||De.get(f[_],"globalEval"))}var vb=/<|&#?\w+;/;function rh(u,f,_,T,x){for(var A,P,V,B,W,ne,se=f.createDocumentFragment(),J=[],me=0,He=u.length;me<He;me++)if(A=u[me],A||A===0)if(z(A)==="object")m.merge(J,A.nodeType?[A]:A);else if(!vb.test(A))J.push(f.createTextNode(A));else{for(P=P||se.appendChild(f.createElement("div")),V=(ih.exec(A)||["",""])[1].toLowerCase(),B=Kn[V]||Kn._default,P.innerHTML=B[1]+m.htmlPrefilter(A)+B[2],ne=B[0];ne--;)P=P.lastChild;m.merge(J,P.childNodes),P=se.firstChild,P.textContent=""}for(se.textContent="",me=0;A=J[me++];){if(T&&m.inArray(A,T)>-1){x&&x.push(A);continue}if(W=$i(A),P=Nn(se.appendChild(A),"script"),W&&Gu(P),_)for(ne=0;A=P[ne++];)oh.test(A.type||"")&&_.push(A)}return se}var sh=/^([^.]*)(?:\.(.+)|)/;function Ir(){return!0}function Dr(){return!1}function Hu(u,f,_,T,x,A){var P,V;if(typeof f=="object"){typeof _!="string"&&(T=T||_,_=void 0);for(V in f)Hu(u,V,_,T,f[V],A);return u}if(T==null&&x==null?(x=_,T=_=void 0):x==null&&(typeof _=="string"?(x=T,T=void 0):(x=T,T=_,_=void 0)),x===!1)x=Dr;else if(!x)return u;return A===1&&(P=x,x=function(B){return m().off(B),P.apply(this,arguments)},x.guid=P.guid||(P.guid=m.guid++)),u.each(function(){m.event.add(this,f,x,T,_)})}m.event={global:{},add:function(u,f,_,T,x){var A,P,V,B,W,ne,se,J,me,He,st,Ze=De.get(u);if(_o(u))for(_.handler&&(A=_,_=A.handler,x=A.selector),x&&m.find.matchesSelector(fi,x),_.guid||(_.guid=m.guid++),(B=Ze.events)||(B=Ze.events=Object.create(null)),(P=Ze.handle)||(P=Ze.handle=function(un){return typeof m<"u"&&m.event.triggered!==un.type?m.event.dispatch.apply(u,arguments):void 0}),f=(f||"").match(ot)||[""],W=f.length;W--;)V=sh.exec(f[W])||[],me=st=V[1],He=(V[2]||"").split(".").sort(),me&&(se=m.event.special[me]||{},me=(x?se.delegateType:se.bindType)||me,se=m.event.special[me]||{},ne=m.extend({type:me,origType:st,data:T,handler:_,guid:_.guid,selector:x,needsContext:x&&m.expr.match.needsContext.test(x),namespace:He.join(".")},A),(J=B[me])||(J=B[me]=[],J.delegateCount=0,(!se.setup||se.setup.call(u,T,He,P)===!1)&&u.addEventListener&&u.addEventListener(me,P)),se.add&&(se.add.call(u,ne),ne.handler.guid||(ne.handler.guid=_.guid)),x?J.splice(J.delegateCount++,0,ne):J.push(ne),m.event.global[me]=!0)},remove:function(u,f,_,T,x){var A,P,V,B,W,ne,se,J,me,He,st,Ze=De.hasData(u)&&De.get(u);if(!(!Ze||!(B=Ze.events))){for(f=(f||"").match(ot)||[""],W=f.length;W--;){if(V=sh.exec(f[W])||[],me=st=V[1],He=(V[2]||"").split(".").sort(),!me){for(me in B)m.event.remove(u,me+f[W],_,T,!0);continue}for(se=m.event.special[me]||{},me=(T?se.delegateType:se.bindType)||me,J=B[me]||[],V=V[2]&&new RegExp("(^|\\.)"+He.join("\\.(?:.*\\.|)")+"(\\.|$)"),P=A=J.length;A--;)ne=J[A],(x||st===ne.origType)&&(!_||_.guid===ne.guid)&&(!V||V.test(ne.namespace))&&(!T||T===ne.selector||T==="**"&&ne.selector)&&(J.splice(A,1),ne.selector&&J.delegateCount--,se.remove&&se.remove.call(u,ne));P&&!J.length&&((!se.teardown||se.teardown.call(u,He,Ze.handle)===!1)&&m.removeEvent(u,me,Ze.handle),delete B[me])}m.isEmptyObject(B)&&De.remove(u,"handle events")}},dispatch:function(u){var f,_,T,x,A,P,V=new Array(arguments.length),B=m.event.fix(u),W=(De.get(this,"events")||Object.create(null))[B.type]||[],ne=m.event.special[B.type]||{};for(V[0]=B,f=1;f<arguments.length;f++)V[f]=arguments[f];if(B.delegateTarget=this,!(ne.preDispatch&&ne.preDispatch.call(this,B)===!1)){for(P=m.event.handlers.call(this,B,W),f=0;(x=P[f++])&&!B.isPropagationStopped();)for(B.currentTarget=x.elem,_=0;(A=x.handlers[_++])&&!B.isImmediatePropagationStopped();)(!B.rnamespace||A.namespace===!1||B.rnamespace.test(A.namespace))&&(B.handleObj=A,B.data=A.data,T=((m.event.special[A.origType]||{}).handle||A.handler).apply(x.elem,V),T!==void 0&&(B.result=T)===!1&&(B.preventDefault(),B.stopPropagation()));return ne.postDispatch&&ne.postDispatch.call(this,B),B.result}},handlers:function(u,f){var _,T,x,A,P,V=[],B=f.delegateCount,W=u.target;if(B&&W.nodeType&&!(u.type==="click"&&u.button>=1)){for(;W!==this;W=W.parentNode||this)if(W.nodeType===1&&!(u.type==="click"&&W.disabled===!0)){for(A=[],P={},_=0;_<B;_++)T=f[_],x=T.selector+" ",P[x]===void 0&&(P[x]=T.needsContext?m(x,this).index(W)>-1:m.find(x,this,null,[W]).length),P[x]&&A.push(T);A.length&&V.push({elem:W,handlers:A})}}return W=this,B<f.length&&V.push({elem:W,handlers:f.slice(B)}),V},addProp:function(u,f){Object.defineProperty(m.Event.prototype,u,{enumerable:!0,configurable:!0,get:b(f)?function(){if(this.originalEvent)return f(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[u]},set:function(_){Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:_})}})},fix:function(u){return u[m.expando]?u:new m.Event(u)},special:{load:{noBubble:!0},click:{setup:function(u){var f=this||u;return Os.test(f.type)&&f.click&&q(f,"input")&&Fa(f,"click",!0),!1},trigger:function(u){var f=this||u;return Os.test(f.type)&&f.click&&q(f,"input")&&Fa(f,"click"),!0},_default:function(u){var f=u.target;return Os.test(f.type)&&f.click&&q(f,"input")&&De.get(f,"click")||q(f,"a")}},beforeunload:{postDispatch:function(u){u.result!==void 0&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}}};function Fa(u,f,_){if(!_){De.get(u,f)===void 0&&m.event.add(u,f,Ir);return}De.set(u,f,!1),m.event.add(u,f,{namespace:!1,handler:function(T){var x,A=De.get(this,f);if(T.isTrigger&1&&this[f]){if(A)(m.event.special[f]||{}).delegateType&&T.stopPropagation();else if(A=o.call(arguments),De.set(this,f,A),this[f](),x=De.get(this,f),De.set(this,f,!1),A!==x)return T.stopImmediatePropagation(),T.preventDefault(),x}else A&&(De.set(this,f,m.event.trigger(A[0],A.slice(1),this)),T.stopPropagation(),T.isImmediatePropagationStopped=Ir)}})}m.removeEvent=function(u,f,_){u.removeEventListener&&u.removeEventListener(f,_)},m.Event=function(u,f){if(!(this instanceof m.Event))return new m.Event(u,f);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||u.defaultPrevented===void 0&&u.returnValue===!1?Ir:Dr,this.target=u.target&&u.target.nodeType===3?u.target.parentNode:u.target,this.currentTarget=u.currentTarget,this.relatedTarget=u.relatedTarget):this.type=u,f&&m.extend(this,f),this.timeStamp=u&&u.timeStamp||Date.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:Dr,isPropagationStopped:Dr,isImmediatePropagationStopped:Dr,isSimulated:!1,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=Ir,u&&!this.isSimulated&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=Ir,u&&!this.isSimulated&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=Ir,u&&!this.isSimulated&&u.stopImmediatePropagation(),this.stopPropagation()}},m.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},m.event.addProp),m.each({focus:"focusin",blur:"focusout"},function(u,f){function _(T){if(R.documentMode){var x=De.get(this,"handle"),A=m.event.fix(T);A.type=T.type==="focusin"?"focus":"blur",A.isSimulated=!0,x(T),A.target===A.currentTarget&&x(A)}else m.event.simulate(f,T.target,m.event.fix(T))}m.event.special[u]={setup:function(){var T;if(Fa(this,u,!0),R.documentMode)T=De.get(this,f),T||this.addEventListener(f,_),De.set(this,f,(T||0)+1);else return!1},trigger:function(){return Fa(this,u),!0},teardown:function(){var T;if(R.documentMode)T=De.get(this,f)-1,T?De.set(this,f,T):(this.removeEventListener(f,_),De.remove(this,f));else return!1},_default:function(T){return De.get(T.target,u)},delegateType:f},m.event.special[f]={setup:function(){var T=this.ownerDocument||this.document||this,x=R.documentMode?this:T,A=De.get(x,f);A||(R.documentMode?this.addEventListener(f,_):T.addEventListener(u,_,!0)),De.set(x,f,(A||0)+1)},teardown:function(){var T=this.ownerDocument||this.document||this,x=R.documentMode?this:T,A=De.get(x,f)-1;A?De.set(x,f,A):(R.documentMode?this.removeEventListener(f,_):T.removeEventListener(u,_,!0),De.remove(x,f))}}}),m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,f){m.event.special[u]={delegateType:f,bindType:f,handle:function(_){var T,x=this,A=_.relatedTarget,P=_.handleObj;return(!A||A!==x&&!m.contains(x,A))&&(_.type=P.origType,T=P.handler.apply(this,arguments),_.type=f),T}}}),m.fn.extend({on:function(u,f,_,T){return Hu(this,u,f,_,T)},one:function(u,f,_,T){return Hu(this,u,f,_,T,1)},off:function(u,f,_){var T,x;if(u&&u.preventDefault&&u.handleObj)return T=u.handleObj,m(u.delegateTarget).off(T.namespace?T.origType+"."+T.namespace:T.origType,T.selector,T.handler),this;if(typeof u=="object"){for(x in u)this.off(x,f,u[x]);return this}return(f===!1||typeof f=="function")&&(_=f,f=void 0),_===!1&&(_=Dr),this.each(function(){m.event.remove(this,u,_,f)})}});var Cb=/<script|<style|<link/i,bb=/checked\s*(?:[^=]|=\s*.checked.)/i,Tb=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ah(u,f){return q(u,"table")&&q(f.nodeType!==11?f:f.firstChild,"tr")&&m(u).children("tbody")[0]||u}function Eb(u){return u.type=(u.getAttribute("type")!==null)+"/"+u.type,u}function wb(u){return(u.type||"").slice(0,5)==="true/"?u.type=u.type.slice(5):u.removeAttribute("type"),u}function ch(u,f){var _,T,x,A,P,V,B;if(f.nodeType===1){if(De.hasData(u)&&(A=De.get(u),B=A.events,B)){De.remove(f,"handle events");for(x in B)for(_=0,T=B[x].length;_<T;_++)m.event.add(f,x,B[x][_])}$t.hasData(u)&&(P=$t.access(u),V=m.extend({},P),$t.set(f,V))}}function Sb(u,f){var _=f.nodeName.toLowerCase();_==="input"&&Os.test(u.type)?f.checked=u.checked:(_==="input"||_==="textarea")&&(f.defaultValue=u.defaultValue)}function Mr(u,f,_,T){f=r(f);var x,A,P,V,B,W,ne=0,se=u.length,J=se-1,me=f[0],He=b(me);if(He||se>1&&typeof me=="string"&&!C.checkClone&&bb.test(me))return u.each(function(st){var Ze=u.eq(st);He&&(f[0]=me.call(this,st,Ze.html())),Mr(Ze,f,_,T)});if(se&&(x=rh(f,u[0].ownerDocument,!1,u,T),A=x.firstChild,x.childNodes.length===1&&(x=A),A||T)){for(P=m.map(Nn(x,"script"),Eb),V=P.length;ne<se;ne++)B=x,ne!==J&&(B=m.clone(B,!0,!0),V&&m.merge(P,Nn(B,"script"))),_.call(u[ne],B,ne);if(V)for(W=P[P.length-1].ownerDocument,m.map(P,wb),ne=0;ne<V;ne++)B=P[ne],oh.test(B.type||"")&&!De.access(B,"globalEval")&&m.contains(W,B)&&(B.src&&(B.type||"").toLowerCase()!=="module"?m._evalUrl&&!B.noModule&&m._evalUrl(B.src,{nonce:B.nonce||B.getAttribute("nonce")},W):M(B.textContent.replace(Tb,""),B,W))}return u}function uh(u,f,_){for(var T,x=f?m.filter(f,u):u,A=0;(T=x[A])!=null;A++)!_&&T.nodeType===1&&m.cleanData(Nn(T)),T.parentNode&&(_&&$i(T)&&Gu(Nn(T,"script")),T.parentNode.removeChild(T));return u}m.extend({htmlPrefilter:function(u){return u},clone:function(u,f,_){var T,x,A,P,V=u.cloneNode(!0),B=$i(u);if(!C.noCloneChecked&&(u.nodeType===1||u.nodeType===11)&&!m.isXMLDoc(u))for(P=Nn(V),A=Nn(u),T=0,x=A.length;T<x;T++)Sb(A[T],P[T]);if(f)if(_)for(A=A||Nn(u),P=P||Nn(V),T=0,x=A.length;T<x;T++)ch(A[T],P[T]);else ch(u,V);return P=Nn(V,"script"),P.length>0&&Gu(P,!B&&Nn(u,"script")),V},cleanData:function(u){for(var f,_,T,x=m.event.special,A=0;(_=u[A])!==void 0;A++)if(_o(_)){if(f=_[De.expando]){if(f.events)for(T in f.events)x[T]?m.event.remove(_,T):m.removeEvent(_,T,f.handle);_[De.expando]=void 0}_[$t.expando]&&(_[$t.expando]=void 0)}}}),m.fn.extend({detach:function(u){return uh(this,u,!0)},remove:function(u){return uh(this,u)},text:function(u){return $n(this,function(f){return f===void 0?m.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=f)})},null,u,arguments.length)},append:function(){return Mr(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var f=ah(this,u);f.appendChild(u)}})},prepend:function(){return Mr(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var f=ah(this,u);f.insertBefore(u,f.firstChild)}})},before:function(){return Mr(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return Mr(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},empty:function(){for(var u,f=0;(u=this[f])!=null;f++)u.nodeType===1&&(m.cleanData(Nn(u,!1)),u.textContent="");return this},clone:function(u,f){return u=u??!1,f=f??u,this.map(function(){return m.clone(this,u,f)})},html:function(u){return $n(this,function(f){var _=this[0]||{},T=0,x=this.length;if(f===void 0&&_.nodeType===1)return _.innerHTML;if(typeof f=="string"&&!Cb.test(f)&&!Kn[(ih.exec(f)||["",""])[1].toLowerCase()]){f=m.htmlPrefilter(f);try{for(;T<x;T++)_=this[T]||{},_.nodeType===1&&(m.cleanData(Nn(_,!1)),_.innerHTML=f);_=0}catch{}}_&&this.empty().append(f)},null,u,arguments.length)},replaceWith:function(){var u=[];return Mr(this,arguments,function(f){var _=this.parentNode;m.inArray(this,u)<0&&(m.cleanData(Nn(this)),_&&_.replaceChild(f,this))},u)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,f){m.fn[u]=function(_){for(var T,x=[],A=m(_),P=A.length-1,V=0;V<=P;V++)T=V===P?this:this.clone(!0),m(A[V])[f](T),s.apply(x,T.get());return this.pushStack(x)}});var ju=new RegExp("^("+Yo+")(?!px)[a-z%]+$","i"),Wu=/^--/,Va=function(u){var f=u.ownerDocument.defaultView;return(!f||!f.opener)&&(f=e),f.getComputedStyle(u)},lh=function(u,f,_){var T,x,A={};for(x in f)A[x]=u.style[x],u.style[x]=f[x];T=_.call(u);for(x in f)u.style[x]=A[x];return T},xb=new RegExp(li.join("|"),"i");(function(){function u(){if(W){B.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",W.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",fi.appendChild(B).appendChild(W);var ne=e.getComputedStyle(W);_=ne.top!=="1%",V=f(ne.marginLeft)===12,W.style.right="60%",A=f(ne.right)===36,T=f(ne.width)===36,W.style.position="absolute",x=f(W.offsetWidth/3)===12,fi.removeChild(B),W=null}}function f(ne){return Math.round(parseFloat(ne))}var _,T,x,A,P,V,B=R.createElement("div"),W=R.createElement("div");W.style&&(W.style.backgroundClip="content-box",W.cloneNode(!0).style.backgroundClip="",C.clearCloneStyle=W.style.backgroundClip==="content-box",m.extend(C,{boxSizingReliable:function(){return u(),T},pixelBoxStyles:function(){return u(),A},pixelPosition:function(){return u(),_},reliableMarginLeft:function(){return u(),V},scrollboxSize:function(){return u(),x},reliableTrDimensions:function(){var ne,se,J,me;return P==null&&(ne=R.createElement("table"),se=R.createElement("tr"),J=R.createElement("div"),ne.style.cssText="position:absolute;left:-11111px;border-collapse:separate",se.style.cssText="border:1px solid",se.style.height="1px",J.style.height="9px",J.style.display="block",fi.appendChild(ne).appendChild(se).appendChild(J),me=e.getComputedStyle(se),P=parseInt(me.height,10)+parseInt(me.borderTopWidth,10)+parseInt(me.borderBottomWidth,10)===se.offsetHeight,fi.removeChild(ne)),P}}))})();function Is(u,f,_){var T,x,A,P,V=Wu.test(f),B=u.style;return _=_||Va(u),_&&(P=_.getPropertyValue(f)||_[f],V&&P&&(P=P.replace(S,"$1")||void 0),P===""&&!$i(u)&&(P=m.style(u,f)),!C.pixelBoxStyles()&&ju.test(P)&&xb.test(f)&&(T=B.width,x=B.minWidth,A=B.maxWidth,B.minWidth=B.maxWidth=B.width=P,P=_.width,B.width=T,B.minWidth=x,B.maxWidth=A)),P!==void 0?P+"":P}function fh(u,f){return{get:function(){if(u()){delete this.get;return}return(this.get=f).apply(this,arguments)}}}var dh=["Webkit","Moz","ms"],hh=R.createElement("div").style,ph={};function Ab(u){for(var f=u[0].toUpperCase()+u.slice(1),_=dh.length;_--;)if(u=dh[_]+f,u in hh)return u}function qu(u){var f=m.cssProps[u]||ph[u];return f||(u in hh?u:ph[u]=Ab(u)||u)}var Rb=/^(none|table(?!-c[ea]).+)/,Pb={position:"absolute",visibility:"hidden",display:"block"},mh={letterSpacing:"0",fontWeight:"400"};function gh(u,f,_){var T=Xi.exec(f);return T?Math.max(0,T[2]-(_||0))+(T[3]||"px"):f}function Yu(u,f,_,T,x,A){var P=f==="width"?1:0,V=0,B=0,W=0;if(_===(T?"border":"content"))return 0;for(;P<4;P+=2)_==="margin"&&(W+=m.css(u,_+li[P],!0,x)),T?(_==="content"&&(B-=m.css(u,"padding"+li[P],!0,x)),_!=="margin"&&(B-=m.css(u,"border"+li[P]+"Width",!0,x))):(B+=m.css(u,"padding"+li[P],!0,x),_!=="padding"?B+=m.css(u,"border"+li[P]+"Width",!0,x):V+=m.css(u,"border"+li[P]+"Width",!0,x));return!T&&A>=0&&(B+=Math.max(0,Math.ceil(u["offset"+f[0].toUpperCase()+f.slice(1)]-A-B-V-.5))||0),B+W}function yh(u,f,_){var T=Va(u),x=!C.boxSizingReliable()||_,A=x&&m.css(u,"boxSizing",!1,T)==="border-box",P=A,V=Is(u,f,T),B="offset"+f[0].toUpperCase()+f.slice(1);if(ju.test(V)){if(!_)return V;V="auto"}return(!C.boxSizingReliable()&&A||!C.reliableTrDimensions()&&q(u,"tr")||V==="auto"||!parseFloat(V)&&m.css(u,"display",!1,T)==="inline")&&u.getClientRects().length&&(A=m.css(u,"boxSizing",!1,T)==="border-box",P=B in u,P&&(V=u[B])),V=parseFloat(V)||0,V+Yu(u,f,_||(A?"border":"content"),P,T,V)+"px"}m.extend({cssHooks:{opacity:{get:function(u,f){if(f){var _=Is(u,"opacity");return _===""?"1":_}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(u,f,_,T){if(!(!u||u.nodeType===3||u.nodeType===8||!u.style)){var x,A,P,V=Wn(f),B=Wu.test(f),W=u.style;if(B||(f=qu(V)),P=m.cssHooks[f]||m.cssHooks[V],_!==void 0){if(A=typeof _,A==="string"&&(x=Xi.exec(_))&&x[1]&&(_=Or(u,f,x),A="number"),_==null||_!==_)return;A==="number"&&!B&&(_+=x&&x[3]||(m.cssNumber[V]?"":"px")),!C.clearCloneStyle&&_===""&&f.indexOf("background")===0&&(W[f]="inherit"),(!P||!("set"in P)||(_=P.set(u,_,T))!==void 0)&&(B?W.setProperty(f,_):W[f]=_)}else return P&&"get"in P&&(x=P.get(u,!1,T))!==void 0?x:W[f]}},css:function(u,f,_,T){var x,A,P,V=Wn(f),B=Wu.test(f);return B||(f=qu(V)),P=m.cssHooks[f]||m.cssHooks[V],P&&"get"in P&&(x=P.get(u,!0,_)),x===void 0&&(x=Is(u,f,T)),x==="normal"&&f in mh&&(x=mh[f]),_===""||_?(A=parseFloat(x),_===!0||isFinite(A)?A||0:x):x}}),m.each(["height","width"],function(u,f){m.cssHooks[f]={get:function(_,T,x){if(T)return Rb.test(m.css(_,"display"))&&(!_.getClientRects().length||!_.getBoundingClientRect().width)?lh(_,Pb,function(){return yh(_,f,x)}):yh(_,f,x)},set:function(_,T,x){var A,P=Va(_),V=!C.scrollboxSize()&&P.position==="absolute",B=V||x,W=B&&m.css(_,"boxSizing",!1,P)==="border-box",ne=x?Yu(_,f,x,W,P):0;return W&&V&&(ne-=Math.ceil(_["offset"+f[0].toUpperCase()+f.slice(1)]-parseFloat(P[f])-Yu(_,f,"border",!1,P)-.5)),ne&&(A=Xi.exec(T))&&(A[3]||"px")!=="px"&&(_.style[f]=T,T=m.css(_,f)),gh(_,T,ne)}}}),m.cssHooks.marginLeft=fh(C.reliableMarginLeft,function(u,f){if(f)return(parseFloat(Is(u,"marginLeft"))||u.getBoundingClientRect().left-lh(u,{marginLeft:0},function(){return u.getBoundingClientRect().left}))+"px"}),m.each({margin:"",padding:"",border:"Width"},function(u,f){m.cssHooks[u+f]={expand:function(_){for(var T=0,x={},A=typeof _=="string"?_.split(" "):[_];T<4;T++)x[u+li[T]+f]=A[T]||A[T-2]||A[0];return x}},u!=="margin"&&(m.cssHooks[u+f].set=gh)}),m.fn.extend({css:function(u,f){return $n(this,function(_,T,x){var A,P,V={},B=0;if(Array.isArray(T)){for(A=Va(_),P=T.length;B<P;B++)V[T[B]]=m.css(_,T[B],!1,A);return V}return x!==void 0?m.style(_,T,x):m.css(_,T)},u,f,arguments.length>1)}});function Ln(u,f,_,T,x){return new Ln.prototype.init(u,f,_,T,x)}m.Tween=Ln,Ln.prototype={constructor:Ln,init:function(u,f,_,T,x,A){this.elem=u,this.prop=_,this.easing=x||m.easing._default,this.options=f,this.start=this.now=this.cur(),this.end=T,this.unit=A||(m.cssNumber[_]?"":"px")},cur:function(){var u=Ln.propHooks[this.prop];return u&&u.get?u.get(this):Ln.propHooks._default.get(this)},run:function(u){var f,_=Ln.propHooks[this.prop];return this.options.duration?this.pos=f=m.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):this.pos=f=u,this.now=(this.end-this.start)*f+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),_&&_.set?_.set(this):Ln.propHooks._default.set(this),this}},Ln.prototype.init.prototype=Ln.prototype,Ln.propHooks={_default:{get:function(u){var f;return u.elem.nodeType!==1||u.elem[u.prop]!=null&&u.elem.style[u.prop]==null?u.elem[u.prop]:(f=m.css(u.elem,u.prop,""),!f||f==="auto"?0:f)},set:function(u){m.fx.step[u.prop]?m.fx.step[u.prop](u):u.elem.nodeType===1&&(m.cssHooks[u.prop]||u.elem.style[qu(u.prop)]!=null)?m.style(u.elem,u.prop,u.now+u.unit):u.elem[u.prop]=u.now}}},Ln.propHooks.scrollTop=Ln.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},m.easing={linear:function(u){return u},swing:function(u){return .5-Math.cos(u*Math.PI)/2},_default:"swing"},m.fx=Ln.prototype.init,m.fx.step={};var zr,Ua,Ob=/^(?:toggle|show|hide)$/,Ib=/queueHooks$/;function Zu(){Ua&&(R.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Zu):e.setTimeout(Zu,m.fx.interval),m.fx.tick())}function _h(){return e.setTimeout(function(){zr=void 0}),zr=Date.now()}function ka(u,f){var _,T=0,x={height:u};for(f=f?1:0;T<4;T+=2-f)_=li[T],x["margin"+_]=x["padding"+_]=u;return f&&(x.opacity=x.width=u),x}function vh(u,f,_){for(var T,x=(di.tweeners[f]||[]).concat(di.tweeners["*"]),A=0,P=x.length;A<P;A++)if(T=x[A].call(_,f,u))return T}function Db(u,f,_){var T,x,A,P,V,B,W,ne,se="width"in f||"height"in f,J=this,me={},He=u.style,st=u.nodeType&&Pr(u),Ze=De.get(u,"fxshow");_.queue||(P=m._queueHooks(u,"fx"),P.unqueued==null&&(P.unqueued=0,V=P.empty.fire,P.empty.fire=function(){P.unqueued||V()}),P.unqueued++,J.always(function(){J.always(function(){P.unqueued--,m.queue(u,"fx").length||P.empty.fire()})}));for(T in f)if(x=f[T],Ob.test(x)){if(delete f[T],A=A||x==="toggle",x===(st?"hide":"show"))if(x==="show"&&Ze&&Ze[T]!==void 0)st=!0;else continue;me[T]=Ze&&Ze[T]||m.style(u,T)}if(B=!m.isEmptyObject(f),!(!B&&m.isEmptyObject(me))){se&&u.nodeType===1&&(_.overflow=[He.overflow,He.overflowX,He.overflowY],W=Ze&&Ze.display,W==null&&(W=De.get(u,"display")),ne=m.css(u,"display"),ne==="none"&&(W?ne=W:(qn([u],!0),W=u.style.display||W,ne=m.css(u,"display"),qn([u]))),(ne==="inline"||ne==="inline-block"&&W!=null)&&m.css(u,"float")==="none"&&(B||(J.done(function(){He.display=W}),W==null&&(ne=He.display,W=ne==="none"?"":ne)),He.display="inline-block")),_.overflow&&(He.overflow="hidden",J.always(function(){He.overflow=_.overflow[0],He.overflowX=_.overflow[1],He.overflowY=_.overflow[2]})),B=!1;for(T in me)B||(Ze?"hidden"in Ze&&(st=Ze.hidden):Ze=De.access(u,"fxshow",{display:W}),A&&(Ze.hidden=!st),st&&qn([u],!0),J.done(function(){st||qn([u]),De.remove(u,"fxshow");for(T in me)m.style(u,T,me[T])})),B=vh(st?Ze[T]:0,T,J),T in Ze||(Ze[T]=B.start,st&&(B.end=B.start,B.start=0))}}function Mb(u,f){var _,T,x,A,P;for(_ in u)if(T=Wn(_),x=f[T],A=u[_],Array.isArray(A)&&(x=A[1],A=u[_]=A[0]),_!==T&&(u[T]=A,delete u[_]),P=m.cssHooks[T],P&&"expand"in P){A=P.expand(A),delete u[T];for(_ in A)_ in u||(u[_]=A[_],f[_]=x)}else f[T]=x}function di(u,f,_){var T,x,A=0,P=di.prefilters.length,V=m.Deferred().always(function(){delete B.elem}),B=function(){if(x)return!1;for(var se=zr||_h(),J=Math.max(0,W.startTime+W.duration-se),me=J/W.duration||0,He=1-me,st=0,Ze=W.tweens.length;st<Ze;st++)W.tweens[st].run(He);return V.notifyWith(u,[W,He,J]),He<1&&Ze?J:(Ze||V.notifyWith(u,[W,1,0]),V.resolveWith(u,[W]),!1)},W=V.promise({elem:u,props:m.extend({},f),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},_),originalProperties:f,originalOptions:_,startTime:zr||_h(),duration:_.duration,tweens:[],createTween:function(se,J){var me=m.Tween(u,W.opts,se,J,W.opts.specialEasing[se]||W.opts.easing);return W.tweens.push(me),me},stop:function(se){var J=0,me=se?W.tweens.length:0;if(x)return this;for(x=!0;J<me;J++)W.tweens[J].run(1);return se?(V.notifyWith(u,[W,1,0]),V.resolveWith(u,[W,se])):V.rejectWith(u,[W,se]),this}}),ne=W.props;for(Mb(ne,W.opts.specialEasing);A<P;A++)if(T=di.prefilters[A].call(W,u,ne,W.opts),T)return b(T.stop)&&(m._queueHooks(W.elem,W.opts.queue).stop=T.stop.bind(T)),T;return m.map(ne,vh,W),b(W.opts.start)&&W.opts.start.call(u,W),W.progress(W.opts.progress).done(W.opts.done,W.opts.complete).fail(W.opts.fail).always(W.opts.always),m.fx.timer(m.extend(B,{elem:u,anim:W,queue:W.opts.queue})),W}m.Animation=m.extend(di,{tweeners:{"*":[function(u,f){var _=this.createTween(u,f);return Or(_.elem,u,Xi.exec(f),_),_}]},tweener:function(u,f){b(u)?(f=u,u=["*"]):u=u.match(ot);for(var _,T=0,x=u.length;T<x;T++)_=u[T],di.tweeners[_]=di.tweeners[_]||[],di.tweeners[_].unshift(f)},prefilters:[Db],prefilter:function(u,f){f?di.prefilters.unshift(u):di.prefilters.push(u)}}),m.speed=function(u,f,_){var T=u&&typeof u=="object"?m.extend({},u):{complete:_||!_&&f||b(u)&&u,duration:u,easing:_&&f||f&&!b(f)&&f};return m.fx.off?T.duration=0:typeof T.duration!="number"&&(T.duration in m.fx.speeds?T.duration=m.fx.speeds[T.duration]:T.duration=m.fx.speeds._default),(T.queue==null||T.queue===!0)&&(T.queue="fx"),T.old=T.complete,T.complete=function(){b(T.old)&&T.old.call(this),T.queue&&m.dequeue(this,T.queue)},T},m.fn.extend({fadeTo:function(u,f,_,T){return this.filter(Pr).css("opacity",0).show().end().animate({opacity:f},u,_,T)},animate:function(u,f,_,T){var x=m.isEmptyObject(u),A=m.speed(f,_,T),P=function(){var V=di(this,m.extend({},u),A);(x||De.get(this,"finish"))&&V.stop(!0)};return P.finish=P,x||A.queue===!1?this.each(P):this.queue(A.queue,P)},stop:function(u,f,_){var T=function(x){var A=x.stop;delete x.stop,A(_)};return typeof u!="string"&&(_=f,f=u,u=void 0),f&&this.queue(u||"fx",[]),this.each(function(){var x=!0,A=u!=null&&u+"queueHooks",P=m.timers,V=De.get(this);if(A)V[A]&&V[A].stop&&T(V[A]);else for(A in V)V[A]&&V[A].stop&&Ib.test(A)&&T(V[A]);for(A=P.length;A--;)P[A].elem===this&&(u==null||P[A].queue===u)&&(P[A].anim.stop(_),x=!1,P.splice(A,1));(x||!_)&&m.dequeue(this,u)})},finish:function(u){return u!==!1&&(u=u||"fx"),this.each(function(){var f,_=De.get(this),T=_[u+"queue"],x=_[u+"queueHooks"],A=m.timers,P=T?T.length:0;for(_.finish=!0,m.queue(this,u,[]),x&&x.stop&&x.stop.call(this,!0),f=A.length;f--;)A[f].elem===this&&A[f].queue===u&&(A[f].anim.stop(!0),A.splice(f,1));for(f=0;f<P;f++)T[f]&&T[f].finish&&T[f].finish.call(this);delete _.finish})}}),m.each(["toggle","show","hide"],function(u,f){var _=m.fn[f];m.fn[f]=function(T,x,A){return T==null||typeof T=="boolean"?_.apply(this,arguments):this.animate(ka(f,!0),T,x,A)}}),m.each({slideDown:ka("show"),slideUp:ka("hide"),slideToggle:ka("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,f){m.fn[u]=function(_,T,x){return this.animate(f,_,T,x)}}),m.timers=[],m.fx.tick=function(){var u,f=0,_=m.timers;for(zr=Date.now();f<_.length;f++)u=_[f],!u()&&_[f]===u&&_.splice(f--,1);_.length||m.fx.stop(),zr=void 0},m.fx.timer=function(u){m.timers.push(u),m.fx.start()},m.fx.interval=13,m.fx.start=function(){Ua||(Ua=!0,Zu())},m.fx.stop=function(){Ua=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(u,f){return u=m.fx&&m.fx.speeds[u]||u,f=f||"fx",this.queue(f,function(_,T){var x=e.setTimeout(_,u);T.stop=function(){e.clearTimeout(x)}})},function(){var u=R.createElement("input"),f=R.createElement("select"),_=f.appendChild(R.createElement("option"));u.type="checkbox",C.checkOn=u.value!=="",C.optSelected=_.selected,u=R.createElement("input"),u.value="t",u.type="radio",C.radioValue=u.value==="t"}();var Ch,Ds=m.expr.attrHandle;m.fn.extend({attr:function(u,f){return $n(this,m.attr,u,f,arguments.length>1)},removeAttr:function(u){return this.each(function(){m.removeAttr(this,u)})}}),m.extend({attr:function(u,f,_){var T,x,A=u.nodeType;if(!(A===3||A===8||A===2)){if(typeof u.getAttribute>"u")return m.prop(u,f,_);if((A!==1||!m.isXMLDoc(u))&&(x=m.attrHooks[f.toLowerCase()]||(m.expr.match.bool.test(f)?Ch:void 0)),_!==void 0){if(_===null){m.removeAttr(u,f);return}return x&&"set"in x&&(T=x.set(u,_,f))!==void 0?T:(u.setAttribute(f,_+""),_)}return x&&"get"in x&&(T=x.get(u,f))!==null?T:(T=m.find.attr(u,f),T??void 0)}},attrHooks:{type:{set:function(u,f){if(!C.radioValue&&f==="radio"&&q(u,"input")){var _=u.value;return u.setAttribute("type",f),_&&(u.value=_),f}}}},removeAttr:function(u,f){var _,T=0,x=f&&f.match(ot);if(x&&u.nodeType===1)for(;_=x[T++];)u.removeAttribute(_)}}),Ch={set:function(u,f,_){return f===!1?m.removeAttr(u,_):u.setAttribute(_,_),_}},m.each(m.expr.match.bool.source.match(/\w+/g),function(u,f){var _=Ds[f]||m.find.attr;Ds[f]=function(T,x,A){var P,V,B=x.toLowerCase();return A||(V=Ds[B],Ds[B]=P,P=_(T,x,A)!=null?B:null,Ds[B]=V),P}});var zb=/^(?:input|select|textarea|button)$/i,Nb=/^(?:a|area)$/i;m.fn.extend({prop:function(u,f){return $n(this,m.prop,u,f,arguments.length>1)},removeProp:function(u){return this.each(function(){delete this[m.propFix[u]||u]})}}),m.extend({prop:function(u,f,_){var T,x,A=u.nodeType;if(!(A===3||A===8||A===2))return(A!==1||!m.isXMLDoc(u))&&(f=m.propFix[f]||f,x=m.propHooks[f]),_!==void 0?x&&"set"in x&&(T=x.set(u,_,f))!==void 0?T:u[f]=_:x&&"get"in x&&(T=x.get(u,f))!==null?T:u[f]},propHooks:{tabIndex:{get:function(u){var f=m.find.attr(u,"tabindex");return f?parseInt(f,10):zb.test(u.nodeName)||Nb.test(u.nodeName)&&u.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),C.optSelected||(m.propHooks.selected={get:function(u){var f=u.parentNode;return f&&f.parentNode&&f.parentNode.selectedIndex,null},set:function(u){var f=u.parentNode;f&&(f.selectedIndex,f.parentNode&&f.parentNode.selectedIndex)}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this});function Zo(u){var f=u.match(ot)||[];return f.join(" ")}function Xo(u){return u.getAttribute&&u.getAttribute("class")||""}function Xu(u){return Array.isArray(u)?u:typeof u=="string"?u.match(ot)||[]:[]}m.fn.extend({addClass:function(u){var f,_,T,x,A,P;return b(u)?this.each(function(V){m(this).addClass(u.call(this,V,Xo(this)))}):(f=Xu(u),f.length?this.each(function(){if(T=Xo(this),_=this.nodeType===1&&" "+Zo(T)+" ",_){for(A=0;A<f.length;A++)x=f[A],_.indexOf(" "+x+" ")<0&&(_+=x+" ");P=Zo(_),T!==P&&this.setAttribute("class",P)}}):this)},removeClass:function(u){var f,_,T,x,A,P;return b(u)?this.each(function(V){m(this).removeClass(u.call(this,V,Xo(this)))}):arguments.length?(f=Xu(u),f.length?this.each(function(){if(T=Xo(this),_=this.nodeType===1&&" "+Zo(T)+" ",_){for(A=0;A<f.length;A++)for(x=f[A];_.indexOf(" "+x+" ")>-1;)_=_.replace(" "+x+" "," ");P=Zo(_),T!==P&&this.setAttribute("class",P)}}):this):this.attr("class","")},toggleClass:function(u,f){var _,T,x,A,P=typeof u,V=P==="string"||Array.isArray(u);return b(u)?this.each(function(B){m(this).toggleClass(u.call(this,B,Xo(this),f),f)}):typeof f=="boolean"&&V?f?this.addClass(u):this.removeClass(u):(_=Xu(u),this.each(function(){if(V)for(A=m(this),x=0;x<_.length;x++)T=_[x],A.hasClass(T)?A.removeClass(T):A.addClass(T);else(u===void 0||P==="boolean")&&(T=Xo(this),T&&De.set(this,"__className__",T),this.setAttribute&&this.setAttribute("class",T||u===!1?"":De.get(this,"__className__")||""))}))},hasClass:function(u){var f,_,T=0;for(f=" "+u+" ";_=this[T++];)if(_.nodeType===1&&(" "+Zo(Xo(_))+" ").indexOf(f)>-1)return!0;return!1}});var Lb=/\r/g;m.fn.extend({val:function(u){var f,_,T,x=this[0];return arguments.length?(T=b(u),this.each(function(A){var P;this.nodeType===1&&(T?P=u.call(this,A,m(this).val()):P=u,P==null?P="":typeof P=="number"?P+="":Array.isArray(P)&&(P=m.map(P,function(V){return V==null?"":V+""})),f=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],(!f||!("set"in f)||f.set(this,P,"value")===void 0)&&(this.value=P))})):x?(f=m.valHooks[x.type]||m.valHooks[x.nodeName.toLowerCase()],f&&"get"in f&&(_=f.get(x,"value"))!==void 0?_:(_=x.value,typeof _=="string"?_.replace(Lb,""):_??"")):void 0}}),m.extend({valHooks:{option:{get:function(u){var f=m.find.attr(u,"value");return f??Zo(m.text(u))}},select:{get:function(u){var f,_,T,x=u.options,A=u.selectedIndex,P=u.type==="select-one",V=P?null:[],B=P?A+1:x.length;for(A<0?T=B:T=P?A:0;T<B;T++)if(_=x[T],(_.selected||T===A)&&!_.disabled&&(!_.parentNode.disabled||!q(_.parentNode,"optgroup"))){if(f=m(_).val(),P)return f;V.push(f)}return V},set:function(u,f){for(var _,T,x=u.options,A=m.makeArray(f),P=x.length;P--;)T=x[P],(T.selected=m.inArray(m.valHooks.option.get(T),A)>-1)&&(_=!0);return _||(u.selectedIndex=-1),A}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(u,f){if(Array.isArray(f))return u.checked=m.inArray(m(u).val(),f)>-1}},C.checkOn||(m.valHooks[this].get=function(u){return u.getAttribute("value")===null?"on":u.value})});var Ms=e.location,bh={guid:Date.now()},$u=/\?/;m.parseXML=function(u){var f,_;if(!u||typeof u!="string")return null;try{f=new e.DOMParser().parseFromString(u,"text/xml")}catch{}return _=f&&f.getElementsByTagName("parsererror")[0],(!f||_)&&m.error("Invalid XML: "+(_?m.map(_.childNodes,function(T){return T.textContent}).join(`
`):u)),f};var Th=/^(?:focusinfocus|focusoutblur)$/,Eh=function(u){u.stopPropagation()};m.extend(m.event,{trigger:function(u,f,_,T){var x,A,P,V,B,W,ne,se,J=[_||R],me=d.call(u,"type")?u.type:u,He=d.call(u,"namespace")?u.namespace.split("."):[];if(A=se=P=_=_||R,!(_.nodeType===3||_.nodeType===8)&&!Th.test(me+m.event.triggered)&&(me.indexOf(".")>-1&&(He=me.split("."),me=He.shift(),He.sort()),B=me.indexOf(":")<0&&"on"+me,u=u[m.expando]?u:new m.Event(me,typeof u=="object"&&u),u.isTrigger=T?2:3,u.namespace=He.join("."),u.rnamespace=u.namespace?new RegExp("(^|\\.)"+He.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=_),f=f==null?[u]:m.makeArray(f,[u]),ne=m.event.special[me]||{},!(!T&&ne.trigger&&ne.trigger.apply(_,f)===!1))){if(!T&&!ne.noBubble&&!w(_)){for(V=ne.delegateType||me,Th.test(V+me)||(A=A.parentNode);A;A=A.parentNode)J.push(A),P=A;P===(_.ownerDocument||R)&&J.push(P.defaultView||P.parentWindow||e)}for(x=0;(A=J[x++])&&!u.isPropagationStopped();)se=A,u.type=x>1?V:ne.bindType||me,W=(De.get(A,"events")||Object.create(null))[u.type]&&De.get(A,"handle"),W&&W.apply(A,f),W=B&&A[B],W&&W.apply&&_o(A)&&(u.result=W.apply(A,f),u.result===!1&&u.preventDefault());return u.type=me,!T&&!u.isDefaultPrevented()&&(!ne._default||ne._default.apply(J.pop(),f)===!1)&&_o(_)&&B&&b(_[me])&&!w(_)&&(P=_[B],P&&(_[B]=null),m.event.triggered=me,u.isPropagationStopped()&&se.addEventListener(me,Eh),_[me](),u.isPropagationStopped()&&se.removeEventListener(me,Eh),m.event.triggered=void 0,P&&(_[B]=P)),u.result}},simulate:function(u,f,_){var T=m.extend(new m.Event,_,{type:u,isSimulated:!0});m.event.trigger(T,null,f)}}),m.fn.extend({trigger:function(u,f){return this.each(function(){m.event.trigger(u,f,this)})},triggerHandler:function(u,f){var _=this[0];if(_)return m.event.trigger(u,f,_,!0)}});var Bb=/\[\]$/,wh=/\r?\n/g,Fb=/^(?:submit|button|image|reset|file)$/i,Vb=/^(?:input|select|textarea|keygen)/i;function Ku(u,f,_,T){var x;if(Array.isArray(f))m.each(f,function(A,P){_||Bb.test(u)?T(u,P):Ku(u+"["+(typeof P=="object"&&P!=null?A:"")+"]",P,_,T)});else if(!_&&z(f)==="object")for(x in f)Ku(u+"["+x+"]",f[x],_,T);else T(u,f)}m.param=function(u,f){var _,T=[],x=function(A,P){var V=b(P)?P():P;T[T.length]=encodeURIComponent(A)+"="+encodeURIComponent(V??"")};if(u==null)return"";if(Array.isArray(u)||u.jquery&&!m.isPlainObject(u))m.each(u,function(){x(this.name,this.value)});else for(_ in u)Ku(_,u[_],f,x);return T.join("&")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=m.prop(this,"elements");return u?m.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!m(this).is(":disabled")&&Vb.test(this.nodeName)&&!Fb.test(u)&&(this.checked||!Os.test(u))}).map(function(u,f){var _=m(this).val();return _==null?null:Array.isArray(_)?m.map(_,function(T){return{name:f.name,value:T.replace(wh,`\r
`)}}):{name:f.name,value:_.replace(wh,`\r
`)}}).get()}});var Ub=/%20/g,kb=/#.*$/,Gb=/([?&])_=[^&]*/,Hb=/^(.*?):[ \t]*([^\r\n]*)$/mg,jb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wb=/^(?:GET|HEAD)$/,qb=/^\/\//,Sh={},Qu={},xh="*/".concat("*"),Ju=R.createElement("a");Ju.href=Ms.href;function Ah(u){return function(f,_){typeof f!="string"&&(_=f,f="*");var T,x=0,A=f.toLowerCase().match(ot)||[];if(b(_))for(;T=A[x++];)T[0]==="+"?(T=T.slice(1)||"*",(u[T]=u[T]||[]).unshift(_)):(u[T]=u[T]||[]).push(_)}}function Rh(u,f,_,T){var x={},A=u===Qu;function P(V){var B;return x[V]=!0,m.each(u[V]||[],function(W,ne){var se=ne(f,_,T);if(typeof se=="string"&&!A&&!x[se])return f.dataTypes.unshift(se),P(se),!1;if(A)return!(B=se)}),B}return P(f.dataTypes[0])||!x["*"]&&P("*")}function el(u,f){var _,T,x=m.ajaxSettings.flatOptions||{};for(_ in f)f[_]!==void 0&&((x[_]?u:T||(T={}))[_]=f[_]);return T&&m.extend(!0,u,T),u}function Yb(u,f,_){for(var T,x,A,P,V=u.contents,B=u.dataTypes;B[0]==="*";)B.shift(),T===void 0&&(T=u.mimeType||f.getResponseHeader("Content-Type"));if(T){for(x in V)if(V[x]&&V[x].test(T)){B.unshift(x);break}}if(B[0]in _)A=B[0];else{for(x in _){if(!B[0]||u.converters[x+" "+B[0]]){A=x;break}P||(P=x)}A=A||P}if(A)return A!==B[0]&&B.unshift(A),_[A]}function Zb(u,f,_,T){var x,A,P,V,B,W={},ne=u.dataTypes.slice();if(ne[1])for(P in u.converters)W[P.toLowerCase()]=u.converters[P];for(A=ne.shift();A;)if(u.responseFields[A]&&(_[u.responseFields[A]]=f),!B&&T&&u.dataFilter&&(f=u.dataFilter(f,u.dataType)),B=A,A=ne.shift(),A){if(A==="*")A=B;else if(B!=="*"&&B!==A){if(P=W[B+" "+A]||W["* "+A],!P){for(x in W)if(V=x.split(" "),V[1]===A&&(P=W[B+" "+V[0]]||W["* "+V[0]],P)){P===!0?P=W[x]:W[x]!==!0&&(A=V[0],ne.unshift(V[1]));break}}if(P!==!0)if(P&&u.throws)f=P(f);else try{f=P(f)}catch(se){return{state:"parsererror",error:P?se:"No conversion from "+B+" to "+A}}}}return{state:"success",data:f}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ms.href,type:"GET",isLocal:jb.test(Ms.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xh,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,f){return f?el(el(u,m.ajaxSettings),f):el(m.ajaxSettings,u)},ajaxPrefilter:Ah(Sh),ajaxTransport:Ah(Qu),ajax:function(u,f){typeof u=="object"&&(f=u,u=void 0),f=f||{};var _,T,x,A,P,V,B,W,ne,se,J=m.ajaxSetup({},f),me=J.context||J,He=J.context&&(me.nodeType||me.jquery)?m(me):m.event,st=m.Deferred(),Ze=m.Callbacks("once memory"),un=J.statusCode||{},Kt={},Ai={},Ri="canceled",tt={readyState:0,getResponseHeader:function(ct){var Gt;if(B){if(!A)for(A={};Gt=Hb.exec(x);)A[Gt[1].toLowerCase()+" "]=(A[Gt[1].toLowerCase()+" "]||[]).concat(Gt[2]);Gt=A[ct.toLowerCase()+" "]}return Gt==null?null:Gt.join(", ")},getAllResponseHeaders:function(){return B?x:null},setRequestHeader:function(ct,Gt){return B==null&&(ct=Ai[ct.toLowerCase()]=Ai[ct.toLowerCase()]||ct,Kt[ct]=Gt),this},overrideMimeType:function(ct){return B==null&&(J.mimeType=ct),this},statusCode:function(ct){var Gt;if(ct)if(B)tt.always(ct[tt.status]);else for(Gt in ct)un[Gt]=[un[Gt],ct[Gt]];return this},abort:function(ct){var Gt=ct||Ri;return _&&_.abort(Gt),$o(0,Gt),this}};if(st.promise(tt),J.url=((u||J.url||Ms.href)+"").replace(qb,Ms.protocol+"//"),J.type=f.method||f.type||J.method||J.type,J.dataTypes=(J.dataType||"*").toLowerCase().match(ot)||[""],J.crossDomain==null){V=R.createElement("a");try{V.href=J.url,V.href=V.href,J.crossDomain=Ju.protocol+"//"+Ju.host!=V.protocol+"//"+V.host}catch{J.crossDomain=!0}}if(J.data&&J.processData&&typeof J.data!="string"&&(J.data=m.param(J.data,J.traditional)),Rh(Sh,J,f,tt),B)return tt;W=m.event&&J.global,W&&m.active++===0&&m.event.trigger("ajaxStart"),J.type=J.type.toUpperCase(),J.hasContent=!Wb.test(J.type),T=J.url.replace(kb,""),J.hasContent?J.data&&J.processData&&(J.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(J.data=J.data.replace(Ub,"+")):(se=J.url.slice(T.length),J.data&&(J.processData||typeof J.data=="string")&&(T+=($u.test(T)?"&":"?")+J.data,delete J.data),J.cache===!1&&(T=T.replace(Gb,"$1"),se=($u.test(T)?"&":"?")+"_="+bh.guid+++se),J.url=T+se),J.ifModified&&(m.lastModified[T]&&tt.setRequestHeader("If-Modified-Since",m.lastModified[T]),m.etag[T]&&tt.setRequestHeader("If-None-Match",m.etag[T])),(J.data&&J.hasContent&&J.contentType!==!1||f.contentType)&&tt.setRequestHeader("Content-Type",J.contentType),tt.setRequestHeader("Accept",J.dataTypes[0]&&J.accepts[J.dataTypes[0]]?J.accepts[J.dataTypes[0]]+(J.dataTypes[0]!=="*"?", "+xh+"; q=0.01":""):J.accepts["*"]);for(ne in J.headers)tt.setRequestHeader(ne,J.headers[ne]);if(J.beforeSend&&(J.beforeSend.call(me,tt,J)===!1||B))return tt.abort();if(Ri="abort",Ze.add(J.complete),tt.done(J.success),tt.fail(J.error),_=Rh(Qu,J,f,tt),!_)$o(-1,"No Transport");else{if(tt.readyState=1,W&&He.trigger("ajaxSend",[tt,J]),B)return tt;J.async&&J.timeout>0&&(P=e.setTimeout(function(){tt.abort("timeout")},J.timeout));try{B=!1,_.send(Kt,$o)}catch(ct){if(B)throw ct;$o(-1,ct)}}function $o(ct,Gt,Ns,nl){var Pi,Ls,Oi,vo,Co,Qn=Gt;B||(B=!0,P&&e.clearTimeout(P),_=void 0,x=nl||"",tt.readyState=ct>0?4:0,Pi=ct>=200&&ct<300||ct===304,Ns&&(vo=Yb(J,tt,Ns)),!Pi&&m.inArray("script",J.dataTypes)>-1&&m.inArray("json",J.dataTypes)<0&&(J.converters["text script"]=function(){}),vo=Zb(J,vo,tt,Pi),Pi?(J.ifModified&&(Co=tt.getResponseHeader("Last-Modified"),Co&&(m.lastModified[T]=Co),Co=tt.getResponseHeader("etag"),Co&&(m.etag[T]=Co)),ct===204||J.type==="HEAD"?Qn="nocontent":ct===304?Qn="notmodified":(Qn=vo.state,Ls=vo.data,Oi=vo.error,Pi=!Oi)):(Oi=Qn,(ct||!Qn)&&(Qn="error",ct<0&&(ct=0))),tt.status=ct,tt.statusText=(Gt||Qn)+"",Pi?st.resolveWith(me,[Ls,Qn,tt]):st.rejectWith(me,[tt,Qn,Oi]),tt.statusCode(un),un=void 0,W&&He.trigger(Pi?"ajaxSuccess":"ajaxError",[tt,J,Pi?Ls:Oi]),Ze.fireWith(me,[tt,Qn]),W&&(He.trigger("ajaxComplete",[tt,J]),--m.active||m.event.trigger("ajaxStop")))}return tt},getJSON:function(u,f,_){return m.get(u,f,_,"json")},getScript:function(u,f){return m.get(u,void 0,f,"script")}}),m.each(["get","post"],function(u,f){m[f]=function(_,T,x,A){return b(T)&&(A=A||x,x=T,T=void 0),m.ajax(m.extend({url:_,type:f,dataType:A,data:T,success:x},m.isPlainObject(_)&&_))}}),m.ajaxPrefilter(function(u){var f;for(f in u.headers)f.toLowerCase()==="content-type"&&(u.contentType=u.headers[f]||"")}),m._evalUrl=function(u,f,_){return m.ajax({url:u,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(T){m.globalEval(T,f,_)}})},m.fn.extend({wrapAll:function(u){var f;return this[0]&&(b(u)&&(u=u.call(this[0])),f=m(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&f.insertBefore(this[0]),f.map(function(){for(var _=this;_.firstElementChild;)_=_.firstElementChild;return _}).append(this)),this},wrapInner:function(u){return b(u)?this.each(function(f){m(this).wrapInner(u.call(this,f))}):this.each(function(){var f=m(this),_=f.contents();_.length?_.wrapAll(u):f.append(u)})},wrap:function(u){var f=b(u);return this.each(function(_){m(this).wrapAll(f?u.call(this,_):u)})},unwrap:function(u){return this.parent(u).not("body").each(function(){m(this).replaceWith(this.childNodes)}),this}}),m.expr.pseudos.hidden=function(u){return!m.expr.pseudos.visible(u)},m.expr.pseudos.visible=function(u){return!!(u.offsetWidth||u.offsetHeight||u.getClientRects().length)},m.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Xb={0:200,1223:204},zs=m.ajaxSettings.xhr();C.cors=!!zs&&"withCredentials"in zs,C.ajax=zs=!!zs,m.ajaxTransport(function(u){var f,_;if(C.cors||zs&&!u.crossDomain)return{send:function(T,x){var A,P=u.xhr();if(P.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(A in u.xhrFields)P[A]=u.xhrFields[A];u.mimeType&&P.overrideMimeType&&P.overrideMimeType(u.mimeType),!u.crossDomain&&!T["X-Requested-With"]&&(T["X-Requested-With"]="XMLHttpRequest");for(A in T)P.setRequestHeader(A,T[A]);f=function(V){return function(){f&&(f=_=P.onload=P.onerror=P.onabort=P.ontimeout=P.onreadystatechange=null,V==="abort"?P.abort():V==="error"?typeof P.status!="number"?x(0,"error"):x(P.status,P.statusText):x(Xb[P.status]||P.status,P.statusText,(P.responseType||"text")!=="text"||typeof P.responseText!="string"?{binary:P.response}:{text:P.responseText},P.getAllResponseHeaders()))}},P.onload=f(),_=P.onerror=P.ontimeout=f("error"),P.onabort!==void 0?P.onabort=_:P.onreadystatechange=function(){P.readyState===4&&e.setTimeout(function(){f&&_()})},f=f("abort");try{P.send(u.hasContent&&u.data||null)}catch(V){if(f)throw V}},abort:function(){f&&f()}}}),m.ajaxPrefilter(function(u){u.crossDomain&&(u.contents.script=!1)}),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(u){return m.globalEval(u),u}}}),m.ajaxPrefilter("script",function(u){u.cache===void 0&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),m.ajaxTransport("script",function(u){if(u.crossDomain||u.scriptAttrs){var f,_;return{send:function(T,x){f=m("<script>").attr(u.scriptAttrs||{}).prop({charset:u.scriptCharset,src:u.url}).on("load error",_=function(A){f.remove(),_=null,A&&x(A.type==="error"?404:200,A.type)}),R.head.appendChild(f[0])},abort:function(){_&&_()}}}});var Ph=[],tl=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=Ph.pop()||m.expando+"_"+bh.guid++;return this[u]=!0,u}}),m.ajaxPrefilter("json jsonp",function(u,f,_){var T,x,A,P=u.jsonp!==!1&&(tl.test(u.url)?"url":typeof u.data=="string"&&(u.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&tl.test(u.data)&&"data");if(P||u.dataTypes[0]==="jsonp")return T=u.jsonpCallback=b(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,P?u[P]=u[P].replace(tl,"$1"+T):u.jsonp!==!1&&(u.url+=($u.test(u.url)?"&":"?")+u.jsonp+"="+T),u.converters["script json"]=function(){return A||m.error(T+" was not called"),A[0]},u.dataTypes[0]="json",x=e[T],e[T]=function(){A=arguments},_.always(function(){x===void 0?m(e).removeProp(T):e[T]=x,u[T]&&(u.jsonpCallback=f.jsonpCallback,Ph.push(T)),A&&b(x)&&x(A[0]),A=x=void 0}),"script"}),C.createHTMLDocument=function(){var u=R.implementation.createHTMLDocument("").body;return u.innerHTML="<form></form><form></form>",u.childNodes.length===2}(),m.parseHTML=function(u,f,_){if(typeof u!="string")return[];typeof f=="boolean"&&(_=f,f=!1);var T,x,A;return f||(C.createHTMLDocument?(f=R.implementation.createHTMLDocument(""),T=f.createElement("base"),T.href=R.location.href,f.head.appendChild(T)):f=R),x=Be.exec(u),A=!_&&[],x?[f.createElement(x[1])]:(x=rh([u],f,A),A&&A.length&&m(A).remove(),m.merge([],x.childNodes))},m.fn.load=function(u,f,_){var T,x,A,P=this,V=u.indexOf(" ");return V>-1&&(T=Zo(u.slice(V)),u=u.slice(0,V)),b(f)?(_=f,f=void 0):f&&typeof f=="object"&&(x="POST"),P.length>0&&m.ajax({url:u,type:x||"GET",dataType:"html",data:f}).done(function(B){A=arguments,P.html(T?m("<div>").append(m.parseHTML(B)).find(T):B)}).always(_&&function(B,W){P.each(function(){_.apply(this,A||[B.responseText,W,B])})}),this},m.expr.pseudos.animated=function(u){return m.grep(m.timers,function(f){return u===f.elem}).length},m.offset={setOffset:function(u,f,_){var T,x,A,P,V,B,W,ne=m.css(u,"position"),se=m(u),J={};ne==="static"&&(u.style.position="relative"),V=se.offset(),A=m.css(u,"top"),B=m.css(u,"left"),W=(ne==="absolute"||ne==="fixed")&&(A+B).indexOf("auto")>-1,W?(T=se.position(),P=T.top,x=T.left):(P=parseFloat(A)||0,x=parseFloat(B)||0),b(f)&&(f=f.call(u,_,m.extend({},V))),f.top!=null&&(J.top=f.top-V.top+P),f.left!=null&&(J.left=f.left-V.left+x),"using"in f?f.using.call(u,J):se.css(J)}},m.fn.extend({offset:function(u){if(arguments.length)return u===void 0?this:this.each(function(x){m.offset.setOffset(this,u,x)});var f,_,T=this[0];if(T)return T.getClientRects().length?(f=T.getBoundingClientRect(),_=T.ownerDocument.defaultView,{top:f.top+_.pageYOffset,left:f.left+_.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var u,f,_,T=this[0],x={top:0,left:0};if(m.css(T,"position")==="fixed")f=T.getBoundingClientRect();else{for(f=this.offset(),_=T.ownerDocument,u=T.offsetParent||_.documentElement;u&&(u===_.body||u===_.documentElement)&&m.css(u,"position")==="static";)u=u.parentNode;u&&u!==T&&u.nodeType===1&&(x=m(u).offset(),x.top+=m.css(u,"borderTopWidth",!0),x.left+=m.css(u,"borderLeftWidth",!0))}return{top:f.top-x.top-m.css(T,"marginTop",!0),left:f.left-x.left-m.css(T,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent;u&&m.css(u,"position")==="static";)u=u.offsetParent;return u||fi})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,f){var _=f==="pageYOffset";m.fn[u]=function(T){return $n(this,function(x,A,P){var V;if(w(x)?V=x:x.nodeType===9&&(V=x.defaultView),P===void 0)return V?V[f]:x[A];V?V.scrollTo(_?V.pageXOffset:P,_?P:V.pageYOffset):x[A]=P},u,T,arguments.length)}}),m.each(["top","left"],function(u,f){m.cssHooks[f]=fh(C.pixelPosition,function(_,T){if(T)return T=Is(_,f),ju.test(T)?m(_).position()[f]+"px":T})}),m.each({Height:"height",Width:"width"},function(u,f){m.each({padding:"inner"+u,content:f,"":"outer"+u},function(_,T){m.fn[T]=function(x,A){var P=arguments.length&&(_||typeof x!="boolean"),V=_||(x===!0||A===!0?"margin":"border");return $n(this,function(B,W,ne){var se;return w(B)?T.indexOf("outer")===0?B["inner"+u]:B.document.documentElement["client"+u]:B.nodeType===9?(se=B.documentElement,Math.max(B.body["scroll"+u],se["scroll"+u],B.body["offset"+u],se["offset"+u],se["client"+u])):ne===void 0?m.css(B,W,V):m.style(B,W,ne,V)},f,P?x:void 0,P)}})}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,f){m.fn[f]=function(_){return this.on(f,_)}}),m.fn.extend({bind:function(u,f,_){return this.on(u,null,f,_)},unbind:function(u,f){return this.off(u,null,f)},delegate:function(u,f,_,T){return this.on(f,u,_,T)},undelegate:function(u,f,_){return arguments.length===1?this.off(u,"**"):this.off(f,u||"**",_)},hover:function(u,f){return this.mouseenter(u).mouseleave(f||u)}}),m.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(u,f){m.fn[f]=function(_,T){return arguments.length>0?this.on(f,null,_,T):this.trigger(f)}});var $b=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;m.proxy=function(u,f){var _,T,x;if(typeof f=="string"&&(_=u[f],f=u,u=_),!!b(u))return T=o.call(arguments,2),x=function(){return u.apply(f||this,T.concat(o.call(arguments)))},x.guid=u.guid=u.guid||m.guid++,x},m.holdReady=function(u){u?m.readyWait++:m.ready(!0)},m.isArray=Array.isArray,m.parseJSON=JSON.parse,m.nodeName=q,m.isFunction=b,m.isWindow=w,m.camelCase=Wn,m.type=z,m.now=Date.now,m.isNumeric=function(u){var f=m.type(u);return(f==="number"||f==="string")&&!isNaN(u-parseFloat(u))},m.trim=function(u){return u==null?"":(u+"").replace($b,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return m});var Kb=e.jQuery,Qb=e.$;return m.noConflict=function(u){return e.$===m&&(e.$=Qb),u&&e.jQuery===m&&(e.jQuery=Kb),m},typeof t>"u"&&(e.jQuery=e.$=m),m})});var Ym=Ft((KM,qm)=>{var no=function(e){e==null&&(e=new Date().getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};no.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){var e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(((e&4294901760)>>>16)*1812433253<<16)+(e&65535)*1812433253+this.mti,this.mt[this.mti]>>>=0}};no.prototype.init_by_array=function(e,t){var n,i,o;for(this.init_seed(19650218),n=1,i=0,o=this.N>t?this.N:t;o;o--){var r=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(((r&4294901760)>>>16)*1664525<<16)+(r&65535)*1664525)+e[i]+i,this.mt[n]>>>=0,n++,i++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),i>=t&&(i=0)}for(o=this.N-1;o;o--){var r=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(((r&4294901760)>>>16)*1566083941<<16)+(r&65535)*1566083941)-n,this.mt[n]>>>=0,n++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648};no.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[e&1];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[e&1];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[e&1],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,e>>>0};no.prototype.random_int31=function(){return this.random_int()>>>1};no.prototype.random_incl=function(){return this.random_int()*(1/4294967295)};no.prototype.random=function(){return this.random_int()*(1/4294967296)};no.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)};no.prototype.random_long=function(){var e=this.random_int()>>>5,t=this.random_int()>>>6;return(e*67108864+t)*(1/9007199254740992)};qm.exports=no});var G0=Ft((ps,ms)=>{/*! https://mths.be/punycode v1.4.0 by @mathias */(function(e){var t=typeof ps=="object"&&ps&&!ps.nodeType&&ps,n=typeof ms=="object"&&ms&&!ms.nodeType&&ms,i=typeof global=="object"&&global;(i.global===i||i.window===i||i.self===i)&&(e=i);var o,r=2147483647,s=36,a=1,c=26,l=38,d=700,h=72,g=128,C="-",b=/^xn--/,w=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=s-a,z=Math.floor,U=String.fromCharCode,Y;function m(j){throw new RangeError(D[j])}function Q(j,le){for(var be=j.length,Be=[];be--;)Be[be]=le(j[be]);return Be}function q(j,le){var be=j.split("@"),Be="";be.length>1&&(Be=be[0]+"@",j=be[1]),j=j.replace(R,".");var Ue=j.split("."),$e=Q(Ue,le).join(".");return Be+$e}function Z(j){for(var le=[],be=0,Be=j.length,Ue,$e;be<Be;)Ue=j.charCodeAt(be++),Ue>=55296&&Ue<=56319&&be<Be?($e=j.charCodeAt(be++),($e&64512)==56320?le.push(((Ue&1023)<<10)+($e&1023)+65536):(le.push(Ue),be--)):le.push(Ue);return le}function H(j){return Q(j,function(le){var be="";return le>65535&&(le-=65536,be+=U(le>>>10&1023|55296),le=56320|le&1023),be+=U(le),be}).join("")}function K(j){return j-48<10?j-22:j-65<26?j-65:j-97<26?j-97:s}function v(j,le){return j+22+75*(j<26)-((le!=0)<<5)}function S(j,le,be){var Be=0;for(j=be?z(j/d):j>>1,j+=z(j/le);j>M*c>>1;Be+=s)j=z(j/M);return z(Be+(M+1)*j/(j+l))}function I(j){var le=[],be=j.length,Be,Ue=0,$e=g,Xe=h,ht,_t,Ct,mt,ot,Ye,Mt,Xt,gn;for(ht=j.lastIndexOf(C),ht<0&&(ht=0),_t=0;_t<ht;++_t)j.charCodeAt(_t)>=128&&m("not-basic"),le.push(j.charCodeAt(_t));for(Ct=ht>0?ht+1:0;Ct<be;){for(mt=Ue,ot=1,Ye=s;Ct>=be&&m("invalid-input"),Mt=K(j.charCodeAt(Ct++)),(Mt>=s||Mt>z((r-Ue)/ot))&&m("overflow"),Ue+=Mt*ot,Xt=Ye<=Xe?a:Ye>=Xe+c?c:Ye-Xe,!(Mt<Xt);Ye+=s)gn=s-Xt,ot>z(r/gn)&&m("overflow"),ot*=gn;Be=le.length+1,Xe=S(Ue-mt,Be,mt==0),z(Ue/Be)>r-$e&&m("overflow"),$e+=z(Ue/Be),Ue%=Be,le.splice(Ue++,0,$e)}return H(le)}function F(j){var le,be,Be,Ue,$e,Xe,ht,_t,Ct,mt,ot,Ye=[],Mt,Xt,gn,ui;for(j=Z(j),Mt=j.length,le=g,be=0,$e=h,Xe=0;Xe<Mt;++Xe)ot=j[Xe],ot<128&&Ye.push(U(ot));for(Be=Ue=Ye.length,Ue&&Ye.push(C);Be<Mt;){for(ht=r,Xe=0;Xe<Mt;++Xe)ot=j[Xe],ot>=le&&ot<ht&&(ht=ot);for(Xt=Be+1,ht-le>z((r-be)/Xt)&&m("overflow"),be+=(ht-le)*Xt,le=ht,Xe=0;Xe<Mt;++Xe)if(ot=j[Xe],ot<le&&++be>r&&m("overflow"),ot==le){for(_t=be,Ct=s;mt=Ct<=$e?a:Ct>=$e+c?c:Ct-$e,!(_t<mt);Ct+=s)ui=_t-mt,gn=s-mt,Ye.push(U(v(mt+ui%gn,0))),_t=z(ui/gn);Ye.push(U(v(_t,0))),$e=S(be,Xt,Be==Ue),be=0,++Be}++be,++le}return Ye.join("")}function X(j){return q(j,function(le){return b.test(le)?I(le.slice(4).toLowerCase()):le})}function ie(j){return q(j,function(le){return w.test(le)?"xn--"+F(le):le})}if(o={version:"1.3.2",ucs2:{decode:Z,encode:H},decode:I,encode:F,toASCII:ie,toUnicode:X},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return o});else if(t&&n)if(ms.exports==t)n.exports=o;else for(Y in o)o.hasOwnProperty(Y)&&(t[Y]=o[Y]);else e.punycode=o})(ps)});var j0=Ft((H0,Kc)=>{/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(e,t){"use strict";typeof Kc=="object"&&Kc.exports?Kc.exports=t():typeof define=="function"&&define.amd?define(t):e.IPv6=t(e)})(H0,function(e){"use strict";var t=e&&e.IPv6;function n(o){var r=o.toLowerCase(),s=r.split(":"),a=s.length,c=8;s[0]===""&&s[1]===""&&s[2]===""?(s.shift(),s.shift()):s[0]===""&&s[1]===""?s.shift():s[a-1]===""&&s[a-2]===""&&s.pop(),a=s.length,s[a-1].indexOf(".")!==-1&&(c=7);var l;for(l=0;l<a&&s[l]!=="";l++);if(l<c)for(s.splice(l,1,"0000");s.length<c;)s.splice(l,0,"0000");for(var d,h=0;h<c;h++){d=s[h].split("");for(var g=0;g<3&&(d[0]==="0"&&d.length>1);g++)d.splice(0,1);s[h]=d.join("")}var C=-1,b=0,w=0,R=-1,D=!1;for(h=0;h<c;h++)D?s[h]==="0"?w+=1:(D=!1,w>b&&(C=R,b=w)):s[h]==="0"&&(D=!0,R=h,w=1);w>b&&(C=R,b=w),b>1&&s.splice(C,b,""),a=s.length;var M="";for(s[0]===""&&(M=":"),h=0;h<a&&(M+=s[h],h!==a-1);h++)M+=":";return s[a-1]===""&&(M+=":"),M}function i(){return e.IPv6===this&&(e.IPv6=t),this}return{best:n,noConflict:i}})});var q0=Ft((W0,Qc)=>{/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(e,t){"use strict";typeof Qc=="object"&&Qc.exports?Qc.exports=t():typeof define=="function"&&define.amd?define(t):e.SecondLevelDomains=t(e)})(W0,function(e){"use strict";var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return!1;var r=i.lastIndexOf(".",o-1);if(r<=0||r>=o-1)return!1;var s=n.list[i.slice(o+1)];return s?s.indexOf(" "+i.slice(r+1,o)+" ")>=0:!1},is:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return!1;var r=i.lastIndexOf(".",o-1);if(r>=0)return!1;var s=n.list[i.slice(o+1)];return s?s.indexOf(" "+i.slice(0,o)+" ")>=0:!1},get:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return null;var r=i.lastIndexOf(".",o-1);if(r<=0||r>=o-1)return null;var s=n.list[i.slice(o+1)];return!s||s.indexOf(" "+i.slice(r+1,o)+" ")<0?null:i.slice(r+1)},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n})});var Bo=Ft((Y0,Jc)=>{/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(e,t){"use strict";typeof Jc=="object"&&Jc.exports?Jc.exports=t(G0(),j0(),q0()):typeof define=="function"&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)})(Y0,function(e,t,n,i){"use strict";var o=i&&i.URI;function r(v,S){var I=arguments.length>=1,F=arguments.length>=2;if(!(this instanceof r))return I?F?new r(v,S):new r(v):new r;if(v===void 0){if(I)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?v=location.href+"":v=""}if(v===null&&I)throw new TypeError("null is not a valid argument for URI");return this.href(v),S!==void 0?this.absoluteTo(S):this}function s(v){return/^[0-9]+$/.test(v)}r.version="1.19.11";var a=r.prototype,c=Object.prototype.hasOwnProperty;function l(v){return v.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function d(v){return v===void 0?"Undefined":String(Object.prototype.toString.call(v)).slice(8,-1)}function h(v){return d(v)==="Array"}function g(v,S){var I={},F,X;if(d(S)==="RegExp")I=null;else if(h(S))for(F=0,X=S.length;F<X;F++)I[S[F]]=!0;else I[S]=!0;for(F=0,X=v.length;F<X;F++){var ie=I&&I[v[F]]!==void 0||!I&&S.test(v[F]);ie&&(v.splice(F,1),X--,F--)}return v}function C(v,S){var I,F;if(h(S)){for(I=0,F=S.length;I<F;I++)if(!C(v,S[I]))return!1;return!0}var X=d(S);for(I=0,F=v.length;I<F;I++)if(X==="RegExp"){if(typeof v[I]=="string"&&v[I].match(S))return!0}else if(v[I]===S)return!0;return!1}function b(v,S){if(!h(v)||!h(S)||v.length!==S.length)return!1;v.sort(),S.sort();for(var I=0,F=v.length;I<F;I++)if(v[I]!==S[I])return!1;return!0}function w(v){var S=/^\/+|\/+$/g;return v.replace(S,"")}r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:r.preventInvalidHostname,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.preventInvalidHostname=!1,r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\._-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},r.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,r.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.hostProtocols=["http","https"],r.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},r.getDomAttribute=function(v){if(!(!v||!v.nodeName)){var S=v.nodeName.toLowerCase();if(!(S==="input"&&v.type!=="image"))return r.domAttributes[S]}};function R(v){return escape(v)}function D(v){return encodeURIComponent(v).replace(/[!'()*]/g,R).replace(/\*/g,"%2A")}r.encode=D,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=D,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},r.encodeQuery=function(v,S){var I=r.encode(v+"");return S===void 0&&(S=r.escapeQuerySpace),S?I.replace(/%20/g,"+"):I},r.decodeQuery=function(v,S){v+="",S===void 0&&(S=r.escapeQuerySpace);try{return r.decode(S?v.replace(/\+/g,"%20"):v)}catch{return v}};var M={encode:"encode",decode:"decode"},z,U=function(v,S){return function(I){try{return r[S](I+"").replace(r.characters[v][S].expression,function(F){return r.characters[v][S].map[F]})}catch{return I}}};for(z in M)r[z+"PathSegment"]=U("pathname",M[z]),r[z+"UrnPathSegment"]=U("urnpath",M[z]);var Y=function(v,S,I){return function(F){var X;I?X=function(be){return r[S](r[I](be))}:X=r[S];for(var ie=(F+"").split(v),j=0,le=ie.length;j<le;j++)ie[j]=X(ie[j]);return ie.join(v)}};r.decodePath=Y("/","decodePathSegment"),r.decodeUrnPath=Y(":","decodeUrnPathSegment"),r.recodePath=Y("/","encodePathSegment","decode"),r.recodeUrnPath=Y(":","encodeUrnPathSegment","decode"),r.encodeReserved=U("reserved","encode"),r.parse=function(v,S){var I;return S||(S={preventInvalidHostname:r.preventInvalidHostname}),v=v.replace(r.leading_whitespace_expression,""),v=v.replace(r.ascii_tab_whitespace,""),I=v.indexOf("#"),I>-1&&(S.fragment=v.substring(I+1)||null,v=v.substring(0,I)),I=v.indexOf("?"),I>-1&&(S.query=v.substring(I+1)||null,v=v.substring(0,I)),v=v.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),v=v.replace(/^[/\\]{2,}/i,"//"),v.substring(0,2)==="//"?(S.protocol=null,v=v.substring(2),v=r.parseAuthority(v,S)):(I=v.indexOf(":"),I>-1&&(S.protocol=v.substring(0,I)||null,S.protocol&&!S.protocol.match(r.protocol_expression)?S.protocol=void 0:v.substring(I+1,I+3).replace(/\\/g,"/")==="//"?(v=v.substring(I+3),v=r.parseAuthority(v,S)):(v=v.substring(I+1),S.urn=!0))),S.path=v,S},r.parseHost=function(v,S){v||(v=""),v=v.replace(/\\/g,"/");var I=v.indexOf("/"),F,X;if(I===-1&&(I=v.length),v.charAt(0)==="[")F=v.indexOf("]"),S.hostname=v.substring(1,F)||null,S.port=v.substring(F+2,I)||null,S.port==="/"&&(S.port=null);else{var ie=v.indexOf(":"),j=v.indexOf("/"),le=v.indexOf(":",ie+1);le!==-1&&(j===-1||le<j)?(S.hostname=v.substring(0,I)||null,S.port=null):(X=v.substring(0,I).split(":"),S.hostname=X[0]||null,S.port=X[1]||null)}return S.hostname&&v.substring(I).charAt(0)!=="/"&&(I++,v="/"+v),S.preventInvalidHostname&&r.ensureValidHostname(S.hostname,S.protocol),S.port&&r.ensureValidPort(S.port),v.substring(I)||"/"},r.parseAuthority=function(v,S){return v=r.parseUserinfo(v,S),r.parseHost(v,S)},r.parseUserinfo=function(v,S){var I=v,F=v.indexOf("\\");F!==-1&&(v=v.replace(/\\/g,"/"));var X=v.indexOf("/"),ie=v.lastIndexOf("@",X>-1?X:v.length-1),j;return ie>-1&&(X===-1||ie<X)?(j=v.substring(0,ie).split(":"),S.username=j[0]?r.decode(j[0]):null,j.shift(),S.password=j[0]?r.decode(j.join(":")):null,v=I.substring(ie+1)):(S.username=null,S.password=null),v},r.parseQuery=function(v,S){if(!v)return{};if(v=v.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!v)return{};for(var I={},F=v.split("&"),X=F.length,ie,j,le,be=0;be<X;be++)ie=F[be].split("="),j=r.decodeQuery(ie.shift(),S),le=ie.length?r.decodeQuery(ie.join("="),S):null,j!=="__proto__"&&(c.call(I,j)?((typeof I[j]=="string"||I[j]===null)&&(I[j]=[I[j]]),I[j].push(le)):I[j]=le);return I},r.build=function(v){var S="",I=!1;return v.protocol&&(S+=v.protocol+":"),!v.urn&&(S||v.hostname)&&(S+="//",I=!0),S+=r.buildAuthority(v)||"",typeof v.path=="string"&&(v.path.charAt(0)!=="/"&&I&&(S+="/"),S+=v.path),typeof v.query=="string"&&v.query&&(S+="?"+v.query),typeof v.fragment=="string"&&v.fragment&&(S+="#"+v.fragment),S},r.buildHost=function(v){var S="";if(v.hostname)r.ip6_expression.test(v.hostname)?S+="["+v.hostname+"]":S+=v.hostname;else return"";return v.port&&(S+=":"+v.port),S},r.buildAuthority=function(v){return r.buildUserinfo(v)+r.buildHost(v)},r.buildUserinfo=function(v){var S="";return v.username&&(S+=r.encode(v.username)),v.password&&(S+=":"+r.encode(v.password)),S&&(S+="@"),S},r.buildQuery=function(v,S,I){var F="",X,ie,j,le;for(ie in v)if(ie!=="__proto__"&&c.call(v,ie))if(h(v[ie]))for(X={},j=0,le=v[ie].length;j<le;j++)v[ie][j]!==void 0&&X[v[ie][j]+""]===void 0&&(F+="&"+r.buildQueryParameter(ie,v[ie][j],I),S!==!0&&(X[v[ie][j]+""]=!0));else v[ie]!==void 0&&(F+="&"+r.buildQueryParameter(ie,v[ie],I));return F.substring(1)},r.buildQueryParameter=function(v,S,I){return r.encodeQuery(v,I)+(S!==null?"="+r.encodeQuery(S,I):"")},r.addQuery=function(v,S,I){if(typeof S=="object")for(var F in S)c.call(S,F)&&r.addQuery(v,F,S[F]);else if(typeof S=="string"){if(v[S]===void 0){v[S]=I;return}else typeof v[S]=="string"&&(v[S]=[v[S]]);h(I)||(I=[I]),v[S]=(v[S]||[]).concat(I)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},r.setQuery=function(v,S,I){if(typeof S=="object")for(var F in S)c.call(S,F)&&r.setQuery(v,F,S[F]);else if(typeof S=="string")v[S]=I===void 0?null:I;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},r.removeQuery=function(v,S,I){var F,X,ie;if(h(S))for(F=0,X=S.length;F<X;F++)v[S[F]]=void 0;else if(d(S)==="RegExp")for(ie in v)S.test(ie)&&(v[ie]=void 0);else if(typeof S=="object")for(ie in S)c.call(S,ie)&&r.removeQuery(v,ie,S[ie]);else if(typeof S=="string")I!==void 0?d(I)==="RegExp"?!h(v[S])&&I.test(v[S])?v[S]=void 0:v[S]=g(v[S],I):v[S]===String(I)&&(!h(I)||I.length===1)?v[S]=void 0:h(v[S])&&(v[S]=g(v[S],I)):v[S]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},r.hasQuery=function(v,S,I,F){switch(d(S)){case"String":break;case"RegExp":for(var X in v)if(c.call(v,X)&&S.test(X)&&(I===void 0||r.hasQuery(v,X,I)))return!0;return!1;case"Object":for(var ie in S)if(c.call(S,ie)&&!r.hasQuery(v,ie,S[ie]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(d(I)){case"Undefined":return S in v;case"Boolean":var j=!!(h(v[S])?v[S].length:v[S]);return I===j;case"Function":return!!I(v[S],S,v);case"Array":if(!h(v[S]))return!1;var le=F?C:b;return le(v[S],I);case"RegExp":return h(v[S])?F?C(v[S],I):!1:!!(v[S]&&v[S].match(I));case"Number":I=String(I);case"String":return h(v[S])?F?C(v[S],I):!1:v[S]===I;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.joinPaths=function(){for(var v=[],S=[],I=0,F=0;F<arguments.length;F++){var X=new r(arguments[F]);v.push(X);for(var ie=X.segment(),j=0;j<ie.length;j++)typeof ie[j]=="string"&&S.push(ie[j]),ie[j]&&I++}if(!S.length||!I)return new r("");var le=new r("").segment(S);return(v[0].path()===""||v[0].path().slice(0,1)==="/")&&le.path("/"+le.path()),le.normalize()},r.commonPath=function(v,S){var I=Math.min(v.length,S.length),F;for(F=0;F<I;F++)if(v.charAt(F)!==S.charAt(F)){F--;break}return F<1?v.charAt(0)===S.charAt(0)&&v.charAt(0)==="/"?"/":"":((v.charAt(F)!=="/"||S.charAt(F)!=="/")&&(F=v.substring(0,F).lastIndexOf("/")),v.substring(0,F+1))},r.withinString=function(v,S,I){I||(I={});var F=I.start||r.findUri.start,X=I.end||r.findUri.end,ie=I.trim||r.findUri.trim,j=I.parens||r.findUri.parens,le=/[a-z0-9-]=["']?$/i;for(F.lastIndex=0;;){var be=F.exec(v);if(!be)break;var Be=be.index;if(I.ignoreHtml){var Ue=v.slice(Math.max(Be-3,0),Be);if(Ue&&le.test(Ue))continue}for(var $e=Be+v.slice(Be).search(X),Xe=v.slice(Be,$e),ht=-1;;){var _t=j.exec(Xe);if(!_t)break;var Ct=_t.index+_t[0].length;ht=Math.max(ht,Ct)}if(ht>-1?Xe=Xe.slice(0,ht)+Xe.slice(ht).replace(ie,""):Xe=Xe.replace(ie,""),!(Xe.length<=be[0].length)&&!(I.ignore&&I.ignore.test(Xe))){$e=Be+Xe.length;var mt=S(Xe,Be,$e,v);if(mt===void 0){F.lastIndex=$e;continue}mt=String(mt),v=v.slice(0,Be)+mt+v.slice($e),F.lastIndex=Be+mt.length}}return F.lastIndex=0,v},r.ensureValidHostname=function(v,S){var I=!!v,F=!!S,X=!1;if(F&&(X=C(r.hostProtocols,S)),X&&!I)throw new TypeError("Hostname cannot be empty, if protocol is "+S);if(v&&v.match(r.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(v).match(r.invalid_hostname_characters))throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-:_]')}},r.ensureValidPort=function(v){if(v){var S=Number(v);if(!(s(S)&&S>0&&S<65536))throw new TypeError('Port "'+v+'" is not a valid port')}},r.noConflict=function(v){if(v){var S={URI:this.noConflict()};return i.URITemplate&&typeof i.URITemplate.noConflict=="function"&&(S.URITemplate=i.URITemplate.noConflict()),i.IPv6&&typeof i.IPv6.noConflict=="function"&&(S.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&typeof i.SecondLevelDomains.noConflict=="function"&&(S.SecondLevelDomains=i.SecondLevelDomains.noConflict()),S}else i.URI===this&&(i.URI=o);return this},a.build=function(v){return v===!0?this._deferred_build=!0:(v===void 0||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},a.clone=function(){return new r(this)},a.valueOf=a.toString=function(){return this.build(!1)._string};function m(v){return function(S,I){return S===void 0?this._parts[v]||"":(this._parts[v]=S||null,this.build(!I),this)}}function Q(v,S){return function(I,F){return I===void 0?this._parts[v]||"":(I!==null&&(I=I+"",I.charAt(0)===S&&(I=I.substring(1))),this._parts[v]=I,this.build(!F),this)}}a.protocol=m("protocol"),a.username=m("username"),a.password=m("password"),a.hostname=m("hostname"),a.port=m("port"),a.query=Q("query","?"),a.fragment=Q("fragment","#"),a.search=function(v,S){var I=this.query(v,S);return typeof I=="string"&&I.length?"?"+I:I},a.hash=function(v,S){var I=this.fragment(v,S);return typeof I=="string"&&I.length?"#"+I:I},a.pathname=function(v,S){if(v===void 0||v===!0){var I=this._parts.path||(this._parts.hostname?"/":"");return v?(this._parts.urn?r.decodeUrnPath:r.decodePath)(I):I}else return this._parts.urn?this._parts.path=v?r.recodeUrnPath(v):"":this._parts.path=v?r.recodePath(v):"/",this.build(!S),this},a.path=a.pathname,a.href=function(v,S){var I;if(v===void 0)return this.toString();this._string="",this._parts=r._parts();var F=v instanceof r,X=typeof v=="object"&&(v.hostname||v.path||v.pathname);if(v.nodeName){var ie=r.getDomAttribute(v);v=v[ie]||"",X=!1}if(!F&&X&&v.pathname!==void 0&&(v=v.toString()),typeof v=="string"||v instanceof String)this._parts=r.parse(String(v),this._parts);else if(F||X){var j=F?v._parts:v;for(I in j)I!=="query"&&c.call(this._parts,I)&&(this._parts[I]=j[I]);j.query&&this.query(j.query,!1)}else throw new TypeError("invalid input");return this.build(!S),this},a.is=function(v){var S=!1,I=!1,F=!1,X=!1,ie=!1,j=!1,le=!1,be=!this._parts.urn;switch(this._parts.hostname&&(be=!1,I=r.ip4_expression.test(this._parts.hostname),F=r.ip6_expression.test(this._parts.hostname),S=I||F,X=!S,ie=X&&n&&n.has(this._parts.hostname),j=X&&r.idn_expression.test(this._parts.hostname),le=X&&r.punycode_expression.test(this._parts.hostname)),v.toLowerCase()){case"relative":return be;case"absolute":return!be;case"domain":case"name":return X;case"sld":return ie;case"ip":return S;case"ip4":case"ipv4":case"inet4":return I;case"ip6":case"ipv6":case"inet6":return F;case"idn":return j;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return le}return null};var q=a.protocol,Z=a.port,H=a.hostname;a.protocol=function(v,S){if(v&&(v=v.replace(/:(\/\/)?$/,""),!v.match(r.protocol_expression)))throw new TypeError('Protocol "'+v+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return q.call(this,v,S)},a.scheme=a.protocol,a.port=function(v,S){return this._parts.urn?v===void 0?"":this:(v!==void 0&&(v===0&&(v=null),v&&(v+="",v.charAt(0)===":"&&(v=v.substring(1)),r.ensureValidPort(v))),Z.call(this,v,S))},a.hostname=function(v,S){if(this._parts.urn)return v===void 0?"":this;if(v!==void 0){var I={preventInvalidHostname:this._parts.preventInvalidHostname},F=r.parseHost(v,I);if(F!=="/")throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');v=I.hostname,this._parts.preventInvalidHostname&&r.ensureValidHostname(v,this._parts.protocol)}return H.call(this,v,S)},a.origin=function(v,S){if(this._parts.urn)return v===void 0?"":this;if(v===void 0){var I=this.protocol(),F=this.authority();return F?(I?I+"://":"")+this.authority():""}else{var X=r(v);return this.protocol(X.protocol()).authority(X.authority()).build(!S),this}},a.host=function(v,S){if(this._parts.urn)return v===void 0?"":this;if(v===void 0)return this._parts.hostname?r.buildHost(this._parts):"";var I=r.parseHost(v,this._parts);if(I!=="/")throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');return this.build(!S),this},a.authority=function(v,S){if(this._parts.urn)return v===void 0?"":this;if(v===void 0)return this._parts.hostname?r.buildAuthority(this._parts):"";var I=r.parseAuthority(v,this._parts);if(I!=="/")throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');return this.build(!S),this},a.userinfo=function(v,S){if(this._parts.urn)return v===void 0?"":this;if(v===void 0){var I=r.buildUserinfo(this._parts);return I&&I.substring(0,I.length-1)}else return v[v.length-1]!=="@"&&(v+="@"),r.parseUserinfo(v,this._parts),this.build(!S),this},a.resource=function(v,S){var I;return v===void 0?this.path()+this.search()+this.hash():(I=r.parse(v),this._parts.path=I.path,this._parts.query=I.query,this._parts.fragment=I.fragment,this.build(!S),this)},a.subdomain=function(v,S){if(this._parts.urn)return v===void 0?"":this;if(v===void 0){if(!this._parts.hostname||this.is("IP"))return"";var I=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,I)||""}else{var F=this._parts.hostname.length-this.domain().length,X=this._parts.hostname.substring(0,F),ie=new RegExp("^"+l(X));if(v&&v.charAt(v.length-1)!=="."&&(v+="."),v.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return v&&r.ensureValidHostname(v,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(ie,v),this.build(!S),this}},a.domain=function(v,S){if(this._parts.urn)return v===void 0?"":this;if(typeof v=="boolean"&&(S=v,v=void 0),v===void 0){if(!this._parts.hostname||this.is("IP"))return"";var I=this._parts.hostname.match(/\./g);if(I&&I.length<2)return this._parts.hostname;var F=this._parts.hostname.length-this.tld(S).length-1;return F=this._parts.hostname.lastIndexOf(".",F-1)+1,this._parts.hostname.substring(F)||""}else{if(!v)throw new TypeError("cannot set domain empty");if(v.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(r.ensureValidHostname(v,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=v;else{var X=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(X,v)}return this.build(!S),this}},a.tld=function(v,S){if(this._parts.urn)return v===void 0?"":this;if(typeof v=="boolean"&&(S=v,v=void 0),v===void 0){if(!this._parts.hostname||this.is("IP"))return"";var I=this._parts.hostname.lastIndexOf("."),F=this._parts.hostname.substring(I+1);return S!==!0&&n&&n.list[F.toLowerCase()]&&n.get(this._parts.hostname)||F}else{var X;if(v)if(v.match(/[^a-zA-Z0-9-]/))if(n&&n.is(v))X=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(X,v);else throw new TypeError('TLD "'+v+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");X=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(X,v)}else throw new TypeError("cannot set TLD empty");return this.build(!S),this}},a.directory=function(v,S){if(this._parts.urn)return v===void 0?"":this;if(v===void 0||v===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var I=this._parts.path.length-this.filename().length-1,F=this._parts.path.substring(0,I)||(this._parts.hostname?"/":"");return v?r.decodePath(F):F}else{var X=this._parts.path.length-this.filename().length,ie=this._parts.path.substring(0,X),j=new RegExp("^"+l(ie));return this.is("relative")||(v||(v="/"),v.charAt(0)!=="/"&&(v="/"+v)),v&&v.charAt(v.length-1)!=="/"&&(v+="/"),v=r.recodePath(v),this._parts.path=this._parts.path.replace(j,v),this.build(!S),this}},a.filename=function(v,S){if(this._parts.urn)return v===void 0?"":this;if(typeof v!="string"){if(!this._parts.path||this._parts.path==="/")return"";var I=this._parts.path.lastIndexOf("/"),F=this._parts.path.substring(I+1);return v?r.decodePathSegment(F):F}else{var X=!1;v.charAt(0)==="/"&&(v=v.substring(1)),v.match(/\.?\//)&&(X=!0);var ie=new RegExp(l(this.filename())+"$");return v=r.recodePath(v),this._parts.path=this._parts.path.replace(ie,v),X?this.normalizePath(S):this.build(!S),this}},a.suffix=function(v,S){if(this._parts.urn)return v===void 0?"":this;if(v===void 0||v===!0){if(!this._parts.path||this._parts.path==="/")return"";var I=this.filename(),F=I.lastIndexOf("."),X,ie;return F===-1?"":(X=I.substring(F+1),ie=/^[a-z0-9%]+$/i.test(X)?X:"",v?r.decodePathSegment(ie):ie)}else{v.charAt(0)==="."&&(v=v.substring(1));var j=this.suffix(),le;if(j)v?le=new RegExp(l(j)+"$"):le=new RegExp(l("."+j)+"$");else{if(!v)return this;this._parts.path+="."+r.recodePath(v)}return le&&(v=r.recodePath(v),this._parts.path=this._parts.path.replace(le,v)),this.build(!S),this}},a.segment=function(v,S,I){var F=this._parts.urn?":":"/",X=this.path(),ie=X.substring(0,1)==="/",j=X.split(F);if(v!==void 0&&typeof v!="number"&&(I=S,S=v,v=void 0),v!==void 0&&typeof v!="number")throw new Error('Bad segment "'+v+'", must be 0-based integer');if(ie&&j.shift(),v<0&&(v=Math.max(j.length+v,0)),S===void 0)return v===void 0?j:j[v];if(v===null||j[v]===void 0)if(h(S)){j=[];for(var le=0,be=S.length;le<be;le++)!S[le].length&&(!j.length||!j[j.length-1].length)||(j.length&&!j[j.length-1].length&&j.pop(),j.push(w(S[le])))}else(S||typeof S=="string")&&(S=w(S),j[j.length-1]===""?j[j.length-1]=S:j.push(S));else S?j[v]=w(S):j.splice(v,1);return ie&&j.unshift(""),this.path(j.join(F),I)},a.segmentCoded=function(v,S,I){var F,X,ie;if(typeof v!="number"&&(I=S,S=v,v=void 0),S===void 0){if(F=this.segment(v,S,I),!h(F))F=F!==void 0?r.decode(F):void 0;else for(X=0,ie=F.length;X<ie;X++)F[X]=r.decode(F[X]);return F}if(!h(S))S=typeof S=="string"||S instanceof String?r.encode(S):S;else for(X=0,ie=S.length;X<ie;X++)S[X]=r.encode(S[X]);return this.segment(v,S,I)};var K=a.query;return a.query=function(v,S){if(v===!0)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof v=="function"){var I=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),F=v.call(this,I);return this._parts.query=r.buildQuery(F||I,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!S),this}else return v!==void 0&&typeof v!="string"?(this._parts.query=r.buildQuery(v,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!S),this):K.call(this,v,S)},a.setQuery=function(v,S,I){var F=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof v=="string"||v instanceof String)F[v]=S!==void 0?S:null;else if(typeof v=="object")for(var X in v)c.call(v,X)&&(F[X]=v[X]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=r.buildQuery(F,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof v!="string"&&(I=S),this.build(!I),this},a.addQuery=function(v,S,I){var F=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(F,v,S===void 0?null:S),this._parts.query=r.buildQuery(F,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof v!="string"&&(I=S),this.build(!I),this},a.removeQuery=function(v,S,I){var F=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(F,v,S),this._parts.query=r.buildQuery(F,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof v!="string"&&(I=S),this.build(!I),this},a.hasQuery=function(v,S,I){var F=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(F,v,S,I)},a.setSearch=a.setQuery,a.addSearch=a.addQuery,a.removeSearch=a.removeQuery,a.hasSearch=a.hasQuery,a.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},a.normalizeProtocol=function(v){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!v)),this},a.normalizeHostname=function(v){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!v)),this},a.normalizePort=function(v){return typeof this._parts.protocol=="string"&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!v)),this},a.normalizePath=function(v){var S=this._parts.path;if(!S)return this;if(this._parts.urn)return this._parts.path=r.recodeUrnPath(this._parts.path),this.build(!v),this;if(this._parts.path==="/")return this;S=r.recodePath(S);var I,F="",X,ie;for(S.charAt(0)!=="/"&&(I=!0,S="/"+S),(S.slice(-3)==="/.."||S.slice(-2)==="/.")&&(S+="/"),S=S.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),I&&(F=S.substring(1).match(/^(\.\.\/)+/)||"",F&&(F=F[0]));X=S.search(/\/\.\.(\/|$)/),X!==-1;){if(X===0){S=S.substring(3);continue}ie=S.substring(0,X).lastIndexOf("/"),ie===-1&&(ie=X),S=S.substring(0,ie)+S.substring(X+3)}return I&&this.is("relative")&&(S=F+S.substring(1)),this._parts.path=S,this.build(!v),this},a.normalizePathname=a.normalizePath,a.normalizeQuery=function(v){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!v)),this},a.normalizeFragment=function(v){return this._parts.fragment||(this._parts.fragment=null,this.build(!v)),this},a.normalizeSearch=a.normalizeQuery,a.normalizeHash=a.normalizeFragment,a.iso8859=function(){var v=r.encode,S=r.decode;r.encode=escape,r.decode=decodeURIComponent;try{this.normalize()}finally{r.encode=v,r.decode=S}return this},a.unicode=function(){var v=r.encode,S=r.decode;r.encode=D,r.decode=unescape;try{this.normalize()}finally{r.encode=v,r.decode=S}return this},a.readable=function(){var v=this.clone();v.username("").password("").normalize();var S="";if(v._parts.protocol&&(S+=v._parts.protocol+"://"),v._parts.hostname&&(v.is("punycode")&&e?(S+=e.toUnicode(v._parts.hostname),v._parts.port&&(S+=":"+v._parts.port)):S+=v.host()),v._parts.hostname&&v._parts.path&&v._parts.path.charAt(0)!=="/"&&(S+="/"),S+=v.path(!0),v._parts.query){for(var I="",F=0,X=v._parts.query.split("&"),ie=X.length;F<ie;F++){var j=(X[F]||"").split("=");I+="&"+r.decodeQuery(j[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),j[1]!==void 0&&(I+="="+r.decodeQuery(j[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}S+="?"+I.substring(1)}return S+=r.decodeQuery(v.hash(),!0),S},a.absoluteTo=function(v){var S=this.clone(),I=["protocol","username","password","hostname","port"],F,X,ie;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(v instanceof r||(v=new r(v)),S._parts.protocol||(S._parts.protocol=v._parts.protocol,this._parts.hostname))return S;for(X=0;ie=I[X];X++)S._parts[ie]=v._parts[ie];return S._parts.path?(S._parts.path.substring(-2)===".."&&(S._parts.path+="/"),S.path().charAt(0)!=="/"&&(F=v.directory(),F=F||(v.path().indexOf("/")===0?"/":""),S._parts.path=(F?F+"/":"")+S._parts.path,S.normalizePath())):(S._parts.path=v._parts.path,S._parts.query||(S._parts.query=v._parts.query)),S.build(),S},a.relativeTo=function(v){var S=this.clone().normalize(),I,F,X,ie,j;if(S._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(v=new r(v).normalize(),I=S._parts,F=v._parts,ie=S.path(),j=v.path(),ie.charAt(0)!=="/")throw new Error("URI is already relative");if(j.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(I.protocol===F.protocol&&(I.protocol=null),I.username!==F.username||I.password!==F.password||I.protocol!==null||I.username!==null||I.password!==null)return S.build();if(I.hostname===F.hostname&&I.port===F.port)I.hostname=null,I.port=null;else return S.build();if(ie===j)return I.path="",S.build();if(X=r.commonPath(ie,j),!X)return S.build();var le=F.path.substring(X.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return I.path=le+I.path.substring(X.length)||"./",S.build()},a.equals=function(v){var S=this.clone(),I=new r(v),F={},X={},ie={},j,le,be;if(S.normalize(),I.normalize(),S.toString()===I.toString())return!0;if(j=S.query(),le=I.query(),S.query(""),I.query(""),S.toString()!==I.toString()||j.length!==le.length)return!1;F=r.parseQuery(j,this._parts.escapeQuerySpace),X=r.parseQuery(le,this._parts.escapeQuerySpace);for(be in F)if(c.call(F,be)){if(h(F[be])){if(!b(F[be],X[be]))return!1}else if(F[be]!==X[be])return!1;ie[be]=!0}for(be in X)if(c.call(X,be)&&!ie[be])return!1;return!0},a.preventInvalidHostname=function(v){return this._parts.preventInvalidHostname=!!v,this},a.duplicateQueryParameters=function(v){return this._parts.duplicateQueryParameters=!!v,this},a.escapeQuerySpace=function(v){return this._parts.escapeQuerySpace=!!v,this},r})});function Za(e){this.mediaplayer=e.mediaplayer,this.server=e.server,this.deviceIp=e.deviceIp,this.playerManager=e.playerManager,this.playerControl=void 0,this.streamType="2",this.videoCanvas=document.createElement("canvas"),this.videoCanvas.id=this.mediaplayer.id+"_canvasID",this.videoCanvas.width=800,this.videoCanvas.height=600,this.socketConnect=!1,this._playerControlState=0}Za.prototype.play=function(){var e=this;if(this.socketConnect=!0,this.playerControl)e.socketConnect=!0,this.playerManager.reConnect(this.deviceIp,this.mediaplayer,this.videoCanvas,this.streamType,function(t){e.playerControl=t}),console.log("play "+this.deviceIp);else{if(this._playerControlState>0)return;this._playerControlState=1,this.playerManager.createPlayerControl(this.deviceIp,this.mediaplayer,this.videoCanvas,this.streamType,function(n){e.playerControl=n,e._playerControlState=2})||(this._playerControlState=0,this.socketConnect=!1)}};Za.prototype.stop=function(){if(this.playerControl){this.playerControl.stop();let e=this.playerControl.nPlayPort;this.playerManager.portToPlayer[e]&&(this.playerManager.portToPlayer[e]=void 0),this.socketConnect=!1,console.log("stop "+this.deviceIp)}};Za.prototype.updateVideo=function(){};var Bs=Za;function Fs(e,t){return function(){return e.apply(t,arguments)}}var{toString:d1}=Object.prototype,{getPrototypeOf:fl}=Object,$a=(e=>t=>{let n=d1.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Mi=e=>(e=e.toLowerCase(),t=>$a(t)===e),Ka=e=>t=>typeof t===e,{isArray:Br}=Array,Vs=Ka("undefined");function h1(e){return e!==null&&!Vs(e)&&e.constructor!==null&&!Vs(e.constructor)&&ei(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var Lh=Mi("ArrayBuffer");function p1(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Lh(e.buffer),t}var m1=Ka("string"),ei=Ka("function"),Bh=Ka("number"),Qa=e=>e!==null&&typeof e=="object",g1=e=>e===!0||e===!1,Xa=e=>{if($a(e)!=="object")return!1;let t=fl(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},y1=Mi("Date"),_1=Mi("File"),v1=Mi("Blob"),C1=Mi("FileList"),b1=e=>Qa(e)&&ei(e.pipe),T1=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ei(e.append)&&((t=$a(e))==="formdata"||t==="object"&&ei(e.toString)&&e.toString()==="[object FormData]"))},E1=Mi("URLSearchParams"),w1=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Us(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,o;if(typeof e!="object"&&(e=[e]),Br(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{let r=n?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length,a;for(i=0;i<s;i++)a=r[i],t.call(null,e[a],a,e)}}function Fh(e,t){t=t.toLowerCase();let n=Object.keys(e),i=n.length,o;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}var Vh=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Uh=e=>!Vs(e)&&e!==Vh;function ll(){let{caseless:e}=Uh(this)&&this||{},t={},n=(i,o)=>{let r=e&&Fh(t,o)||o;Xa(t[r])&&Xa(i)?t[r]=ll(t[r],i):Xa(i)?t[r]=ll({},i):Br(i)?t[r]=i.slice():t[r]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Us(arguments[i],n);return t}var S1=(e,t,n,{allOwnKeys:i}={})=>(Us(t,(o,r)=>{n&&ei(o)?e[r]=Fs(o,n):e[r]=o},{allOwnKeys:i}),e),x1=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),A1=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},R1=(e,t,n,i)=>{let o,r,s,a={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),r=o.length;r-- >0;)s=o[r],(!i||i(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=n!==!1&&fl(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},P1=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;let i=e.indexOf(t,n);return i!==-1&&i===n},O1=e=>{if(!e)return null;if(Br(e))return e;let t=e.length;if(!Bh(t))return null;let n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},I1=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&fl(Uint8Array)),D1=(e,t)=>{let i=(e&&e[Symbol.iterator]).call(e),o;for(;(o=i.next())&&!o.done;){let r=o.value;t.call(e,r[0],r[1])}},M1=(e,t)=>{let n,i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},z1=Mi("HTMLFormElement"),N1=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),zh=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),L1=Mi("RegExp"),kh=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e),i={};Us(n,(o,r)=>{t(o,r,e)!==!1&&(i[r]=o)}),Object.defineProperties(e,i)},B1=e=>{kh(e,(t,n)=>{if(ei(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;let i=e[n];if(ei(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},F1=(e,t)=>{let n={},i=o=>{o.forEach(r=>{n[r]=!0})};return Br(e)?i(e):i(String(e).split(t)),n},V1=()=>{},U1=(e,t)=>(e=+e,Number.isFinite(e)?e:t),ul="abcdefghijklmnopqrstuvwxyz",Nh="0123456789",Gh={DIGIT:Nh,ALPHA:ul,ALPHA_DIGIT:ul+ul.toUpperCase()+Nh},k1=(e=16,t=Gh.ALPHA_DIGIT)=>{let n="",{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function G1(e){return!!(e&&ei(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}var H1=e=>{let t=new Array(10),n=(i,o)=>{if(Qa(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[o]=i;let r=Br(i)?[]:{};return Us(i,(s,a)=>{let c=n(s,o+1);!Vs(c)&&(r[a]=c)}),t[o]=void 0,r}}return i};return n(e,0)},j1=Mi("AsyncFunction"),W1=e=>e&&(Qa(e)||ei(e))&&ei(e.then)&&ei(e.catch),te={isArray:Br,isArrayBuffer:Lh,isBuffer:h1,isFormData:T1,isArrayBufferView:p1,isString:m1,isNumber:Bh,isBoolean:g1,isObject:Qa,isPlainObject:Xa,isUndefined:Vs,isDate:y1,isFile:_1,isBlob:v1,isRegExp:L1,isFunction:ei,isStream:b1,isURLSearchParams:E1,isTypedArray:I1,isFileList:C1,forEach:Us,merge:ll,extend:S1,trim:w1,stripBOM:x1,inherits:A1,toFlatObject:R1,kindOf:$a,kindOfTest:Mi,endsWith:P1,toArray:O1,forEachEntry:D1,matchAll:M1,isHTMLForm:z1,hasOwnProperty:zh,hasOwnProp:zh,reduceDescriptors:kh,freezeMethods:B1,toObjectSet:F1,toCamelCase:N1,noop:V1,toFiniteNumber:U1,findKey:Fh,global:Vh,isContextDefined:Uh,ALPHABET:Gh,generateString:k1,isSpecCompliantForm:G1,toJSONObject:H1,isAsyncFn:j1,isThenable:W1};function Fr(e,t,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o)}te.inherits(Fr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:te.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Hh=Fr.prototype,jh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{jh[e]={value:e}});Object.defineProperties(Fr,jh);Object.defineProperty(Hh,"isAxiosError",{value:!0});Fr.from=(e,t,n,i,o,r)=>{let s=Object.create(Hh);return te.toFlatObject(e,s,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Fr.call(s,e.message,t,n,i,o),s.cause=e,s.name=e.name,r&&Object.assign(s,r),s};var nt=Fr;var Ja=null;function dl(e){return te.isPlainObject(e)||te.isArray(e)}function qh(e){return te.endsWith(e,"[]")?e.slice(0,-2):e}function Wh(e,t,n){return e?e.concat(t).map(function(o,r){return o=qh(o),!n&&r?"["+o+"]":o}).join(n?".":""):t}function q1(e){return te.isArray(e)&&!e.some(dl)}var Y1=te.toFlatObject(te,{},null,function(t){return/^is[A-Z]/.test(t)});function Z1(e,t,n){if(!te.isObject(e))throw new TypeError("target must be an object");t=t||new(Ja||FormData),n=te.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,R){return!te.isUndefined(R[w])});let i=n.metaTokens,o=n.visitor||d,r=n.dots,s=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&te.isSpecCompliantForm(t);if(!te.isFunction(o))throw new TypeError("visitor must be a function");function l(b){if(b===null)return"";if(te.isDate(b))return b.toISOString();if(!c&&te.isBlob(b))throw new nt("Blob is not supported. Use a Buffer instead.");return te.isArrayBuffer(b)||te.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function d(b,w,R){let D=b;if(b&&!R&&typeof b=="object"){if(te.endsWith(w,"{}"))w=i?w:w.slice(0,-2),b=JSON.stringify(b);else if(te.isArray(b)&&q1(b)||(te.isFileList(b)||te.endsWith(w,"[]"))&&(D=te.toArray(b)))return w=qh(w),D.forEach(function(z,U){!(te.isUndefined(z)||z===null)&&t.append(s===!0?Wh([w],U,r):s===null?w:w+"[]",l(z))}),!1}return dl(b)?!0:(t.append(Wh(R,w,r),l(b)),!1)}let h=[],g=Object.assign(Y1,{defaultVisitor:d,convertValue:l,isVisitable:dl});function C(b,w){if(!te.isUndefined(b)){if(h.indexOf(b)!==-1)throw Error("Circular reference detected in "+w.join("."));h.push(b),te.forEach(b,function(D,M){(!(te.isUndefined(D)||D===null)&&o.call(t,D,te.isString(M)?M.trim():M,w,g))===!0&&C(D,w?w.concat(M):[M])}),h.pop()}}if(!te.isObject(e))throw new TypeError("data must be an object");return C(e),t}var To=Z1;function Yh(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Zh(e,t){this._pairs=[],e&&To(e,this,t)}var Xh=Zh.prototype;Xh.append=function(t,n){this._pairs.push([t,n])};Xh.toString=function(t){let n=t?function(i){return t.call(this,i,Yh)}:Yh;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};var ec=Zh;function X1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ks(e,t,n){if(!t)return e;let i=n&&n.encode||X1,o=n&&n.serialize,r;if(o?r=o(t,n):r=te.isURLSearchParams(t)?t.toString():new ec(t,n).toString(i),r){let s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}var hl=class{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){te.forEach(this.handlers,function(i){i!==null&&t(i)})}},pl=hl;var tc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var $h=typeof URLSearchParams<"u"?URLSearchParams:ec;var Kh=typeof FormData<"u"?FormData:null;var Qh=typeof Blob<"u"?Blob:null;var $1=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),K1=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),_n={isBrowser:!0,classes:{URLSearchParams:$h,FormData:Kh,Blob:Qh},isStandardBrowserEnv:$1,isStandardBrowserWebWorkerEnv:K1,protocols:["http","https","file","blob","url","data"]};function ml(e,t){return To(e,new _n.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,r){return _n.isNode&&te.isBuffer(n)?(this.append(i,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function Q1(e){return te.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function J1(e){let t={},n=Object.keys(e),i,o=n.length,r;for(i=0;i<o;i++)r=n[i],t[r]=e[r];return t}function eT(e){function t(n,i,o,r){let s=n[r++],a=Number.isFinite(+s),c=r>=n.length;return s=!s&&te.isArray(o)?o.length:s,c?(te.hasOwnProp(o,s)?o[s]=[o[s],i]:o[s]=i,!a):((!o[s]||!te.isObject(o[s]))&&(o[s]=[]),t(n,i,o[s],r)&&te.isArray(o[s])&&(o[s]=J1(o[s])),!a)}if(te.isFormData(e)&&te.isFunction(e.entries)){let n={};return te.forEachEntry(e,(i,o)=>{t(Q1(i),o,n,0)}),n}return null}var nc=eT;var tT={"Content-Type":void 0};function nT(e,t,n){if(te.isString(e))try{return(t||JSON.parse)(e),te.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}var ic={transitional:tc,adapter:["xhr","http"],transformRequest:[function(t,n){let i=n.getContentType()||"",o=i.indexOf("application/json")>-1,r=te.isObject(t);if(r&&te.isHTMLForm(t)&&(t=new FormData(t)),te.isFormData(t))return o&&o?JSON.stringify(nc(t)):t;if(te.isArrayBuffer(t)||te.isBuffer(t)||te.isStream(t)||te.isFile(t)||te.isBlob(t))return t;if(te.isArrayBufferView(t))return t.buffer;if(te.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return ml(t,this.formSerializer).toString();if((a=te.isFileList(t))||i.indexOf("multipart/form-data")>-1){let c=this.env&&this.env.FormData;return To(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return r||o?(n.setContentType("application/json",!1),nT(t)):t}],transformResponse:[function(t){let n=this.transitional||ic.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(t&&te.isString(t)&&(i&&!this.responseType||o)){let s=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(a){if(s)throw a.name==="SyntaxError"?nt.from(a,nt.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_n.classes.FormData,Blob:_n.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};te.forEach(["delete","get","head"],function(t){ic.headers[t]={}});te.forEach(["post","put","patch"],function(t){ic.headers[t]=te.merge(tT)});var Vr=ic;var iT=te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jh=e=>{let t={},n,i,o;return e&&e.split(`
`).forEach(function(s){o=s.indexOf(":"),n=s.substring(0,o).trim().toLowerCase(),i=s.substring(o+1).trim(),!(!n||t[n]&&iT[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t};var ep=Symbol("internals");function Gs(e){return e&&String(e).trim().toLowerCase()}function oc(e){return e===!1||e==null?e:te.isArray(e)?e.map(oc):String(e)}function oT(e){let t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}var rT=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function gl(e,t,n,i,o){if(te.isFunction(i))return i.call(this,t,n);if(o&&(t=n),!!te.isString(t)){if(te.isString(i))return t.indexOf(i)!==-1;if(te.isRegExp(i))return i.test(t)}}function sT(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function aT(e,t){let n=te.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(o,r,s){return this[i].call(this,t,o,r,s)},configurable:!0})})}var Ur=class{constructor(t){t&&this.set(t)}set(t,n,i){let o=this;function r(a,c,l){let d=Gs(c);if(!d)throw new Error("header name must be a non-empty string");let h=te.findKey(o,d);(!h||o[h]===void 0||l===!0||l===void 0&&o[h]!==!1)&&(o[h||c]=oc(a))}let s=(a,c)=>te.forEach(a,(l,d)=>r(l,d,c));return te.isPlainObject(t)||t instanceof this.constructor?s(t,n):te.isString(t)&&(t=t.trim())&&!rT(t)?s(Jh(t),n):t!=null&&r(n,t,i),this}get(t,n){if(t=Gs(t),t){let i=te.findKey(this,t);if(i){let o=this[i];if(!n)return o;if(n===!0)return oT(o);if(te.isFunction(n))return n.call(this,o,i);if(te.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Gs(t),t){let i=te.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||gl(this,this[i],i,n)))}return!1}delete(t,n){let i=this,o=!1;function r(s){if(s=Gs(s),s){let a=te.findKey(i,s);a&&(!n||gl(i,i[a],a,n))&&(delete i[a],o=!0)}}return te.isArray(t)?t.forEach(r):r(t),o}clear(t){let n=Object.keys(this),i=n.length,o=!1;for(;i--;){let r=n[i];(!t||gl(this,this[r],r,t,!0))&&(delete this[r],o=!0)}return o}normalize(t){let n=this,i={};return te.forEach(this,(o,r)=>{let s=te.findKey(i,r);if(s){n[s]=oc(o),delete n[r];return}let a=t?sT(r):String(r).trim();a!==r&&delete n[r],n[a]=oc(o),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let n=Object.create(null);return te.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=t&&te.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){let i=new this(t);return n.forEach(o=>i.set(o)),i}static accessor(t){let i=(this[ep]=this[ep]={accessors:{}}).accessors,o=this.prototype;function r(s){let a=Gs(s);i[a]||(aT(o,s),i[a]=!0)}return te.isArray(t)?t.forEach(r):r(t),this}};Ur.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);te.freezeMethods(Ur.prototype);te.freezeMethods(Ur);var Rn=Ur;function Hs(e,t){let n=this||Vr,i=t||n,o=Rn.from(i.headers),r=i.data;return te.forEach(e,function(a){r=a.call(n,r,o.normalize(),t?t.status:void 0)}),o.normalize(),r}function js(e){return!!(e&&e.__CANCEL__)}function tp(e,t,n){nt.call(this,e??"canceled",nt.ERR_CANCELED,t,n),this.name="CanceledError"}te.inherits(tp,nt,{__CANCEL__:!0});var Eo=tp;function yl(e,t,n){let i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new nt("Request failed with status code "+n.status,[nt.ERR_BAD_REQUEST,nt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}var np=_n.isStandardBrowserEnv?function(){return{write:function(n,i,o,r,s,a){let c=[];c.push(n+"="+encodeURIComponent(i)),te.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),te.isString(r)&&c.push("path="+r),te.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){let i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function _l(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function vl(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Ws(e,t){return e&&!_l(t)?vl(e,t):t}var ip=_n.isStandardBrowserEnv?function(){let t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function o(r){let s=r;return t&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(s){let a=te.isString(s)?o(s):s;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function Cl(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function cT(e,t){e=e||10;let n=new Array(e),i=new Array(e),o=0,r=0,s;return t=t!==void 0?t:1e3,function(c){let l=Date.now(),d=i[r];s||(s=l),n[o]=c,i[o]=l;let h=r,g=0;for(;h!==o;)g+=n[h++],h=h%e;if(o=(o+1)%e,o===r&&(r=(r+1)%e),l-s<t)return;let C=d&&l-d;return C?Math.round(g*1e3/C):void 0}}var op=cT;function rp(e,t){let n=0,i=op(50,250);return o=>{let r=o.loaded,s=o.lengthComputable?o.total:void 0,a=r-n,c=i(a),l=r<=s;n=r;let d={loaded:r,total:s,progress:s?r/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&l?(s-r)/c:void 0,event:o};d[t?"download":"upload"]=!0,e(d)}}var uT=typeof XMLHttpRequest<"u",sp=uT&&function(e){return new Promise(function(n,i){let o=e.data,r=Rn.from(e.headers).normalize(),s=e.responseType,a;function c(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}te.isFormData(o)&&(_n.isStandardBrowserEnv||_n.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(e.auth){let C=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(C+":"+b))}let d=Ws(e.baseURL,e.url);l.open(e.method.toUpperCase(),ks(d,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function h(){if(!l)return;let C=Rn.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),w={data:!s||s==="text"||s==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:C,config:e,request:l};yl(function(D){n(D),c()},function(D){i(D),c()},w),l=null}if("onloadend"in l?l.onloadend=h:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(h)},l.onabort=function(){l&&(i(new nt("Request aborted",nt.ECONNABORTED,e,l)),l=null)},l.onerror=function(){i(new nt("Network Error",nt.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let b=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",w=e.transitional||tc;e.timeoutErrorMessage&&(b=e.timeoutErrorMessage),i(new nt(b,w.clarifyTimeoutError?nt.ETIMEDOUT:nt.ECONNABORTED,e,l)),l=null},_n.isStandardBrowserEnv){let C=(e.withCredentials||ip(d))&&e.xsrfCookieName&&np.read(e.xsrfCookieName);C&&r.set(e.xsrfHeaderName,C)}o===void 0&&r.setContentType(null),"setRequestHeader"in l&&te.forEach(r.toJSON(),function(b,w){l.setRequestHeader(w,b)}),te.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),s&&s!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",rp(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",rp(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=C=>{l&&(i(!C||C.type?new Eo(null,e,l):C),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));let g=Cl(d);if(g&&_n.protocols.indexOf(g)===-1){i(new nt("Unsupported protocol "+g+":",nt.ERR_BAD_REQUEST,e));return}l.send(o||null)})};var rc={http:Ja,xhr:sp};te.forEach(rc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var ap={getAdapter:e=>{e=te.isArray(e)?e:[e];let{length:t}=e,n,i;for(let o=0;o<t&&(n=e[o],!(i=te.isString(n)?rc[n.toLowerCase()]:n));o++);if(!i)throw i===!1?new nt(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(te.hasOwnProp(rc,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!te.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:rc};function bl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Eo(null,e)}function sc(e){return bl(e),e.headers=Rn.from(e.headers),e.data=Hs.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ap.getAdapter(e.adapter||Vr.adapter)(e).then(function(i){return bl(e),i.data=Hs.call(e,e.transformResponse,i),i.headers=Rn.from(i.headers),i},function(i){return js(i)||(bl(e),i&&i.response&&(i.response.data=Hs.call(e,e.transformResponse,i.response),i.response.headers=Rn.from(i.response.headers))),Promise.reject(i)})}var cp=e=>e instanceof Rn?e.toJSON():e;function Ji(e,t){t=t||{};let n={};function i(l,d,h){return te.isPlainObject(l)&&te.isPlainObject(d)?te.merge.call({caseless:h},l,d):te.isPlainObject(d)?te.merge({},d):te.isArray(d)?d.slice():d}function o(l,d,h){if(te.isUndefined(d)){if(!te.isUndefined(l))return i(void 0,l,h)}else return i(l,d,h)}function r(l,d){if(!te.isUndefined(d))return i(void 0,d)}function s(l,d){if(te.isUndefined(d)){if(!te.isUndefined(l))return i(void 0,l)}else return i(void 0,d)}function a(l,d,h){if(h in t)return i(l,d);if(h in e)return i(void 0,l)}let c={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(l,d)=>o(cp(l),cp(d),!0)};return te.forEach(Object.keys(Object.assign({},e,t)),function(d){let h=c[d]||o,g=h(e[d],t[d],d);te.isUndefined(g)&&h!==a||(n[d]=g)}),n}var ac="1.4.0";var Tl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Tl[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});var up={};Tl.transitional=function(t,n,i){function o(r,s){return"[Axios v"+ac+"] Transitional option '"+r+"'"+s+(i?". "+i:"")}return(r,s,a)=>{if(t===!1)throw new nt(o(s," has been removed"+(n?" in "+n:"")),nt.ERR_DEPRECATED);return n&&!up[s]&&(up[s]=!0,console.warn(o(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,s,a):!0}};function lT(e,t,n){if(typeof e!="object")throw new nt("options must be an object",nt.ERR_BAD_OPTION_VALUE);let i=Object.keys(e),o=i.length;for(;o-- >0;){let r=i[o],s=t[r];if(s){let a=e[r],c=a===void 0||s(a,r,e);if(c!==!0)throw new nt("option "+r+" must be "+c,nt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new nt("Unknown option "+r,nt.ERR_BAD_OPTION)}}var cc={assertOptions:lT,validators:Tl};var wo=cc.validators,kr=class{constructor(t){this.defaults=t,this.interceptors={request:new pl,response:new pl}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ji(this.defaults,n);let{transitional:i,paramsSerializer:o,headers:r}=n;i!==void 0&&cc.assertOptions(i,{silentJSONParsing:wo.transitional(wo.boolean),forcedJSONParsing:wo.transitional(wo.boolean),clarifyTimeoutError:wo.transitional(wo.boolean)},!1),o!=null&&(te.isFunction(o)?n.paramsSerializer={serialize:o}:cc.assertOptions(o,{encode:wo.function,serialize:wo.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s;s=r&&te.merge(r.common,r[n.method]),s&&te.forEach(["delete","get","head","post","put","patch","common"],b=>{delete r[b]}),n.headers=Rn.concat(s,r);let a=[],c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(c=c&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});let l=[];this.interceptors.response.forEach(function(w){l.push(w.fulfilled,w.rejected)});let d,h=0,g;if(!c){let b=[sc.bind(this),void 0];for(b.unshift.apply(b,a),b.push.apply(b,l),g=b.length,d=Promise.resolve(n);h<g;)d=d.then(b[h++],b[h++]);return d}g=a.length;let C=n;for(h=0;h<g;){let b=a[h++],w=a[h++];try{C=b(C)}catch(R){w.call(this,R);break}}try{d=sc.call(this,C)}catch(b){return Promise.reject(b)}for(h=0,g=l.length;h<g;)d=d.then(l[h++],l[h++]);return d}getUri(t){t=Ji(this.defaults,t);let n=Ws(t.baseURL,t.url);return ks(n,t.params,t.paramsSerializer)}};te.forEach(["delete","get","head","options"],function(t){kr.prototype[t]=function(n,i){return this.request(Ji(i||{},{method:t,url:n,data:(i||{}).data}))}});te.forEach(["post","put","patch"],function(t){function n(i){return function(r,s,a){return this.request(Ji(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}kr.prototype[t]=n(),kr.prototype[t+"Form"]=n(!0)});var qs=kr;var Ys=class{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});let i=this;this.promise.then(o=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](o);i._listeners=null}),this.promise.then=o=>{let r,s=new Promise(a=>{i.subscribe(a),r=a}).then(o);return s.cancel=function(){i.unsubscribe(r)},s},t(function(r,s,a){i.reason||(i.reason=new Eo(r,s,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Ys(function(o){t=o}),cancel:t}}},lp=Ys;function El(e){return function(n){return e.apply(null,n)}}function wl(e){return te.isObject(e)&&e.isAxiosError===!0}var Sl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Sl).forEach(([e,t])=>{Sl[t]=e});var fp=Sl;function dp(e){let t=new qs(e),n=Fs(qs.prototype.request,t);return te.extend(n,qs.prototype,t,{allOwnKeys:!0}),te.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return dp(Ji(e,o))},n}var Qt=dp(Vr);Qt.Axios=qs;Qt.CanceledError=Eo;Qt.CancelToken=lp;Qt.isCancel=js;Qt.VERSION=ac;Qt.toFormData=To;Qt.AxiosError=nt;Qt.Cancel=Qt.CanceledError;Qt.all=function(t){return Promise.all(t)};Qt.spread=El;Qt.isAxiosError=wl;Qt.mergeConfig=Ji;Qt.AxiosHeaders=Rn;Qt.formToJSON=e=>nc(te.isHTMLForm(e)?new FormData(e):e);Qt.HttpStatusCode=fp;Qt.default=Qt;var Gr=Qt;var{Axios:ED,AxiosError:wD,CanceledError:SD,isCancel:xD,CancelToken:AD,VERSION:RD,all:PD,Cancel:OD,isAxiosError:ID,spread:DD,toFormData:MD,AxiosHeaders:zD,HttpStatusCode:ND,formToJSON:LD,mergeConfig:BD}=Gr;var Kl=Di(Em(),1);function qE(e,t){let n=YE(),i=e.split("VERSION")[0];i.indexOf("/")===0&&(i=i.slice(1));let o=i?i.includes("/")?i.split("/")[1]?i.split("/")[1].replace(/\//g,""):i.split("/")[0].replace(/\//g,""):i.replace(/\//g,""):"",r="evo-apigw/",s=localStorage[o]?localStorage[o]:"",a="";switch(t){case 1:a=n+e;break;case 2:a=e;break;default:a=n+r+(s?e.replace("VERSION",s):e);break}return a}function YE(){let e="";return window.location.origin?e=window.location.origin+"/":e=window.location.protocol+"//"+window.location.host+"/",e}function ZE(){let e=localStorage.getItem("language"),t=(navigator.language||navigato.browserLanguage).substr(0,2);return e||(t.includes("zh")?"zh-cn":t)}function XE(e,t){if(t==="match"){let o=["%","_","<",">","(",")",'"',"&"," "];return["\\%","\\_","&lt;","&gt;","&#40;","&#41;","&quot;","&amp;","&nbsp;"].forEach((s,a)=>{e=e.replace(s,o[a])}),e}let n=document.createElement("div");n.innerHTML=e;let i=n.innerText||n.textContent;return n=null,i}function $l(e){if(typeof e=="string")return XE(e,"match");if(typeof e=="object"&&!(e instanceof Array)&&e!==null){let t={};for(let[n,i]of Object.entries(e))t[n]=$l(i);return t}else if(typeof e=="object"&&e instanceof Array)return e.map(t=>$l(t));return e}async function $E(e){return e.url?(e.data=e.data||{},await Ql(e)):Promise.reject("\u53C2\u6570url\u4E0D\u80FD\u4E3A\u7A7A\u3002")}function Ql(e){let t=qE(e.url,e.urlType),n=ZE();return n.includes("en")?n="en-US":n.includes("zh")&&(n="zh-CN"),localStorage.clientType||(localStorage.clientType=1),new Promise((i,o)=>{e.method=e.method.toLocaleLowerCase();let r={url:t,method:e.method,timeout:typeof e.timeout=="number"?e.timeout:3e4,responseType:e.responseType||"json",headers:{"user-client":localStorage.clientType,"Accept-Language":n,"Content-Type":e.contentType||(e.isFormSubmit?"application/x-www-form-urlencoded":"application/json;charset=utf-8"),Authorization:e.checkToken!==!1&&localStorage.getItem("accessToken")?"bearer "+localStorage.getItem("accessToken"):"",timeOffset:new Date().getTimezoneOffset()*60*1e3,proxyIp:localStorage.proxyIp,...e.headers},onUploadProgress:e.onUploadProgress,...e.options};e.method==="get"?r.params=e.data:r.data=e.data,r.headers["Content-Type"].toLocaleLowerCase().includes("application/x-www-form-urlencoded")&&(r.data=Kl.default.stringify(e.data)),Gr.interceptors.request.use(function(s){let a=[];if(s.method==="get"&&s.params){let c=Object.keys(s.params);for(let l of c){let d=s.params[l];a.push(`${l}=${encodeURIComponent([null,void 0].includes(d)?"":d)}`)}s.params={}}return s.url=s.url+(a.length?"?"+a.join("&"):""),s},function(s){return Promise.reject(s)}),Gr(r).then(s=>{if(e.returnDirectly){i(s);return}let c=(e.isParseHtml?s:$l(s)).data||{},l=c.data||{},h=(l.args?l.args:l.value?l.value:[])[0];if(c.code==="0"||c.code===1e3||c.success){let g=c.data||"";i(g)}else if(c.code=="27001007"){let g=localStorage.getItem("refreshToken");if(g!=="undefined"&&g){!window.refreshPromise&&(window.refreshPromise=KE()),window.refreshPromise.then(()=>{Ql(e).then(C=>i(C)).catch(()=>o())}).catch(C=>{o(C)}).finally(()=>{window.refreshPromise=void 0});return}if(localStorage.clientType==="2"){o();return}}else{let g=c.code?`error${c.code}`:"ajaxDisconnect",C=e.eTipStr;console.log(C),e.isENoTip||o(C),o(s)}}).catch(s=>{if(console.error(s),!e.jumpLogin&&s.response.status===401&&(localStorage.clientType==="2"||localStorage.accessToken)){console.log("/oauth/logout"),o(s);return}if(s&&s.response.status===431){o(s);return}let a=new Date().getTime(),c=s.response?.status?s.response.status:"";if(a-localStorage.errorTime<200&&!e.isENoTip){localStorage.tError="serverError",o(s);return}localStorage.errorTime=a;let l=c?`error${c}`:"ajaxDisconnect",d=e.eTipStr||"\u7F51\u7EDC\u5F02\u5E38";o(s)})})}async function KE(){let e=localStorage.getItem("refreshToken"),t=localStorage.getItem("checked")?"web_client_remember":"web_client",n={refresh_token:e,grant_type:"refresh_token",client_id:t,client_secret:"web_client"};try{let o=(await Gr({url:"/evo-apigw/evo-oauth/oauth/token",method:"post",headers:{proxyIp:localStorage.proxyIp},data:Kl.default.stringify(n)})).data;o.code==="0"&&(localStorage.setItem("accessToken",o.data.access_token),localStorage.setItem("refreshToken",o.data.refresh_token),localStorage.setItem("expiresTime",String(new Date().getTime()+o.data.expires_in*1e3)),await QE())}catch(i){return localStorage.clientType==="2"?void 0:Promise.reject(i)}}function QE(){return Ql({url:"evo-brm/1.2.0/user/keepalive",method:"post",isSNoTip:!0,data:{clientType:1,magicId:localStorage.magicId,timeout:1e4}})}var Js=$E;var JE="0123456789abcdefghijklmnopqrstuvwxyz";function pi(e){return JE.charAt(e)}function wm(e,t){return e&t}function ea(e,t){return e|t}function Jl(e,t){return e^t}function ef(e,t){return e&~t}function Sm(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function xm(e){for(var t=0;e!=0;)e&=e-1,++t;return t}var Kr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Am="=";function Qr(e){var t,n,i="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),i+=Kr.charAt(n>>6)+Kr.charAt(n&63);for(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),i+=Kr.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),i+=Kr.charAt(n>>2)+Kr.charAt((n&3)<<4));(i.length&3)>0;)i+=Am;return i}function tf(e){var t="",n,i=0,o=0;for(n=0;n<e.length&&e.charAt(n)!=Am;++n){var r=Kr.indexOf(e.charAt(n));r<0||(i==0?(t+=pi(r>>2),o=r&3,i=1):i==1?(t+=pi(o<<2|r>>4),o=r&15,i=2):i==2?(t+=pi(o),t+=pi(r>>2),o=r&3,i=3):(t+=pi(o<<2|r>>4),t+=pi(r&15),i=0))}return i==1&&(t+=pi(o<<2)),t}var Jr,Rm={decode:function(e){var t;if(Jr===void 0){var n="0123456789ABCDEF",i=` \f
\r	\xA0\u2028\u2029`;for(Jr={},t=0;t<16;++t)Jr[n.charAt(t)]=t;for(n=n.toLowerCase(),t=10;t<16;++t)Jr[n.charAt(t)]=t;for(t=0;t<i.length;++t)Jr[i.charAt(t)]=-1}var o=[],r=0,s=0;for(t=0;t<e.length;++t){var a=e.charAt(t);if(a=="=")break;if(a=Jr[a],a!=-1){if(a===void 0)throw new Error("Illegal character at offset "+t);r|=a,++s>=2?(o[o.length]=r,r=0,s=0):r<<=4}}if(s)throw new Error("Hex encoding incomplete: 4 bits missing");return o}};var nr,Cc={decode:function(e){var t;if(nr===void 0){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=`= \f
\r	\xA0\u2028\u2029`;for(nr=Object.create(null),t=0;t<64;++t)nr[n.charAt(t)]=t;for(nr["-"]=62,nr._=63,t=0;t<i.length;++t)nr[i.charAt(t)]=-1}var o=[],r=0,s=0;for(t=0;t<e.length;++t){var a=e.charAt(t);if(a=="=")break;if(a=nr[a],a!=-1){if(a===void 0)throw new Error("Illegal character at offset "+t);r|=a,++s>=4?(o[o.length]=r>>16,o[o.length]=r>>8&255,o[o.length]=r&255,r=0,s=0):r<<=6}}switch(s){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:o[o.length]=r>>10;break;case 3:o[o.length]=r>>16,o[o.length]=r>>8&255;break}return o},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(e){var t=Cc.re.exec(e);if(t)if(t[1])e=t[1];else if(t[2])e=t[2];else throw new Error("RegExp out of sync");return Cc.decode(e)}};var es=1e13,ts=function(){function e(t){this.buf=[+t||0]}return e.prototype.mulAdd=function(t,n){var i=this.buf,o=i.length,r,s;for(r=0;r<o;++r)s=i[r]*t+n,s<es?n=0:(n=0|s/es,s-=n*es),i[r]=s;n>0&&(i[r]=n)},e.prototype.sub=function(t){var n=this.buf,i=n.length,o,r;for(o=0;o<i;++o)r=n[o]-t,r<0?(r+=es,t=1):t=0,n[o]=r;for(;n[n.length-1]===0;)n.pop()},e.prototype.toString=function(t){if((t||10)!=10)throw new Error("only base 10 is supported");for(var n=this.buf,i=n[n.length-1].toString(),o=n.length-2;o>=0;--o)i+=(es+n[o]).toString().substring(1);return i},e.prototype.valueOf=function(){for(var t=this.buf,n=0,i=t.length-1;i>=0;--i)n=n*es+t[i];return n},e.prototype.simplify=function(){var t=this.buf;return t.length==1?t[0]:this},e}();var Om="\u2026",ew=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,tw=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function ns(e,t){return e.length>t&&(e=e.substring(0,t)+Om),e}var nf=function(){function e(t,n){this.hexDigits="0123456789ABCDEF",t instanceof e?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=n)}return e.prototype.get=function(t){if(t===void 0&&(t=this.pos++),t>=this.enc.length)throw new Error("Requesting byte offset ".concat(t," on a stream of length ").concat(this.enc.length));return typeof this.enc=="string"?this.enc.charCodeAt(t):this.enc[t]},e.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(t&15)},e.prototype.hexDump=function(t,n,i){for(var o="",r=t;r<n;++r)if(o+=this.hexByte(this.get(r)),i!==!0)switch(r&15){case 7:o+="  ";break;case 15:o+=`
`;break;default:o+=" "}return o},e.prototype.isASCII=function(t,n){for(var i=t;i<n;++i){var o=this.get(i);if(o<32||o>176)return!1}return!0},e.prototype.parseStringISO=function(t,n){for(var i="",o=t;o<n;++o)i+=String.fromCharCode(this.get(o));return i},e.prototype.parseStringUTF=function(t,n){for(var i="",o=t;o<n;){var r=this.get(o++);r<128?i+=String.fromCharCode(r):r>191&&r<224?i+=String.fromCharCode((r&31)<<6|this.get(o++)&63):i+=String.fromCharCode((r&15)<<12|(this.get(o++)&63)<<6|this.get(o++)&63)}return i},e.prototype.parseStringBMP=function(t,n){for(var i="",o,r,s=t;s<n;)o=this.get(s++),r=this.get(s++),i+=String.fromCharCode(o<<8|r);return i},e.prototype.parseTime=function(t,n,i){var o=this.parseStringISO(t,n),r=(i?ew:tw).exec(o);return r?(i&&(r[1]=+r[1],r[1]+=+r[1]<70?2e3:1900),o=r[1]+"-"+r[2]+"-"+r[3]+" "+r[4],r[5]&&(o+=":"+r[5],r[6]&&(o+=":"+r[6],r[7]&&(o+="."+r[7]))),r[8]&&(o+=" UTC",r[8]!="Z"&&(o+=r[8],r[9]&&(o+=":"+r[9]))),o):"Unrecognized time: "+o},e.prototype.parseInteger=function(t,n){for(var i=this.get(t),o=i>127,r=o?255:0,s,a="";i==r&&++t<n;)i=this.get(t);if(s=n-t,s===0)return o?-1:0;if(s>4){for(a=i,s<<=3;!((+a^r)&128);)a=+a<<1,--s;a="("+s+` bit)
`}o&&(i=i-256);for(var c=new ts(i),l=t+1;l<n;++l)c.mulAdd(256,this.get(l));return a+c.toString()},e.prototype.parseBitString=function(t,n,i){for(var o=this.get(t),r=(n-t-1<<3)-o,s="("+r+` bit)
`,a="",c=t+1;c<n;++c){for(var l=this.get(c),d=c==n-1?o:0,h=7;h>=d;--h)a+=l>>h&1?"1":"0";if(a.length>i)return s+ns(a,i)}return s+a},e.prototype.parseOctetString=function(t,n,i){if(this.isASCII(t,n))return ns(this.parseStringISO(t,n),i);var o=n-t,r="("+o+` byte)
`;i/=2,o>i&&(n=t+i);for(var s=t;s<n;++s)r+=this.hexByte(this.get(s));return o>i&&(r+=Om),r},e.prototype.parseOID=function(t,n,i){for(var o="",r=new ts,s=0,a=t;a<n;++a){var c=this.get(a);if(r.mulAdd(128,c&127),s+=7,!(c&128)){if(o==="")if(r=r.simplify(),r instanceof ts)r.sub(80),o="2."+r.toString();else{var l=r<80?r<40?0:1:2;o=l+"."+(r-l*40)}else o+="."+r.toString();if(o.length>i)return ns(o,i);r=new ts,s=0}}return s>0&&(o+=".incomplete"),o},e}();var Im=function(){function e(t,n,i,o,r){if(!(o instanceof Pm))throw new Error("Invalid tag value.");this.stream=t,this.header=n,this.length=i,this.tag=o,this.sub=r}return e.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},e.prototype.content=function(t){if(this.tag===void 0)return null;t===void 0&&(t=1/0);var n=this.posContent(),i=Math.abs(this.length);if(!this.tag.isUniversal())return this.sub!==null?"("+this.sub.length+" elem)":this.stream.parseOctetString(n,n+i,t);switch(this.tag.tagNumber){case 1:return this.stream.get(n)===0?"false":"true";case 2:return this.stream.parseInteger(n,n+i);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(n,n+i,t);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(n,n+i,t);case 6:return this.stream.parseOID(n,n+i,t);case 16:case 17:return this.sub!==null?"("+this.sub.length+" elem)":"(no elem)";case 12:return ns(this.stream.parseStringUTF(n,n+i),t);case 18:case 19:case 20:case 21:case 22:case 26:return ns(this.stream.parseStringISO(n,n+i),t);case 30:return ns(this.stream.parseStringBMP(n,n+i),t);case 23:case 24:return this.stream.parseTime(n,n+i,this.tag.tagNumber==23)}return null},e.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(this.sub===null?"null":this.sub.length)+"]"},e.prototype.toPrettyString=function(t){t===void 0&&(t="");var n=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(n+="+"),n+=this.length,this.tag.tagConstructed?n+=" (constructed)":this.tag.isUniversal()&&(this.tag.tagNumber==3||this.tag.tagNumber==4)&&this.sub!==null&&(n+=" (encapsulates)"),n+=`
`,this.sub!==null){t+="  ";for(var i=0,o=this.sub.length;i<o;++i)n+=this.sub[i].toPrettyString(t)}return n},e.prototype.posStart=function(){return this.stream.pos},e.prototype.posContent=function(){return this.stream.pos+this.header},e.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},e.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},e.decodeLength=function(t){var n=t.get(),i=n&127;if(i==n)return i;if(i>6)throw new Error("Length over 48 bits not supported at position "+(t.pos-1));if(i===0)return null;n=0;for(var o=0;o<i;++o)n=n*256+t.get();return n},e.prototype.getHexStringValue=function(){var t=this.toHexString(),n=this.header*2,i=this.length*2;return t.substr(n,i)},e.decode=function(t){var n;t instanceof nf?n=t:n=new nf(t,0);var i=new nf(n),o=new Pm(n),r=e.decodeLength(n),s=n.pos,a=s-i.pos,c=null,l=function(){var h=[];if(r!==null){for(var g=s+r;n.pos<g;)h[h.length]=e.decode(n);if(n.pos!=g)throw new Error("Content size is not correct for container starting at offset "+s)}else try{for(;;){var C=e.decode(n);if(C.tag.isEOC())break;h[h.length]=C}r=s-n.pos}catch(b){throw new Error("Exception while decoding undefined length content: "+b)}return h};if(o.tagConstructed)c=l();else if(o.isUniversal()&&(o.tagNumber==3||o.tagNumber==4))try{if(o.tagNumber==3&&n.get()!=0)throw new Error("BIT STRINGs with unused bits cannot encapsulate.");c=l();for(var d=0;d<c.length;++d)if(c[d].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch{c=null}if(c===null){if(r===null)throw new Error("We can't skip over an invalid tag with undefined length at offset "+s);n.pos=s+Math.abs(r)}return new e(i,a,r,o,c)},e}();var Pm=function(){function e(t){var n=t.get();if(this.tagClass=n>>6,this.tagConstructed=(n&32)!==0,this.tagNumber=n&31,this.tagNumber==31){var i=new ts;do n=t.get(),i.mulAdd(128,n&127);while(n&128);this.tagNumber=i.simplify()}}return e.prototype.isUniversal=function(){return this.tagClass===0},e.prototype.isEOC=function(){return this.tagClass===0&&this.tagNumber===0},e}();var Po,nw=0xdeadbeefcafe,Dm=(nw&16777215)==15715070,Pn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],iw=(1<<26)/Pn[Pn.length-1],We=function(){function e(t,n,i){t!=null&&(typeof t=="number"?this.fromNumber(t,n,i):n==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,n))}return e.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var n;if(t==16)n=4;else if(t==8)n=3;else if(t==2)n=1;else if(t==32)n=5;else if(t==4)n=2;else return this.toRadix(t);var i=(1<<n)-1,o,r=!1,s="",a=this.t,c=this.DB-a*this.DB%n;if(a-- >0)for(c<this.DB&&(o=this[a]>>c)>0&&(r=!0,s=pi(o));a>=0;)c<n?(o=(this[a]&(1<<c)-1)<<n-c,o|=this[--a]>>(c+=this.DB-n)):(o=this[a]>>(c-=n)&i,c<=0&&(c+=this.DB,--a)),o>0&&(r=!0),r&&(s+=pi(o));return r?s:"0"},e.prototype.negate=function(){var t=Ke();return e.ZERO.subTo(this,t),t},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.compareTo=function(t){var n=this.s-t.s;if(n!=0)return n;var i=this.t;if(n=i-t.t,n!=0)return this.s<0?-n:n;for(;--i>=0;)if((n=this[i]-t[i])!=0)return n;return 0},e.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+bc(this[this.t-1]^this.s&this.DM)},e.prototype.mod=function(t){var n=Ke();return this.abs().divRemTo(t,null,n),this.s<0&&n.compareTo(e.ZERO)>0&&t.subTo(n,n),n},e.prototype.modPowInt=function(t,n){var i;return t<256||n.isEven()?i=new Mm(n):i=new zm(n),this.exp(t,i)},e.prototype.clone=function(){var t=Ke();return this.copyTo(t),t},e.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},e.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},e.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},e.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},e.prototype.toByteArray=function(){var t=this.t,n=[];n[0]=this.s;var i=this.DB-t*this.DB%8,o,r=0;if(t-- >0)for(i<this.DB&&(o=this[t]>>i)!=(this.s&this.DM)>>i&&(n[r++]=o|this.s<<this.DB-i);t>=0;)i<8?(o=(this[t]&(1<<i)-1)<<8-i,o|=this[--t]>>(i+=this.DB-8)):(o=this[t]>>(i-=8)&255,i<=0&&(i+=this.DB,--t)),o&128&&(o|=-256),r==0&&(this.s&128)!=(o&128)&&++r,(r>0||o!=this.s)&&(n[r++]=o);return n},e.prototype.equals=function(t){return this.compareTo(t)==0},e.prototype.min=function(t){return this.compareTo(t)<0?this:t},e.prototype.max=function(t){return this.compareTo(t)>0?this:t},e.prototype.and=function(t){var n=Ke();return this.bitwiseTo(t,wm,n),n},e.prototype.or=function(t){var n=Ke();return this.bitwiseTo(t,ea,n),n},e.prototype.xor=function(t){var n=Ke();return this.bitwiseTo(t,Jl,n),n},e.prototype.andNot=function(t){var n=Ke();return this.bitwiseTo(t,ef,n),n},e.prototype.not=function(){for(var t=Ke(),n=0;n<this.t;++n)t[n]=this.DM&~this[n];return t.t=this.t,t.s=~this.s,t},e.prototype.shiftLeft=function(t){var n=Ke();return t<0?this.rShiftTo(-t,n):this.lShiftTo(t,n),n},e.prototype.shiftRight=function(t){var n=Ke();return t<0?this.lShiftTo(-t,n):this.rShiftTo(t,n),n},e.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+Sm(this[t]);return this.s<0?this.t*this.DB:-1},e.prototype.bitCount=function(){for(var t=0,n=this.s&this.DM,i=0;i<this.t;++i)t+=xm(this[i]^n);return t},e.prototype.testBit=function(t){var n=Math.floor(t/this.DB);return n>=this.t?this.s!=0:(this[n]&1<<t%this.DB)!=0},e.prototype.setBit=function(t){return this.changeBit(t,ea)},e.prototype.clearBit=function(t){return this.changeBit(t,ef)},e.prototype.flipBit=function(t){return this.changeBit(t,Jl)},e.prototype.add=function(t){var n=Ke();return this.addTo(t,n),n},e.prototype.subtract=function(t){var n=Ke();return this.subTo(t,n),n},e.prototype.multiply=function(t){var n=Ke();return this.multiplyTo(t,n),n},e.prototype.divide=function(t){var n=Ke();return this.divRemTo(t,n,null),n},e.prototype.remainder=function(t){var n=Ke();return this.divRemTo(t,null,n),n},e.prototype.divideAndRemainder=function(t){var n=Ke(),i=Ke();return this.divRemTo(t,n,i),[n,i]},e.prototype.modPow=function(t,n){var i=t.bitLength(),o,r=Ro(1),s;if(i<=0)return r;i<18?o=1:i<48?o=3:i<144?o=4:i<768?o=5:o=6,i<8?s=new Mm(n):n.isEven()?s=new rw(n):s=new zm(n);var a=[],c=3,l=o-1,d=(1<<o)-1;if(a[1]=s.convert(this),o>1){var h=Ke();for(s.sqrTo(a[1],h);c<=d;)a[c]=Ke(),s.mulTo(h,a[c-2],a[c]),c+=2}var g=t.t-1,C,b=!0,w=Ke(),R;for(i=bc(t[g])-1;g>=0;){for(i>=l?C=t[g]>>i-l&d:(C=(t[g]&(1<<i+1)-1)<<l-i,g>0&&(C|=t[g-1]>>this.DB+i-l)),c=o;!(C&1);)C>>=1,--c;if((i-=c)<0&&(i+=this.DB,--g),b)a[C].copyTo(r),b=!1;else{for(;c>1;)s.sqrTo(r,w),s.sqrTo(w,r),c-=2;c>0?s.sqrTo(r,w):(R=r,r=w,w=R),s.mulTo(w,a[C],r)}for(;g>=0&&!(t[g]&1<<i);)s.sqrTo(r,w),R=r,r=w,w=R,--i<0&&(i=this.DB-1,--g)}return s.revert(r)},e.prototype.modInverse=function(t){var n=t.isEven();if(this.isEven()&&n||t.signum()==0)return e.ZERO;for(var i=t.clone(),o=this.clone(),r=Ro(1),s=Ro(0),a=Ro(0),c=Ro(1);i.signum()!=0;){for(;i.isEven();)i.rShiftTo(1,i),n?((!r.isEven()||!s.isEven())&&(r.addTo(this,r),s.subTo(t,s)),r.rShiftTo(1,r)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;o.isEven();)o.rShiftTo(1,o),n?((!a.isEven()||!c.isEven())&&(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);i.compareTo(o)>=0?(i.subTo(o,i),n&&r.subTo(a,r),s.subTo(c,s)):(o.subTo(i,o),n&&a.subTo(r,a),c.subTo(s,c))}if(o.compareTo(e.ONE)!=0)return e.ZERO;if(c.compareTo(t)>=0)return c.subtract(t);if(c.signum()<0)c.addTo(t,c);else return c;return c.signum()<0?c.add(t):c},e.prototype.pow=function(t){return this.exp(t,new ow)},e.prototype.gcd=function(t){var n=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(n.compareTo(i)<0){var o=n;n=i,i=o}var r=n.getLowestSetBit(),s=i.getLowestSetBit();if(s<0)return n;for(r<s&&(s=r),s>0&&(n.rShiftTo(s,n),i.rShiftTo(s,i));n.signum()>0;)(r=n.getLowestSetBit())>0&&n.rShiftTo(r,n),(r=i.getLowestSetBit())>0&&i.rShiftTo(r,i),n.compareTo(i)>=0?(n.subTo(i,n),n.rShiftTo(1,n)):(i.subTo(n,i),i.rShiftTo(1,i));return s>0&&i.lShiftTo(s,i),i},e.prototype.isProbablePrime=function(t){var n,i=this.abs();if(i.t==1&&i[0]<=Pn[Pn.length-1]){for(n=0;n<Pn.length;++n)if(i[0]==Pn[n])return!0;return!1}if(i.isEven())return!1;for(n=1;n<Pn.length;){for(var o=Pn[n],r=n+1;r<Pn.length&&o<iw;)o*=Pn[r++];for(o=i.modInt(o);n<r;)if(o%Pn[n++]==0)return!1}return i.millerRabin(t)},e.prototype.copyTo=function(t){for(var n=this.t-1;n>=0;--n)t[n]=this[n];t.t=this.t,t.s=this.s},e.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},e.prototype.fromString=function(t,n){var i;if(n==16)i=4;else if(n==8)i=3;else if(n==256)i=8;else if(n==2)i=1;else if(n==32)i=5;else if(n==4)i=2;else{this.fromRadix(t,n);return}this.t=0,this.s=0;for(var o=t.length,r=!1,s=0;--o>=0;){var a=i==8?+t[o]&255:Lm(t,o);if(a<0){t.charAt(o)=="-"&&(r=!0);continue}r=!1,s==0?this[this.t++]=a:s+i>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,s+=i,s>=this.DB&&(s-=this.DB)}i==8&&+t[0]&128&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),r&&e.ZERO.subTo(this,this)},e.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},e.prototype.dlShiftTo=function(t,n){var i;for(i=this.t-1;i>=0;--i)n[i+t]=this[i];for(i=t-1;i>=0;--i)n[i]=0;n.t=this.t+t,n.s=this.s},e.prototype.drShiftTo=function(t,n){for(var i=t;i<this.t;++i)n[i-t]=this[i];n.t=Math.max(this.t-t,0),n.s=this.s},e.prototype.lShiftTo=function(t,n){for(var i=t%this.DB,o=this.DB-i,r=(1<<o)-1,s=Math.floor(t/this.DB),a=this.s<<i&this.DM,c=this.t-1;c>=0;--c)n[c+s+1]=this[c]>>o|a,a=(this[c]&r)<<i;for(var c=s-1;c>=0;--c)n[c]=0;n[s]=a,n.t=this.t+s+1,n.s=this.s,n.clamp()},e.prototype.rShiftTo=function(t,n){n.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t){n.t=0;return}var o=t%this.DB,r=this.DB-o,s=(1<<o)-1;n[0]=this[i]>>o;for(var a=i+1;a<this.t;++a)n[a-i-1]|=(this[a]&s)<<r,n[a-i]=this[a]>>o;o>0&&(n[this.t-i-1]|=(this.s&s)<<r),n.t=this.t-i,n.clamp()},e.prototype.subTo=function(t,n){for(var i=0,o=0,r=Math.min(t.t,this.t);i<r;)o+=this[i]-t[i],n[i++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o-=t.s;i<this.t;)o+=this[i],n[i++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;i<t.t;)o-=t[i],n[i++]=o&this.DM,o>>=this.DB;o-=t.s}n.s=o<0?-1:0,o<-1?n[i++]=this.DV+o:o>0&&(n[i++]=o),n.t=i,n.clamp()},e.prototype.multiplyTo=function(t,n){var i=this.abs(),o=t.abs(),r=i.t;for(n.t=r+o.t;--r>=0;)n[r]=0;for(r=0;r<o.t;++r)n[r+i.t]=i.am(0,o[r],n,r,0,i.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)},e.prototype.squareTo=function(t){for(var n=this.abs(),i=t.t=2*n.t;--i>=0;)t[i]=0;for(i=0;i<n.t-1;++i){var o=n.am(i,n[i],t,2*i,0,1);(t[i+n.t]+=n.am(i+1,2*n[i],t,2*i+1,o,n.t-i-1))>=n.DV&&(t[i+n.t]-=n.DV,t[i+n.t+1]=1)}t.t>0&&(t[t.t-1]+=n.am(i,n[i],t,2*i,0,1)),t.s=0,t.clamp()},e.prototype.divRemTo=function(t,n,i){var o=t.abs();if(!(o.t<=0)){var r=this.abs();if(r.t<o.t){n?.fromInt(0),i!=null&&this.copyTo(i);return}i==null&&(i=Ke());var s=Ke(),a=this.s,c=t.s,l=this.DB-bc(o[o.t-1]);l>0?(o.lShiftTo(l,s),r.lShiftTo(l,i)):(o.copyTo(s),r.copyTo(i));var d=s.t,h=s[d-1];if(h!=0){var g=h*(1<<this.F1)+(d>1?s[d-2]>>this.F2:0),C=this.FV/g,b=(1<<this.F1)/g,w=1<<this.F2,R=i.t,D=R-d,M=n??Ke();for(s.dlShiftTo(D,M),i.compareTo(M)>=0&&(i[i.t++]=1,i.subTo(M,i)),e.ONE.dlShiftTo(d,M),M.subTo(s,s);s.t<d;)s[s.t++]=0;for(;--D>=0;){var z=i[--R]==h?this.DM:Math.floor(i[R]*C+(i[R-1]+w)*b);if((i[R]+=s.am(0,z,i,D,0,d))<z)for(s.dlShiftTo(D,M),i.subTo(M,i);i[R]<--z;)i.subTo(M,i)}n!=null&&(i.drShiftTo(d,n),a!=c&&e.ZERO.subTo(n,n)),i.t=d,i.clamp(),l>0&&i.rShiftTo(l,i),a<0&&e.ZERO.subTo(i,i)}}},e.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(!(t&1))return 0;var n=t&3;return n=n*(2-(t&15)*n)&15,n=n*(2-(t&255)*n)&255,n=n*(2-((t&65535)*n&65535))&65535,n=n*(2-t*n%this.DV)%this.DV,n>0?this.DV-n:-n},e.prototype.isEven=function(){return(this.t>0?this[0]&1:this.s)==0},e.prototype.exp=function(t,n){if(t>4294967295||t<1)return e.ONE;var i=Ke(),o=Ke(),r=n.convert(this),s=bc(t)-1;for(r.copyTo(i);--s>=0;)if(n.sqrTo(i,o),(t&1<<s)>0)n.mulTo(o,r,i);else{var a=i;i=o,o=a}return n.revert(i)},e.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},e.prototype.toRadix=function(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var n=this.chunkSize(t),i=Math.pow(t,n),o=Ro(i),r=Ke(),s=Ke(),a="";for(this.divRemTo(o,r,s);r.signum()>0;)a=(i+s.intValue()).toString(t).substr(1)+a,r.divRemTo(o,r,s);return s.intValue().toString(t)+a},e.prototype.fromRadix=function(t,n){this.fromInt(0),n==null&&(n=10);for(var i=this.chunkSize(n),o=Math.pow(n,i),r=!1,s=0,a=0,c=0;c<t.length;++c){var l=Lm(t,c);if(l<0){t.charAt(c)=="-"&&this.signum()==0&&(r=!0);continue}a=n*a+l,++s>=i&&(this.dMultiply(o),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(n,s)),this.dAddOffset(a,0)),r&&e.ZERO.subTo(this,this)},e.prototype.fromNumber=function(t,n,i){if(typeof n=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),ea,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var o=[],r=t&7;o.length=(t>>3)+1,n.nextBytes(o),r>0?o[0]&=(1<<r)-1:o[0]=0,this.fromString(o,256)}},e.prototype.bitwiseTo=function(t,n,i){var o,r,s=Math.min(t.t,this.t);for(o=0;o<s;++o)i[o]=n(this[o],t[o]);if(t.t<this.t){for(r=t.s&this.DM,o=s;o<this.t;++o)i[o]=n(this[o],r);i.t=this.t}else{for(r=this.s&this.DM,o=s;o<t.t;++o)i[o]=n(r,t[o]);i.t=t.t}i.s=n(this.s,t.s),i.clamp()},e.prototype.changeBit=function(t,n){var i=e.ONE.shiftLeft(t);return this.bitwiseTo(i,n,i),i},e.prototype.addTo=function(t,n){for(var i=0,o=0,r=Math.min(t.t,this.t);i<r;)o+=this[i]+t[i],n[i++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o+=t.s;i<this.t;)o+=this[i],n[i++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;i<t.t;)o+=t[i],n[i++]=o&this.DM,o>>=this.DB;o+=t.s}n.s=o<0?-1:0,o>0?n[i++]=o:o<-1&&(n[i++]=this.DV+o),n.t=i,n.clamp()},e.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},e.prototype.dAddOffset=function(t,n){if(t!=0){for(;this.t<=n;)this[this.t++]=0;for(this[n]+=t;this[n]>=this.DV;)this[n]-=this.DV,++n>=this.t&&(this[this.t++]=0),++this[n]}},e.prototype.multiplyLowerTo=function(t,n,i){var o=Math.min(this.t+t.t,n);for(i.s=0,i.t=o;o>0;)i[--o]=0;for(var r=i.t-this.t;o<r;++o)i[o+this.t]=this.am(0,t[o],i,o,0,this.t);for(var r=Math.min(t.t,n);o<r;++o)this.am(0,t[o],i,o,0,n-o);i.clamp()},e.prototype.multiplyUpperTo=function(t,n,i){--n;var o=i.t=this.t+t.t-n;for(i.s=0;--o>=0;)i[o]=0;for(o=Math.max(n-this.t,0);o<t.t;++o)i[this.t+o-n]=this.am(n-o,t[o],i,0,0,this.t+o-n);i.clamp(),i.drShiftTo(1,i)},e.prototype.modInt=function(t){if(t<=0)return 0;var n=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(n==0)i=this[0]%t;else for(var o=this.t-1;o>=0;--o)i=(n*i+this[o])%t;return i},e.prototype.millerRabin=function(t){var n=this.subtract(e.ONE),i=n.getLowestSetBit();if(i<=0)return!1;var o=n.shiftRight(i);t=t+1>>1,t>Pn.length&&(t=Pn.length);for(var r=Ke(),s=0;s<t;++s){r.fromInt(Pn[Math.floor(Math.random()*Pn.length)]);var a=r.modPow(o,this);if(a.compareTo(e.ONE)!=0&&a.compareTo(n)!=0){for(var c=1;c++<i&&a.compareTo(n)!=0;)if(a=a.modPowInt(2,this),a.compareTo(e.ONE)==0)return!1;if(a.compareTo(n)!=0)return!1}}return!0},e.prototype.square=function(){var t=Ke();return this.squareTo(t),t},e.prototype.gcda=function(t,n){var i=this.s<0?this.negate():this.clone(),o=t.s<0?t.negate():t.clone();if(i.compareTo(o)<0){var r=i;i=o,o=r}var s=i.getLowestSetBit(),a=o.getLowestSetBit();if(a<0){n(i);return}s<a&&(a=s),a>0&&(i.rShiftTo(a,i),o.rShiftTo(a,o));var c=function(){(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),(s=o.getLowestSetBit())>0&&o.rShiftTo(s,o),i.compareTo(o)>=0?(i.subTo(o,i),i.rShiftTo(1,i)):(o.subTo(i,o),o.rShiftTo(1,o)),i.signum()>0?setTimeout(c,0):(a>0&&o.lShiftTo(a,o),setTimeout(function(){n(o)},0))};setTimeout(c,10)},e.prototype.fromNumberAsync=function(t,n,i,o){if(typeof n=="number")if(t<2)this.fromInt(1);else{this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),ea,this),this.isEven()&&this.dAddOffset(1,0);var r=this,s=function(){r.dAddOffset(2,0),r.bitLength()>t&&r.subTo(e.ONE.shiftLeft(t-1),r),r.isProbablePrime(n)?setTimeout(function(){o()},0):setTimeout(s,0)};setTimeout(s,0)}else{var a=[],c=t&7;a.length=(t>>3)+1,n.nextBytes(a),c>0?a[0]&=(1<<c)-1:a[0]=0,this.fromString(a,256)}},e}();var ow=function(){function e(){}return e.prototype.convert=function(t){return t},e.prototype.revert=function(t){return t},e.prototype.mulTo=function(t,n,i){t.multiplyTo(n,i)},e.prototype.sqrTo=function(t,n){t.squareTo(n)},e}(),Mm=function(){function e(t){this.m=t}return e.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},e.prototype.revert=function(t){return t},e.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},e.prototype.mulTo=function(t,n,i){t.multiplyTo(n,i),this.reduce(i)},e.prototype.sqrTo=function(t,n){t.squareTo(n),this.reduce(n)},e}(),zm=function(){function e(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}return e.prototype.convert=function(t){var n=Ke();return t.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),t.s<0&&n.compareTo(We.ZERO)>0&&this.m.subTo(n,n),n},e.prototype.revert=function(t){var n=Ke();return t.copyTo(n),this.reduce(n),n},e.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var n=0;n<this.m.t;++n){var i=t[n]&32767,o=i*this.mpl+((i*this.mph+(t[n]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=n+this.m.t,t[i]+=this.m.am(0,o,t,n,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},e.prototype.mulTo=function(t,n,i){t.multiplyTo(n,i),this.reduce(i)},e.prototype.sqrTo=function(t,n){t.squareTo(n),this.reduce(n)},e}(),rw=function(){function e(t){this.m=t,this.r2=Ke(),this.q3=Ke(),We.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t)}return e.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var n=Ke();return t.copyTo(n),this.reduce(n),n},e.prototype.revert=function(t){return t},e.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},e.prototype.mulTo=function(t,n,i){t.multiplyTo(n,i),this.reduce(i)},e.prototype.sqrTo=function(t,n){t.squareTo(n),this.reduce(n)},e}();function Ke(){return new We(null)}function zt(e,t){return new We(e,t)}var Nm=typeof navigator<"u";Nm&&Dm&&navigator.appName=="Microsoft Internet Explorer"?(We.prototype.am=function(t,n,i,o,r,s){for(var a=n&32767,c=n>>15;--s>=0;){var l=this[t]&32767,d=this[t++]>>15,h=c*l+d*a;l=a*l+((h&32767)<<15)+i[o]+(r&1073741823),r=(l>>>30)+(h>>>15)+c*d+(r>>>30),i[o++]=l&1073741823}return r},Po=30):Nm&&Dm&&navigator.appName!="Netscape"?(We.prototype.am=function(t,n,i,o,r,s){for(;--s>=0;){var a=n*this[t++]+i[o]+r;r=Math.floor(a/67108864),i[o++]=a&67108863}return r},Po=26):(We.prototype.am=function(t,n,i,o,r,s){for(var a=n&16383,c=n>>14;--s>=0;){var l=this[t]&16383,d=this[t++]>>14,h=c*l+d*a;l=a*l+((h&16383)<<14)+i[o]+r,r=(l>>28)+(h>>14)+c*d,i[o++]=l&268435455}return r},Po=28);We.prototype.DB=Po;We.prototype.DM=(1<<Po)-1;We.prototype.DV=1<<Po;var of=52;We.prototype.FV=Math.pow(2,of);We.prototype.F1=of-Po;We.prototype.F2=2*Po-of;var Tc=[],is,ti;is="0".charCodeAt(0);for(ti=0;ti<=9;++ti)Tc[is++]=ti;is="a".charCodeAt(0);for(ti=10;ti<36;++ti)Tc[is++]=ti;is="A".charCodeAt(0);for(ti=10;ti<36;++ti)Tc[is++]=ti;function Lm(e,t){var n=Tc[e.charCodeAt(t)];return n??-1}function Ro(e){var t=Ke();return t.fromInt(e),t}function bc(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}We.ZERO=Ro(0);We.ONE=Ro(1);var sw=function(){function e(){this.i=0,this.j=0,this.S=[]}return e.prototype.init=function(t){var n,i,o;for(n=0;n<256;++n)this.S[n]=n;for(i=0,n=0;n<256;++n)i=i+this.S[n]+t[n%t.length]&255,o=this.S[n],this.S[n]=this.S[i],this.S[i]=o;this.i=0,this.j=0},e.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},e}();function Bm(){return new sw}var rf=256;var Ec,Oo=null,mi;if(Oo==null){if(Oo=[],mi=0,ta=void 0,typeof window<"u"&&window.crypto&&window.crypto.getRandomValues)for(wc=new Uint32Array(256),window.crypto.getRandomValues(wc),ta=0;ta<wc.length;++ta)Oo[mi++]=wc[ta]&255;na=0,ia=function(e){if(na=na||0,na>=256||mi>=rf){window.removeEventListener?window.removeEventListener("mousemove",ia,!1):window.detachEvent&&window.detachEvent("onmousemove",ia);return}try{var t=e.x+e.y;Oo[mi++]=t&255,na+=1}catch{}},typeof window<"u"&&(window.addEventListener?window.addEventListener("mousemove",ia,!1):window.attachEvent&&window.attachEvent("onmousemove",ia))}var ta,wc,na,ia;function aw(){if(Ec==null){for(Ec=Bm();mi<rf;){var e=Math.floor(65536*Math.random());Oo[mi++]=e&255}for(Ec.init(Oo),mi=0;mi<Oo.length;++mi)Oo[mi]=0;mi=0}return Ec.next()}var Sc=function(){function e(){}return e.prototype.nextBytes=function(t){for(var n=0;n<t.length;++n)t[n]=aw()},e}();function cw(e,t){if(t<e.length+22)return console.error("Message too long for RSA"),null;for(var n=t-e.length-6,i="",o=0;o<n;o+=2)i+="ff";var r="0001"+i+"00"+e;return zt(r,16)}function uw(e,t){if(t<e.length+11)return console.error("Message too long for RSA"),null;for(var n=[],i=e.length-1;i>=0&&t>0;){var o=e.charCodeAt(i--);o<128?n[--t]=o:o>127&&o<2048?(n[--t]=o&63|128,n[--t]=o>>6|192):(n[--t]=o&63|128,n[--t]=o>>6&63|128,n[--t]=o>>12|224)}n[--t]=0;for(var r=new Sc,s=[];t>2;){for(s[0]=0;s[0]==0;)r.nextBytes(s);n[--t]=s[0]}return n[--t]=2,n[--t]=0,new We(n)}var Fm=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},e.prototype.doPrivate=function(t){if(this.p==null||this.q==null)return t.modPow(this.d,this.n);for(var n=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);n.compareTo(i)<0;)n=n.add(this.p);return n.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)},e.prototype.setPublic=function(t,n){t!=null&&n!=null&&t.length>0&&n.length>0?(this.n=zt(t,16),this.e=parseInt(n,16)):console.error("Invalid RSA public key")},e.prototype.encrypt=function(t){var n=this.n.bitLength()+7>>3,i=uw(t,n);if(i==null)return null;var o=this.doPublic(i);if(o==null)return null;for(var r=o.toString(16),s=r.length,a=0;a<n*2-s;a++)r="0"+r;return r},e.prototype.setPrivate=function(t,n,i){t!=null&&n!=null&&t.length>0&&n.length>0?(this.n=zt(t,16),this.e=parseInt(n,16),this.d=zt(i,16)):console.error("Invalid RSA private key")},e.prototype.setPrivateEx=function(t,n,i,o,r,s,a,c){t!=null&&n!=null&&t.length>0&&n.length>0?(this.n=zt(t,16),this.e=parseInt(n,16),this.d=zt(i,16),this.p=zt(o,16),this.q=zt(r,16),this.dmp1=zt(s,16),this.dmq1=zt(a,16),this.coeff=zt(c,16)):console.error("Invalid RSA private key")},e.prototype.generate=function(t,n){var i=new Sc,o=t>>1;this.e=parseInt(n,16);for(var r=new We(n,16);;){for(;this.p=new We(t-o,1,i),!(this.p.subtract(We.ONE).gcd(r).compareTo(We.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new We(o,1,i),!(this.q.subtract(We.ONE).gcd(r).compareTo(We.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var a=this.p.subtract(We.ONE),c=this.q.subtract(We.ONE),l=a.multiply(c);if(l.gcd(r).compareTo(We.ONE)==0){this.n=this.p.multiply(this.q),this.d=r.modInverse(l),this.dmp1=this.d.mod(a),this.dmq1=this.d.mod(c),this.coeff=this.q.modInverse(this.p);break}}},e.prototype.decrypt=function(t){var n=zt(t,16),i=this.doPrivate(n);return i==null?null:lw(i,this.n.bitLength()+7>>3)},e.prototype.generateAsync=function(t,n,i){var o=new Sc,r=t>>1;this.e=parseInt(n,16);var s=new We(n,16),a=this,c=function(){var l=function(){if(a.p.compareTo(a.q)<=0){var g=a.p;a.p=a.q,a.q=g}var C=a.p.subtract(We.ONE),b=a.q.subtract(We.ONE),w=C.multiply(b);w.gcd(s).compareTo(We.ONE)==0?(a.n=a.p.multiply(a.q),a.d=s.modInverse(w),a.dmp1=a.d.mod(C),a.dmq1=a.d.mod(b),a.coeff=a.q.modInverse(a.p),setTimeout(function(){i()},0)):setTimeout(c,0)},d=function(){a.q=Ke(),a.q.fromNumberAsync(r,1,o,function(){a.q.subtract(We.ONE).gcda(s,function(g){g.compareTo(We.ONE)==0&&a.q.isProbablePrime(10)?setTimeout(l,0):setTimeout(d,0)})})},h=function(){a.p=Ke(),a.p.fromNumberAsync(t-r,1,o,function(){a.p.subtract(We.ONE).gcda(s,function(g){g.compareTo(We.ONE)==0&&a.p.isProbablePrime(10)?setTimeout(d,0):setTimeout(h,0)})})};setTimeout(h,0)};setTimeout(c,0)},e.prototype.sign=function(t,n,i){var o=fw(i),r=o+n(t).toString(),s=cw(r,this.n.bitLength()/4);if(s==null)return null;var a=this.doPrivate(s);if(a==null)return null;var c=a.toString(16);return c.length&1?"0"+c:c},e.prototype.verify=function(t,n,i){var o=zt(n,16),r=this.doPublic(o);if(r==null)return null;var s=r.toString(16).replace(/^1f+00/,""),a=dw(s);return a==i(t).toString()},e}();function lw(e,t){for(var n=e.toByteArray(),i=0;i<n.length&&n[i]==0;)++i;if(n.length-i!=t-1||n[i]!=2)return null;for(++i;n[i]!=0;)if(++i>=n.length)return null;for(var o="";++i<n.length;){var r=n[i]&255;r<128?o+=String.fromCharCode(r):r>191&&r<224?(o+=String.fromCharCode((r&31)<<6|n[i+1]&63),++i):(o+=String.fromCharCode((r&15)<<12|(n[i+1]&63)<<6|n[i+2]&63),i+=2)}return o}var xc={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"};function fw(e){return xc[e]||""}function dw(e){for(var t in xc)if(xc.hasOwnProperty(t)){var n=xc[t],i=n.length;if(e.substr(0,i)==n)return e.substr(i)}return e}/*!
Copyright (c) 2011, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.9.0
*/var Ht={};Ht.lang={extend:function(e,t,n){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var i=function(){};if(i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),n){var o;for(o in n)e.prototype[o]=n[o];var r=function(){},s=["toString","valueOf"];try{/MSIE/.test(navigator.userAgent)&&(r=function(a,c){for(o=0;o<s.length;o=o+1){var l=s[o],d=c[l];typeof d=="function"&&d!=Object.prototype[l]&&(a[l]=d)}})}catch{}r(e.prototype,n)}}};/**
 * @fileOverview
 * @name asn1-1.0.js
 * @author Kenji Urushima kenji.urushima@gmail.com
 * @version asn1 1.0.13 (2017-Jun-02)
 * @since jsrsasign 2.1
 * @license <a href="https://kjur.github.io/jsrsasign/license/">MIT License</a>
 */var fe={};(typeof fe.asn1>"u"||!fe.asn1)&&(fe.asn1={});fe.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if(t.substr(0,1)!="-")t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1),i=n.length;i%2==1?i+=1:t.match(/^[0-7]/)||(i+=2);for(var o="",r=0;r<i;r++)o+="f";var s=new We(o,16),a=s.xor(e).add(We.ONE);t=a.toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return hextopem(e,t)},this.newObject=function(e){var t=fe,n=t.asn1,i=n.DERBoolean,o=n.DERInteger,r=n.DERBitString,s=n.DEROctetString,a=n.DERNull,c=n.DERObjectIdentifier,l=n.DEREnumerated,d=n.DERUTF8String,h=n.DERNumericString,g=n.DERPrintableString,C=n.DERTeletexString,b=n.DERIA5String,w=n.DERUTCTime,R=n.DERGeneralizedTime,D=n.DERSequence,M=n.DERSet,z=n.DERTaggedObject,U=n.ASN1Util.newObject,Y=Object.keys(e);if(Y.length!=1)throw"key of param shall be only one.";var m=Y[0];if(":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+m+":")==-1)throw"undefined key: "+m;if(m=="bool")return new i(e[m]);if(m=="int")return new o(e[m]);if(m=="bitstr")return new r(e[m]);if(m=="octstr")return new s(e[m]);if(m=="null")return new a(e[m]);if(m=="oid")return new c(e[m]);if(m=="enum")return new l(e[m]);if(m=="utf8str")return new d(e[m]);if(m=="numstr")return new h(e[m]);if(m=="prnstr")return new g(e[m]);if(m=="telstr")return new C(e[m]);if(m=="ia5str")return new b(e[m]);if(m=="utctime")return new w(e[m]);if(m=="gentime")return new R(e[m]);if(m=="seq"){for(var Q=e[m],q=[],Z=0;Z<Q.length;Z++){var H=U(Q[Z]);q.push(H)}return new D({array:q})}if(m=="set"){for(var Q=e[m],q=[],Z=0;Z<Q.length;Z++){var H=U(Q[Z]);q.push(H)}return new M({array:q})}if(m=="tag"){var K=e[m];if(Object.prototype.toString.call(K)==="[object Array]"&&K.length==3){var v=U(K[2]);return new z({tag:K[0],explicit:K[1],obj:v})}else{var S={};if(K.explicit!==void 0&&(S.explicit=K.explicit),K.tag!==void 0&&(S.tag=K.tag),K.obj===void 0)throw"obj shall be specified for 'tag'.";return S.obj=U(K.obj),new z(S)}}},this.jsonToASN1HEX=function(e){var t=this.newObject(e);return t.getEncodedHex()}};fe.asn1.ASN1Util.oidHexToInt=function(e){for(var o="",t=parseInt(e.substr(0,2),16),n=Math.floor(t/40),i=t%40,o=n+"."+i,r="",s=2;s<e.length;s+=2){var a=parseInt(e.substr(s,2),16),c=("00000000"+a.toString(2)).slice(-8);if(r=r+c.substr(1,7),c.substr(0,1)=="0"){var l=new We(r,2);o=o+"."+l.toString(10),r=""}}return o};fe.asn1.ASN1Util.oidIntToHex=function(e){var t=function(a){var c=a.toString(16);return c.length==1&&(c="0"+c),c},n=function(a){var c="",l=new We(a,10),d=l.toString(2),h=7-d.length%7;h==7&&(h=0);for(var g="",C=0;C<h;C++)g+="0";d=g+d;for(var C=0;C<d.length-1;C+=7){var b=d.substr(C,7);C!=d.length-7&&(b="1"+b),c+=t(parseInt(b,2))}return c};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var i="",o=e.split("."),r=parseInt(o[0])*40+parseInt(o[1]);i+=t(r),o.splice(0,2);for(var s=0;s<o.length;s++)i+=n(o[s]);return i};fe.asn1.ASN1Object=function(){var e=!0,t=null,n="00",i="00",o="";this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+o.length+",v="+this.hV;var r=this.hV.length/2,s=r.toString(16);if(s.length%2==1&&(s="0"+s),r<128)return s;var a=s.length/2;if(a>15)throw"ASN.1 length too long to represent by 8x: n = "+r.toString(16);var c=128+a;return c.toString(16)+s},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}};fe.asn1.DERAbstractString=function(e){fe.asn1.DERAbstractString.superclass.constructor.call(this);var t=null,n=null;this.getString=function(){return this.s},this.setString=function(i){this.hTLV=null,this.isModified=!0,this.s=i,this.hV=stohex(this.s)},this.setStringHex=function(i){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=i},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"?this.setString(e):typeof e.str<"u"?this.setString(e.str):typeof e.hex<"u"&&this.setStringHex(e.hex))};Ht.lang.extend(fe.asn1.DERAbstractString,fe.asn1.ASN1Object);fe.asn1.DERAbstractTime=function(e){fe.asn1.DERAbstractTime.superclass.constructor.call(this);var t=null,n=null;this.localDateToUTC=function(i){utc=i.getTime()+i.getTimezoneOffset()*6e4;var o=new Date(utc);return o},this.formatDate=function(i,o,r){var s=this.zeroPadding,a=this.localDateToUTC(i),c=String(a.getFullYear());o=="utc"&&(c=c.substr(2,2));var l=s(String(a.getMonth()+1),2),d=s(String(a.getDate()),2),h=s(String(a.getHours()),2),g=s(String(a.getMinutes()),2),C=s(String(a.getSeconds()),2),b=c+l+d+h+g+C;if(r===!0){var w=a.getMilliseconds();if(w!=0){var R=s(String(w),3);R=R.replace(/[0]+$/,""),b=b+"."+R}}return b+"Z"},this.zeroPadding=function(i,o){return i.length>=o?i:new Array(o-i.length+1).join("0")+i},this.getString=function(){return this.s},this.setString=function(i){this.hTLV=null,this.isModified=!0,this.s=i,this.hV=stohex(i)},this.setByDateValue=function(i,o,r,s,a,c){var l=new Date(Date.UTC(i,o-1,r,s,a,c,0));this.setByDate(l)},this.getFreshValueHex=function(){return this.hV}};Ht.lang.extend(fe.asn1.DERAbstractTime,fe.asn1.ASN1Object);fe.asn1.DERAbstractStructured=function(e){fe.asn1.DERAbstractString.superclass.constructor.call(this);var t=null;this.setByASN1ObjectArray=function(n){this.hTLV=null,this.isModified=!0,this.asn1Array=n},this.appendASN1Object=function(n){this.hTLV=null,this.isModified=!0,this.asn1Array.push(n)},this.asn1Array=new Array,typeof e<"u"&&typeof e.array<"u"&&(this.asn1Array=e.array)};Ht.lang.extend(fe.asn1.DERAbstractStructured,fe.asn1.ASN1Object);fe.asn1.DERBoolean=function(){fe.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"};Ht.lang.extend(fe.asn1.DERBoolean,fe.asn1.ASN1Object);fe.asn1.DERInteger=function(e){fe.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=fe.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var n=new We(String(t),10);this.setByBigInteger(n)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e.bigint<"u"?this.setByBigInteger(e.bigint):typeof e.int<"u"?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):typeof e.hex<"u"&&this.setValueHex(e.hex))};Ht.lang.extend(fe.asn1.DERInteger,fe.asn1.ASN1Object);fe.asn1.DERBitString=function(e){if(e!==void 0&&typeof e.obj<"u"){var t=fe.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}fe.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(n){this.hTLV=null,this.isModified=!0,this.hV=n},this.setUnusedBitsAndHexValue=function(n,i){if(n<0||7<n)throw"unused bits shall be from 0 to 7: u = "+n;var o="0"+n;this.hTLV=null,this.isModified=!0,this.hV=o+i},this.setByBinaryString=function(n){n=n.replace(/0+$/,"");var i=8-n.length%8;i==8&&(i=0);for(var o=0;o<=i;o++)n+="0";for(var r="",o=0;o<n.length-1;o+=8){var s=n.substr(o,8),a=parseInt(s,2).toString(16);a.length==1&&(a="0"+a),r+=a}this.hTLV=null,this.isModified=!0,this.hV="0"+i+r},this.setByBooleanArray=function(n){for(var i="",o=0;o<n.length;o++)n[o]==!0?i+="1":i+="0";this.setByBinaryString(i)},this.newFalseArray=function(n){for(var i=new Array(n),o=0;o<n;o++)i[o]=!1;return i},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):typeof e.hex<"u"?this.setHexValueIncludingUnusedBits(e.hex):typeof e.bin<"u"?this.setByBinaryString(e.bin):typeof e.array<"u"&&this.setByBooleanArray(e.array))};Ht.lang.extend(fe.asn1.DERBitString,fe.asn1.ASN1Object);fe.asn1.DEROctetString=function(e){if(e!==void 0&&typeof e.obj<"u"){var t=fe.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}fe.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"};Ht.lang.extend(fe.asn1.DEROctetString,fe.asn1.DERAbstractString);fe.asn1.DERNull=function(){fe.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"};Ht.lang.extend(fe.asn1.DERNull,fe.asn1.ASN1Object);fe.asn1.DERObjectIdentifier=function(e){var t=function(i){var o=i.toString(16);return o.length==1&&(o="0"+o),o},n=function(i){var o="",r=new We(i,10),s=r.toString(2),a=7-s.length%7;a==7&&(a=0);for(var c="",l=0;l<a;l++)c+="0";s=c+s;for(var l=0;l<s.length-1;l+=7){var d=s.substr(l,7);l!=s.length-7&&(d="1"+d),o+=t(parseInt(d,2))}return o};fe.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(i){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=i},this.setValueOidString=function(i){if(!i.match(/^[0-9.]+$/))throw"malformed oid string: "+i;var o="",r=i.split("."),s=parseInt(r[0])*40+parseInt(r[1]);o+=t(s),r.splice(0,2);for(var a=0;a<r.length;a++)o+=n(r[a]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=o},this.setValueName=function(i){var o=fe.asn1.x509.OID.name2oid(i);if(o!=="")this.setValueOidString(o);else throw"DERObjectIdentifier oidName undefined: "+i},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(typeof e=="string"?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):e.oid!==void 0?this.setValueOidString(e.oid):e.hex!==void 0?this.setValueHex(e.hex):e.name!==void 0&&this.setValueName(e.name))};Ht.lang.extend(fe.asn1.DERObjectIdentifier,fe.asn1.ASN1Object);fe.asn1.DEREnumerated=function(e){fe.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=fe.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var n=new We(String(t),10);this.setByBigInteger(n)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e.int<"u"?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):typeof e.hex<"u"&&this.setValueHex(e.hex))};Ht.lang.extend(fe.asn1.DEREnumerated,fe.asn1.ASN1Object);fe.asn1.DERUTF8String=function(e){fe.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"};Ht.lang.extend(fe.asn1.DERUTF8String,fe.asn1.DERAbstractString);fe.asn1.DERNumericString=function(e){fe.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"};Ht.lang.extend(fe.asn1.DERNumericString,fe.asn1.DERAbstractString);fe.asn1.DERPrintableString=function(e){fe.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"};Ht.lang.extend(fe.asn1.DERPrintableString,fe.asn1.DERAbstractString);fe.asn1.DERTeletexString=function(e){fe.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"};Ht.lang.extend(fe.asn1.DERTeletexString,fe.asn1.DERAbstractString);fe.asn1.DERIA5String=function(e){fe.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"};Ht.lang.extend(fe.asn1.DERIA5String,fe.asn1.DERAbstractString);fe.asn1.DERUTCTime=function(e){fe.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return typeof this.date>"u"&&typeof this.s>"u"&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},e!==void 0&&(e.str!==void 0?this.setString(e.str):typeof e=="string"&&e.match(/^[0-9]{12}Z$/)?this.setString(e):e.hex!==void 0?this.setStringHex(e.hex):e.date!==void 0&&this.setByDate(e.date))};Ht.lang.extend(fe.asn1.DERUTCTime,fe.asn1.DERAbstractTime);fe.asn1.DERGeneralizedTime=function(e){fe.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},e!==void 0&&(e.str!==void 0?this.setString(e.str):typeof e=="string"&&e.match(/^[0-9]{14}Z$/)?this.setString(e):e.hex!==void 0?this.setStringHex(e.hex):e.date!==void 0&&this.setByDate(e.date),e.millis===!0&&(this.withMillis=!0))};Ht.lang.extend(fe.asn1.DERGeneralizedTime,fe.asn1.DERAbstractTime);fe.asn1.DERSequence=function(e){fe.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var t="",n=0;n<this.asn1Array.length;n++){var i=this.asn1Array[n];t+=i.getEncodedHex()}return this.hV=t,this.hV}};Ht.lang.extend(fe.asn1.DERSequence,fe.asn1.DERAbstractStructured);fe.asn1.DERSet=function(e){fe.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,n=0;n<this.asn1Array.length;n++){var i=this.asn1Array[n];t.push(i.getEncodedHex())}return this.sortFlag==!0&&t.sort(),this.hV=t.join(""),this.hV},typeof e<"u"&&typeof e.sortflag<"u"&&e.sortflag==!1&&(this.sortFlag=!1)};Ht.lang.extend(fe.asn1.DERSet,fe.asn1.DERAbstractStructured);fe.asn1.DERTaggedObject=function(e){fe.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,n,i){this.hT=n,this.isExplicit=t,this.asn1Object=i,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=i.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,n),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e.tag<"u"&&(this.hT=e.tag),typeof e.explicit<"u"&&(this.isExplicit=e.explicit),typeof e.obj<"u"&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))};Ht.lang.extend(fe.asn1.DERTaggedObject,fe.asn1.ASN1Object);var hw=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),sf=function(e){hw(t,e);function t(n){var i=e.call(this)||this;return n&&(typeof n=="string"?i.parseKey(n):(t.hasPrivateKeyProperty(n)||t.hasPublicKeyProperty(n))&&i.parsePropertiesFrom(n)),i}return t.prototype.parseKey=function(n){try{var i=0,o=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/,s=r.test(n)?Rm.decode(n):Cc.unarmor(n),a=Im.decode(s);if(a.sub.length===3&&(a=a.sub[2].sub[0]),a.sub.length===9){i=a.sub[1].getHexStringValue(),this.n=zt(i,16),o=a.sub[2].getHexStringValue(),this.e=parseInt(o,16);var c=a.sub[3].getHexStringValue();this.d=zt(c,16);var l=a.sub[4].getHexStringValue();this.p=zt(l,16);var d=a.sub[5].getHexStringValue();this.q=zt(d,16);var h=a.sub[6].getHexStringValue();this.dmp1=zt(h,16);var g=a.sub[7].getHexStringValue();this.dmq1=zt(g,16);var C=a.sub[8].getHexStringValue();this.coeff=zt(C,16)}else if(a.sub.length===2)if(a.sub[0].sub){var b=a.sub[1],w=b.sub[0];i=w.sub[0].getHexStringValue(),this.n=zt(i,16),o=w.sub[1].getHexStringValue(),this.e=parseInt(o,16)}else i=a.sub[0].getHexStringValue(),this.n=zt(i,16),o=a.sub[1].getHexStringValue(),this.e=parseInt(o,16);else return!1;return!0}catch{return!1}},t.prototype.getPrivateBaseKey=function(){var n={array:[new fe.asn1.DERInteger({int:0}),new fe.asn1.DERInteger({bigint:this.n}),new fe.asn1.DERInteger({int:this.e}),new fe.asn1.DERInteger({bigint:this.d}),new fe.asn1.DERInteger({bigint:this.p}),new fe.asn1.DERInteger({bigint:this.q}),new fe.asn1.DERInteger({bigint:this.dmp1}),new fe.asn1.DERInteger({bigint:this.dmq1}),new fe.asn1.DERInteger({bigint:this.coeff})]},i=new fe.asn1.DERSequence(n);return i.getEncodedHex()},t.prototype.getPrivateBaseKeyB64=function(){return Qr(this.getPrivateBaseKey())},t.prototype.getPublicBaseKey=function(){var n=new fe.asn1.DERSequence({array:[new fe.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new fe.asn1.DERNull]}),i=new fe.asn1.DERSequence({array:[new fe.asn1.DERInteger({bigint:this.n}),new fe.asn1.DERInteger({int:this.e})]}),o=new fe.asn1.DERBitString({hex:"00"+i.getEncodedHex()}),r=new fe.asn1.DERSequence({array:[n,o]});return r.getEncodedHex()},t.prototype.getPublicBaseKeyB64=function(){return Qr(this.getPublicBaseKey())},t.wordwrap=function(n,i){if(i=i||64,!n)return n;var o="(.{1,"+i+`})( +|$
?)|(.{1,`+i+"})";return n.match(RegExp(o,"g")).join(`
`)},t.prototype.getPrivateKey=function(){var n=`-----BEGIN RSA PRIVATE KEY-----
`;return n+=t.wordwrap(this.getPrivateBaseKeyB64())+`
`,n+="-----END RSA PRIVATE KEY-----",n},t.prototype.getPublicKey=function(){var n=`-----BEGIN PUBLIC KEY-----
`;return n+=t.wordwrap(this.getPublicBaseKeyB64())+`
`,n+="-----END PUBLIC KEY-----",n},t.hasPublicKeyProperty=function(n){return n=n||{},n.hasOwnProperty("n")&&n.hasOwnProperty("e")},t.hasPrivateKeyProperty=function(n){return n=n||{},n.hasOwnProperty("n")&&n.hasOwnProperty("e")&&n.hasOwnProperty("d")&&n.hasOwnProperty("p")&&n.hasOwnProperty("q")&&n.hasOwnProperty("dmp1")&&n.hasOwnProperty("dmq1")&&n.hasOwnProperty("coeff")},t.prototype.parsePropertiesFrom=function(n){this.n=n.n,this.e=n.e,n.hasOwnProperty("d")&&(this.d=n.d,this.p=n.p,this.q=n.q,this.dmp1=n.dmp1,this.dmq1=n.dmq1,this.coeff=n.coeff)},t}(Fm);var af,pw=typeof process<"u"?(af=process.env)===null||af===void 0?void 0:af.npm_package_version:void 0,Vm=function(){function e(t){t===void 0&&(t={}),t=t||{},this.default_key_size=t.default_key_size?parseInt(t.default_key_size,10):1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null}return e.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new sf(t)},e.prototype.setPrivateKey=function(t){this.setKey(t)},e.prototype.setPublicKey=function(t){this.setKey(t)},e.prototype.decrypt=function(t){try{return this.getKey().decrypt(tf(t))}catch{return!1}},e.prototype.encrypt=function(t){try{return Qr(this.getKey().encrypt(t))}catch{return!1}},e.prototype.sign=function(t,n,i){try{return Qr(this.getKey().sign(t,n,i))}catch{return!1}},e.prototype.verify=function(t,n,i){try{return this.getKey().verify(t,tf(n),i)}catch{return!1}},e.prototype.getKey=function(t){if(!this.key){if(this.key=new sf,t&&{}.toString.call(t)==="[object Function]"){this.key.generateAsync(this.default_key_size,this.default_public_exponent,t);return}this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},e.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},e.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},e.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},e.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},e.version=pw,e}();var Um=Vm;var FM=Di(Gm(),1),ni={getRealmonitor(e){return new Promise((t,n)=>{ni.ajaxRequest({url:"/evo-apigw/admin/API/MTS/Video/StartVideo",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},getTalkRtsp(e){return new Promise((t,n)=>{ni.ajaxRequest({url:"/evo-apigw/admin/API/MTS/Audio/StartTalk",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},getRecordRtspByTime(e){return new Promise((t,n)=>{ni.ajaxRequest({url:"/evo-apigw/admin/API/SS/Playback/StartPlaybackByTime",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},getRecordRtspByFile(e){return new Promise((t,n)=>{ni.ajaxRequest({url:"/evo-apigw/admin/API/SS/Playback/StartPlaybackByFile",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},getRecords(e){return new Promise((t,n)=>{ni.ajaxRequest({url:"/evo-apigw/admin/API/SS/Record/QueryRecords",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},setPtzDirection(e){return new Promise((t,n)=>{ni.ajaxRequest({url:"/evo-apigw/admin/API/DMS/Ptz/OperateDirect",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},setPtzCamera(e){return new Promise((t,n)=>{ni.ajaxRequest({url:"/evo-apigw/admin/API/DMS/Ptz/OperateCamera",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},controlSitPosition(e){return new Promise((t,n)=>{ni.ajaxRequest({url:"/evo-apigw/admin/API/DMS/Ptz/SitPosition",data:e}).then(i=>{t(i.data)}).catch(i=>{n(i)})})},ajaxRequest(e){var t=localStorage.getItem("accessToken"),n=t.split(":")[0];return e.headers=e.headers?e.headers:{},new Promise((i,o)=>{window.$.ajax({url:e.url,type:e.type?e.type:"post",dataType:e.dataType?e.dataType:"json",data:JSON.stringify(e.data),headers:Object.assign({Authorization:"bearer "+t,"User-Id":n,"Content-Type":"application/json",proxyip:localStorage.proxyIp},e.headers),contentType:"application/json;charset=utf-8",crossDomain:!0,success:function(r){r.code==1e3||r.code=="0"?i(r):r.code=="27001007"?ni.refreshToken().then(()=>{ni.ajaxRequest(e).then(s=>{i(s)})}):o(r)}})})},refreshToken(){var e=localStorage.getItem("refreshToken"),t=localStorage.getItem("checked")?"web_client_remember":"web_client",n={refresh_token:e,grant_type:"refresh_token",client_id:t,client_secret:"web_client"},i="";for(var o in n)i+="&"+o+"="+n[o];return i=i.slice(1),new Promise((r,s)=>{window.$.ajax({url:"/evo-apigw/evo-oauth/oauth/token",type:"post",dataType:"json",data:i,headers:{"content-type":"application/x-www-form-urlencoded",proxyip:localStorage.proxyIp},success:function(a){console.log(a),a.code==="0"?(localStorage.setItem("accessToken",a.data.access_token),localStorage.setItem("refreshToken",a.data.refresh_token),localStorage.setItem("expiresTime",new Date().getTime()+a.data.expires_in*1e3),ni.ajaxRequest({url:"/evo-apigw/evo-brm/1.2.0/user/keepalive",data:{clientType:1,magicId:localStorage.magicId,timeout:1e4}}),r()):(console.error("refreshToken \u5931\u6548\uFF0C\u8BF7\u767B\u5F55\u5E73\u53F0"),window.open(location.origin),s())}})})}},cf=ni;var mw={num:1,maxNum:25,showControl:!0,showRecordProgressBar:!0,isDynamicLoadLib:!0,onlyLoadSingleLib:!1,useNginxProxy:!1,openIvs:!1,useH264MSE:!0,useH265MSE:!0,showIcons:{streamChangeSelect:!0,talkIcon:!0,localRecordIcon:!0,audioIcon:!0,snapshotIcon:!0,closeIcon:!0},downloadMp4Record:!0,localRecordSize:100,playCenterRecordByTime:!1},ra={websocketPorts:{realmonitor:"realmonitor-websocket",playback:"playback-websocket",realmonitor_ws:"9100",playback_ws:"9320"},errorVideoInfo:{101:"\u64AD\u653E\u5EF6\u65F6\u5927\u4E8E8s",201:"\u5F53\u524D\u97F3\u9891\u65E0\u6CD5\u64AD\u653E",202:"websocket\u8FDE\u63A5\u9519\u8BEF",203:"\u6587\u4EF6\u64AD\u653E\u5B8C\u6210",401:"\u8BE5\u7528\u6237\u65E0\u64CD\u4F5C\u6743\u9650",404:"\u8BF7\u6C42\u8D85\u65F6\u6216\u672A\u627E\u5230",405:"\u64AD\u653E\u8D85\u65F6",406:"\u89C6\u9891\u6D41\u7C7B\u578B\u89E3\u6790\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u901A\u9053\u914D\u7F6E",407:"\u8BF7\u6C42\u8D85\u65F6",457:"\u65F6\u95F4\u8BBE\u7F6E\u9519\u8BEF",503:"SETUP\u670D\u52A1\u4E0D\u53EF\u7528",504:"\u5BF9\u8BB2\u5931\u8D25",701:"Chrome\u7248\u672C\u4F4E\uFF0C\u8BF7\u5347\u7EA7\u5230\u6700\u65B0\u7684Chrome\u7248\u672C",702:"Firefox\u7248\u672C\u4F4E\uFF0C\u8BF7\u5347\u7EA7\u5230\u6700\u65B0\u7684Firefox\u7248\u672C",703:"Edge\u7248\u672C\u4F4E\uFF0C\u8BF7\u5347\u7EA7\u5230\u6700\u65B0\u7684Edge\u7248\u672C",defaultErrorMsg:"\u64AD\u653E\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u914D\u7F6E"},errorInfo:{101:"\u6240\u9009\u901A\u9053\u79BB\u7EBF\uFF0C\u65E0\u6CD5\u64AD\u653E",102:"\u67E5\u8BE2\u5B9E\u65F6\u9884\u89C8rtsp\u5931\u8D25",201:"\u6240\u9009\u901A\u9053\u672A\u67E5\u8BE2\u5230\u5F55\u50CF\u6587\u4EF6",202:"\u67E5\u8BE2\u5F55\u50CF\u6587\u4EF6\u5217\u8868\u5931\u8D25",203:"\u67E5\u8BE2\u5F55\u50CFrtsp\u5931\u8D25",204:"$0\u500D\u901F\u65E0\u6CD5\u64AD\u653E\u97F3\u9891",301:"\u6B63\u5728\u5BF9\u8BB2\uFF0C\u65E0\u6CD5\u6253\u5F00\u97F3\u9891",302:"\u5176\u4ED6\u8BBE\u5907\u5BF9\u8BB2\u4E2D\uFF0C\u65E0\u6CD5\u5F00\u542F\u97F3\u9891",303:"\u5176\u4ED6\u8BBE\u5907\u5BF9\u8BB2\u4E2D\uFF0C\u65E0\u6CD5\u5F00\u542F\u5BF9\u8BB2",304:"\u67E5\u8BE2\u5BF9\u8BB2rtsp\u5931\u8D25",305:"http\u534F\u8BAE\u4E0D\u652F\u6301\u5BF9\u8BB2",501:"\u89E3\u7801\u5E93\u672A\u521D\u59CB\u5316\u5B8C\u6210\uFF0C\u8BF7\u7A0D\u540E\u64AD\u653E\uFF01",502:"\u89E3\u7801\u5E93\u672A\u521D\u59CB\u5316\u5B8C\u6210\uFF0C\u8BF7\u7A0D\u540E\u5BF9\u8BB2\uFF01",503:"\u8BF7\u68C0\u67E5\u521B\u5EFA\u64AD\u653E\u5668\u65F6\uFF0C\u64AD\u653E\u5668\u5BB9\u5668\u662F\u5426\u5B58\u5728",601:"\u6240\u64CD\u4F5C\u64AD\u653E\u5668\u4E0D\u5B58\u5728",602:"\u6240\u9009\u64AD\u653E\u5668\u6B63\u5728\u672C\u5730\u5F55\u50CF\u4E2D\uFF0C\u4E0D\u53EF\u91CD\u590D\u672C\u5730\u5F55\u50CF",603:"\u6240\u9009\u64AD\u653E\u5668\u672A\u64AD\u653E\u5F55\u50CF\uFF0C\u4E0D\u53EF\u672C\u5730\u5F55\u50CF",604:"\u6240\u9009\u64AD\u653E\u5668\u672A\u5F00\u59CB\u672C\u5730\u5F55\u50CF\uFF0C\u4E0D\u53EF\u64CD\u4F5C\u5173\u95ED\u672C\u5730\u5F55\u50CF",605:"\u65F6\u95F4\u8DF3\u8F6C\u64AD\u653E\u4F20\u53C2\u9519\u8BEF",606:"\u8BBE\u7F6E\u81EA\u9002\u5E94\u62C9\u4F38\u4F20\u53C2\u9519\u8BEF",607:"\u5B9E\u65F6\u9884\u89C8\u4E0D\u652F\u6301\u500D\u901F\u64AD\u653E",608:"\u9700\u4F20\u5165\u6B63\u786E\u7684$0\u65B9\u6CD5\uFF1A$1"}},oa={clientType:"WINPC",clientMac:"30:9c:23:79:40:08",clientPushId:"",project:"PSDK",method:"MTS.Video.StartVideo",data:{optional:"/admin/API/MTS/Video/StartVideo",dataType:"3",streamType:"2",channelId:"",trackId:""}};function Io(e){this.server=e.server,this.config=window.videoConfig?window.videoConfig:mw;let t=this.server.split("//");this.serverIp=t[1],this.protocol=t[0],this.cameraDevices={},this.type="real",this.playerControls={},this.portToPlayer={},window.cPlusVisibleDecCallBack=this.cPlusVisibleDecCallBack.bind(this),window.cExtraDrawDataCallBack=this.cExtraDrawDataCallBack.bind(this),window.cExtraDrawDrawCallBack=this.cExtraDrawDrawCallBack.bind(this),window.cRecordDataCallBack=this.cRecordDataCallBack.bind(this);let n=window.dahuaUsername?window.dahuaUsername:"admin",i=window.dahuaPassword?window.dahuaPassword:"Admin123",o=this;yw().then(r=>{let s=r.publicKey,a={username:n,password:_w(s,i),code:"",grant_type:"password",client_id:"web_client",client_secret:"web_client",public_key:s,verifyCodeFlag:1};localStorage.setItem("proxyIp",o.serverIp),localStorage.setItem("UserName",a.username),Js({method:"post",contentType:"application/x-www-form-urlencoded",url:"evo-oauth/oauth/token",data:a}).then(c=>{localStorage.setItem("accessToken",c.access_token),localStorage.setItem("refreshToken",c.refresh_token),localStorage.setItem("userId",c.userId),localStorage.setItem("magicId",c.magicId),localStorage.setItem("remainderDays",c.remainderDays||""),console.log("====\u5927\u534E\u670D\u52A1\u767B\u5F55\u6210\u529F====");let l=o.protocol==="https:",d=!0;o.config.isDynamicLoadLib&&gw(l,d,o);var h={checkStat:1,showEmptyOrgNode:0,type:"001;;1"};Js({method:"post",url:"evo-brm/1.2.0/tree",data:h,isSNoTip:!0}).then(function(g){console.log(g);for(var C=0;C<g.value.length;C++)g.value[C].name!="\u6839\u8282\u70B9"&&g.value[C].deviceIp&&!o.cameraDevices[g.value[C].deviceIp]&&(o.cameraDevices[g.value[C].deviceIp]=g.value[C])}).catch(g=>{console.log(g)})}).catch(c=>{console.log(c)})}).catch(r=>{console.log(r)})}Io.prototype.createPlayerControl=function(e,t,n,i="2",o){var r=this;let s="";if(this.cameraDevices[e])s=this.cameraDevices[e].id;else return console.log("\u6CA1\u6709\u67E5\u8BE2\u5230\u5BF9\u5E94ip\u7684\u6444\u50CF\u673A\u8BBE\u5907\uFF1A"+e),!1;var a={checkStat:1,id:s,showEmptyOrgNode:0,type:"001;;1"};return Js({method:"post",url:"evo-brm/1.2.0/tree",data:a,isSNoTip:!0}).then(function(c){let l=c.value[0];r.createRealmonitor(e,l,t,n,i,o)}),!0};Io.prototype.createRealmonitor=function(e,t,n,i,o,r){let s=this;s.cameraDevices[e].channel=t,oa.data.streamType=o,oa.data.channelId=t.id,cf.getRealmonitor(JSON.parse(JSON.stringify(oa))).then(a=>{a.rtspURL=jm(a.url)+"?token="+a.token,a.wsURL=Wm(a.rtspURL,s.serverIp,s);let c=new PlayerControl({wsURL:a.wsURL,rtspURL:a.rtspURL,config:s.config,events:{PlayStart:d=>{console.log("PlayStart",d)},DecodeStart:d=>{console.log("DecodeStart",d)},GetFrameRate:d=>{console.log("GetFrameRate",d)},Error:d=>{if(c&&c.ws&&d.symbol===c.ws.symbol){if(d.errorCode==="408")return;console.log("Error: "+JSON.stringify(d))}},FileOver:d=>{console.log("FileOver: ",d)},UpdatePlayingTime:d=>{}}});c.init(i,n,void 0),c.connect();let l=c.nPlayPort;s.portToPlayer[l]||(s.portToPlayer[l]=c),s.cameraDevices[e].playerControl=c,r&&r(c)},a=>{showError?Hm(102,{channelList:[t],apiErrorInfo:a}):(oa.data.streamType="1",cf.getRealmonitor(JSON.parse(JSON.stringify(oa))).then(c=>{c.rtspURL=jm(c.url)+"?token="+c.token,c.wsURL=Wm(c.rtspURL,s.serverIp,s);let l=new PlayerControl({wsURL:c.wsURL,rtspURL:c.rtspURL,config:s.config,events:{PlayStart:g=>{console.log("PlayStart",g)},DecodeStart:g=>{console.log("DecodeStart",g)},GetFrameRate:g=>{console.log("GetFrameRate",g)},Error:g=>{if(l&&l.ws&&g.symbol===l.ws.symbol){if(g.errorCode==="408")return;console.log("Error: "+JSON.stringify(g))}},FileOver:g=>{console.log("FileOver: ",g)},UpdatePlayingTime:g=>{}}}),d=document.createElement("canvas");d.id=n.id+"_canvasID",d.width=800,d.height=600,l.init(d,n,void 0),l.connect();let h=l.nPlayPort;s.portToPlayer[h]||(s.portToPlayer[h]=l),s.cameraDevices[e].playerControl=l,r&&r(l)},c=>{showError?Hm(102,{channelList:[t],apiErrorInfo:c}):console.error("errorInfo: \u4E3B\u7801\u6D41\u548C\u8F85\u7801\u6D41\u64AD\u653E\u5931\u8D25")}))})};Io.prototype.reConnect=function(e,t,n,i="2",o){if(this.cameraDevices[e]){let r=this.cameraDevices[e];this.createRealmonitor(e,r.channel,t,n,i,o)}};Io.prototype.cPlusVisibleDecCallBack=function(e,t,n,i,o,r){this.portToPlayer[e]&&this.portToPlayer[e].setFrameData(e,t,n,i,o,r)};Io.prototype.cExtraDrawDataCallBack=function(e,t,n,i){this.portToPlayer[e]&&this.portToPlayer[e].setIVSData(e,t,n,i)};Io.prototype.cExtraDrawDrawCallBack=function(e){this.portToPlayer[e]&&this.portToPlayer[e].drawIVSData(e)};Io.prototype.cRecordDataCallBack=function(e,t,n,i,o){this.portToPlayer[e]&&this.portToPlayer[e].setRecordData(e,t,n,i,o)};function Hm(e,t={}){let n=ra.errorInfo[e];t.insert&&(t.insert.forEach((i,o)=>{n=n.replace(`$${o}`,i)}),delete t.insert),console.error("errorInfo",{errorCode:e,errorInfo:n,errorData:t})}function gw(e,t,n){if(window.loadLibDHPlayerFlag)return;window.loadLibDHPlayerFlag=!0,window.m_nModuleInitialized=!1,window.Module||(window.Module={}),Module.onRuntimeInitialized=function(){window.m_nModuleInitialized=!0};let i=setInterval(()=>{window.m_nModuleInitialized},100),o="./static/WSPlayer/multiThread/libdhplay.js";try{new SharedArrayBuffer(1)}catch{o="./static/WSPlayer/singleThread/libdhplay.js"}(!e||!t||n.config.onlyLoadSingleLib)&&(o="./static/WSPlayer/singleThread/libdhplay.js");let r=document.createElement("script");r.src=o,document.head.appendChild(r)}function jm(e){let t=e.split("|").filter(n=>!n.includes("localhost")&&!n.includes("127.0.0.1"));return t.find(n=>n.includes(window.location.hostname))||t[0]}function yw(e){return new Promise((t,n)=>{Js({method:"get",url:`evo-oauth/1.0.0/oauth/public-key?t=${new Date().getTime()}`}).then(i=>{t(i)})})}function _w(e,t){let n=new Um;return n.setPublicKey(e),n.encrypt(t)}function Wm(e,t,n){let i=n.protocol==="https:",o=e.match(/\d{1,3}(\.\d{1,3}){3}/g)[0];o||(o=e.split("//")[1].split(":")[0]);let r=i?"wss":"ws";if(i||this.config.useNginxProxy){let a=n.type==="real"?ra.websocketPorts.realmonitor:ra.websocketPorts.playback;return`${r}://${t}/${a}?serverIp=${t||o}`}let s=n.type==="real"?ra.websocketPorts.realmonitor_ws:ra.websocketPorts.playback_ws;return`${r}://${t}:${s}`}var uf=Io;function Cn(e){this._owner=e.owner,this._leftClip=0,this._rightClip=1,this._topClipLine1=new Cesium.Cartesian4(0,1,1,1),this._topClipLine2=new Cesium.Cartesian4(0,1,1,1),this._topClipLine3=new Cesium.Cartesian4(0,1,1,1),this._topClipLine4=new Cesium.Cartesian4(0,1,1,1),this._bottomClipLine1=new Cesium.Cartesian4(0,0,1,0),this._bottomClipLine2=new Cesium.Cartesian4(0,0,1,0),this._bottomClipLine3=new Cesium.Cartesian4(0,0,1,0),this._bottomClipLine4=new Cesium.Cartesian4(0,0,1,0),this._points=[],this._originalPoints=[],this._indices=void 0,this._modelMatrix=void 0,this.boundingSphere=new Cesium.BoundingSphere,this._command=void 0,this._positionDirty=!1,this._pickId=null,e.plane&&this._parse(e.plane);let t=this;this._uniformMap={u_texture:function(){return t._owner._texture},u_hsv:function(){return t._owner.videoHsv},k1:function(){return t._owner._distortion.x},k2:function(){return t._owner._distortion.y},textureSize:function(){return t._owner._textureSize},u_alpha:function(){return t._owner._alpha*t._owner.videoAlphaRate},u_projectionCameraViewMatrix:function(){return t._owner.getProjectionCameraViewMatrix()},u_projectionCameraProjectionMatrix:function(){return t._owner.videoCamera.frustum.projectionMatrix},u_leftClip:function(){return t._leftClip},u_rightClip:function(){return t._rightClip},u_topClipLine1:function(){return t._topClipLine1},u_topClipLine2:function(){return t._topClipLine2},u_topClipLine3:function(){return t._topClipLine3},u_topClipLine4:function(){return t._topClipLine4},u_bottomClipLine1:function(){return t._bottomClipLine1},u_bottomClipLine2:function(){return t._bottomClipLine2},u_bottomClipLine3:function(){return t._bottomClipLine3},u_bottomClipLine4:function(){return t._bottomClipLine4},u_pickColor:function(){return t._pickId.color}}}Cn.prototype.update=function(e){this._positionDirty&&(this._command&&this._destroyCommand(),this._createCommand(e.context),this._positionDirty=!1),e.commandList.push(this._command)};Cn.prototype._parse=function(e){this._indices=e.pop();for(let t=0;t<e.length;++t){let n=e[t],i=Cesium.Cartesian3.fromDegrees(n[0],n[1],n[2]);if(this._points.push(i),n.length>3){let o=n[3];o>-1&&(this._originalPoints[o]=i)}else this._originalPoints.push(i)}this._positionDirty=!0,this._owner.boundingSphereDirty=!0};Cn.prototype._createGeometry=function(e,t){let n=e.length,i=new Float64Array(n*3),o=0;for(let a=0;a<n;++a){let c=e[a];i[o++]=c.x,i[o++]=c.y,i[o++]=c.z}let r=new Uint8Array(t),s=new Cesium.GeometryAttributes;return s.position=new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:i}),new Cesium.Geometry({attributes:s,indices:r,primitiveType:Cesium.PrimitiveType.TRIANGLES,boundingSphere:Cesium.BoundingSphere.fromVertices(i)})};Cn.prototype.addPoint=function(e,t){Cesium.defined(t)?this._originalPoints.splice(t,0,e):this._originalPoints.push(e),this._positionDirty=!0,this._owner.boundingSphereDirty=!0};Cn.prototype.deletePointByIndex=function(e){this._originalPoints.splice(e,1),this._positionDirty=!0,this._owner.boundingSphereDirty=!0};Cn.prototype.setPoint=function(e,t){this._originalPoints.splice(t,1,e),this._positionDirty=!0};Cn.prototype._createCommand=function(e){let t=this._originalPoints,n=t.length;if(n<3)return;let i=this._computeCenter(t),o,r=[];for(let g=0;g<n;++g)o=Cesium.Cartesian3.subtract(t[g],i,new Cesium.Cartesian3),r.push(o);let s=Cesium.Matrix4.fromTranslation(i),a=this._computeIndices(t),c=this._createGeometry(r,a),l=Cesium.GeometryPipeline.createAttributeLocations(c),d=Cesium.VertexArray.fromGeometry({context:e,geometry:c,attributeLocations:l,bufferUsage:Cesium.BufferUsage.STATIC_DRAW}),h=Cesium.ShaderProgram.fromCache({context:e,vertexShaderSource:this._owner._v,fragmentShaderSource:this._owner._f,attributeLocations:l});this._pickId||this._createPickId(e),this._command=new Cesium.DrawCommand({owner:this,vertexArray:d,modelMatrix:s,boundingVolume:Cesium.BoundingSphere.transform(c.boundingSphere,s,this.boundingSphere),shaderProgram:h,uniformMap:this._uniformMap,renderState:this._owner._renderState,pass:Cesium.Pass.OPAQUE,pickId:"u_pickColor"})};Cn.prototype._createPickId=function(e){this._pickId=e.createPickId({primitive:this})};Cn.prototype._computeCenter=function(e,t){t||(t=new Cesium.Cartesian3);let n=e.length;for(let i=0;i<n;++i){let o=e[i];t.x+=o.x,t.y+=o.y,t.z+=o.z}return t.x/=n,t.y/=n,t.z/=n,t};Cn.prototype._computePlaneNormal=function(e,t){let n=e.length,i=e[n-1],o,r,s=Cesium.Cartesian3.subtract(i,e[0],new Cesium.Cartesian3),a=new Cesium.Cartesian3,c=[];for(let d=0;d<n;++d)o=e[d],r=d===n-1?e[0]:e[d+1],a=Cesium.Cartesian3.subtract(r,o,a),c.push(Cesium.Cartesian3.cross(s,a,new Cesium.Cartesian3)),i=o,s=Cesium.Cartesian3.negate(a,s);t||(t=new Cesium.Cartesian3);let l=c.length;for(let d=0;d<l;++d){let h=c[d];t.x+=h.x,t.y+=h.y,t.z+=h.z}return t.x/=l,t.y/=l,t.z/=l,Cesium.Cartesian3.normalize(t,t)};Cn.prototype._computeIndices=function(e){let t=this._computeCenter(e),n=this._computePlaneNormal(e),i=Cesium.Plane.fromPointNormal(t,n),o=new Cesium.Ray(null,n),r=Cesium.Cartographic.fromCartesian(t);r.longitude+=Cesium.Math.toRadians(1e-5),r=Cesium.Cartographic.toCartesian(r),o.origin=r;let s=Cesium.IntersectionTests.rayPlane(o,i);s||(Cesium.Cartesian3.negate(o.direction,o.direction),s=Cesium.IntersectionTests.rayPlane(o,i));let a=Cesium.Cartesian3.subtract(s,t,r);Cesium.Cartesian3.normalize(a,a);let c=Cesium.Cartesian3.cross(n,a,new Cesium.Cartesian3);Cesium.Cartesian3.normalize(c,c);let l=[];for(let d=0;d<e.length;++d){o.origin=e[d];let h=Cesium.IntersectionTests.rayPlane(o,i);if(h||(Cesium.Cartesian3.negate(o.direction,o.direction),h=Cesium.IntersectionTests.rayPlane(o,i)),h){let g=Cesium.Cartesian3.subtract(h,t,h),C=Cesium.Cartesian3.dot(a,g),b=Cesium.Cartesian3.dot(c,g);l.push(new Cesium.Cartesian2(C,b))}else throw new Cesium.Error("\u89C6\u9891\u6295\u5F71\u5E73\u9762\u9876\u70B9\u6C42\u4EA4\u5931\u8D25!")}return this._indices=Cesium.PolygonPipeline.triangulate(l),this._indices};Cn.prototype.getConfiguration=function(){let e=this._originalPoints;if(e.length===0)return null;let t=this._owner._viewer.scene.globe.ellipsoid,n=[];for(let i=0;i<e.length;++i){let o=t.cartesianToCartographic(e[i]);n.push([Cesium.Math.toDegrees(o.longitude),Cesium.Math.toDegrees(o.latitude),o.height])}return n.push(this._indices),n};Cn.prototype.destroy=function(){this._destroyCommand(),this._pickId=this._pickId&&this._pickId.destroy()};Cn.prototype._destroyCommand=function(){let e=this._command;e&&(e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram&&e.shaderProgram.destroy()),this._command=null};Cn.prototype.updatePointPosition=function(e){for(let t=0;t<this._originalPoints.length;t++){let n=this._originalPoints[t];this._originalPoints[t]=Cesium.Cartesian3.add(n,e,new Cesium.Cartesian3)}this._positionDirty=!0};var ir=Cn;function Et(e){if(!Cesium.defined(e))throw new Cesium.DeveloperError("options\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.viewer))throw new Cesium.DeveloperError("options.viewer\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.videoElement))throw new Cesium.DeveloperError("options.videoElement\u524D\u7AEFvideo\u5BB9\u5668\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.originLon))throw new Cesium.DeveloperError("\u89C2\u5BDF\u70B9\u7ECF\u5EA6\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.originLat))throw new Cesium.DeveloperError("\u89C2\u5BDF\u70B9\u7EAC\u5EA6\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.originHeight))throw new Cesium.DeveloperError("\u89C2\u5BDF\u70B9\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(this._videoElement=e.videoElement,!(this._videoElement instanceof HTMLVideoElement))throw new Cesium.DeveloperError("options.videoElement\u5E76\u4E0D\u662F\u89C6\u9891\u5BB9\u5668\u3002");this._videoReadyPromise=Cesium.defer(),this._show=Cesium.defaultValue(e.show,!0),this._alpha=Cesium.defaultValue(e.videoAlpha,1),this.videoAlphaRate=1,this._videoVisiableAngle=45,this._videoGradientAngle=30,this._cameraDirty=!0,this._viewer=e.viewer,this._originLon=e.originLon,this._originLat=e.originLat,this._originHeight=e.originHeight,this._wsplayer=e.wsplayer,this._wsplayerType=e.wsplayerType,this._wsplayerGBAddress=e.wsplayerGBAddress,this._pitch=Cesium.defaultValue(e.pitch,0),this._heading=Cesium.defaultValue(e.heading,0),this._roll=Cesium.defaultValue(e.roll,0),this._viewPoint=e.viewPoint,this._fov=Cesium.defaultValue(e.fov,60),this._wsplayer&&(this._fov=this._fov/this._wsplayer.curZoom),this._visibleDistance=Cesium.defaultValue(e.visibleDistance,100),this._slice=100,this._lineEnabled=Cesium.defaultValue(e.lineEnabled,!1),this._name=e.name,this._layer=e.layer,this._aspectRatio=void 0,this._projectionMode=0,this._videoElement.paused&&this._videoElement.play(),this._lines=[],this.videoCamera=void 0,this._adjustModeEnabled=!1,this._oldCameraPosition=void 0,this._oldHeading=void 0,this._oldPitch=void 0,this._oldRoll=void 0,this._oldFov=void 0,this._oldAspectRatio=void 0,this._scene=this._viewer.scene,this._hdr=this._scene._hdr,this._scene._hdr=!1,this.videoHsv=Cesium.defaultValue(e.hsvParam,new Cesium.Cartesian3),this._distortion=Cesium.defaultValue(e.distortion,new Cesium.Cartesian2),this._textureSize=Cesium.defaultValue(e.textureSize,new Cesium.Cartesian2),this._lInfo=void 0,this._visibleDistance=Cesium.defaultValue(e.visibleDistance,100),this._projectionCameraViewMatrix=new Cesium.Matrix4,this._backCull=Cesium.defaultValue(e.backCull,!1),this._v=void 0,this._f=void 0,this._renderState=void 0,this._planes=[],this.boundingSphere=new Cesium.BoundingSphere,this._boundingSphereDirty=!1,e.projection&&this._createProjectionPlanes(e.projection),this._videoElement instanceof HTMLVideoElement&&(this.incompatibleConsole(),this._viewer.clock.shouldAnimate=!0),this._createVertexShaderSource(),this._createFragmentShaderSource(),this._createRenderState(),this._viewer.scene.primitives.add(this),this._changed=new Cesium.Event,this._cameraPromise=Cesium.defer()}Object.defineProperties(Et.prototype,{name:{get:function(){return this._name}},videoAlpha:{get:function(){return this._alpha},set:function(e){this._alpha=e}},changed:{get:function(){return this._changed}},cameraPromise:{get:function(){return this._cameraPromise.promise}},projectionMode:{get:function(){return this._projectionMode}},boundingSphereDirty:{get:function(){return this._boundingSphereDirty},set:function(e){this._boundingSphereDirty=e}},visibleDistance:{get:function(){return this._visibleDistance},set:function(e){this._visibleDistance=e}}});Et.prototype.update=function(e){if(!this._show||e.mode!==Cesium.SceneMode.SCENE3D)return;let t=e.context;if(this._context=t,this._boundingSphereDirty&&(this._computeBoundingSphere(),this._boundingSphereDirty=!1),!this.boundingSphere.center.equals(Cesium.Cartesian3.ZERO)){let n=Cesium.Cartesian3.distance(e.camera.position,this.boundingSphere.center);if(n-=this.boundingSphere.radius,n>this._visibleDistance){this._wsplayer&&this._wsplayer.socketConnect&&this._wsplayer.stop();return}}if(this._checkVideoCameraAngle(),this.videoAlphaRate!==0&&(this._wsplayer&&!this._wsplayer.socketConnect&&(this._wsplayerType==="rtsp"?this._wsplayer.openws():this._wsplayerType==="gb"&&(this._wsplayer.openws(),this._wsplayer.playGB(),this._wsplayer.playGBDevice(this._wsplayerGBAddress))),this._videoElement.readyState>=2&&!this._videoElement.paused&&(Cesium.defined(this._texture)?this._texture.copyFrom({source:this._videoElement}):(this._createTexture(t),this._textureSize.x=this._texture.width,this._textureSize.y=this._texture.height,this._videoReadyPromise.resolve(this))),!!Cesium.defined(this._texture))){this._cameraDirty&&(this._createProjectionCamera(),this._cameraDirty=!1),this._updateProjectionCameraViewMatrix();for(let n=0;n<this._planes.length;++n)this._planes[n].update(e)}};Et.prototype._checkVideoCameraAngle=function(){if(!this.videoCamera)return;let e=Cesium.Cartesian3.angleBetween(this._viewer.camera.directionWC,this.videoCamera.directionWC);e=Cesium.Math.toDegrees(e),e>this._videoVisiableAngle+this._videoGradientAngle?this.videoAlphaRate=0:e<this._videoVisiableAngle?this.videoAlphaRate=1:this.videoAlphaRate=1-(e-this._videoVisiableAngle)/this._videoGradientAngle};Et.prototype._createProjectionPlanes=function(e){for(let t=0;t<e.length;++t){let n=new ir({owner:this,plane:e[t]});this._planes.push(n)}};Et.prototype._createProjectionPlane=function(e){let t=new ir({owner:this,plane:e});return this._planes.push(t),t};Et.prototype._createRenderState=function(){this._renderState=Cesium.RenderState.fromCache({blending:Cesium.BlendingState.ALPHA_BLEND,cull:{enabled:this._backCull,face:Cesium.CullFace.BACK},depthTest:{enabled:!0}})};Et.prototype._updateProjectionCameraViewMatrix=function(){if(this.videoCamera)return Cesium.Matrix4.multiply(this.videoCamera.viewMatrix,this._viewer.scene.camera.inverseViewMatrix,this._projectionCameraViewMatrix)};Et.prototype.getProjectionCameraViewMatrix=function(){return this._projectionCameraViewMatrix};Et.prototype._createVertexShaderSource=function(){let e=`in vec3 position;
out vec3 v_positionEC;
void main()
{
    gl_Position = czm_modelViewProjection * vec4(position, 1.0);
    v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;
}
`;this._v=new Cesium.ShaderSource({sources:[e]})};Et.prototype._createFragmentShaderSource=function(){let e=`uniform float u_leftClip;
uniform float u_rightClip;
uniform vec4 u_topClipLine1;
uniform vec4 u_topClipLine2;
uniform vec4 u_topClipLine3;
uniform vec4 u_topClipLine4;
uniform vec4 u_bottomClipLine1;
uniform vec4 u_bottomClipLine2;
uniform vec4 u_bottomClipLine3;
uniform vec4 u_bottomClipLine4;
uniform float u_alpha;
uniform vec3 u_hsv;
uniform mat4 u_projectionCameraViewMatrix;
uniform mat4 u_projectionCameraProjectionMatrix;
uniform sampler2D u_texture;
uniform float k1;
uniform float k2;
uniform vec2 textureSize;
in vec3 v_positionEC;
uniform vec4 u_pickColor;
vec3 rgb2hsv(vec3 c)
{
    vec4 K = vec4(0.0, -1.0/3.0, 2.0/3.0, -1.0);
    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
    float d = q.x - min(q.w, q.y);
    float e = 1.0e-10;
    return vec3(abs(q.z + (q.w - q.y)/(6.0*d+e)), d/(q.x + e), q.x);
}

vec3 hsv2rgb(vec3 c)
{
    vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

void main()
{
    vec4 pixelCoord = u_projectionCameraProjectionMatrix * u_projectionCameraViewMatrix * vec4(v_positionEC, 1.0);
    pixelCoord = pixelCoord / pixelCoord.w;
    vec2 texCoord = vec2(0.5, 0.5) + pixelCoord.xy * 0.5;
    float maxWidthHeight = textureSize.x;
    float percent = textureSize.y / textureSize.x;
    vec2 centerUV = vec2((textureSize.x / 2.0) / maxWidthHeight, (textureSize.y / 2.0) / maxWidthHeight);
    vec2 currentUV = vec2(texCoord.x, texCoord.y * percent);
    float length_2 = (currentUV.x - centerUV.x) * (currentUV.x - centerUV.x) + (currentUV.y - centerUV.y) * (currentUV.y - centerUV.y);
    float length_4 = length_2 * length_2;
    texCoord.x = (currentUV.x - centerUV.x) / (k1 * length_2 + k2 * length_4 + 1.0) + centerUV.x;
    texCoord.y = (currentUV.y - centerUV.y) / (k1 * length_2 + k2 * length_4 + 1.0) + centerUV.y;
    texCoord.y = texCoord.y / percent;
    if(texCoord.x < u_leftClip)
    {
       discard;
    }
    if(texCoord.x > u_rightClip)
    {
       discard;
    }
    float kTop1 = (u_topClipLine1.w - u_topClipLine1.y) / (u_topClipLine1.z - u_topClipLine1.x);
    float aTop1 = -1.0 * kTop1;
    float bTop1 = 1.0;
    float cTop1 = kTop1 * u_topClipLine1.x - u_topClipLine1.y;
    float rTop1 = dot(vec3(aTop1, bTop1, cTop1), vec3(texCoord, 1.0));
    if(rTop1 > 0.0)
    {
       discard;
    }
    float kTop2 = (u_topClipLine2.w - u_topClipLine2.y) / (u_topClipLine2.z - u_topClipLine2.x);
    float aTop2 = -1.0 * kTop2;
    float bTop2 = 1.0;
    float cTop2 = kTop2 * u_topClipLine2.x - u_topClipLine2.y;
    float rTop2 = dot(vec3(aTop2, bTop2, cTop2), vec3(texCoord, 1.0));
    if(rTop2 > 0.0)
    {
       discard;
    }
    float kTop3 = (u_topClipLine3.w - u_topClipLine3.y) / (u_topClipLine3.z - u_topClipLine3.x);
    float aTop3 = -1.0 * kTop3;
    float bTop3 = 1.0;
    float cTop3 = kTop3 * u_topClipLine3.x - u_topClipLine3.y;
    float rTop3 = dot(vec3(aTop3, bTop3, cTop3), vec3(texCoord, 1.0));
    if(rTop3 > 0.0)
    {
       discard;
    }
    float kTop4 = (u_topClipLine4.w - u_topClipLine4.y) / (u_topClipLine4.z - u_topClipLine4.x);
    float aTop4 = -1.0 * kTop4;
    float bTop4 = 1.0;
    float cTop4 = kTop4 * u_topClipLine4.x - u_topClipLine4.y;
    float rTop4 = dot(vec3(aTop4, bTop4, cTop4), vec3(texCoord, 1.0));
    if(rTop4 > 0.0)
    {
       discard;
    }
    float kBottom1 = (u_bottomClipLine1.w - u_bottomClipLine1.y) / (u_bottomClipLine1.z - u_bottomClipLine1.x);
    float aBottom1 = -1.0 * kBottom1;
    float bBottom1 = 1.0;
    float cBottom1 = kBottom1 * u_bottomClipLine1.x - u_bottomClipLine1.y;
    float rBottom1 = dot(vec3(aBottom1, bBottom1, cBottom1), vec3(texCoord, 1.0));
    if(rBottom1 < 0.0)
    {
       discard;
    }
    float kBottom2 = (u_bottomClipLine2.w - u_bottomClipLine2.y) / (u_bottomClipLine2.z - u_bottomClipLine2.x);
    float aBottom2 = -1.0 * kBottom2;
    float bBottom2 = 1.0;
    float cBottom2 = kBottom2 * u_bottomClipLine2.x - u_bottomClipLine2.y;
    float rBottom2 = dot(vec3(aBottom2, bBottom2, cBottom2), vec3(texCoord, 1.0));
    if(rBottom2 < 0.0)
    {
       discard;
    }
    float kBottom3 = (u_bottomClipLine3.w - u_bottomClipLine3.y) / (u_bottomClipLine3.z - u_bottomClipLine3.x);
    float aBottom3 = -1.0 * kBottom3;
    float bBottom3 = 1.0;
    float cBottom3 = kBottom3 * u_bottomClipLine3.x - u_bottomClipLine3.y;
    float rBottom3 = dot(vec3(aBottom3, bBottom3, cBottom3), vec3(texCoord, 1.0));
    if(rBottom3 < 0.0)
    {
       discard;
    }
    float kBottom4 = (u_bottomClipLine4.w - u_bottomClipLine4.y) / (u_bottomClipLine4.z - u_bottomClipLine4.x);
    float aBottom4 = -1.0 * kBottom4;
    float bBottom4 = 1.0;
    float cBottom4 = kBottom4 * u_bottomClipLine4.x - u_bottomClipLine4.y;
    float rBottom4 = dot(vec3(aBottom4, bBottom4, cBottom4), vec3(texCoord, 1.0));
    if(rBottom4 < 0.0)
    {
       discard;
    }
    vec4 color = texture(u_texture, texCoord);
    vec3 rgb = color.xyz;
    vec3 hsv = rgb2hsv(rgb);
    hsv += u_hsv;
    rgb = hsv2rgb(hsv);
    rgb = clamp(rgb, 0.0, 1.0);
    color.xyz = rgb;
    color.a = u_alpha;
    out_FragColor = color;
}
`;this._f=new Cesium.ShaderSource({sources:[e]})};Et.prototype._createTexture=function(e){this._texture=new Cesium.Texture({context:e,source:this._videoElement,sampler:new Cesium.Sampler({wrapS:Cesium.TextureWrap.CLAMP_TO_EDGE,wrapT:Cesium.TextureWrap.CLAMP_TO_EDGE,minificationFilter:Cesium.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium.TextureMagnificationFilter.LINEAR})})};Et.prototype.updateParameter=function(e){Cesium.defined(e.originLon)&&(this._originLon=e.originLon),Cesium.defined(e.originLat)&&(this._originLat=e.originLat),Cesium.defined(e.originHeight)&&(this._originHeight=e.originHeight),Cesium.defined(e.pitch)&&(this._pitch=e.pitch),Cesium.defined(e.heading)&&(this._heading=e.heading),Cesium.defined(e.roll)&&(this._roll=e.roll),Cesium.defined(e.fov)&&(this._fov=e.fov),Cesium.defined(e.hsvParam)&&(this.videoHsv=e.hsvParam),Cesium.defined(e.distortion)&&(this._distortion=e.distortion),Cesium.defined(e.alpha)&&(this._alpha=e.alpha),Cesium.defined(e.lineEnabled)&&(this._lineEnabled=e.lineEnabled),this._cameraDirty=!0};Et.prototype.setDistortion=function(e){this._distortion=e};Et.prototype.setCameraFov=function(e){this._wsplayer&&Cesium.defined(this._wsplayer.curZoom)&&(e=e/this._wsplayer.curZoom),this._fov=e,this.videoCamera&&(this.videoCamera.frustum.fov=Cesium.Math.toRadians(e))};Et.prototype._createProjectionCamera=function(){if(!this._texture)return;this.videoCamera||(this.videoCamera=new Cesium.Camera(this._viewer.scene));let e=this.videoCamera.frustum;e.fov=Cesium.Math.toRadians(this._fov),e.aspectRatio=this._aspectRatio=this._texture._width/this._texture._height,e.near=.01,e.far=1e3,e._fovy=e.aspectRatio<=1?e.fov:Math.atan(Math.tan(e.fov*.5)/e.aspectRatio)*2,e.top=e.near*Math.tan(.5*e._fovy),e.bottom=-e.top,e.right=e.aspectRatio*e.top,e.left=-e.right;let t=Cesium.Cartesian3.fromDegrees(this._originLon,this._originLat,this._originHeight);this.videoCamera.setView({destination:t,orientation:{heading:Cesium.Math.toRadians(this._heading),pitch:Cesium.Math.toRadians(this._pitch),roll:Cesium.Math.toRadians(this._roll)}}),this._adjustModeEnabled&&(this._viewer.scene.camera.setView({destination:t,orientation:{heading:Cesium.Math.toRadians(this._heading),pitch:Cesium.Math.toRadians(this._pitch),roll:Cesium.Math.toRadians(this._roll)}}),this._viewer.scene.camera.frustum.fov=Cesium.Math.toRadians(this._fov),this._viewer.scene.camera.frustum.aspectRatio=this._aspectRatio),this._cameraPromise.resolve(this.videoCamera)};Et.prototype.setVideoCameraPosition=function(e,t){let n=this.videoCamera;if(!n)return;let i=Cesium.Cartesian3.subtract(e,n.positionWC,new Cesium.Cartesian3),o=Cesium.Cartesian3.distance(n.positionWC,e);if(o===0)return;Cesium.Cartesian3.normalize(i,i),n.move(i,o);let r=this._viewer.scene.globe.ellipsoid.cartesianToCartographic(e);this._originLon=Cesium.Math.toDegrees(r.longitude),this._originLat=Cesium.Math.toDegrees(r.latitude),this._originHeight=r.height,this._videoCameraPos=e,this._videoCameraPostureChanged=!0,Cesium.defaultValue(t,!0)&&this._changed.raiseEvent()};Et.prototype.setCameraViewPoint=function(e,t){if(this._viewPoint=e,!this.videoCamera)return;let n=this.videoCamera,i=n.roll,o=Cesium.Cartesian3.subtract(e,n.positionWC,new Cesium.Cartesian3);Cesium.Cartesian3.normalize(o,o),n.setView({orientation:{direction:o,up:n.upWC}}),n.setView({orientation:{heading:n.heading,pitch:n.pitch,roll:i}}),this._heading=Cesium.Math.toDegrees(n.heading),this._pitch=Cesium.Math.toDegrees(n.pitch),this._roll=Cesium.Math.toDegrees(n.roll),this._videoCameraPostureChanged=!0,Cesium.defaultValue(t,!0)&&this._changed.raiseEvent()};Et.prototype.enterAdjustMode=function(){if(this._adjustModeEnabled)return;this._adjustModeEnabled=!0;let e=this._viewer.scene.camera;this._oldHeading=e.heading,this._oldPitch=e.pitch,this._oldRoll=e.roll,this._oldFov=e.frustum.fov,this._oldAspectRatio=e.frustum.aspectRatio,this._oldCameraPosition=e.positionWC.clone(),this.updateParameter({})};Et.prototype.exitAdjustMode=function(){if(!this._adjustModeEnabled)return;this._adjustModeEnabled=!1;let e=this._viewer.scene.camera;e.setView({destination:this._oldCameraPosition,orientation:{heading:this._oldHeading,pitch:this._oldPitch,roll:this._oldRoll}}),e.frustum.fov=this._oldFov,e.frustum.aspectRatio=this._oldAspectRatio};Et.videoStatus=void 0;Et.prototype.removeLines=function(){if(this._lineEnabled){for(let e=0;e<this._lines.length;e++)this._viewer.entities.remove(this._lines[e]);this._lines.length=0}};Et.prototype.addLines=function(e){if(!this._lineEnabled||e.length===0)return;let t,n=new Cesium.Cartesian3;for(let i=0;i<e.length;i++)n.x=n.x+e[i].x,n.y=n.y+e[i].y,n.z=n.z+e[i].z,i!==e.length-1?t=this._viewer.entities.add({polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights([e[i].x,e[i].y,e[i].z,e[i+1].x,e[i+1].y,e[i+1].z]),width:1,material:Cesium.Color.BLUE,arcType:Cesium.ArcType.NONE}}):t=this._viewer.entities.add({polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights([e[i].x,e[i].y,e[i].z,e[0].x,e[0].y,e[0].z]),width:1,material:Cesium.Color.BLUE,arcType:Cesium.ArcType.NONE}}),this._lines.push(t);n.x=n.x/e.length,n.y=n.y/e.length,n.z=n.z/e.length,t=this._viewer.entities.add({polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights([n.x,n.y,n.z,this._originLon,this._originLat,this._originHeight]),width:1,material:Cesium.Color.RED,arcType:Cesium.ArcType.NONE}}),this._lines.push(t)};Et.prototype.incompatibleConsole=function(){let e=this;this._viewer.scene.renderError.addEventListener(function(){e._videoElement.paused||e._videoElement.pause(),e._viewer.cesiumWidget._showRenderLoopErrors&&e._viewer.cesiumWidget.showErrorPanel("This browser does not support cross-origin WebGL video textures.","","")})};Et.prototype.getConfiguration=function(){let e={},t=this._wsplayer;t?t.mSipID?e.gb=t.mSipID:t.mRtspurl&&(e.url=t.mRtspurl):e.file=this._fileName,e.alpha=this.videoAlpha,e.distortion=[this._distortion.x,this._distortion.y],e.hsv=[this.videoHsv.x,this.videoHsv.y,this.videoHsv.z];let n={position:[this._originLon,this._originLat,this._originHeight],orientation:[this._heading,this._pitch,this._roll],fov:Number(this._fov.toFixed(1))};if(this._viewPoint){let o=this._viewer.scene.globe.ellipsoid.cartesianToCartographic(this._viewPoint);o&&(n.visitPoint=[Cesium.Math.toDegrees(o.longitude),Cesium.Math.toDegrees(o.latitude),o.height])}let i=[];for(let o=0;o<this._planes.length;++o){let r=this._planes[o].getConfiguration();r&&i.push(r)}return{name:this._name,type:this._projectionMode,visibleDistance:this._visibleDistance,video:e,camera:n,projection:i}};Et.prototype._computeBoundingSphere=function(){let e=[];for(let t=0;t<this._planes.length;++t){let n=this._planes[t]._originalPoints;for(let i=0;i<n.length;++i)e.push(n[i])}this.boundingSphere=Cesium.BoundingSphere.fromPoints(e,this.boundingSphere)};Et.prototype.destroy=function(){if(this._scene._hdr=this._hdr,this.removeLines(),this._viewer.scene.primitives.contains(this)){let e=this._viewer.scene.primitives._primitives.indexOf(this);e!==-1&&(this._viewer.scene.primitives._primitives.splice(e,1),delete this._external._composites[this._viewer.scene.primitives._guid])}for(let e=0;e<this._planes.length;e++)this._planes[e].destroy();this._planes.length=0,this._texture&&(this._texture.destroy(),this._texture=void 0),this._synchronizer&&(this._synchronizer.destroy(),this._synchronizer=void 0),this._wsplayer&&(this._wsplayer.stop(),this._wsplayer=null)};var or=Et;function ge(e){this.wsserverurl=e.wsserver,this.mRtspurl=e.rtspurl,this.layer=e.layer,this.mMediaplayer=e.mediaplayer,this.websocket=void 0,this.ByteArray(),this.needRecv=!0,this.mimestr=void 0,this.mediaReady=!1,this.sourceReady=!1,this.wsConnected=!1,this.mediaSource=void 0,this.playMode="",this.elementPaused=!1,this.mforwardAddress=void 0,this.needFast=!1,this.faultTime=2,this.startTime=void 0,this.stopTime=void 0,this.lastCurrentTime=0,this.sameTimes=0,this.supportstr=void 0,this.mCanvas=void 0,this.mMouseBind=!1,this.mSipID=void 0,this.sourceBuffer=void 0,this.cacheTime=4,this.socketConnect=!1,this.isMainStream=e.isMainStream,this.protocol=e.protocol,this.ptzType=e.ptzType?e.ptzType:"Degree",this.curPan=e.pan?e.pan:0,this.curTilt=e.tilt?e.tilt:0,this.curZoom=e.zoom?e.zoom:1,this.panMin=0,this.panMax=0,this.tiltMin=0,this.tiltMax=0,this.zoomMin=1,this.zoomMax=1,this.updataCount=25,this.NeedUpdateVideo=!0,this.showLastFrame=!1,this.userQuit=!1,this.mMediaplayer&&(this.mMediaplayer.addEventListener("canplay",this.onCanPlay.bind(this)),this.mMediaplayer.addEventListener("pause",this.onPause.bind(this)),this.mMediaplayer.addEventListener("error",this.onPlayError.bind(this))),document.addEventListener("webkitvisibilitychange",function(t){t.target.webkitHidden||this.onCanPlay()}.bind(this),!1)}var sa=0;ge.prototype.openws=function(){if(this.userQuit=!1,this.mRtspurl!==""&&this.mMediaplayer&&this.mRtspurl.indexOf("rtsp")===-1&&this.mRtspurl.indexOf("rtmp")===-1&&this.mRtspurl.indexOf("http")===-1){this.mMediaplayer.src=this.mRtspurl,this.mMediaplayer.type="video/mp4";return}this.socketConnect||(sa>16&&console.warn(`Too many video connections\uFF1A${sa}`),this.socketConnect=!0,this.needRecv=!0,this.websocket=new WebSocket(this.wsserverurl),this.websocket.onopen=this.onOpen.bind(this),this.websocket.onclose=this.onClose.bind(this),this.websocket.onmessage=this.onMessage.bind(this),this.websocket.onerror=this.onError.bind(this),sa++)};ge.prototype.updateVideo=function(){this.NeedUpdateVideo=!0,this.updataCount=10};ge.prototype.setCacheTime=function(e){if(e<=0||e>=50){console.log("the cache value is invalid. must 0<v<50");return}this.cacheTime=e};ge.prototype.onWsConnectReslut=function(e){};ge.prototype.onAlarm=function(e){};ge.prototype.onVideoReady=function(){};ge.prototype.onVideoClosed=function(e){};ge.prototype.onHistoryTracks=function(e){};ge.prototype.onLastestTracks=function(e){};ge.prototype.onIdentify=function(e){};ge.prototype.onDeviceMessage=function(e){};ge.prototype.onGBDeviceList=function(e){};ge.prototype.onMousePosition=function(e){};ge.prototype.onPerformance=function(e){};ge.prototype.onRender=function(e){};ge.prototype.onPtzInfo=function(e,t,n){};ge.prototype.reConnect=function(){this.socketConnect=!1,this.onWsConnectReslut("CLOSED"),this.userQuit?(this.stop(),this.wsConnected=!1):(sa--,this.wsConnected=!1,this.websocket=void 0,this.openws())};ge.prototype.onError=function(e){this.onWsConnectReslut("ERROR"),this.websocket.close()};ge.prototype.onOpen=function(e){console.log("socket open"),this.wsConnected=!0,this.userQuit?(this.stop(),this.wsConnected=!1):(this.onWsConnectReslut("SUCCESS"),this.retry())};ge.prototype.onClose=function(e){console.log("socket close"),this.reConnect()};ge.prototype.doSend=function(e){if(!(!this.wsConnected||this.websocket===void 0||!this.socketConnect))if(this.websocket.binaryType="arraybuffer",this.websocket.readyState===WebSocket.OPEN)this.websocket.send(JSON.stringify(e));else{let t=this;setTimeout(function(){t.doSend(e)},2e3)}};ge.prototype.onMessage=function(e){if(typeof e.data=="string"){let t=e.data,n=JSON.parse(t);n.messageType==="AVC_INFO"?(this.mimestr=n.data,this.needRecv=!0,this.initMediaSource(this.mimestr)):n.messageType==="DEVICE_MESSAGE"?this.onDeviceMessage(n.data):n.messageType==="PTZ"?this.layer&&this.layer.ev_VideoProjectionManager&&this.layer.ev_VideoProjectionManager.updateVideoCamera(this.mMediaplayer.id,n.pan,n.tilt,n.zoom):n.messageType==="HISTORY_TRACKS"?this.onHistoryTracks(n.data):n.messageType==="LASTEST_TRACKS"?this.onLastestTracks(n.data):n.messageType==="INDENTIFY"?this.onIdentify(n.data):n.messageType==="GB_DEVICE_LIST"?this.onGBDeviceList(n.data):n.messageType==="ALARM"?this.onAlarm(n.data):n.messageType==="MOUSE_POSITION"?this.onMousePosition(n.data):n.messageType==="SERVER_PERFORMANCE"?this.onPerformance(n.data):n.messageType==="PTZ_INFO"&&(this.curPan=n.pan,this.curTilt=n.tilt,this.curZoom=n.zoom,n.panMax!==void 0&&n.tiltMax!==void 0&&(this.panMin=n.panMin,this.panMax=n.panMax,this.tiltMin=n.tiltMin,this.tiltMax=n.tiltMax,this.zoomMin=n.zoomMin,this.zoomMax=n.zoomMax),this.onPtzInfo(n.pan,n.tilt,n.zoom),this.panMax<=1?this.ptzType="Unit":this.ptzType="Dgreee",this.layer&&this.layer.ev_VideoProjectionManager&&this.layer.ev_VideoProjectionManager.updateVideoCamera(this.mMediaplayer.id,this.curPan,this.curTilt,this.curZoom)),t=null}else if(this.needRecv&&!(this.mediaReady&&!this.NeedUpdateVideo)){let t=new Uint8Array(e.data);this.push(t),t=null,this.loadvideo(),this.onRender(),this.mediaReady&&(this.updataCount--,this.updataCount<0&&(this.NeedUpdateVideo=!0,this.updataCount=10))}e=null};ge.prototype.sendConnectType=function(e){this.doSend({messageType:"CONNECT_TYPE",connect_type:e,client_type:"WEB"})};ge.prototype.sendDeviceInfo=function(){let e={messageType:"ADDRESS",url:this.mRtspurl};this.isMainStream!==void 0&&(e.isMainStream=this.isMainStream),this.protocol!==void 0&&(e.protocol=this.protocol),this.doSend(e)};ge.prototype.play=function(){if(this.playMode="PLAY_REAL",this.mRtspurl===""||this.mRtspurl===null){console.log(`mRtspurl: ${this.mRtspurl}  is illegal!`);return}this.sendConnectType("VIDEO"),this.sendDeviceInfo(),this.playReal()};ge.prototype.playForward=function(e){this.mforwardAddress=e,this.playMode="PLAY_FORWARD",this.sendConnectType("FORWARD"),this.doSend({messageType:"FORWARD_ADDRESS",forward_address:this.mforwardAddress,url:this.mRtspurl})};ge.prototype.playGlobe=function(){this.playMode="GLOBE_FUSION",this.sendConnectType("GLOBE")};ge.prototype.playGB=function(){this.playMode="GB",this.sendConnectType("GB")};ge.prototype.getGBDeviceList=function(){this.doSend({messageType:"GET_GB_DEVICE_LIST"})};ge.prototype.playGBDevice=function(e){this.mSipID=e,this.doSend({messageType:"PLAY_GB_VIDEO",sipID:e})};ge.prototype.stopPlayGBDevice=function(e){this.mSipID=void 0,this.doSend({messageType:"STOP_PLAY_GB_VIDEO",sipID:e})};ge.prototype.redirectUrl=function(e){this.mimestr!==void 0&&(this.mediaSource&&this.mediaSource.readyState==="open"&&(this.mediaSource.removeSourceBuffer(this.sourceBuffer),this.mediaSource.endOfStream(),this.mediaSource.removeEventListener("sourceopen",this.onMediaSourceOpen)),URL.revokeObjectURL(this.mMediaplayer.src),this.mMediaplayer.src=void 0,this.mediaSource=void 0,this.sourceBuffer=void 0,this.sourceReady=!1,this.mimestr=void 0,this.mediaReady=!1),this.playMode==="GB"?(this.playGB(),this.playGBDevice(e)):(this.mRtspurl=e,this.play()),this.doSend({messageType:"SOURCE_READY"})};ge.prototype.queryPerformance=function(){this.doSend({messageType:"QUERY_PERFORMANCE"})};ge.prototype.keepLastFrame=function(e){this.showLastFrame=e};ge.prototype.initMediaSource=function(e){this.mediaSource===void 0&&(this.mimestr=e,this.supportstr=`video/mp4; codecs="${this.mimestr}"`,console.log("recv decode format:",this.supportstr),MediaSource.isTypeSupported(this.supportstr)||(console.log(`${this.supportstr} is unsupported MIME type or codec,please check the video data`),this.mimestr="avc1.64002a",this.supportstr=`video/mp4; codecs="${this.mimestr}"`,console.log(`try to use the default:${this.supportstr}`)),this.mediaSource=new MediaSource,this.mediaSource.addEventListener("sourceopen",this.onMediaSourceOpen.bind(this),!1),this.mediaSource.addEventListener("sourceclose",this.onSourceClose.bind(this),!1),this.mediaSource.addEventListener("sourceended",this.onSourceEnded.bind(this),!1),this.mMediaplayer.src=URL.createObjectURL(this.mediaSource),this.sourceReady=!1,this.needRecv=!0)};ge.prototype.onSourceClose=function(e){this.onVideoClosed(e)};ge.prototype.onSourceEnded=function(e){};ge.prototype.onPlayError=function(e){this.sourceReady=!1,this.retry()};ge.prototype.retry=function(){!this.needRecv||!this.wsConnected||!this.mMediaplayer||(console.log(`retry ${this.mSipID} ${this.mRtspurl}`),this.releaseElementSource(),this.ByteArray(),this.playMode==="PLAY_REAL"?this.play():this.playMode==="PLAYBACK"||this.playMode==="START_PLAYBACK_RETRY"?(this.sendConnectType("VIDEO"),this.sendDeviceInfo(),this.startPlayBackByTime(this.startTime,this.stopTime)):this.playMode==="GLOBE_FUSION"?this.playGlobe():this.playMode==="GB"?(this.playGB(),this.mSipID===void 0?this.getGBDeviceList():this.playGBDevice(this.mSipID)):this.playMode==="PLAY_FORWARD"?this.playForward(this.mforwardAddress):this.playMode===""?this.mRtspurl!==""&&this.mRtspurl!==null&&this.play():this.stopPlay())};ge.prototype.onCanPlay=function(){this.elementPaused&&(this.elementPaused=!1)};ge.prototype.onSeeked=function(){console.log("onSeeked")};ge.prototype.onPause=function(){this.elementPaused||(this.elementPaused=!0,this.mediaReady),this.mediaReady&&this.mMediaplayer.play()};ge.prototype.onMediaSourceOpen=function(e){this.mediaSource!==void 0&&(this.mediaSource.removeEventListener("sourceopen",this.onMediaSourceOpen),this.sourceBuffer===void 0&&(this.sourceBuffer=this.mediaSource.addSourceBuffer(this.supportstr),this.sourceBuffer.addEventListener("updateend",this.onUpdateEnd.bind(this),!1),this.sourceBuffer.addEventListener("abort",this.onSourceBufferAbort.bind(this),!1),this.sourceBuffer.addEventListener("error",this.onSourceBufferError.bind(this),!1),this.sourceReady=!0,this.mediaReady=!1,this.doSend({messageType:"SOURCE_READY"})))};ge.prototype.onSourceBufferError=function(e){this.sourceReady=!1};ge.prototype.onSourceBufferAbort=function(e){this.sourceReady=!1};ge.prototype.onUpdateEnd=function(e){if(this.needRecv&&(this.mMediaplayer.readyState===4&&this.sourceBuffer&&!this.sourceBuffer.updating&&!this.mediaReady&&(console.log("start draw video"),this.mediaSource.endOfStream(),this.mMediaplayer.play(),this.mediaReady=!0,this.onVideoReady(),this.getPTZInfo()),this.mediaReady)){let t=this.mMediaplayer.duration-this.mMediaplayer.currentTime;if(t>this.faultTime&&(this.needFast=!0),this.needFast&&(this.mMediaplayer.playbackRate=1.2),t<.5&&this.needFast&&(this.needFast=!1,this.mMediaplayer.playbackRate=1),this.lastCurrentTime===this.mMediaplayer.currentTime){if(this.sameTimes>=30){let n=this.mMediaplayer.duration-2;n>this.mMediaplayer.currentTime&&(this.mMediaplayer.currentTime=n,this.mMediaplayer.playbackRate=1),this.sameTimes=0}this.sameTimes++}else this.lastCurrentTime=this.mMediaplayer.currentTime,this.sameTimes=0}};ge.prototype.releaseElementSource=function(){this.needRecv=!1,this.ByteArray(),this.mediaReady=!1,this.sourceReady=!1,this.elementPaused=!1,this.updataCount=10,this.NeedUpdateVideo=!0,this.sourceBuffer&&this.mediaSource.readyState==="open"&&this.sourceBuffer.abort(),this.sourceBuffer&&(this.sourceBuffer.removeEventListener("updateend",this.onUpdateEnd),this.sourceBuffer.removeEventListener("abort",this.onSourceBufferAbort),this.sourceBuffer.removeEventListener("error",this.onSourceBufferError),this.mediaSource&&this.mediaSource.readyState==="open"&&this.mediaSource.removeSourceBuffer(this.sourceBuffer)),this.mediaSource&&(this.mediaSource.removeEventListener("sourceopen",this.onMediaSourceOpen),this.mediaSource.removeEventListener("sourceclose",this.onSourceClose),this.mediaSource.removeEventListener("sourceended",this.onSourceEnded)),this.mediaSource=void 0,this.sourceBuffer=void 0,this.mMediaplayer&&this.mMediaplayer.src&&(URL.revokeObjectURL(this.mMediaplayer.src),this.mMediaplayer.removeAttribute("src"),this.showLastFrame||this.mMediaplayer.load())};ge.prototype.stop=function(){this.userQuit=!0,this.wsConnected&&(console.log(`stop ${this.mSipID} ${this.mRtspurl}`),this.needRecv=!1,this.ByteArray(),this.mediaReady=!1,this.sourceReady=!1,this.elementPaused=!1,this.updataCount=10,this.NeedUpdateVideo=!0,this.mCanvas&&(this.clearDrawing(),this.mCanvas=void 0),this.websocket&&(this.stopPlay(),this.websocket.close(),this.websocket=void 0,this.socketConnect=!1,this.wsConnected=!1),this.releaseElementSource(),sa--)};ge.prototype.loadvideo=function(){if(this.length===0||!this.sourceReady||this.sourceBuffer===void 0)return!1;let e=null;try{if(!this.sourceBuffer.updating&&this.sourceBuffer.buffered!==void 0)return this.sourceBuffer.buffered.length&&this.sourceBuffer.buffered.end(0)-this.sourceBuffer.buffered.start(0)>1*this.cacheTime*2?(this.sourceBuffer.remove(0,this.sourceBuffer.buffered.end(0)-this.cacheTime),e=null,!1):(e=new Uint8Array(this.length),this.readBytes(e)&&this.sourceBuffer.appendBuffer(e),this.ByteArray(),e=null,!0)}catch(t){console.log(t),this.ByteArray(),e=null,this.sourceBuffer.remove(0,this.sourceBuffer.buffered.end(0)),this.retry()}return e=null,!1};ge.prototype.ByteArray=function(){this.list=[],this.length=0};ge.prototype.push=function(e){this.list.push(e),this.length+=e.length};ge.prototype.readBytes=function(e){let t=e.length;if(e.length<=0)return!1;let n=0;for(;n<t;){if(this.list.length<=0){e=e.subarray(0,n);break}let i=this.list.shift(),o=i.length,r=t-n;if(o>=r){let s=i.subarray(0,r);if(e.set(s,n),n+=s.length,r<o){let a=i.subarray(r,o);this.list.unshift(a)}s=null,i=null;break}else e.set(i,n),n+=o;i=null}return this.length-=e.length,n!==0};ge.prototype.canvasSwitch=function(e){e===!0?this.mCanvas===void 0&&(this.mCanvas=document.createElement("canvas"),this.mCanvas.width=this.mMediaplayer.clientWidth,this.mCanvas.height=this.mMediaplayer.clientHeight,this.mCanvas.style.position="absolute",this.mMediaplayer.style.position==="absolute"||(this.mCanvas.style.left="0",this.mCanvas.style.top="0",this.mCanvas.style.bottom="0",this.mCanvas.style.right="0"),this.mCanvas.style.zIndex=2,this.mMediaplayer.parentNode.appendChild(this.mCanvas),this.mMouseBind&&this.bindMouse(this.mMouseBind)):(this.mCanvas&&this.clearDrawing(),this.mCanvas=void 0)};ge.prototype.drawIdentifyMsg=function(e){if(this.mCanvas===void 0)return;let t=this.mCanvas.getContext("2d");t.clearRect(0,0,this.mCanvas.width,this.mCanvas.height);let n=this.mCanvas.width/this.mMediaplayer.videoWidth,i=this.mCanvas.height/this.mMediaplayer.videoHeight;for(let o=0;o<e.length;o++){let r=e[o];t.strokeStyle="red",t.lineWidth=2,t.strokeRect(r.boundingRect[0]*n,r.boundingRect[1]*i,r.boundingRect[2]*n,r.boundingRect[3]*i),t.fillStyle="yellow",t.fillRect(r.boundingRect[0]*n,(r.boundingRect[1]-27)*i,120*n,25*i),t.fillStyle="black",t.font="bold 15px arial",t.fillText(`${r.trackId}:${r.name}`,r.boundingRect[0]*n,(r.boundingRect[1]-5)*i)}};ge.prototype.drawHistoryTracks=function(e){if(this.mCanvas===void 0)return;let t=this.mCanvas.getContext("2d");t.fillStyle="blue";let n=this.mCanvas.width/this.mMediaplayer.videoWidth,i=this.mCanvas.height/this.mMediaplayer.videoHeight;for(let o=0;o<e.length;o++){let r=e[o].tracks;for(let s=0;s<r.length;s++){let a=r[s];t.beginPath(),t.arc(a[0]*n,a[1]*i,2,0,6.28),t.fill()}}};ge.prototype.clearDrawing=function(){if(this.mCanvas===void 0)return;this.mCanvas.getContext("2d").clearRect(0,0,this.mCanvas.width,this.mCanvas.height),console.log("clear drawing")};ge.prototype.detect=function(e){this.canvasSwitch(e),this.doSend({messageType:"IDENTIFY",action:"SWITCH",data:e}),this.clearDrawing()};ge.prototype.setIdentifyTarget=function(e){this.doSend({messageType:"IDENTIFY",action:"IDENTIFY_TARGET",data:e})};ge.prototype.setTrackRect=function(e,t,n,i,o){this.doSend({messageType:"IDENTIFY",action:"IDENTIFY_TRACKS",btrackall:e,rectX:t,rectY:n,rectW:i,rectH:o})};ge.prototype.setModePara=function(e,t,n){this.doSend({messageType:"IDENTIFY",action:"MODEPARA",detectMode:e,confidenceThreshold:t,nmsThreshold:n})};ge.prototype.set3DTrakMode=function(e){this.doSend({messageType:"IDENTIFY",action:"3DTRAKMODE",data:e})};ge.prototype.setShow3dTrack=function(e){this.doSend({messageType:"IDENTIFY",action:"SHOW3DTRACK",data:e})};ge.prototype.setShow2dTrack=function(e){this.doSend({messageType:"IDENTIFY",action:"SHOW2DTRACK",data:e})};ge.prototype.globeGoto=function(e,t){this.doSend({messageType:"GOTO",longitude:e,latitude:t})};ge.prototype.globeGotoCameras=function(e){this.doSend({messageType:"GOTO",cameraNames:e})};ge.prototype.playReal=function(){this.playMode="PLAY_REAL",this.doSend({messageType:"PLAY_REAL"})};ge.prototype.findfile=function(e,t){this.playMode="FIND_FILE",this.doSend({messageType:"FIND_FILE",startTime:e,stopTime:t})};ge.prototype.startPlayBackByTime=function(e,t){this.playMode="PLAYBACK",this.startTime=e,this.stopTime=t,this.doSend({messageType:"PLAYBACK",startTime:e,stopTime:t}),this.mMediaplayer&&this.mediaReady&&(this.mMediaplayer.currentTime=this.mMediaplayer.duration,this.mMediaplayer.play(),this.recoverWS())};ge.prototype.startPlayBackRetry=function(){this.playMode="START_PLAYBACK_RETRY",this.doSend({messageType:this.playMode})};ge.prototype.playBackFast=function(){this.doSend({messageType:"PLAYBACK_FAST"})};ge.prototype.playBackSlow=function(){this.doSend({messageType:"PLAYBACK_SLOW"})};ge.prototype.playBackNormal=function(){this.doSend({messageType:"PLAYBACK_NORMAL"})};ge.prototype.playBackPause=function(){this.doSend({messageType:"PLAYBACK_PAUSE"}),this.mMediaplayer&&this.mMediaplayer.pause()};ge.prototype.playBackReStart=function(){this.doSend({messageType:"PLAYBACK_RESTART"}),this.mMediaplayer&&(this.mMediaplayer.play(),this.recoverWS())};ge.prototype.pauseWS=function(){this.doSend({messageType:"PAUSE_SOCKET"})};ge.prototype.recoverWS=function(){this.doSend({messageType:"RECOVER_SOCKET"})};ge.prototype.stopPlay=function(){this.doSend({messageType:"STOP"})};ge.prototype.controlPTZ=function(e,t,n){this.doSend({messageType:"PTZ_CONTROL",command:e,bStop:t,speed:n})};ge.prototype.setPTZPosition=function(e,t,n){e=Number(e),t=Number(t),n=Number(n),this.doSend({messageType:"SET_PTZ_POSITION",pan:e,tilt:t,zoom:n})};ge.prototype.getPTZInfo=function(){this.doSend({messageType:"GET_PTZ_INFO"})};ge.prototype.getGBDeivceList=function(){};ge.prototype.useAlarm=function(e){this.doSend({messageType:"SET_ALARM",use:e})};ge.prototype.controlGateway=function(e,t){this.doSend({messageType:"GATEWAY_CONTROL",index:e,command:t})};ge.prototype.bindMouse=function(e){this.mMouseBind=e,e?(this.mMediaplayer.onmousemove=this.mouseMove.bind(this),this.mMediaplayer.onmousedown=this.mouseDown.bind(this),this.mMediaplayer.onmouseup=this.mouseUp.bind(this),this.mMediaplayer.onmousewheel=this.mouseWheel.bind(this),this.mCanvas&&(this.mCanvas.onmousemove=this.mouseMove.bind(this),this.mCanvas.onmousedown=this.mouseDown.bind(this),this.mCanvas.onmouseup=this.mouseUp.bind(this),this.mCanvas.onmousewheel=this.mouseWheel.bind(this))):(this.mMediaplayer.onmousemove=null,this.mMediaplayer.onmousedown=null,this.mMediaplayer.onmouseup=null,this.mMediaplayer.onmousewheel=null,this.mCanvas&&(this.mCanvas.onmousemove=null,this.mCanvas.onmousedown=null,this.mCanvas.onmouseup=null,this.mCanvas.onmousewheel=null))};ge.prototype.calculatePosition=function(e){if(this.mMediaplayer===void 0||!this.needRecv||this.mMediaplayer.videoHeight===0||this.mMediaplayer.videoWidth===0)return null;let t=this.mMediaplayer.offsetHeight/this.mMediaplayer.videoHeight,n=this.mMediaplayer.offsetWidth/this.mMediaplayer.videoWidth,i=t<n?t:n,o=this.mMediaplayer.offsetWidth/2-this.mMediaplayer.videoWidth*i/2,r=this.mMediaplayer.offsetWidth/2+this.mMediaplayer.videoWidth*i/2,s=this.mMediaplayer.offsetHeight/2-this.mMediaplayer.videoHeight*i/2,a=this.mMediaplayer.offsetHeight/2+this.mMediaplayer.videoHeight*i/2,c=this.mMediaplayer.getBoundingClientRect(),l=e.clientX-c.left,d=e.clientY-c.top;if(l<o||l>r||d<s||d>a)return null;let h=new Array;h[0]=(l-o)*this.mMediaplayer.videoWidth/(r-o),h[1]=(d-s)*this.mMediaplayer.videoHeight/(a-s);let g=e.button;return g===0?g=1:g===1&&(g=4),h[2]=g,h};ge.prototype.mouseMove=function(e){let t=this.calculatePosition(e);if(t===null)return!1;this.doSend({messageType:"MOUSE_EVENT",mouseAction:"MOUSE_MOVE",mouseX:t[0],mouseY:t[1]})};ge.prototype.mouseDown=function(e){let t=this.calculatePosition(e);return t===null||this.doSend({messageType:"MOUSE_EVENT",mouseAction:"MOUSE_PRESS",mouseX:t[0],mouseY:t[1],mouseButton:t[2]}),!1};ge.prototype.mouseUp=function(e){let t=this.calculatePosition(e);return t===null||this.doSend({messageType:"MOUSE_EVENT",mouseAction:"MOUSE_RELEASE",mouseX:t[0],mouseY:t[1],mouseButton:t[2]}),!1};ge.prototype.mouseWheel=function(e){return this.calculatePosition(e)===null||this.doSend({messageType:"MOUSE_EVENT",mouseAction:"MOUSE_WHEEL",delta:e.wheelDelta,orientation:2}),!1};ge.prototype.mousePosition=function(e){let t=this.calculatePosition(e);return t===null||this.doSend({messageType:"MOUSE_EVENT",mouseAction:"MOUSE_POSITION",mouseX:t[0],mouseY:t[1]}),!1};ge.prototype.panUnit2Degree=function(e){return e*180+180};ge.prototype.tiltUnit2Degree=function(e){return e*90};ge.prototype.panDegree2Unit=function(e){return e/180-1};ge.prototype.tiltDegree2Unit=function(e){return e/90};var to=ge;function vw(e){this._leftClip=Cesium.defaultValue(0,0),this._rightClip=Cesium.defaultValue(1,1),this._topClipLine1=new Cesium.Cartesian4(0,1,1,1),this._topClipLine2=new Cesium.Cartesian4(0,1,1,1),this._topClipLine3=new Cesium.Cartesian4(0,1,1,1),this._topClipLine4=new Cesium.Cartesian4(0,1,1,1),this._bottomClipLine1=new Cesium.Cartesian4(0,0,1,0),this._bottomClipLine2=new Cesium.Cartesian4(0,0,1,0),this._bottomClipLine3=new Cesium.Cartesian4(0,0,1,0),this._bottomClipLine4=new Cesium.Cartesian4(0,0,1,0),this._pointsList=[],this._initialPointsList=[],this._indicesList=[],this._centerPostion=new Cesium.Cartesian3;for(let t=0;t<e.length;t++)try{let n=e[t];if(t===e.length-1)for(let i=0;i<n.length;i++)this._indicesList.push(n[i]);else if(this._centerPostion.x=this._centerPostion.x+n[0],this._centerPostion.y=this._centerPostion.y+n[1],this._centerPostion.z=this._centerPostion.z+n[2],this._pointsList.push(new Cesium.Cartesian3(n[0],n[1],n[2])),n[3]>=0){let i=this._initialPointsList.length;for(let o=0;o<e.length-1;o++)if(e[o][3]===i){this._initialPointsList.push(new Cesium.Cartesian3(e[o][0],e[o][1],e[o][2]));break}}}catch(n){console.error(n.message)}this._centerPostion.x=this._centerPostion.x/(e.length-1),this._centerPostion.y=this._centerPostion.y/(e.length-1),this._centerPostion.z=this._centerPostion.z/(e.length-1)}function lf(e){if(!Cesium.defined(e))throw new Cesium.DeveloperError("\u53C2\u6570options\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.viewer))throw new Cesium.DeveloperError("Viewer\u5BF9\u8C61options.viewer\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.framebuffer))throw new Cesium.DeveloperError("Viewer\u5BF9\u8C61options.framebuffer\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.coordinates))throw new Cesium.DeveloperError("Viewer\u5BF9\u8C61options.projection\u4E0D\u80FD\u4E3A\u7A7A\u3002");this.ev_CommonProjectionPlane=new vw(e.coordinates),this._planeColor=Cesium.defaultValue(e.planeColor,new Cesium.Color),this._viewer=e.viewer,this.framebuffer=e.framebuffer;let t=`in vec3 position;
void main()
{
    gl_Position = czm_modelViewProjection * vec4(position, 1.0);
}
`,n=`uniform vec4 u_color;
void main()
{
    out_FragColor = u_color;
}
`;this._vsSource=new Cesium.ShaderSource({sources:[t]}),this._fsSource=new Cesium.ShaderSource({sources:[n]});let i=Cesium.RenderState.fromCache({blending:Cesium.BlendingState.ALPHA_BLEND,cull:{enabled:!0,face:Cesium.CullFace.BACK},depthTest:{enabled:!1}}),o=this;o._drawCommand=new Cesium.DrawCommand({owner:o,pass:Cesium.Pass.OPAQUE,renderState:i,framebuffer:e.framebuffer,uniformMap:{u_color:function(){return o._planeColor}}}),this._viewer.scene.primitives.add(this)}lf.prototype.update=function(e){let t=e.context,n=e.commandList;if(!Cesium.defined(this._drawCommand.vertexArray)){let i=Cw(this,this.ev_CommonProjectionPlane._pointsList,this.ev_CommonProjectionPlane._centerPostion,this.ev_CommonProjectionPlane._indicesList);if(i){let o=Cesium.GeometryPipeline.createAttributeLocations(i);this._drawCommand.vertexArray=Cesium.VertexArray.fromGeometry({context:t,geometry:i,attributeLocations:o,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});let r=Cesium.Cartesian3.fromDegrees(this.ev_CommonProjectionPlane._centerPostion.x,this.ev_CommonProjectionPlane._centerPostion.y,this.ev_CommonProjectionPlane._centerPostion.z);this._drawCommand.modelMatrix=Cesium.Matrix4.fromTranslation(r),this._drawCommand.boundingVolume=Cesium.BoundingSphere.transform(i.boundingSphere,this._drawCommand.modelMatrix,this._drawCommand.boundingVolume),Cesium.defined(this._drawCommand.shaderProgram)||(this._drawCommand.shaderProgram=Cesium.ShaderProgram.fromCache({context:t,vertexShaderSource:this._vsSource,fragmentShaderSource:this._fsSource,attributeLocations:o}))}}Cesium.defined(this._drawCommand)&&(this._drawCommand.framebuffer=this.framebuffer,n.push(this._drawCommand))};function Cw(e,t,n,i){if(t.length===0||i.length===0)return;n=Cesium.Cartesian3.fromDegrees(n.x,n.y,n.z);let o=t.length*3,r=new Float64Array(o),s=i.length,a=Cesium.IndexDatatype.createTypedArray(o,s),c=0;for(let g=0;g<t.length;g++){let C=new Cesium.Cartesian3,b=Cesium.Cartesian3.fromDegrees(t[g].x,t[g].y,t[g].z);Cesium.Cartesian3.subtract(b,n,C),r[c++]=C.x,r[c++]=C.y,r[c++]=C.z}let l=0;for(let g=0;g<i.length;g++)a[l++]=i[g];let d=new Cesium.GeometryAttributes;d.position=new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:r});let h=Cesium.BoundingSphere.fromVertices(r);return new Cesium.Geometry({attributes:d,indices:a,primitiveType:Cesium.PrimitiveType.TRIANGLES,boundingSphere:h})}lf.prototype.destroy=function(){return Cesium.destroyObject(this)};var ff=lf;function bw(e){return e!=null}var p=bw;var df=Di(Ym(),1);function rr(e){this.name="DeveloperError",this.message=e;let t;try{throw new Error}catch(n){t=n.stack}this.stack=t}p(Object.create)&&(rr.prototype=Object.create(Error.prototype),rr.prototype.constructor=rr);rr.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return p(this.stack)&&(e+=`
${this.stack.toString()}`),e};rr.throwInstantiationError=function(){throw new rr("This function defines an interface and should not be called directly.")};var fn=rr;var Yt={};Yt.typeOf={};function Tw(e){return`${e} is required, actual value was undefined`}function os(e,t,n){return`Expected ${n} to be typeof ${t}, actual typeof was ${e}`}Yt.defined=function(e,t){if(!p(t))throw new fn(Tw(e))};Yt.typeOf.func=function(e,t){if(typeof t!="function")throw new fn(os(typeof t,"function",e))};Yt.typeOf.string=function(e,t){if(typeof t!="string")throw new fn(os(typeof t,"string",e))};Yt.typeOf.number=function(e,t){if(typeof t!="number")throw new fn(os(typeof t,"number",e))};Yt.typeOf.number.lessThan=function(e,t,n){if(Yt.typeOf.number(e,t),t>=n)throw new fn(`Expected ${e} to be less than ${n}, actual value was ${t}`)};Yt.typeOf.number.lessThanOrEquals=function(e,t,n){if(Yt.typeOf.number(e,t),t>n)throw new fn(`Expected ${e} to be less than or equal to ${n}, actual value was ${t}`)};Yt.typeOf.number.greaterThan=function(e,t,n){if(Yt.typeOf.number(e,t),t<=n)throw new fn(`Expected ${e} to be greater than ${n}, actual value was ${t}`)};Yt.typeOf.number.greaterThanOrEquals=function(e,t,n){if(Yt.typeOf.number(e,t),t<n)throw new fn(`Expected ${e} to be greater than or equal to ${n}, actual value was ${t}`)};Yt.typeOf.object=function(e,t){if(typeof t!="object")throw new fn(os(typeof t,"object",e))};Yt.typeOf.bool=function(e,t){if(typeof t!="boolean")throw new fn(os(typeof t,"boolean",e))};Yt.typeOf.bigint=function(e,t){if(typeof t!="bigint")throw new fn(os(typeof t,"bigint",e))};Yt.typeOf.number.equals=function(e,t,n,i){if(Yt.typeOf.number(e,n),Yt.typeOf.number(t,i),n!==i)throw new fn(`${e} must be equal to ${t}, the actual values are ${n} and ${i}`)};var Do=Yt;function Zm(e,t){return e??t}Zm.EMPTY_OBJECT=Object.freeze({});var E=Zm;var he={};he.EPSILON1=.1;he.EPSILON2=.01;he.EPSILON3=.001;he.EPSILON4=1e-4;he.EPSILON5=1e-5;he.EPSILON6=1e-6;he.EPSILON7=1e-7;he.EPSILON8=1e-8;he.EPSILON9=1e-9;he.EPSILON10=1e-10;he.EPSILON11=1e-11;he.EPSILON12=1e-12;he.EPSILON13=1e-13;he.EPSILON14=1e-14;he.EPSILON15=1e-15;he.EPSILON16=1e-16;he.EPSILON17=1e-17;he.EPSILON18=1e-18;he.EPSILON19=1e-19;he.EPSILON20=1e-20;he.EPSILON21=1e-21;he.GRAVITATIONALPARAMETER=3986004418e5;he.SOLAR_RADIUS=6955e5;he.LUNAR_RADIUS=1737400;he.SIXTY_FOUR_KILOBYTES=64*1024;he.FOUR_GIGABYTES=4*1024*1024*1024;he.sign=E(Math.sign,function(t){return t=+t,t===0||t!==t?t:t>0?1:-1});he.signNotZero=function(e){return e<0?-1:1};he.toSNorm=function(e,t){return t=E(t,255),Math.round((he.clamp(e,-1,1)*.5+.5)*t)};he.fromSNorm=function(e,t){return t=E(t,255),he.clamp(e,0,t)/t*2-1};he.normalize=function(e,t,n){return n=Math.max(n-t,0),n===0?0:he.clamp((e-t)/n,0,1)};he.sinh=E(Math.sinh,function(t){return(Math.exp(t)-Math.exp(-t))/2});he.cosh=E(Math.cosh,function(t){return(Math.exp(t)+Math.exp(-t))/2});he.lerp=function(e,t,n){return(1-n)*e+n*t};he.PI=Math.PI;he.ONE_OVER_PI=1/Math.PI;he.PI_OVER_TWO=Math.PI/2;he.PI_OVER_THREE=Math.PI/3;he.PI_OVER_FOUR=Math.PI/4;he.PI_OVER_SIX=Math.PI/6;he.THREE_PI_OVER_TWO=3*Math.PI/2;he.TWO_PI=2*Math.PI;he.ONE_OVER_TWO_PI=1/(2*Math.PI);he.RADIANS_PER_DEGREE=Math.PI/180;he.DEGREES_PER_RADIAN=180/Math.PI;he.RADIANS_PER_ARCSECOND=he.RADIANS_PER_DEGREE/3600;he.toRadians=function(e){return e*he.RADIANS_PER_DEGREE};he.toDegrees=function(e){return e*he.DEGREES_PER_RADIAN};he.convertLongitudeRange=function(e){let t=he.TWO_PI,n=e-Math.floor(e/t)*t;return n<-Math.PI?n+t:n>=Math.PI?n-t:n};he.clampToLatitudeRange=function(e){return he.clamp(e,-1*he.PI_OVER_TWO,he.PI_OVER_TWO)};he.negativePiToPi=function(e){return e>=-he.PI&&e<=he.PI?e:he.zeroToTwoPi(e+he.PI)-he.PI};he.zeroToTwoPi=function(e){if(e>=0&&e<=he.TWO_PI)return e;let t=he.mod(e,he.TWO_PI);return Math.abs(t)<he.EPSILON14&&Math.abs(e)>he.EPSILON14?he.TWO_PI:t};he.mod=function(e,t){return he.sign(e)===he.sign(t)&&Math.abs(e)<Math.abs(t)?e:(e%t+t)%t};he.equalsEpsilon=function(e,t,n,i){n=E(n,0),i=E(i,n);let o=Math.abs(e-t);return o<=i||o<=n*Math.max(Math.abs(e),Math.abs(t))};he.lessThan=function(e,t,n){return e-t<-n};he.lessThanOrEquals=function(e,t,n){return e-t<n};he.greaterThan=function(e,t,n){return e-t>n};he.greaterThanOrEquals=function(e,t,n){return e-t>-n};var Rc=[1];he.factorial=function(e){let t=Rc.length;if(e>=t){let n=Rc[t-1];for(let i=t;i<=e;i++){let o=n*i;Rc.push(o),n=o}}return Rc[e]};he.incrementWrap=function(e,t,n){return n=E(n,0),++e,e>t&&(e=n),e};he.isPowerOfTwo=function(e){return e!==0&&(e&e-1)===0};he.nextPowerOfTwo=function(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e,e};he.previousPowerOfTwo=function(e){return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e=(e>>>0)-(e>>>1),e};he.clamp=function(e,t,n){return e<t?t:e>n?n:e};var Xm=new df.default;he.setRandomNumberSeed=function(e){Xm=new df.default(e)};he.nextRandomNumber=function(){return Xm.random()};he.randomBetween=function(e,t){return he.nextRandomNumber()*(t-e)+e};he.acosClamped=function(e){return Math.acos(he.clamp(e,-1,1))};he.asinClamped=function(e){return Math.asin(he.clamp(e,-1,1))};he.chordLength=function(e,t){return 2*t*Math.sin(e*.5)};he.logBase=function(e,t){return Math.log(e)/Math.log(t)};he.cbrt=E(Math.cbrt,function(t){let n=Math.pow(Math.abs(t),.3333333333333333);return t<0?-n:n});he.log2=E(Math.log2,function(t){return Math.log(t)*Math.LOG2E});he.fog=function(e,t){let n=e*t;return 1-Math.exp(-(n*n))};he.fastApproximateAtan=function(e){return e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)};he.fastApproximateAtan2=function(e,t){let n,i=Math.abs(e);n=Math.abs(t);let o=Math.max(i,n);n=Math.min(i,n);let r=n/o;return i=he.fastApproximateAtan(r),i=Math.abs(t)>Math.abs(e)?he.PI_OVER_TWO-i:i,i=e<0?he.PI-i:i,i=t<0?-i:i,i};var k=he;var hf=`in vec2 v_textureCoordinates;
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform vec3 u_relativePos;
uniform mat4 u_sceneInverseViewRelative;
uniform sampler2D u_videoColorTexture;
uniform sampler2D u_videoCameraDepthTexture;
uniform mat4 u_videoViewProjectionRelative;
uniform mat4 u_videoInverseViewRelative;
uniform float u_log2FarDepthFromNearPlusOneInVideo;
uniform vec2 u_videoFrustum;
uniform vec4 u_videoViewport;
uniform mat4 u_videoViewportTransformation; 
uniform mat4 u_videoInverseProjection; 
uniform vec4 u_videoFrustumPlanes;
uniform float u_depthType;
uniform float u_alpha;
uniform vec3 u_hsv;
uniform sampler2D u_clipPlaneColorTexture;
uniform vec4 u_clipPlaneColor;
uniform float u_projectMode;
uniform vec4 u_pureColor;
uniform float k1;
uniform float k2;
uniform float textureWidth;
uniform float textureHeight;
uniform vec2 u_videoTextureClipLUPos;
uniform vec2 u_videoTextureClipLBPos;
uniform vec2 u_videoTextureClipRBPos;
uniform vec2 u_videoTextureClipRUPos;
uniform float u_distanceError;

vec3 clipToRelativeWorld(float u,float v)
{
vec2 uv = vec2(u,v);
float depth = czm_unpackDepth(texture(depthTexture, uv));
vec4 eyeCoordinate = czm_windowToEyeCoordinates(uv*czm_viewport.zw, depth);
vec4 worldCoordinate4 = u_sceneInverseViewRelative * eyeCoordinate;
vec3 worldPosition = worldCoordinate4.xyz / worldCoordinate4.w;
return worldPosition;
}
vec4 windowToEyeCoordinatesInVideo2(vec4 fragmentCoordinate)
{
    float x = 2.0 * (fragmentCoordinate.x - u_videoViewport.x) / u_videoViewport.z - 1.0;
    float y = 2.0 * (fragmentCoordinate.y - u_videoViewport.y) / u_videoViewport.w - 1.0;
    float z = (fragmentCoordinate.z - u_videoViewportTransformation[3][2]) / u_videoViewportTransformation[2][2];
    vec4 q = vec4(x, y, z, 1.0);
    q = q/fragmentCoordinate.w;
    if (!(u_videoInverseProjection == mat4(0.0))) 
    {
        q = u_videoInverseProjection * q;
    }
    else
    {
        float top = u_videoFrustumPlanes.x;
        float bottom = u_videoFrustumPlanes.y;
        float left = u_videoFrustumPlanes.z;
        float right = u_videoFrustumPlanes.w;
        float near = u_videoFrustum.x;
        float far = u_videoFrustum.y;
        q.x = (q.x * (right - left) + left + right) * 0.5;
        q.y = (q.y * (top - bottom) + bottom + top) * 0.5;
        q.z = (q.z * (near - far) - near - far) * 0.5;
        q.w = 1.0;
    }
    return q;
}
vec4 windowToEyeCoordinatesInVideo(vec2 fragmentCoordinateXY, float depthOrLogDepth) 
{
  #ifdef LOG_DEPTH
  float near = u_videoFrustum.x;
  float far = u_videoFrustum.y;
  float log2Depth = depthOrLogDepth * u_log2FarDepthFromNearPlusOneInVideo;
  float depthFromNear = pow(2.0, log2Depth) - 1.0;
  float depthFromCamera = depthFromNear + near;
  vec4 windowCoord = vec4(fragmentCoordinateXY, far * float(1.0 - near / depthFromCamera) / float(far - near), 1.0);
  vec4 eyeCoordinate = windowToEyeCoordinatesInVideo2(windowCoord);
  eyeCoordinate.w = 1.0 / depthFromCamera; 
  return eyeCoordinate;
  #else
  vec4 windowCoord = vec4(fragmentCoordinateXY, depthOrLogDepth, 1.0);
  vec4 eyeCoordinate = windowToEyeCoordinatesInVideo2(windowCoord);
  #endif
  return eyeCoordinate;
}
vec3 videoCameraClipToRelativeWorld(float u,float v) 
{
  vec2 uv = vec2(u,v);
  float depth = czm_unpackDepth(texture(u_videoCameraDepthTexture, uv));
  vec4 eyeCoordinate = windowToEyeCoordinatesInVideo(uv*u_videoViewport.zw, depth);
  vec4 worldCoordinate4 = u_videoInverseViewRelative * eyeCoordinate;
  vec3 worldPosition = worldCoordinate4.xyz / worldCoordinate4.w;
  return worldPosition;
}
vec3 rgb2hsv(vec3 c)
{
vec4 K = vec4(0.0, -1.0/3.0, 2.0/3.0, -1.0);
vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y)/(6.0*d+e)), d/(q.x + e), q.x);
}
vec3 hsv2rgb(vec3 c)
{
vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
void main(void){
float depth = czm_unpackDepth(texture(depthTexture, v_textureCoordinates));
out_FragColor = texture(colorTexture, v_textureCoordinates);
vec4 clipColor = texture(u_clipPlaneColorTexture, v_textureCoordinates);
#ifdef CZM_SELECTED_FEATURE
float padx = czm_pixelRatio / czm_viewport.z;
float pady = czm_pixelRatio / czm_viewport.w;
if(czm_selected(vec2(padx, pady))){
return;
}
#endif
if(depth>0.0){
vec3 worldPos = clipToRelativeWorld(v_textureCoordinates.x, v_textureCoordinates.y);
vec4 realWorldPos = vec4(worldPos.x + u_relativePos.x, worldPos.y + u_relativePos.y, worldPos.z + u_relativePos.z, 1.0);
vec4 projectPtInVideo = u_videoViewProjectionRelative * realWorldPos;
projectPtInVideo = projectPtInVideo/projectPtInVideo.w;
if(projectPtInVideo.x >=-1.0 && projectPtInVideo.x <= 1.0
&& projectPtInVideo.y >=-1.0 && projectPtInVideo.y <= 1.0
&& projectPtInVideo.z >=0.0 && projectPtInVideo.z <= 1.0){
vec2 texCoord = vec2(0.5, 0.5) + projectPtInVideo.xy * 0.5;
//Inverse calculation of world coordinates relative to the video camera. added by zak 2021.2.19 
if(u_depthType>2.5 && u_depthType<3.5){
   vec3 worldPtInVideoCamera = videoCameraClipToRelativeWorld(texCoord.x, texCoord.y);   
   float dis = distance(realWorldPos.xyz, worldPtInVideoCamera);
   if(dis > u_distanceError){
  	  return;
   }
}
float maxWidthHeight = textureWidth;
float percent = textureHeight / textureWidth;
vec2 centerUV = vec2((textureWidth / 2.0) / maxWidthHeight, (textureHeight / 2.0) / maxWidthHeight);
vec2 currentUV = vec2(texCoord.x, texCoord.y * percent);
float length_2 = (currentUV.x - centerUV.x) * (currentUV.x - centerUV.x) + (currentUV.y - centerUV.y) * (currentUV.y - centerUV.y);
float length_4 = length_2 * length_2;
texCoord.x = (currentUV.x - centerUV.x) / (k1 * length_2 + k2 * length_4 + 1.0) + centerUV.x;
texCoord.y = (currentUV.y - centerUV.y) / (k1 * length_2 + k2 * length_4 + 1.0) + centerUV.y;
texCoord.y = texCoord.y / percent;
bool intersect = false;
if (((u_videoTextureClipLBPos.y>texCoord.y) != (u_videoTextureClipRBPos.y>texCoord.y)) &&(texCoord.x < 
    (u_videoTextureClipRBPos.x-u_videoTextureClipLBPos.x) * (texCoord.y-u_videoTextureClipLBPos.y) / (u_videoTextureClipRBPos.y-u_videoTextureClipLBPos.y) + u_videoTextureClipLBPos.x)){
      intersect = !intersect;
}
if (((u_videoTextureClipLUPos.y>texCoord.y) != (u_videoTextureClipLBPos.y>texCoord.y)) &&(texCoord.x < 
    (u_videoTextureClipLBPos.x-u_videoTextureClipLUPos.x) * (texCoord.y-u_videoTextureClipLUPos.y) / (u_videoTextureClipLBPos.y-u_videoTextureClipLUPos.y) + u_videoTextureClipLUPos.x)){
      intersect = !intersect;
}
if (((u_videoTextureClipRUPos.y>texCoord.y) != (u_videoTextureClipLUPos.y>texCoord.y)) &&(texCoord.x < 
    (u_videoTextureClipLUPos.x-u_videoTextureClipRUPos.x) * (texCoord.y-u_videoTextureClipRUPos.y) / (u_videoTextureClipLUPos.y-u_videoTextureClipRUPos.y) + u_videoTextureClipRUPos.x)){
      intersect = !intersect;
}
if (((u_videoTextureClipRBPos.y>texCoord.y) != (u_videoTextureClipRUPos.y>texCoord.y)) &&(texCoord.x < 
    (u_videoTextureClipRUPos.x-u_videoTextureClipRBPos.x) * (texCoord.y-u_videoTextureClipRBPos.y) / (u_videoTextureClipRUPos.y-u_videoTextureClipRBPos.y) + u_videoTextureClipRBPos.x)){
      intersect = !intersect;
}
if(!intersect){
  return;
}
vec4 videoColor = texture(u_videoColorTexture, texCoord);
vec3 rgb = videoColor.xyz;
vec3 hsv = rgb2hsv(rgb);
hsv += u_hsv;
rgb = hsv2rgb(hsv);
rgb = clamp(rgb, 0.0, 1.0);
videoColor.xyz = rgb;
if(u_projectMode>0.5 && u_projectMode<1.5){
out_FragColor = (1.0 - u_alpha) * out_FragColor + u_alpha * videoColor;
}else if(u_projectMode>1.5 && u_projectMode<2.5){
if(czm_equalsEpsilon(u_clipPlaneColor.r, clipColor.r, 0.001) && czm_equalsEpsilon(u_clipPlaneColor.g, clipColor.g, 0.001) &&
czm_equalsEpsilon(u_clipPlaneColor.b, clipColor.b, 0.001)){
out_FragColor = (1.0 - u_alpha) * out_FragColor + u_alpha * videoColor;
  }
}else if(u_projectMode>2.5 && u_projectMode<3.5){
out_FragColor = (1.0 - u_alpha) * out_FragColor + u_alpha * videoColor;
}
  }
}
}
`;function xt(e){if(!Cesium.defined(e))throw new Cesium.DeveloperError("\u53C2\u6570options\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.viewer))throw new Cesium.DeveloperError("Viewer\u5BF9\u8C61options.viewer\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.videoElement))throw new Cesium.DeveloperError("\u524D\u7AEFvideo\u5BB9\u5668\u7684ID\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.originLon))throw new Cesium.DeveloperError("\u89C2\u5BDF\u70B9\u7ECF\u5EA6\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.originLat))throw new Cesium.DeveloperError("\u89C2\u5BDF\u70B9\u7EAC\u5EA6\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.originHeight))throw new Cesium.DeveloperError("\u89C2\u5BDF\u70B9\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.clipPlaneFramebuffer))throw new Cesium.DeveloperError("\u88C1\u526A\u9762\u5E27\u7F13\u5B58\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.width)||!Cesium.defined(e.height))throw new Cesium.DeveloperError("\u89C6\u9891\u5BBD\u5EA6\u6216\u9AD8\u5EA6\u6CA1\u6709\u5B9A\u4E49\u3002");if(this._videoElement=e.videoElement,!this._videoElement||!(this._videoElement instanceof HTMLVideoElement||this._videoElement instanceof HTMLCanvasElement||this._videoElement instanceof HTMLImageElement))throw new Cesium.DeveloperError("options.videoElement\u5E76\u4E0D\u662F\u89C6\u9891\u5BB9\u5668\u3002");this._videoElement.paused&&this._videoElement.play(),this._projectMode=Cesium.defaultValue(e.projectMode,1),this._depthType=Cesium.defaultValue(e.depthType,0),this._show=Cesium.defaultValue(e.show,!0),this._name=Cesium.defaultValue(e.name,Cesium.createGuid()),this._manufacturer=Cesium.defaultValue(e.manufacturer,"HIKVISION"),this._wsplayer=e.wsplayer,this._wsplayerType=e.wsplayerType,this._wsplayerGBAddress=e.wsplayerGBAddress,this._ptzReverse=Cesium.defaultValue(e.ptzReverse,new Cesium.Cartesian2(0,0)),this._ptzDelay=Cesium.defaultValue(e.ptzDelay,300),this._follow=!1,this._pureColor=Cesium.defaultValue(e.pureColor,new Cesium.Color(1,1,1,1)),this._viewer=e.viewer,this._scene=this._viewer.scene,this._mainCamera=this._scene.camera,this._delayTimerArray=[],this._readyState=0,this._projectionMode=1,this._mainCameraFrontPos=Cesium.Cartesian3.clone(this._mainCamera.position);let t=this._viewer.canvas,n=this._scene._frameState.context;if(!Cesium.defined(n))throw new Cesium.DeveloperError("_scene._frameState.context\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(this.clipPlaneColor=Cesium.defaultValue(e.clipPlaneColor,new Cesium.Color(1,0,0,1)),this.clipPlaneFramebuffer=e.clipPlaneFramebuffer,this.clipPlaneTexture=e.clipPlaneTexture,this.projectionPlanes=[],Cesium.defined(e.projection))for(let i=0;i<e.projection.length;i++)this.projectionPlanes.push(new ff({viewer:this._viewer,framebuffer:this.clipPlaneFramebuffer,coordinates:e.projection[i],planeColor:this.clipPlaneColor,canvas:t}));else this.projectionPlanes.push(n.defaultTexture);if(this._filterPrimitives=Cesium.defaultValue(e.filterPrimitives,void 0),p(this._filterPrimitives)||(this._filterPrimitives=[]),this._cachedFilterFeatures=Cesium.defaultValue(e.cachedFilterFeatures,void 0),this._originLon=e.originLon,this._originLat=e.originLat,this._originHeight=e.originHeight,this._pitch=Cesium.defaultValue(e.pitch,0),this._heading=Cesium.defaultValue(e.heading,0),this._roll=Cesium.defaultValue(e.roll,0),this._fov=Cesium.defaultValue(e.fov,60),this._videoCameraPos=Cesium.Cartesian3.fromDegrees(this._originLon,this._originLat,this._originHeight),this.videoAlpha=Cesium.defaultValue(e.videoAlpha,1),this.videoAlphaRate=1,this._videoVisiableAngle=45,this._videoGradientAngle=30,this.isEditMode=Cesium.defaultValue(e.isEditMode,!1),this.videoHsv=Cesium.defaultValue(e.hsvParam,new Cesium.Cartesian3(0,0,0)),this.videoCamera=void 0,this.videoWidth=e.width,this.videoHeight=e.height,this.videoViewport=new Cesium.BoundingRectangle(0,0,t.width,t.height),this.videoView=void 0,this.videoUniform={videoInverseViewRelative:new Cesium.Matrix4,log2FarDepthFromNearPlusOneInVideo:0,videoFrustum:new Cesium.Cartesian2,videoViewport:new Cesium.Cartesian4,videoViewportTransformation:new Cesium.Matrix4,videoInverseProjection:new Cesium.Matrix4,videoFrustumPlanes:new Cesium.Cartesian4},this._videoTexture=void 0,this._videoStage=void 0,this._panPos=Cesium.defaultValue(e.pan,0),this._tiltPos=Cesium.defaultValue(e.tilt,0),this._zoomPos=Cesium.defaultValue(e.zoom,1),this._ptzType=Cesium.defaultValue(e.ptzType,"Degree"),this._ptzZoomRatio=Cesium.defaultValue(e.ptzZoomRatio,4),this._auxiliaryPTZ=Cesium.defaultValue(e.auxiliaryPTZ,[]),this._panCurrent=0,this._tiltCurrent=0,this._zoomCurrent=0,this._offsetAngle=Cesium.defaultValue(e.offsetAngle,0),this.minTilt=Cesium.defaultValue(e.minTilt,-90),this.maxTilt=Cesium.defaultValue(e.maxTilt,40),this.cameraInversion=Cesium.defaultValue(e.cameraInversion,!0),this._nearClip=Cesium.defaultValue(e.nearClip,.01),this._farClip=Cesium.defaultValue(e.farClip,100),this._distanceError=Cesium.defaultValue(e.distanceError,.1),this._distortion=Cesium.defaultValue(e.distortion,new Cesium.Cartesian2(0,0)),this._visibleDistance=Cesium.defaultValue(e.visibleDistance,100),this.targetPosition=new Cesium.Cartesian3,this.targetOrientation=new Cesium.Cartesian3,this.targetZoom=1,this._layer=e.layer,this._viewPoint=e.viewPoint,e.clipPoints){let i=e.clipPoints;this._videoTextureClipLUPos=new Cesium.Cartesian2(i[0],i[1]),this._videoTextureClipLBPos=new Cesium.Cartesian2(i[2],i[3]),this._videoTextureClipRUPos=new Cesium.Cartesian2(i[4],i[5]),this._videoTextureClipRBPos=new Cesium.Cartesian2(i[6],i[7])}else this._videoTextureClipLUPos=new Cesium.Cartesian2(0,1),this._videoTextureClipLBPos=new Cesium.Cartesian2(0,0),this._videoTextureClipRUPos=new Cesium.Cartesian2(1,1),this._videoTextureClipRBPos=new Cesium.Cartesian2(1,0);this.delayPan="",this.delayTilt="",this.delayZoom="",this._boundingSphere=new Cesium.BoundingSphere,this._videoCameraPostureChanged=!1,this._changed=new Cesium.Event,this._isRequestIDB=!1,this._cameraPromise=Cesium.defer()}Object.defineProperties(xt.prototype,{videoStage:{get:function(){return this._videoStage}},name:{get:function(){return this._name}},show:{get:function(){return this._show},set:function(e){this._show=e,this._videoStage&&(this._videoStage.enabled=e),this._wsplayer&&(this._wsplayer.needRecv=e)}},boundingSphere:{get:function(){return this._computeBoundingSphere()}},changed:{get:function(){return this._changed}},distanceError:{get:function(){return this._distanceError},set:function(e){if(e<=0)throw new Cesium.DeveloperError("invalid distanceError value.");this._distanceError=e}},visibleDistance:{get:function(){return this._visibleDistance},set:function(e){this._visibleDistance=e}},cameraPromise:{get:function(){return this._cameraPromise.promise}},projectionMode:{get:function(){return this._projectionMode}}});function Ew(e){let t=e._scene._frameState;if(Cesium.defined(t)&&(!(e._videoElement instanceof HTMLVideoElement)||e._videoElement.readyState>=2))return new Cesium.Texture({context:t.context,source:e._videoElement,sampler:new Cesium.Sampler({wrapS:Cesium.TextureWrap.CLAMP_TO_EDGE,wrapT:Cesium.TextureWrap.CLAMP_TO_EDGE,minificationFilter:Cesium.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium.TextureMagnificationFilter.LINEAR})})}function $m(e){let t=Cesium.Cartesian3.fromDegrees(e._originLon,e._originLat,e._originHeight),n=new Cesium.Camera(e._viewer.scene);n._name=`vCamera_${e._name}`,e.videoView=new Cesium.View(e._viewer.scene,n,e.videoViewport),e.videoView._name=`vView_${e._name}`,n.setView({destination:t,orientation:{heading:Cesium.Math.toRadians(e._heading),pitch:Cesium.Math.toRadians(e._pitch),roll:Cesium.Math.toRadians(e._roll)}});let i=n.frustum;return i.fov=Cesium.Math.toRadians(e._fov),i.aspectRatio=e.videoWidth/e.videoHeight,i.near=e._nearClip,i.far=e._farClip,i._fovy=i.aspectRatio<=1?i.fov:Math.atan(Math.tan(i.fov*.5)/i.aspectRatio)*2,i.top=i.near*Math.tan(.5*i._fovy),i.bottom=-i.top,i.right=i.aspectRatio*i.top,i.left=-i.right,n}function ww(e,t,n){let i=n.viewport,o=i.width,r=i.height,s=e.videoView._name;e.videoView=Cesium.defined(e.videoView)&&e.videoView.destroy(),e.videoViewport=new Cesium.BoundingRectangle(0,0,o,r),e.videoView=new Cesium.View(t,e.videoCamera,e.videoViewport),e.videoView._name=s,t.view=e.videoView;let a=e.videoView.passState;a.viewport=Cesium.BoundingRectangle.clone(e.videoViewport,a.viewport),a=t.view.passState,t.jobScheduler.disableThisFrame(),Sw(t);let c=t.frameState,l=c.context.uniformState;c.invertClassification=!1,c.passes.pick=!1,l.update(c),t.updateAndExecuteRttCommands(a,new Cesium.Color(0,0,0,1))}function Sw(e){let t=e.frameState,n=e.camera;t.camera=n,t.cullingVolume=n.frustum.computeCullingVolume(n.positionWC,n.directionWC,n.upWC),t.useLogDepth=e._logDepthBuffer&&!(n.frustum instanceof Cesium.OrthographicFrustum||n.frustum instanceof Cesium.OrthographicOffCenterFrustum)}function xw(e,t){if(Aw(e,t),e.videoAlphaRate===0)return;let n=e._scene,i=n.view;if(e._depthType>2.5&&e._depthType<3.5&&(!e._mainCameraFrontPos.equals(i.camera.position)||e._videoCameraPostureChanged)&&e.show){let o=new Cesium.PostProcessStageCollection;o.fxaa.enabled=!1;let r=n.postProcessStages;if(n.postProcessStages=o,ww(e,n,i),Cesium.defined(e.videoView)&&Cesium.defined(e.videoView.passState.context.uniformState)){let s=e.videoView.passState.context.uniformState;e.videoUniform.videoInverseViewRelative=Cesium.Matrix4.setTranslation(s.inverseView,new Cesium.Cartesian3,new Cesium.Matrix4),e.videoUniform.log2FarDepthFromNearPlusOneInVideo=s.log2FarDepthFromNearPlusOne,e.videoUniform.videoFrustum=Cesium.Cartesian2.clone(s.currentFrustum),e.videoUniform.videoViewport=new Cesium.Cartesian4(s.viewport.x,s.viewport.y,s.viewport.width,s.viewport.height),e.videoUniform.videoViewportTransformation=Cesium.Matrix4.clone(s.viewportTransformation),e.videoUniform.videoInverseProjection=Cesium.Matrix4.clone(s.inverseProjection),e.videoUniform.videoFrustumPlanes=Cesium.Cartesian4.clone(s.frustumPlanes)}e._scene.view=i,e._scene.postProcessStages=r,o=void 0,e._mainCameraFrontPos=Cesium.Cartesian3.clone(i.camera.position)}e._videoCameraPostureChanged=!1}function Aw(e,t){if(e._videoStage.selected=[],e._filterPrimitives.cesium3DTileNames.length===0&&e._filterPrimitives.cesium3DTileIds.length===0&&e._filterPrimitives.entityIds.length===0){e._cachedFilterFeatures._features=[];return}if(Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._frameNumber===t.frameNumber){e._videoStage.selected=e._cachedFilterFeatures._features;return}else Cesium.defined(e._cachedFilterFeatures)&&(e._cachedFilterFeatures._frameNumber=t.frameNumber,e._cachedFilterFeatures._features=[]);let i=e._scene._primitives;for(let r=0;r<i.length;r++){let s=i.get(r);if(s instanceof Cesium.Cesium3DTileset){if(!s.ready)continue;if(s.asset.tilesetVersion.indexOf("lodmodel")>-1){let c=s._selectedTiles;for(let l=0;l<c.length;l++){let d=c[l].content;if(d instanceof Cesium.Batched3DModel3DTileContent||d instanceof Cesium.Instanced3DModel3DTileContent){d.featuresLength>0&&d.getFeature(0);let h=d.batchTable,g=d._features;for(let b=0;b<d.featuresLength;b++)(e._filterPrimitives.cesium3DTileIds.indexOf(h._properties.id[b])>-1||e._filterPrimitives.cesium3DTileNames.indexOf(h._properties.name[b])>-1)&&(e._videoStage.selected.push(g[b]),Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._features.push(g[b]));let C=d._model.ev_E3MInternalInstance.modelInstanceCollections;for(let b=0;b<C.length;b++){d._model.ev_E3MInternalInstance.getFeature(C[b],0);let w=C[b].batchTable,R=C[b]._features;for(let D=0;D<C[b].featuresLength;D++)(e._filterPrimitives.cesium3DTileIds.indexOf(w._properties.id[D])>-1||e._filterPrimitives.cesium3DTileNames.indexOf(w._properties.name[D])>-1)&&(e._videoStage.selected.push(R[D]),Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._features.push(R[D]))}}else if(d instanceof Cesium.Composite3DTileContent){let h=d.innerContents;for(let g=0;g<h.length;g++)if(h[g]instanceof Cesium.Batched3DModel3DTileContent||h[g]instanceof Cesium.Instanced3DModel3DTileContent){h[g].featuresLength>0&&h[g].getFeature(0);let C=h[g].batchTable,b=h[g]._features;for(let R=0;R<h[g].featuresLength;R++)(e._filterPrimitives.cesium3DTileIds.indexOf(C._properties.id[R])>-1||e._filterPrimitives.cesium3DTileNames.indexOf(C._properties.name[R])>-1)&&(e._videoStage.selected.push(b[R]),Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._features.push(b[R]));let w=h[g]._model.ev_E3MInternalInstance.modelInstanceCollections;for(let R=0;R<w.length;R++){h[g]._model.ev_E3MInternalInstance.getFeature(w[R],0);let D=w[R].batchTable,M=w[R]._features;for(let z=0;z<w[R].featuresLength;z++)(e._filterPrimitives.cesium3DTileIds.indexOf(D._properties.id[z])>-1||e._filterPrimitives.cesium3DTileNames.indexOf(D._properties.name[z])>-1)&&(e._videoStage.selected.push(M[z]),Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._features.push(M[z]))}}}}}}else if(s instanceof Cesium.Model)Cesium.defined(s.id)&&s.id instanceof Cesium.Entity&&e._filterPrimitives.entityIds.indexOf(s.id.id)>-1&&(e._videoStage.selected.push(s),Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._features.push(s));else if(s instanceof Cesium.PrimitiveCollection)for(let a=0;a<s.length;a++){let c=s.get(a);if(c instanceof Cesium.PrimitiveCollection)for(let l=0;l<c.length;l++){let d=c.get(l);if(Cesium.defined(d._instanceIds))for(let h=0;h<d._instanceIds.length;h++){let g=d._instanceIds[h];e._filterPrimitives.entityIds.indexOf(g.id)>-1&&(e._videoStage.selected.push(d),Cesium.defined(e._cachedFilterFeatures)&&e._cachedFilterFeatures._features.push(d))}}else console.log("filterProjectedFeatures PrimitiveCollection is empty!")}}let o=e._viewer.entities;if(o instanceof Cesium.EntityCollection)for(let r=0;r<o.values.length;r++){let s=o.values[r];if(s instanceof Cesium.Entity){let a=s;if(e._filterPrimitives.entityIds.indexOf(a.id)>-1){let c=e._scene.context._pickObjects;for(let l in c){let d=c[l];Cesium.defined(d.id)&&Cesium.defined(d.id.id)&&d.id.id===a.id&&e._videoStage.selected.push(d.primitive)}}}}}xt.prototype.checkPlay=function(){if(!this._show)return this._wsplayer&&this._wsplayer.socketConnect&&this._wsplayer.stop(),!1;if(this._checkVideoCameraAngle(),this.videoAlphaRate===0)return!1;let e=this._mainCamera.positionWC;if(Cesium.Cartesian3.distance(e,this._videoCameraPos)>this._visibleDistance)return this._wsplayer&&this._wsplayer.socketConnect&&this._wsplayer.stop(),!1;if(this._wsplayer&&this._wsplayer instanceof to&&!this._wsplayer.socketConnect){if(this._wsplayerType==="rtsp"?this._wsplayer.openws():this._wsplayerType==="gb"&&(this._wsplayer.openws(),this._wsplayer.playGB(),this._wsplayer.playGBDevice(this._wsplayerGBAddress)),!this._videoTexture&&this._isRequestIDB){let n=this;if(this._isRequestIDB=!0,this._wsplayer&&this._wsplayer.wsserverurl){let i=this._wsplayer.wsserverurl.split("//");if(i.length==2){let o=`https://${i[1]}/addCamera`,r=this._wsplayerType.toUpperCase(),s=this._wsplayer.mRtspurl;r==="GB"&&(s=this._wsplayerGBAddress);let a=new XMLHttpRequest;a.open("POST",o,!0),a.responseType="text",a.send(JSON.stringify({url:s,type:r})),a.onload=function(){if(a.readyState==4&&a.status==200){let c=`https://${i[1]}/getCameraPicture`,l=new XMLHttpRequest;l.open("POST",c,!0),l.responseType="text",l.send(JSON.stringify({url:s})),l.onload=function(){if(a.readyState==4&&a.status==200){let d=`data:image/jpg;base64,${l.responseText}`;if(!n._videoTexture){let h=Cesium.Resource.createIfNeeded(d),g=Cesium.when(h.fetchImage(),function(C){n._videoTexture||(n.videoWidth=C.width,n.videoHeight=C.height,n._videoTexture=new Cesium.Texture({context:n._scene._frameState.context,source:C,pixelFormat:Cesium.PixelFormat.RGB,sampler:new Cesium.Sampler({wrapS:Cesium.TextureWrap.CLAMP_TO_EDGE,wrapT:Cesium.TextureWrap.CLAMP_TO_EDGE,minificationFilter:Cesium.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium.TextureMagnificationFilter.LINEAR})}))})}}}}}}}}}else this._wsplayer&&this._wsplayer instanceof Bs&&!this._wsplayer.socketConnect&&this._wsplayer.play();return!0};xt.prototype.preRender=function(){if(this.checkPlay())this._videoStage&&(this._videoStage.enabled=!0);else{this._videoStage&&(this._videoStage.enabled=!1);return}if(this._videoElement.readyState>=1&&!this._videoElement.paused&&Cesium.defined(this._videoTexture)&&(this._videoElement.width!=this._videoElement.videoWidth&&(this._videoElement.width=this._videoElement.videoWidth),this._videoElement.height!=this._videoElement.videoHeight&&(this._videoElement.height=this._videoElement.videoHeight),this._videoTexture.copyFrom({source:this._videoElement})),Cesium.defined(this._videoTexture)&&this._videoElement.readyState>=2&&!(this._videoElement instanceof HTMLVideoElement)&&(this._videoTexture._height!=this._videoElement.videoHeight||this._videoTexture._width!=this._videoElement.videoWidth)&&(this._videoTexture.destroy(),this.videoWidth=this._videoElement.videoWidth,this.videoHeight=this._videoElement.videoHeight,this._readyState=0),this._videoElement.readyState>=2&&this._readyState==0||Cesium.defined(this._videoTexture)&&!Cesium.defined(this._videoStage)){console.log(`create post process:${new Date().getTime()}`),this._readyState=1,Cesium.defined(this._videoTexture)||(this.videoWidth=this._videoElement.videoWidth,this.videoHeight=this._videoElement.videoHeight,this._videoTexture=Ew(this)),this.videoCamera=$m(this),this._cameraPromise.resolve(this.videoCamera);let e="dmFyeWluZyB2ZWMyIHZfdGV4dHVyZUNvb3JkaW5hdGVzOwp1bmlmb3JtIHNhbXBsZXIyRCBjb2xvclRleHR1cmU7CnVuaWZvcm0gc2FtcGxlcjJEIGRlcHRoVGV4dHVyZTsKdW5pZm9ybSB2ZWMzIHVfcmVsYXRpdmVQb3M7CnVuaWZvcm0gbWF0NCB1X3NjZW5lSW52ZXJzZVZpZXdSZWxhdGl2ZTsKdW5pZm9ybSBzYW1wbGVyMkQgdV92aWRlb0NvbG9yVGV4dHVyZTsKdW5pZm9ybSBzYW1wbGVyMkQgdV92aWRlb0NhbWVyYURlcHRoVGV4dHVyZTsKdW5pZm9ybSBtYXQ0IHVfdmlkZW9WaWV3UHJvamVjdGlvblJlbGF0aXZlOwp1bmlmb3JtIG1hdDQgdV92aWRlb0ludmVyc2VWaWV3UmVsYXRpdmU7CnVuaWZvcm0gZmxvYXQgdV9sb2cyRmFyRGVwdGhGcm9tTmVhclBsdXNPbmVJblZpZGVvOwp1bmlmb3JtIHZlYzIgdV92aWRlb0ZydXN0dW07CnVuaWZvcm0gdmVjNCB1X3ZpZGVvVmlld3BvcnQ7CnVuaWZvcm0gbWF0NCB1X3ZpZGVvVmlld3BvcnRUcmFuc2Zvcm1hdGlvbjsgCnVuaWZvcm0gbWF0NCB1X3ZpZGVvSW52ZXJzZVByb2plY3Rpb247IAp1bmlmb3JtIHZlYzQgdV92aWRlb0ZydXN0dW1QbGFuZXM7CnVuaWZvcm0gZmxvYXQgdV9kZXB0aFR5cGU7CnVuaWZvcm0gZmxvYXQgdV9hbHBoYTsKdW5pZm9ybSB2ZWMzIHVfaHN2Owp1bmlmb3JtIHNhbXBsZXIyRCB1X2NsaXBQbGFuZUNvbG9yVGV4dHVyZTsKdW5pZm9ybSB2ZWM0IHVfY2xpcFBsYW5lQ29sb3I7CnVuaWZvcm0gZmxvYXQgdV9wcm9qZWN0TW9kZTsKdW5pZm9ybSB2ZWM0IHVfcHVyZUNvbG9yOwp1bmlmb3JtIGZsb2F0IGsxOwp1bmlmb3JtIGZsb2F0IGsyOwp1bmlmb3JtIGZsb2F0IHRleHR1cmVXaWR0aDsKdW5pZm9ybSBmbG9hdCB0ZXh0dXJlSGVpZ2h0Owp2ZWMzIGNsaXBUb1JlbGF0aXZlV29ybGQoZmxvYXQgdSxmbG9hdCB2KQp7CnZlYzIgdXYgPSB2ZWMyKHUsdik7CmZsb2F0IGRlcHRoID0gY3ptX3VucGFja0RlcHRoKHRleHR1cmUyRChkZXB0aFRleHR1cmUsIHV2KSk7CnZlYzQgZXllQ29vcmRpbmF0ZSA9IGN6bV93aW5kb3dUb0V5ZUNvb3JkaW5hdGVzKHV2KmN6bV92aWV3cG9ydC56dywgZGVwdGgpOwp2ZWM0IHdvcmxkQ29vcmRpbmF0ZTQgPSB1X3NjZW5lSW52ZXJzZVZpZXdSZWxhdGl2ZSAqIGV5ZUNvb3JkaW5hdGU7CnZlYzMgd29ybGRQb3NpdGlvbiA9IHdvcmxkQ29vcmRpbmF0ZTQueHl6IC8gd29ybGRDb29yZGluYXRlNC53OwpyZXR1cm4gd29ybGRQb3NpdGlvbjsKfQp2ZWM0IHdpbmRvd1RvRXllQ29vcmRpbmF0ZXNJblZpZGVvMih2ZWM0IGZyYWdtZW50Q29vcmRpbmF0ZSkKewogICAgZmxvYXQgeCA9IDIuMCAqIChmcmFnbWVudENvb3JkaW5hdGUueCAtIHVfdmlkZW9WaWV3cG9ydC54KSAvIHVfdmlkZW9WaWV3cG9ydC56IC0gMS4wOwogICAgZmxvYXQgeSA9IDIuMCAqIChmcmFnbWVudENvb3JkaW5hdGUueSAtIHVfdmlkZW9WaWV3cG9ydC55KSAvIHVfdmlkZW9WaWV3cG9ydC53IC0gMS4wOwogICAgZmxvYXQgeiA9IChmcmFnbWVudENvb3JkaW5hdGUueiAtIHVfdmlkZW9WaWV3cG9ydFRyYW5zZm9ybWF0aW9uWzNdWzJdKSAvIHVfdmlkZW9WaWV3cG9ydFRyYW5zZm9ybWF0aW9uWzJdWzJdOwogICAgdmVjNCBxID0gdmVjNCh4LCB5LCB6LCAxLjApOwogICAgcSA9IHEvZnJhZ21lbnRDb29yZGluYXRlLnc7CiAgICBpZiAoISh1X3ZpZGVvSW52ZXJzZVByb2plY3Rpb24gPT0gbWF0NCgwLjApKSkgCiAgICB7CiAgICAgICAgcSA9IHVfdmlkZW9JbnZlcnNlUHJvamVjdGlvbiAqIHE7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgZmxvYXQgdG9wID0gdV92aWRlb0ZydXN0dW1QbGFuZXMueDsKICAgICAgICBmbG9hdCBib3R0b20gPSB1X3ZpZGVvRnJ1c3R1bVBsYW5lcy55OwogICAgICAgIGZsb2F0IGxlZnQgPSB1X3ZpZGVvRnJ1c3R1bVBsYW5lcy56OwogICAgICAgIGZsb2F0IHJpZ2h0ID0gdV92aWRlb0ZydXN0dW1QbGFuZXMudzsKICAgICAgICBmbG9hdCBuZWFyID0gdV92aWRlb0ZydXN0dW0ueDsKICAgICAgICBmbG9hdCBmYXIgPSB1X3ZpZGVvRnJ1c3R1bS55OwogICAgICAgIHEueCA9IChxLnggKiAocmlnaHQgLSBsZWZ0KSArIGxlZnQgKyByaWdodCkgKiAwLjU7CiAgICAgICAgcS55ID0gKHEueSAqICh0b3AgLSBib3R0b20pICsgYm90dG9tICsgdG9wKSAqIDAuNTsKICAgICAgICBxLnogPSAocS56ICogKG5lYXIgLSBmYXIpIC0gbmVhciAtIGZhcikgKiAwLjU7CiAgICAgICAgcS53ID0gMS4wOwogICAgfQogICAgcmV0dXJuIHE7Cn0KdmVjNCB3aW5kb3dUb0V5ZUNvb3JkaW5hdGVzSW5WaWRlbyh2ZWMyIGZyYWdtZW50Q29vcmRpbmF0ZVhZLCBmbG9hdCBkZXB0aE9yTG9nRGVwdGgpIAp7CiAgI2lmZGVmIExPR19ERVBUSAogIGZsb2F0IG5lYXIgPSB1X3ZpZGVvRnJ1c3R1bS54OwogIGZsb2F0IGZhciA9IHVfdmlkZW9GcnVzdHVtLnk7CiAgZmxvYXQgbG9nMkRlcHRoID0gZGVwdGhPckxvZ0RlcHRoICogdV9sb2cyRmFyRGVwdGhGcm9tTmVhclBsdXNPbmVJblZpZGVvOwogIGZsb2F0IGRlcHRoRnJvbU5lYXIgPSBwb3coMi4wLCBsb2cyRGVwdGgpIC0gMS4wOwogIGZsb2F0IGRlcHRoRnJvbUNhbWVyYSA9IGRlcHRoRnJvbU5lYXIgKyBuZWFyOwogIHZlYzQgd2luZG93Q29vcmQgPSB2ZWM0KGZyYWdtZW50Q29vcmRpbmF0ZVhZLCBmYXIgKiBmbG9hdCgxLjAgLSBuZWFyIC8gZGVwdGhGcm9tQ2FtZXJhKSAvIGZsb2F0KGZhciAtIG5lYXIpLCAxLjApOwogIHZlYzQgZXllQ29vcmRpbmF0ZSA9IHdpbmRvd1RvRXllQ29vcmRpbmF0ZXNJblZpZGVvMih3aW5kb3dDb29yZCk7CiAgZXllQ29vcmRpbmF0ZS53ID0gMS4wIC8gZGVwdGhGcm9tQ2FtZXJhOyAKICByZXR1cm4gZXllQ29vcmRpbmF0ZTsKICAjZWxzZQogIHZlYzQgd2luZG93Q29vcmQgPSB2ZWM0KGZyYWdtZW50Q29vcmRpbmF0ZVhZLCBkZXB0aE9yTG9nRGVwdGgsIDEuMCk7CiAgdmVjNCBleWVDb29yZGluYXRlID0gd2luZG93VG9FeWVDb29yZGluYXRlc0luVmlkZW8yKHdpbmRvd0Nvb3JkKTsKICAjZW5kaWYKICByZXR1cm4gZXllQ29vcmRpbmF0ZTsKfQp2ZWMzIHZpZGVvQ2FtZXJhQ2xpcFRvUmVsYXRpdmVXb3JsZChmbG9hdCB1LGZsb2F0IHYpIAp7CiAgdmVjMiB1diA9IHZlYzIodSx2KTsKICBmbG9hdCBkZXB0aCA9IGN6bV91bnBhY2tEZXB0aCh0ZXh0dXJlMkQodV92aWRlb0NhbWVyYURlcHRoVGV4dHVyZSwgdXYpKTsKICB2ZWM0IGV5ZUNvb3JkaW5hdGUgPSB3aW5kb3dUb0V5ZUNvb3JkaW5hdGVzSW5WaWRlbyh1dip1X3ZpZGVvVmlld3BvcnQuencsIGRlcHRoKTsKICB2ZWM0IHdvcmxkQ29vcmRpbmF0ZTQgPSB1X3ZpZGVvSW52ZXJzZVZpZXdSZWxhdGl2ZSAqIGV5ZUNvb3JkaW5hdGU7CiAgdmVjMyB3b3JsZFBvc2l0aW9uID0gd29ybGRDb29yZGluYXRlNC54eXogLyB3b3JsZENvb3JkaW5hdGU0Lnc7CiAgcmV0dXJuIHdvcmxkUG9zaXRpb247Cn0KdmVjMyByZ2IyaHN2KHZlYzMgYykKewp2ZWM0IEsgPSB2ZWM0KDAuMCwgLTEuMC8zLjAsIDIuMC8zLjAsIC0xLjApOwp2ZWM0IHAgPSBtaXgodmVjNChjLmJnLCBLLnd6KSwgdmVjNChjLmdiLCBLLnh5KSwgc3RlcChjLmIsIGMuZykpOwp2ZWM0IHEgPSBtaXgodmVjNChwLnh5dywgYy5yKSwgdmVjNChjLnIsIHAueXp4KSwgc3RlcChwLngsIGMucikpOwpmbG9hdCBkID0gcS54IC0gbWluKHEudywgcS55KTsKZmxvYXQgZSA9IDEuMGUtMTA7CnJldHVybiB2ZWMzKGFicyhxLnogKyAocS53IC0gcS55KS8oNi4wKmQrZSkpLCBkLyhxLnggKyBlKSwgcS54KTsKfQp2ZWMzIGhzdjJyZ2IodmVjMyBjKQp7CnZlYzQgSyA9IHZlYzQoMS4wLCAyLjAvMy4wLCAxLjAvMy4wLCAzLjApOwp2ZWMzIHAgPSBhYnMoZnJhY3QoYy54eHggKyBLLnh5eikgKiA2LjAgLSBLLnd3dyk7CnJldHVybiBjLnogKiBtaXgoSy54eHgsIGNsYW1wKHAgLSBLLnh4eCwgMC4wLCAxLjApLCBjLnkpOwp9CnZvaWQgbWFpbih2b2lkKXsKZmxvYXQgZGVwdGggPSBjem1fdW5wYWNrRGVwdGgodGV4dHVyZTJEKGRlcHRoVGV4dHVyZSwgdl90ZXh0dXJlQ29vcmRpbmF0ZXMpKTsKZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKGNvbG9yVGV4dHVyZSwgdl90ZXh0dXJlQ29vcmRpbmF0ZXMpOwp2ZWM0IGNsaXBDb2xvciA9IHRleHR1cmUyRCh1X2NsaXBQbGFuZUNvbG9yVGV4dHVyZSwgdl90ZXh0dXJlQ29vcmRpbmF0ZXMpOwojaWZkZWYgQ1pNX1NFTEVDVEVEX0ZFQVRVUkUKZmxvYXQgcGFkeCA9IGN6bV9waXhlbFJhdGlvIC8gY3ptX3ZpZXdwb3J0Lno7CmZsb2F0IHBhZHkgPSBjem1fcGl4ZWxSYXRpbyAvIGN6bV92aWV3cG9ydC53OwppZihjem1fc2VsZWN0ZWQodmVjMihwYWR4LCBwYWR5KSkpewpyZXR1cm47Cn0KI2VuZGlmCmlmKGRlcHRoPjAuMCl7CnZlYzMgd29ybGRQb3MgPSBjbGlwVG9SZWxhdGl2ZVdvcmxkKHZfdGV4dHVyZUNvb3JkaW5hdGVzLngsIHZfdGV4dHVyZUNvb3JkaW5hdGVzLnkpOwp2ZWM0IHJlYWxXb3JsZFBvcyA9IHZlYzQod29ybGRQb3MueCArIHVfcmVsYXRpdmVQb3MueCwgd29ybGRQb3MueSArIHVfcmVsYXRpdmVQb3MueSwgd29ybGRQb3MueiArIHVfcmVsYXRpdmVQb3MueiwgMS4wKTsKdmVjNCBwcm9qZWN0UHRJblZpZGVvID0gdV92aWRlb1ZpZXdQcm9qZWN0aW9uUmVsYXRpdmUgKiByZWFsV29ybGRQb3M7CnByb2plY3RQdEluVmlkZW8gPSBwcm9qZWN0UHRJblZpZGVvL3Byb2plY3RQdEluVmlkZW8udzsKaWYocHJvamVjdFB0SW5WaWRlby54ID49LTEuMCAmJiBwcm9qZWN0UHRJblZpZGVvLnggPD0gMS4wCiYmIHByb2plY3RQdEluVmlkZW8ueSA+PS0xLjAgJiYgcHJvamVjdFB0SW5WaWRlby55IDw9IDEuMAomJiBwcm9qZWN0UHRJblZpZGVvLnogPj0wLjAgJiYgcHJvamVjdFB0SW5WaWRlby56IDw9IDEuMCl7CnZlYzIgdGV4Q29vcmQgPSB2ZWMyKDAuNSwgMC41KSArIHByb2plY3RQdEluVmlkZW8ueHkgKiAwLjU7Ci8vSW52ZXJzZSBjYWxjdWxhdGlvbiBvZiB3b3JsZCBjb29yZGluYXRlcyByZWxhdGl2ZSB0byB0aGUgdmlkZW8gY2FtZXJhLiBhZGRlZCBieSB6YWsgMjAyMS4yLjE5IAppZih1X2RlcHRoVHlwZT4yLjUgJiYgdV9kZXB0aFR5cGU8My41KXsKICAgdmVjMyB3b3JsZFB0SW5WaWRlb0NhbWVyYSA9IHZpZGVvQ2FtZXJhQ2xpcFRvUmVsYXRpdmVXb3JsZCh0ZXhDb29yZC54LCB0ZXhDb29yZC55KTsgICAKICAgZmxvYXQgZGlzID0gZGlzdGFuY2UocmVhbFdvcmxkUG9zLnh5eiwgd29ybGRQdEluVmlkZW9DYW1lcmEpOwogICBpZihkaXMgPiAxLjApewogIAkgIHJldHVybjsKICAgfQp9CmZsb2F0IG1heFdpZHRoSGVpZ2h0ID0gdGV4dHVyZVdpZHRoOwpmbG9hdCBwZXJjZW50ID0gdGV4dHVyZUhlaWdodCAvIHRleHR1cmVXaWR0aDsKdmVjMiBjZW50ZXJVViA9IHZlYzIoKHRleHR1cmVXaWR0aCAvIDIuMCkgLyBtYXhXaWR0aEhlaWdodCwgKHRleHR1cmVIZWlnaHQgLyAyLjApIC8gbWF4V2lkdGhIZWlnaHQpOwp2ZWMyIGN1cnJlbnRVViA9IHZlYzIodGV4Q29vcmQueCwgdGV4Q29vcmQueSAqIHBlcmNlbnQpOwpmbG9hdCBsZW5ndGhfMiA9IChjdXJyZW50VVYueCAtIGNlbnRlclVWLngpICogKGN1cnJlbnRVVi54IC0gY2VudGVyVVYueCkgKyAoY3VycmVudFVWLnkgLSBjZW50ZXJVVi55KSAqIChjdXJyZW50VVYueSAtIGNlbnRlclVWLnkpOwpmbG9hdCBsZW5ndGhfNCA9IGxlbmd0aF8yICogbGVuZ3RoXzI7CnRleENvb3JkLnggPSAoY3VycmVudFVWLnggLSBjZW50ZXJVVi54KSAvIChrMSAqIGxlbmd0aF8yICsgazIgKiBsZW5ndGhfNCArIDEuMCkgKyBjZW50ZXJVVi54Owp0ZXhDb29yZC55ID0gKGN1cnJlbnRVVi55IC0gY2VudGVyVVYueSkgLyAoazEgKiBsZW5ndGhfMiArIGsyICogbGVuZ3RoXzQgKyAxLjApICsgY2VudGVyVVYueTsKdGV4Q29vcmQueSA9IHRleENvb3JkLnkgLyBwZXJjZW50Owp2ZWM0IHZpZGVvQ29sb3IgPSB0ZXh0dXJlMkQodV92aWRlb0NvbG9yVGV4dHVyZSwgdGV4Q29vcmQpOwp2ZWMzIHJnYiA9IHZpZGVvQ29sb3IueHl6Owp2ZWMzIGhzdiA9IHJnYjJoc3YocmdiKTsKaHN2ICs9IHVfaHN2OwpyZ2IgPSBoc3YycmdiKGhzdik7CnJnYiA9IGNsYW1wKHJnYiwgMC4wLCAxLjApOwp2aWRlb0NvbG9yLnh5eiA9IHJnYjsKaWYodV9wcm9qZWN0TW9kZT4wLjUgJiYgdV9wcm9qZWN0TW9kZTwxLjUpewpnbF9GcmFnQ29sb3IgPSAoMS4wIC0gdV9hbHBoYSkgKiBnbF9GcmFnQ29sb3IgKyB1X2FscGhhICogdmlkZW9Db2xvcjsKfWVsc2UgaWYodV9wcm9qZWN0TW9kZT4xLjUgJiYgdV9wcm9qZWN0TW9kZTwyLjUpewppZihjem1fZXF1YWxzRXBzaWxvbih1X2NsaXBQbGFuZUNvbG9yLnIsIGNsaXBDb2xvci5yLCAwLjAwMSkgJiYgY3ptX2VxdWFsc0Vwc2lsb24odV9jbGlwUGxhbmVDb2xvci5nLCBjbGlwQ29sb3IuZywgMC4wMDEpICYmCmN6bV9lcXVhbHNFcHNpbG9uKHVfY2xpcFBsYW5lQ29sb3IuYiwgY2xpcENvbG9yLmIsIDAuMDAxKSl7CmdsX0ZyYWdDb2xvciA9ICgxLjAgLSB1X2FscGhhKSAqIGdsX0ZyYWdDb2xvciArIHVfYWxwaGEgKiB2aWRlb0NvbG9yOwogIH0KfWVsc2UgaWYodV9wcm9qZWN0TW9kZT4yLjUgJiYgdV9wcm9qZWN0TW9kZTwzLjUpewpnbF9GcmFnQ29sb3IgPSAoMS4wIC0gdV9hbHBoYSkgKiBnbF9GcmFnQ29sb3IgKyB1X2FscGhhICogdmlkZW9Db2xvcjsKfQogIH0KfQp9Cg==",t=Cesium.Matrix4.setTranslation(this.videoCamera.viewMatrix,new Cesium.Cartesian3,new Cesium.Matrix4);this.videoViewProjectionMat4=Cesium.Matrix4.multiply(this.videoCamera.frustum.projectionMatrix,t,new Cesium.Matrix4);let n=this;this._videoStage=new Cesium.PostProcessStage({name:`VideoP_${n._name}`,fragmentShader:hf,uniforms:{u_videoColorTexture:function(){return n._videoTexture},u_depthType:function(){return n._depthType},u_videoCameraDepthTexture:function(){return Cesium.defined(n.videoView.globeDepth.depthStencilTexture)?n.videoView.globeDepth.depthStencilTexture:n._scene.view.globeDepth.depthStencilTexture},u_videoViewProjectionRelative:function(){let i=Cesium.Matrix4.setTranslation(n.videoCamera.viewMatrix,new Cesium.Cartesian3,new Cesium.Matrix4);return n.videoViewProjectionMat4=Cesium.Matrix4.multiply(n.videoCamera.frustum.projectionMatrix,i,new Cesium.Matrix4),n.videoViewProjectionMat4},u_videoInverseViewRelative:function(){return n.videoUniform.videoInverseViewRelative},u_log2FarDepthFromNearPlusOneInVideo:function(){return n.videoUniform.log2FarDepthFromNearPlusOneInVideo},u_videoFrustum:function(){return n.videoUniform.videoFrustum},u_videoViewport:function(){return n.videoUniform.videoViewport},u_videoViewportTransformation:function(){return n.videoUniform.videoViewportTransformation},u_videoInverseProjection:function(){return n.videoUniform.videoInverseProjection},u_videoFrustumPlanes:function(){return n.videoUniform.videoFrustumPlanes},u_relativePos:function(){return Cesium.defined(n._mainCamera)&&Cesium.defined(n.videoCamera)?Cesium.Cartesian3.subtract(n._mainCamera.positionWC,n.videoCamera.positionWC,new Cesium.Cartesian3):new Cesium.Cartesian3},u_sceneInverseViewRelative:function(){let i=Cesium.Matrix4.setTranslation(n._mainCamera.viewMatrix,new Cesium.Cartesian3,new Cesium.Matrix4);return Cesium.Matrix4.inverse(i,new Cesium.Matrix4)},u_alpha:function(){return n.videoAlpha*n.videoAlphaRate},u_hsv:function(){return n.videoHsv},u_clipPlaneColorTexture:function(){return n.clipPlaneTexture},u_clipPlaneColor:function(){return n.clipPlaneColor},u_projectMode:function(){return n._projectMode},u_pureColor:function(){return n._pureColor},k1:function(){return n._distortion.x},k2:function(){return n._distortion.y},textureWidth:function(){return Cesium.defined(n._videoTexture)?n._videoTexture.width:0},textureHeight:function(){return Cesium.defined(n._videoTexture)?n._videoTexture.height:0},u_videoTextureClipLUPos:function(){return n._videoTextureClipLUPos},u_videoTextureClipLBPos:function(){return n._videoTextureClipLBPos},u_videoTextureClipRBPos:function(){return n._videoTextureClipRBPos},u_videoTextureClipRUPos:function(){return n._videoTextureClipRUPos},u_distanceError:function(){return n._distanceError}},type:this,preUpdateFunction:xw}),this._viewer.scene.postProcessStages.add(this._videoStage),this._videoStage.enabled=!0,this._computeBoundingSphere()}this._wsplayer&&this._wsplayer.updateVideo()};xt.prototype.updateClipPlaneFramebuffer=function(e,t){this.clipPlaneFramebuffer=e,this.clipPlaneTexture=t;for(let n=0;n<this.projectionPlanes.length;n++)this.projectionPlanes[n].framebuffer=e};xt.prototype._checkVideoCameraAngle=function(){if(!this.videoCamera||this.videoCamera.directionWC===void 0||!this._mainCamera||this._mainCamera.directionWC===void 0)return;let e=Cesium.Cartesian3.angleBetween(this._mainCamera.directionWC,this.videoCamera.directionWC);e=Cesium.Math.toDegrees(e),e>this._videoVisiableAngle+this._videoGradientAngle?this.videoAlphaRate=0:e<this._videoVisiableAngle?this.videoAlphaRate=1:this.videoAlphaRate=1-(e-this._videoVisiableAngle)/this._videoGradientAngle};function Km(e,t,n,i){if(e._delayTimerArray.length!==0&&(clearTimeout(e._delayTimerArray[0]),e._delayTimerArray.shift()),!e.videoCamera)return;e._manufacturer==="DAHUA"&&(t>180?t=540-t:t=180-t);let o=parseFloat(t),r=parseFloat(n),s=parseFloat(i),a=1e-5;if(Math.abs(o-e.panCurrent)<a&&Math.abs(r-e.tiltCurrent)<a&&Math.abs(s-e.zoomCurrent)<a)return;e.panCurrent=o,e.tiltCurrent=r,e.zoomCurrent=s;let c=1e3,l=-1,d=e._panPos,h=e._tiltPos,g=e._zoomPos,C=e._heading,b=e._pitch,w=e._roll;for(let z=0;z<e._auxiliaryPTZ.length;z++){let U=e._auxiliaryPTZ[z],Y=U[0],m=U[1];Y=Math.abs(Y-o),m=Math.abs(m-r);let Q=Y;Q<c&&(c=Q,l=z)}l!==-1&&(d=e._auxiliaryPTZ[l][0],h=e._auxiliaryPTZ[l][1],g=e._auxiliaryPTZ[l][2],C=e._auxiliaryPTZ[l][3],b=e._auxiliaryPTZ[l][4],w=e._auxiliaryPTZ[l][5]);let R=C-(d-o),D=b-(h-r);if(e._manufacturer==="DAHUA"&&(D=b+(h-r)),e.cameraInversion||(e._manufacturer==="DAHUA"?D=b-(h-r):e._manufacturer==="HIKVISION"&&(D=b+(h-r))),D<-90?D=-90:D>90&&(D=90),isNaN(R)||isNaN(D))return;e.videoCamera.setView({orientation:{heading:Cesium.Math.toRadians(R),pitch:Cesium.Math.toRadians(D),roll:Cesium.Math.toRadians(w)}});let M=e.videoCamera.frustum;M.fov=Cesium.Math.toRadians(e._fov*e._zoomPos/e.zoomCurrent),M.aspectRatio=e.videoWidth/e.videoHeight,M.near=e._nearClip,M.far=e._farClip,M._fovy=M.aspectRatio<=1?M.fov:Math.atan(Math.tan(M.fov*.5)/M.aspectRatio)*2,M._fovy=M._fovy*e._zoomPos/e.zoomCurrent,M.top=M.near*Math.tan(.5*M._fovy),M.bottom=-M.top,M.right=M.aspectRatio*M.top,M.left=-M.right,e.followCamera(),e._computeBoundingSphere()}xt.prototype.setVideoCameraPosition=function(e,t){if(!this.videoCamera)return;let n=Cesium.Cartesian3.subtract(this._viewPoint,e,new Cesium.Cartesian3);Cesium.Cartesian3.normalize(n,n);let i=this.videoCamera.roll;this.videoCamera.setView({destination:e,orientation:{direction:n,up:this.videoCamera.up}}),this.videoCamera.setView({orientation:{heading:this.videoCamera.heading,pitch:this.videoCamera.pitch,roll:i}});let o=this._viewer.scene.globe.ellipsoid.cartesianToCartographic(e);this._originLon=Cesium.Math.toDegrees(o.longitude),this._originLat=Cesium.Math.toDegrees(o.latitude),this._originHeight=o.height,this._videoCameraPos=e,this._videoCameraPostureChanged=!0,this._computeBoundingSphere(),t=Cesium.defaultValue(t,!0),t&&this._changed.raiseEvent()};xt.prototype.setCameraOrientation=function(e,t){this.videoCamera&&(this.videoCamera.setView({orientation:{direction:e,up:t}}),this._heading=Cesium.Math.toDegrees(this.videoCamera.heading),this._pitch=Cesium.Math.toDegrees(this.videoCamera.pitch),this._roll=Cesium.Math.toDegrees(this.videoCamera.roll),this._videoCameraPostureChanged=!0,this._computeBoundingSphere(),this._changed.raiseEvent())};xt.prototype.setCameraHeadingPitchRoll=function(e,t,n){this.videoCamera&&(this._heading=Cesium.Math.toDegrees(e),this._pitch=Cesium.Math.toDegrees(t),this._roll=Cesium.Math.toDegrees(n),this.videoCamera.setView({orientation:{heading:e,pitch:t,roll:n}}),this._videoCameraPostureChanged=!0,this._computeBoundingSphere(),this._changed.raiseEvent())};xt.prototype.setCameraViewPoint=function(e,t){if(this._viewPoint=e,!this.videoCamera)return;let n=k.toRadians(this._roll),i=Cesium.Cartesian3.subtract(e,this.videoCamera.positionWC,new Cesium.Cartesian3);Cesium.Cartesian3.normalize(i,i),this.videoCamera.setView({orientation:{direction:i,up:this.videoCamera.upWC}}),this.videoCamera.setView({orientation:{heading:this.videoCamera.heading,pitch:this.videoCamera.pitch,roll:n}}),this._heading=Cesium.Math.toDegrees(this.videoCamera.heading),this._pitch=Cesium.Math.toDegrees(this.videoCamera.pitch),this._panPos=this.panCurrent,this._tiltPos=this.tiltCurrent,this._offsetAngle=this._pitch-this._tiltPos,this._videoCameraPostureChanged=!0,this._computeBoundingSphere(),Cesium.defaultValue(t,!0)&&this._changed.raiseEvent()};xt.prototype.setCameraFov=function(e){e<=0?e=.001:e>=180&&(e=180),e=e/this.delayZoom,this._fov=e,this.videoCamera&&(this.videoCamera.frustum.fov=Cesium.Math.toRadians(e))};xt.prototype.setNearClip=function(e){e<=0||e>=this._farClip||(this._nearClip=e,this.videoCamera&&(this.videoCamera.frustum.near=e))};xt.prototype.setFarClip=function(e){e<=this._nearClip||(this._farClip=e,this.videoCamera&&(this.videoCamera.frustum.far=e,this._computeBoundingSphere()))};xt.prototype.setDistortion=function(e){this._distortion=e};xt.prototype.updateParameter=function(e){let t=Cesium.Cartesian3.fromDegrees(e.originLon,e.originLat,e.originHeight);this.setVideoCameraPosition(t,!1),this.setCameraHeadingPitchRoll(e.heading,e.pitch,e.roll),Cesium.defined(e.fov)&&this.setCameraFov(e.fov),Cesium.defined(e.alpha)&&(this.videoAlpha=e.alpha),Cesium.defined(e.videoHsv)&&(this.videoHsv=e.videoHsv.clone()),Cesium.defined(e.distortion)&&(this._distortion=e.distortion.clone())};xt.prototype.delayAdjustVideoCamera=function(e,t,n,i){let o=(this.maxTilt-this.minTilt)/2;if(this._manufacturer==="HIKVISION"?(e>0&&e<=1?e=180*e:e<=0&&e>=-1&&(e=180+180*(1+e)),t=o+this.minTilt-t*o,n=(this._ptzZoomRatio-1)*n+1):this._manufacturer==="DAHUA"&&(e=180*(1-e),t=o+this.minTilt-t*o,n=this._ptzZoomRatio*n),!this.videoCamera||this.delayPan===e&&this.delayTilt===t&&this.delayZoom===n)return;this.delayPan=e,this.delayTilt=t,this.delayZoom=n;let r=this,s=e,a=t,c=n;r._ptzType==="Unit"&&r._wsplayer&&(s=r._wsplayer.panUnit2Degree(e),a=r._wsplayer.tiltUnit2Degree(t),c=n),Km(r,s,a,c)};xt.prototype.delayAdjustVideoCamera2=function(e,t,n,i){if(!this.videoCamera||this.delayPan===e&&this.delayTilt===t&&this.delayZoom===n)return;this.delayPan=e,this.delayTilt=t,this.delayZoom=n;let o=this,r=e,s=t,a=n;o._ptzType==="Unit"&&o._wsplayer&&(r=o._wsplayer.panUnit2Degree(e),s=o._wsplayer.tiltUnit2Degree(t),a=n),Km(this,r,s,a)};xt.prototype.saveCurrentAuxiliaryPTZ=function(){if(!this.videoCamera)return;let e=k.toDegrees(this.videoCamera.heading),t=k.toDegrees(this.videoCamera.pitch),n=k.toDegrees(this.videoCamera.roll),i=[this.delayPan,this.delayTilt,this.delayZoom,e,t,n],o=-1;for(let r=0;r<this._auxiliaryPTZ.length;r++){let s=this._auxiliaryPTZ[r],a=s[0],c=s[1],l=s[2];if(a=Math.abs(a-this.delayPan),c=Math.abs(c-this.delayTilt),l=Math.abs(l-this.delayZoom),a<.1&&c<.1&&l<.1){o=r;break}}o===-1?this._auxiliaryPTZ.push(i):this._auxiliaryPTZ.splice(o,1,i)};xt.prototype.deleteAuxiliaryPTZByIndex=function(e){this._auxiliaryPTZ.length>e&&this._auxiliaryPTZ.splice(0,e)};xt.prototype.createVirtualCamera=function(e,t){this.videoWidth=e,this.videoHeight=t,this.videoCamera===void 0&&(this.videoCamera=$m(this))};xt.prototype.setPTZViewPoint=function(e){if(!this.videoCamera||!this._wsplayer)return;let t=new Cesium.Cartesian4(e.x,e.y,e.z,1);Cesium.Matrix4.multiplyByVector(this.videoCamera.viewMatrix,t,t),Cesium.Cartesian3.normalize(t,t);let n=Math.asin(t.y),i=Math.asin(t.x/Math.cos(n)),o=this.panCurrent+i*180/Math.PI,r=this.tiltCurrent-n*180/Math.PI;o>360?o=o-360:o<0&&(o=o+360),this._wsplayer.ptzType==="Degree"?this._wsplayer.setPTZPosition(o,r,this.zoomCurrent):this._wsplayer.ptzType==="Unit"&&(this.zoomCurrent=0,this._wsplayer.setPTZPosition(this._wsplayer.panDegree2Unit(o),this._wsplayer.tiltDegree2Unit(r),this.zoomCurrent))};xt.prototype.followCamera=function(){let e=this;if(!e.videoCamera||!e._follow||!e._wsplayer)return;let t=e.videoCamera.position,n=e.videoCamera.heading,i=e.videoCamera.pitch,o=e.videoCamera.roll,r=1e-8;if(Math.abs(t.x-this.targetPosition.x)<r&&Math.abs(t.y-this.targetPosition.y)<r&&Math.abs(t.z-this.targetPosition.z)<r&&Math.abs(n-this.targetOrientation.x)<r&&Math.abs(this.targetOrientation.y-i)<r&&Math.abs(this.targetOrientation.z-o)<r&&Math.abs(this.targetZoom-e.zoomCurrent)<r)return;let s=new Cesium.Ray(e.videoCamera.position,e.videoCamera.direction),a=e._viewer.scene.pickFromRay(s),c=t;if(a&&a.position){let l=Cesium.Cartesian3.distance(e.videoCamera.position,a.position);this.targetZoom=e.zoomCurrent,l=l*(1-1/e.zoomCurrent),c=Cesium.Ray.getPoint(s,l,new Cesium.Cartesian3)}this.targetPosition=c,this.targetOrientation.x=n,this.targetOrientation.y=i,this.targetOrientation.z=o,e._viewer.camera.setView({destination:c,orientation:{heading:this.targetOrientation.x,pitch:this.targetOrientation.y,roll:this.targetOrientation.z}})};xt.prototype.incompatibleConsole=function(){let e=this;this._viewer.scene.renderError.addEventListener(function(){e._viewer.cesiumWidget.showErrorPanel("This browser does not support cross-origin WebGL video textures.","","")})};xt.prototype._computeBoundingSphere=function(){if(!this.videoCamera)return this._boundingSphere;let e=this.videoCamera.frustum.far*.5,t=Cesium.Cartesian3.multiplyComponents(this.videoCamera.direction,new Cesium.Cartesian3(e,e,e),new Cesium.Cartesian3);return this._boundingSphere.center=Cesium.Cartesian3.add(this.videoCamera.positionWC,t,this._boundingSphere.center),this._boundingSphere.radius=e,this._boundingSphere};xt.prototype.getConfiguration=function(){let e={},t=this._wsplayer;t?(t.mSipID?e.gb=t.mSipID:t.mRtspurl&&(e.url=t.mRtspurl),e.protocol=t.protocol):e.file=this._fileName,e.alpha=this.videoAlpha,e.distortion=[this._distortion.x,this._distortion.y],e.hsv=[this.videoHsv.x,this.videoHsv.y,this.videoHsv.z],e.depthType=this._depthType,e.clipPoints=[this._videoTextureClipLUPos.x,this._videoTextureClipLUPos.y,this._videoTextureClipLBPos.x,this._videoTextureClipLBPos.y,this._videoTextureClipRUPos.x,this._videoTextureClipRUPos.y,this._videoTextureClipRBPos.x,this._videoTextureClipRBPos.y],e.nearClip=this._nearClip,e.farClip=this._farClip,e.distanceError=this._distanceError;let n={position:[this._originLon,this._originLat,this._originHeight],orientation:[this._heading,this._pitch,this._roll],fov:this._fov};if(this._viewPoint){let i=this._viewer.scene.globe.ellipsoid.cartesianToCartographic(this._viewPoint);i&&(n.visitPoint=[Cesium.Math.toDegrees(i.longitude),Cesium.Math.toDegrees(i.latitude),i.height])}return n.ptzType=this._ptzType,n.ptz=[this.delayPan,this.delayTilt,this.delayZoom],n.ptzZoomRatio=this._ptzZoomRatio,n.minTilt=this.minTilt,n.maxTilt=this.maxTilt,n.manufacturer=this._manufacturer,n.cameraInversion=this.cameraInversion,n.auxiliaryPTZ=this._auxiliaryPTZ,{name:this._name,type:this._projectionMode,visibleDistance:this._visibleDistance,video:e,camera:n}};xt.prototype.destroy=function(){this._videoStage&&(this._videoStage.enabled=!1),this._scene.postProcessStages.remove(this._videoStage),this._wsplayer&&(this._wsplayer.stop(),this._wsplayer=null);for(let e=0;e<this.projectionPlanes.length;e++)this.projectionPlanes[e]!==this._scene._frameState.context.defaultTexture&&this.projectionPlanes[e].destroy();return this._videoTexture!==void 0&&(this._videoTexture.destroy(),this._videoTexture=void 0),this.projectionPlanes=[],Cesium.destroyObject(this)};var Mo=xt;function Rw(){this._frameNumber=-1,this._features=[]}function Fn(e){if(!Cesium.defined(e))throw new Cesium.DeveloperError("\u53C2\u6570options\u4E0D\u80FD\u4E3A\u7A7A\u3002");if(!Cesium.defined(e.viewer))throw new Cesium.DeveloperError("Viewer\u5BF9\u8C61options.viewer\u4E0D\u80FD\u4E3A\u7A7A\u3002");this._viewer=e.viewer,this._scene=this._viewer.scene,this._sceneCamera=this._scene.camera;let t=this._viewer.canvas,n=this._scene._frameState.context;if(this._width=t.width,this._height=t.height,!Cesium.defined(n))throw new Cesium.DeveloperError("_scene._frameState.context\u4E0D\u80FD\u4E3A\u7A7A\u3002");this._videoProjections=[],this.clipPlaneTexture=new Cesium.Texture({context:n,width:this._width,height:this._height,pixelFormat:Cesium.PixelFormat.RGBA,sampler:Cesium.Sampler.NEAREST}),this.framebuffer=new Cesium.Framebuffer({context:n,colorTextures:[this.clipPlaneTexture],destroyAttachments:!1}),this._clearCommand=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),framebuffer:this.framebuffer,depth:1,owner:this}),this._viewer.scene.preRender.addEventListener(this.preRender,this),this._cachedFilterFeatures=new Rw,this._filterPrimitives={cesium3DTileIds:[],cesium3DTileNames:[],entityIds:[]}}Object.defineProperties(Fn.prototype,{filterPrimitives:{get:function(){return this._filterPrimitives}}});Fn.prototype.createVideoProjection=function(e){let t=this._videoProjections.length+1;e.clipPlaneFramebuffer=this.framebuffer,e.clipPlaneColor=Cesium.Color.fromRgba(t),e.clipPlaneColor.alpha=1,e.clipPlaneTexture=this.clipPlaneTexture,e.pureColor=new Cesium.Color(0,1,0,1),e.filterPrimitives=this.filterPrimitives,e.cachedFilterFeatures=this._cachedFilterFeatures,e.width=this._width,e.height=this._height;let n=new Mo(e);return this._videoProjections.push(n),n};Fn.prototype.updateVideoCamera=function(e,t,n,i){for(let o=0;o<this._videoProjections.length;o++){let r=this._videoProjections[o];if(r._videoElement.id===e){r.delayAdjustVideoCamera(t,n,i,r._ptzDelay);return}}};Fn.prototype.preRender=function(e){let t=e.frameState.context,n=e.frameState.commandList,i=t.canvas;if(i.width!==this._width||i.height!==this._height){this._width=i.width,this._height=i.height,this.framebuffer=this.framebuffer&&this.framebuffer.destroy(),this.clipPlaneTexture=new Cesium.Texture({context:t,width:this._width,height:this._height,pixelFormat:Cesium.PixelFormat.RGBA,sampler:Cesium.Sampler.NEAREST}),this.framebuffer=new Cesium.Framebuffer({context:t,colorTextures:[this.clipPlaneTexture],destroyAttachments:!1}),this._clearCommand.framebuffer=this.framebuffer;for(let o=0;o<this._videoProjections.length;o++)this._videoProjections[o].updateClipPlaneFramebuffer(this.framebuffer,this.clipPlaneTexture)}for(let o=0;o<this._videoProjections.length;o++)this._videoProjections[o].preRender();this._clearCommand.execute(t)};Fn.prototype.addFilter3DTileId=function(e){this.filterPrimitives.cesium3DTileIds.indexOf(e)===-1&&this.filterPrimitives.cesium3DTileIds.push(e)};Fn.prototype.removeFilter3DTileId=function(e){this.filterPrimitives.cesium3DTileIds.splice(this.filterPrimitives.cesium3DTileIds.indexOf(e),1)};Fn.prototype.addFilter3DTileName=function(e){this.filterPrimitives.cesium3DTileNames.indexOf(e)===-1&&this.filterPrimitives.cesium3DTileNames.push(e)};Fn.prototype.removeFilter3DTileName=function(e){this.filterPrimitives.cesium3DTileNames.splice(this.filterPrimitives.cesium3DTileNames.indexOf(e),1)};Fn.prototype.addFilterEntity=function(e){Cesium.defined(e)&&this.filterPrimitives.entityIds.indexOf(e.id)===-1&&this.filterPrimitives.entityIds.push(e.id)};Fn.prototype.removeFilterEntity=function(e){Cesium.defined(e)&&this.filterPrimitives.entityIds.splice(this.filterPrimitives.entityIds.indexOf(e.id),1)};Fn.prototype.getComponentsInVideoCamera=function(e,t){let n,i=this._videoProjections.length;for(let r=0;r<i;r++)if(e===this._videoProjections[r].name){n=this._videoProjections[r];break}let o=[];if(Cesium.defined(n)){let r=n.videoCamera,s=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC);o=t.getComponentsInCullingVolume(s)}return o};Fn.prototype.remove=function(e){for(let t=0,n=this._videoProjections.length;t<n;++t)if(this._videoProjections[t]===e){this._videoProjections.splice(t,1);break}};Fn.prototype.destroy=function(){this._scene.preRender.removeEventListener(this.preRender,this),this.framebuffer=this.framebuffer&&this.framebuffer.destroy(),this.clipPlaneTexture=this.clipPlaneTexture&&this.clipPlaneTexture.destroy(),this.framebuffer=void 0,this.clipPlaneTexture=void 0,this._videoProjections=[]};var pf=Fn;function On(e){if(!e)throw new Cesium.DeveloperError("options is required.");if(this._readyPromise=Cesium.defer(),this._videoModelArray=[],this._videoPlaneArray=[],this._videoProjectionArray=[],this._jsmpegPlayerArray=[],this._visibleDistance=Cesium.defaultValue(e.visibleDistance,500),this._show=!0,this._name=e.name,this._boundingSphere=new Cesium.BoundingSphere,this._added=new Cesium.Event,this._changed=new Cesium.Event,this._viewer=e.viewer,this._name=e.name,this.wsServe=e.wsServer,this.ev_VideoProjectionManager=new pf({viewer:e.viewer}),Cesium.defined(e.videoJsonFile)){let t=this,n=e.videoJsonFile;if(typeof n=="object")setTimeout(function(){t._init(n,e.videoCatalog)},0);else if(typeof n=="string")if(/\.json$/.test(n)){let i=Cesium.Resource.createIfNeeded(n),o=e.videoCatalog;!o&&n.lastIndexOf("/")!==-1&&(o=n.substring(0,n.lastIndexOf("/")+1)),i.fetchJson().then(function(r){t._init(r,o)}).catch(function(s){console.warn(`\u83B7\u53D6\u89C6\u9891json\u6587\u4EF6\u5931\u8D25\uFF1A${s.message}`)})}else setTimeout(function(){t._init(JSON.parse(n),e.videoCatalog)},0);else throw new Cesium.DeveloperError("options.videoJsonFile is invalid.")}}Object.defineProperties(On.prototype,{readyPromise:{get:function(){return this._readyPromise.promise}},videoFusionArray:{get:function(){return this._videoProjectionArray}},visibleDistance:{get:function(){return this._visibleDistance},set:function(e){this._visibleDistance=e}},name:{get:function(){return this._name},set:function(e){this._name=e}},show:{get:function(){return this._show},set:function(e){this._show=e;for(let t=0;t<this._videoProjectionArray.length;t++)this._videoProjectionArray[t]._show=e}},boundingSphere:{get:function(){return this._updateBoundingSphere()}},added:{get:function(){return this._added}},changed:{get:function(){return this._changed}}});On.prototype._init=function(e,t){if(Cesium.defined(e.layerName)&&(this._name=e.layerName),this.wsServe=e.wsserver,Cesium.defined(e.boundingSphere)){let o=e.boundingSphere,r=new Cesium.Cartesian3(o[0],o[1],o[2]);this._boundingSphere=new Cesium.BoundingSphere(r,o[3])}let n=e.data;for(let o=0;o<n.length;o++){let r=n[o],s={};s.viewer=this._viewer,s.originLon=r.camera.position[0],s.originLat=r.camera.position[1],s.originHeight=r.camera.position[2],s.heading=r.camera.orientation[0],s.pitch=r.camera.orientation[1],s.roll=r.camera.orientation[2],s.fov=r.camera.fov,r.video.hsv&&(s.hsvParam=new Cesium.Cartesian3(r.video.hsv[0],r.video.hsv[1],r.video.hsv[2])),r.video.distortion&&(s.distortion=new Cesium.Cartesian2(r.video.distortion[0],r.video.distortion[1])),r.video.alpha&&(s.videoAlpha=r.video.alpha),s.ptzReverse=new Cesium.Cartesian2(0,0),r.camera.ptzReverse&&(s.ptzReverse.x=r.camera.ptzReverse[0],s.ptzReverse.y=r.camera.ptzReverse[1]),s.ptzDelay=300,r.camera.ptzReverse&&(s.ptzDelay=r.camera.ptzDelay);let a=r.camera.visitPoint;a&&(s.viewPoint=Cesium.Cartesian3.fromDegrees(a[0],a[1],a[2]));let c=document.createElement("video");c.id=`v${new Date().getTime()+Math.floor(Math.random()*1e3)}`,s.videoElementID=c.id,c.muted=!0,c.autoplay=!0,c.setAttribute("crossorigin","anonymous"),c.style.display="none",document.body.appendChild(c),s.videoElement=c,s.wsplayerType="",s.wsplayerGBAddress="";let l;if(Cesium.defined(r.video.file)){c.loop=!0;let h=r.video.file;l=h,/^http[s]?:\/\//.test(h)||Cesium.defined(t)&&(h=t+h),c.src=h,c.play()}else if(Cesium.defined(r.video.url)){let h=new to({layer:this,wsserver:e.wsserver,rtspurl:r.video.url,mediaplayer:c,isMainStream:r.video.isMainStream,protocol:r.video.protocol,pan:r.camera.ptz?r.camera.ptz[0]:void 0,tilt:r.camera.ptz?r.camera.ptz[1]:void 0,zoom:r.camera.ptz?r.camera.ptz[2]:void 0,ptzType:r.camera.ptzType});s.wsplayerType="rtsp",s.wsplayer=h}else if(r.video.gb){let h=new to({layer:this,wsserver:e.wsserver,rtspurl:"",mediaplayer:c,isMainStream:r.video.isMainStream,protocol:r.video.protocol,pan:r.camera.ptz?r.camera.ptz[0]:void 0,tilt:r.camera.ptz?r.camera.ptz[1]:void 0,zoom:r.camera.ptz?r.camera.ptz[2]:void 0,ptzType:r.camera.ptzType});s.wsplayerType="gb",s.wsplayerGBAddress=r.video.gb,s.wsplayer=h}else if(r.video.dahuaUrl){this.dahuaWSPlayerManager||(this.dahuaWSPlayerManager=new uf({server:e.server}));var i=new Bs({mediaplayer:c,serverIp:e.server,deviceIp:r.video.dahuaUrl,playerManager:this.dahuaWSPlayerManager});s.wsplayer=i}r.camera.ptz&&s.wsplayer&&(s.ptzType=r.camera.ptzType,s.ptzZoomRatio=r.camera.ptzZoomRatio,s.wsplayer.ptzType==="Degree"?(s.pan=r.camera.ptz[0],s.tilt=r.camera.ptz[1],s.zoom=r.camera.ptz[2]):s.wsplayer.ptzType==="Unit"&&(s.pan=s.wsplayer.panUnit2Degree(r.camera.ptz[0]),s.tilt=s.wsplayer.tiltUnit2Degree(r.camera.ptz[1]),s.zoom=r.camera.ptz[2])),r.projection&&(s.projection=r.projection),r.name&&(s.name=r.name),r.video.nearClip&&(s.nearClip=r.video.nearClip),r.video.farClip&&(s.farClip=r.video.farClip),r.camera.manufacturer&&(s.manufacturer=r.camera.manufacturer),r.camera.minTilt&&(s.minTilt=r.camera.minTilt),r.camera.maxTilt&&(s.maxTilt=r.camera.maxTilt),r.camera.ptzZoomRatio&&(s.ptzZoomRatio=r.camera.ptzZoomRatio),r.camera.ptzType&&(s.ptzType=r.camera.ptzType),r.camera.cameraInversion&&(s.cameraInversion=r.camera.cameraInversion),r.camera.auxiliaryPTZ&&(s.auxiliaryPTZ=r.camera.auxiliaryPTZ),s.layer=this,s.depthType=0,Cesium.defined(r.video)&&Cesium.defined(r.video.depthType)&&(s.depthType=r.video.depthType),s.visibleDistance=r.visibleDistance||r.video.viewDistanceFar;let d=null;r.type&&r.type>0?(s.projectMode=r.type,s.clipPoints=r.video.clipPoints,s.distanceError=r.video.distanceError,d=this.ev_VideoProjectionManager.createVideoProjection(s),this._videoModelArray.push(d)):(d=new or(s),this._videoPlaneArray.push(d)),d._fileName=l,this._videoProjectionArray.push(d),this._added.raiseEvent(d)}this._readyPromise.resolve(!0)};On.prototype.addVideoModelProjection=function(e){let t=this.ev_VideoProjectionManager.createVideoProjection(e);return this._videoModelArray.push(t),this._videoProjectionArray.push(t),this._added.raiseEvent(t),t};On.prototype.addVideoPlaneProjection=function(e){let t=new or(e);return this._videoPlaneArray.push(t),this._videoProjectionArray.push(t),this._added.raiseEvent(t),t};On.prototype.getProjectionByName=function(e){for(let t=0;t<this._videoProjectionArray.length;++t)if(this._videoProjectionArray[t]._name===e)return this._videoProjectionArray[t]};On.prototype.getPositionFromVideoCoordinates=function(e,t,n){let i=new Cesium.Cartesian3;for(let o=0;o<this._videoProjectionArray.length;++o)if(this._videoProjectionArray[o]._name===e){if(this._videoProjectionArray[o].videoWidth==0||this._videoProjectionArray[o].videoHeight==0)return i;let r=this._videoProjectionArray[o]._originLon,s=this._videoProjectionArray[o]._originLat,a=this._videoProjectionArray[o]._originHeight,c=this._videoProjectionArray[o].videoCamera,l=Cesium.Cartesian3.fromDegrees(r,s,a),d=new Cesium.Cartesian3;Cesium.Cartesian3.normalize(l,d),(t>1||n>1)&&(t=t/this._videoProjectionArray[o].videoWidth,n=n/this._videoProjectionArray[o].videoHeight,t=t*2-1,n=n*2-1);let h=Cesium.Matrix4.setTranslation(c.viewMatrix,new Cesium.Cartesian3,new Cesium.Matrix4),g=Cesium.Matrix4.multiply(c.frustum.projectionMatrix,h,new Cesium.Matrix4),C=Cesium.Matrix4.inverse(g,new Cesium.Matrix4),b=new Cesium.Cartesian4(t,n,100,1);Cesium.Matrix4.multiplyByVector(C,b,b);let w=new Cesium.Ray(l,b),R=this._viewer.scene.pickFromRay(w);if(R&&R.position)i=R.position;else return i=void 0,i;let M=this._viewer.scene.globe.ellipsoid.cartesianToCartographic(i);return i.x=Cesium.Math.toDegrees(M.longitude),i.y=Cesium.Math.toDegrees(M.latitude),i.z=M.height,i}return i};On.prototype.getVideoCoordinatesFromPosition=function(e,t){let n=new Cesium.Cartesian2,i=Cesium.Cartesian3.fromDegrees(t.x,t.y,t.z);for(let o=0;o<this._videoProjectionArray.length;++o)if(this._videoProjectionArray[o]._name===e){if(this._videoProjectionArray[o].videoWidth==0||this._videoProjectionArray[o].videoHeight==0)return n;let r=this._videoProjectionArray[o]._originLon,s=this._videoProjectionArray[o]._originLat,a=this._videoProjectionArray[o]._originHeight,c=this._videoProjectionArray[o].videoCamera,l=Cesium.Cartesian3.fromDegrees(r,s,a),d=Cesium.Cartesian3.subtract(i,l,new Cesium.Cartesian3),h=new Cesium.Cartesian4(d.x,d.y,d.z,1),g=Cesium.Matrix4.setTranslation(c.viewMatrix,new Cesium.Cartesian3,new Cesium.Matrix4),C=Cesium.Matrix4.multiply(c.frustum.projectionMatrix,g,new Cesium.Matrix4);return Cesium.Matrix4.multiplyByVector(C,h,h),n.x=h.x/h.w,n.x=(n.x+1)/2*this._videoProjectionArray[o].videoWidth,n.y=h.y/h.w,n.y=(n.y+1)/2*this._videoProjectionArray[o].videoHeight,n}return n};On.prototype.getProjections=function(){return this._videoProjectionArray};On.prototype.getPlaneProjections=function(){return this._videoPlaneArray};On.prototype.getModelProjections=function(){return this._videoModelArray};On.prototype.getJsonData=function(){let e=this.boundingSphere,t={layerName:this._name,wsserver:this.wsServe,boundingSphere:[e.center.x,e.center.y,e.center.z,e.radius],data:[]},n=this._videoProjectionArray;for(let i=0;i<n.length;++i){let o=n[i].getConfiguration();o&&t.data.push(o)}return t};On.prototype._updateBoundingSphere=function(){let e=[];for(let t=0;t<this._videoProjectionArray.length;++t){let i=this._videoProjectionArray[t].videoCamera;if(!i)return this._boundingSphere;e.push(i.positionWC)}return this._boundingSphere=Cesium.BoundingSphere.fromPoints(e,this._boundingSphere),this._boundingSphere.radius+=100,this._boundingSphere};On.prototype.remove=function(e){if(e instanceof Mo){for(let t=0,n=this._videoModelArray.length;t<n;++t)if(this._videoModelArray[t]===e){this._videoModelArray.splice(t,1);break}this.ev_VideoProjectionManager.remove(e)}else if(e instanceof or){for(let t=0,n=this._videoPlaneArray.length;t<n;++t)if(this._videoPlaneArray[t]===e){this._videoPlaneArray.splice(t,1);break}}else return;for(let t=0,n=this._videoProjectionArray.length;t<n;++t)if(this._videoProjectionArray[t]===e){this._videoProjectionArray.splice(t,1),e.destroy();break}};On.prototype.destroy=function(){this.ev_VideoProjectionManager!==null&&(this.ev_VideoProjectionManager.destroy(),this.ev_VideoProjectionManager=null);for(let e=0;e<this._videoProjectionArray.length;++e){let t=this._videoProjectionArray[e];this._viewer.scene.primitives.remove(t)}for(let e=0;e<this._videoProjectionArray.length;e++)document.body.removeChild(this._videoProjectionArray[e]._videoElement),this._videoProjectionArray[e].destroy();this._videoModelArray.length=0,this._videoPlaneArray.length=0,this._videoProjectionArray.length=0,this._added=null,this._changed=null,this._viewer=null};var Pc=On;function sr(e){e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),this._clock=void 0,this._element=void 0,this._clockSubscription=void 0,this._seekFunction=void 0,this._lastPlaybackRate=void 0,this.clock=e.clock,this.element=e.element,this.epoch=Cesium.defaultValue(e.epoch,Cesium.Iso8601.MINIMUM_VALUE),this.tolerance=Cesium.defaultValue(e.tolerance,1),this._seeking=!1,this._seekFunction=void 0,this._firstTickAfterSeek=!1}Object.defineProperties(sr.prototype,{clock:{get:function(){return this._clock},set:function(e){let t=this._clock;t!==e&&(Cesium.defined(t)&&(this._clockSubscription(),this._clockSubscription=void 0),Cesium.defined(e)&&(this._clockSubscription=e.onTick.addEventListener(sr.prototype._onTick,this)),this._clock=e)}},element:{get:function(){return this._element},set:function(e){let t=this._element;t!==e&&(Cesium.defined(t)&&t.removeEventListener("seeked",this._seekFunction,!1),Cesium.defined(e)&&(this._seeking=!1,this._seekFunction=Pw(this),e.addEventListener("seeked",this._seekFunction,!1)),this._element=e,this._seeking=!1,this._firstTickAfterSeek=!1)}}});sr.prototype.destroy=function(){return this.element=void 0,this.clock=void 0,Cesium.destroyObject(this)};sr.prototype.isDestroyed=function(){return!1};sr.prototype._trySetPlaybackRate=function(e){if(this._lastPlaybackRate===e.multiplier)return;let t=this._element;try{t.playbackRate=e.multiplier}catch{t.playbackRate=0}this._lastPlaybackRate=e.multiplier};sr.prototype._onTick=function(e){let t=this._element;if(!Cesium.defined(t)||t.readyState<2)return;let n=t.paused,i=e.shouldAnimate;if(i===n&&(i?t.play():t.pause()),this._seeking||this._firstTickAfterSeek){this._firstTickAfterSeek=!1;return}this._trySetPlaybackRate(e);let o=new Date().getTime()/1e3,r=t.duration,s,a=t.currentTime;t.loop?(o=o%r,o<0&&(o=r-o),s=o):o>r?s=r:o<0?s=0:s=o;let c=i?Cesium.defaultValue(this.tolerance,1):.001;Math.abs(s-a)>c&&(this._seeking=!0,t.currentTime=s)};function Pw(e){return function(){e._seeking=!1,e._firstTickAfterSeek=!0}}var Ow=sr;var Nt={_maximumCombinedTextureImageUnits:0,_maximumCubeMapSize:0,_maximumFragmentUniformVectors:0,_maximumTextureImageUnits:0,_maximumRenderbufferSize:0,_maximumTextureSize:0,_maximumVaryingVectors:0,_maximumVertexAttributes:0,_maximumVertexTextureImageUnits:0,_maximumVertexUniformVectors:0,_minimumAliasedLineWidth:0,_maximumAliasedLineWidth:0,_minimumAliasedPointSize:0,_maximumAliasedPointSize:0,_maximumViewportWidth:0,_maximumViewportHeight:0,_maximumTextureFilterAnisotropy:0,_maximumDrawBuffers:0,_maximumColorAttachments:0,_maximumSamples:0,_highpFloatSupported:!1,_highpIntSupported:!1};Object.defineProperties(Nt,{maximumCombinedTextureImageUnits:{get:function(){return Nt._maximumCombinedTextureImageUnits}},maximumCubeMapSize:{get:function(){return Nt._maximumCubeMapSize}},maximumFragmentUniformVectors:{get:function(){return Nt._maximumFragmentUniformVectors}},maximumTextureImageUnits:{get:function(){return Nt._maximumTextureImageUnits}},maximumRenderbufferSize:{get:function(){return Nt._maximumRenderbufferSize}},maximumTextureSize:{get:function(){return Nt._maximumTextureSize}},maximumVaryingVectors:{get:function(){return Nt._maximumVaryingVectors}},maximumVertexAttributes:{get:function(){return Nt._maximumVertexAttributes}},maximumVertexTextureImageUnits:{get:function(){return Nt._maximumVertexTextureImageUnits}},maximumVertexUniformVectors:{get:function(){return Nt._maximumVertexUniformVectors}},minimumAliasedLineWidth:{get:function(){return Nt._minimumAliasedLineWidth}},maximumAliasedLineWidth:{get:function(){return Nt._maximumAliasedLineWidth}},minimumAliasedPointSize:{get:function(){return Nt._minimumAliasedPointSize}},maximumAliasedPointSize:{get:function(){return Nt._maximumAliasedPointSize}},maximumViewportWidth:{get:function(){return Nt._maximumViewportWidth}},maximumViewportHeight:{get:function(){return Nt._maximumViewportHeight}},maximumTextureFilterAnisotropy:{get:function(){return Nt._maximumTextureFilterAnisotropy}},maximumDrawBuffers:{get:function(){return Nt._maximumDrawBuffers}},maximumColorAttachments:{get:function(){return Nt._maximumColorAttachments}},maximumSamples:{get:function(){return Nt._maximumSamples}},highpFloatSupported:{get:function(){return Nt._highpFloatSupported}},highpIntSupported:{get:function(){return Nt._highpIntSupported}}});var gt=Nt;function Iw(e,t){gt._maximumCombinedTextureImageUnits=Cesium.ContextLimits._maximumCombinedTextureImageUnits,gt._maximumCubeMapSize=Cesium.ContextLimits._maximumCubeMapSize,gt._maximumFragmentUniformVectors=Cesium.ContextLimits._maximumFragmentUniformVectors,gt._maximumTextureImageUnits=Cesium.ContextLimits._maximumTextureImageUnits,gt._maximumRenderbufferSize=Cesium.ContextLimits._maximumRenderbufferSize,gt._maximumTextureSize=Cesium.ContextLimits._maximumTextureSize,gt._maximumVertexAttributes=Cesium.ContextLimits._maximumVertexAttributes,gt._maximumVertexTextureImageUnits=Cesium.ContextLimits._maximumVertexTextureImageUnits,gt._maximumVertexUniformVectors=Cesium.ContextLimits._maximumVertexUniformVectors,gt._minimumAliasedLineWidth=Cesium.ContextLimits._minimumAliasedLineWidth,gt._maximumAliasedLineWidth=Cesium.ContextLimits._maximumAliasedLineWidth,gt._minimumAliasedPointSize=Cesium.ContextLimits._minimumAliasedPointSize,gt._maximumAliasedPointSize=Cesium.ContextLimits._maximumAliasedPointSize,gt._maximumViewportWidth=Cesium.ContextLimits._maximumViewportWidth,gt._maximumViewportHeight=Cesium.ContextLimits._maximumViewportHeight,gt._highpFloatSupported=Cesium.ContextLimits._highpFloatSupported,gt._highpIntSupported=Cesium.ContextLimits._highpIntSupported,gt._maximumTextureFilterAnisotropy=Cesium.ContextLimits._maximumTextureFilterAnisotropy,gt._maximumDrawBuffers=Cesium.ContextLimits._maximumDrawBuffers,gt._maximumColorAttachments=Cesium.ContextLimits._maximumColorAttachments}var Dw=Iw;function ae(e,t,n){this.x=E(e,0),this.y=E(t,0),this.z=E(n,0)}ae.fromSpherical=function(e,t){p(t)||(t=new ae);let n=e.clock,i=e.cone,o=E(e.magnitude,1),r=o*Math.sin(i);return t.x=r*Math.cos(n),t.y=r*Math.sin(n),t.z=o*Math.cos(i),t};ae.fromElements=function(e,t,n,i){return p(i)?(i.x=e,i.y=t,i.z=n,i):new ae(e,t,n)};ae.clone=function(e,t){if(p(e))return p(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new ae(e.x,e.y,e.z)};ae.fromCartesian4=ae.clone;ae.packedLength=3;ae.pack=function(e,t,n){return n=E(n,0),t[n++]=e.x,t[n++]=e.y,t[n]=e.z,t};ae.unpack=function(e,t,n){return t=E(t,0),p(n)||(n=new ae),n.x=e[t++],n.y=e[t++],n.z=e[t],n};ae.packArray=function(e,t){let n=e.length,i=n*3;p(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)ae.pack(e[o],t,o*3);return t};ae.unpackArray=function(e,t){let n=e.length;p(t)?t.length=n/3:t=new Array(n/3);for(let i=0;i<n;i+=3){let o=i/3;t[o]=ae.unpack(e,i,t[o])}return t};ae.fromArray=ae.unpack;ae.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)};ae.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)};ae.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n};ae.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n};ae.clamp=function(e,t,n,i){let o=k.clamp(e.x,t.x,n.x),r=k.clamp(e.y,t.y,n.y),s=k.clamp(e.z,t.z,n.z);return i.x=o,i.y=r,i.z=s,i};ae.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z};ae.magnitude=function(e){return Math.sqrt(ae.magnitudeSquared(e))};var Ic=new ae;ae.distance=function(e,t){return ae.subtract(e,t,Ic),ae.magnitude(Ic)};ae.distanceSquared=function(e,t){return ae.subtract(e,t,Ic),ae.magnitudeSquared(Ic)};ae.normalize=function(e,t){let n=ae.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t};ae.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z};ae.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n};ae.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n};ae.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n};ae.subtract=function(e,t,n){return p(n)||(n=new ae),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n};ae.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n};ae.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n};ae.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t};ae.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var Qm=new ae;ae.lerp=function(e,t,n,i){return ae.multiplyByScalar(t,n,Qm),i=ae.multiplyByScalar(e,1-n,i),ae.add(Qm,i,i)};var Oc=new ae,mf=new ae;ae.angleBetween=function(e,t){ae.normalize(e,Oc),ae.normalize(t,mf);let n=ae.dot(Oc,mf),i=ae.magnitude(ae.cross(Oc,mf,Oc));return Math.atan2(i,n)};var Mw=new ae;ae.mostOrthogonalAxis=function(e,t){let n=ae.normalize(e,Mw);return ae.abs(n,n),n.x<=n.y?n.x<=n.z?t=ae.clone(ae.UNIT_X,t):t=ae.clone(ae.UNIT_Z,t):n.y<=n.z?t=ae.clone(ae.UNIT_Y,t):t=ae.clone(ae.UNIT_Z,t),t};ae.projectVector=function(e,t,n){let i=ae.dot(e,t)/ae.dot(t,t);return ae.multiplyByScalar(t,i,n)};ae.equals=function(e,t){return e===t||p(e)&&p(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z};ae.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]};ae.equalsEpsilon=function(e,t,n,i){return e===t||p(e)&&p(t)&&k.equalsEpsilon(e.x,t.x,n,i)&&k.equalsEpsilon(e.y,t.y,n,i)&&k.equalsEpsilon(e.z,t.z,n,i)};ae.cross=function(e,t,n){let i=e.x,o=e.y,r=e.z,s=t.x,a=t.y,c=t.z,l=o*c-r*a,d=r*s-i*c,h=i*a-o*s;return n.x=l,n.y=d,n.z=h,n};ae.midpoint=function(e,t,n){return n.x=(e.x+t.x)*.5,n.y=(e.y+t.y)*.5,n.z=(e.z+t.z)*.5,n};ae.fromDegrees=function(e,t,n,i,o){return e=k.toRadians(e),t=k.toRadians(t),ae.fromRadians(e,t,n,i,o)};var ii=new ae,rs=new ae;ae.wgs84RadiiSquared=new ae(6378137*6378137,6378137*6378137,6356752314245179e-9*6356752314245179e-9);ae.fromRadians=function(e,t,n,i,o){n=E(n,0);let r=p(i)?i.radiiSquared:this.wgs84RadiiSquared,s=Math.cos(t);ii.x=s*Math.cos(e),ii.y=s*Math.sin(e),ii.z=Math.sin(t),ii=ae.normalize(ii,ii),ae.multiplyComponents(r,ii,rs);let a=Math.sqrt(ae.dot(ii,rs));return rs=ae.divideByScalar(rs,a,rs),ii=ae.multiplyByScalar(ii,n,ii),p(o)||(o=new ae),ae.add(rs,ii,o)};ae.fromDegreesArray=function(e,t,n){let i=e.length;p(n)?n.length=i/2:n=new Array(i/2);for(let o=0;o<i;o+=2){let r=e[o],s=e[o+1],a=o/2;n[a]=ae.fromDegrees(r,s,0,t,n[a])}return n};ae.fromRadiansArray=function(e,t,n){let i=e.length;p(n)?n.length=i/2:n=new Array(i/2);for(let o=0;o<i;o+=2){let r=e[o],s=e[o+1],a=o/2;n[a]=ae.fromRadians(r,s,0,t,n[a])}return n};ae.fromDegreesArrayHeights=function(e,t,n){let i=e.length;p(n)?n.length=i/3:n=new Array(i/3);for(let o=0;o<i;o+=3){let r=e[o],s=e[o+1],a=e[o+2],c=o/3;n[c]=ae.fromDegrees(r,s,a,t,n[c])}return n};ae.fromRadiansArrayHeights=function(e,t,n){let i=e.length;p(n)?n.length=i/3:n=new Array(i/3);for(let o=0;o<i;o+=3){let r=e[o],s=e[o+1],a=e[o+2],c=o/3;n[c]=ae.fromRadians(r,s,a,t,n[c])}return n};ae.ZERO=Object.freeze(new ae(0,0,0));ae.ONE=Object.freeze(new ae(1,1,1));ae.UNIT_X=Object.freeze(new ae(1,0,0));ae.UNIT_Y=Object.freeze(new ae(0,1,0));ae.UNIT_Z=Object.freeze(new ae(0,0,1));ae.prototype.clone=function(e){return ae.clone(this,e)};ae.prototype.equals=function(e){return ae.equals(this,e)};ae.prototype.equalsEpsilon=function(e,t,n){return ae.equalsEpsilon(this,e,t,n)};ae.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z})`};var y=ae;var zo,Vt={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Vn={};Object.defineProperties(Vn,{element:{get:function(){if(Vn.supportsFullscreen())return document[Vt.fullscreenElement]}},changeEventName:{get:function(){if(Vn.supportsFullscreen())return Vt.fullscreenchange}},errorEventName:{get:function(){if(Vn.supportsFullscreen())return Vt.fullscreenerror}},enabled:{get:function(){if(Vn.supportsFullscreen())return document[Vt.fullscreenEnabled]}},fullscreen:{get:function(){if(Vn.supportsFullscreen())return Vn.element!==null}}});Vn.supportsFullscreen=function(){if(p(zo))return zo;zo=!1;let e=document.body;if(typeof e.requestFullscreen=="function")return Vt.requestFullscreen="requestFullscreen",Vt.exitFullscreen="exitFullscreen",Vt.fullscreenEnabled="fullscreenEnabled",Vt.fullscreenElement="fullscreenElement",Vt.fullscreenchange="fullscreenchange",Vt.fullscreenerror="fullscreenerror",zo=!0,zo;let t=["webkit","moz","o","ms","khtml"],n;for(let i=0,o=t.length;i<o;++i){let r=t[i];n=`${r}RequestFullscreen`,typeof e[n]=="function"?(Vt.requestFullscreen=n,zo=!0):(n=`${r}RequestFullScreen`,typeof e[n]=="function"&&(Vt.requestFullscreen=n,zo=!0)),n=`${r}ExitFullscreen`,typeof document[n]=="function"?Vt.exitFullscreen=n:(n=`${r}CancelFullScreen`,typeof document[n]=="function"&&(Vt.exitFullscreen=n)),n=`${r}FullscreenEnabled`,document[n]!==void 0?Vt.fullscreenEnabled=n:(n=`${r}FullScreenEnabled`,document[n]!==void 0&&(Vt.fullscreenEnabled=n)),n=`${r}FullscreenElement`,document[n]!==void 0?Vt.fullscreenElement=n:(n=`${r}FullScreenElement`,document[n]!==void 0&&(Vt.fullscreenElement=n)),n=`${r}fullscreenchange`,document[`on${n}`]!==void 0&&(r==="ms"&&(n="MSFullscreenChange"),Vt.fullscreenchange=n),n=`${r}fullscreenerror`,document[`on${n}`]!==void 0&&(r==="ms"&&(n="MSFullscreenError"),Vt.fullscreenerror=n)}return zo};Vn.requestFullscreen=function(e,t){Vn.supportsFullscreen()&&e[Vt.requestFullscreen]({vrDisplay:t})};Vn.exitFullscreen=function(){Vn.supportsFullscreen()&&document[Vt.exitFullscreen]()};Vn._names=Vt;var Jm=Vn;var bn;typeof navigator<"u"?bn=navigator:bn={};function ar(e){let t=e.split(".");for(let n=0,i=t.length;n<i;++n)t[n]=parseInt(t[n],10);return t}var Dc,e0;function bf(){if(!p(Dc)&&(Dc=!1,!Fc())){let e=/ Chrome\/([\.0-9]+)/.exec(bn.userAgent);e!==null&&(Dc=!0,e0=ar(e[1]))}return Dc}function zw(){return bf()&&e0}var Mc,t0;function n0(){if(!p(Mc)&&(Mc=!1,!bf()&&!Fc()&&/ Safari\/[\.0-9]+/.test(bn.userAgent))){let e=/ Version\/([\.0-9]+)/.exec(bn.userAgent);e!==null&&(Mc=!0,t0=ar(e[1]))}return Mc}function Nw(){return n0()&&t0}var zc,vf;function i0(){if(!p(zc)){zc=!1;let e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(bn.userAgent);e!==null&&(zc=!0,vf=ar(e[1]),vf.isNightly=!!e[2])}return zc}function Lw(){return i0()&&vf}var aa,Cf;function o0(){if(!p(aa)){aa=!1;let e;bn.appName==="Microsoft Internet Explorer"?(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(bn.userAgent),e!==null&&(aa=!0,Cf=ar(e[1]))):bn.appName==="Netscape"&&(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(bn.userAgent),e!==null&&(aa=!0,Cf=ar(e[1])))}return aa}function Bw(){return o0()&&Cf}var Nc,r0;function Fc(){if(!p(Nc)){Nc=!1;let e=/ Edg\/([\.0-9]+)/.exec(bn.userAgent);e!==null&&(Nc=!0,r0=ar(e[1]))}return Nc}function Fw(){return Fc()&&r0}var Lc,s0;function Tf(){if(!p(Lc)){Lc=!1;let e=/Firefox\/([\.0-9]+)/.exec(bn.userAgent);e!==null&&(Lc=!0,s0=ar(e[1]))}return Lc}var gf;function Vw(){return p(gf)||(gf=/Windows/i.test(bn.appVersion)),gf}var yf;function Uw(){return p(yf)||(yf=navigator.platform==="iPhone"||navigator.platform==="iPod"||navigator.platform==="iPad"),yf}function kw(){return Tf()&&s0}var _f;function Gw(){return p(_f)||(_f=!Tf()&&typeof PointerEvent<"u"&&(!p(bn.pointerEnabled)||bn.pointerEnabled)),_f}var a0,Bc;function c0(){if(!p(Bc)){let e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");let t=e.style.imageRendering;Bc=p(t)&&t!=="",Bc&&(a0=t)}return Bc}function Hw(){return c0()?a0:void 0}function In(){return In._result}In._promise=void 0;In._result=void 0;In.initialize=function(){return p(In._promise)||(In._promise=new Promise(e=>{let t=new Image;t.onload=function(){In._result=t.width>0&&t.height>0,e(In._result)},t.onerror=function(){In._result=!1,e(In._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"})),In._promise};Object.defineProperties(In,{initialized:{get:function(){return p(In._result)}}});var ss=[];typeof ArrayBuffer<"u"&&(ss.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),typeof Uint8ClampedArray<"u"&&ss.push(Uint8ClampedArray),typeof Uint8ClampedArray<"u"&&ss.push(Uint8ClampedArray),typeof BigInt64Array<"u"&&ss.push(BigInt64Array),typeof BigUint64Array<"u"&&ss.push(BigUint64Array));var gi={isChrome:bf,chromeVersion:zw,isSafari:n0,safariVersion:Nw,isWebkit:i0,webkitVersion:Lw,isInternetExplorer:o0,internetExplorerVersion:Bw,isEdge:Fc,edgeVersion:Fw,isFirefox:Tf,firefoxVersion:kw,isWindows:Vw,isIPadOrIOS:Uw,hardwareConcurrency:E(bn.hardwareConcurrency,3),supportsPointerEvents:Gw,supportsImageRenderingPixelated:c0,supportsWebP:In,imageRenderingValue:Hw,typedArrayTypes:ss};gi.supportsBasis=function(e){return gi.supportsWebAssembly()&&e.context.supportsBasis};gi.supportsFullscreen=function(){return Jm.supportsFullscreen()};gi.supportsTypedArrays=function(){return typeof ArrayBuffer<"u"};gi.supportsBigInt64Array=function(){return typeof BigInt64Array<"u"};gi.supportsBigUint64Array=function(){return typeof BigUint64Array<"u"};gi.supportsBigInt=function(){return typeof BigInt<"u"};gi.supportsWebWorkers=function(){return typeof Worker<"u"};gi.supportsWebAssembly=function(){return typeof WebAssembly<"u"};gi.supportsWebgl2=function(e){return e.context.webgl2};var yi=gi;function Ef(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n*6<1?e+(t-e)*6*n:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}function O(e,t,n,i){this.red=E(e,1),this.green=E(t,1),this.blue=E(n,1),this.alpha=E(i,1)}O.fromCartesian4=function(e,t){return p(t)?(t.red=e.x,t.green=e.y,t.blue=e.z,t.alpha=e.w,t):new O(e.x,e.y,e.z,e.w)};O.fromBytes=function(e,t,n,i,o){return e=O.byteToFloat(E(e,255)),t=O.byteToFloat(E(t,255)),n=O.byteToFloat(E(n,255)),i=O.byteToFloat(E(i,255)),p(o)?(o.red=e,o.green=t,o.blue=n,o.alpha=i,o):new O(e,t,n,i)};O.fromAlpha=function(e,t,n){return p(n)?(n.red=e.red,n.green=e.green,n.blue=e.blue,n.alpha=t,n):new O(e.red,e.green,e.blue,t)};var wf,Sf,io;yi.supportsTypedArrays()&&(wf=new ArrayBuffer(4),Sf=new Uint32Array(wf),io=new Uint8Array(wf));O.fromRgba=function(e,t){return Sf[0]=e,O.fromBytes(io[0],io[1],io[2],io[3],t)};O.fromHsl=function(e,t,n,i,o){e=E(e,0)%1,t=E(t,0),n=E(n,0),i=E(i,1);let r=n,s=n,a=n;if(t!==0){let c;n<.5?c=n*(1+t):c=n+t-n*t;let l=2*n-c;r=Ef(l,c,e+1/3),s=Ef(l,c,e),a=Ef(l,c,e-1/3)}return p(o)?(o.red=r,o.green=s,o.blue=a,o.alpha=i,o):new O(r,s,a,i)};O.fromRandom=function(e,t){e=E(e,E.EMPTY_OBJECT);let n=e.red;if(!p(n)){let s=E(e.minimumRed,0),a=E(e.maximumRed,1);n=s+k.nextRandomNumber()*(a-s)}let i=e.green;if(!p(i)){let s=E(e.minimumGreen,0),a=E(e.maximumGreen,1);i=s+k.nextRandomNumber()*(a-s)}let o=e.blue;if(!p(o)){let s=E(e.minimumBlue,0),a=E(e.maximumBlue,1);o=s+k.nextRandomNumber()*(a-s)}let r=e.alpha;if(!p(r)){let s=E(e.minimumAlpha,0),a=E(e.maximumAlpha,1);r=s+k.nextRandomNumber()*(a-s)}return p(t)?(t.red=n,t.green=i,t.blue=o,t.alpha=r,t):new O(n,i,o,r)};var jw=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Ww=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,qw=/^rgba?\(\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)(?:\s*,\s*([0-9.]+))?\s*\)$/i,Yw=/^hsla?\(\s*([0-9.]+)\s*,\s*([0-9.]+%)\s*,\s*([0-9.]+%)(?:\s*,\s*([0-9.]+))?\s*\)$/i;O.fromCssColorString=function(e,t){p(t)||(t=new O),e=e.replace(/\s/g,"");let n=O[e.toUpperCase()];if(p(n))return O.clone(n,t),t;let i=jw.exec(e);return i!==null?(t.red=parseInt(i[1],16)/15,t.green=parseInt(i[2],16)/15,t.blue=parseInt(i[3],16)/15,t.alpha=parseInt(E(i[4],"f"),16)/15,t):(i=Ww.exec(e),i!==null?(t.red=parseInt(i[1],16)/255,t.green=parseInt(i[2],16)/255,t.blue=parseInt(i[3],16)/255,t.alpha=parseInt(E(i[4],"ff"),16)/255,t):(i=qw.exec(e),i!==null?(t.red=parseFloat(i[1])/(i[1].substr(-1)==="%"?100:255),t.green=parseFloat(i[2])/(i[2].substr(-1)==="%"?100:255),t.blue=parseFloat(i[3])/(i[3].substr(-1)==="%"?100:255),t.alpha=parseFloat(E(i[4],"1.0")),t):(i=Yw.exec(e),i!==null?O.fromHsl(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(E(i[4],"1.0")),t):(t=void 0,t))))};O.packedLength=4;O.pack=function(e,t,n){return n=E(n,0),t[n++]=e.red,t[n++]=e.green,t[n++]=e.blue,t[n]=e.alpha,t};O.unpack=function(e,t,n){return t=E(t,0),p(n)||(n=new O),n.red=e[t++],n.green=e[t++],n.blue=e[t++],n.alpha=e[t],n};O.byteToFloat=function(e){return e/255};O.floatToByte=function(e){return e===1?255:e*256|0};O.clone=function(e,t){if(p(e))return p(t)?(t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha,t):new O(e.red,e.green,e.blue,e.alpha)};O.equals=function(e,t){return e===t||p(e)&&p(t)&&e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha};O.equalsArray=function(e,t,n){return e.red===t[n]&&e.green===t[n+1]&&e.blue===t[n+2]&&e.alpha===t[n+3]};O.prototype.clone=function(e){return O.clone(this,e)};O.prototype.equals=function(e){return O.equals(this,e)};O.prototype.equalsEpsilon=function(e,t){return this===e||p(e)&&Math.abs(this.red-e.red)<=t&&Math.abs(this.green-e.green)<=t&&Math.abs(this.blue-e.blue)<=t&&Math.abs(this.alpha-e.alpha)<=t};O.prototype.toString=function(){return`(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`};O.prototype.toCssColorString=function(){let e=O.floatToByte(this.red),t=O.floatToByte(this.green),n=O.floatToByte(this.blue);return this.alpha===1?`rgb(${e},${t},${n})`:`rgba(${e},${t},${n},${this.alpha})`};O.prototype.toCssHexString=function(){let e=O.floatToByte(this.red).toString(16);e.length<2&&(e=`0${e}`);let t=O.floatToByte(this.green).toString(16);t.length<2&&(t=`0${t}`);let n=O.floatToByte(this.blue).toString(16);if(n.length<2&&(n=`0${n}`),this.alpha<1){let i=O.floatToByte(this.alpha).toString(16);return i.length<2&&(i=`0${i}`),`#${e}${t}${n}${i}`}return`#${e}${t}${n}`};O.prototype.toBytes=function(e){let t=O.floatToByte(this.red),n=O.floatToByte(this.green),i=O.floatToByte(this.blue),o=O.floatToByte(this.alpha);return p(e)?(e[0]=t,e[1]=n,e[2]=i,e[3]=o,e):[t,n,i,o]};O.prototype.toRgba=function(){return io[0]=O.floatToByte(this.red),io[1]=O.floatToByte(this.green),io[2]=O.floatToByte(this.blue),io[3]=O.floatToByte(this.alpha),Sf[0]};O.prototype.brighten=function(e,t){return e=1-e,t.red=1-(1-this.red)*e,t.green=1-(1-this.green)*e,t.blue=1-(1-this.blue)*e,t.alpha=this.alpha,t};O.prototype.darken=function(e,t){return e=1-e,t.red=this.red*e,t.green=this.green*e,t.blue=this.blue*e,t.alpha=this.alpha,t};O.prototype.withAlpha=function(e,t){return O.fromAlpha(this,e,t)};O.add=function(e,t,n){return n.red=e.red+t.red,n.green=e.green+t.green,n.blue=e.blue+t.blue,n.alpha=e.alpha+t.alpha,n};O.subtract=function(e,t,n){return n.red=e.red-t.red,n.green=e.green-t.green,n.blue=e.blue-t.blue,n.alpha=e.alpha-t.alpha,n};O.multiply=function(e,t,n){return n.red=e.red*t.red,n.green=e.green*t.green,n.blue=e.blue*t.blue,n.alpha=e.alpha*t.alpha,n};O.divide=function(e,t,n){return n.red=e.red/t.red,n.green=e.green/t.green,n.blue=e.blue/t.blue,n.alpha=e.alpha/t.alpha,n};O.mod=function(e,t,n){return n.red=e.red%t.red,n.green=e.green%t.green,n.blue=e.blue%t.blue,n.alpha=e.alpha%t.alpha,n};O.lerp=function(e,t,n,i){return i.red=k.lerp(e.red,t.red,n),i.green=k.lerp(e.green,t.green,n),i.blue=k.lerp(e.blue,t.blue,n),i.alpha=k.lerp(e.alpha,t.alpha,n),i};O.multiplyByScalar=function(e,t,n){return n.red=e.red*t,n.green=e.green*t,n.blue=e.blue*t,n.alpha=e.alpha*t,n};O.divideByScalar=function(e,t,n){return n.red=e.red/t,n.green=e.green/t,n.blue=e.blue/t,n.alpha=e.alpha/t,n};O.ALICEBLUE=Object.freeze(O.fromCssColorString("#F0F8FF"));O.ANTIQUEWHITE=Object.freeze(O.fromCssColorString("#FAEBD7"));O.AQUA=Object.freeze(O.fromCssColorString("#00FFFF"));O.AQUAMARINE=Object.freeze(O.fromCssColorString("#7FFFD4"));O.AZURE=Object.freeze(O.fromCssColorString("#F0FFFF"));O.BEIGE=Object.freeze(O.fromCssColorString("#F5F5DC"));O.BISQUE=Object.freeze(O.fromCssColorString("#FFE4C4"));O.BLACK=Object.freeze(O.fromCssColorString("#000000"));O.BLANCHEDALMOND=Object.freeze(O.fromCssColorString("#FFEBCD"));O.BLUE=Object.freeze(O.fromCssColorString("#0000FF"));O.BLUEVIOLET=Object.freeze(O.fromCssColorString("#8A2BE2"));O.BROWN=Object.freeze(O.fromCssColorString("#A52A2A"));O.BURLYWOOD=Object.freeze(O.fromCssColorString("#DEB887"));O.CADETBLUE=Object.freeze(O.fromCssColorString("#5F9EA0"));O.CHARTREUSE=Object.freeze(O.fromCssColorString("#7FFF00"));O.CHOCOLATE=Object.freeze(O.fromCssColorString("#D2691E"));O.CORAL=Object.freeze(O.fromCssColorString("#FF7F50"));O.CORNFLOWERBLUE=Object.freeze(O.fromCssColorString("#6495ED"));O.CORNSILK=Object.freeze(O.fromCssColorString("#FFF8DC"));O.CRIMSON=Object.freeze(O.fromCssColorString("#DC143C"));O.CYAN=Object.freeze(O.fromCssColorString("#00FFFF"));O.DARKBLUE=Object.freeze(O.fromCssColorString("#00008B"));O.DARKCYAN=Object.freeze(O.fromCssColorString("#008B8B"));O.DARKGOLDENROD=Object.freeze(O.fromCssColorString("#B8860B"));O.DARKGRAY=Object.freeze(O.fromCssColorString("#A9A9A9"));O.DARKGREEN=Object.freeze(O.fromCssColorString("#006400"));O.DARKGREY=O.DARKGRAY;O.DARKKHAKI=Object.freeze(O.fromCssColorString("#BDB76B"));O.DARKMAGENTA=Object.freeze(O.fromCssColorString("#8B008B"));O.DARKOLIVEGREEN=Object.freeze(O.fromCssColorString("#556B2F"));O.DARKORANGE=Object.freeze(O.fromCssColorString("#FF8C00"));O.DARKORCHID=Object.freeze(O.fromCssColorString("#9932CC"));O.DARKRED=Object.freeze(O.fromCssColorString("#8B0000"));O.DARKSALMON=Object.freeze(O.fromCssColorString("#E9967A"));O.DARKSEAGREEN=Object.freeze(O.fromCssColorString("#8FBC8F"));O.DARKSLATEBLUE=Object.freeze(O.fromCssColorString("#483D8B"));O.DARKSLATEGRAY=Object.freeze(O.fromCssColorString("#2F4F4F"));O.DARKSLATEGREY=O.DARKSLATEGRAY;O.DARKTURQUOISE=Object.freeze(O.fromCssColorString("#00CED1"));O.DARKVIOLET=Object.freeze(O.fromCssColorString("#9400D3"));O.DEEPPINK=Object.freeze(O.fromCssColorString("#FF1493"));O.DEEPSKYBLUE=Object.freeze(O.fromCssColorString("#00BFFF"));O.DIMGRAY=Object.freeze(O.fromCssColorString("#696969"));O.DIMGREY=O.DIMGRAY;O.DODGERBLUE=Object.freeze(O.fromCssColorString("#1E90FF"));O.FIREBRICK=Object.freeze(O.fromCssColorString("#B22222"));O.FLORALWHITE=Object.freeze(O.fromCssColorString("#FFFAF0"));O.FORESTGREEN=Object.freeze(O.fromCssColorString("#228B22"));O.FUCHSIA=Object.freeze(O.fromCssColorString("#FF00FF"));O.GAINSBORO=Object.freeze(O.fromCssColorString("#DCDCDC"));O.GHOSTWHITE=Object.freeze(O.fromCssColorString("#F8F8FF"));O.GOLD=Object.freeze(O.fromCssColorString("#FFD700"));O.GOLDENROD=Object.freeze(O.fromCssColorString("#DAA520"));O.GRAY=Object.freeze(O.fromCssColorString("#808080"));O.GREEN=Object.freeze(O.fromCssColorString("#008000"));O.GREENYELLOW=Object.freeze(O.fromCssColorString("#ADFF2F"));O.GREY=O.GRAY;O.HONEYDEW=Object.freeze(O.fromCssColorString("#F0FFF0"));O.HOTPINK=Object.freeze(O.fromCssColorString("#FF69B4"));O.INDIANRED=Object.freeze(O.fromCssColorString("#CD5C5C"));O.INDIGO=Object.freeze(O.fromCssColorString("#4B0082"));O.IVORY=Object.freeze(O.fromCssColorString("#FFFFF0"));O.KHAKI=Object.freeze(O.fromCssColorString("#F0E68C"));O.LAVENDER=Object.freeze(O.fromCssColorString("#E6E6FA"));O.LAVENDAR_BLUSH=Object.freeze(O.fromCssColorString("#FFF0F5"));O.LAWNGREEN=Object.freeze(O.fromCssColorString("#7CFC00"));O.LEMONCHIFFON=Object.freeze(O.fromCssColorString("#FFFACD"));O.LIGHTBLUE=Object.freeze(O.fromCssColorString("#ADD8E6"));O.LIGHTCORAL=Object.freeze(O.fromCssColorString("#F08080"));O.LIGHTCYAN=Object.freeze(O.fromCssColorString("#E0FFFF"));O.LIGHTGOLDENRODYELLOW=Object.freeze(O.fromCssColorString("#FAFAD2"));O.LIGHTGRAY=Object.freeze(O.fromCssColorString("#D3D3D3"));O.LIGHTGREEN=Object.freeze(O.fromCssColorString("#90EE90"));O.LIGHTGREY=O.LIGHTGRAY;O.LIGHTPINK=Object.freeze(O.fromCssColorString("#FFB6C1"));O.LIGHTSEAGREEN=Object.freeze(O.fromCssColorString("#20B2AA"));O.LIGHTSKYBLUE=Object.freeze(O.fromCssColorString("#87CEFA"));O.LIGHTSLATEGRAY=Object.freeze(O.fromCssColorString("#778899"));O.LIGHTSLATEGREY=O.LIGHTSLATEGRAY;O.LIGHTSTEELBLUE=Object.freeze(O.fromCssColorString("#B0C4DE"));O.LIGHTYELLOW=Object.freeze(O.fromCssColorString("#FFFFE0"));O.LIME=Object.freeze(O.fromCssColorString("#00FF00"));O.LIMEGREEN=Object.freeze(O.fromCssColorString("#32CD32"));O.LINEN=Object.freeze(O.fromCssColorString("#FAF0E6"));O.MAGENTA=Object.freeze(O.fromCssColorString("#FF00FF"));O.MAROON=Object.freeze(O.fromCssColorString("#800000"));O.MEDIUMAQUAMARINE=Object.freeze(O.fromCssColorString("#66CDAA"));O.MEDIUMBLUE=Object.freeze(O.fromCssColorString("#0000CD"));O.MEDIUMORCHID=Object.freeze(O.fromCssColorString("#BA55D3"));O.MEDIUMPURPLE=Object.freeze(O.fromCssColorString("#9370DB"));O.MEDIUMSEAGREEN=Object.freeze(O.fromCssColorString("#3CB371"));O.MEDIUMSLATEBLUE=Object.freeze(O.fromCssColorString("#7B68EE"));O.MEDIUMSPRINGGREEN=Object.freeze(O.fromCssColorString("#00FA9A"));O.MEDIUMTURQUOISE=Object.freeze(O.fromCssColorString("#48D1CC"));O.MEDIUMVIOLETRED=Object.freeze(O.fromCssColorString("#C71585"));O.MIDNIGHTBLUE=Object.freeze(O.fromCssColorString("#191970"));O.MINTCREAM=Object.freeze(O.fromCssColorString("#F5FFFA"));O.MISTYROSE=Object.freeze(O.fromCssColorString("#FFE4E1"));O.MOCCASIN=Object.freeze(O.fromCssColorString("#FFE4B5"));O.NAVAJOWHITE=Object.freeze(O.fromCssColorString("#FFDEAD"));O.NAVY=Object.freeze(O.fromCssColorString("#000080"));O.OLDLACE=Object.freeze(O.fromCssColorString("#FDF5E6"));O.OLIVE=Object.freeze(O.fromCssColorString("#808000"));O.OLIVEDRAB=Object.freeze(O.fromCssColorString("#6B8E23"));O.ORANGE=Object.freeze(O.fromCssColorString("#FFA500"));O.ORANGERED=Object.freeze(O.fromCssColorString("#FF4500"));O.ORCHID=Object.freeze(O.fromCssColorString("#DA70D6"));O.PALEGOLDENROD=Object.freeze(O.fromCssColorString("#EEE8AA"));O.PALEGREEN=Object.freeze(O.fromCssColorString("#98FB98"));O.PALETURQUOISE=Object.freeze(O.fromCssColorString("#AFEEEE"));O.PALEVIOLETRED=Object.freeze(O.fromCssColorString("#DB7093"));O.PAPAYAWHIP=Object.freeze(O.fromCssColorString("#FFEFD5"));O.PEACHPUFF=Object.freeze(O.fromCssColorString("#FFDAB9"));O.PERU=Object.freeze(O.fromCssColorString("#CD853F"));O.PINK=Object.freeze(O.fromCssColorString("#FFC0CB"));O.PLUM=Object.freeze(O.fromCssColorString("#DDA0DD"));O.POWDERBLUE=Object.freeze(O.fromCssColorString("#B0E0E6"));O.PURPLE=Object.freeze(O.fromCssColorString("#800080"));O.RED=Object.freeze(O.fromCssColorString("#FF0000"));O.ROSYBROWN=Object.freeze(O.fromCssColorString("#BC8F8F"));O.ROYALBLUE=Object.freeze(O.fromCssColorString("#4169E1"));O.SADDLEBROWN=Object.freeze(O.fromCssColorString("#8B4513"));O.SALMON=Object.freeze(O.fromCssColorString("#FA8072"));O.SANDYBROWN=Object.freeze(O.fromCssColorString("#F4A460"));O.SEAGREEN=Object.freeze(O.fromCssColorString("#2E8B57"));O.SEASHELL=Object.freeze(O.fromCssColorString("#FFF5EE"));O.SIENNA=Object.freeze(O.fromCssColorString("#A0522D"));O.SILVER=Object.freeze(O.fromCssColorString("#C0C0C0"));O.SKYBLUE=Object.freeze(O.fromCssColorString("#87CEEB"));O.SLATEBLUE=Object.freeze(O.fromCssColorString("#6A5ACD"));O.SLATEGRAY=Object.freeze(O.fromCssColorString("#708090"));O.SLATEGREY=O.SLATEGRAY;O.SNOW=Object.freeze(O.fromCssColorString("#FFFAFA"));O.SPRINGGREEN=Object.freeze(O.fromCssColorString("#00FF7F"));O.STEELBLUE=Object.freeze(O.fromCssColorString("#4682B4"));O.TAN=Object.freeze(O.fromCssColorString("#D2B48C"));O.TEAL=Object.freeze(O.fromCssColorString("#008080"));O.THISTLE=Object.freeze(O.fromCssColorString("#D8BFD8"));O.TOMATO=Object.freeze(O.fromCssColorString("#FF6347"));O.TURQUOISE=Object.freeze(O.fromCssColorString("#40E0D0"));O.VIOLET=Object.freeze(O.fromCssColorString("#EE82EE"));O.WHEAT=Object.freeze(O.fromCssColorString("#F5DEB3"));O.WHITE=Object.freeze(O.fromCssColorString("#FFFFFF"));O.WHITESMOKE=Object.freeze(O.fromCssColorString("#F5F5F5"));O.YELLOW=Object.freeze(O.fromCssColorString("#FFFF00"));O.YELLOWGREEN=Object.freeze(O.fromCssColorString("#9ACD32"));O.TRANSPARENT=Object.freeze(new O(0,0,0,0));var Tt=O;var Zw={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_ASTC_4x4_WEBGL:37808,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGBA_BPTC_UNORM:36492,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047},L=Object.freeze(Zw);var Le={BYTE:L.BYTE,UNSIGNED_BYTE:L.UNSIGNED_BYTE,SHORT:L.SHORT,UNSIGNED_SHORT:L.UNSIGNED_SHORT,INT:L.INT,UNSIGNED_INT:L.UNSIGNED_INT,FLOAT:L.FLOAT,DOUBLE:L.DOUBLE};Le.getSizeInBytes=function(e){switch(e){case Le.BYTE:return Int8Array.BYTES_PER_ELEMENT;case Le.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Le.SHORT:return Int16Array.BYTES_PER_ELEMENT;case Le.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Le.INT:return Int32Array.BYTES_PER_ELEMENT;case Le.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Le.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case Le.DOUBLE:return Float64Array.BYTES_PER_ELEMENT}};Le.fromTypedArray=function(e){if(e instanceof Int8Array)return Le.BYTE;if(e instanceof Uint8Array)return Le.UNSIGNED_BYTE;if(e instanceof Int16Array)return Le.SHORT;if(e instanceof Uint16Array)return Le.UNSIGNED_SHORT;if(e instanceof Int32Array)return Le.INT;if(e instanceof Uint32Array)return Le.UNSIGNED_INT;if(e instanceof Float32Array)return Le.FLOAT;if(e instanceof Float64Array)return Le.DOUBLE};Le.validate=function(e){return p(e)&&(e===Le.BYTE||e===Le.UNSIGNED_BYTE||e===Le.SHORT||e===Le.UNSIGNED_SHORT||e===Le.INT||e===Le.UNSIGNED_INT||e===Le.FLOAT||e===Le.DOUBLE)};Le.createTypedArray=function(e,t){switch(e){case Le.BYTE:return new Int8Array(t);case Le.UNSIGNED_BYTE:return new Uint8Array(t);case Le.SHORT:return new Int16Array(t);case Le.UNSIGNED_SHORT:return new Uint16Array(t);case Le.INT:return new Int32Array(t);case Le.UNSIGNED_INT:return new Uint32Array(t);case Le.FLOAT:return new Float32Array(t);case Le.DOUBLE:return new Float64Array(t)}};Le.createArrayBufferView=function(e,t,n,i){switch(n=E(n,0),i=E(i,(t.byteLength-n)/Le.getSizeInBytes(e)),e){case Le.BYTE:return new Int8Array(t,n,i);case Le.UNSIGNED_BYTE:return new Uint8Array(t,n,i);case Le.SHORT:return new Int16Array(t,n,i);case Le.UNSIGNED_SHORT:return new Uint16Array(t,n,i);case Le.INT:return new Int32Array(t,n,i);case Le.UNSIGNED_INT:return new Uint32Array(t,n,i);case Le.FLOAT:return new Float32Array(t,n,i);case Le.DOUBLE:return new Float64Array(t,n,i)}};Le.fromName=function(e){switch(e){case"BYTE":return Le.BYTE;case"UNSIGNED_BYTE":return Le.UNSIGNED_BYTE;case"SHORT":return Le.SHORT;case"UNSIGNED_SHORT":return Le.UNSIGNED_SHORT;case"INT":return Le.INT;case"UNSIGNED_INT":return Le.UNSIGNED_INT;case"FLOAT":return Le.FLOAT;case"DOUBLE":return Le.DOUBLE}};var Pe=Object.freeze(Le);function as(e,t,n,i){e=E(e,1),t=E(t,1),n=E(n,1),i=E(i,1),this.value=new Uint8Array([Tt.floatToByte(e),Tt.floatToByte(t),Tt.floatToByte(n),Tt.floatToByte(i)])}Object.defineProperties(as.prototype,{componentDatatype:{get:function(){return Pe.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 4}},normalize:{get:function(){return!0}}});as.fromColor=function(e){return new as(e.red,e.green,e.blue,e.alpha)};as.toValue=function(e,t){return p(t)?e.toBytes(t):new Uint8Array(e.toBytes())};as.equals=function(e,t){return e===t||p(e)&&p(t)&&e.value[0]===t.value[0]&&e.value[1]===t.value[1]&&e.value[2]===t.value[2]&&e.value[3]===t.value[3]};var Vc=as;function ye(e,t,n,i){this.x=E(e,0),this.y=E(t,0),this.z=E(n,0),this.w=E(i,0)}ye.fromElements=function(e,t,n,i,o){return p(o)?(o.x=e,o.y=t,o.z=n,o.w=i,o):new ye(e,t,n,i)};ye.fromColor=function(e,t){return p(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new ye(e.red,e.green,e.blue,e.alpha)};ye.clone=function(e,t){if(p(e))return p(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new ye(e.x,e.y,e.z,e.w)};ye.packedLength=4;ye.pack=function(e,t,n){return n=E(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t};ye.unpack=function(e,t,n){return t=E(t,0),p(n)||(n=new ye),n.x=e[t++],n.y=e[t++],n.z=e[t++],n.w=e[t],n};ye.packArray=function(e,t){let n=e.length,i=n*4;p(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)ye.pack(e[o],t,o*4);return t};ye.unpackArray=function(e,t){let n=e.length;p(t)?t.length=n/4:t=new Array(n/4);for(let i=0;i<n;i+=4){let o=i/4;t[o]=ye.unpack(e,i,t[o])}return t};ye.fromArray=ye.unpack;ye.maximumComponent=function(e){return Math.max(e.x,e.y,e.z,e.w)};ye.minimumComponent=function(e){return Math.min(e.x,e.y,e.z,e.w)};ye.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n.w=Math.min(e.w,t.w),n};ye.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n.w=Math.max(e.w,t.w),n};ye.clamp=function(e,t,n,i){let o=k.clamp(e.x,t.x,n.x),r=k.clamp(e.y,t.y,n.y),s=k.clamp(e.z,t.z,n.z),a=k.clamp(e.w,t.w,n.w);return i.x=o,i.y=r,i.z=s,i.w=a,i};ye.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w};ye.magnitude=function(e){return Math.sqrt(ye.magnitudeSquared(e))};var Uc=new ye;ye.distance=function(e,t){return ye.subtract(e,t,Uc),ye.magnitude(Uc)};ye.distanceSquared=function(e,t){return ye.subtract(e,t,Uc),ye.magnitudeSquared(Uc)};ye.normalize=function(e,t){let n=ye.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t.w=e.w/n,t};ye.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w};ye.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n.w=e.w*t.w,n};ye.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n.w=e.w/t.w,n};ye.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n};ye.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n};ye.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n};ye.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n};ye.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t};ye.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var u0=new ye;ye.lerp=function(e,t,n,i){return ye.multiplyByScalar(t,n,u0),i=ye.multiplyByScalar(e,1-n,i),ye.add(u0,i,i)};var Xw=new ye;ye.mostOrthogonalAxis=function(e,t){let n=ye.normalize(e,Xw);return ye.abs(n,n),n.x<=n.y?n.x<=n.z?n.x<=n.w?t=ye.clone(ye.UNIT_X,t):t=ye.clone(ye.UNIT_W,t):n.z<=n.w?t=ye.clone(ye.UNIT_Z,t):t=ye.clone(ye.UNIT_W,t):n.y<=n.z?n.y<=n.w?t=ye.clone(ye.UNIT_Y,t):t=ye.clone(ye.UNIT_W,t):n.z<=n.w?t=ye.clone(ye.UNIT_Z,t):t=ye.clone(ye.UNIT_W,t),t};ye.equals=function(e,t){return e===t||p(e)&&p(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w};ye.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]&&e.w===t[n+3]};ye.equalsEpsilon=function(e,t,n,i){return e===t||p(e)&&p(t)&&k.equalsEpsilon(e.x,t.x,n,i)&&k.equalsEpsilon(e.y,t.y,n,i)&&k.equalsEpsilon(e.z,t.z,n,i)&&k.equalsEpsilon(e.w,t.w,n,i)};ye.ZERO=Object.freeze(new ye(0,0,0,0));ye.ONE=Object.freeze(new ye(1,1,1,1));ye.UNIT_X=Object.freeze(new ye(1,0,0,0));ye.UNIT_Y=Object.freeze(new ye(0,1,0,0));ye.UNIT_Z=Object.freeze(new ye(0,0,1,0));ye.UNIT_W=Object.freeze(new ye(0,0,0,1));ye.prototype.clone=function(e){return ye.clone(this,e)};ye.prototype.equals=function(e){return ye.equals(this,e)};ye.prototype.equalsEpsilon=function(e,t,n){return ye.equalsEpsilon(this,e,t,n)};ye.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};var xf=new Float32Array(1),Tn=new Uint8Array(xf.buffer),$w=new Uint32Array([287454020]),Kw=new Uint8Array($w.buffer),l0=Kw[0]===68;ye.packFloat=function(e,t){return p(t)||(t=new ye),xf[0]=e,l0?(t.x=Tn[0],t.y=Tn[1],t.z=Tn[2],t.w=Tn[3]):(t.x=Tn[3],t.y=Tn[2],t.z=Tn[1],t.w=Tn[0]),t};ye.unpackFloat=function(e){return l0?(Tn[0]=e.x,Tn[1]=e.y,Tn[2]=e.z,Tn[3]=e.w):(Tn[0]=e.w,Tn[1]=e.z,Tn[2]=e.y,Tn[3]=e.x),xf[0]};var Ie=ye;function ce(e,t,n,i,o,r,s,a,c){this[0]=E(e,0),this[1]=E(i,0),this[2]=E(s,0),this[3]=E(t,0),this[4]=E(o,0),this[5]=E(a,0),this[6]=E(n,0),this[7]=E(r,0),this[8]=E(c,0)}ce.packedLength=9;ce.pack=function(e,t,n){return n=E(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t};ce.unpack=function(e,t,n){return t=E(t,0),p(n)||(n=new ce),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n};ce.packArray=function(e,t){let n=e.length,i=n*9;p(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)ce.pack(e[o],t,o*9);return t};ce.unpackArray=function(e,t){let n=e.length;p(t)?t.length=n/9:t=new Array(n/9);for(let i=0;i<n;i+=9){let o=i/9;t[o]=ce.unpack(e,i,t[o])}return t};ce.clone=function(e,t){if(p(e))return p(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new ce(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])};ce.fromArray=ce.unpack;ce.fromColumnMajorArray=function(e,t){return ce.clone(e,t)};ce.fromRowMajorArray=function(e,t){return p(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new ce(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])};ce.fromQuaternion=function(e,t){let n=e.x*e.x,i=e.x*e.y,o=e.x*e.z,r=e.x*e.w,s=e.y*e.y,a=e.y*e.z,c=e.y*e.w,l=e.z*e.z,d=e.z*e.w,h=e.w*e.w,g=n-s-l+h,C=2*(i-d),b=2*(o+c),w=2*(i+d),R=-n+s-l+h,D=2*(a-r),M=2*(o-c),z=2*(a+r),U=-n-s+l+h;return p(t)?(t[0]=g,t[1]=w,t[2]=M,t[3]=C,t[4]=R,t[5]=z,t[6]=b,t[7]=D,t[8]=U,t):new ce(g,C,b,w,R,D,M,z,U)};ce.fromHeadingPitchRoll=function(e,t){let n=Math.cos(-e.pitch),i=Math.cos(-e.heading),o=Math.cos(e.roll),r=Math.sin(-e.pitch),s=Math.sin(-e.heading),a=Math.sin(e.roll),c=n*i,l=-o*s+a*r*i,d=a*s+o*r*i,h=n*s,g=o*i+a*r*s,C=-a*i+o*r*s,b=-r,w=a*n,R=o*n;return p(t)?(t[0]=c,t[1]=h,t[2]=b,t[3]=l,t[4]=g,t[5]=w,t[6]=d,t[7]=C,t[8]=R,t):new ce(c,l,d,h,g,C,b,w,R)};ce.fromScale=function(e,t){return p(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new ce(e.x,0,0,0,e.y,0,0,0,e.z)};ce.fromUniformScale=function(e,t){return p(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new ce(e,0,0,0,e,0,0,0,e)};ce.fromCrossProduct=function(e,t){return p(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new ce(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)};ce.fromRotationX=function(e,t){let n=Math.cos(e),i=Math.sin(e);return p(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=n,t[5]=i,t[6]=0,t[7]=-i,t[8]=n,t):new ce(1,0,0,0,n,-i,0,i,n)};ce.fromRotationY=function(e,t){let n=Math.cos(e),i=Math.sin(e);return p(t)?(t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=1,t[5]=0,t[6]=i,t[7]=0,t[8]=n,t):new ce(n,0,i,0,1,0,-i,0,n)};ce.fromRotationZ=function(e,t){let n=Math.cos(e),i=Math.sin(e);return p(t)?(t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new ce(n,-i,0,i,n,0,0,0,1)};ce.toArray=function(e,t){return p(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]};ce.getElementIndex=function(e,t){return e*3+t};ce.getColumn=function(e,t,n){let i=t*3,o=e[i],r=e[i+1],s=e[i+2];return n.x=o,n.y=r,n.z=s,n};ce.setColumn=function(e,t,n,i){i=ce.clone(e,i);let o=t*3;return i[o]=n.x,i[o+1]=n.y,i[o+2]=n.z,i};ce.getRow=function(e,t,n){let i=e[t],o=e[t+3],r=e[t+6];return n.x=i,n.y=o,n.z=r,n};ce.setRow=function(e,t,n,i){return i=ce.clone(e,i),i[t]=n.x,i[t+3]=n.y,i[t+6]=n.z,i};var Qw=new y;ce.setScale=function(e,t,n){let i=ce.getScale(e,Qw),o=t.x/i.x,r=t.y/i.y,s=t.z/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*s,n[7]=e[7]*s,n[8]=e[8]*s,n};var Jw=new y;ce.setUniformScale=function(e,t,n){let i=ce.getScale(e,Jw),o=t/i.x,r=t/i.y,s=t/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*s,n[7]=e[7]*s,n[8]=e[8]*s,n};var Af=new y;ce.getScale=function(e,t){return t.x=y.magnitude(y.fromElements(e[0],e[1],e[2],Af)),t.y=y.magnitude(y.fromElements(e[3],e[4],e[5],Af)),t.z=y.magnitude(y.fromElements(e[6],e[7],e[8],Af)),t};var f0=new y;ce.getMaximumScale=function(e){return ce.getScale(e,f0),y.maximumComponent(f0)};var eS=new y;ce.setRotation=function(e,t,n){let i=ce.getScale(e,eS);return n[0]=t[0]*i.x,n[1]=t[1]*i.x,n[2]=t[2]*i.x,n[3]=t[3]*i.y,n[4]=t[4]*i.y,n[5]=t[5]*i.y,n[6]=t[6]*i.z,n[7]=t[7]*i.z,n[8]=t[8]*i.z,n};var tS=new y;ce.getRotation=function(e,t){let n=ce.getScale(e,tS);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.x,t[3]=e[3]/n.y,t[4]=e[4]/n.y,t[5]=e[5]/n.y,t[6]=e[6]/n.z,t[7]=e[7]/n.z,t[8]=e[8]/n.z,t};ce.multiply=function(e,t,n){let i=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],o=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],r=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],s=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],a=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],c=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],l=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],d=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],h=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return n[0]=i,n[1]=o,n[2]=r,n[3]=s,n[4]=a,n[5]=c,n[6]=l,n[7]=d,n[8]=h,n};ce.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n};ce.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n};ce.multiplyByVector=function(e,t,n){let i=t.x,o=t.y,r=t.z,s=e[0]*i+e[3]*o+e[6]*r,a=e[1]*i+e[4]*o+e[7]*r,c=e[2]*i+e[5]*o+e[8]*r;return n.x=s,n.y=a,n.z=c,n};ce.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n};ce.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.x,n[3]=e[3]*t.y,n[4]=e[4]*t.y,n[5]=e[5]*t.y,n[6]=e[6]*t.z,n[7]=e[7]*t.z,n[8]=e[8]*t.z,n};ce.multiplyByUniformScale=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n};ce.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t};ce.transpose=function(e,t){let n=e[0],i=e[3],o=e[6],r=e[1],s=e[4],a=e[7],c=e[2],l=e[5],d=e[8];return t[0]=n,t[1]=i,t[2]=o,t[3]=r,t[4]=s,t[5]=a,t[6]=c,t[7]=l,t[8]=d,t};function nS(e){let t=0;for(let n=0;n<9;++n){let i=e[n];t+=i*i}return Math.sqrt(t)}var Rf=[1,0,0],Pf=[2,2,1];function iS(e){let t=0;for(let n=0;n<3;++n){let i=e[ce.getElementIndex(Pf[n],Rf[n])];t+=2*i*i}return Math.sqrt(t)}function oS(e,t){let n=k.EPSILON15,i=0,o=1;for(let l=0;l<3;++l){let d=Math.abs(e[ce.getElementIndex(Pf[l],Rf[l])]);d>i&&(o=l,i=d)}let r=1,s=0,a=Rf[o],c=Pf[o];if(Math.abs(e[ce.getElementIndex(c,a)])>n){let l=e[ce.getElementIndex(c,c)],d=e[ce.getElementIndex(a,a)],h=e[ce.getElementIndex(c,a)],g=(l-d)/2/h,C;g<0?C=-1/(-g+Math.sqrt(1+g*g)):C=1/(g+Math.sqrt(1+g*g)),r=1/Math.sqrt(1+C*C),s=C*r}return t=ce.clone(ce.IDENTITY,t),t[ce.getElementIndex(a,a)]=t[ce.getElementIndex(c,c)]=r,t[ce.getElementIndex(c,a)]=s,t[ce.getElementIndex(a,c)]=-s,t}var kc=new ce,d0=new ce;ce.computeEigenDecomposition=function(e,t){let n=k.EPSILON20,i=10,o=0,r=0;p(t)||(t={});let s=t.unitary=ce.clone(ce.IDENTITY,t.unitary),a=t.diagonal=ce.clone(e,t.diagonal),c=n*nS(a);for(;r<i&&iS(a)>c;)oS(a,kc),ce.transpose(kc,d0),ce.multiply(a,kc,a),ce.multiply(d0,a,a),ce.multiply(s,kc,s),++o>2&&(++r,o=0);return t};ce.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t};ce.determinant=function(e){let t=e[0],n=e[3],i=e[6],o=e[1],r=e[4],s=e[7],a=e[2],c=e[5],l=e[8];return t*(r*l-c*s)+o*(c*i-n*l)+a*(n*s-r*i)};ce.inverse=function(e,t){let n=e[0],i=e[1],o=e[2],r=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=ce.determinant(e);t[0]=s*d-l*a,t[1]=l*o-i*d,t[2]=i*a-s*o,t[3]=c*a-r*d,t[4]=n*d-c*o,t[5]=r*o-n*a,t[6]=r*l-c*s,t[7]=c*i-n*l,t[8]=n*s-r*i;let g=1/h;return ce.multiplyByScalar(t,g,t)};var rS=new ce;ce.inverseTranspose=function(e,t){return ce.inverse(ce.transpose(e,rS),t)};ce.equals=function(e,t){return e===t||p(e)&&p(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]};ce.equalsEpsilon=function(e,t,n){return n=E(n,0),e===t||p(e)&&p(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n};ce.IDENTITY=Object.freeze(new ce(1,0,0,0,1,0,0,0,1));ce.ZERO=Object.freeze(new ce(0,0,0,0,0,0,0,0,0));ce.COLUMN0ROW0=0;ce.COLUMN0ROW1=1;ce.COLUMN0ROW2=2;ce.COLUMN1ROW0=3;ce.COLUMN1ROW1=4;ce.COLUMN1ROW2=5;ce.COLUMN2ROW0=6;ce.COLUMN2ROW1=7;ce.COLUMN2ROW2=8;Object.defineProperties(ce.prototype,{length:{get:function(){return ce.packedLength}}});ce.prototype.clone=function(e){return ce.clone(this,e)};ce.prototype.equals=function(e){return ce.equals(this,e)};ce.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]};ce.prototype.equalsEpsilon=function(e,t){return ce.equalsEpsilon(this,e,t)};ce.prototype.toString=function(){return`(${this[0]}, ${this[3]}, ${this[6]})
(${this[1]}, ${this[4]}, ${this[7]})
(${this[2]}, ${this[5]}, ${this[8]})`};var _e=ce;function ca(e){this.name="RuntimeError",this.message=e;let t;try{throw new Error}catch(n){t=n.stack}this.stack=t}p(Object.create)&&(ca.prototype=Object.create(Error.prototype),ca.prototype.constructor=ca);ca.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return p(this.stack)&&(e+=`
${this.stack.toString()}`),e};var Pt=ca;function oe(e,t,n,i,o,r,s,a,c,l,d,h,g,C,b,w){this[0]=E(e,0),this[1]=E(o,0),this[2]=E(c,0),this[3]=E(g,0),this[4]=E(t,0),this[5]=E(r,0),this[6]=E(l,0),this[7]=E(C,0),this[8]=E(n,0),this[9]=E(s,0),this[10]=E(d,0),this[11]=E(b,0),this[12]=E(i,0),this[13]=E(a,0),this[14]=E(h,0),this[15]=E(w,0)}oe.packedLength=16;oe.computeReflection=function(e,t,n,i,o){return p(o)||(o=new oe),o[0]=1-2*e*e,o[1]=-2*e*t,o[2]=-2*e*n,o[3]=0,o[4]=-2*t*e,o[5]=1-2*t*t,o[6]=-2*t*n,o[7]=0,o[8]=-2*n*e,o[9]=-2*n*t,o[10]=1-2*n*n,o[11]=0,o[12]=-2*i*e,o[13]=-2*i*t,o[14]=-2*i*n,o[15]=1,o};oe.computeObliquePerspective=function(e,t,n){let i=oe.inverse(n,new oe),o=oe.inverseTranspose(t,new oe),r=oe.multiplyByVector(o,e,new Ie),s=new Ie(h0(r.x),h0(r.y),1,1),a=oe.multiplyByVector(i,s,new Ie),c=2/Ie.dot(r,a),l=[r.x*c,r.y*c,r.z*c+1,r.w*c];return new oe(n[0],n[4],n[8],n[12],n[1],n[5],n[9],n[13],l[0],l[1],l[2],l[3],n[3],n[7],n[11],n[15])};function h0(e){return e>0?1:e<0?-1:0}oe.pack=function(e,t,n){return n=E(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t[n++]=e[9],t[n++]=e[10],t[n++]=e[11],t[n++]=e[12],t[n++]=e[13],t[n++]=e[14],t[n]=e[15],t};oe.unpack=function(e,t,n){return t=E(t,0),p(n)||(n=new oe),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n[9]=e[t++],n[10]=e[t++],n[11]=e[t++],n[12]=e[t++],n[13]=e[t++],n[14]=e[t++],n[15]=e[t],n};oe.packArray=function(e,t){let n=e.length,i=n*16;p(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)oe.pack(e[o],t,o*16);return t};oe.unpackArray=function(e,t){let n=e.length;p(t)?t.length=n/16:t=new Array(n/16);for(let i=0;i<n;i+=16){let o=i/16;t[o]=oe.unpack(e,i,t[o])}return t};oe.clone=function(e,t){if(p(e))return p(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new oe(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])};oe.fromArray=oe.unpack;oe.fromColumnMajorArray=function(e,t){return oe.clone(e,t)};oe.fromRowMajorArray=function(e,t){return p(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new oe(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])};oe.fromRotationTranslation=function(e,t,n){return t=E(t,y.ZERO),p(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=0,n[4]=e[3],n[5]=e[4],n[6]=e[5],n[7]=0,n[8]=e[6],n[9]=e[7],n[10]=e[8],n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,n):new oe(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)};oe.fromTranslationQuaternionRotationScale=function(e,t,n,i){p(i)||(i=new oe);let o=n.x,r=n.y,s=n.z,a=t.x*t.x,c=t.x*t.y,l=t.x*t.z,d=t.x*t.w,h=t.y*t.y,g=t.y*t.z,C=t.y*t.w,b=t.z*t.z,w=t.z*t.w,R=t.w*t.w,D=a-h-b+R,M=2*(c-w),z=2*(l+C),U=2*(c+w),Y=-a+h-b+R,m=2*(g-d),Q=2*(l-C),q=2*(g+d),Z=-a-h+b+R;return i[0]=D*o,i[1]=U*o,i[2]=Q*o,i[3]=0,i[4]=M*r,i[5]=Y*r,i[6]=q*r,i[7]=0,i[8]=z*s,i[9]=m*s,i[10]=Z*s,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,i};oe.fromTranslationRotationScale=function(e,t){return oe.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)};oe.fromTranslation=function(e,t){return oe.fromRotationTranslation(_e.IDENTITY,e,t)};oe.fromScale=function(e,t){return p(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new oe(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)};oe.fromUniformScale=function(e,t){return p(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new oe(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};oe.fromRotation=function(e,t){return p(t)||(t=new oe),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=0,t[4]=e[3],t[5]=e[4],t[6]=e[5],t[7]=0,t[8]=e[6],t[9]=e[7],t[10]=e[8],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var cs=new y,us=new y,ua=new y;oe.fromCamera=function(e,t){let n=e.position,i=e.direction,o=e.up;y.normalize(i,cs),y.normalize(y.cross(cs,o,us),us),y.normalize(y.cross(us,cs,ua),ua);let r=us.x,s=us.y,a=us.z,c=cs.x,l=cs.y,d=cs.z,h=ua.x,g=ua.y,C=ua.z,b=n.x,w=n.y,R=n.z,D=r*-b+s*-w+a*-R,M=h*-b+g*-w+C*-R,z=c*b+l*w+d*R;return p(t)?(t[0]=r,t[1]=h,t[2]=-c,t[3]=0,t[4]=s,t[5]=g,t[6]=-l,t[7]=0,t[8]=a,t[9]=C,t[10]=-d,t[11]=0,t[12]=D,t[13]=M,t[14]=z,t[15]=1,t):new oe(r,s,a,D,h,g,C,M,-c,-l,-d,z,0,0,0,1)};oe.computePerspectiveFieldOfView=function(e,t,n,i,o){let s=1/Math.tan(e*.5),a=s/t,c=(i+n)/(n-i),l=2*i*n/(n-i);return o[0]=a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=c,o[11]=-1,o[12]=0,o[13]=0,o[14]=l,o[15]=0,o};oe.computeOrthographicOffCenter=function(e,t,n,i,o,r,s){let a=1/(t-e),c=1/(i-n),l=1/(r-o),d=-(t+e)*a,h=-(i+n)*c,g=-(r+o)*l;return a*=2,c*=2,l*=-2,s[0]=a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=c,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=l,s[11]=0,s[12]=d,s[13]=h,s[14]=g,s[15]=1,s};oe.computePerspectiveOffCenter=function(e,t,n,i,o,r,s){let a=2*o/(t-e),c=2*o/(i-n),l=(t+e)/(t-e),d=(i+n)/(i-n),h=-(r+o)/(r-o),g=-1,C=-2*r*o/(r-o);return s[0]=a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=c,s[6]=0,s[7]=0,s[8]=l,s[9]=d,s[10]=h,s[11]=g,s[12]=0,s[13]=0,s[14]=C,s[15]=0,s};oe.computeInfinitePerspectiveOffCenter=function(e,t,n,i,o,r){let s=2*o/(t-e),a=2*o/(i-n),c=(t+e)/(t-e),l=(i+n)/(i-n),d=-1,h=-1,g=-2*o;return r[0]=s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=c,r[9]=l,r[10]=d,r[11]=h,r[12]=0,r[13]=0,r[14]=g,r[15]=0,r};oe.computeViewportTransformation=function(e,t,n,i){p(i)||(i=new oe),e=E(e,E.EMPTY_OBJECT);let o=E(e.x,0),r=E(e.y,0),s=E(e.width,0),a=E(e.height,0);t=E(t,0),n=E(n,1);let c=s*.5,l=a*.5,d=(n-t)*.5,h=c,g=l,C=d,b=o+c,w=r+l,R=t+d,D=1;return i[0]=h,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=g,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=C,i[11]=0,i[12]=b,i[13]=w,i[14]=R,i[15]=D,i};oe.computeView=function(e,t,n,i,o){return o[0]=i.x,o[1]=n.x,o[2]=-t.x,o[3]=0,o[4]=i.y,o[5]=n.y,o[6]=-t.y,o[7]=0,o[8]=i.z,o[9]=n.z,o[10]=-t.z,o[11]=0,o[12]=-y.dot(i,e),o[13]=-y.dot(n,e),o[14]=y.dot(t,e),o[15]=1,o};oe.toArray=function(e,t){return p(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]};oe.getElementIndex=function(e,t){return e*4+t};oe.getColumn=function(e,t,n){let i=t*4,o=e[i],r=e[i+1],s=e[i+2],a=e[i+3];return n.x=o,n.y=r,n.z=s,n.w=a,n};oe.setColumn=function(e,t,n,i){i=oe.clone(e,i);let o=t*4;return i[o]=n.x,i[o+1]=n.y,i[o+2]=n.z,i[o+3]=n.w,i};oe.getRow=function(e,t,n){let i=e[t],o=e[t+4],r=e[t+8],s=e[t+12];return n.x=i,n.y=o,n.z=r,n.w=s,n};oe.setRow=function(e,t,n,i){return i=oe.clone(e,i),i[t]=n.x,i[t+4]=n.y,i[t+8]=n.z,i[t+12]=n.w,i};oe.setTranslation=function(e,t,n){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=e[15],n};var sS=new y;oe.setScale=function(e,t,n){let i=oe.getScale(e,sS),o=t.x/i.x,r=t.y/i.y,s=t.z/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3],n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7],n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};var aS=new y;oe.setUniformScale=function(e,t,n){let i=oe.getScale(e,aS),o=t/i.x,r=t/i.y,s=t/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3],n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7],n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};var Of=new y;oe.getScale=function(e,t){return t.x=y.magnitude(y.fromElements(e[0],e[1],e[2],Of)),t.y=y.magnitude(y.fromElements(e[4],e[5],e[6],Of)),t.z=y.magnitude(y.fromElements(e[8],e[9],e[10],Of)),t};var p0=new y;oe.getMaximumScale=function(e){return oe.getScale(e,p0),y.maximumComponent(p0)};var cS=new y;oe.setRotation=function(e,t,n){let i=oe.getScale(e,cS);return n[0]=t[0]*i.x,n[1]=t[1]*i.x,n[2]=t[2]*i.x,n[3]=e[3],n[4]=t[3]*i.y,n[5]=t[4]*i.y,n[6]=t[5]*i.y,n[7]=e[7],n[8]=t[6]*i.z,n[9]=t[7]*i.z,n[10]=t[8]*i.z,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};var uS=new y;oe.getRotation=function(e,t){let n=oe.getScale(e,uS);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.x,t[3]=e[4]/n.y,t[4]=e[5]/n.y,t[5]=e[6]/n.y,t[6]=e[8]/n.z,t[7]=e[9]/n.z,t[8]=e[10]/n.z,t};oe.multiply=function(e,t,n){let i=e[0],o=e[1],r=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],g=e[9],C=e[10],b=e[11],w=e[12],R=e[13],D=e[14],M=e[15],z=t[0],U=t[1],Y=t[2],m=t[3],Q=t[4],q=t[5],Z=t[6],H=t[7],K=t[8],v=t[9],S=t[10],I=t[11],F=t[12],X=t[13],ie=t[14],j=t[15],le=i*z+a*U+h*Y+w*m,be=o*z+c*U+g*Y+R*m,Be=r*z+l*U+C*Y+D*m,Ue=s*z+d*U+b*Y+M*m,$e=i*Q+a*q+h*Z+w*H,Xe=o*Q+c*q+g*Z+R*H,ht=r*Q+l*q+C*Z+D*H,_t=s*Q+d*q+b*Z+M*H,Ct=i*K+a*v+h*S+w*I,mt=o*K+c*v+g*S+R*I,ot=r*K+l*v+C*S+D*I,Ye=s*K+d*v+b*S+M*I,Mt=i*F+a*X+h*ie+w*j,Xt=o*F+c*X+g*ie+R*j,gn=r*F+l*X+C*ie+D*j,ui=s*F+d*X+b*ie+M*j;return n[0]=le,n[1]=be,n[2]=Be,n[3]=Ue,n[4]=$e,n[5]=Xe,n[6]=ht,n[7]=_t,n[8]=Ct,n[9]=mt,n[10]=ot,n[11]=Ye,n[12]=Mt,n[13]=Xt,n[14]=gn,n[15]=ui,n};oe.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n};oe.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n};oe.multiplyTransformation=function(e,t,n){let i=e[0],o=e[1],r=e[2],s=e[4],a=e[5],c=e[6],l=e[8],d=e[9],h=e[10],g=e[12],C=e[13],b=e[14],w=t[0],R=t[1],D=t[2],M=t[4],z=t[5],U=t[6],Y=t[8],m=t[9],Q=t[10],q=t[12],Z=t[13],H=t[14],K=i*w+s*R+l*D,v=o*w+a*R+d*D,S=r*w+c*R+h*D,I=i*M+s*z+l*U,F=o*M+a*z+d*U,X=r*M+c*z+h*U,ie=i*Y+s*m+l*Q,j=o*Y+a*m+d*Q,le=r*Y+c*m+h*Q,be=i*q+s*Z+l*H+g,Be=o*q+a*Z+d*H+C,Ue=r*q+c*Z+h*H+b;return n[0]=K,n[1]=v,n[2]=S,n[3]=0,n[4]=I,n[5]=F,n[6]=X,n[7]=0,n[8]=ie,n[9]=j,n[10]=le,n[11]=0,n[12]=be,n[13]=Be,n[14]=Ue,n[15]=1,n};oe.multiplyByMatrix3=function(e,t,n){let i=e[0],o=e[1],r=e[2],s=e[4],a=e[5],c=e[6],l=e[8],d=e[9],h=e[10],g=t[0],C=t[1],b=t[2],w=t[3],R=t[4],D=t[5],M=t[6],z=t[7],U=t[8],Y=i*g+s*C+l*b,m=o*g+a*C+d*b,Q=r*g+c*C+h*b,q=i*w+s*R+l*D,Z=o*w+a*R+d*D,H=r*w+c*R+h*D,K=i*M+s*z+l*U,v=o*M+a*z+d*U,S=r*M+c*z+h*U;return n[0]=Y,n[1]=m,n[2]=Q,n[3]=0,n[4]=q,n[5]=Z,n[6]=H,n[7]=0,n[8]=K,n[9]=v,n[10]=S,n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};oe.multiplyByTranslation=function(e,t,n){let i=t.x,o=t.y,r=t.z,s=i*e[0]+o*e[4]+r*e[8]+e[12],a=i*e[1]+o*e[5]+r*e[9]+e[13],c=i*e[2]+o*e[6]+r*e[10]+e[14];return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=s,n[13]=a,n[14]=c,n[15]=e[15],n};oe.multiplyByScale=function(e,t,n){let i=t.x,o=t.y,r=t.z;return i===1&&o===1&&r===1?oe.clone(e,n):(n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=e[3],n[4]=o*e[4],n[5]=o*e[5],n[6]=o*e[6],n[7]=e[7],n[8]=r*e[8],n[9]=r*e[9],n[10]=r*e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n)};oe.multiplyByUniformScale=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3],n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7],n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};oe.multiplyByVector=function(e,t,n){let i=t.x,o=t.y,r=t.z,s=t.w,a=e[0]*i+e[4]*o+e[8]*r+e[12]*s,c=e[1]*i+e[5]*o+e[9]*r+e[13]*s,l=e[2]*i+e[6]*o+e[10]*r+e[14]*s,d=e[3]*i+e[7]*o+e[11]*r+e[15]*s;return n.x=a,n.y=c,n.z=l,n.w=d,n};oe.multiplyByPointAsVector=function(e,t,n){let i=t.x,o=t.y,r=t.z,s=e[0]*i+e[4]*o+e[8]*r,a=e[1]*i+e[5]*o+e[9]*r,c=e[2]*i+e[6]*o+e[10]*r;return n.x=s,n.y=a,n.z=c,n};oe.multiplyByPoint=function(e,t,n){let i=t.x,o=t.y,r=t.z,s=e[0]*i+e[4]*o+e[8]*r+e[12],a=e[1]*i+e[5]*o+e[9]*r+e[13],c=e[2]*i+e[6]*o+e[10]*r+e[14];return n.x=s,n.y=a,n.z=c,n};oe.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n};oe.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t};oe.transpose=function(e,t){let n=e[1],i=e[2],o=e[3],r=e[6],s=e[7],a=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=r,t[10]=e[10],t[11]=e[14],t[12]=o,t[13]=s,t[14]=a,t[15]=e[15],t};oe.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t};oe.equals=function(e,t){return e===t||p(e)&&p(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]};oe.equalsEpsilon=function(e,t,n){return n=E(n,0),e===t||p(e)&&p(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n&&Math.abs(e[9]-t[9])<=n&&Math.abs(e[10]-t[10])<=n&&Math.abs(e[11]-t[11])<=n&&Math.abs(e[12]-t[12])<=n&&Math.abs(e[13]-t[13])<=n&&Math.abs(e[14]-t[14])<=n&&Math.abs(e[15]-t[15])<=n};oe.getTranslation=function(e,t){return t.x=e[12],t.y=e[13],t.z=e[14],t};oe.getMatrix3=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var lS=new _e,fS=new _e,dS=new Ie,hS=new Ie(0,0,0,1);oe.inverse=function(e,t){let n=e[0],i=e[4],o=e[8],r=e[12],s=e[1],a=e[5],c=e[9],l=e[13],d=e[2],h=e[6],g=e[10],C=e[14],b=e[3],w=e[7],R=e[11],D=e[15],M=g*D,z=C*R,U=h*D,Y=C*w,m=h*R,Q=g*w,q=d*D,Z=C*b,H=d*R,K=g*b,v=d*w,S=h*b,I=M*a+Y*c+m*l-(z*a+U*c+Q*l),F=z*s+q*c+K*l-(M*s+Z*c+H*l),X=U*s+Z*a+v*l-(Y*s+q*a+S*l),ie=Q*s+H*a+S*c-(m*s+K*a+v*c),j=z*i+U*o+Q*r-(M*i+Y*o+m*r),le=M*n+Z*o+H*r-(z*n+q*o+K*r),be=Y*n+q*i+S*r-(U*n+Z*i+v*r),Be=m*n+K*i+v*o-(Q*n+H*i+S*o);M=o*l,z=r*c,U=i*l,Y=r*a,m=i*c,Q=o*a,q=n*l,Z=r*s,H=n*c,K=o*s,v=n*a,S=i*s;let Ue=M*w+Y*R+m*D-(z*w+U*R+Q*D),$e=z*b+q*R+K*D-(M*b+Z*R+H*D),Xe=U*b+Z*w+v*D-(Y*b+q*w+S*D),ht=Q*b+H*w+S*R-(m*b+K*w+v*R),_t=U*g+Q*C+z*h-(m*C+M*h+Y*g),Ct=H*C+M*d+Z*g-(q*g+K*C+z*d),mt=q*h+S*C+Y*d-(v*C+U*d+Z*h),ot=v*g+m*d+K*h-(H*h+S*g+Q*d),Ye=n*I+i*F+o*X+r*ie;if(Math.abs(Ye)<k.EPSILON21){if(_e.equalsEpsilon(oe.getMatrix3(e,lS),fS,k.EPSILON7)&&Ie.equals(oe.getRow(e,3,dS),hS))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new Pt("matrix is not invertible because its determinate is zero.")}return Ye=1/Ye,t[0]=I*Ye,t[1]=F*Ye,t[2]=X*Ye,t[3]=ie*Ye,t[4]=j*Ye,t[5]=le*Ye,t[6]=be*Ye,t[7]=Be*Ye,t[8]=Ue*Ye,t[9]=$e*Ye,t[10]=Xe*Ye,t[11]=ht*Ye,t[12]=_t*Ye,t[13]=Ct*Ye,t[14]=mt*Ye,t[15]=ot*Ye,t};oe.inverseTransformation=function(e,t){let n=e[0],i=e[1],o=e[2],r=e[4],s=e[5],a=e[6],c=e[8],l=e[9],d=e[10],h=e[12],g=e[13],C=e[14],b=-n*h-i*g-o*C,w=-r*h-s*g-a*C,R=-c*h-l*g-d*C;return t[0]=n,t[1]=r,t[2]=c,t[3]=0,t[4]=i,t[5]=s,t[6]=l,t[7]=0,t[8]=o,t[9]=a,t[10]=d,t[11]=0,t[12]=b,t[13]=w,t[14]=R,t[15]=1,t};var pS=new oe;oe.inverseTranspose=function(e,t){return oe.inverse(oe.transpose(e,pS),t)};oe.IDENTITY=Object.freeze(new oe(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));oe.ZERO=Object.freeze(new oe(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0));oe.COLUMN0ROW0=0;oe.COLUMN0ROW1=1;oe.COLUMN0ROW2=2;oe.COLUMN0ROW3=3;oe.COLUMN1ROW0=4;oe.COLUMN1ROW1=5;oe.COLUMN1ROW2=6;oe.COLUMN1ROW3=7;oe.COLUMN2ROW0=8;oe.COLUMN2ROW1=9;oe.COLUMN2ROW2=10;oe.COLUMN2ROW3=11;oe.COLUMN3ROW0=12;oe.COLUMN3ROW1=13;oe.COLUMN3ROW2=14;oe.COLUMN3ROW3=15;Object.defineProperties(oe.prototype,{length:{get:function(){return oe.packedLength}}});oe.prototype.clone=function(e){return oe.clone(this,e)};oe.prototype.equals=function(e){return oe.equals(this,e)};oe.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]&&e[9]===t[n+9]&&e[10]===t[n+10]&&e[11]===t[n+11]&&e[12]===t[n+12]&&e[13]===t[n+13]&&e[14]===t[n+14]&&e[15]===t[n+15]};oe.prototype.equalsEpsilon=function(e,t){return oe.equalsEpsilon(this,e,t)};oe.prototype.toString=function(){return`(${this[0]}, ${this[4]}, ${this[8]}, ${this[12]})
(${this[1]}, ${this[5]}, ${this[9]}, ${this[13]})
(${this[2]}, ${this[6]}, ${this[10]}, ${this[14]})
(${this[3]}, ${this[7]}, ${this[11]}, ${this[15]})`};var pe=oe;function mS(e){e=E(e,E.EMPTY_OBJECT),this.geometry=e.geometry,this.modelMatrix=pe.clone(E(e.modelMatrix,pe.IDENTITY)),this.id=e.id,this.pickPrimitive=e.pickPrimitive,this.attributes=E(e.attributes,{}),this.westHemisphereGeometry=void 0,this.eastHemisphereGeometry=void 0}var cr=mS;function Wt(e){e=E(e,E.EMPTY_OBJECT),this.position=E(e.position,!1),this.normal=E(e.normal,!1),this.st=E(e.st,!1),this.bitangent=E(e.bitangent,!1),this.tangent=E(e.tangent,!1),this.color=E(e.color,!1)}Wt.POSITION_ONLY=Object.freeze(new Wt({position:!0}));Wt.POSITION_AND_NORMAL=Object.freeze(new Wt({position:!0,normal:!0}));Wt.POSITION_NORMAL_AND_ST=Object.freeze(new Wt({position:!0,normal:!0,st:!0}));Wt.POSITION_AND_ST=Object.freeze(new Wt({position:!0,st:!0}));Wt.POSITION_AND_COLOR=Object.freeze(new Wt({position:!0,color:!0}));Wt.ALL=Object.freeze(new Wt({position:!0,normal:!0,st:!0,tangent:!0,bitangent:!0}));Wt.DEFAULT=Wt.POSITION_NORMAL_AND_ST;Wt.packedLength=6;Wt.pack=function(e,t,n){return n=E(n,0),t[n++]=e.position?1:0,t[n++]=e.normal?1:0,t[n++]=e.st?1:0,t[n++]=e.tangent?1:0,t[n++]=e.bitangent?1:0,t[n]=e.color?1:0,t};Wt.unpack=function(e,t,n){return t=E(t,0),p(n)||(n=new Wt),n.position=e[t++]===1,n.normal=e[t++]===1,n.st=e[t++]===1,n.tangent=e[t++]===1,n.bitangent=e[t++]===1,n.color=e[t]===1,n};Wt.clone=function(e,t){if(p(e))return p(t)||(t=new Wt),t.position=e.position,t.normal=e.normal,t.st=e.st,t.tangent=e.tangent,t.bitangent=e.bitangent,t.color=e.color,t};var En=Wt;var m0=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec4 v_color;
in vec4 ev_pickColor;

void main()
{
    vec3 positionToEyeEC = -v_positionEC;

    vec3 normalEC = normalize(v_normalEC);
#ifdef FACE_FORWARD
    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
#endif

    vec4 color = czm_gammaCorrect(v_color);

    czm_materialInput materialInput;
    materialInput.normalEC = normalEC;
    materialInput.positionToEyeEC = positionToEyeEC;
    czm_material material = czm_getDefaultMaterial(materialInput);
    material.diffuse = color.rgb;
    material.alpha = color.a;

    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
    out_FragColor.rgb*=ev_pickColor.rgb;
}
`;var g0=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec4 color;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;
out vec4 v_color;

void main()
{
    vec4 p = czm_computePosition();

    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
    v_normalEC = czm_normal * normal;                         // normal in eye coordinates
    v_color = color;

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;var y0=`in vec4 v_color;
in vec4 ev_pickColor;

void main()
{
    out_FragColor = czm_gammaCorrect(v_color);
    out_FragColor.rgb*=ev_pickColor.rgb;
}
`;var _0=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec4 color;
in float batchId;

out vec4 v_color;

void main()
{
    vec4 p = czm_computePosition();

    v_color = color;

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;function v0(e,t){if(e===null||typeof e!="object")return e;t=E(t,!1);let n=new e.constructor;for(let i in e)if(e.hasOwnProperty(i)){let o=e[i];t&&(o=v0(o,t)),n[i]=o}return n}var oi=v0;function C0(e,t,n){n=E(n,!1);let i={},o=p(e),r=p(t),s,a,c;if(o)for(s in e)e.hasOwnProperty(s)&&(a=e[s],r&&n&&typeof a=="object"&&t.hasOwnProperty(s)?(c=t[s],typeof c=="object"?i[s]=C0(a,c,n):i[s]=a):i[s]=a);if(r)for(s in t)t.hasOwnProperty(s)&&!i.hasOwnProperty(s)&&(c=t[s],i[s]=c);return i}var Un=C0;var gS={ADD:L.FUNC_ADD,SUBTRACT:L.FUNC_SUBTRACT,REVERSE_SUBTRACT:L.FUNC_REVERSE_SUBTRACT,MIN:L.MIN,MAX:L.MAX},ur=Object.freeze(gS);var yS={ZERO:L.ZERO,ONE:L.ONE,SOURCE_COLOR:L.SRC_COLOR,ONE_MINUS_SOURCE_COLOR:L.ONE_MINUS_SRC_COLOR,DESTINATION_COLOR:L.DST_COLOR,ONE_MINUS_DESTINATION_COLOR:L.ONE_MINUS_DST_COLOR,SOURCE_ALPHA:L.SRC_ALPHA,ONE_MINUS_SOURCE_ALPHA:L.ONE_MINUS_SRC_ALPHA,DESTINATION_ALPHA:L.DST_ALPHA,ONE_MINUS_DESTINATION_ALPHA:L.ONE_MINUS_DST_ALPHA,CONSTANT_COLOR:L.CONSTANT_COLOR,ONE_MINUS_CONSTANT_COLOR:L.ONE_MINUS_CONSTANT_COLOR,CONSTANT_ALPHA:L.CONSTANT_ALPHA,ONE_MINUS_CONSTANT_ALPHA:L.ONE_MINUS_CONSTANT_ALPHA,SOURCE_ALPHA_SATURATE:L.SRC_ALPHA_SATURATE},Yn=Object.freeze(yS);var _S={DISABLED:Object.freeze({enabled:!1}),ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:ur.ADD,equationAlpha:ur.ADD,functionSourceRgb:Yn.SOURCE_ALPHA,functionSourceAlpha:Yn.ONE,functionDestinationRgb:Yn.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:Yn.ONE_MINUS_SOURCE_ALPHA}),PRE_MULTIPLIED_ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:ur.ADD,equationAlpha:ur.ADD,functionSourceRgb:Yn.ONE,functionSourceAlpha:Yn.ONE,functionDestinationRgb:Yn.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:Yn.ONE_MINUS_SOURCE_ALPHA}),ADDITIVE_BLEND:Object.freeze({enabled:!0,equationRgb:ur.ADD,equationAlpha:ur.ADD,functionSourceRgb:Yn.SOURCE_ALPHA,functionSourceAlpha:Yn.ONE,functionDestinationRgb:Yn.ONE,functionDestinationAlpha:Yn.ONE})},If=Object.freeze(_S);var vS={FRONT:L.FRONT,BACK:L.BACK,FRONT_AND_BACK:L.FRONT_AND_BACK},lr=Object.freeze(vS);function ls(e){e=E(e,E.EMPTY_OBJECT),this.material=e.material,this.translucent=E(e.translucent,!0),this._vertexShaderSource=e.vertexShaderSource,this._fragmentShaderSource=e.fragmentShaderSource,this._renderState=e.renderState,this._closed=E(e.closed,!1)}Object.defineProperties(ls.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}}});ls.prototype.getFragmentShaderSource=function(){let e=[];return this.flat&&e.push("#define FLAT"),this.faceForward&&e.push("#define FACE_FORWARD"),p(this.material)&&e.push(this.material.shaderSource),e.push(this.fragmentShaderSource),e.join(`
`)};ls.prototype.isTranslucent=function(){return p(this.material)&&this.material.isTranslucent()||!p(this.material)&&this.translucent};ls.prototype.getRenderState=function(){let e=this.isTranslucent(),t=oi(this.renderState,!1);return e?(t.depthMask=!1,t.blending=If.ALPHA_BLEND):t.depthMask=!0,t};ls.getDefaultRenderState=function(e,t,n){let i={depthTest:{enabled:!0}};return e&&(i.depthMask=!1,i.blending=If.ALPHA_BLEND),t&&(i.cull={enabled:!0,face:lr.BACK}),p(n)&&(i=Un(n,i,!0)),i};var la=ls;function oo(e){e=E(e,E.EMPTY_OBJECT);let t=E(e.translucent,!0),n=E(e.closed,!1),i=E(e.flat,!1),o=i?_0:g0,r=i?y0:m0,s=i?oo.FLAT_VERTEX_FORMAT:oo.VERTEX_FORMAT;this.material=void 0,this.translucent=t,this._vertexShaderSource=E(e.vertexShaderSource,o),this._fragmentShaderSource=E(e.fragmentShaderSource,r),this._renderState=la.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=s,this._flat=i,this._faceForward=E(e.faceForward,!n)}Object.defineProperties(oo.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}});oo.VERTEX_FORMAT=En.POSITION_AND_NORMAL;oo.FLAT_VERTEX_FORMAT=En.POSITION_ONLY;oo.prototype.getFragmentShaderSource=la.prototype.getFragmentShaderSource;oo.prototype.isTranslucent=la.prototype.isTranslucent;oo.prototype.getRenderState=la.prototype.getRenderState;var b0=oo;var CS=new y,bS=new y;function TS(e,t,n,i,o){let r=e.x,s=e.y,a=e.z,c=t.x,l=t.y,d=t.z,h=r*r*c*c,g=s*s*l*l,C=a*a*d*d,b=h+g+C,w=Math.sqrt(1/b),R=y.multiplyByScalar(e,w,CS);if(b<i)return isFinite(w)?y.clone(R,o):void 0;let D=n.x,M=n.y,z=n.z,U=bS;U.x=R.x*D*2,U.y=R.y*M*2,U.z=R.z*z*2;let Y=(1-w)*y.magnitude(e)/(.5*y.magnitude(U)),m=0,Q,q,Z,H,K,v,S,I,F,X,ie;do{Y-=m,Z=1/(1+Y*D),H=1/(1+Y*M),K=1/(1+Y*z),v=Z*Z,S=H*H,I=K*K,F=v*Z,X=S*H,ie=I*K,Q=h*v+g*S+C*I-1,q=h*F*D+g*X*M+C*ie*z;let j=-2*q;m=Q/j}while(Math.abs(Q)>k.EPSILON12);return p(o)?(o.x=r*Z,o.y=s*H,o.z=a*K,o):new y(r*Z,s*H,a*K)}var Gc=TS;function Ut(e,t,n){this.longitude=E(e,0),this.latitude=E(t,0),this.height=E(n,0)}Ut.fromRadians=function(e,t,n,i){return n=E(n,0),p(i)?(i.longitude=e,i.latitude=t,i.height=n,i):new Ut(e,t,n)};Ut.fromDegrees=function(e,t,n,i){return e=k.toRadians(e),t=k.toRadians(t),Ut.fromRadians(e,t,n,i)};var ES=new y,wS=new y,SS=new y;Ut.wgs84OneOverRadii=new y(1/6378137,1/6378137,1/6356752314245179e-9);Ut.wgs84OneOverRadiiSquared=new y(1/(6378137*6378137),1/(6378137*6378137),1/(6356752314245179e-9*6356752314245179e-9));var xS=k.EPSILON1;Ut.fromCartesian=function(e,t,n){let i=p(t)?t.oneOverRadii:this.wgs84OneOverRadii,o=p(t)?t.oneOverRadiiSquared:this.wgs84OneOverRadiiSquared,r=p(t)?t._centerToleranceSquared:xS,s=Gc(e,i,o,r,wS);if(!p(s))return;let a=y.multiplyComponents(s,o,ES);a=y.normalize(a,a);let c=y.subtract(e,s,SS),l=Math.atan2(a.y,a.x),d=Math.asin(a.z),h=k.sign(y.dot(c,e))*y.magnitude(c);return p(n)?(n.longitude=l,n.latitude=d,n.height=h,n):new Ut(l,d,h)};Ut.toCartesian=function(e,t,n){return y.fromRadians(e.longitude,e.latitude,e.height,t,n)};Ut.clone=function(e,t){if(p(e))return p(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new Ut(e.longitude,e.latitude,e.height)};Ut.equals=function(e,t){return e===t||p(e)&&p(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height};Ut.equalsEpsilon=function(e,t,n){return n=E(n,0),e===t||p(e)&&p(t)&&Math.abs(e.longitude-t.longitude)<=n&&Math.abs(e.latitude-t.latitude)<=n&&Math.abs(e.height-t.height)<=n};Ut.ZERO=Object.freeze(new Ut(0,0,0));Ut.prototype.clone=function(e){return Ut.clone(this,e)};Ut.prototype.equals=function(e){return Ut.equals(this,e)};Ut.prototype.equalsEpsilon=function(e,t){return Ut.equalsEpsilon(this,e,t)};Ut.prototype.toString=function(){return`(${this.longitude}, ${this.latitude}, ${this.height})`};var rt=Ut;function E0(e,t,n,i){t=E(t,0),n=E(n,0),i=E(i,0),e._radii=new y(t,n,i),e._radiiSquared=new y(t*t,n*n,i*i),e._radiiToTheFourth=new y(t*t*t*t,n*n*n*n,i*i*i*i),e._oneOverRadii=new y(t===0?0:1/t,n===0?0:1/n,i===0?0:1/i),e._oneOverRadiiSquared=new y(t===0?0:1/(t*t),n===0?0:1/(n*n),i===0?0:1/(i*i)),e._minimumRadius=Math.min(t,n,i),e._maximumRadius=Math.max(t,n,i),e._centerToleranceSquared=k.EPSILON1,e._radiiSquared.z!==0&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function ut(e,t,n){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,E0(this,e,t,n)}Object.defineProperties(ut.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}});ut.clone=function(e,t){if(!p(e))return;let n=e._radii;return p(t)?(y.clone(n,t._radii),y.clone(e._radiiSquared,t._radiiSquared),y.clone(e._radiiToTheFourth,t._radiiToTheFourth),y.clone(e._oneOverRadii,t._oneOverRadii),y.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new ut(n.x,n.y,n.z)};ut.fromCartesian3=function(e,t){return p(t)||(t=new ut),p(e)&&E0(t,e.x,e.y,e.z),t};ut.WGS84=Object.freeze(new ut(6378137,6378137,6356752314140356e-9));ut.UNIT_SPHERE=Object.freeze(new ut(1,1,1));ut.MOON=Object.freeze(new ut(k.LUNAR_RADIUS,k.LUNAR_RADIUS,k.LUNAR_RADIUS));ut.prototype.clone=function(e){return ut.clone(this,e)};ut.packedLength=y.packedLength;ut.pack=function(e,t,n){return n=E(n,0),y.pack(e._radii,t,n),t};ut.unpack=function(e,t,n){t=E(t,0);let i=y.unpack(e,t);return ut.fromCartesian3(i,n)};ut.prototype.geocentricSurfaceNormal=y.normalize;ut.prototype.geodeticSurfaceNormalCartographic=function(e,t){let n=e.longitude,i=e.latitude,o=Math.cos(i),r=o*Math.cos(n),s=o*Math.sin(n),a=Math.sin(i);return p(t)||(t=new y),t.x=r,t.y=s,t.z=a,y.normalize(t,t)};ut.prototype.geodeticSurfaceNormal=function(e,t){if(!y.equalsEpsilon(e,y.ZERO,k.EPSILON14))return p(t)||(t=new y),t=y.multiplyComponents(e,this._oneOverRadiiSquared,t),y.normalize(t,t)};var AS=new y,RS=new y;ut.prototype.cartographicToCartesian=function(e,t){let n=AS,i=RS;this.geodeticSurfaceNormalCartographic(e,n),y.multiplyComponents(this._radiiSquared,n,i);let o=Math.sqrt(y.dot(n,i));return y.divideByScalar(i,o,i),y.multiplyByScalar(n,e.height,n),p(t)||(t=new y),y.add(i,n,t)};ut.prototype.cartographicArrayToCartesianArray=function(e,t){let n=e.length;p(t)?t.length=n:t=new Array(n);for(let i=0;i<n;i++)t[i]=this.cartographicToCartesian(e[i],t[i]);return t};var PS=new y,OS=new y,IS=new y;ut.prototype.cartesianToCartographic=function(e,t){let n=this.scaleToGeodeticSurface(e,OS);if(!p(n))return;let i=this.geodeticSurfaceNormal(n,PS),o=y.subtract(e,n,IS),r=Math.atan2(i.y,i.x),s=Math.asin(i.z),a=k.sign(y.dot(o,e))*y.magnitude(o);return p(t)?(t.longitude=r,t.latitude=s,t.height=a,t):new rt(r,s,a)};ut.prototype.cartesianArrayToCartographicArray=function(e,t){let n=e.length;p(t)?t.length=n:t=new Array(n);for(let i=0;i<n;++i)t[i]=this.cartesianToCartographic(e[i],t[i]);return t};ut.prototype.scaleToGeodeticSurface=function(e,t){return Gc(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)};ut.prototype.scaleToGeocentricSurface=function(e,t){p(t)||(t=new y);let n=e.x,i=e.y,o=e.z,r=this._oneOverRadiiSquared,s=1/Math.sqrt(n*n*r.x+i*i*r.y+o*o*r.z);return y.multiplyByScalar(e,s,t)};ut.prototype.transformPositionToScaledSpace=function(e,t){return p(t)||(t=new y),y.multiplyComponents(e,this._oneOverRadii,t)};ut.prototype.transformPositionFromScaledSpace=function(e,t){return p(t)||(t=new y),y.multiplyComponents(e,this._radii,t)};ut.prototype.equals=function(e){return this===e||p(e)&&y.equals(this._radii,e._radii)};ut.prototype.toString=function(){return this._radii.toString()};ut.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,n){t=E(t,0);let i=this._squaredXOverSquaredZ;if(p(n)||(n=new y),n.x=0,n.y=0,n.z=e.z*(1-i),!(Math.abs(n.z)>=this._radii.z-t))return n};var DS=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],MS=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function T0(e,t,n){let i=.5*(t+e),o=.5*(t-e),r=0;for(let s=0;s<5;s++){let a=o*DS[s];r+=MS[s]*(n(i+a)+n(i-a))}return r*=o,r}ut.prototype.surfaceArea=function(e){let t=e.west,n=e.east,i=e.south,o=e.north;for(;n<t;)n+=k.TWO_PI;let r=this._radiiSquared,s=r.x,a=r.y,c=r.z,l=s*a;return T0(i,o,function(d){let h=Math.cos(d),g=Math.sin(d);return Math.cos(d)*T0(t,n,function(C){let b=Math.cos(C),w=Math.sin(C);return Math.sqrt(l*g*g+c*(a*b*b+s*w*w)*h*h)})})};var Dn=ut;function Hc(e){this._ellipsoid=E(e,Dn.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(Hc.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});Hc.prototype.project=function(e,t){let n=this._semimajorAxis,i=e.longitude*n,o=e.latitude*n,r=e.height;return p(t)?(t.x=i,t.y=o,t.z=r,t):new y(i,o,r)};Hc.prototype.unproject=function(e,t){let n=this._oneOverSemimajorAxis,i=e.x*n,o=e.y*n,r=e.z;return p(t)?(t.longitude=i,t.latitude=o,t.height=r,t):new rt(i,o,r)};var Li=Hc;var zS={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},_i=Object.freeze(zS);function NS(e,t){this.start=E(e,0),this.stop=E(t,0)}var No=NS;function ke(e,t,n,i){this.west=E(e,0),this.south=E(t,0),this.east=E(n,0),this.north=E(i,0)}Object.defineProperties(ke.prototype,{width:{get:function(){return ke.computeWidth(this)}},height:{get:function(){return ke.computeHeight(this)}}});ke.packedLength=4;ke.pack=function(e,t,n){return n=E(n,0),t[n++]=e.west,t[n++]=e.south,t[n++]=e.east,t[n]=e.north,t};ke.unpack=function(e,t,n){return t=E(t,0),p(n)||(n=new ke),n.west=e[t++],n.south=e[t++],n.east=e[t++],n.north=e[t],n};ke.computeWidth=function(e){let t=e.east,n=e.west;return t<n&&(t+=k.TWO_PI),t-n};ke.computeHeight=function(e){return e.north-e.south};ke.fromDegrees=function(e,t,n,i,o){return e=k.toRadians(E(e,0)),t=k.toRadians(E(t,0)),n=k.toRadians(E(n,0)),i=k.toRadians(E(i,0)),p(o)?(o.west=e,o.south=t,o.east=n,o.north=i,o):new ke(e,t,n,i)};ke.fromRadians=function(e,t,n,i,o){return p(o)?(o.west=E(e,0),o.south=E(t,0),o.east=E(n,0),o.north=E(i,0),o):new ke(e,t,n,i)};ke.fromCartographicArray=function(e,t){let n=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,r=-Number.MAX_VALUE,s=Number.MAX_VALUE,a=-Number.MAX_VALUE;for(let c=0,l=e.length;c<l;c++){let d=e[c];n=Math.min(n,d.longitude),i=Math.max(i,d.longitude),s=Math.min(s,d.latitude),a=Math.max(a,d.latitude);let h=d.longitude>=0?d.longitude:d.longitude+k.TWO_PI;o=Math.min(o,h),r=Math.max(r,h)}return i-n>r-o&&(n=o,i=r,i>k.PI&&(i=i-k.TWO_PI),n>k.PI&&(n=n-k.TWO_PI)),p(t)?(t.west=n,t.south=s,t.east=i,t.north=a,t):new ke(n,s,i,a)};ke.fromCartesianArray=function(e,t,n){t=E(t,Dn.WGS84);let i=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=Number.MAX_VALUE,s=-Number.MAX_VALUE,a=Number.MAX_VALUE,c=-Number.MAX_VALUE;for(let l=0,d=e.length;l<d;l++){let h=t.cartesianToCartographic(e[l]);i=Math.min(i,h.longitude),o=Math.max(o,h.longitude),a=Math.min(a,h.latitude),c=Math.max(c,h.latitude);let g=h.longitude>=0?h.longitude:h.longitude+k.TWO_PI;r=Math.min(r,g),s=Math.max(s,g)}return o-i>s-r&&(i=r,o=s,o>k.PI&&(o=o-k.TWO_PI),i>k.PI&&(i=i-k.TWO_PI)),p(n)?(n.west=i,n.south=a,n.east=o,n.north=c,n):new ke(i,a,o,c)};ke.clone=function(e,t){if(p(e))return p(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t):new ke(e.west,e.south,e.east,e.north)};ke.equalsEpsilon=function(e,t,n){return n=E(n,0),e===t||p(e)&&p(t)&&Math.abs(e.west-t.west)<=n&&Math.abs(e.south-t.south)<=n&&Math.abs(e.east-t.east)<=n&&Math.abs(e.north-t.north)<=n};ke.prototype.clone=function(e){return ke.clone(this,e)};ke.prototype.equals=function(e){return ke.equals(this,e)};ke.equals=function(e,t){return e===t||p(e)&&p(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north};ke.prototype.equalsEpsilon=function(e,t){return ke.equalsEpsilon(this,e,t)};ke.validate=function(e){};ke.southwest=function(e,t){return p(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new rt(e.west,e.south)};ke.northwest=function(e,t){return p(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new rt(e.west,e.north)};ke.northeast=function(e,t){return p(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new rt(e.east,e.north)};ke.southeast=function(e,t){return p(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new rt(e.east,e.south)};ke.center=function(e,t){let n=e.east,i=e.west;n<i&&(n+=k.TWO_PI);let o=k.negativePiToPi((i+n)*.5),r=(e.south+e.north)*.5;return p(t)?(t.longitude=o,t.latitude=r,t.height=0,t):new rt(o,r)};ke.intersection=function(e,t,n){let i=e.east,o=e.west,r=t.east,s=t.west;i<o&&r>0?i+=k.TWO_PI:r<s&&i>0&&(r+=k.TWO_PI),i<o&&s<0?s+=k.TWO_PI:r<s&&o<0&&(o+=k.TWO_PI);let a=k.negativePiToPi(Math.max(o,s)),c=k.negativePiToPi(Math.min(i,r));if((e.west<e.east||t.west<t.east)&&c<=a)return;let l=Math.max(e.south,t.south),d=Math.min(e.north,t.north);if(!(l>=d))return p(n)?(n.west=a,n.south=l,n.east=c,n.north=d,n):new ke(a,l,c,d)};ke.simpleIntersection=function(e,t,n){let i=Math.max(e.west,t.west),o=Math.max(e.south,t.south),r=Math.min(e.east,t.east),s=Math.min(e.north,t.north);if(!(o>=s||i>=r))return p(n)?(n.west=i,n.south=o,n.east=r,n.north=s,n):new ke(i,o,r,s)};ke.union=function(e,t,n){p(n)||(n=new ke);let i=e.east,o=e.west,r=t.east,s=t.west;i<o&&r>0?i+=k.TWO_PI:r<s&&i>0&&(r+=k.TWO_PI),i<o&&s<0?s+=k.TWO_PI:r<s&&o<0&&(o+=k.TWO_PI);let a=k.negativePiToPi(Math.min(o,s)),c=k.negativePiToPi(Math.max(i,r));return n.west=a,n.south=Math.min(e.south,t.south),n.east=c,n.north=Math.max(e.north,t.north),n};ke.expand=function(e,t,n){return p(n)||(n=new ke),n.west=Math.min(e.west,t.longitude),n.south=Math.min(e.south,t.latitude),n.east=Math.max(e.east,t.longitude),n.north=Math.max(e.north,t.latitude),n};ke.contains=function(e,t){let n=t.longitude,i=t.latitude,o=e.west,r=e.east;return r<o&&(r+=k.TWO_PI,n<0&&(n+=k.TWO_PI)),(n>o||k.equalsEpsilon(n,o,k.EPSILON14))&&(n<r||k.equalsEpsilon(n,r,k.EPSILON14))&&i>=e.south&&i<=e.north};var LS=new rt;ke.subsample=function(e,t,n,i){t=E(t,Dn.WGS84),n=E(n,0),p(i)||(i=[]);let o=0,r=e.north,s=e.south,a=e.east,c=e.west,l=LS;l.height=n,l.longitude=c,l.latitude=r,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.longitude=a,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.latitude=s,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.longitude=c,i[o]=t.cartographicToCartesian(l,i[o]),o++,r<0?l.latitude=r:s>0?l.latitude=s:l.latitude=0;for(let d=1;d<8;++d)l.longitude=-Math.PI+d*k.PI_OVER_TWO,ke.contains(e,l)&&(i[o]=t.cartographicToCartesian(l,i[o]),o++);return l.latitude===0&&(l.longitude=c,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.longitude=a,i[o]=t.cartographicToCartesian(l,i[o]),o++),i.length=o,i};ke.subsection=function(e,t,n,i,o,r){if(p(r)||(r=new ke),e.west<=e.east){let a=e.east-e.west;r.west=e.west+t*a,r.east=e.west+i*a}else{let a=k.TWO_PI+e.east-e.west;r.west=k.negativePiToPi(e.west+t*a),r.east=k.negativePiToPi(e.west+i*a)}let s=e.north-e.south;return r.south=e.south+n*s,r.north=e.south+o*s,t===1&&(r.west=e.east),i===1&&(r.east=e.east),n===1&&(r.south=e.north),o===1&&(r.north=e.north),r};ke.MAX_VALUE=Object.freeze(new ke(-Math.PI,-k.PI_OVER_TWO,Math.PI,k.PI_OVER_TWO));var ro=ke;function Me(e,t){this.center=y.clone(E(e,y.ZERO)),this.radius=E(t,0)}var zf=new y,Nf=new y,Lf=new y,Bf=new y,Ff=new y,Vf=new y,Uf=new y,rn=new y,kf=new y,Gf=new y,Hf=new y,jf=new y,BS=4/3*k.PI;Me.fromPoints=function(e,t){if(p(t)||(t=new Me),!p(e)||e.length===0)return t.center=y.clone(y.ZERO,t.center),t.radius=0,t;let n=y.clone(e[0],Uf),i=y.clone(n,zf),o=y.clone(n,Nf),r=y.clone(n,Lf),s=y.clone(n,Bf),a=y.clone(n,Ff),c=y.clone(n,Vf),l=e.length,d;for(d=1;d<l;d++){y.clone(e[d],n);let q=n.x,Z=n.y,H=n.z;q<i.x&&y.clone(n,i),q>s.x&&y.clone(n,s),Z<o.y&&y.clone(n,o),Z>a.y&&y.clone(n,a),H<r.z&&y.clone(n,r),H>c.z&&y.clone(n,c)}let h=y.magnitudeSquared(y.subtract(s,i,rn)),g=y.magnitudeSquared(y.subtract(a,o,rn)),C=y.magnitudeSquared(y.subtract(c,r,rn)),b=i,w=s,R=h;g>R&&(R=g,b=o,w=a),C>R&&(R=C,b=r,w=c);let D=kf;D.x=(b.x+w.x)*.5,D.y=(b.y+w.y)*.5,D.z=(b.z+w.z)*.5;let M=y.magnitudeSquared(y.subtract(w,D,rn)),z=Math.sqrt(M),U=Gf;U.x=i.x,U.y=o.y,U.z=r.z;let Y=Hf;Y.x=s.x,Y.y=a.y,Y.z=c.z;let m=y.midpoint(U,Y,jf),Q=0;for(d=0;d<l;d++){y.clone(e[d],n);let q=y.magnitude(y.subtract(n,m,rn));q>Q&&(Q=q);let Z=y.magnitudeSquared(y.subtract(n,D,rn));if(Z>M){let H=Math.sqrt(Z);z=(z+H)*.5,M=z*z;let K=H-z;D.x=(z*D.x+K*n.x)/H,D.y=(z*D.y+K*n.y)/H,D.z=(z*D.z+K*n.z)/H}}return z<Q?(y.clone(D,t.center),t.radius=z):(y.clone(m,t.center),t.radius=Q),t};var FS=new Li,VS=new y,US=new y,Df=new rt,Mf=new rt;Me.fromRectangle2D=function(e,t,n){return Me.fromRectangleWithHeights2D(e,t,0,0,n)};Me.fromRectangleWithHeights2D=function(e,t,n,i,o){if(p(o)||(o=new Me),!p(e))return o.center=y.clone(y.ZERO,o.center),o.radius=0,o;t=E(t,FS),ro.southwest(e,Df),Df.height=n,ro.northeast(e,Mf),Mf.height=i;let r=t.project(Df,VS),s=t.project(Mf,US),a=s.x-r.x,c=s.y-r.y,l=s.z-r.z;o.radius=Math.sqrt(a*a+c*c+l*l)*.5;let d=o.center;return d.x=r.x+a*.5,d.y=r.y+c*.5,d.z=r.z+l*.5,o};var kS=[];Me.fromRectangle3D=function(e,t,n,i){if(t=E(t,Dn.WGS84),n=E(n,0),p(i)||(i=new Me),!p(e))return i.center=y.clone(y.ZERO,i.center),i.radius=0,i;let o=ro.subsample(e,t,n,kS);return Me.fromPoints(o,i)};Me.fromVertices=function(e,t,n,i){if(p(i)||(i=new Me),!p(e)||e.length===0)return i.center=y.clone(y.ZERO,i.center),i.radius=0,i;t=E(t,y.ZERO),n=E(n,3);let o=Uf;o.x=e[0]+t.x,o.y=e[1]+t.y,o.z=e[2]+t.z;let r=y.clone(o,zf),s=y.clone(o,Nf),a=y.clone(o,Lf),c=y.clone(o,Bf),l=y.clone(o,Ff),d=y.clone(o,Vf),h=e.length,g;for(g=0;g<h;g+=n){let H=e[g]+t.x,K=e[g+1]+t.y,v=e[g+2]+t.z;o.x=H,o.y=K,o.z=v,H<r.x&&y.clone(o,r),H>c.x&&y.clone(o,c),K<s.y&&y.clone(o,s),K>l.y&&y.clone(o,l),v<a.z&&y.clone(o,a),v>d.z&&y.clone(o,d)}let C=y.magnitudeSquared(y.subtract(c,r,rn)),b=y.magnitudeSquared(y.subtract(l,s,rn)),w=y.magnitudeSquared(y.subtract(d,a,rn)),R=r,D=c,M=C;b>M&&(M=b,R=s,D=l),w>M&&(M=w,R=a,D=d);let z=kf;z.x=(R.x+D.x)*.5,z.y=(R.y+D.y)*.5,z.z=(R.z+D.z)*.5;let U=y.magnitudeSquared(y.subtract(D,z,rn)),Y=Math.sqrt(U),m=Gf;m.x=r.x,m.y=s.y,m.z=a.z;let Q=Hf;Q.x=c.x,Q.y=l.y,Q.z=d.z;let q=y.midpoint(m,Q,jf),Z=0;for(g=0;g<h;g+=n){o.x=e[g]+t.x,o.y=e[g+1]+t.y,o.z=e[g+2]+t.z;let H=y.magnitude(y.subtract(o,q,rn));H>Z&&(Z=H);let K=y.magnitudeSquared(y.subtract(o,z,rn));if(K>U){let v=Math.sqrt(K);Y=(Y+v)*.5,U=Y*Y;let S=v-Y;z.x=(Y*z.x+S*o.x)/v,z.y=(Y*z.y+S*o.y)/v,z.z=(Y*z.z+S*o.z)/v}}return Y<Z?(y.clone(z,i.center),i.radius=Y):(y.clone(q,i.center),i.radius=Z),i};Me.fromEncodedCartesianVertices=function(e,t,n){if(p(n)||(n=new Me),!p(e)||!p(t)||e.length!==t.length||e.length===0)return n.center=y.clone(y.ZERO,n.center),n.radius=0,n;let i=Uf;i.x=e[0]+t[0],i.y=e[1]+t[1],i.z=e[2]+t[2];let o=y.clone(i,zf),r=y.clone(i,Nf),s=y.clone(i,Lf),a=y.clone(i,Bf),c=y.clone(i,Ff),l=y.clone(i,Vf),d=e.length,h;for(h=0;h<d;h+=3){let Z=e[h]+t[h],H=e[h+1]+t[h+1],K=e[h+2]+t[h+2];i.x=Z,i.y=H,i.z=K,Z<o.x&&y.clone(i,o),Z>a.x&&y.clone(i,a),H<r.y&&y.clone(i,r),H>c.y&&y.clone(i,c),K<s.z&&y.clone(i,s),K>l.z&&y.clone(i,l)}let g=y.magnitudeSquared(y.subtract(a,o,rn)),C=y.magnitudeSquared(y.subtract(c,r,rn)),b=y.magnitudeSquared(y.subtract(l,s,rn)),w=o,R=a,D=g;C>D&&(D=C,w=r,R=c),b>D&&(D=b,w=s,R=l);let M=kf;M.x=(w.x+R.x)*.5,M.y=(w.y+R.y)*.5,M.z=(w.z+R.z)*.5;let z=y.magnitudeSquared(y.subtract(R,M,rn)),U=Math.sqrt(z),Y=Gf;Y.x=o.x,Y.y=r.y,Y.z=s.z;let m=Hf;m.x=a.x,m.y=c.y,m.z=l.z;let Q=y.midpoint(Y,m,jf),q=0;for(h=0;h<d;h+=3){i.x=e[h]+t[h],i.y=e[h+1]+t[h+1],i.z=e[h+2]+t[h+2];let Z=y.magnitude(y.subtract(i,Q,rn));Z>q&&(q=Z);let H=y.magnitudeSquared(y.subtract(i,M,rn));if(H>z){let K=Math.sqrt(H);U=(U+K)*.5,z=U*U;let v=K-U;M.x=(U*M.x+v*i.x)/K,M.y=(U*M.y+v*i.y)/K,M.z=(U*M.z+v*i.z)/K}}return U<q?(y.clone(M,n.center),n.radius=U):(y.clone(Q,n.center),n.radius=q),n};Me.fromCornerPoints=function(e,t,n){p(n)||(n=new Me);let i=y.midpoint(e,t,n.center);return n.radius=y.distance(i,t),n};Me.fromEllipsoid=function(e,t){return p(t)||(t=new Me),y.clone(y.ZERO,t.center),t.radius=e.maximumRadius,t};var GS=new y;Me.fromBoundingSpheres=function(e,t){if(p(t)||(t=new Me),!p(e)||e.length===0)return t.center=y.clone(y.ZERO,t.center),t.radius=0,t;let n=e.length;if(n===1)return Me.clone(e[0],t);if(n===2)return Me.union(e[0],e[1],t);let i=[],o;for(o=0;o<n;o++)i.push(e[o].center);t=Me.fromPoints(i,t);let r=t.center,s=t.radius;for(o=0;o<n;o++){let a=e[o];s=Math.max(s,y.distance(r,a.center,GS)+a.radius)}return t.radius=s,t};var HS=new y,jS=new y,WS=new y;Me.fromOrientedBoundingBox=function(e,t){p(t)||(t=new Me);let n=e.halfAxes,i=_e.getColumn(n,0,HS),o=_e.getColumn(n,1,jS),r=_e.getColumn(n,2,WS);return y.add(i,o,i),y.add(i,r,i),t.center=y.clone(e.center,t.center),t.radius=y.magnitude(i),t};var qS=new y,YS=new y;Me.fromTransformation=function(e,t){p(t)||(t=new Me);let n=pe.getTranslation(e,qS),i=pe.getScale(e,YS),o=.5*y.magnitude(i);return t.center=y.clone(n,t.center),t.radius=o,t};Me.clone=function(e,t){if(p(e))return p(t)?(t.center=y.clone(e.center,t.center),t.radius=e.radius,t):new Me(e.center,e.radius)};Me.packedLength=4;Me.pack=function(e,t,n){n=E(n,0);let i=e.center;return t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n]=e.radius,t};Me.unpack=function(e,t,n){t=E(t,0),p(n)||(n=new Me);let i=n.center;return i.x=e[t++],i.y=e[t++],i.z=e[t++],n.radius=e[t],n};var ZS=new y,XS=new y;Me.union=function(e,t,n){p(n)||(n=new Me);let i=e.center,o=e.radius,r=t.center,s=t.radius,a=y.subtract(r,i,ZS),c=y.magnitude(a);if(o>=c+s)return e.clone(n),n;if(s>=c+o)return t.clone(n),n;let l=(o+c+s)*.5,d=y.multiplyByScalar(a,(-o+l)/c,XS);return y.add(d,i,d),y.clone(d,n.center),n.radius=l,n};var $S=new y;Me.expand=function(e,t,n){n=Me.clone(e,n);let i=y.magnitude(y.subtract(t,n.center,$S));return i>n.radius&&(n.radius=i),n};Me.intersectPlane=function(e,t){let n=e.center,i=e.radius,o=t.normal,r=y.dot(o,n)+t.distance;return r<-i?_i.OUTSIDE:r<i?_i.INTERSECTING:_i.INSIDE};Me.transform=function(e,t,n){return p(n)||(n=new Me),n.center=pe.multiplyByPoint(t,e.center,n.center),n.radius=pe.getMaximumScale(t)*e.radius,n};var KS=new y;Me.distanceSquaredTo=function(e,t){let n=y.subtract(e.center,t,KS),i=y.magnitude(n)-e.radius;return i<=0?0:i*i};Me.transformWithoutScale=function(e,t,n){return p(n)||(n=new Me),n.center=pe.multiplyByPoint(t,e.center,n.center),n.radius=e.radius,n};var QS=new y;Me.computePlaneDistances=function(e,t,n,i){p(i)||(i=new No);let o=y.subtract(e.center,t,QS),r=y.dot(n,o);return i.start=r-e.radius,i.stop=r+e.radius,i};var w0=new y,JS=new y,ex=new y,tx=new y,nx=new y,ix=new rt,S0=new Array(8);for(let e=0;e<8;++e)S0[e]=new y;var ox=new Li;Me.projectTo2D=function(e,t,n){t=E(t,ox);let i=t.ellipsoid,o=e.center,r=e.radius,s;y.equals(o,y.ZERO)?s=y.clone(y.UNIT_X,w0):s=i.geodeticSurfaceNormal(o,w0);let a=y.cross(y.UNIT_Z,s,JS);y.normalize(a,a);let c=y.cross(s,a,ex);y.normalize(c,c),y.multiplyByScalar(s,r,s),y.multiplyByScalar(c,r,c),y.multiplyByScalar(a,r,a);let l=y.negate(c,nx),d=y.negate(a,tx),h=S0,g=h[0];y.add(s,c,g),y.add(g,a,g),g=h[1],y.add(s,c,g),y.add(g,d,g),g=h[2],y.add(s,l,g),y.add(g,d,g),g=h[3],y.add(s,l,g),y.add(g,a,g),y.negate(s,s),g=h[4],y.add(s,c,g),y.add(g,a,g),g=h[5],y.add(s,c,g),y.add(g,d,g),g=h[6],y.add(s,l,g),y.add(g,d,g),g=h[7],y.add(s,l,g),y.add(g,a,g);let C=h.length;for(let D=0;D<C;++D){let M=h[D];y.add(o,M,M);let z=i.cartesianToCartographic(M,ix);t.project(z,M)}n=Me.fromPoints(h,n),o=n.center;let b=o.x,w=o.y,R=o.z;return o.x=R,o.y=b,o.z=w,n};Me.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)};Me.equals=function(e,t){return e===t||p(e)&&p(t)&&y.equals(e.center,t.center)&&e.radius===t.radius};Me.prototype.intersectPlane=function(e){return Me.intersectPlane(this,e)};Me.prototype.distanceSquaredTo=function(e){return Me.distanceSquaredTo(this,e)};Me.prototype.computePlaneDistances=function(e,t,n){return Me.computePlaneDistances(this,e,t,n)};Me.prototype.isOccluded=function(e){return Me.isOccluded(this,e)};Me.prototype.equals=function(e){return Me.equals(this,e)};Me.prototype.clone=function(e){return Me.clone(this,e)};Me.prototype.volume=function(){let e=this.radius;return BS*e*e*e};var Ve=Me;function Ee(e,t){this.x=E(e,0),this.y=E(t,0)}Ee.fromElements=function(e,t,n){return p(n)?(n.x=e,n.y=t,n):new Ee(e,t)};Ee.clone=function(e,t){if(p(e))return p(t)?(t.x=e.x,t.y=e.y,t):new Ee(e.x,e.y)};Ee.fromCartesian3=Ee.clone;Ee.fromCartesian4=Ee.clone;Ee.packedLength=2;Ee.pack=function(e,t,n){return n=E(n,0),t[n++]=e.x,t[n]=e.y,t};Ee.unpack=function(e,t,n){return t=E(t,0),p(n)||(n=new Ee),n.x=e[t++],n.y=e[t],n};Ee.packArray=function(e,t){let n=e.length,i=n*2;p(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)Ee.pack(e[o],t,o*2);return t};Ee.unpackArray=function(e,t){let n=e.length;p(t)?t.length=n/2:t=new Array(n/2);for(let i=0;i<n;i+=2){let o=i/2;t[o]=Ee.unpack(e,i,t[o])}return t};Ee.fromArray=Ee.unpack;Ee.maximumComponent=function(e){return Math.max(e.x,e.y)};Ee.minimumComponent=function(e){return Math.min(e.x,e.y)};Ee.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n};Ee.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n};Ee.clamp=function(e,t,n,i){let o=k.clamp(e.x,t.x,n.x),r=k.clamp(e.y,t.y,n.y);return i.x=o,i.y=r,i};Ee.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y};Ee.magnitude=function(e){return Math.sqrt(Ee.magnitudeSquared(e))};var jc=new Ee;Ee.distance=function(e,t){return Ee.subtract(e,t,jc),Ee.magnitude(jc)};Ee.distanceSquared=function(e,t){return Ee.subtract(e,t,jc),Ee.magnitudeSquared(jc)};Ee.normalize=function(e,t){let n=Ee.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t};Ee.dot=function(e,t){return e.x*t.x+e.y*t.y};Ee.cross=function(e,t){return e.x*t.y-e.y*t.x};Ee.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n};Ee.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n};Ee.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n};Ee.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n};Ee.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n};Ee.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n};Ee.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t};Ee.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var x0=new Ee;Ee.lerp=function(e,t,n,i){return Ee.multiplyByScalar(t,n,x0),i=Ee.multiplyByScalar(e,1-n,i),Ee.add(x0,i,i)};var A0=new Ee,R0=new Ee;Ee.angleBetween=function(e,t){return Ee.normalize(e,A0),Ee.normalize(t,R0),k.acosClamped(Ee.dot(A0,R0))};var rx=new Ee;Ee.mostOrthogonalAxis=function(e,t){let n=Ee.normalize(e,rx);return Ee.abs(n,n),n.x<=n.y?t=Ee.clone(Ee.UNIT_X,t):t=Ee.clone(Ee.UNIT_Y,t),t};Ee.equals=function(e,t){return e===t||p(e)&&p(t)&&e.x===t.x&&e.y===t.y};Ee.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]};Ee.equalsEpsilon=function(e,t,n,i){return e===t||p(e)&&p(t)&&k.equalsEpsilon(e.x,t.x,n,i)&&k.equalsEpsilon(e.y,t.y,n,i)};Ee.ZERO=Object.freeze(new Ee(0,0));Ee.ONE=Object.freeze(new Ee(1,1));Ee.UNIT_X=Object.freeze(new Ee(1,0));Ee.UNIT_Y=Object.freeze(new Ee(0,1));Ee.prototype.clone=function(e){return Ee.clone(this,e)};Ee.prototype.equals=function(e){return Ee.equals(this,e)};Ee.prototype.equalsEpsilon=function(e,t,n){return Ee.equalsEpsilon(this,e,t,n)};Ee.prototype.toString=function(){return`(${this.x}, ${this.y})`};var we=Ee;var P0={};function fa(e,t){p(P0[e])||(P0[e]=!0,console.warn(E(t,e)))}fa.geometryOutlines="Entity geometry outlines are unsupported on terrain. Outlines will be disabled. To enable outlines, disable geometry terrain clamping by explicitly setting height to 0.";fa.geometryZIndex="Entity geometry with zIndex are unsupported when height or extrudedHeight are defined.  zIndex will be ignored";fa.geometryHeightReference="Entity corridor, ellipse, polygon or rectangle with heightReference must also have a defined height.  heightReference will be ignored";fa.geometryExtrudedHeightReference="Entity corridor, ellipse, polygon or rectangle with extrudedHeightReference must also have a defined extrudedHeight.  extrudedHeightReference will be ignored";var O0=fa;function sx(e,t){O0(e,t)}var I0=sx;function ax(){return!0}function cx(e,t){t=E(t,"This object was destroyed, i.e., destroy() was called.");function n(){}for(let i in e)typeof e[i]=="function"&&(e[i]=n);e.isDestroyed=ax}var kn=cx;function Bi(){this.high=y.clone(y.ZERO),this.low=y.clone(y.ZERO)}Bi.encode=function(e,t){p(t)||(t={high:0,low:0});let n;return e>=0?(n=Math.floor(e/65536)*65536,t.high=n,t.low=e-n):(n=Math.floor(-e/65536)*65536,t.high=-n,t.low=e+n),t};var so={high:0,low:0};Bi.fromCartesian=function(e,t){p(t)||(t=new Bi);let n=t.high,i=t.low;return Bi.encode(e.x,so),n.x=so.high,i.x=so.low,Bi.encode(e.y,so),n.y=so.high,i.y=so.low,Bi.encode(e.z,so),n.z=so.high,i.z=so.low,t};var Wf=new Bi;Bi.writeElements=function(e,t,n){Bi.fromCartesian(e,Wf);let i=Wf.high,o=Wf.low;t[n]=i.x,t[n+1]=i.y,t[n+2]=i.z,t[n+3]=o.x,t[n+4]=o.y,t[n+5]=o.z};var fs=Bi;var ux={NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3},fr=Object.freeze(ux);function xe(e,t,n,i){this[0]=E(e,0),this[1]=E(n,0),this[2]=E(t,0),this[3]=E(i,0)}xe.packedLength=4;xe.pack=function(e,t,n){return n=E(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t};xe.unpack=function(e,t,n){return t=E(t,0),p(n)||(n=new xe),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n};xe.packArray=function(e,t){let n=e.length,i=n*4;p(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)xe.pack(e[o],t,o*4);return t};xe.unpackArray=function(e,t){let n=e.length;p(t)?t.length=n/4:t=new Array(n/4);for(let i=0;i<n;i+=4){let o=i/4;t[o]=xe.unpack(e,i,t[o])}return t};xe.clone=function(e,t){if(p(e))return p(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new xe(e[0],e[2],e[1],e[3])};xe.fromArray=xe.unpack;xe.fromColumnMajorArray=function(e,t){return xe.clone(e,t)};xe.fromRowMajorArray=function(e,t){return p(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new xe(e[0],e[1],e[2],e[3])};xe.fromScale=function(e,t){return p(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new xe(e.x,0,0,e.y)};xe.fromUniformScale=function(e,t){return p(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new xe(e,0,0,e)};xe.fromRotation=function(e,t){let n=Math.cos(e),i=Math.sin(e);return p(t)?(t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t):new xe(n,-i,i,n)};xe.toArray=function(e,t){return p(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]};xe.getElementIndex=function(e,t){return e*2+t};xe.getColumn=function(e,t,n){let i=t*2,o=e[i],r=e[i+1];return n.x=o,n.y=r,n};xe.setColumn=function(e,t,n,i){i=xe.clone(e,i);let o=t*2;return i[o]=n.x,i[o+1]=n.y,i};xe.getRow=function(e,t,n){let i=e[t],o=e[t+2];return n.x=i,n.y=o,n};xe.setRow=function(e,t,n,i){return i=xe.clone(e,i),i[t]=n.x,i[t+2]=n.y,i};var lx=new we;xe.setScale=function(e,t,n){let i=xe.getScale(e,lx),o=t.x/i.x,r=t.y/i.y;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*r,n[3]=e[3]*r,n};var fx=new we;xe.setUniformScale=function(e,t,n){let i=xe.getScale(e,fx),o=t/i.x,r=t/i.y;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*r,n[3]=e[3]*r,n};var D0=new we;xe.getScale=function(e,t){return t.x=we.magnitude(we.fromElements(e[0],e[1],D0)),t.y=we.magnitude(we.fromElements(e[2],e[3],D0)),t};var M0=new we;xe.getMaximumScale=function(e){return xe.getScale(e,M0),we.maximumComponent(M0)};var dx=new we;xe.setRotation=function(e,t,n){let i=xe.getScale(e,dx);return n[0]=t[0]*i.x,n[1]=t[1]*i.x,n[2]=t[2]*i.y,n[3]=t[3]*i.y,n};var hx=new we;xe.getRotation=function(e,t){let n=xe.getScale(e,hx);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.y,t[3]=e[3]/n.y,t};xe.multiply=function(e,t,n){let i=e[0]*t[0]+e[2]*t[1],o=e[0]*t[2]+e[2]*t[3],r=e[1]*t[0]+e[3]*t[1],s=e[1]*t[2]+e[3]*t[3];return n[0]=i,n[1]=r,n[2]=o,n[3]=s,n};xe.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n};xe.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n};xe.multiplyByVector=function(e,t,n){let i=e[0]*t.x+e[2]*t.y,o=e[1]*t.x+e[3]*t.y;return n.x=i,n.y=o,n};xe.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n};xe.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.y,n[3]=e[3]*t.y,n};xe.multiplyByUniformScale=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n};xe.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t};xe.transpose=function(e,t){let n=e[0],i=e[2],o=e[1],r=e[3];return t[0]=n,t[1]=i,t[2]=o,t[3]=r,t};xe.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t};xe.equals=function(e,t){return e===t||p(e)&&p(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]};xe.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]};xe.equalsEpsilon=function(e,t,n){return n=E(n,0),e===t||p(e)&&p(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n};xe.IDENTITY=Object.freeze(new xe(1,0,0,1));xe.ZERO=Object.freeze(new xe(0,0,0,0));xe.COLUMN0ROW0=0;xe.COLUMN0ROW1=1;xe.COLUMN1ROW0=2;xe.COLUMN1ROW1=3;Object.defineProperties(xe.prototype,{length:{get:function(){return xe.packedLength}}});xe.prototype.clone=function(e){return xe.clone(this,e)};xe.prototype.equals=function(e){return xe.equals(this,e)};xe.prototype.equalsEpsilon=function(e,t){return xe.equalsEpsilon(this,e,t)};xe.prototype.toString=function(){return`(${this[0]}, ${this[2]})
(${this[1]}, ${this[3]})`};var Gn=xe;var dn={POINTS:L.POINTS,LINES:L.LINES,LINE_LOOP:L.LINE_LOOP,LINE_STRIP:L.LINE_STRIP,TRIANGLES:L.TRIANGLES,TRIANGLE_STRIP:L.TRIANGLE_STRIP,TRIANGLE_FAN:L.TRIANGLE_FAN};dn.isLines=function(e){return e===dn.LINES||e===dn.LINE_LOOP||e===dn.LINE_STRIP};dn.isTriangles=function(e){return e===dn.TRIANGLES||e===dn.TRIANGLE_STRIP||e===dn.TRIANGLE_FAN};dn.validate=function(e){return e===dn.POINTS||e===dn.LINES||e===dn.LINE_LOOP||e===dn.LINE_STRIP||e===dn.TRIANGLES||e===dn.TRIANGLE_STRIP||e===dn.TRIANGLE_FAN};var vt=Object.freeze(dn);function ue(e,t,n,i){this.x=E(e,0),this.y=E(t,0),this.z=E(n,0),this.w=E(i,0)}var da=new y;ue.fromAxisAngle=function(e,t,n){let i=t/2,o=Math.sin(i);da=y.normalize(e,da);let r=da.x*o,s=da.y*o,a=da.z*o,c=Math.cos(i);return p(n)?(n.x=r,n.y=s,n.z=a,n.w=c,n):new ue(r,s,a,c)};var px=[1,2,0],mx=new Array(3);ue.fromRotationMatrix=function(e,t){let n,i,o,r,s,a=e[_e.COLUMN0ROW0],c=e[_e.COLUMN1ROW1],l=e[_e.COLUMN2ROW2],d=a+c+l;if(d>0)n=Math.sqrt(d+1),s=.5*n,n=.5/n,i=(e[_e.COLUMN1ROW2]-e[_e.COLUMN2ROW1])*n,o=(e[_e.COLUMN2ROW0]-e[_e.COLUMN0ROW2])*n,r=(e[_e.COLUMN0ROW1]-e[_e.COLUMN1ROW0])*n;else{let h=px,g=0;c>a&&(g=1),l>a&&l>c&&(g=2);let C=h[g],b=h[C];n=Math.sqrt(e[_e.getElementIndex(g,g)]-e[_e.getElementIndex(C,C)]-e[_e.getElementIndex(b,b)]+1);let w=mx;w[g]=.5*n,n=.5/n,s=(e[_e.getElementIndex(b,C)]-e[_e.getElementIndex(C,b)])*n,w[C]=(e[_e.getElementIndex(C,g)]+e[_e.getElementIndex(g,C)])*n,w[b]=(e[_e.getElementIndex(b,g)]+e[_e.getElementIndex(g,b)])*n,i=-w[0],o=-w[1],r=-w[2]}return p(t)?(t.x=i,t.y=o,t.z=r,t.w=s,t):new ue(i,o,r,s)};var z0=new ue,N0=new ue,qf=new ue,L0=new ue;ue.fromHeadingPitchRoll=function(e,t){return L0=ue.fromAxisAngle(y.UNIT_X,e.roll,z0),qf=ue.fromAxisAngle(y.UNIT_Y,-e.pitch,t),t=ue.multiply(qf,L0,qf),N0=ue.fromAxisAngle(y.UNIT_Z,-e.heading,z0),ue.multiply(N0,t,t)};var Wc=new y,Yf=new y,vi=new ue,B0=new ue,qc=new ue;ue.packedLength=4;ue.pack=function(e,t,n){return n=E(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t};ue.unpack=function(e,t,n){return t=E(t,0),p(n)||(n=new ue),n.x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n};ue.packedInterpolationLength=3;ue.convertPackedArrayForInterpolation=function(e,t,n,i){ue.unpack(e,n*4,qc),ue.conjugate(qc,qc);for(let o=0,r=n-t+1;o<r;o++){let s=o*3;ue.unpack(e,(t+o)*4,vi),ue.multiply(vi,qc,vi),vi.w<0&&ue.negate(vi,vi),ue.computeAxis(vi,Wc);let a=ue.computeAngle(vi);p(i)||(i=[]),i[s]=Wc.x*a,i[s+1]=Wc.y*a,i[s+2]=Wc.z*a}};ue.unpackInterpolationResult=function(e,t,n,i,o){p(o)||(o=new ue),y.fromArray(e,0,Yf);let r=y.magnitude(Yf);return ue.unpack(t,i*4,B0),r===0?ue.clone(ue.IDENTITY,vi):ue.fromAxisAngle(Yf,r,vi),ue.multiply(vi,B0,o)};ue.clone=function(e,t){if(p(e))return p(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new ue(e.x,e.y,e.z,e.w)};ue.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t};ue.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w};ue.magnitude=function(e){return Math.sqrt(ue.magnitudeSquared(e))};ue.normalize=function(e,t){let n=1/ue.magnitude(e),i=e.x*n,o=e.y*n,r=e.z*n,s=e.w*n;return t.x=i,t.y=o,t.z=r,t.w=s,t};ue.inverse=function(e,t){let n=ue.magnitudeSquared(e);return t=ue.conjugate(e,t),ue.multiplyByScalar(t,1/n,t)};ue.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n};ue.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n};ue.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t};ue.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w};ue.multiply=function(e,t,n){let i=e.x,o=e.y,r=e.z,s=e.w,a=t.x,c=t.y,l=t.z,d=t.w,h=s*a+i*d+o*l-r*c,g=s*c-i*l+o*d+r*a,C=s*l+i*c-o*a+r*d,b=s*d-i*a-o*c-r*l;return n.x=h,n.y=g,n.z=C,n.w=b,n};ue.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n};ue.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n};ue.computeAxis=function(e,t){let n=e.w;if(Math.abs(n-1)<k.EPSILON6)return t.x=t.y=t.z=0,t;let i=1/Math.sqrt(1-n*n);return t.x=e.x*i,t.y=e.y*i,t.z=e.z*i,t};ue.computeAngle=function(e){return Math.abs(e.w-1)<k.EPSILON6?0:2*Math.acos(e.w)};var Zf=new ue;ue.lerp=function(e,t,n,i){return Zf=ue.multiplyByScalar(t,n,Zf),i=ue.multiplyByScalar(e,1-n,i),ue.add(Zf,i,i)};var F0=new ue,Xf=new ue,$f=new ue;ue.slerp=function(e,t,n,i){let o=ue.dot(e,t),r=t;if(o<0&&(o=-o,r=F0=ue.negate(t,F0)),1-o<k.EPSILON6)return ue.lerp(e,r,n,i);let s=Math.acos(o);return Xf=ue.multiplyByScalar(e,Math.sin((1-n)*s),Xf),$f=ue.multiplyByScalar(r,Math.sin(n*s),$f),i=ue.add(Xf,$f,i),ue.multiplyByScalar(i,1/Math.sin(s),i)};ue.log=function(e,t){let n=k.acosClamped(e.w),i=0;return n!==0&&(i=n/Math.sin(n)),y.multiplyByScalar(e,i,t)};ue.exp=function(e,t){let n=y.magnitude(e),i=0;return n!==0&&(i=Math.sin(n)/n),t.x=e.x*i,t.y=e.y*i,t.z=e.z*i,t.w=Math.cos(n),t};var gx=new y,yx=new y,ha=new ue,ds=new ue;ue.computeInnerQuadrangle=function(e,t,n,i){let o=ue.conjugate(t,ha);ue.multiply(o,n,ds);let r=ue.log(ds,gx);ue.multiply(o,e,ds);let s=ue.log(ds,yx);return y.add(r,s,r),y.multiplyByScalar(r,.25,r),y.negate(r,r),ue.exp(r,ha),ue.multiply(t,ha,i)};ue.squad=function(e,t,n,i,o,r){let s=ue.slerp(e,t,o,ha),a=ue.slerp(n,i,o,ds);return ue.slerp(s,a,2*o*(1-o),r)};var _x=new ue,V0=1.9011074535173003,Yc=yi.supportsTypedArrays()?new Float32Array(8):[],Zc=yi.supportsTypedArrays()?new Float32Array(8):[],ao=yi.supportsTypedArrays()?new Float32Array(8):[],co=yi.supportsTypedArrays()?new Float32Array(8):[];for(let e=0;e<7;++e){let t=e+1,n=2*t+1;Yc[e]=1/(t*n),Zc[e]=t/n}Yc[7]=V0/(8*17);Zc[7]=V0*8/17;ue.fastSlerp=function(e,t,n,i){let o=ue.dot(e,t),r;o>=0?r=1:(r=-1,o=-o);let s=o-1,a=1-n,c=n*n,l=a*a;for(let C=7;C>=0;--C)ao[C]=(Yc[C]*c-Zc[C])*s,co[C]=(Yc[C]*l-Zc[C])*s;let d=r*n*(1+ao[0]*(1+ao[1]*(1+ao[2]*(1+ao[3]*(1+ao[4]*(1+ao[5]*(1+ao[6]*(1+ao[7])))))))),h=a*(1+co[0]*(1+co[1]*(1+co[2]*(1+co[3]*(1+co[4]*(1+co[5]*(1+co[6]*(1+co[7])))))))),g=ue.multiplyByScalar(e,h,_x);return ue.multiplyByScalar(t,d,i),ue.add(g,i,i)};ue.fastSquad=function(e,t,n,i,o,r){let s=ue.fastSlerp(e,t,o,ha),a=ue.fastSlerp(n,i,o,ds);return ue.fastSlerp(s,a,2*o*(1-o),r)};ue.equals=function(e,t){return e===t||p(e)&&p(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w};ue.equalsEpsilon=function(e,t,n){return n=E(n,0),e===t||p(e)&&p(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n};ue.ZERO=Object.freeze(new ue(0,0,0,0));ue.IDENTITY=Object.freeze(new ue(0,0,0,1));ue.prototype.clone=function(e){return ue.clone(this,e)};ue.prototype.equals=function(e){return ue.equals(this,e)};ue.prototype.equalsEpsilon=function(e,t){return ue.equalsEpsilon(this,e,t)};ue.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};var Fi=ue;function vx(e,t,n){let i=0,o=e.length-1,r,s;for(;i<=o;){if(r=~~((i+o)/2),s=n(e[r],t),s<0){i=r+1;continue}if(s>0){o=r-1;continue}return r}return~(o+1)}var dr=vx;function Cx(e,t,n,i,o){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=i,this.ut1MinusUtc=o}var pa=Cx;function bx(e,t,n,i,o,r,s,a){this.year=e,this.month=t,this.day=n,this.hour=i,this.minute=o,this.second=r,this.millisecond=s,this.isLeapSecond=a}var Kf=bx;function Tx(e){return e%4===0&&e%100!==0||e%400===0}var Qf=Tx;function Ex(e,t){this.julianDate=e,this.offset=t}var pt=Ex;var wx={SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:24000005e-1},wt=Object.freeze(wx);var Sx={UTC:0,TAI:1},qe=Object.freeze(Sx);var k0=new Kf,Jf=[31,28,31,30,31,30,31,31,30,31,30,31],ed=29;function td(e,t){return Ce.compare(e.julianDate,t.julianDate)}var hs=new pt;function $c(e){hs.julianDate=e;let t=Ce.leapSeconds,n=dr(t,hs,td);n<0&&(n=~n),n>=t.length&&(n=t.length-1);let i=t[n].offset;n>0&&Ce.secondsDifference(t[n].julianDate,e)>i&&(n--,i=t[n].offset),Ce.addSeconds(e,i,e)}function U0(e,t){hs.julianDate=e;let n=Ce.leapSeconds,i=dr(n,hs,td);if(i<0&&(i=~i),i===0)return Ce.addSeconds(e,-n[0].offset,t);if(i>=n.length)return Ce.addSeconds(e,-n[i-1].offset,t);let o=Ce.secondsDifference(n[i].julianDate,e);if(o===0)return Ce.addSeconds(e,-n[i].offset,t);if(!(o<=1))return Ce.addSeconds(e,-n[--i].offset,t)}function Lo(e,t,n){let i=t/wt.SECONDS_PER_DAY|0;return e+=i,t-=wt.SECONDS_PER_DAY*i,t<0&&(e--,t+=wt.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function nd(e,t,n,i,o,r,s){let a=(t-14)/12|0,c=e+4800+a,l=(1461*c/4|0)+(367*(t-2-12*a)/12|0)-(3*((c+100)/100|0)/4|0)+n-32075;i=i-12,i<0&&(i+=24);let d=r+(i*wt.SECONDS_PER_HOUR+o*wt.SECONDS_PER_MINUTE+s*wt.SECONDS_PER_MILLISECOND);return d>=43200&&(l-=1),[l,d]}var xx=/^(\d{4})$/,Ax=/^(\d{4})-(\d{2})$/,Rx=/^(\d{4})-?(\d{3})$/,Px=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,Ox=/^(\d{4})-?(\d{2})-?(\d{2})$/,id=/([Z+\-])?(\d{2})?:?(\d{2})?$/,Ix=/^(\d{2})(\.\d+)?/.source+id.source,Dx=/^(\d{2}):?(\d{2})(\.\d+)?/.source+id.source,Mx=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+id.source;function Ce(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=E(e,0),t=E(t,0),n=E(n,qe.UTC);let i=e|0;t=t+(e-i)*wt.SECONDS_PER_DAY,Lo(i,t,this),n===qe.UTC&&$c(this)}Ce.fromGregorianDate=function(e,t){let n=nd(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return p(t)?(Lo(n[0],n[1],t),$c(t),t):new Ce(n[0],n[1],qe.UTC)};Ce.fromDate=function(e,t){let n=nd(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return p(t)?(Lo(n[0],n[1],t),$c(t),t):new Ce(n[0],n[1],qe.UTC)};Ce.fromIso8601=function(e,t){e=e.replace(",",".");let n=e.split("T"),i,o=1,r=1,s=0,a=0,c=0,l=0,d=n[0],h=n[1],g,C;if(n=d.match(Ox),n!==null)i=+n[1],o=+n[2],r=+n[3];else if(n=d.match(Ax),n!==null)i=+n[1],o=+n[2];else if(n=d.match(xx),n!==null)i=+n[1];else{let D;if(n=d.match(Rx),n!==null)i=+n[1],D=+n[2],C=Qf(i);else if(n=d.match(Px),n!==null){i=+n[1];let M=+n[2],z=+n[3]||0,U=new Date(Date.UTC(i,0,4));D=M*7+z-U.getUTCDay()-3}g=new Date(Date.UTC(i,0,1)),g.setUTCDate(D),o=g.getUTCMonth()+1,r=g.getUTCDate()}C=Qf(i);let b;if(p(h)){n=h.match(Mx),n!==null?(s=+n[1],a=+n[2],c=+n[3],l=+(n[4]||0)*1e3,b=5):(n=h.match(Dx),n!==null?(s=+n[1],a=+n[2],c=+(n[3]||0)*60,b=4):(n=h.match(Ix),n!==null&&(s=+n[1],a=+(n[2]||0)*60,b=3)));let D=n[b],M=+n[b+1],z=+(n[b+2]||0);switch(D){case"+":s=s-M,a=a-z;break;case"-":s=s+M,a=a+z;break;case"Z":break;default:a=a+new Date(Date.UTC(i,o-1,r,s,a)).getTimezoneOffset();break}}let w=c===60;for(w&&c--;a>=60;)a-=60,s++;for(;s>=24;)s-=24,r++;for(g=C&&o===2?ed:Jf[o-1];r>g;)r-=g,o++,o>12&&(o-=12,i++),g=C&&o===2?ed:Jf[o-1];for(;a<0;)a+=60,s--;for(;s<0;)s+=24,r--;for(;r<1;)o--,o<1&&(o+=12,i--),g=C&&o===2?ed:Jf[o-1],r+=g;let R=nd(i,o,r,s,a,c,l);return p(t)?(Lo(R[0],R[1],t),$c(t)):t=new Ce(R[0],R[1],qe.UTC),w&&Ce.addSeconds(t,1,t),t};Ce.now=function(e){return Ce.fromDate(new Date,e)};var Xc=new Ce(0,0,qe.TAI);Ce.toGregorianDate=function(e,t){let n=!1,i=U0(e,Xc);p(i)||(Ce.addSeconds(e,-1,Xc),i=U0(Xc,Xc),n=!0);let o=i.dayNumber,r=i.secondsOfDay;r>=43200&&(o+=1);let s=o+68569|0,a=4*s/146097|0;s=s-((146097*a+3)/4|0)|0;let c=4e3*(s+1)/1461001|0;s=s-(1461*c/4|0)+31|0;let l=80*s/2447|0,d=s-(2447*l/80|0)|0;s=l/11|0;let h=l+2-12*s|0,g=100*(a-49)+c+s|0,C=r/wt.SECONDS_PER_HOUR|0,b=r-C*wt.SECONDS_PER_HOUR,w=b/wt.SECONDS_PER_MINUTE|0;b=b-w*wt.SECONDS_PER_MINUTE;let R=b|0,D=(b-R)/wt.SECONDS_PER_MILLISECOND;return C+=12,C>23&&(C-=24),n&&(R+=1),p(t)?(t.year=g,t.month=h,t.day=d,t.hour=C,t.minute=w,t.second=R,t.millisecond=D,t.isLeapSecond=n,t):new Kf(g,h,d,C,w,R,D,n)};Ce.toDate=function(e){let t=Ce.toGregorianDate(e,k0),n=t.second;return t.isLeapSecond&&(n-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,n,t.millisecond))};Ce.toIso8601=function(e,t){let n=Ce.toGregorianDate(e,k0),i=n.year,o=n.month,r=n.day,s=n.hour,a=n.minute,c=n.second,l=n.millisecond;i===1e4&&o===1&&r===1&&s===0&&a===0&&c===0&&l===0&&(i=9999,o=12,r=31,s=24);let d;return!p(t)&&l!==0?(d=(l*.01).toString().replace(".",""),`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}T${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}.${d}Z`):!p(t)||t===0?`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}T${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}Z`:(d=(l*.01).toFixed(t).replace(".","").slice(0,t),`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}T${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}.${d}Z`)};Ce.clone=function(e,t){if(p(e))return p(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new Ce(e.dayNumber,e.secondsOfDay,qe.TAI)};Ce.compare=function(e,t){let n=e.dayNumber-t.dayNumber;return n!==0?n:e.secondsOfDay-t.secondsOfDay};Ce.equals=function(e,t){return e===t||p(e)&&p(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay};Ce.equalsEpsilon=function(e,t,n){return n=E(n,0),e===t||p(e)&&p(t)&&Math.abs(Ce.secondsDifference(e,t))<=n};Ce.totalDays=function(e){return e.dayNumber+e.secondsOfDay/wt.SECONDS_PER_DAY};Ce.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*wt.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)};Ce.daysDifference=function(e,t){let n=e.dayNumber-t.dayNumber,i=(e.secondsOfDay-t.secondsOfDay)/wt.SECONDS_PER_DAY;return n+i};Ce.computeTaiMinusUtc=function(e){hs.julianDate=e;let t=Ce.leapSeconds,n=dr(t,hs,td);return n<0&&(n=~n,--n,n<0&&(n=0)),t[n].offset};Ce.addSeconds=function(e,t,n){return Lo(e.dayNumber,e.secondsOfDay+t,n)};Ce.addMinutes=function(e,t,n){let i=e.secondsOfDay+t*wt.SECONDS_PER_MINUTE;return Lo(e.dayNumber,i,n)};Ce.addHours=function(e,t,n){let i=e.secondsOfDay+t*wt.SECONDS_PER_HOUR;return Lo(e.dayNumber,i,n)};Ce.addDays=function(e,t,n){let i=e.dayNumber+t;return Lo(i,e.secondsOfDay,n)};Ce.lessThan=function(e,t){return Ce.compare(e,t)<0};Ce.lessThanOrEquals=function(e,t){return Ce.compare(e,t)<=0};Ce.greaterThan=function(e,t){return Ce.compare(e,t)>0};Ce.greaterThanOrEquals=function(e,t){return Ce.compare(e,t)>=0};Ce.prototype.clone=function(e){return Ce.clone(this,e)};Ce.prototype.equals=function(e){return Ce.equals(this,e)};Ce.prototype.equalsEpsilon=function(e,t){return Ce.equalsEpsilon(this,e,t)};Ce.prototype.toString=function(){return Ce.toIso8601(this)};Ce.leapSeconds=[new pt(new Ce(2441317,43210,qe.TAI),10),new pt(new Ce(2441499,43211,qe.TAI),11),new pt(new Ce(2441683,43212,qe.TAI),12),new pt(new Ce(2442048,43213,qe.TAI),13),new pt(new Ce(2442413,43214,qe.TAI),14),new pt(new Ce(2442778,43215,qe.TAI),15),new pt(new Ce(2443144,43216,qe.TAI),16),new pt(new Ce(2443509,43217,qe.TAI),17),new pt(new Ce(2443874,43218,qe.TAI),18),new pt(new Ce(2444239,43219,qe.TAI),19),new pt(new Ce(2444786,43220,qe.TAI),20),new pt(new Ce(2445151,43221,qe.TAI),21),new pt(new Ce(2445516,43222,qe.TAI),22),new pt(new Ce(2446247,43223,qe.TAI),23),new pt(new Ce(2447161,43224,qe.TAI),24),new pt(new Ce(2447892,43225,qe.TAI),25),new pt(new Ce(2448257,43226,qe.TAI),26),new pt(new Ce(2448804,43227,qe.TAI),27),new pt(new Ce(2449169,43228,qe.TAI),28),new pt(new Ce(2449534,43229,qe.TAI),29),new pt(new Ce(2450083,43230,qe.TAI),30),new pt(new Ce(2450630,43231,qe.TAI),31),new pt(new Ce(2451179,43232,qe.TAI),32),new pt(new Ce(2453736,43233,qe.TAI),33),new pt(new Ce(2454832,43234,qe.TAI),34),new pt(new Ce(2456109,43235,qe.TAI),35),new pt(new Ce(2457204,43236,qe.TAI),36),new pt(new Ce(2457754,43237,qe.TAI),37)];var sn=Ce;var mg=Di(Bo(),1);function zx(e){return(e.length===0||e[e.length-1]!=="/")&&(e=`${e}/`),e}var Z0=zx;function Nx(){let e,t,n=new Promise(function(i,o){e=i,t=o});return{resolve:e,reject:t,promise:n}}var Ci=Nx;var X0=Di(Bo(),1);function od(e,t){let n;return typeof document<"u"&&(n=document),od._implementation(e,t,n)}od._implementation=function(e,t,n){if(!p(t)){if(typeof n>"u")return e;t=E(n.baseURI,n.location.href)}let i=new X0.default(e);return i.scheme()!==""?i.toString():i.absoluteTo(t).toString()};var eu=od;var $0=Di(Bo(),1);function Lx(e,t){let n="",i=e.lastIndexOf("/");return i!==-1&&(n=e.substring(0,i+1)),t&&(e=new $0.default(e),e.query().length!==0&&(n+=`?${e.query()}`),e.fragment().length!==0&&(n+=`#${e.fragment()}`)),n}var K0=Lx;var Q0=Di(Bo(),1);function Bx(e){let t=new Q0.default(e);t.normalize();let n=t.path(),i=n.lastIndexOf("/");return i!==-1&&(n=n.substr(i+1)),i=n.lastIndexOf("."),i===-1?n="":n=n.substr(i+1),n}var J0=Bx;var eg={};function Fx(e,t,n){p(t)||(t=e.width),p(n)||(n=e.height);let i=eg[t];p(i)||(i={},eg[t]=i);let o=i[n];if(!p(o)){let r=document.createElement("canvas");r.width=t,r.height=n,o=r.getContext("2d",{willReadFrequently:!0}),o.globalCompositeOperation="copy",i[n]=o}return o.drawImage(e,0,0,t,n),o.getImageData(0,0,t,n).data}var rd=Fx;var Vx=/^blob:/i;function Ux(e){return Vx.test(e)}var tu=Ux;var Vi;function kx(e){p(Vi)||(Vi=document.createElement("a")),Vi.href=window.location.href;let t=Vi.host,n=Vi.protocol;return Vi.href=e,Vi.href=Vi.href,n!==Vi.protocol||t!==Vi.host}var nu=kx;var Gx=/^data:/i;function Hx(e){return Gx.test(e)}var iu=Hx;function jx(e){let t=document.createElement("script");return t.async=!0,t.src=e,new Promise((n,i)=>{window.crossOriginIsolated&&t.setAttribute("crossorigin","anonymous");let o=document.getElementsByTagName("head")[0];t.onload=function(){t.onload=void 0,o.removeChild(t),n()},t.onerror=function(r){i(r)},o.appendChild(t)})}var tg=jx;function Wx(e){let t="";for(let n in e)if(e.hasOwnProperty(n)){let i=e[n],o=`${encodeURIComponent(n)}=`;if(Array.isArray(i))for(let r=0,s=i.length;r<s;++r)t+=`${o+encodeURIComponent(i[r])}&`;else t+=`${o+encodeURIComponent(i)}&`}return t=t.slice(0,-1),t}var ng=Wx;function qx(e){let t={};if(e==="")return t;let n=e.replace(/\+/g,"%20").split(/[&;]/);for(let i=0,o=n.length;i<o;++i){let r=n[i].split("="),s=decodeURIComponent(r[0]),a=r[1];p(a)?a=decodeURIComponent(a):a="";let c=t[s];typeof c=="string"?t[s]=[c,a]:Array.isArray(c)?c.push(a):t[s]=a}return t}var ig=qx;var Yx={UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5},Ot=Object.freeze(Yx);var Zx={TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3},og=Object.freeze(Zx);function ou(e){e=E(e,E.EMPTY_OBJECT);let t=E(e.throttleByServer,!1),n=E(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=E(e.priority,0),this.throttle=n,this.throttleByServer=t,this.type=E(e.type,og.OTHER),this.serverKey=e.serverKey,this.state=Ot.UNISSUED,this.deferred=void 0,this.cancelled=!1}ou.prototype.cancel=function(){this.cancelled=!0};ou.prototype.clone=function(e){return p(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=Ot.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new ou(this)};var rg=ou;function Xx(e){let t={};if(!e)return t;let n=e.split(`\r
`);for(let i=0;i<n.length;++i){let o=n[i],r=o.indexOf(": ");if(r>0){let s=o.substring(0,r),a=o.substring(r+2);t[s]=a}}return t}var sg=Xx;function ag(e,t,n){this.statusCode=e,this.response=t,this.responseHeaders=n,typeof this.responseHeaders=="string"&&(this.responseHeaders=sg(this.responseHeaders))}ag.prototype.toString=function(){let e="Request has failed.";return p(this.statusCode)&&(e+=` Status Code: ${this.statusCode}`),e};var ma=ag;var su=Di(Bo(),1);function ga(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}Object.defineProperties(ga.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}});ga.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);let n=this;return function(){n.removeEventListener(e,t)}};ga.prototype.removeEventListener=function(e,t){let n=this._listeners,i=this._scopes,o=-1;for(let r=0;r<n.length;r++)if(n[r]===e&&i[r]===t){o=r;break}return o!==-1?(this._insideRaiseEvent?(this._toRemove.push(o),n[o]=void 0,i[o]=void 0):(n.splice(o,1),i.splice(o,1)),!0):!1};function $x(e,t){return t-e}ga.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;let e,t=this._listeners,n=this._scopes,i=t.length;for(e=0;e<i;e++){let r=t[e];p(r)&&t[e].apply(n[e],arguments)}let o=this._toRemove;if(i=o.length,i>0){for(o.sort($x),e=0;e<i;e++){let r=o[e];t.splice(r,1),n.splice(r,1)}o.length=0}this._insideRaiseEvent=!1};var ru=ga;function hr(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}Object.defineProperties(hr.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){let t=this._length;if(e<t){let n=this._array;for(let i=e;i<t;++i)n[i]=void 0;this._length=e,n.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}});function sd(e,t,n){let i=e[t];e[t]=e[n],e[n]=i}hr.prototype.reserve=function(e){e=E(e,this._length),this._array.length=e};hr.prototype.heapify=function(e){e=E(e,0);let t=this._length,n=this._comparator,i=this._array,o=-1,r=!0;for(;r;){let s=2*(e+1),a=s-1;a<t&&n(i[a],i[e])<0?o=a:o=e,s<t&&n(i[s],i[o])<0&&(o=s),o!==e?(sd(i,o,e),e=o):r=!1}};hr.prototype.resort=function(){let e=this._length;for(let t=Math.ceil(e/2);t>=0;--t)this.heapify(t)};hr.prototype.insert=function(e){let t=this._array,n=this._comparator,i=this._maximumLength,o=this._length++;for(o<t.length?t[o]=e:t.push(e);o!==0;){let s=Math.floor((o-1)/2);if(n(t[o],t[s])<0)sd(t,o,s),o=s;else break}let r;return p(i)&&this._length>i&&(r=t[i],this._length=i),r};hr.prototype.pop=function(e){if(e=E(e,0),this._length===0)return;let t=this._array,n=t[e];return sd(t,e,--this._length),this.heapify(e),t[this._length]=void 0,n};var cg=hr;function Kx(e,t){return e.priority-t.priority}var lt={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},gs=20,wn=new cg({comparator:Kx});wn.maximumLength=gs;wn.reserve(gs);var Ui=[],uo={},Qx=typeof document<"u"?new su.default(document.location.href):new su.default,au=new ru;function At(){}At.maximumRequests=250;At.maximumRequestsPerServer=30;At.requestsByServer={"api.cesium.com:443":18,"assets.ion.cesium.com:443":18,"ibasemaps-api.arcgis.com:443":18,"tile.googleapis.com:443":18};At.throttleRequests=!0;At.debugShowStatistics=!1;At.requestCompletedEvent=au;Object.defineProperties(At,{statistics:{get:function(){return lt}},priorityHeapLength:{get:function(){return gs},set:function(e){if(e<gs)for(;wn.length>e;){let t=wn.pop();pr(t)}gs=e,wn.maximumLength=e,wn.reserve(e)}}});function ug(e){p(e.priorityFunction)&&(e.priority=e.priorityFunction())}At.serverHasOpenSlots=function(e,t){t=E(t,1);let n=E(At.requestsByServer[e],At.maximumRequestsPerServer);return uo[e]+t<=n};At.heapHasOpenSlots=function(e){return wn.length+e<=gs};function lg(e){return e.state===Ot.UNISSUED&&(e.state=Ot.ISSUED,e.deferred=Ci()),e.deferred.promise}function Jx(e){return function(t){if(e.state===Ot.CANCELLED)return;let n=e.deferred;--lt.numberOfActiveRequests,--uo[e.serverKey],au.raiseEvent(),e.state=Ot.RECEIVED,e.deferred=void 0,n.resolve(t)}}function eA(e){return function(t){e.state!==Ot.CANCELLED&&(++lt.numberOfFailedRequests,--lt.numberOfActiveRequests,--uo[e.serverKey],au.raiseEvent(t),e.state=Ot.FAILED,e.deferred.reject(t))}}function fg(e){let t=lg(e);return e.state=Ot.ACTIVE,Ui.push(e),++lt.numberOfActiveRequests,++lt.numberOfActiveRequestsEver,++uo[e.serverKey],e.requestFunction().then(Jx(e)).catch(eA(e)),t}function pr(e){let t=e.state===Ot.ACTIVE;if(e.state=Ot.CANCELLED,++lt.numberOfCancelledRequests,p(e.deferred)){let n=e.deferred;e.deferred=void 0,n.reject()}t&&(--lt.numberOfActiveRequests,--uo[e.serverKey],++lt.numberOfCancelledActiveRequests),p(e.cancelFunction)&&e.cancelFunction()}At.update=function(){let e,t,n=0,i=Ui.length;for(e=0;e<i;++e){if(t=Ui[e],t.cancelled&&pr(t),t.state!==Ot.ACTIVE){++n;continue}n>0&&(Ui[e-n]=t)}Ui.length-=n;let o=wn.internalArray,r=wn.length;for(e=0;e<r;++e)ug(o[e]);wn.resort();let s=Math.max(At.maximumRequests-Ui.length,0),a=0;for(;a<s&&wn.length>0;){if(t=wn.pop(),t.cancelled){pr(t);continue}if(t.throttleByServer&&!At.serverHasOpenSlots(t.serverKey)){pr(t);continue}fg(t),++a}tA()};At.getServerKey=function(e){let t=new su.default(e);t.scheme()===""&&(t=t.absoluteTo(Qx),t.normalize());let n=t.authority();/:/.test(n)||(n=`${n}:${t.scheme()==="https"?"443":"80"}`);let i=uo[n];return p(i)||(uo[n]=0),n};At.request=function(e){if(iu(e.url)||tu(e.url))return au.raiseEvent(),e.state=Ot.RECEIVED,e.requestFunction();if(++lt.numberOfAttemptedRequests,p(e.serverKey)||(e.serverKey=At.getServerKey(e.url)),At.throttleRequests&&e.throttleByServer&&!At.serverHasOpenSlots(e.serverKey))return;if(!At.throttleRequests||!e.throttle)return fg(e);if(Ui.length>=At.maximumRequests)return;ug(e);let t=wn.insert(e);if(p(t)){if(t===e)return;pr(t)}return lg(e)};function tA(){At.debugShowStatistics&&(lt.numberOfActiveRequests===0&&lt.lastNumberOfActiveRequests>0&&(lt.numberOfAttemptedRequests>0&&(console.log(`Number of attempted requests: ${lt.numberOfAttemptedRequests}`),lt.numberOfAttemptedRequests=0),lt.numberOfCancelledRequests>0&&(console.log(`Number of cancelled requests: ${lt.numberOfCancelledRequests}`),lt.numberOfCancelledRequests=0),lt.numberOfCancelledActiveRequests>0&&(console.log(`Number of cancelled active requests: ${lt.numberOfCancelledActiveRequests}`),lt.numberOfCancelledActiveRequests=0),lt.numberOfFailedRequests>0&&(console.log(`Number of failed requests: ${lt.numberOfFailedRequests}`),lt.numberOfFailedRequests=0)),lt.lastNumberOfActiveRequests=lt.numberOfActiveRequests)}At.clearForSpecs=function(){for(;wn.length>0;){let t=wn.pop();pr(t)}let e=Ui.length;for(let t=0;t<e;++t)pr(Ui[t]);Ui.length=0,uo={},lt.numberOfAttemptedRequests=0,lt.numberOfActiveRequests=0,lt.numberOfCancelledRequests=0,lt.numberOfCancelledActiveRequests=0,lt.numberOfFailedRequests=0,lt.numberOfActiveRequestsEver=0,lt.lastNumberOfActiveRequests=0};At.numberOfActiveRequestsByServer=function(e){return uo[e]};At.requestHeap=wn;var cu=At;var dg=Di(Bo(),1);var ya={},ys={};ya.add=function(e,t){let n=`${e.toLowerCase()}:${t}`;p(ys[n])||(ys[n]=!0)};ya.remove=function(e,t){let n=`${e.toLowerCase()}:${t}`;p(ys[n])&&delete ys[n]};function nA(e){let t=new dg.default(e);t.normalize();let n=t.authority();if(n.length!==0){if(t.authority(n),n.indexOf("@")!==-1&&(n=n.split("@")[1]),n.indexOf(":")===-1){let i=t.scheme();if(i.length===0&&(i=window.location.protocol,i=i.substring(0,i.length-1)),i==="http")n+=":80";else if(i==="https")n+=":443";else return}return n}}ya.contains=function(e){let t=nA(e);return!!(p(t)&&p(ys[t]))};ya.clear=function(){ys={}};var ad=ya;var gg=function(){try{let e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob",e.responseType==="blob"}catch{return!1}}();function ve(e){e=E(e,E.EMPTY_OBJECT),typeof e=="string"&&(e={url:e}),this._url=void 0,this._templateValues=ki(e.templateValues,{}),this._queryParameters=ki(e.queryParameters,{}),this.headers=ki(e.headers,{}),this.request=E(e.request,new rg),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=E(e.retryAttempts,0),this._retryCount=0,E(e.parseUrl,!0)?this.parseUrl(e.url,!0,!0):this._url=e.url,this._credits=e.credits}function ki(e,t){return p(e)?oi(e):t}ve.createIfNeeded=function(e){return e instanceof ve?e.getDerivedResource({request:e.request}):typeof e!="string"?e:new ve({url:e})};var _s;ve.supportsImageBitmapOptions=function(){if(p(_s))return _s;if(typeof createImageBitmap!="function")return _s=Promise.resolve(!1),_s;let e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAAE4g3rEiDgAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADElEQVQI12Ng6GAAAAEUAIngE3ZiAAAAAElFTkSuQmCC";return _s=ve.fetchBlob({url:e}).then(function(t){let n={imageOrientation:"flipY",premultiplyAlpha:"none",colorSpaceConversion:"none"};return Promise.all([createImageBitmap(t,n),createImageBitmap(t)])}).then(function(t){let n=rd(t[0]),i=rd(t[1]);return n[1]!==i[1]}).catch(function(){return!1}),_s};Object.defineProperties(ve,{isBlobSupported:{get:function(){return gg}}});Object.defineProperties(ve.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){this.parseUrl(e,!1,!1)}},extension:{get:function(){return J0(this._url)}},isDataUri:{get:function(){return iu(this._url)}},isBlobUri:{get:function(){return tu(this._url)}},isCrossOriginUrl:{get:function(){return nu(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}},credits:{get:function(){return this._credits}}});ve.prototype.toString=function(){return this.getUrlComponent(!0,!0)};ve.prototype.parseUrl=function(e,t,n,i){let o=new mg.default(e),r=iA(o.query());this._queryParameters=t?lu(r,this.queryParameters,n):r,o.search(""),o.fragment(""),p(i)&&o.scheme()===""&&(o=o.absoluteTo(eu(i))),this._url=o.toString()};function iA(e){return e.length===0?{}:e.indexOf("=")===-1?{[e]:void 0}:ig(e)}function lu(e,t,n){if(!n)return Un(e,t);let i=oi(e,!0);for(let o in t)if(t.hasOwnProperty(o)){let r=i[o],s=t[o];p(r)?(Array.isArray(r)||(r=i[o]=[r]),i[o]=r.concat(s)):i[o]=Array.isArray(s)?s.slice():s}return i}ve.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;let n=this._url;e&&(n=`${n}${oA(this.queryParameters)}`),n=n.replace(/%7B/g,"{").replace(/%7D/g,"}");let i=this._templateValues;return Object.keys(i).length>0&&(n=n.replace(/{(.*?)}/g,function(o,r){let s=i[r];return p(s)?encodeURIComponent(s):o})),t&&p(this.proxy)&&(n=this.proxy.getURL(n)),n};function oA(e){let t=Object.keys(e);return t.length===0?"":t.length===1&&!p(e[t[0]])?`?${t[0]}`:`?${ng(e)}`}ve.prototype.setQueryParameters=function(e,t){t?this._queryParameters=lu(this._queryParameters,e,!1):this._queryParameters=lu(e,this._queryParameters,!1)};ve.prototype.appendQueryParameters=function(e){this._queryParameters=lu(e,this._queryParameters,!0)};ve.prototype.setTemplateValues=function(e,t){t?this._templateValues=Un(this._templateValues,e):this._templateValues=Un(e,this._templateValues)};ve.prototype.getDerivedResource=function(e){let t=this.clone();if(t._retryCount=0,p(e.url)){let n=E(e.preserveQueryParameters,!1);t.parseUrl(e.url,!0,n,this._url)}return p(e.queryParameters)&&(t._queryParameters=Un(e.queryParameters,t.queryParameters)),p(e.templateValues)&&(t._templateValues=Un(e.templateValues,t.templateValues)),p(e.headers)&&(t.headers=Un(e.headers,t.headers)),p(e.proxy)&&(t.proxy=e.proxy),p(e.request)&&(t.request=e.request),p(e.retryCallback)&&(t.retryCallback=e.retryCallback),p(e.retryAttempts)&&(t.retryAttempts=e.retryAttempts),t};ve.prototype.retryOnError=function(e){let t=this.retryCallback;if(typeof t!="function"||this._retryCount>=this.retryAttempts)return Promise.resolve(!1);let n=this;return Promise.resolve(t(this,e)).then(function(i){return++n._retryCount,i})};ve.prototype.clone=function(e){return p(e)?(e._url=this._url,e._queryParameters=oi(this._queryParameters),e._templateValues=oi(this._templateValues),e.headers=oi(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e):new ve({url:this._url,queryParameters:this.queryParameters,templateValues:this.templateValues,headers:this.headers,proxy:this.proxy,retryCallback:this.retryCallback,retryAttempts:this.retryAttempts,request:this.request.clone(),parseUrl:!1,credits:p(this.credits)?this.credits.slice():void 0})};ve.prototype.getBaseUri=function(e){return K0(this.getUrlComponent(e),e)};ve.prototype.appendForwardSlash=function(){this._url=Z0(this._url)};ve.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})};ve.fetchArrayBuffer=function(e){return new ve(e).fetchArrayBuffer()};ve.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})};ve.fetchBlob=function(e){return new ve(e).fetchBlob()};ve.prototype.fetchImage=function(e){e=E(e,E.EMPTY_OBJECT);let t=E(e.preferImageBitmap,!1),n=E(e.preferBlob,!1),i=E(e.flipY,!1),o=E(e.skipColorSpaceConversion,!1);if(ud(this.request),!gg||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return cd({resource:this,flipY:i,skipColorSpaceConversion:o,preferImageBitmap:t});let r=this.fetchBlob();if(!p(r))return;let s,a,c,l;return ve.supportsImageBitmapOptions().then(function(d){return s=d,a=s&&t,r}).then(function(d){if(!p(d))return;if(l=d,a)return ve.createImageBitmapFromBlob(d,{flipY:i,premultiplyAlpha:!1,skipColorSpaceConversion:o});let h=window.URL.createObjectURL(d);return c=new ve({url:h}),cd({resource:c,flipY:i,skipColorSpaceConversion:o,preferImageBitmap:!1})}).then(function(d){if(p(d))return d.blob=l,a||window.URL.revokeObjectURL(c.url),d}).catch(function(d){return p(c)&&window.URL.revokeObjectURL(c.url),d.blob=l,Promise.reject(d)})};function cd(e){let t=e.resource,n=e.flipY,i=e.skipColorSpaceConversion,o=e.preferImageBitmap,r=t.request;r.url=t.url,r.requestFunction=function(){let a=!1;!t.isDataUri&&!t.isBlobUri&&(a=t.isCrossOriginUrl);let c=Ci();return ve._Implementations.createImage(r,a,c,n,i,o),c.promise};let s=cu.request(r);if(p(s))return s.catch(function(a){return r.state!==Ot.FAILED?Promise.reject(a):t.retryOnError(a).then(function(c){return c?(r.state=Ot.UNISSUED,r.deferred=void 0,cd({resource:t,flipY:n,skipColorSpaceConversion:i,preferImageBitmap:o})):Promise.reject(a)})})}ve.fetchImage=function(e){return new ve(e).fetchImage({flipY:e.flipY,skipColorSpaceConversion:e.skipColorSpaceConversion,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})};ve.prototype.fetchText=function(){return this.fetch({responseType:"text"})};ve.fetchText=function(e){return new ve(e).fetchText()};ve.prototype.fetchJson=function(){let e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(p(e))return e.then(function(t){if(p(t))return JSON.parse(t)})};ve.fetchJson=function(e){return new ve(e).fetchJson()};ve.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})};ve.fetchXML=function(e){return new ve(e).fetchXML()};ve.prototype.fetchJsonp=function(e){e=E(e,"callback"),ud(this.request);let t;do t=`loadJsonp${k.nextRandomNumber().toString().substring(2,8)}`;while(p(window[t]));return yg(this,e,t)};function yg(e,t,n){let i={};i[t]=n,e.setQueryParameters(i);let o=e.request,r=e.url;o.url=r,o.requestFunction=function(){let a=Ci();return window[n]=function(c){a.resolve(c);try{delete window[n]}catch{window[n]=void 0}},ve._Implementations.loadAndExecuteScript(r,n,a),a.promise};let s=cu.request(o);if(p(s))return s.catch(function(a){return o.state!==Ot.FAILED?Promise.reject(a):e.retryOnError(a).then(function(c){return c?(o.state=Ot.UNISSUED,o.deferred=void 0,yg(e,t,n)):Promise.reject(a)})})}ve.fetchJsonp=function(e){return new ve(e).fetchJsonp(e.callbackParameterName)};ve.prototype._makeRequest=function(e){let t=this;ud(t.request);let n=t.request,i=t.url;n.url=i,n.requestFunction=function(){let r=e.responseType,s=Un(e.headers,t.headers),a=e.overrideMimeType,c=e.method,l=e.data,d=Ci(),h=ve._Implementations.loadWithXhr(i,r,c,l,s,d,a);return p(h)&&p(h.abort)&&(n.cancelFunction=function(){h.abort()}),d.promise};let o=cu.request(n);if(p(o))return o.then(function(r){return n.cancelFunction=void 0,r}).catch(function(r){return n.cancelFunction=void 0,n.state!==Ot.FAILED?Promise.reject(r):t.retryOnError(r).then(function(s){return s?(n.state=Ot.UNISSUED,n.deferred=void 0,t.fetch(e)):Promise.reject(r)})})};function ud(e){if(e.state===Ot.ISSUED||e.state===Ot.ACTIVE)throw new Pt("The Resource is already being fetched.");e.state=Ot.UNISSUED,e.deferred=void 0}var rA=/^data:(.*?)(;base64)?,(.*)$/;function uu(e,t){let n=decodeURIComponent(t);return e?atob(n):n}function hg(e,t){let n=uu(e,t),i=new ArrayBuffer(n.length),o=new Uint8Array(i);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return i}function sA(e,t){t=E(t,"");let n=e[1],i=!!e[2],o=e[3],r,s;switch(t){case"":case"text":return uu(i,o);case"arraybuffer":return hg(i,o);case"blob":return r=hg(i,o),new Blob([r],{type:n});case"document":return s=new DOMParser,s.parseFromString(uu(i,o),n);case"json":return JSON.parse(uu(i,o));default:}}ve.prototype.fetch=function(e){return e=ki(e,{}),e.method="GET",this._makeRequest(e)};ve.fetch=function(e){return new ve(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})};ve.prototype.delete=function(e){return e=ki(e,{}),e.method="DELETE",this._makeRequest(e)};ve.delete=function(e){return new ve(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})};ve.prototype.head=function(e){return e=ki(e,{}),e.method="HEAD",this._makeRequest(e)};ve.head=function(e){return new ve(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})};ve.prototype.options=function(e){return e=ki(e,{}),e.method="OPTIONS",this._makeRequest(e)};ve.options=function(e){return new ve(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})};ve.prototype.post=function(e,t){return Do.defined("data",e),t=ki(t,{}),t.method="POST",t.data=e,this._makeRequest(t)};ve.post=function(e){return new ve(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})};ve.prototype.put=function(e,t){return Do.defined("data",e),t=ki(t,{}),t.method="PUT",t.data=e,this._makeRequest(t)};ve.put=function(e){return new ve(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})};ve.prototype.patch=function(e,t){return Do.defined("data",e),t=ki(t,{}),t.method="PATCH",t.data=e,this._makeRequest(t)};ve.patch=function(e){return new ve(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})};ve._Implementations={};ve._Implementations.loadImageElement=function(e,t,n){let i=new Image;i.crossOrigin="anonymous",i.onload=function(){i.naturalWidth===0&&i.naturalHeight===0&&i.width===0&&i.height===0&&(i.width=300,i.height=150),n.resolve(i)},i.onerror=function(o){n.reject(o)},t&&(ad.contains(e)?i.crossOrigin="use-credentials":i.crossOrigin=""),i.src=e};ve._Implementations.createImage=function(e,t,n,i,o,r){let s=e.url;ve.supportsImageBitmapOptions().then(function(a){if(!(a&&r)){ve._Implementations.loadImageElement(s,t,n);return}let c="blob",l="GET",d=Ci(),h=ve._Implementations.loadWithXhr(s,c,l,void 0,void 0,d,void 0,void 0,void 0);return p(h)&&p(h.abort)&&(e.cancelFunction=function(){h.abort()}),d.promise.then(function(g){if(!p(g)){n.reject(new Pt(`Successfully retrieved ${s} but it contained no content.`));return}return ve.createImageBitmapFromBlob(g,{flipY:i,premultiplyAlpha:!1,skipColorSpaceConversion:o})}).then(function(g){n.resolve(g)})}).catch(function(a){n.reject(a)})};ve.createImageBitmapFromBlob=function(e,t){return Do.defined("options",t),Do.typeOf.bool("options.flipY",t.flipY),Do.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),Do.typeOf.bool("options.skipColorSpaceConversion",t.skipColorSpaceConversion),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none",colorSpaceConversion:t.skipColorSpaceConversion?"none":"default"})};function pg(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}function aA(e,t,n,i,o,r,s){let a,c;Promise.all([import("url"),import("zlib")]).then(([l,d])=>(a=l.parse(e),c=d,a.protocol==="https:"?import("https"):import("http"))).then(l=>{let d={protocol:a.protocol,hostname:a.hostname,port:a.port,path:a.path,query:a.query,method:n,headers:o};l.request(d).on("response",function(h){if(h.statusCode<200||h.statusCode>=300){r.reject(new ma(h.statusCode,h,h.headers));return}let g=[];h.on("data",function(C){g.push(C)}),h.on("end",function(){let C=Buffer.concat(g);h.headers["content-encoding"]==="gzip"?c.gunzip(C,function(b,w){b?r.reject(new Pt("Error decompressing response.")):r.resolve(pg(w,t))}):r.resolve(pg(C,t))})}).on("error",function(h){r.reject(new ma)}).end()})}var cA=typeof XMLHttpRequest>"u";ve._Implementations.loadWithXhr=function(e,t,n,i,o,r,s){let a=rA.exec(e);if(a!==null){r.resolve(sA(a,t));return}if(cA){aA(e,t,n,i,o,r,s);return}let c=new XMLHttpRequest;if(ad.contains(e)&&(c.withCredentials=!0),c.open(n,e,!0),p(s)&&p(c.overrideMimeType)&&c.overrideMimeType(s),p(o))for(let d in o)o.hasOwnProperty(d)&&c.setRequestHeader(d,o[d]);p(t)&&(c.responseType=t);let l=!1;return typeof e=="string"&&(l=e.indexOf("file://")===0||typeof window<"u"&&window.location.origin==="file://"),c.onload=function(){if((c.status<200||c.status>=300)&&!(l&&c.status===0)){r.reject(new ma(c.status,c.response,c.getAllResponseHeaders()));return}let d=c.response,h=c.responseType;if(n==="HEAD"||n==="OPTIONS"){let C=c.getAllResponseHeaders().trim().split(/[\r\n]+/),b={};C.forEach(function(w){let R=w.split(": "),D=R.shift();b[D]=R.join(": ")}),r.resolve(b);return}if(c.status===204)r.resolve();else if(p(d)&&(!p(t)||h===t))r.resolve(d);else if(t==="json"&&typeof d=="string")try{r.resolve(JSON.parse(d))}catch(g){r.reject(g)}else(h===""||h==="document")&&p(c.responseXML)&&c.responseXML.hasChildNodes()?r.resolve(c.responseXML):(h===""||h==="text")&&p(c.responseText)?r.resolve(c.responseText):r.reject(new Pt("Invalid XMLHttpRequest response type."))},c.onerror=function(d){r.reject(new ma)},c.send(i),c};ve._Implementations.loadAndExecuteScript=function(e,t,n){return tg(e,t).catch(function(i){n.reject(i)})};ve._DefaultImplementations={};ve._DefaultImplementations.createImage=ve._Implementations.createImage;ve._DefaultImplementations.loadWithXhr=ve._Implementations.loadWithXhr;ve._DefaultImplementations.loadAndExecuteScript=ve._Implementations.loadAndExecuteScript;ve.DEFAULT=Object.freeze(new ve({url:typeof document>"u"?"":document.location.href.split("?")[0]}));var Gi=ve;function va(e){e=E(e,E.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._addNewLeapSeconds=E(e.addNewLeapSeconds,!0),p(e.data)?_g(this,e.data):_g(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}va.fromUrl=async function(e,t){t=E(t,E.EMPTY_OBJECT);let n=Gi.createIfNeeded(e),i;try{i=await n.fetchJson()}catch{throw new Pt(`An error occurred while retrieving the EOP data from the URL ${n.url}.`)}return new va({addNewLeapSeconds:t.addNewLeapSeconds,data:i})};va.NONE=Object.freeze({compute:function(e,t){return p(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new pa(0,0,0,0,0),t}});va.prototype.compute=function(e,t){if(!p(this._samples))return;if(p(t)||(t=new pa(0,0,0,0,0)),this._samples.length===0)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;let n=this._dates,i=this._lastIndex,o=0,r=0;if(p(i)){let a=n[i],c=n[i+1],l=sn.lessThanOrEquals(a,e),d=!p(c),h=d||sn.greaterThanOrEquals(c,e);if(l&&h)return o=i,!d&&c.equals(e)&&++o,r=o+1,Cg(this,n,this._samples,e,o,r,t),t}let s=dr(n,e,sn.compare,this._dateColumn);return s>=0?(s<n.length-1&&n[s+1].equals(e)&&++s,o=s,r=s):(r=~s,o=r-1,o<0&&(o=0)),this._lastIndex=o,Cg(this,n,this._samples,e,o,r,t),t};function uA(e,t){return sn.compare(e.julianDate,t)}function _g(e,t){if(!p(t.columnNames))throw new Pt("Error in loaded EOP data: The columnNames property is required.");if(!p(t.samples))throw new Pt("Error in loaded EOP data: The samples property is required.");let n=t.columnNames.indexOf("modifiedJulianDateUtc"),i=t.columnNames.indexOf("xPoleWanderRadians"),o=t.columnNames.indexOf("yPoleWanderRadians"),r=t.columnNames.indexOf("ut1MinusUtcSeconds"),s=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),a=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),c=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||i<0||o<0||r<0||s<0||a<0||c<0)throw new Pt("Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns");let l=e._samples=t.samples,d=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=i,e._yPoleWanderRadiansColumn=o,e._ut1MinusUtcSecondsColumn=r,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=a,e._taiMinusUtcSecondsColumn=c,e._columnCount=t.columnNames.length,e._lastIndex=void 0;let h,g=e._addNewLeapSeconds;for(let C=0,b=l.length;C<b;C+=e._columnCount){let w=l[C+n],R=l[C+c],D=w+wt.MODIFIED_JULIAN_DATE_DIFFERENCE,M=new sn(D,R,qe.TAI);if(d.push(M),g){if(R!==h&&p(h)){let z=sn.leapSeconds,U=dr(z,M,uA);if(U<0){let Y=new pt(M,R);z.splice(~U,0,Y)}}h=R}}}function vg(e,t,n,i,o){let r=n*i;o.xPoleWander=t[r+e._xPoleWanderRadiansColumn],o.yPoleWander=t[r+e._yPoleWanderRadiansColumn],o.xPoleOffset=t[r+e._xCelestialPoleOffsetRadiansColumn],o.yPoleOffset=t[r+e._yCelestialPoleOffsetRadiansColumn],o.ut1MinusUtc=t[r+e._ut1MinusUtcSecondsColumn]}function _a(e,t,n){return t+e*(n-t)}function Cg(e,t,n,i,o,r,s){let a=e._columnCount;if(r>t.length-1)return s.xPoleWander=0,s.yPoleWander=0,s.xPoleOffset=0,s.yPoleOffset=0,s.ut1MinusUtc=0,s;let c=t[o],l=t[r];if(c.equals(l)||i.equals(c))return vg(e,n,o,a,s),s;if(i.equals(l))return vg(e,n,r,a,s),s;let d=sn.secondsDifference(i,c)/sn.secondsDifference(l,c),h=o*a,g=r*a,C=n[h+e._ut1MinusUtcSecondsColumn],b=n[g+e._ut1MinusUtcSecondsColumn],w=b-C;if(w>.5||w<-.5){let R=n[h+e._taiMinusUtcSecondsColumn],D=n[g+e._taiMinusUtcSecondsColumn];R!==D&&(l.equals(i)?C=b:b-=D-R)}return s.xPoleWander=_a(d,n[h+e._xPoleWanderRadiansColumn],n[g+e._xPoleWanderRadiansColumn]),s.yPoleWander=_a(d,n[h+e._yPoleWanderRadiansColumn],n[g+e._yPoleWanderRadiansColumn]),s.xPoleOffset=_a(d,n[h+e._xCelestialPoleOffsetRadiansColumn],n[g+e._xCelestialPoleOffsetRadiansColumn]),s.yPoleOffset=_a(d,n[h+e._yCelestialPoleOffsetRadiansColumn],n[g+e._yCelestialPoleOffsetRadiansColumn]),s.ut1MinusUtc=_a(d,C,b),s}var bg=va;function Sn(e,t,n){this.heading=E(e,0),this.pitch=E(t,0),this.roll=E(n,0)}Sn.fromQuaternion=function(e,t){p(t)||(t=new Sn);let n=2*(e.w*e.y-e.z*e.x),i=1-2*(e.x*e.x+e.y*e.y),o=2*(e.w*e.x+e.y*e.z),r=1-2*(e.y*e.y+e.z*e.z),s=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(s,r),t.roll=Math.atan2(o,i),t.pitch=-k.asinClamped(n),t};Sn.fromDegrees=function(e,t,n,i){return p(i)||(i=new Sn),i.heading=e*k.RADIANS_PER_DEGREE,i.pitch=t*k.RADIANS_PER_DEGREE,i.roll=n*k.RADIANS_PER_DEGREE,i};Sn.clone=function(e,t){if(p(e))return p(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new Sn(e.heading,e.pitch,e.roll)};Sn.equals=function(e,t){return e===t||p(e)&&p(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll};Sn.equalsEpsilon=function(e,t,n,i){return e===t||p(e)&&p(t)&&k.equalsEpsilon(e.heading,t.heading,n,i)&&k.equalsEpsilon(e.pitch,t.pitch,n,i)&&k.equalsEpsilon(e.roll,t.roll,n,i)};Sn.prototype.clone=function(e){return Sn.clone(this,e)};Sn.prototype.equals=function(e){return Sn.equals(this,e)};Sn.prototype.equalsEpsilon=function(e,t,n){return Sn.equalsEpsilon(this,e,t,n)};Sn.prototype.toString=function(){return`(${this.heading}, ${this.pitch}, ${this.roll})`};var ld=Sn;var Tg=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function lA(){let e=document.getElementsByTagName("script");for(let t=0,n=e.length;t<n;++t){let i=e[t].getAttribute("src"),o=Tg.exec(i);if(o!==null)return o[1]}}var vs;function Eg(e){return typeof document>"u"?e:(p(vs)||(vs=document.createElement("a")),vs.href=e,vs.href=vs.href,vs.href)}var mr;function wg(){if(p(mr))return mr;let e;return typeof CESIUM_BASE_URL<"u"?e=CESIUM_BASE_URL:typeof define=="object"&&p(define.amd)&&!define.amd.toUrlUndefined&&p(Ya.toUrl)?e=eu("..",gr("Core/buildModuleUrl.js")):e=lA(),mr=new Gi({url:Eg(e)}),mr.appendForwardSlash(),mr}function fA(e){return Eg(Ya.toUrl(`../${e}`))}function Sg(e){return wg().getDerivedResource({url:e}).url}var fu;function gr(e){return p(fu)||(typeof define=="object"&&p(define.amd)&&!define.amd.toUrlUndefined&&p(Ya.toUrl)?fu=fA:fu=Sg),fu(e)}gr._cesiumScriptRegex=Tg;gr._buildModuleUrlFromBaseUrl=Sg;gr._clearBaseResource=function(){mr=void 0};gr.setBaseUrl=function(e){mr=Gi.DEFAULT.getDerivedResource({url:e})};gr.getCesiumBaseUrl=wg;var lo=gr;function dA(e,t,n){this.x=e,this.y=t,this.s=n}var du=dA;function hd(e){e=E(e,E.EMPTY_OBJECT),this._xysFileUrlTemplate=Gi.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=E(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=E(e.sampleZeroJulianEphemerisDate,24423965e-1),this._sampleZeroDateTT=new sn(this._sampleZeroJulianEphemerisDate,0,qe.TAI),this._stepSizeDays=E(e.stepSizeDays,1),this._samplesPerXysFile=E(e.samplesPerXysFile,1e3),this._totalSamples=E(e.totalSamples,27426),this._samples=new Array(this._totalSamples*3),this._chunkDownloadsInProgress=[];let t=this._interpolationOrder,n=this._denominators=new Array(t+1),i=this._xTable=new Array(t+1),o=Math.pow(this._stepSizeDays,t);for(let r=0;r<=t;++r){n[r]=o,i[r]=r*this._stepSizeDays;for(let s=0;s<=t;++s)s!==r&&(n[r]*=r-s);n[r]=1/n[r]}this._work=new Array(t+1),this._coef=new Array(t+1)}var hA=new sn(0,0,qe.TAI);function fd(e,t,n){let i=hA;return i.dayNumber=t,i.secondsOfDay=n,sn.daysDifference(i,e._sampleZeroDateTT)}hd.prototype.preload=function(e,t,n,i){let o=fd(this,e,t),r=fd(this,n,i),s=o/this._stepSizeDays-this._interpolationOrder/2|0;s<0&&(s=0);let a=r/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;a>=this._totalSamples&&(a=this._totalSamples-1);let c=s/this._samplesPerXysFile|0,l=a/this._samplesPerXysFile|0,d=[];for(let h=c;h<=l;++h)d.push(dd(this,h));return Promise.all(d)};hd.prototype.computeXysRadians=function(e,t,n){let i=fd(this,e,t);if(i<0)return;let o=i/this._stepSizeDays|0;if(o>=this._totalSamples)return;let r=this._interpolationOrder,s=o-(r/2|0);s<0&&(s=0);let a=s+r;a>=this._totalSamples&&(a=this._totalSamples-1,s=a-r,s<0&&(s=0));let c=!1,l=this._samples;if(p(l[s*3])||(dd(this,s/this._samplesPerXysFile|0),c=!0),p(l[a*3])||(dd(this,a/this._samplesPerXysFile|0),c=!0),c)return;p(n)?(n.x=0,n.y=0,n.s=0):n=new du(0,0,0);let d=i-s*this._stepSizeDays,h=this._work,g=this._denominators,C=this._coef,b=this._xTable,w,R;for(w=0;w<=r;++w)h[w]=d-b[w];for(w=0;w<=r;++w){for(C[w]=1,R=0;R<=r;++R)R!==w&&(C[w]*=h[R]);C[w]*=g[w];let D=(s+w)*3;n.x+=C[w]*l[D++],n.y+=C[w]*l[D++],n.s+=C[w]*l[D]}return n};function dd(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];let n,i=e._xysFileUrlTemplate;p(i)?n=i.getDerivedResource({templateValues:{0:t}}):n=new Gi({url:lo(`Assets/IAU2006_XYS/IAU2006_XYS_${t}.json`)});let o=n.fetchJson().then(function(r){e._chunkDownloadsInProgress[t]=!1;let s=e._samples,a=r.samples,c=t*e._samplesPerXysFile*3;for(let l=0,d=a.length;l<d;++l)s[c+l]=a[l]});return e._chunkDownloadsInProgress[t]=o,o}var xg=hd;var at={},pd={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Cs={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},md={},Hn={east:new y,north:new y,up:new y,west:new y,south:new y,down:new y},Fo=new y,Vo=new y,Uo=new y;at.localFrameToFixedFrameGenerator=function(e,t){if(!pd.hasOwnProperty(e)||!pd[e].hasOwnProperty(t))throw new fn("firstAxis and secondAxis must be east, north, up, west, south or down.");let n=pd[e][t],i,o=e+t;return p(md[o])?i=md[o]:(i=function(r,s,a){if(p(a)||(a=new pe),y.equalsEpsilon(r,y.ZERO,k.EPSILON14))y.unpack(Cs[e],0,Fo),y.unpack(Cs[t],0,Vo),y.unpack(Cs[n],0,Uo);else if(k.equalsEpsilon(r.x,0,k.EPSILON14)&&k.equalsEpsilon(r.y,0,k.EPSILON14)){let c=k.sign(r.z);y.unpack(Cs[e],0,Fo),e!=="east"&&e!=="west"&&y.multiplyByScalar(Fo,c,Fo),y.unpack(Cs[t],0,Vo),t!=="east"&&t!=="west"&&y.multiplyByScalar(Vo,c,Vo),y.unpack(Cs[n],0,Uo),n!=="east"&&n!=="west"&&y.multiplyByScalar(Uo,c,Uo)}else{s=E(s,Dn.WGS84),s.geodeticSurfaceNormal(r,Hn.up);let c=Hn.up,l=Hn.east;l.x=-r.y,l.y=r.x,l.z=0,y.normalize(l,Hn.east),y.cross(c,l,Hn.north),y.multiplyByScalar(Hn.up,-1,Hn.down),y.multiplyByScalar(Hn.east,-1,Hn.west),y.multiplyByScalar(Hn.north,-1,Hn.south),Fo=Hn[e],Vo=Hn[t],Uo=Hn[n]}return a[0]=Fo.x,a[1]=Fo.y,a[2]=Fo.z,a[3]=0,a[4]=Vo.x,a[5]=Vo.y,a[6]=Vo.z,a[7]=0,a[8]=Uo.x,a[9]=Uo.y,a[10]=Uo.z,a[11]=0,a[12]=r.x,a[13]=r.y,a[14]=r.z,a[15]=1,a},md[o]=i),i};at.eastNorthUpToFixedFrame=at.localFrameToFixedFrameGenerator("east","north");at.northEastDownToFixedFrame=at.localFrameToFixedFrameGenerator("north","east");at.northUpEastToFixedFrame=at.localFrameToFixedFrameGenerator("north","up");at.northWestUpToFixedFrame=at.localFrameToFixedFrameGenerator("north","west");var pA=new Fi,mA=new y(1,1,1),gA=new pe;at.headingPitchRollToFixedFrame=function(e,t,n,i,o){i=E(i,at.eastNorthUpToFixedFrame);let r=Fi.fromHeadingPitchRoll(t,pA),s=pe.fromTranslationQuaternionRotationScale(y.ZERO,r,mA,gA);return o=i(e,n,o),pe.multiply(o,s,o)};var yA=new pe,_A=new _e;at.headingPitchRollQuaternion=function(e,t,n,i,o){let r=at.headingPitchRollToFixedFrame(e,t,n,i,yA),s=pe.getMatrix3(r,_A);return Fi.fromRotationMatrix(s,o)};var vA=new y(1,1,1),CA=new y,Ag=new pe,bA=new pe,TA=new _e,EA=new Fi;at.fixedFrameToHeadingPitchRoll=function(e,t,n,i){t=E(t,Dn.WGS84),n=E(n,at.eastNorthUpToFixedFrame),p(i)||(i=new ld);let o=pe.getTranslation(e,CA);if(y.equals(o,y.ZERO))return i.heading=0,i.pitch=0,i.roll=0,i;let r=pe.inverseTransformation(n(o,t,Ag),Ag),s=pe.setScale(e,vA,bA);s=pe.setTranslation(s,y.ZERO,s),r=pe.multiply(r,s,r);let a=Fi.fromRotationMatrix(pe.getMatrix3(r,TA),EA);return a=Fi.normalize(a,a),ld.fromQuaternion(a,i)};var wA=6*3600+41*60+50.54841,SA=8640184812866e-6,xA=.093104,AA=-62e-7,RA=11772758384668e-32,PA=72921158553e-15,OA=k.TWO_PI/86400,hu=new sn;at.computeTemeToPseudoFixedMatrix=function(e,t){hu=sn.addSeconds(e,-sn.computeTaiMinusUtc(e),hu);let n=hu.dayNumber,i=hu.secondsOfDay,o,r=n-2451545;i>=43200?o=(r+.5)/wt.DAYS_PER_JULIAN_CENTURY:o=(r-.5)/wt.DAYS_PER_JULIAN_CENTURY;let a=(wA+o*(SA+o*(xA+o*AA)))*OA%k.TWO_PI,c=PA+RA*(n-24515455e-1),l=(i+wt.SECONDS_PER_DAY*.5)%wt.SECONDS_PER_DAY,d=a+c*l,h=Math.cos(d),g=Math.sin(d);return p(t)?(t[0]=h,t[1]=-g,t[2]=0,t[3]=g,t[4]=h,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new _e(h,g,0,-g,h,0,0,0,1)};at.iau2006XysData=new xg;at.earthOrientationParameters=bg.NONE;var _d=32.184,IA=2451545;at.preloadIcrfFixed=function(e){let t=e.start.dayNumber,n=e.start.secondsOfDay+_d,i=e.stop.dayNumber,o=e.stop.secondsOfDay+_d;return at.iau2006XysData.preload(t,n,i,o)};at.computeIcrfToFixedMatrix=function(e,t){p(t)||(t=new _e);let n=at.computeFixedToIcrfMatrix(e,t);if(p(n))return _e.transpose(n,t)};var DA=new du(0,0,0),MA=new pa(0,0,0,0,0,0),gd=new _e,yd=new _e;at.computeFixedToIcrfMatrix=function(e,t){p(t)||(t=new _e);let n=at.earthOrientationParameters.compute(e,MA);if(!p(n))return;let i=e.dayNumber,o=e.secondsOfDay+_d,r=at.iau2006XysData.computeXysRadians(i,o,DA);if(!p(r))return;let s=r.x+n.xPoleOffset,a=r.y+n.yPoleOffset,c=1/(1+Math.sqrt(1-s*s-a*a)),l=gd;l[0]=1-c*s*s,l[3]=-c*s*a,l[6]=s,l[1]=-c*s*a,l[4]=1-c*a*a,l[7]=a,l[2]=-s,l[5]=-a,l[8]=1-c*(s*s+a*a);let d=_e.fromRotationZ(-r.s,yd),h=_e.multiply(l,d,gd),g=e.dayNumber,C=e.secondsOfDay-sn.computeTaiMinusUtc(e)+n.ut1MinusUtc,b=g-2451545,w=C/wt.SECONDS_PER_DAY,R=.779057273264+w+.00273781191135448*(b+w);R=R%1*k.TWO_PI;let D=_e.fromRotationZ(R,yd),M=_e.multiply(h,D,gd),z=Math.cos(n.xPoleWander),U=Math.cos(n.yPoleWander),Y=Math.sin(n.xPoleWander),m=Math.sin(n.yPoleWander),Q=i-IA+o/wt.SECONDS_PER_DAY;Q/=36525;let q=-47e-6*Q*k.RADIANS_PER_DEGREE/3600,Z=Math.cos(q),H=Math.sin(q),K=yd;return K[0]=z*Z,K[1]=z*H,K[2]=Y,K[3]=-U*H+m*Y*Z,K[4]=U*Z+m*Y*H,K[5]=-m*z,K[6]=-m*H-U*Y*Z,K[7]=m*Z-U*Y*H,K[8]=U*z,_e.multiply(M,K,t)};var zA=new Ie;at.pointToWindowCoordinates=function(e,t,n,i){return i=at.pointToGLWindowCoordinates(e,t,n,i),i.y=2*t[5]-i.y,i};at.pointToGLWindowCoordinates=function(e,t,n,i){p(i)||(i=new we);let o=zA;return pe.multiplyByVector(e,Ie.fromElements(n.x,n.y,n.z,1,o),o),Ie.multiplyByScalar(o,1/o.w,o),pe.multiplyByVector(t,o,o),we.fromCartesian4(o,i)};var NA=new y,LA=new y,BA=new y;at.rotationMatrixFromPositionVelocity=function(e,t,n,i){let o=E(n,Dn.WGS84).geodeticSurfaceNormal(e,NA),r=y.cross(t,o,LA);y.equalsEpsilon(r,y.ZERO,k.EPSILON6)&&(r=y.clone(y.UNIT_X,r));let s=y.cross(r,t,BA);return y.normalize(s,s),y.cross(t,s,r),y.negate(r,r),y.normalize(r,r),p(i)||(i=new _e),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=r.x,i[4]=r.y,i[5]=r.z,i[6]=s.x,i[7]=s.y,i[8]=s.z,i};var Rg=new pe(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),Pg=new rt,Og=new y,FA=new y,VA=new _e,vd=new pe,Ig=new pe;at.basisTo2D=function(e,t,n){let i=pe.getTranslation(t,FA),o=e.ellipsoid,r=o.cartesianToCartographic(i,Pg),s=e.project(r,Og);y.fromElements(s.z,s.x,s.y,s);let a=at.eastNorthUpToFixedFrame(i,o,vd),c=pe.inverseTransformation(a,Ig),l=pe.getMatrix3(t,VA),d=pe.multiplyByMatrix3(c,l,n);return pe.multiply(Rg,d,n),pe.setTranslation(n,s,n),n};at.wgs84To2DModelMatrix=function(e,t,n){let i=e.ellipsoid,o=at.eastNorthUpToFixedFrame(t,i,vd),r=pe.inverseTransformation(o,Ig),s=i.cartesianToCartographic(t,Pg),a=e.project(s,Og);y.fromElements(a.z,a.x,a.y,a);let c=pe.fromTranslation(a,vd);return pe.multiply(Rg,r,n),pe.multiply(c,n,n),n};var Dg=at;function Cd(e){e=E(e,E.EMPTY_OBJECT),this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=E(e.primitiveType,vt.TRIANGLES),this.boundingSphere=e.boundingSphere,this.geometryType=E(e.geometryType,fr.NONE),this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}Cd.computeNumberOfVertices=function(e){let t=-1;for(let n in e.attributes)if(e.attributes.hasOwnProperty(n)&&p(e.attributes[n])&&p(e.attributes[n].values)){let i=e.attributes[n];t=i.values.length/i.componentsPerAttribute}return t};var UA=new rt,kA=new y,Mg=new pe,GA=[new rt,new rt,new rt],HA=[new we,new we,new we],jA=[new we,new we,new we],WA=new y,qA=new Fi,YA=new pe,ZA=new Gn;Cd._textureCoordinateRotationPoints=function(e,t,n,i){let o,r=ro.center(i,UA),s=rt.toCartesian(r,n,kA),a=Dg.eastNorthUpToFixedFrame(s,n,Mg),c=pe.inverse(a,Mg),l=HA,d=GA;d[0].longitude=i.west,d[0].latitude=i.south,d[1].longitude=i.west,d[1].latitude=i.north,d[2].longitude=i.east,d[2].latitude=i.south;let h=WA;for(o=0;o<3;o++)rt.toCartesian(d[o],n,h),h=pe.multiplyByPointAsVector(c,h,h),l[o].x=h.x,l[o].y=h.y;let g=Fi.fromAxisAngle(y.UNIT_Z,-t,qA),C=_e.fromQuaternion(g,YA),b=e.length,w=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY,D=Number.NEGATIVE_INFINITY,M=Number.NEGATIVE_INFINITY;for(o=0;o<b;o++)h=pe.multiplyByPointAsVector(c,e[o],h),h=_e.multiplyByVector(C,h,h),w=Math.min(w,h.x),R=Math.min(R,h.y),D=Math.max(D,h.x),M=Math.max(M,h.y);let z=Gn.fromRotation(t,ZA),U=jA;U[0].x=w,U[0].y=R,U[1].x=w,U[1].y=M,U[2].x=D,U[2].y=R;let Y=l[0],m=l[2].x-Y.x,Q=l[1].y-Y.y;for(o=0;o<3;o++){let v=U[o];Gn.multiplyByVector(z,v,v),v.x=(v.x-Y.x)/m,v.y=(v.y-Y.y)/Q}let q=U[0],Z=U[1],H=U[2],K=new Array(6);return we.pack(q,K),we.pack(Z,K,2),we.pack(H,K,4),K};var Rt=Cd;function XA(e){e=E(e,E.EMPTY_OBJECT),this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=E(e.normalize,!1),this.values=e.values}var It=XA;function $A(e){e=E(e,E.EMPTY_OBJECT),this.position=e.position,this.normal=e.normal,this.st=e.st,this.bitangent=e.bitangent,this.tangent=e.tangent,this.color=e.color}var bs=$A;var KA={NONE:0,TOP:1,ALL:2},Ca=Object.freeze(KA);function Jt(e,t){this.normal=y.clone(e),this.distance=t}Jt.fromPointNormal=function(e,t,n){let i=-y.dot(t,e);return p(n)?(y.clone(t,n.normal),n.distance=i,n):new Jt(t,i)};var QA=new y;Jt.fromCartesian4=function(e,t){let n=y.fromCartesian4(e,QA),i=e.w;return p(t)?(y.clone(n,t.normal),t.distance=i,t):new Jt(n,i)};Jt.getPointDistance=function(e,t){return y.dot(e.normal,t)+e.distance};var JA=new y;Jt.projectPointOntoPlane=function(e,t,n){p(n)||(n=new y);let i=Jt.getPointDistance(e,t),o=y.multiplyByScalar(e.normal,i,JA);return y.subtract(t,o,n)};var eR=new pe,tR=new Ie,nR=new y;Jt.transform=function(e,t,n){let i=e.normal,o=e.distance,r=pe.inverseTranspose(t,eR),s=Ie.fromElements(i.x,i.y,i.z,o,tR);s=pe.multiplyByVector(r,s,s);let a=y.fromCartesian4(s,nR);return s=Ie.divideByScalar(s,y.magnitude(a),s),Jt.fromCartesian4(s,n)};Jt.clone=function(e,t){return p(t)?(y.clone(e.normal,t.normal),t.distance=e.distance,t):new Jt(e.normal,e.distance)};Jt.equals=function(e,t){return e.distance===t.distance&&y.equals(e.normal,t.normal)};Jt.ORIGIN_XY_PLANE=Object.freeze(new Jt(y.UNIT_Z,0));Jt.ORIGIN_YZ_PLANE=Object.freeze(new Jt(y.UNIT_X,0));Jt.ORIGIN_ZX_PLANE=Object.freeze(new Jt(y.UNIT_Y,0));var ba=Jt;function iR(e,t){let n=[],i=e.length,o=0;for(;o<i;){let r=Math.ceil((i-o)/t--);n.push(e.slice(o,o+r)),o+=r}return n}var zg=iR;var Ng=Di(Bo(),1);function Lg(){if(!p(hn._canTransferArrayBuffer)){let e=new Worker(Fg("Workers/transferTypedArrayTest.js"));e.postMessage=E(e.webkitPostMessage,e.postMessage);let t=99,n=new Int8Array([t]);try{e.postMessage({array:n},[n.buffer])}catch{return hn._canTransferArrayBuffer=!1,hn._canTransferArrayBuffer}let i=Ci();e.onmessage=function(o){let r=o.data.array,s=p(r)&&r[0]===t;i.resolve(s),e.terminate(),hn._canTransferArrayBuffer=s},hn._canTransferArrayBuffer=i.promise}return hn._canTransferArrayBuffer}var Td=new ru;function Bg(e,t){--e._activeTasks;let n=t.id;if(!p(n))return;let i=e._deferreds,o=i[n];if(p(t.error)){let r=t.error;r.name==="RuntimeError"?(r=new Pt(t.error.message),r.stack=t.error.stack):r.name==="DeveloperError"&&(r=new fn(t.error.message),r.stack=t.error.stack),Td.raiseEvent(r),o.reject(r)}else Td.raiseEvent(),o.resolve(t.result);delete i[n]}function Fg(e){let t=lo(e);if(nu(t)){let n=`importScripts("${t}");`,i;try{i=new Blob([n],{type:"application/javascript"})}catch{let s=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,a=new s;a.append(n),i=a.getBlob("application/javascript")}t=(window.URL||window.webkitURL).createObjectURL(i)}return t}var bd;function oR(){return p(bd)||(bd=Fg("Workers/cesiumWorkerBootstrapper.js")),bd}function Vg(e){let t=new Worker(oR());t.postMessage=E(t.webkitPostMessage,t.postMessage);let n={loaderConfig:{paths:{Workers:lo("Workers")},baseUrl:lo.getCesiumBaseUrl().url},workerModule:e._workerPath};return t.postMessage(n),t.onmessage=function(i){Bg(e,i.data)},t}function rR(e,t){let n={modulePath:void 0,wasmBinaryFile:void 0,wasmBinary:void 0};if(!yi.supportsWebAssembly()){if(!p(t.fallbackModulePath))throw new Pt(`This browser does not support Web Assembly, and no backup module was provided for ${e._workerPath}`);return n.modulePath=lo(t.fallbackModulePath),Promise.resolve(n)}return n.modulePath=lo(t.modulePath),n.wasmBinaryFile=lo(t.wasmBinaryFile),Gi.fetchArrayBuffer({url:n.wasmBinaryFile}).then(function(i){return n.wasmBinary=i,n})}function hn(e,t){let n=new Ng.default(e);this._workerPath=n.scheme().length!==0&&n.fragment().length===0?e:hn._workerModulePrefix+e,this._maximumActiveTasks=E(t,Number.POSITIVE_INFINITY),this._activeTasks=0,this._deferreds={},this._nextID=0}var sR=[];hn.prototype.scheduleTask=function(e,t){if(p(this._worker)||(this._worker=Vg(this)),this._activeTasks>=this._maximumActiveTasks)return;++this._activeTasks;let n=this;return Promise.resolve(Lg()).then(function(i){p(t)?i||(t.length=0):t=sR;let o=n._nextID++,r=Ci();return n._deferreds[o]=r,n._worker.postMessage({id:o,parameters:e,canTransferArrayBuffer:i},t),r.promise})};hn.prototype.initWebAssemblyModule=function(e){p(this._worker)||(this._worker=Vg(this));let t=Ci(),n=this,i=this._worker;return rR(this,e).then(function(o){return Promise.resolve(Lg()).then(function(r){let s,a=o.wasmBinary;p(a)&&r&&(s=[a]),i.onmessage=function(c){i.onmessage=function(l){Bg(n,l.data)},t.resolve(c.data)},i.postMessage({webAssemblyConfig:o},s)})}),t.promise};hn.prototype.isDestroyed=function(){return!1};hn.prototype.destroy=function(){return p(this._worker)&&this._worker.terminate(),kn(this)};hn.taskCompletedEvent=Td;hn._defaultWorkerModulePrefix="Workers/";hn._workerModulePrefix=hn._defaultWorkerModulePrefix;hn._canTransferArrayBuffer=void 0;var Ed=hn;var pu={STREAM_DRAW:L.STREAM_DRAW,STATIC_DRAW:L.STATIC_DRAW,DYNAMIC_DRAW:L.DYNAMIC_DRAW,validate:function(e){return e===pu.STREAM_DRAW||e===pu.STATIC_DRAW||e===pu.DYNAMIC_DRAW}},mu=Object.freeze(pu);var Lt={CULL:1,OCCLUDE:2,EXECUTE_IN_CLOSEST_FRUSTUM:4,DEBUG_SHOW_BOUNDING_VOLUME:8,CAST_SHADOWS:16,RECEIVE_SHADOWS:32,PICK_ONLY:64,DEPTH_FOR_TRANSLUCENT_CLASSIFICATION:128};function Ta(e){e=E(e,E.EMPTY_OBJECT),this._boundingVolume=e.boundingVolume,this._orientedBoundingBox=e.orientedBoundingBox,this._modelMatrix=e.modelMatrix,this._primitiveType=E(e.primitiveType,vt.TRIANGLES),this._vertexArray=e.vertexArray,this._count=e.count,this._offset=E(e.offset,0),this._instanceCount=E(e.instanceCount,0),this._shaderProgram=e.shaderProgram,this._uniformMap=e.uniformMap,this._renderState=e.renderState,this._framebuffer=e.framebuffer,this._pass=e.pass,this._owner=e.owner,this._debugOverlappingFrustums=0,this._pickId=e.pickId,this._flags=0,this.cull=E(e.cull,!0),this.occlude=E(e.occlude,!0),this.executeInClosestFrustum=E(e.executeInClosestFrustum,!1),this.debugShowBoundingVolume=E(e.debugShowBoundingVolume,!1),this.castShadows=E(e.castShadows,!1),this.receiveShadows=E(e.receiveShadows,!1),this.pickOnly=E(e.pickOnly,!1),this.depthForTranslucentClassification=E(e.depthForTranslucentClassification,!1),this.dirty=!0,this.lastDirtyTime=0,this.derivedCommands={}}function xn(e,t){return(e._flags&t)===t}function ko(e,t,n){n?e._flags|=t:e._flags&=~t}Object.defineProperties(Ta.prototype,{boundingVolume:{get:function(){return this._boundingVolume},set:function(e){this._boundingVolume!==e&&(this._boundingVolume=e,this.dirty=!0)}},orientedBoundingBox:{get:function(){return this._orientedBoundingBox},set:function(e){this._orientedBoundingBox!==e&&(this._orientedBoundingBox=e,this.dirty=!0)}},cull:{get:function(){return xn(this,Lt.CULL)},set:function(e){xn(this,Lt.CULL)!==e&&(ko(this,Lt.CULL,e),this.dirty=!0)}},occlude:{get:function(){return xn(this,Lt.OCCLUDE)},set:function(e){xn(this,Lt.OCCLUDE)!==e&&(ko(this,Lt.OCCLUDE,e),this.dirty=!0)}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix!==e&&(this._modelMatrix=e,this.dirty=!0)}},primitiveType:{get:function(){return this._primitiveType},set:function(e){this._primitiveType!==e&&(this._primitiveType=e,this.dirty=!0)}},vertexArray:{get:function(){return this._vertexArray},set:function(e){this._vertexArray!==e&&(this._vertexArray=e,this.dirty=!0)}},count:{get:function(){return this._count},set:function(e){this._count!==e&&(this._count=e,this.dirty=!0)}},offset:{get:function(){return this._offset},set:function(e){this._offset!==e&&(this._offset=e,this.dirty=!0)}},instanceCount:{get:function(){return this._instanceCount},set:function(e){this._instanceCount!==e&&(this._instanceCount=e,this.dirty=!0)}},shaderProgram:{get:function(){return this._shaderProgram},set:function(e){this._shaderProgram!==e&&(this._shaderProgram=e,this.dirty=!0)}},castShadows:{get:function(){return xn(this,Lt.CAST_SHADOWS)},set:function(e){xn(this,Lt.CAST_SHADOWS)!==e&&(ko(this,Lt.CAST_SHADOWS,e),this.dirty=!0)}},receiveShadows:{get:function(){return xn(this,Lt.RECEIVE_SHADOWS)},set:function(e){xn(this,Lt.RECEIVE_SHADOWS)!==e&&(ko(this,Lt.RECEIVE_SHADOWS,e),this.dirty=!0)}},uniformMap:{get:function(){return this._uniformMap},set:function(e){this._uniformMap!==e&&(this._uniformMap=e,this.dirty=!0)}},renderState:{get:function(){return this._renderState},set:function(e){this._renderState!==e&&(this._renderState=e,this.dirty=!0)}},framebuffer:{get:function(){return this._framebuffer},set:function(e){this._framebuffer!==e&&(this._framebuffer=e,this.dirty=!0)}},pass:{get:function(){return this._pass},set:function(e){this._pass!==e&&(this._pass=e,this.dirty=!0)}},executeInClosestFrustum:{get:function(){return xn(this,Lt.EXECUTE_IN_CLOSEST_FRUSTUM)},set:function(e){xn(this,Lt.EXECUTE_IN_CLOSEST_FRUSTUM)!==e&&(ko(this,Lt.EXECUTE_IN_CLOSEST_FRUSTUM,e),this.dirty=!0)}},owner:{get:function(){return this._owner},set:function(e){this._owner!==e&&(this._owner=e,this.dirty=!0)}},debugShowBoundingVolume:{get:function(){return xn(this,Lt.DEBUG_SHOW_BOUNDING_VOLUME)},set:function(e){xn(this,Lt.DEBUG_SHOW_BOUNDING_VOLUME)!==e&&(ko(this,Lt.DEBUG_SHOW_BOUNDING_VOLUME,e),this.dirty=!0)}},debugOverlappingFrustums:{get:function(){return this._debugOverlappingFrustums},set:function(e){this._debugOverlappingFrustums!==e&&(this._debugOverlappingFrustums=e,this.dirty=!0)}},pickId:{get:function(){return this._pickId},set:function(e){this._pickId!==e&&(this._pickId=e,this.dirty=!0)}},pickOnly:{get:function(){return xn(this,Lt.PICK_ONLY)},set:function(e){xn(this,Lt.PICK_ONLY)!==e&&(ko(this,Lt.PICK_ONLY,e),this.dirty=!0)}},depthForTranslucentClassification:{get:function(){return xn(this,Lt.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION)},set:function(e){xn(this,Lt.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION)!==e&&(ko(this,Lt.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION,e),this.dirty=!0)}}});Ta.shallowClone=function(e,t){if(p(e))return p(t)||(t=new Ta),t._boundingVolume=e._boundingVolume,t._orientedBoundingBox=e._orientedBoundingBox,t._modelMatrix=e._modelMatrix,t._primitiveType=e._primitiveType,t._vertexArray=e._vertexArray,t._count=e._count,t._offset=e._offset,t._instanceCount=e._instanceCount,t._shaderProgram=e._shaderProgram,t._uniformMap=e._uniformMap,t._renderState=e._renderState,t._framebuffer=e._framebuffer,t._pass=e._pass,t._owner=e._owner,t._debugOverlappingFrustums=e._debugOverlappingFrustums,t._pickId=e._pickId,t._flags=e._flags,t.dirty=!0,t.lastDirtyTime=0,t};Ta.prototype.execute=function(e,t){e.draw(this,t)};var Ea=Ta;var aR={ENVIRONMENT:0,COMPUTE:1,GLOBE:2,TERRAIN_CLASSIFICATION:3,CESIUM_3D_TILE:4,CESIUM_3D_TILE_CLASSIFICATION:5,CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW:6,OPAQUE:7,TRANSLUCENT:8,VOXELS:9,OVERLAY:10,NUMBER_OF_PASSES:11},wd=Object.freeze(aR);function kt(e,t,n,i){this.x=E(e,0),this.y=E(t,0),this.width=E(n,0),this.height=E(i,0)}kt.packedLength=4;kt.pack=function(e,t,n){return n=E(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.width,t[n]=e.height,t};kt.unpack=function(e,t,n){return t=E(t,0),p(n)||(n=new kt),n.x=e[t++],n.y=e[t++],n.width=e[t++],n.height=e[t],n};kt.fromPoints=function(e,t){if(p(t)||(t=new kt),!p(e)||e.length===0)return t.x=0,t.y=0,t.width=0,t.height=0,t;let n=e.length,i=e[0].x,o=e[0].y,r=e[0].x,s=e[0].y;for(let a=1;a<n;a++){let c=e[a],l=c.x,d=c.y;i=Math.min(l,i),r=Math.max(l,r),o=Math.min(d,o),s=Math.max(d,s)}return t.x=i,t.y=o,t.width=r-i,t.height=s-o,t};var cR=new Li,uR=new rt,lR=new rt;kt.fromRectangle=function(e,t,n){if(p(n)||(n=new kt),!p(e))return n.x=0,n.y=0,n.width=0,n.height=0,n;t=E(t,cR);let i=t.project(ro.southwest(e,uR)),o=t.project(ro.northeast(e,lR));return we.subtract(o,i,o),n.x=i.x,n.y=i.y,n.width=o.x,n.height=o.y,n};kt.clone=function(e,t){if(p(e))return p(t)?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):new kt(e.x,e.y,e.width,e.height)};kt.union=function(e,t,n){p(n)||(n=new kt);let i=Math.min(e.x,t.x),o=Math.min(e.y,t.y),r=Math.max(e.x+e.width,t.x+t.width),s=Math.max(e.y+e.height,t.y+t.height);return n.x=i,n.y=o,n.width=r-i,n.height=s-o,n};kt.expand=function(e,t,n){n=kt.clone(e,n);let i=t.x-n.x,o=t.y-n.y;return i>n.width?n.width=i:i<0&&(n.width-=i,n.x=t.x),o>n.height?n.height=o:o<0&&(n.height-=o,n.y=t.y),n};kt.intersect=function(e,t){let n=e.x,i=e.y,o=t.x,r=t.y;return n>o+t.width||n+e.width<o||i+e.height<r||i>r+t.height?_i.OUTSIDE:_i.INTERSECTING};kt.equals=function(e,t){return e===t||p(e)&&p(t)&&e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};kt.prototype.clone=function(e){return kt.clone(this,e)};kt.prototype.intersect=function(e){return kt.intersect(this,e)};kt.prototype.equals=function(e){return kt.equals(this,e)};var Ts=kt;var gu={CLOCKWISE:L.CW,COUNTER_CLOCKWISE:L.CCW};gu.validate=function(e){return e===gu.CLOCKWISE||e===gu.COUNTER_CLOCKWISE};var Ug=Object.freeze(gu);function ji(e){let t=E(e,E.EMPTY_OBJECT),n=E(t.cull,E.EMPTY_OBJECT),i=E(t.polygonOffset,E.EMPTY_OBJECT),o=E(t.scissorTest,E.EMPTY_OBJECT),r=E(o.rectangle,E.EMPTY_OBJECT),s=E(t.depthRange,E.EMPTY_OBJECT),a=E(t.depthTest,E.EMPTY_OBJECT),c=E(t.colorMask,E.EMPTY_OBJECT),l=E(t.blending,E.EMPTY_OBJECT),d=E(l.color,E.EMPTY_OBJECT),h=E(t.stencilTest,E.EMPTY_OBJECT),g=E(h.frontOperation,E.EMPTY_OBJECT),C=E(h.backOperation,E.EMPTY_OBJECT),b=E(t.sampleCoverage,E.EMPTY_OBJECT),w=t.viewport;this.frontFace=E(t.frontFace,Ug.COUNTER_CLOCKWISE),this.cull={enabled:E(n.enabled,!1),face:E(n.face,L.BACK)},this.lineWidth=E(t.lineWidth,1),this.polygonOffset={enabled:E(i.enabled,!1),factor:E(i.factor,0),units:E(i.units,0)},this.scissorTest={enabled:E(o.enabled,!1),rectangle:Ts.clone(r)},this.depthRange={near:E(s.near,0),far:E(s.far,1)},this.depthTest={enabled:E(a.enabled,!1),func:E(a.func,L.LESS)},this.colorMask={red:E(c.red,!0),green:E(c.green,!0),blue:E(c.blue,!0),alpha:E(c.alpha,!0)},this.depthMask=E(t.depthMask,!0),this.stencilMask=E(t.stencilMask,-1),this.blending={enabled:E(l.enabled,!1),color:new Tt(E(d.red,0),E(d.green,0),E(d.blue,0),E(d.alpha,0)),equationRgb:E(l.equationRgb,L.FUNC_ADD),equationAlpha:E(l.equationAlpha,L.FUNC_ADD),functionSourceRgb:E(l.functionSourceRgb,L.ONE),functionSourceAlpha:E(l.functionSourceAlpha,L.ONE),functionDestinationRgb:E(l.functionDestinationRgb,L.ZERO),functionDestinationAlpha:E(l.functionDestinationAlpha,L.ZERO)},this.stencilTest={enabled:E(h.enabled,!1),frontFunction:E(h.frontFunction,L.ALWAYS),backFunction:E(h.backFunction,L.ALWAYS),reference:E(h.reference,0),mask:E(h.mask,-1),frontOperation:{fail:E(g.fail,L.KEEP),zFail:E(g.zFail,L.KEEP),zPass:E(g.zPass,L.KEEP)},backOperation:{fail:E(C.fail,L.KEEP),zFail:E(C.zFail,L.KEEP),zPass:E(C.zPass,L.KEEP)}},this.sampleCoverage={enabled:E(b.enabled,!1),value:E(b.value,1),invert:E(b.invert,!1)},this.viewport=p(w)?new Ts(w.x,w.y,w.width,w.height):void 0,this.id=0,this._applyFunctions=[]}var fR=0,Hi={};ji.fromCache=function(e){let t=JSON.stringify(e),n=Hi[t];if(p(n))return++n.referenceCount,n.state;let i=new ji(e),o=JSON.stringify(i);return n=Hi[o],p(n)||(i.id=fR++,n={referenceCount:0,state:i},Hi[o]=n),++n.referenceCount,Hi[t]={referenceCount:1,state:n.state},n.state};ji.removeFromCache=function(e){let t=new ji(e),n=JSON.stringify(t),i=Hi[n],o=JSON.stringify(e),r=Hi[o];p(r)&&(--r.referenceCount,r.referenceCount===0&&(delete Hi[o],p(i)&&--i.referenceCount)),p(i)&&i.referenceCount===0&&delete Hi[n]};ji.getCache=function(){return Hi};ji.clearCache=function(){Hi={}};function yr(e,t,n){n?e.enable(t):e.disable(t)}function kg(e,t){e.frontFace(t.frontFace)}function Gg(e,t){let n=t.cull,i=n.enabled;yr(e,e.CULL_FACE,i),i&&e.cullFace(n.face)}function Hg(e,t){e.lineWidth(t.lineWidth)}function jg(e,t){let n=t.polygonOffset,i=n.enabled;yr(e,e.POLYGON_OFFSET_FILL,i),i&&e.polygonOffset(n.factor,n.units)}function Wg(e,t,n){let i=t.scissorTest,o=p(n.scissorTest)?n.scissorTest.enabled:i.enabled;if(yr(e,e.SCISSOR_TEST,o),o){let r=p(n.scissorTest)?n.scissorTest.rectangle:i.rectangle;e.scissor(r.x,r.y,r.width,r.height)}}function qg(e,t){let n=t.depthRange;e.depthRange(n.near,n.far)}function Yg(e,t){let n=t.depthTest,i=n.enabled;yr(e,e.DEPTH_TEST,i),i&&e.depthFunc(n.func)}function Zg(e,t){let n=t.colorMask;e.colorMask(n.red,n.green,n.blue,n.alpha)}function Xg(e,t){e.depthMask(t.depthMask)}function $g(e,t){e.stencilMask(t.stencilMask)}function dR(e,t){e.blendColor(t.red,t.green,t.blue,t.alpha)}function Kg(e,t,n){let i=t.blending,o=p(n.blendingEnabled)?n.blendingEnabled:i.enabled;yr(e,e.BLEND,o),o&&(dR(e,i.color),e.blendEquationSeparate(i.equationRgb,i.equationAlpha),e.blendFuncSeparate(i.functionSourceRgb,i.functionDestinationRgb,i.functionSourceAlpha,i.functionDestinationAlpha))}function Qg(e,t){let n=t.stencilTest,i=n.enabled;if(yr(e,e.STENCIL_TEST,i),i){let o=n.frontFunction,r=n.backFunction,s=n.reference,a=n.mask;e.stencilFunc(o,s,a),e.stencilFuncSeparate(e.BACK,r,s,a),e.stencilFuncSeparate(e.FRONT,o,s,a);let c=n.frontOperation,l=c.fail,d=c.zFail,h=c.zPass;e.stencilOpSeparate(e.FRONT,l,d,h);let g=n.backOperation,C=g.fail,b=g.zFail,w=g.zPass;e.stencilOpSeparate(e.BACK,C,b,w)}}function Jg(e,t){let n=t.sampleCoverage,i=n.enabled;yr(e,e.SAMPLE_COVERAGE,i),i&&e.sampleCoverage(n.value,n.invert)}var hR=new Ts;function ey(e,t,n){let i=E(t.viewport,n.viewport);p(i)||(i=hR,i.width=n.context.drawingBufferWidth,i.height=n.context.drawingBufferHeight),n.context.uniformState.viewport=i,e.viewport(i.x,i.y,i.width,i.height)}ji.apply=function(e,t,n){kg(e,t),Gg(e,t),Hg(e,t),jg(e,t),qg(e,t),Yg(e,t),Zg(e,t),Xg(e,t),$g(e,t),Qg(e,t),Jg(e,t),Wg(e,t,n),Kg(e,t,n),ey(e,t,n)};function pR(e,t){let n=[];return e.frontFace!==t.frontFace&&n.push(kg),(e.cull.enabled!==t.cull.enabled||e.cull.face!==t.cull.face)&&n.push(Gg),e.lineWidth!==t.lineWidth&&n.push(Hg),(e.polygonOffset.enabled!==t.polygonOffset.enabled||e.polygonOffset.factor!==t.polygonOffset.factor||e.polygonOffset.units!==t.polygonOffset.units)&&n.push(jg),(e.depthRange.near!==t.depthRange.near||e.depthRange.far!==t.depthRange.far)&&n.push(qg),(e.depthTest.enabled!==t.depthTest.enabled||e.depthTest.func!==t.depthTest.func)&&n.push(Yg),(e.colorMask.red!==t.colorMask.red||e.colorMask.green!==t.colorMask.green||e.colorMask.blue!==t.colorMask.blue||e.colorMask.alpha!==t.colorMask.alpha)&&n.push(Zg),e.depthMask!==t.depthMask&&n.push(Xg),e.stencilMask!==t.stencilMask&&n.push($g),(e.stencilTest.enabled!==t.stencilTest.enabled||e.stencilTest.frontFunction!==t.stencilTest.frontFunction||e.stencilTest.backFunction!==t.stencilTest.backFunction||e.stencilTest.reference!==t.stencilTest.reference||e.stencilTest.mask!==t.stencilTest.mask||e.stencilTest.frontOperation.fail!==t.stencilTest.frontOperation.fail||e.stencilTest.frontOperation.zFail!==t.stencilTest.frontOperation.zFail||e.stencilTest.backOperation.fail!==t.stencilTest.backOperation.fail||e.stencilTest.backOperation.zFail!==t.stencilTest.backOperation.zFail||e.stencilTest.backOperation.zPass!==t.stencilTest.backOperation.zPass)&&n.push(Qg),(e.sampleCoverage.enabled!==t.sampleCoverage.enabled||e.sampleCoverage.value!==t.sampleCoverage.value||e.sampleCoverage.invert!==t.sampleCoverage.invert)&&n.push(Jg),n}ji.partialApply=function(e,t,n,i,o,r){if(t!==n){let d=n._applyFunctions[t.id];p(d)||(d=pR(t,n),n._applyFunctions[t.id]=d);let h=d.length;for(let g=0;g<h;++g)d[g](e,n)}let s=p(i.scissorTest)?i.scissorTest:t.scissorTest,a=p(o.scissorTest)?o.scissorTest:n.scissorTest;(s!==a||r)&&Wg(e,n,o);let c=p(i.blendingEnabled)?i.blendingEnabled:t.blending.enabled,l=p(o.blendingEnabled)?o.blendingEnabled:n.blending.enabled;(c!==l||l&&t.blending!==n.blending)&&Kg(e,n,o),(t!==n||i!==o||i.context!==o.context)&&ey(e,n,o)};ji.getState=function(e){return{frontFace:e.frontFace,cull:{enabled:e.cull.enabled,face:e.cull.face},lineWidth:e.lineWidth,polygonOffset:{enabled:e.polygonOffset.enabled,factor:e.polygonOffset.factor,units:e.polygonOffset.units},scissorTest:{enabled:e.scissorTest.enabled,rectangle:Ts.clone(e.scissorTest.rectangle)},depthRange:{near:e.depthRange.near,far:e.depthRange.far},depthTest:{enabled:e.depthTest.enabled,func:e.depthTest.func},colorMask:{red:e.colorMask.red,green:e.colorMask.green,blue:e.colorMask.blue,alpha:e.colorMask.alpha},depthMask:e.depthMask,stencilMask:e.stencilMask,blending:{enabled:e.blending.enabled,color:Tt.clone(e.blending.color),equationRgb:e.blending.equationRgb,equationAlpha:e.blending.equationAlpha,functionSourceRgb:e.blending.functionSourceRgb,functionSourceAlpha:e.blending.functionSourceAlpha,functionDestinationRgb:e.blending.functionDestinationRgb,functionDestinationAlpha:e.blending.functionDestinationAlpha},stencilTest:{enabled:e.stencilTest.enabled,frontFunction:e.stencilTest.frontFunction,backFunction:e.stencilTest.backFunction,reference:e.stencilTest.reference,mask:e.stencilTest.mask,frontOperation:{fail:e.stencilTest.frontOperation.fail,zFail:e.stencilTest.frontOperation.zFail,zPass:e.stencilTest.frontOperation.zPass},backOperation:{fail:e.stencilTest.backOperation.fail,zFail:e.stencilTest.backOperation.zFail,zPass:e.stencilTest.backOperation.zPass}},sampleCoverage:{enabled:e.sampleCoverage.enabled,value:e.sampleCoverage.value,invert:e.sampleCoverage.invert},viewport:p(e.viewport)?Ts.clone(e.viewport):void 0}};var _r=ji;var mR=new y;function Se(e){this._size=e.size,this._datatype=e.datatype,this.getValue=e.getValue}var an={};an[L.FLOAT]="float";an[L.FLOAT_VEC2]="vec2";an[L.FLOAT_VEC3]="vec3";an[L.FLOAT_VEC4]="vec4";an[L.INT]="int";an[L.INT_VEC2]="ivec2";an[L.INT_VEC3]="ivec3";an[L.INT_VEC4]="ivec4";an[L.BOOL]="bool";an[L.BOOL_VEC2]="bvec2";an[L.BOOL_VEC3]="bvec3";an[L.BOOL_VEC4]="bvec4";an[L.FLOAT_MAT2]="mat2";an[L.FLOAT_MAT3]="mat3";an[L.FLOAT_MAT4]="mat4";an[L.SAMPLER_2D]="sampler2D";an[L.SAMPLER_CUBE]="samplerCube";Se.prototype.getDeclaration=function(e){let t=`uniform ${an[this._datatype]} ${e}`,n=this._size;return n===1?t+=";":t+=`[${n.toString()}];`,t};var gR={czm_viewport:new Se({size:1,datatype:L.FLOAT_VEC4,getValue:function(e){return e.viewportCartesian4}}),czm_viewportOrthographic:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.viewportOrthographic}}),czm_viewportTransformation:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.viewportTransformation}}),czm_globeDepthTexture:new Se({size:1,datatype:L.SAMPLER_2D,getValue:function(e){return e.globeDepthTexture}}),czm_model:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.model}}),czm_inverseModel:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.inverseModel}}),czm_view:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.view}}),czm_view3D:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.view3D}}),czm_viewRotation:new Se({size:1,datatype:L.FLOAT_MAT3,getValue:function(e){return e.viewRotation}}),czm_viewRotation3D:new Se({size:1,datatype:L.FLOAT_MAT3,getValue:function(e){return e.viewRotation3D}}),czm_inverseView:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.inverseView}}),czm_inverseView3D:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.inverseView3D}}),czm_inverseViewRotation:new Se({size:1,datatype:L.FLOAT_MAT3,getValue:function(e){return e.inverseViewRotation}}),czm_inverseViewRotation3D:new Se({size:1,datatype:L.FLOAT_MAT3,getValue:function(e){return e.inverseViewRotation3D}}),czm_projection:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.projection}}),czm_inverseProjection:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.inverseProjection}}),czm_infiniteProjection:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.infiniteProjection}}),czm_modelView:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.modelView}}),czm_modelView3D:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.modelView3D}}),czm_modelViewRelativeToEye:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.modelViewRelativeToEye}}),czm_inverseModelView:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.inverseModelView}}),czm_inverseModelView3D:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.inverseModelView3D}}),czm_viewProjection:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.viewProjection}}),czm_inverseViewProjection:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.inverseViewProjection}}),czm_modelViewProjection:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.modelViewProjection}}),czm_inverseModelViewProjection:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.inverseModelViewProjection}}),czm_modelViewProjectionRelativeToEye:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.modelViewProjectionRelativeToEye}}),czm_modelViewInfiniteProjection:new Se({size:1,datatype:L.FLOAT_MAT4,getValue:function(e){return e.modelViewInfiniteProjection}}),czm_orthographicIn3D:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.orthographicIn3D?1:0}}),czm_normal:new Se({size:1,datatype:L.FLOAT_MAT3,getValue:function(e){return e.normal}}),czm_normal3D:new Se({size:1,datatype:L.FLOAT_MAT3,getValue:function(e){return e.normal3D}}),czm_inverseNormal:new Se({size:1,datatype:L.FLOAT_MAT3,getValue:function(e){return e.inverseNormal}}),czm_inverseNormal3D:new Se({size:1,datatype:L.FLOAT_MAT3,getValue:function(e){return e.inverseNormal3D}}),czm_eyeHeight:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.eyeHeight}}),czm_eyeHeight2D:new Se({size:1,datatype:L.FLOAT_VEC2,getValue:function(e){return e.eyeHeight2D}}),czm_entireFrustum:new Se({size:1,datatype:L.FLOAT_VEC2,getValue:function(e){return e.entireFrustum}}),czm_currentFrustum:new Se({size:1,datatype:L.FLOAT_VEC2,getValue:function(e){return e.currentFrustum}}),czm_frustumPlanes:new Se({size:1,datatype:L.FLOAT_VEC4,getValue:function(e){return e.frustumPlanes}}),czm_farDepthFromNearPlusOne:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.farDepthFromNearPlusOne}}),czm_log2FarDepthFromNearPlusOne:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.log2FarDepthFromNearPlusOne}}),czm_oneOverLog2FarDepthFromNearPlusOne:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.oneOverLog2FarDepthFromNearPlusOne}}),czm_sunPositionWC:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.sunPositionWC}}),czm_sunPositionColumbusView:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.sunPositionColumbusView}}),czm_sunDirectionEC:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.sunDirectionEC}}),czm_sunDirectionWC:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.sunDirectionWC}}),czm_moonDirectionEC:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.moonDirectionEC}}),czm_lightDirectionEC:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.lightDirectionEC}}),czm_lightDirectionWC:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.lightDirectionWC}}),czm_lightColor:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.lightColor}}),czm_lightColorHdr:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.lightColorHdr}}),czm_encodedCameraPositionMCHigh:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.encodedCameraPositionMCHigh}}),czm_encodedCameraPositionMCLow:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.encodedCameraPositionMCLow}}),czm_viewerPositionWC:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return pe.getTranslation(e.inverseView,mR)}}),czm_frameNumber:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.frameState.frameNumber}}),czm_morphTime:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.frameState.morphTime}}),czm_sceneMode:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.frameState.mode}}),czm_pass:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.pass}}),czm_backgroundColor:new Se({size:1,datatype:L.FLOAT_VEC4,getValue:function(e){return e.backgroundColor}}),czm_brdfLut:new Se({size:1,datatype:L.SAMPLER_2D,getValue:function(e){return e.brdfLut}}),czm_environmentMap:new Se({size:1,datatype:L.SAMPLER_CUBE,getValue:function(e){return e.environmentMap}}),czm_specularEnvironmentMaps:new Se({size:1,datatype:L.SAMPLER_2D,getValue:function(e){return e.specularEnvironmentMaps}}),czm_specularEnvironmentMapSize:new Se({size:1,datatype:L.FLOAT_VEC2,getValue:function(e){return e.specularEnvironmentMapsDimensions}}),czm_specularEnvironmentMapsMaximumLOD:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.specularEnvironmentMapsMaximumLOD}}),czm_sphericalHarmonicCoefficients:new Se({size:9,datatype:L.FLOAT_VEC3,getValue:function(e){return e.sphericalHarmonicCoefficients}}),czm_temeToPseudoFixed:new Se({size:1,datatype:L.FLOAT_MAT3,getValue:function(e){return e.temeToPseudoFixedMatrix}}),czm_pixelRatio:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.pixelRatio}}),czm_fogDensity:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.fogDensity}}),czm_splitPosition:new Se({size:1,datatype:L.FLOAT_VEC2,getValue:function(e){return e.splitPosition}}),czm_geometricToleranceOverMeter:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.geometricToleranceOverMeter}}),czm_minimumDisableDepthTestDistance:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.minimumDisableDepthTestDistance}}),czm_invertClassificationColor:new Se({size:1,datatype:L.FLOAT_VEC4,getValue:function(e){return e.invertClassificationColor}}),czm_gamma:new Se({size:1,datatype:L.FLOAT,getValue:function(e){return e.gamma}}),czm_ellipsoidRadii:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.ellipsoid.radii}}),czm_ellipsoidInverseRadii:new Se({size:1,datatype:L.FLOAT_VEC3,getValue:function(e){return e.ellipsoid.oneOverRadii}})},Es=gR;function yR(e,t,n,i){switch(t.type){case e.FLOAT:return new ty(e,t,n,i);case e.FLOAT_VEC2:return new ny(e,t,n,i);case e.FLOAT_VEC3:return new iy(e,t,n,i);case e.FLOAT_VEC4:return new oy(e,t,n,i);case e.SAMPLER_2D:case e.SAMPLER_CUBE:case e.SAMPLER_3D:return new Sd(e,t,n,i);case e.INT:case e.BOOL:return new ry(e,t,n,i);case e.INT_VEC2:case e.BOOL_VEC2:return new sy(e,t,n,i);case e.INT_VEC3:case e.BOOL_VEC3:return new ay(e,t,n,i);case e.INT_VEC4:case e.BOOL_VEC4:return new cy(e,t,n,i);case e.FLOAT_MAT2:return new uy(e,t,n,i);case e.FLOAT_MAT3:return new ly(e,t,n,i);case e.FLOAT_MAT4:return new fy(e,t,n,i);default:throw new Pt(`Unrecognized uniform type: ${t.type} for uniform "${n}".`)}}function ty(e,t,n,i){this.name=n,this.value=void 0,this._value=0,this._gl=e,this._location=i}ty.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1f(this._location,this.value))};function ny(e,t,n,i){this.name=n,this.value=void 0,this._value=new we,this._gl=e,this._location=i}ny.prototype.set=function(){let e=this.value;we.equals(e,this._value)||(we.clone(e,this._value),this._gl.uniform2f(this._location,e.x,e.y))};function iy(e,t,n,i){this.name=n,this.value=void 0,this._value=void 0,this._gl=e,this._location=i}iy.prototype.set=function(){let e=this.value;p(e.red)?Tt.equals(e,this._value)||(this._value=Tt.clone(e,this._value),this._gl.uniform3f(this._location,e.red,e.green,e.blue)):p(e.x)&&(y.equals(e,this._value)||(this._value=y.clone(e,this._value),this._gl.uniform3f(this._location,e.x,e.y,e.z)))};function oy(e,t,n,i){this.name=n,this.value=void 0,this._value=void 0,this._gl=e,this._location=i}oy.prototype.set=function(){let e=this.value;p(e.red)?Tt.equals(e,this._value)||(this._value=Tt.clone(e,this._value),this._gl.uniform4f(this._location,e.red,e.green,e.blue,e.alpha)):p(e.x)&&(Ie.equals(e,this._value)||(this._value=Ie.clone(e,this._value),this._gl.uniform4f(this._location,e.x,e.y,e.z,e.w)))};function Sd(e,t,n,i){this.name=n,this.value=void 0,this._gl=e,this._location=i,this.textureUnitIndex=void 0}Sd.prototype.set=function(){let e=this._gl;e.activeTexture(e.TEXTURE0+this.textureUnitIndex);let t=this.value;p(t)&&e.bindTexture(t._target,t._texture)};Sd.prototype._setSampler=function(e){return this.textureUnitIndex=e,this._gl.uniform1i(this._location,e),e+1};function ry(e,t,n,i){this.name=n,this.value=void 0,this._value=0,this._gl=e,this._location=i}ry.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1i(this._location,this.value))};function sy(e,t,n,i){this.name=n,this.value=void 0,this._value=new we,this._gl=e,this._location=i}sy.prototype.set=function(){let e=this.value;we.equals(e,this._value)||(we.clone(e,this._value),this._gl.uniform2i(this._location,e.x,e.y))};function ay(e,t,n,i){this.name=n,this.value=void 0,this._value=new y,this._gl=e,this._location=i}ay.prototype.set=function(){let e=this.value;y.equals(e,this._value)||(y.clone(e,this._value),this._gl.uniform3i(this._location,e.x,e.y,e.z))};function cy(e,t,n,i){this.name=n,this.value=void 0,this._value=new Ie,this._gl=e,this._location=i}cy.prototype.set=function(){let e=this.value;Ie.equals(e,this._value)||(Ie.clone(e,this._value),this._gl.uniform4i(this._location,e.x,e.y,e.z,e.w))};var _R=new Float32Array(4);function uy(e,t,n,i){this.name=n,this.value=void 0,this._value=new Gn,this._gl=e,this._location=i}uy.prototype.set=function(){if(!Gn.equalsArray(this.value,this._value,0)){Gn.clone(this.value,this._value);let e=Gn.toArray(this.value,_R);this._gl.uniformMatrix2fv(this._location,!1,e)}};var vR=new Float32Array(9);function ly(e,t,n,i){this.name=n,this.value=void 0,this._value=new _e,this._gl=e,this._location=i}ly.prototype.set=function(){if(!_e.equalsArray(this.value,this._value,0)){_e.clone(this.value,this._value);let e=_e.toArray(this.value,vR);this._gl.uniformMatrix3fv(this._location,!1,e)}};var CR=new Float32Array(16);function fy(e,t,n,i){this.name=n,this.value=void 0,this._value=new pe,this._gl=e,this._location=i}fy.prototype.set=function(){if(!pe.equalsArray(this.value,this._value,0)){pe.clone(this.value,this._value);let e=pe.toArray(this.value,CR);this._gl.uniformMatrix4fv(this._location,!1,e)}};var dy=yR;function bR(e,t,n,i){switch(t.type){case e.FLOAT:return new hy(e,t,n,i);case e.FLOAT_VEC2:return new py(e,t,n,i);case e.FLOAT_VEC3:return new my(e,t,n,i);case e.FLOAT_VEC4:return new gy(e,t,n,i);case e.SAMPLER_2D:case e.SAMPLER_CUBE:return new xd(e,t,n,i);case e.INT:case e.BOOL:return new yy(e,t,n,i);case e.INT_VEC2:case e.BOOL_VEC2:return new _y(e,t,n,i);case e.INT_VEC3:case e.BOOL_VEC3:return new vy(e,t,n,i);case e.INT_VEC4:case e.BOOL_VEC4:return new Cy(e,t,n,i);case e.FLOAT_MAT2:return new by(e,t,n,i);case e.FLOAT_MAT3:return new Ty(e,t,n,i);case e.FLOAT_MAT4:return new Ey(e,t,n,i);default:throw new Pt(`Unrecognized uniform type: ${t.type} for uniform "${n}".`)}}function hy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o),this._gl=e,this._location=i[0]}hy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1;for(let o=0;o<t;++o){let r=e[o];r!==n[o]&&(n[o]=r,i=!0)}i&&this._gl.uniform1fv(this._location,n)};function py(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*2),this._gl=e,this._location=i[0]}py.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let s=e[r];we.equalsArray(s,n,o)||(we.pack(s,n,o),i=!0),o+=2}i&&this._gl.uniform2fv(this._location,n)};function my(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*3),this._gl=e,this._location=i[0]}my.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let s=e[r];p(s.red)?(s.red!==n[o]||s.green!==n[o+1]||s.blue!==n[o+2])&&(n[o]=s.red,n[o+1]=s.green,n[o+2]=s.blue,i=!0):p(s.x)&&(y.equalsArray(s,n,o)||(y.pack(s,n,o),i=!0)),o+=3}i&&this._gl.uniform3fv(this._location,n)};function gy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*4),this._gl=e,this._location=i[0]}gy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let s=e[r];p(s.red)?Tt.equalsArray(s,n,o)||(Tt.pack(s,n,o),i=!0):p(s.x)&&(Ie.equalsArray(s,n,o)||(Ie.pack(s,n,o),i=!0)),o+=4}i&&this._gl.uniform4fv(this._location,n)};function xd(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o),this._gl=e,this._locations=i,this.textureUnitIndex=void 0}xd.prototype.set=function(){let e=this._gl,t=e.TEXTURE0+this.textureUnitIndex,n=this.value,i=n.length;for(let o=0;o<i;++o){let r=n[o];e.activeTexture(t+o),e.bindTexture(r._target,r._texture)}};xd.prototype._setSampler=function(e){this.textureUnitIndex=e;let t=this._locations,n=t.length;for(let i=0;i<n;++i){let o=e+i;this._gl.uniform1i(t[i],o)}return e+n};function yy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o),this._gl=e,this._location=i[0]}yy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1;for(let o=0;o<t;++o){let r=e[o];r!==n[o]&&(n[o]=r,i=!0)}i&&this._gl.uniform1iv(this._location,n)};function _y(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o*2),this._gl=e,this._location=i[0]}_y.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let s=e[r];we.equalsArray(s,n,o)||(we.pack(s,n,o),i=!0),o+=2}i&&this._gl.uniform2iv(this._location,n)};function vy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o*3),this._gl=e,this._location=i[0]}vy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let s=e[r];y.equalsArray(s,n,o)||(y.pack(s,n,o),i=!0),o+=3}i&&this._gl.uniform3iv(this._location,n)};function Cy(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o*4),this._gl=e,this._location=i[0]}Cy.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let s=e[r];Ie.equalsArray(s,n,o)||(Ie.pack(s,n,o),i=!0),o+=4}i&&this._gl.uniform4iv(this._location,n)};function by(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*4),this._gl=e,this._location=i[0]}by.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let s=e[r];Gn.equalsArray(s,n,o)||(Gn.pack(s,n,o),i=!0),o+=4}i&&this._gl.uniformMatrix2fv(this._location,!1,n)};function Ty(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*9),this._gl=e,this._location=i[0]}Ty.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let s=e[r];_e.equalsArray(s,n,o)||(_e.pack(s,n,o),i=!0),o+=9}i&&this._gl.uniformMatrix3fv(this._location,!1,n)};function Ey(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*16),this._gl=e,this._location=i[0]}Ey.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let s=e[r];pe.equalsArray(s,n,o)||(pe.pack(s,n,o),i=!0),o+=16}i&&this._gl.uniformMatrix4fv(this._location,!1,n)};var wy=bR;var TR=0;function fo(e){let t=e.vertexShaderText,n=e.fragmentShaderText;typeof spector<"u"&&(t=t.replace(/^#line/gm,"//#line"),n=n.replace(/^#line/gm,"//#line"));let i=ER(t,n);this._gl=e.gl,this._logShaderCompilation=e.logShaderCompilation,this._debugShaders=e.debugShaders,this._attributeLocations=e.attributeLocations,this._program=void 0,this._numberOfVertexAttributes=void 0,this._vertexAttributes=void 0,this._uniformsByName=void 0,this._uniforms=void 0,this._automaticUniforms=void 0,this._manualUniforms=void 0,this._duplicateUniformNames=i.duplicateUniformNames,this._cachedShader=void 0,this.maximumTextureUnitIndex=void 0,this._vertexShaderSource=e.vertexShaderSource,this._vertexShaderText=e.vertexShaderText,this._fragmentShaderSource=e.fragmentShaderSource,this._fragmentShaderText=i.fragmentShaderText,this.id=TR++}fo.fromCache=function(e){return e=E(e,E.EMPTY_OBJECT),e.context.shaderCache.getShaderProgram(e)};fo.replaceCache=function(e){return e=E(e,E.EMPTY_OBJECT),e.context.shaderCache.replaceShaderProgram(e)};Object.defineProperties(fo.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},vertexAttributes:{get:function(){return yu(this),this._vertexAttributes}},numberOfVertexAttributes:{get:function(){return yu(this),this._numberOfVertexAttributes}},allUniforms:{get:function(){return yu(this),this._uniformsByName}}});function Sy(e){let t=[],n=e.match(/uniform.*?(?![^{]*})(?=[=\[;])/g);if(p(n)){let i=n.length;for(let o=0;o<i;o++){let r=n[o].trim(),s=r.slice(r.lastIndexOf(" ")+1);t.push(s)}}return t}function ER(e,t){let n={};if(!gt.highpFloatSupported||!gt.highpIntSupported){let i,o,r,s,a=Sy(e),c=Sy(t),l=a.length,d=c.length;for(i=0;i<l;i++)for(o=0;o<d;o++)if(a[i]===c[o]){r=a[i],s=`czm_mediump_${r}`;let h=new RegExp(`${r}\\b`,"g");t=t.replace(h,s),n[s]=r}}return{fragmentShaderText:t,duplicateUniformNames:n}}var Wi="[Cesium WebGL] ";function wR(e,t){let n=t._vertexShaderText,i=t._fragmentShaderText,o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,n),e.compileShader(o);let r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,i),e.compileShader(r);let s=e.createProgram();e.attachShader(s,o),e.attachShader(s,r);let a=t._attributeLocations;if(p(a))for(let g in a)a.hasOwnProperty(g)&&e.bindAttribLocation(s,a[g],g);e.linkProgram(s);let c;if(e.getProgramParameter(s,e.LINK_STATUS))return t._logShaderCompilation&&(c=e.getShaderInfoLog(o),p(c)&&c.length>0&&console.log(`${Wi}Vertex shader compile log: ${c}`),c=e.getShaderInfoLog(r),p(c)&&c.length>0&&console.log(`${Wi}Fragment shader compile log: ${c}`),c=e.getProgramInfoLog(s),p(c)&&c.length>0&&console.log(`${Wi}Shader program link log: ${c}`)),e.deleteShader(o),e.deleteShader(r),s;let l,d=t._debugShaders;throw e.getShaderParameter(r,e.COMPILE_STATUS)?e.getShaderParameter(o,e.COMPILE_STATUS)?(c=e.getProgramInfoLog(s),console.error(`${Wi}Shader program link log: ${c}`),h(o,"vertex"),h(r,"fragment"),l=`Program failed to link.  Link log: ${c}`):(c=e.getShaderInfoLog(o),console.error(`${Wi}Vertex shader compile log: ${c}`),console.error(`${Wi} Vertex shader source:
${n}`),l=`Vertex shader failed to compile.  Compile log: ${c}`):(c=e.getShaderInfoLog(r),console.error(`${Wi}Fragment shader compile log: ${c}`),console.error(`${Wi} Fragment shader source:
${i}`),l=`Fragment shader failed to compile.  Compile log: ${c}`),e.deleteShader(o),e.deleteShader(r),e.deleteProgram(s),new Pt(l);function h(g,C){if(!p(d))return;let b=d.getTranslatedShaderSource(g);if(b===""){console.error(`${Wi}${C} shader translation failed.`);return}console.error(`${Wi}Translated ${C} shaderSource:
${b}`)}}function SR(e,t,n){let i={};for(let o=0;o<n;++o){let r=e.getActiveAttrib(t,o),s=e.getAttribLocation(t,r.name);i[r.name]={name:r.name,type:r.type,index:s}}return i}function xR(e,t){let n={},i=[],o=[],r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<r;++s){let a=e.getActiveUniform(t,s),c="[0]",l=a.name.indexOf(c,a.name.length-c.length)!==-1?a.name.slice(0,a.name.length-3):a.name;if(l.indexOf("gl_")!==0)if(a.name.indexOf("[")<0){let d=e.getUniformLocation(t,l);if(d!==null){let h=dy(e,a,l,d);n[l]=h,i.push(h),h._setSampler&&o.push(h)}}else{let d,h,g,C,b=l.indexOf("[");if(b>=0){if(d=n[l.slice(0,b)],!p(d))continue;h=d._locations,h.length<=1&&(g=d.value,C=e.getUniformLocation(t,l),C!==null&&(h.push(C),g.push(e.getUniform(t,C))))}else{h=[];for(let w=0;w<a.size;++w)C=e.getUniformLocation(t,`${l}[${w}]`),C!==null&&h.push(C);d=wy(e,a,l,h),n[l]=d,i.push(d),d._setSampler&&o.push(d)}}}return{uniformsByName:n,uniforms:i,samplerUniforms:o}}function AR(e,t){let n=[],i=[];for(let o in t)if(t.hasOwnProperty(o)){let r=t[o],s=o,a=e._duplicateUniformNames[s];p(a)&&(r.name=a,s=a);let c=Es[s];p(c)?n.push({uniform:r,automaticUniform:c}):i.push(r)}return{automaticUniforms:n,manualUniforms:i}}function RR(e,t,n){e.useProgram(t);let i=0,o=n.length;for(let r=0;r<o;++r)i=n[r]._setSampler(i);return e.useProgram(null),i}function yu(e){p(e._program)||xy(e)}function xy(e){let t=e._program,n=e._gl,i=wR(n,e,e._debugShaders),o=n.getProgramParameter(i,n.ACTIVE_ATTRIBUTES),r=xR(n,i),s=AR(e,r.uniformsByName);e._program=i,e._numberOfVertexAttributes=o,e._vertexAttributes=SR(n,i,o),e._uniformsByName=r.uniformsByName,e._uniforms=r.uniforms,e._automaticUniforms=s.automaticUniforms,e._manualUniforms=s.manualUniforms,e.maximumTextureUnitIndex=RR(n,i,r.samplerUniforms),t&&e._gl.deleteProgram(t),typeof spector<"u"&&(e._program.__SPECTOR_rebuildProgram=function(a,c,l,d){let h=e._vertexShaderText,g=e._fragmentShaderText,C=/ ! = /g;e._vertexShaderText=a.replace(C," != "),e._fragmentShaderText=c.replace(C," != ");try{xy(e),l(e._program)}catch(b){e._vertexShaderText=h,e._fragmentShaderText=g;let R=/(?:Compile|Link) error: ([^]*)/.exec(b.message);d(R?R[1]:b.message)}})}fo.prototype._bind=function(){yu(this),this._gl.useProgram(this._program)};fo.prototype._setUniforms=function(e,t,n){let i,o;if(p(e)){let a=this._manualUniforms;for(i=a.length,o=0;o<i;++o){let c=a[o];if(e[c.name])c.value=e[c.name]();else{let l=new RegExp(`${c.name}\\[\\d+]$`);for(let d in e)l.test(d)&&(c.value=e[d]())}}}let r=this._automaticUniforms;for(i=r.length,o=0;o<i;++o){let a=r[o];a.uniform.value=a.automaticUniform.getValue(t)}let s=this._uniforms;for(i=s.length,o=0;o<i;++o)s[o].set();if(n){let a=this._gl,c=this._program;a.validateProgram(c)}};fo.prototype.isDestroyed=function(){return!1};fo.prototype.destroy=function(){this._cachedShader.cache.releaseShaderProgram(this)};fo.prototype.finalDestroy=function(){return this._gl.deleteProgram(this._program),kn(this)};var Ad=fo;var Ay=`/**
 * A built-in GLSL floating-point constant for converting radians to degrees.
 *
 * @alias czm_degreesPerRadian
 * @glslConstant
 *
 * @see CesiumMath.DEGREES_PER_RADIAN
 *
 * @example
 * // GLSL declaration
 * const float czm_degreesPerRadian = ...;
 *
 * // Example
 * float deg = czm_degreesPerRadian * rad;
 */
const float czm_degreesPerRadian = 57.29577951308232;
`;var Ry=`/**
 * A built-in GLSL vec2 constant for defining the depth range.
 * This is a workaround to a bug where IE11 does not implement gl_DepthRange.
 *
 * @alias czm_depthRange
 * @glslConstant
 *
 * @example
 * // GLSL declaration
 * float depthRangeNear = czm_depthRange.near;
 * float depthRangeFar = czm_depthRange.far;
 *
 */
const czm_depthRangeStruct czm_depthRange = czm_depthRangeStruct(0.0, 1.0);
`;var Py=`/**
 * 0.1
 *
 * @name czm_epsilon1
 * @glslConstant
 */
const float czm_epsilon1 = 0.1;
`;var Oy=`/**
 * 0.01
 *
 * @name czm_epsilon2
 * @glslConstant
 */
const float czm_epsilon2 = 0.01;
`;var Iy=`/**
 * 0.001
 *
 * @name czm_epsilon3
 * @glslConstant
 */
const float czm_epsilon3 = 0.001;
`;var Dy=`/**
 * 0.0001
 *
 * @name czm_epsilon4
 * @glslConstant
 */
const float czm_epsilon4 = 0.0001;
`;var My=`/**
 * 0.00001
 *
 * @name czm_epsilon5
 * @glslConstant
 */
const float czm_epsilon5 = 0.00001;
`;var zy=`/**
 * 0.000001
 *
 * @name czm_epsilon6
 * @glslConstant
 */
const float czm_epsilon6 = 0.000001;
`;var Ny=`/**
 * 0.0000001
 *
 * @name czm_epsilon7
 * @glslConstant
 */
const float czm_epsilon7 = 0.0000001;
`;var Ly=`/**
 * DOC_TBA
 *
 * @name czm_infinity
 * @glslConstant
 */
const float czm_infinity = 5906376272000.0;  // Distance from the Sun to Pluto in meters.  TODO: What is best given lowp, mediump, and highp?
`;var By=`/**
 * A built-in GLSL floating-point constant for <code>1/pi</code>.
 *
 * @alias czm_oneOverPi
 * @glslConstant
 *
 * @see CesiumMath.ONE_OVER_PI
 *
 * @example
 * // GLSL declaration
 * const float czm_oneOverPi = ...;
 *
 * // Example
 * float pi = 1.0 / czm_oneOverPi;
 */
const float czm_oneOverPi = 0.3183098861837907;
`;var Fy=`/**
 * A built-in GLSL floating-point constant for <code>1/2pi</code>.
 *
 * @alias czm_oneOverTwoPi
 * @glslConstant
 *
 * @see CesiumMath.ONE_OVER_TWO_PI
 *
 * @example
 * // GLSL declaration
 * const float czm_oneOverTwoPi = ...;
 *
 * // Example
 * float pi = 2.0 * czm_oneOverTwoPi;
 */
const float czm_oneOverTwoPi = 0.15915494309189535;
`;var Vy=`/**
 * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE}
 *
 * @name czm_passCesium3DTile
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCesium3DTile = 4.0;
`;var Uy=`/**
 * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE_CLASSIFICATION}
 *
 * @name czm_passCesium3DTileClassification
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCesium3DTileClassification = 5.0;
`;var ky=`/**
 * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW}
 *
 * @name czm_passCesium3DTileClassificationIgnoreShow
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCesium3DTileClassificationIgnoreShow = 6.0;
`;var Gy=`/**
 * The automatic GLSL constant for {@link Pass#CLASSIFICATION}
 *
 * @name czm_passClassification
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passClassification = 7.0;
`;var Hy=`/**
 * The automatic GLSL constant for {@link Pass#COMPUTE}
 *
 * @name czm_passCompute
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCompute = 1.0;
`;var jy=`/**
 * The automatic GLSL constant for {@link Pass#ENVIRONMENT}
 *
 * @name czm_passEnvironment
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passEnvironment = 0.0;
`;var Wy=`/**
 * The automatic GLSL constant for {@link Pass#GLOBE}
 *
 * @name czm_passGlobe
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passGlobe = 2.0;
`;var qy=`/**
 * The automatic GLSL constant for {@link Pass#OPAQUE}
 *
 * @name czm_passOpaque
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passOpaque = 7.0;
`;var Yy=`/**
 * The automatic GLSL constant for {@link Pass#OVERLAY}
 *
 * @name czm_passOverlay
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passOverlay = 10.0;
`;var Zy=`/**
 * The automatic GLSL constant for {@link Pass#TERRAIN_CLASSIFICATION}
 *
 * @name czm_passTerrainClassification
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passTerrainClassification = 3.0;
`;var Xy=`/**
 * The automatic GLSL constant for {@link Pass#TRANSLUCENT}
 *
 * @name czm_passTranslucent
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passTranslucent = 8.0;
`;var $y=`/**
 * The automatic GLSL constant for {@link Pass#VOXELS}
 *
 * @name czm_passVoxels
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passVoxels = 9.0;
`;var Ky=`/**
 * A built-in GLSL floating-point constant for <code>Math.PI</code>.
 *
 * @alias czm_pi
 * @glslConstant
 *
 * @see CesiumMath.PI
 *
 * @example
 * // GLSL declaration
 * const float czm_pi = ...;
 *
 * // Example
 * float twoPi = 2.0 * czm_pi;
 */
const float czm_pi = 3.141592653589793;
`;var Qy=`/**
 * A built-in GLSL floating-point constant for <code>pi/4</code>.
 *
 * @alias czm_piOverFour
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_FOUR
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverFour = ...;
 *
 * // Example
 * float pi = 4.0 * czm_piOverFour;
 */
const float czm_piOverFour = 0.7853981633974483;
`;var Jy=`/**
 * A built-in GLSL floating-point constant for <code>pi/6</code>.
 *
 * @alias czm_piOverSix
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_SIX
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverSix = ...;
 *
 * // Example
 * float pi = 6.0 * czm_piOverSix;
 */
const float czm_piOverSix = 0.5235987755982988;
`;var e_=`/**
 * A built-in GLSL floating-point constant for <code>pi/3</code>.
 *
 * @alias czm_piOverThree
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_THREE
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverThree = ...;
 *
 * // Example
 * float pi = 3.0 * czm_piOverThree;
 */
const float czm_piOverThree = 1.0471975511965976;
`;var t_=`/**
 * A built-in GLSL floating-point constant for <code>pi/2</code>.
 *
 * @alias czm_piOverTwo
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_TWO
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverTwo = ...;
 *
 * // Example
 * float pi = 2.0 * czm_piOverTwo;
 */
const float czm_piOverTwo = 1.5707963267948966;
`;var n_=`/**
 * A built-in GLSL floating-point constant for converting degrees to radians.
 *
 * @alias czm_radiansPerDegree
 * @glslConstant
 *
 * @see CesiumMath.RADIANS_PER_DEGREE
 *
 * @example
 * // GLSL declaration
 * const float czm_radiansPerDegree = ...;
 *
 * // Example
 * float rad = czm_radiansPerDegree * deg;
 */
const float czm_radiansPerDegree = 0.017453292519943295;
`;var i_=`/**
 * The constant identifier for the 2D {@link SceneMode}
 *
 * @name czm_sceneMode2D
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneModeColumbusView
 * @see czm_sceneMode3D
 * @see czm_sceneModeMorphing
 */
const float czm_sceneMode2D = 2.0;
`;var o_=`/**
 * The constant identifier for the 3D {@link SceneMode}
 *
 * @name czm_sceneMode3D
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneMode2D
 * @see czm_sceneModeColumbusView
 * @see czm_sceneModeMorphing
 */
const float czm_sceneMode3D = 3.0;
`;var r_=`/**
 * The constant identifier for the Columbus View {@link SceneMode}
 *
 * @name czm_sceneModeColumbusView
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneMode2D
 * @see czm_sceneMode3D
 * @see czm_sceneModeMorphing
 */
const float czm_sceneModeColumbusView = 1.0;
`;var s_=`/**
 * The constant identifier for the Morphing {@link SceneMode}
 *
 * @name czm_sceneModeMorphing
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneMode2D
 * @see czm_sceneModeColumbusView
 * @see czm_sceneMode3D
 */
const float czm_sceneModeMorphing = 0.0;
`;var a_=`/**
 * A built-in GLSL floating-point constant for one solar radius.
 *
 * @alias czm_solarRadius
 * @glslConstant
 *
 * @see CesiumMath.SOLAR_RADIUS
 *
 * @example
 * // GLSL declaration
 * const float czm_solarRadius = ...;
 */
const float czm_solarRadius = 695500000.0;
`;var c_=`/**
 * A built-in GLSL floating-point constant for <code>3pi/2</code>.
 *
 * @alias czm_threePiOver2
 * @glslConstant
 *
 * @see CesiumMath.THREE_PI_OVER_TWO
 *
 * @example
 * // GLSL declaration
 * const float czm_threePiOver2 = ...;
 *
 * // Example
 * float pi = (2.0 / 3.0) * czm_threePiOver2;
 */
const float czm_threePiOver2 = 4.71238898038469;
`;var u_=`/**
 * A built-in GLSL floating-point constant for <code>2pi</code>.
 *
 * @alias czm_twoPi
 * @glslConstant
 *
 * @see CesiumMath.TWO_PI
 *
 * @example
 * // GLSL declaration
 * const float czm_twoPi = ...;
 *
 * // Example
 * float pi = czm_twoPi / 2.0;
 */
const float czm_twoPi = 6.283185307179586;
`;var l_=`/**
 * The maximum latitude, in radians, both North and South, supported by a Web Mercator
 * (EPSG:3857) projection.  Technically, the Mercator projection is defined
 * for any latitude up to (but not including) 90 degrees, but it makes sense
 * to cut it off sooner because it grows exponentially with increasing latitude.
 * The logic behind this particular cutoff value, which is the one used by
 * Google Maps, Bing Maps, and Esri, is that it makes the projection
 * square.  That is, the rectangle is equal in the X and Y directions.
 *
 * The constant value is computed as follows:
 *   czm_pi * 0.5 - (2.0 * atan(exp(-czm_pi)))
 *
 * @name czm_webMercatorMaxLatitude
 * @glslConstant
 */
const float czm_webMercatorMaxLatitude = 1.4844222297453324;
`;var f_=`/**
 * @name czm_depthRangeStruct
 * @glslStruct
 */
struct czm_depthRangeStruct
{
    float near;
    float far;
};
`;var d_=`/**
 * Holds material information that can be used for lighting. Returned by all czm_getMaterial functions.
 *
 * @name czm_material
 * @glslStruct
 *
 * @property {vec3} diffuse Incoming light that scatters evenly in all directions.
 * @property {float} specular Intensity of incoming light reflecting in a single direction.
 * @property {float} shininess The sharpness of the specular reflection.  Higher values create a smaller, more focused specular highlight.
 * @property {vec3} normal Surface's normal in eye coordinates. It is used for effects such as normal mapping. The default is the surface's unmodified normal.
 * @property {vec3} emission Light emitted by the material equally in all directions. The default is vec3(0.0), which emits no light.
 * @property {float} alpha Alpha of this material. 0.0 is completely transparent; 1.0 is completely opaque.
 */
struct czm_material
{
    vec3 diffuse;
    float specular;
    float shininess;
    vec3 normal;
    vec3 emission;
    float alpha;
};
`;var h_=`/**
 * Used as input to every material's czm_getMaterial function.
 *
 * @name czm_materialInput
 * @glslStruct
 *
 * @property {float} s 1D texture coordinates.
 * @property {vec2} st 2D texture coordinates.
 * @property {vec3} str 3D texture coordinates.
 * @property {vec3} normalEC Unperturbed surface normal in eye coordinates.
 * @property {mat3} tangentToEyeMatrix Matrix for converting a tangent space normal to eye space.
 * @property {vec3} positionToEyeEC Vector from the fragment to the eye in eye coordinates.  The magnitude is the distance in meters from the fragment to the eye.
 * @property {float} height The height of the terrain in meters above or below the WGS84 ellipsoid.  Only available for globe materials.
 * @property {float} slope The slope of the terrain in radians.  0 is flat; pi/2 is vertical.  Only available for globe materials.
 * @property {float} aspect The aspect of the terrain in radians.  0 is East, pi/2 is North, pi is West, 3pi/2 is South.  Only available for globe materials.
 */
struct czm_materialInput
{
    float s;
    vec2 st;
    vec3 str;
    vec3 normalEC;
    mat3 tangentToEyeMatrix;
    vec3 positionToEyeEC;
    float height;
    float slope;
    float aspect;
};
`;var p_=`/**
 * Struct for representing a material for a {@link Model}. The model
 * rendering pipeline will pass this struct between material, custom shaders,
 * and lighting stages. This is not to be confused with {@link czm_material}
 * which is used by the older Fabric materials system, although they are similar.
 * <p>
 * All color values (diffuse, specular, emissive) are in linear color space.
 * </p>
 *
 * @name czm_modelMaterial
 * @glslStruct
 *
 * @property {vec3} diffuse Incoming light that scatters evenly in all directions.
 * @property {float} alpha Alpha of this material. 0.0 is completely transparent; 1.0 is completely opaque.
 * @property {vec3} specular Color of reflected light at normal incidence in PBR materials. This is sometimes referred to as f0 in the literature.
 * @property {float} roughness A number from 0.0 to 1.0 representing how rough the surface is. Values near 0.0 produce glossy surfaces, while values near 1.0 produce rough surfaces.
 * @property {vec3} normalEC Surface's normal in eye coordinates. It is used for effects such as normal mapping. The default is the surface's unmodified normal.
 * @property {float} occlusion Ambient occlusion recieved at this point on the material. 1.0 means fully lit, 0.0 means fully occluded.
 * @property {vec3} emissive Light emitted by the material equally in all directions. The default is vec3(0.0), which emits no light.
 */
struct czm_modelMaterial {
    vec3 diffuse;
    float alpha;
    vec3 specular;
    float roughness;
    vec3 normalEC;
    float occlusion;
    vec3 emissive;
};
`;var m_=`/**
 * Struct for representing the output of a custom vertex shader.
 * 
 * @name czm_modelVertexOutput
 * @glslStruct
 *
 * @see {@link CustomShader}
 * @see {@link Model}
 *
 * @property {vec3} positionMC The position of the vertex in model coordinates
 * @property {float} pointSize A custom value for gl_PointSize. This is only used for point primitives. 
 */
struct czm_modelVertexOutput {
  vec3 positionMC;
  float pointSize;
};
`;var g_=`/**
 * Parameters for {@link czm_pbrLighting}
 *
 * @name czm_material
 * @glslStruct
 *
 * @property {vec3} diffuseColor the diffuse color of the material for the lambert term of the rendering equation
 * @property {float} roughness a value from 0.0 to 1.0 that indicates how rough the surface of the material is.
 * @property {vec3} f0 The reflectance of the material at normal incidence
 */
struct czm_pbrParameters
{
    vec3 diffuseColor;
    float roughness;
    vec3 f0;
};
`;var y_=`/**
 * DOC_TBA
 *
 * @name czm_ray
 * @glslStruct
 */
struct czm_ray
{
    vec3 origin;
    vec3 direction;
};
`;var __=`/**
 * DOC_TBA
 *
 * @name czm_raySegment
 * @glslStruct
 */
struct czm_raySegment
{
    float start;
    float stop;
};

/**
 * DOC_TBA
 *
 * @name czm_emptyRaySegment
 * @glslConstant 
 */
const czm_raySegment czm_emptyRaySegment = czm_raySegment(-czm_infinity, -czm_infinity);

/**
 * DOC_TBA
 *
 * @name czm_fullRaySegment
 * @glslConstant 
 */
const czm_raySegment czm_fullRaySegment = czm_raySegment(0.0, czm_infinity);
`;var v_=`struct czm_shadowParameters
{
#ifdef USE_CUBE_MAP_SHADOW
    vec3 texCoords;
#else
    vec2 texCoords;
#endif

    float depthBias;
    float depth;
    float nDotL;
    vec2 texelStepSize;
    float normalShadingSmooth;
    float darkness;
};
`;var C_=`// See:
//    https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/

vec3 czm_acesTonemapping(vec3 color) {
    float g = 0.985;
    float a = 0.065;
    float b = 0.0001;
    float c = 0.433;
    float d = 0.238;

    color = (color * (color + a) - b) / (color * (g * color + c) + d);

    color = clamp(color, 0.0, 1.0);

    return color;
}
`;var b_=`/**
 * @private
 */
float czm_alphaWeight(float a)
{
    float z = (gl_FragCoord.z - czm_viewportTransformation[3][2]) / czm_viewportTransformation[2][2];

    // See Weighted Blended Order-Independent Transparency for examples of different weighting functions:
    // http://jcgt.org/published/0002/02/09/
    return pow(a + 0.01, 4.0) + max(1e-2, min(3.0 * 1e3, 0.003 / (1e-5 + pow(abs(z) / 200.0, 4.0))));
}
`;var T_=`/**
 * Procedural anti-aliasing by blurring two colors that meet at a sharp edge.
 *
 * @name czm_antialias
 * @glslFunction
 *
 * @param {vec4} color1 The color on one side of the edge.
 * @param {vec4} color2 The color on the other side of the edge.
 * @param {vec4} currentcolor The current color, either <code>color1</code> or <code>color2</code>.
 * @param {float} dist The distance to the edge in texture coordinates.
 * @param {float} [fuzzFactor=0.1] Controls the blurriness between the two colors.
 * @returns {vec4} The anti-aliased color.
 *
 * @example
 * // GLSL declarations
 * vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist, float fuzzFactor);
 * vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist);
 *
 * // get the color for a material that has a sharp edge at the line y = 0.5 in texture space
 * float dist = abs(textureCoordinates.t - 0.5);
 * vec4 currentColor = mix(bottomColor, topColor, step(0.5, textureCoordinates.t));
 * vec4 color = czm_antialias(bottomColor, topColor, currentColor, dist, 0.1);
 */
vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist, float fuzzFactor)
{
    float val1 = clamp(dist / fuzzFactor, 0.0, 1.0);
    float val2 = clamp((dist - 0.5) / fuzzFactor, 0.0, 1.0);
    val1 = val1 * (1.0 - val2);
    val1 = val1 * val1 * (3.0 - (2.0 * val1));
    val1 = pow(val1, 0.5); //makes the transition nicer
    
    vec4 midColor = (color1 + color2) * 0.5;
    return mix(midColor, currentColor, val1);
}

vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist)
{
    return czm_antialias(color1, color2, currentColor, dist, 0.1);
}
`;var E_=`/**
 * Approximately computes spherical coordinates given a normal.
 * Uses approximate inverse trigonometry for speed and consistency,
 * since inverse trigonometry can differ from vendor-to-vendor and when compared with the CPU.
 *
 * @name czm_approximateSphericalCoordinates
 * @glslFunction
 *
 * @param {vec3} normal arbitrary-length normal.
 *
 * @returns {vec2} Approximate latitude and longitude spherical coordinates.
 */
vec2 czm_approximateSphericalCoordinates(vec3 normal) {
    // Project into plane with vertical for latitude
    float latitudeApproximation = czm_fastApproximateAtan(sqrt(normal.x * normal.x + normal.y * normal.y), normal.z);
    float longitudeApproximation = czm_fastApproximateAtan(normal.x, normal.y);
    return vec2(latitudeApproximation, longitudeApproximation);
}
`;var w_=`/**
 * Determines if the fragment is back facing
 *
 * @name czm_backFacing
 * @glslFunction 
 * 
 * @returns {bool} <code>true</code> if the fragment is back facing; otherwise, <code>false</code>.
 */
bool czm_backFacing()
{
    // !gl_FrontFacing doesn't work as expected on Mac/Intel so use the more verbose form instead. See https://github.com/CesiumGS/cesium/pull/8494.
    return gl_FrontFacing == false;
}
`;var S_=`/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a float expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {float} a Value to return if the comparison is true.
 * @param {float} b Value to return if the comparison is false.
 *
 * @returns {float} equivalent of comparison ? a : b
 */
float czm_branchFreeTernary(bool comparison, float a, float b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}

/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a vec2 expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {vec2} a Value to return if the comparison is true.
 * @param {vec2} b Value to return if the comparison is false.
 *
 * @returns {vec2} equivalent of comparison ? a : b
 */
vec2 czm_branchFreeTernary(bool comparison, vec2 a, vec2 b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}

/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a vec3 expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {vec3} a Value to return if the comparison is true.
 * @param {vec3} b Value to return if the comparison is false.
 *
 * @returns {vec3} equivalent of comparison ? a : b
 */
vec3 czm_branchFreeTernary(bool comparison, vec3 a, vec3 b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}

/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a vec4 expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {vec3} a Value to return if the comparison is true.
 * @param {vec3} b Value to return if the comparison is false.
 *
 * @returns {vec3} equivalent of comparison ? a : b
 */
vec4 czm_branchFreeTernary(bool comparison, vec4 a, vec4 b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}
`;var x_=`
vec4 czm_cascadeColor(vec4 weights)
{
    return vec4(1.0, 0.0, 0.0, 1.0) * weights.x +
           vec4(0.0, 1.0, 0.0, 1.0) * weights.y +
           vec4(0.0, 0.0, 1.0, 1.0) * weights.z +
           vec4(1.0, 0.0, 1.0, 1.0) * weights.w;
}
`;var A_=`
uniform vec4 shadowMap_cascadeDistances;

float czm_cascadeDistance(vec4 weights)
{
    return dot(shadowMap_cascadeDistances, weights);
}
`;var R_=`
uniform mat4 shadowMap_cascadeMatrices[4];

mat4 czm_cascadeMatrix(vec4 weights)
{
    return shadowMap_cascadeMatrices[0] * weights.x +
           shadowMap_cascadeMatrices[1] * weights.y +
           shadowMap_cascadeMatrices[2] * weights.z +
           shadowMap_cascadeMatrices[3] * weights.w;
}
`;var P_=`
uniform vec4 shadowMap_cascadeSplits[2];

vec4 czm_cascadeWeights(float depthEye)
{
    // One component is set to 1.0 and all others set to 0.0.
    vec4 near = step(shadowMap_cascadeSplits[0], vec4(depthEye));
    vec4 far = step(depthEye, shadowMap_cascadeSplits[1]);
    return near * far;
}
`;var O_=`/**
 * DOC_TBA
 *
 * @name czm_columbusViewMorph
 * @glslFunction
 */
vec4 czm_columbusViewMorph(vec4 position2D, vec4 position3D, float time)
{
    // Just linear for now.
    vec3 p = mix(position2D.xyz, position3D.xyz, time);
    return vec4(p, 1.0);
}
`;var I_=`/**
 * Returns a position in model coordinates relative to eye taking into
 * account the current scene mode: 3D, 2D, or Columbus view.
 * <p>
 * This uses standard position attributes, <code>position3DHigh</code>, 
 * <code>position3DLow</code>, <code>position2DHigh</code>, and <code>position2DLow</code>, 
 * and should be used when writing a vertex shader for an {@link Appearance}.
 * </p>
 *
 * @name czm_computePosition
 * @glslFunction
 *
 * @returns {vec4} The position relative to eye.
 *
 * @example
 * vec4 p = czm_computePosition();
 * v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
 * gl_Position = czm_modelViewProjectionRelativeToEye * p;
 *
 * @see czm_translateRelativeToEye
 */
vec4 czm_computePosition();
`;var D_=`/**
 * @private
 */
vec2 cordic(float angle)
{
// Scale the vector by the appropriate factor for the 24 iterations to follow.
    vec2 vector = vec2(6.0725293500888267e-1, 0.0);
// Iteration 1
    float sense = (angle < 0.0) ? -1.0 : 1.0;
 //   float factor = sense * 1.0;  // 2^-0
    mat2 rotation = mat2(1.0, sense, -sense, 1.0);
    vector = rotation * vector;
    angle -= sense * 7.8539816339744828e-1;  // atan(2^-0)
// Iteration 2
    sense = (angle < 0.0) ? -1.0 : 1.0;
    float factor = sense * 5.0e-1;  // 2^-1
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 4.6364760900080609e-1;  // atan(2^-1)
// Iteration 3
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 2.5e-1;  // 2^-2
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 2.4497866312686414e-1;  // atan(2^-2)
// Iteration 4
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.25e-1;  // 2^-3
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.2435499454676144e-1;  // atan(2^-3)
// Iteration 5
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 6.25e-2;  // 2^-4
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 6.2418809995957350e-2;  // atan(2^-4)
// Iteration 6
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.125e-2;  // 2^-5
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.1239833430268277e-2;  // atan(2^-5)
// Iteration 7
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.5625e-2;  // 2^-6
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.5623728620476831e-2;  // atan(2^-6)
// Iteration 8
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 7.8125e-3;  // 2^-7
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 7.8123410601011111e-3;  // atan(2^-7)
// Iteration 9
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.90625e-3;  // 2^-8
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.9062301319669718e-3;  // atan(2^-8)
// Iteration 10
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.953125e-3;  // 2^-9
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.9531225164788188e-3;  // atan(2^-9)
// Iteration 11
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 9.765625e-4;  // 2^-10
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 9.7656218955931946e-4;  // atan(2^-10)
// Iteration 12
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 4.8828125e-4;  // 2^-11
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 4.8828121119489829e-4;  // atan(2^-11)
// Iteration 13
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 2.44140625e-4;  // 2^-12
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 2.4414062014936177e-4;  // atan(2^-12)
// Iteration 14
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.220703125e-4;  // 2^-13
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.2207031189367021e-4;  // atan(2^-13)
// Iteration 15
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 6.103515625e-5;  // 2^-14
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 6.1035156174208773e-5;  // atan(2^-14)
// Iteration 16
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.0517578125e-5;  // 2^-15
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.0517578115526096e-5;  // atan(2^-15)
// Iteration 17
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.52587890625e-5;  // 2^-16
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.5258789061315762e-5;  // atan(2^-16)
// Iteration 18
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 7.62939453125e-6;  // 2^-17
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 7.6293945311019700e-6;  // atan(2^-17)
// Iteration 19
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.814697265625e-6;  // 2^-18
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.8146972656064961e-6;  // atan(2^-18)
// Iteration 20
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.9073486328125e-6;  // 2^-19
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.9073486328101870e-6;  // atan(2^-19)
// Iteration 21
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 9.5367431640625e-7;  // 2^-20
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 9.5367431640596084e-7;  // atan(2^-20)
// Iteration 22
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 4.76837158203125e-7;  // 2^-21
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 4.7683715820308884e-7;  // atan(2^-21)
// Iteration 23
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 2.384185791015625e-7;  // 2^-22
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 2.3841857910155797e-7;  // atan(2^-22)
// Iteration 24
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.1920928955078125e-7;  // 2^-23
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
//    angle -= sense * 1.1920928955078068e-7;  // atan(2^-23)

    return vector;
}

/**
 * Computes the cosine and sine of the provided angle using the CORDIC algorithm.
 *
 * @name czm_cosineAndSine
 * @glslFunction
 *
 * @param {float} angle The angle in radians.
 *
 * @returns {vec2} The resulting cosine of the angle (as the x coordinate) and sine of the angle (as the y coordinate).
 *
 * @example
 * vec2 v = czm_cosineAndSine(czm_piOverSix);
 * float cosine = v.x;
 * float sine = v.y;
 */
vec2 czm_cosineAndSine(float angle)
{
    if (angle < -czm_piOverTwo || angle > czm_piOverTwo)
    {
        if (angle < 0.0)
        {
            return -cordic(angle + czm_pi);
        }
        else
        {
            return -cordic(angle - czm_pi);
        }
    }
    else
    {
        return cordic(angle);
    }
}
`;var M_=`/**
 * Decompresses texture coordinates that were packed into a single float.
 *
 * @name czm_decompressTextureCoordinates
 * @glslFunction
 *
 * @param {float} encoded The compressed texture coordinates.
 * @returns {vec2} The decompressed texture coordinates.
 */
 vec2 czm_decompressTextureCoordinates(float encoded)
 {
    float temp = encoded / 4096.0;
    float xZeroTo4095 = floor(temp);
    float stx = xZeroTo4095 / 4095.0;
    float sty = (encoded - xZeroTo4095 * 4096.0) / 4095.0;
    return vec2(stx, sty);
 }
`;var z_=`/**
 * Get default parameters for physically based rendering. These defaults
 * describe a rough dielectric (non-metal) surface (e.g. rough plastic).
 *
 * @return {czm_pbrParameters} Default parameters for {@link czm_pbrLighting}
 */
czm_pbrParameters czm_defaultPbrMaterial()
{
    czm_pbrParameters results;
    results.diffuseColor = vec3(1.0);
    results.roughness = 1.0;

    const vec3 REFLECTANCE_DIELECTRIC = vec3(0.04);
    results.f0 = REFLECTANCE_DIELECTRIC;
    return results;
}
`;var N_=`// emulated noperspective
#if (__VERSION__ == 300 || defined(GL_EXT_frag_depth)) && !defined(LOG_DEPTH)
out float v_WindowZ;
#endif

/**
 * Emulates GL_DEPTH_CLAMP, which is not available in WebGL 1 or 2.
 * GL_DEPTH_CLAMP clamps geometry that is outside the near and far planes, 
 * capping the shadow volume. More information here: 
 * https://www.khronos.org/registry/OpenGL/extensions/ARB/ARB_depth_clamp.txt.
 *
 * When GL_EXT_frag_depth is available we emulate GL_DEPTH_CLAMP by ensuring 
 * no geometry gets clipped by setting the clip space z value to 0.0 and then
 * sending the unaltered screen space z value (using emulated noperspective
 * interpolation) to the frag shader where it is clamped to [0,1] and then
 * written with gl_FragDepth (see czm_writeDepthClamp). This technique is based on:
 * https://stackoverflow.com/questions/5960757/how-to-emulate-gl-depth-clamp-nv.
 *
 * When GL_EXT_frag_depth is not available, which is the case on some mobile 
 * devices, we must attempt to fix this only in the vertex shader. 
 * The approach is to clamp the z value to the far plane, which closes the 
 * shadow volume but also distorts the geometry, so there can still be artifacts
 * on frustum seams.
 *
 * @name czm_depthClamp
 * @glslFunction
 *
 * @param {vec4} coords The vertex in clip coordinates.
 * @returns {vec4} The modified vertex.
 *
 * @example
 * gl_Position = czm_depthClamp(czm_modelViewProjection * vec4(position, 1.0));
 *
 * @see czm_writeDepthClamp
 */
vec4 czm_depthClamp(vec4 coords)
{
#ifndef LOG_DEPTH
#if __VERSION__ == 300 || defined(GL_EXT_frag_depth)
    v_WindowZ = (0.5 * (coords.z / coords.w) + 0.5) * coords.w;
    coords.z = 0.0;
#else
    coords.z = min(coords.z, coords.w);
#endif
#endif
    return coords;
}
`;var L_=`/**
 * Computes a 3x3 rotation matrix that transforms vectors from an ellipsoid's east-north-up coordinate system 
 * to eye coordinates.  In east-north-up coordinates, x points east, y points north, and z points along the 
 * surface normal.  East-north-up can be used as an ellipsoid's tangent space for operations such as bump mapping.
 * <br /><br />
 * The ellipsoid is assumed to be centered at the model coordinate's origin.
 *
 * @name czm_eastNorthUpToEyeCoordinates
 * @glslFunction
 *
 * @param {vec3} positionMC The position on the ellipsoid in model coordinates.
 * @param {vec3} normalEC The normalized ellipsoid surface normal, at <code>positionMC</code>, in eye coordinates.
 *
 * @returns {mat3} A 3x3 rotation matrix that transforms vectors from the east-north-up coordinate system to eye coordinates.
 *
 * @example
 * // Transform a vector defined in the east-north-up coordinate 
 * // system, (0, 0, 1) which is the surface normal, to eye 
 * // coordinates.
 * mat3 m = czm_eastNorthUpToEyeCoordinates(positionMC, normalEC);
 * vec3 normalEC = m * vec3(0.0, 0.0, 1.0);
 */
mat3 czm_eastNorthUpToEyeCoordinates(vec3 positionMC, vec3 normalEC)
{
    vec3 tangentMC = normalize(vec3(-positionMC.y, positionMC.x, 0.0));  // normalized surface tangent in model coordinates
    vec3 tangentEC = normalize(czm_normal3D * tangentMC);                // normalized surface tangent in eye coordiantes
    vec3 bitangentEC = normalize(cross(normalEC, tangentEC));            // normalized surface bitangent in eye coordinates

    return mat3(
        tangentEC.x,   tangentEC.y,   tangentEC.z,
        bitangentEC.x, bitangentEC.y, bitangentEC.z,
        normalEC.x,    normalEC.y,    normalEC.z);
}
`;var B_=`/**
 * DOC_TBA
 *
 * @name czm_ellipsoidContainsPoint
 * @glslFunction
 *
 */
bool czm_ellipsoidContainsPoint(vec3 ellipsoid_inverseRadii, vec3 point)
{
    vec3 scaled = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(point, 1.0)).xyz;
    return (dot(scaled, scaled) <= 1.0);
}
`;var F_=`/**
 * DOC_TBA
 *
 * @name czm_ellipsoidWgs84TextureCoordinates
 * @glslFunction
 */
vec2 czm_ellipsoidWgs84TextureCoordinates(vec3 normal)
{
    return vec2(atan(normal.y, normal.x) * czm_oneOverTwoPi + 0.5, asin(normal.z) * czm_oneOverPi + 0.5);
}
`;var V_=`/**
 * Compares <code>left</code> and <code>right</code> componentwise. Returns <code>true</code>
 * if they are within <code>epsilon</code> and <code>false</code> otherwise. The inputs
 * <code>left</code> and <code>right</code> can be <code>float</code>s, <code>vec2</code>s,
 * <code>vec3</code>s, or <code>vec4</code>s.
 *
 * @name czm_equalsEpsilon
 * @glslFunction
 *
 * @param {} left The first vector.
 * @param {} right The second vector.
 * @param {float} epsilon The epsilon to use for equality testing.
 * @returns {bool} <code>true</code> if the components are within <code>epsilon</code> and <code>false</code> otherwise.
 *
 * @example
 * // GLSL declarations
 * bool czm_equalsEpsilon(float left, float right, float epsilon);
 * bool czm_equalsEpsilon(vec2 left, vec2 right, float epsilon);
 * bool czm_equalsEpsilon(vec3 left, vec3 right, float epsilon);
 * bool czm_equalsEpsilon(vec4 left, vec4 right, float epsilon);
 */
bool czm_equalsEpsilon(vec4 left, vec4 right, float epsilon) {
    return all(lessThanEqual(abs(left - right), vec4(epsilon)));
}

bool czm_equalsEpsilon(vec3 left, vec3 right, float epsilon) {
    return all(lessThanEqual(abs(left - right), vec3(epsilon)));
}

bool czm_equalsEpsilon(vec2 left, vec2 right, float epsilon) {
    return all(lessThanEqual(abs(left - right), vec2(epsilon)));
}

bool czm_equalsEpsilon(float left, float right, float epsilon) {
    return (abs(left - right) <= epsilon);
}
`;var U_=`/**
 * DOC_TBA
 *
 * @name czm_eyeOffset
 * @glslFunction
 *
 * @param {vec4} positionEC DOC_TBA.
 * @param {vec3} eyeOffset DOC_TBA.
 *
 * @returns {vec4} DOC_TBA.
 */
vec4 czm_eyeOffset(vec4 positionEC, vec3 eyeOffset)
{
    // This equation is approximate in x and y.
    vec4 p = positionEC;
    vec4 zEyeOffset = normalize(p) * eyeOffset.z;
    p.xy += eyeOffset.xy + zEyeOffset.xy;
    p.z += zEyeOffset.z;
    return p;
}
`;var k_=`/**
 * Transforms a position from eye to window coordinates.  The transformation
 * from eye to clip coordinates is done using {@link czm_projection}.
 * The transform from normalized device coordinates to window coordinates is
 * done using {@link czm_viewportTransformation}, which assumes a depth range
 * of <code>near = 0</code> and <code>far = 1</code>.
 * <br /><br />
 * This transform is useful when there is a need to manipulate window coordinates
 * in a vertex shader as done by {@link BillboardCollection}.
 *
 * @name czm_eyeToWindowCoordinates
 * @glslFunction
 *
 * @param {vec4} position The position in eye coordinates to transform.
 *
 * @returns {vec4} The transformed position in window coordinates.
 *
 * @see czm_modelToWindowCoordinates
 * @see czm_projection
 * @see czm_viewportTransformation
 * @see BillboardCollection
 *
 * @example
 * vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);
 */
vec4 czm_eyeToWindowCoordinates(vec4 positionEC)
{
    vec4 q = czm_projection * positionEC;                        // clip coordinates
    q.xyz /= q.w;                                                // normalized device coordinates
    q.xyz = (czm_viewportTransformation * vec4(q.xyz, 1.0)).xyz; // window coordinates
    return q;
}
`;var G_=`/**
 * Approxiamtes atan over the range [0, 1]. Safe to flip output for negative input.
 *
 * Based on Michal Drobot's approximation from ShaderFastLibs, which in turn is based on
 * "Efficient approximations for the arctangent function," Rajan, S. Sichun Wang Inkol, R. Joyal, A., May 2006.
 * Adapted from ShaderFastLibs under MIT License.
 *
 * Chosen for the following characteristics over range [0, 1]:
 * - basically no error at 0 and 1, important for getting around range limit (naive atan2 via atan requires infinite range atan)
 * - no visible artifacts from first-derivative discontinuities, unlike latitude via range-reduced sqrt asin approximations (at equator)
 *
 * The original code is x * (-0.1784 * abs(x) - 0.0663 * x * x + 1.0301);
 * Removed the abs() in here because it isn't needed, the input range is guaranteed as [0, 1] by how we're approximating atan2.
 *
 * @name czm_fastApproximateAtan
 * @glslFunction
 *
 * @param {float} x Value between 0 and 1 inclusive.
 *
 * @returns {float} Approximation of atan(x)
 */
float czm_fastApproximateAtan(float x) {
    return x * (-0.1784 * x - 0.0663 * x * x + 1.0301);
}

/**
 * Approximation of atan2.
 *
 * Range reduction math based on nvidia's cg reference implementation for atan2: http://developer.download.nvidia.com/cg/atan2.html
 * However, we replaced their atan curve with Michael Drobot's (see above).
 *
 * @name czm_fastApproximateAtan
 * @glslFunction
 *
 * @param {float} x Value between -1 and 1 inclusive.
 * @param {float} y Value between -1 and 1 inclusive.
 *
 * @returns {float} Approximation of atan2(x, y)
 */
float czm_fastApproximateAtan(float x, float y) {
    // atan approximations are usually only reliable over [-1, 1], or, in our case, [0, 1] due to modifications.
    // So range-reduce using abs and by flipping whether x or y is on top.
    float t = abs(x); // t used as swap and atan result.
    float opposite = abs(y);
    float adjacent = max(t, opposite);
    opposite = min(t, opposite);

    t = czm_fastApproximateAtan(opposite / adjacent);

    // Undo range reduction
    t = czm_branchFreeTernary(abs(y) > abs(x), czm_piOverTwo - t, t);
    t = czm_branchFreeTernary(x < 0.0, czm_pi - t, t);
    t = czm_branchFreeTernary(y < 0.0, -t, t);
    return t;
}
`;var H_=`/**
 * Gets the color with fog at a distance from the camera.
 *
 * @name czm_fog
 * @glslFunction
 *
 * @param {float} distanceToCamera The distance to the camera in meters.
 * @param {vec3} color The original color.
 * @param {vec3} fogColor The color of the fog.
 *
 * @returns {vec3} The color adjusted for fog at the distance from the camera.
 */
vec3 czm_fog(float distanceToCamera, vec3 color, vec3 fogColor)
{
    float scalar = distanceToCamera * czm_fogDensity;
    float fog = 1.0 - exp(-(scalar * scalar));
    return mix(color, fogColor, fog);
}

/**
 * Gets the color with fog at a distance from the camera.
 *
 * @name czm_fog
 * @glslFunction
 *
 * @param {float} distanceToCamera The distance to the camera in meters.
 * @param {vec3} color The original color.
 * @param {vec3} fogColor The color of the fog.
 * @param {float} fogModifierConstant A constant to modify the appearance of fog.
 *
 * @returns {vec3} The color adjusted for fog at the distance from the camera.
 */
vec3 czm_fog(float distanceToCamera, vec3 color, vec3 fogColor, float fogModifierConstant)
{
    float scalar = distanceToCamera * czm_fogDensity;
    float fog = 1.0 - exp(-((fogModifierConstant * scalar + fogModifierConstant) * (scalar * (1.0 + fogModifierConstant))));
    return mix(color, fogColor, fog);
}
`;var j_=`/**
 * Converts a color from RGB space to linear space.
 *
 * @name czm_gammaCorrect
 * @glslFunction
 *
 * @param {vec3} color The color in RGB space.
 * @returns {vec3} The color in linear space.
 */
vec3 czm_gammaCorrect(vec3 color) {
#ifdef HDR
    color = pow(color, vec3(czm_gamma));
#endif
    return color;
}

vec4 czm_gammaCorrect(vec4 color) {
#ifdef HDR
    color.rgb = pow(color.rgb, vec3(czm_gamma));
#endif
    return color;
}
`;var W_=`/**
 * DOC_TBA
 *
 * @name czm_geodeticSurfaceNormal
 * @glslFunction
 *
 * @param {vec3} positionOnEllipsoid DOC_TBA
 * @param {vec3} ellipsoidCenter DOC_TBA
 * @param {vec3} oneOverEllipsoidRadiiSquared DOC_TBA
 * 
 * @returns {vec3} DOC_TBA.
 */
vec3 czm_geodeticSurfaceNormal(vec3 positionOnEllipsoid, vec3 ellipsoidCenter, vec3 oneOverEllipsoidRadiiSquared)
{
    return normalize((positionOnEllipsoid - ellipsoidCenter) * oneOverEllipsoidRadiiSquared);
}
`;var q_=`/**
 * An czm_material with default values. Every material's czm_getMaterial
 * should use this default material as a base for the material it returns.
 * The default normal value is given by materialInput.normalEC.
 *
 * @name czm_getDefaultMaterial
 * @glslFunction
 *
 * @param {czm_materialInput} input The input used to construct the default material.
 *
 * @returns {czm_material} The default material.
 *
 * @see czm_materialInput
 * @see czm_material
 * @see czm_getMaterial
 */
czm_material czm_getDefaultMaterial(czm_materialInput materialInput)
{
    czm_material material;
    material.diffuse = vec3(0.0);
    material.specular = 0.0;
    material.shininess = 1.0;
    material.normal = materialInput.normalEC;
    material.emission = vec3(0.0);
    material.alpha = 1.0;
    return material;
}
`;var Y_=`/**
 * Calculates the intensity of diffusely reflected light.
 *
 * @name czm_getLambertDiffuse
 * @glslFunction
 *
 * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.
 * @param {vec3} normalEC The surface normal in eye coordinates.
 *
 * @returns {float} The intensity of the diffuse reflection.
 *
 * @see czm_phong
 *
 * @example
 * float diffuseIntensity = czm_getLambertDiffuse(lightDirectionEC, normalEC);
 * float specularIntensity = czm_getSpecular(lightDirectionEC, toEyeEC, normalEC, 200);
 * vec3 color = (diffuseColor * diffuseIntensity) + (specularColor * specularIntensity);
 */
float czm_getLambertDiffuse(vec3 lightDirectionEC, vec3 normalEC)
{
    return max(dot(lightDirectionEC, normalEC), 0.0);
}
`;var Z_=`/**
 * Calculates the specular intensity of reflected light.
 *
 * @name czm_getSpecular
 * @glslFunction
 *
 * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.
 * @param {vec3} toEyeEC Unit vector pointing to the eye position in eye coordinates.
 * @param {vec3} normalEC The surface normal in eye coordinates.
 * @param {float} shininess The sharpness of the specular reflection.  Higher values create a smaller, more focused specular highlight.
 *
 * @returns {float} The intensity of the specular highlight.
 *
 * @see czm_phong
 *
 * @example
 * float diffuseIntensity = czm_getLambertDiffuse(lightDirectionEC, normalEC);
 * float specularIntensity = czm_getSpecular(lightDirectionEC, toEyeEC, normalEC, 200);
 * vec3 color = (diffuseColor * diffuseIntensity) + (specularColor * specularIntensity);
 */
float czm_getSpecular(vec3 lightDirectionEC, vec3 toEyeEC, vec3 normalEC, float shininess)
{
    vec3 toReflectedLight = reflect(-lightDirectionEC, normalEC);
    float specular = max(dot(toReflectedLight, toEyeEC), 0.0);

    // pow has undefined behavior if both parameters <= 0.
    // Prevent this by making sure shininess is at least czm_epsilon2.
    return pow(specular, max(shininess, czm_epsilon2));
}
`;var X_=`/**
 * @private
 */
vec4 czm_getWaterNoise(sampler2D normalMap, vec2 uv, float time, float angleInRadians)
{
    float cosAngle = cos(angleInRadians);
    float sinAngle = sin(angleInRadians);

    // time dependent sampling directions
    vec2 s0 = vec2(1.0/17.0, 0.0);
    vec2 s1 = vec2(-1.0/29.0, 0.0);
    vec2 s2 = vec2(1.0/101.0, 1.0/59.0);
    vec2 s3 = vec2(-1.0/109.0, -1.0/57.0);

    // rotate sampling direction by specified angle
    s0 = vec2((cosAngle * s0.x) - (sinAngle * s0.y), (sinAngle * s0.x) + (cosAngle * s0.y));
    s1 = vec2((cosAngle * s1.x) - (sinAngle * s1.y), (sinAngle * s1.x) + (cosAngle * s1.y));
    s2 = vec2((cosAngle * s2.x) - (sinAngle * s2.y), (sinAngle * s2.x) + (cosAngle * s2.y));
    s3 = vec2((cosAngle * s3.x) - (sinAngle * s3.y), (sinAngle * s3.x) + (cosAngle * s3.y));

    vec2 uv0 = (uv/103.0) + (time * s0);
    vec2 uv1 = uv/107.0 + (time * s1) + vec2(0.23);
    vec2 uv2 = uv/vec2(897.0, 983.0) + (time * s2) + vec2(0.51);
    vec2 uv3 = uv/vec2(991.0, 877.0) + (time * s3) + vec2(0.71);

    uv0 = fract(uv0);
    uv1 = fract(uv1);
    uv2 = fract(uv2);
    uv3 = fract(uv3);
    vec4 noise = (texture(normalMap, uv0)) +
                 (texture(normalMap, uv1)) +
                 (texture(normalMap, uv2)) +
                 (texture(normalMap, uv3));

    // average and scale to between -1 and 1
    return ((noise / 4.0) - 0.5) * 2.0;
}
`;var $_=`/**
 * Converts an HSB color (hue, saturation, brightness) to RGB
 * HSB <-> RGB conversion with minimal branching: {@link http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl}
 *
 * @name czm_HSBToRGB
 * @glslFunction
 * 
 * @param {vec3} hsb The color in HSB.
 *
 * @returns {vec3} The color in RGB.
 *
 * @example
 * vec3 hsb = czm_RGBToHSB(rgb);
 * hsb.z *= 0.1;
 * rgb = czm_HSBToRGB(hsb);
 */

const vec4 K_HSB2RGB = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);

vec3 czm_HSBToRGB(vec3 hsb)
{
    vec3 p = abs(fract(hsb.xxx + K_HSB2RGB.xyz) * 6.0 - K_HSB2RGB.www);
    return hsb.z * mix(K_HSB2RGB.xxx, clamp(p - K_HSB2RGB.xxx, 0.0, 1.0), hsb.y);
}
`;var K_=`/**
 * Converts an HSL color (hue, saturation, lightness) to RGB
 * HSL <-> RGB conversion: {@link http://www.chilliant.com/rgb2hsv.html}
 *
 * @name czm_HSLToRGB
 * @glslFunction
 * 
 * @param {vec3} rgb The color in HSL.
 *
 * @returns {vec3} The color in RGB.
 *
 * @example
 * vec3 hsl = czm_RGBToHSL(rgb);
 * hsl.z *= 0.1;
 * rgb = czm_HSLToRGB(hsl);
 */

vec3 hueToRGB(float hue)
{
    float r = abs(hue * 6.0 - 3.0) - 1.0;
    float g = 2.0 - abs(hue * 6.0 - 2.0);
    float b = 2.0 - abs(hue * 6.0 - 4.0);
    return clamp(vec3(r, g, b), 0.0, 1.0);
}

vec3 czm_HSLToRGB(vec3 hsl)
{
    vec3 rgb = hueToRGB(hsl.x);
    float c = (1.0 - abs(2.0 * hsl.z - 1.0)) * hsl.y;
    return (rgb - 0.5) * c + hsl.z;
}
`;var Q_=`/**
 * Adjusts the hue of a color.
 * 
 * @name czm_hue
 * @glslFunction
 * 
 * @param {vec3} rgb The color.
 * @param {float} adjustment The amount to adjust the hue of the color in radians.
 *
 * @returns {float} The color with the hue adjusted.
 *
 * @example
 * vec3 adjustHue = czm_hue(color, czm_pi); // The same as czm_hue(color, -czm_pi)
 */
vec3 czm_hue(vec3 rgb, float adjustment)
{
    const mat3 toYIQ = mat3(0.299,     0.587,     0.114,
                            0.595716, -0.274453, -0.321263,
                            0.211456, -0.522591,  0.311135);
    const mat3 toRGB = mat3(1.0,  0.9563,  0.6210,
                            1.0, -0.2721, -0.6474,
                            1.0, -1.107,   1.7046);
    
    vec3 yiq = toYIQ * rgb;
    float hue = atan(yiq.z, yiq.y) + adjustment;
    float chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);
    
    vec3 color = vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));
    return toRGB * color;
}
`;var J_=`/**
 * Converts a color in linear space to RGB space.
 *
 * @name czm_inverseGamma
 * @glslFunction
 *
 * @param {vec3} color The color in linear space.
 * @returns {vec3} The color in RGB space.
 */
vec3 czm_inverseGamma(vec3 color) {
    return pow(color, vec3(1.0 / czm_gamma));
}
`;var ev=`/**
 * Determines if a time interval is empty.
 *
 * @name czm_isEmpty
 * @glslFunction 
 * 
 * @param {czm_raySegment} interval The interval to test.
 * 
 * @returns {bool} <code>true</code> if the time interval is empty; otherwise, <code>false</code>.
 *
 * @example
 * bool b0 = czm_isEmpty(czm_emptyRaySegment);      // true
 * bool b1 = czm_isEmpty(czm_raySegment(0.0, 1.0)); // false
 * bool b2 = czm_isEmpty(czm_raySegment(1.0, 1.0)); // false, contains 1.0.
 */
bool czm_isEmpty(czm_raySegment interval)
{
    return (interval.stop < 0.0);
}
`;var tv=`/**
 * Determines if a time interval is empty.
 *
 * @name czm_isFull
 * @glslFunction 
 * 
 * @param {czm_raySegment} interval The interval to test.
 * 
 * @returns {bool} <code>true</code> if the time interval is empty; otherwise, <code>false</code>.
 *
 * @example
 * bool b0 = czm_isEmpty(czm_emptyRaySegment);      // true
 * bool b1 = czm_isEmpty(czm_raySegment(0.0, 1.0)); // false
 * bool b2 = czm_isEmpty(czm_raySegment(1.0, 1.0)); // false, contains 1.0.
 */
bool czm_isFull(czm_raySegment interval)
{
    return (interval.start == 0.0 && interval.stop == czm_infinity);
}
`;var nv=`/**
 * Computes the fraction of a Web Wercator rectangle at which a given geodetic latitude is located.
 *
 * @name czm_latitudeToWebMercatorFraction
 * @glslFunction
 *
 * @param {float} latitude The geodetic latitude, in radians.
 * @param {float} southMercatorY The Web Mercator coordinate of the southern boundary of the rectangle.
 * @param {float} oneOverMercatorHeight The total height of the rectangle in Web Mercator coordinates.
 *
 * @returns {float} The fraction of the rectangle at which the latitude occurs.  If the latitude is the southern
 *          boundary of the rectangle, the return value will be zero.  If it is the northern boundary, the return
 *          value will be 1.0.  Latitudes in between are mapped according to the Web Mercator projection.
 */ 
float czm_latitudeToWebMercatorFraction(float latitude, float southMercatorY, float oneOverMercatorHeight)
{
    float sinLatitude = sin(latitude);
    float mercatorY = 0.5 * log((1.0 + sinLatitude) / (1.0 - sinLatitude));
    
    return (mercatorY - southMercatorY) * oneOverMercatorHeight;
}
`;var iv=`/**
 * Converts a linear RGB color to an sRGB color.
 *
 * @param {vec3|vec4} linearIn The color in linear color space.
 * @returns {vec3|vec4} The color in sRGB color space. The vector type matches the input.
 */
vec3 czm_linearToSrgb(vec3 linearIn) 
{
    return pow(linearIn, vec3(1.0/2.2));
}

vec4 czm_linearToSrgb(vec4 linearIn) 
{
    vec3 srgbOut = pow(linearIn.rgb, vec3(1.0/2.2));
    return vec4(srgbOut, linearIn.a);
}
`;var ov=`/**
 * Computes distance from an point in 2D to a line in 2D.
 *
 * @name czm_lineDistance
 * @glslFunction
 *
 * param {vec2} point1 A point along the line.
 * param {vec2} point2 A point along the line.
 * param {vec2} point A point that may or may not be on the line.
 * returns {float} The distance from the point to the line.
 */
float czm_lineDistance(vec2 point1, vec2 point2, vec2 point) {
    return abs((point2.y - point1.y) * point.x - (point2.x - point1.x) * point.y + point2.x * point1.y - point2.y * point1.x) / distance(point2, point1);
}
`;var rv=`/**
 * Computes the luminance of a color. 
 *
 * @name czm_luminance
 * @glslFunction
 *
 * @param {vec3} rgb The color.
 * 
 * @returns {float} The luminance.
 *
 * @example
 * float light = czm_luminance(vec3(0.0)); // 0.0
 * float dark = czm_luminance(vec3(1.0));  // ~1.0 
 */
float czm_luminance(vec3 rgb)
{
    // Algorithm from Chapter 10 of Graphics Shaders.
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    return dot(rgb, W);
}
`;var sv=`/**
 * Computes the size of a pixel in meters at a distance from the eye.
 * <p>
 * Use this version when passing in a custom pixel ratio. For example, passing in 1.0 will return meters per native device pixel.
 * </p>
 * @name czm_metersPerPixel
 * @glslFunction
 *
 * @param {vec3} positionEC The position to get the meters per pixel in eye coordinates.
 * @param {float} pixelRatio The scaling factor from pixel space to coordinate space
 *
 * @returns {float} The meters per pixel at positionEC.
 */
float czm_metersPerPixel(vec4 positionEC, float pixelRatio)
{
    float width = czm_viewport.z;
    float height = czm_viewport.w;
    float pixelWidth;
    float pixelHeight;

    float top = czm_frustumPlanes.x;
    float bottom = czm_frustumPlanes.y;
    float left = czm_frustumPlanes.z;
    float right = czm_frustumPlanes.w;

    if (czm_sceneMode == czm_sceneMode2D || czm_orthographicIn3D == 1.0)
    {
        float frustumWidth = right - left;
        float frustumHeight = top - bottom;
        pixelWidth = frustumWidth / width;
        pixelHeight = frustumHeight / height;
    }
    else
    {
        float distanceToPixel = -positionEC.z;
        float inverseNear = 1.0 / czm_currentFrustum.x;
        float tanTheta = top * inverseNear;
        pixelHeight = 2.0 * distanceToPixel * tanTheta / height;
        tanTheta = right * inverseNear;
        pixelWidth = 2.0 * distanceToPixel * tanTheta / width;
    }

    return max(pixelWidth, pixelHeight) * pixelRatio;
}

/**
 * Computes the size of a pixel in meters at a distance from the eye.
 * <p>
 * Use this version when scaling by pixel ratio.
 * </p>
 * @name czm_metersPerPixel
 * @glslFunction
 *
 * @param {vec3} positionEC The position to get the meters per pixel in eye coordinates.
 *
 * @returns {float} The meters per pixel at positionEC.
 */
float czm_metersPerPixel(vec4 positionEC)
{
    return czm_metersPerPixel(positionEC, czm_pixelRatio);
}
`;var av=`/**
 * Transforms a position from model to window coordinates.  The transformation
 * from model to clip coordinates is done using {@link czm_modelViewProjection}.
 * The transform from normalized device coordinates to window coordinates is
 * done using {@link czm_viewportTransformation}, which assumes a depth range
 * of <code>near = 0</code> and <code>far = 1</code>.
 * <br /><br />
 * This transform is useful when there is a need to manipulate window coordinates
 * in a vertex shader as done by {@link BillboardCollection}.
 * <br /><br />
 * This function should not be confused with {@link czm_viewportOrthographic},
 * which is an orthographic projection matrix that transforms from window 
 * coordinates to clip coordinates.
 *
 * @name czm_modelToWindowCoordinates
 * @glslFunction
 *
 * @param {vec4} position The position in model coordinates to transform.
 *
 * @returns {vec4} The transformed position in window coordinates.
 *
 * @see czm_eyeToWindowCoordinates
 * @see czm_modelViewProjection
 * @see czm_viewportTransformation
 * @see czm_viewportOrthographic
 * @see BillboardCollection
 *
 * @example
 * vec4 positionWC = czm_modelToWindowCoordinates(positionMC);
 */
vec4 czm_modelToWindowCoordinates(vec4 position)
{
    vec4 q = czm_modelViewProjection * position;                // clip coordinates
    q.xyz /= q.w;                                                // normalized device coordinates
    q.xyz = (czm_viewportTransformation * vec4(q.xyz, 1.0)).xyz; // window coordinates
    return q;
}
`;var cv=`/**
 * DOC_TBA
 *
 * @name czm_multiplyWithColorBalance
 * @glslFunction
 */
vec3 czm_multiplyWithColorBalance(vec3 left, vec3 right)
{
    // Algorithm from Chapter 10 of Graphics Shaders.
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    
    vec3 target = left * right;
    float leftLuminance = dot(left, W);
    float rightLuminance = dot(right, W);
    float targetLuminance = dot(target, W);
    
    return ((leftLuminance + rightLuminance) / (2.0 * targetLuminance)) * target;
}
`;var uv=`/**
 * Computes a value that scales with distance.  The scaling is clamped at the near and
 * far distances, and does not extrapolate.  This function works with the
 * {@link NearFarScalar} JavaScript class.
 *
 * @name czm_nearFarScalar
 * @glslFunction
 *
 * @param {vec4} nearFarScalar A vector with 4 components: Near distance (x), Near value (y), Far distance (z), Far value (w).
 * @param {float} cameraDistSq The square of the current distance from the camera.
 *
 * @returns {float} The value at this distance.
 */
float czm_nearFarScalar(vec4 nearFarScalar, float cameraDistSq)
{
    float valueAtMin = nearFarScalar.y;
    float valueAtMax = nearFarScalar.w;
    float nearDistanceSq = nearFarScalar.x * nearFarScalar.x;
    float farDistanceSq = nearFarScalar.z * nearFarScalar.z;

    float t = (cameraDistSq - nearDistanceSq) / (farDistanceSq - nearDistanceSq);

    t = pow(clamp(t, 0.0, 1.0), 0.2);

    return mix(valueAtMin, valueAtMax, t);
}
`;var lv=` /**
  * Decodes a unit-length vector in 'oct' encoding to a normalized 3-component Cartesian vector.
  * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
  * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
  *
  * @name czm_octDecode
  * @param {vec2} encoded The oct-encoded, unit-length vector
  * @param {float} range The maximum value of the SNORM range. The encoded vector is stored in log2(rangeMax+1) bits.
  * @returns {vec3} The decoded and normalized vector
  */
  vec3 czm_octDecode(vec2 encoded, float range)
  {
      if (encoded.x == 0.0 && encoded.y == 0.0) {
          return vec3(0.0, 0.0, 0.0);
      }

     encoded = encoded / range * 2.0 - 1.0;
     vec3 v = vec3(encoded.x, encoded.y, 1.0 - abs(encoded.x) - abs(encoded.y));
     if (v.z < 0.0)
     {
         v.xy = (1.0 - abs(v.yx)) * czm_signNotZero(v.xy);
     }

     return normalize(v);
  }

/**
 * Decodes a unit-length vector in 'oct' encoding to a normalized 3-component Cartesian vector.
 * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
 * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
 *
 * @name czm_octDecode
 * @param {vec2} encoded The oct-encoded, unit-length vector
 * @returns {vec3} The decoded and normalized vector
 */
 vec3 czm_octDecode(vec2 encoded)
 {
    return czm_octDecode(encoded, 255.0);
 }

 /**
 * Decodes a unit-length vector in 'oct' encoding packed into a floating-point number to a normalized 3-component Cartesian vector.
 * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
 * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
 *
 * @name czm_octDecode
 * @param {float} encoded The oct-encoded, unit-length vector
 * @returns {vec3} The decoded and normalized vector
 */
 vec3 czm_octDecode(float encoded)
 {
    float temp = encoded / 256.0;
    float x = floor(temp);
    float y = (temp - x) * 256.0;
    return czm_octDecode(vec2(x, y));
 }

/**
 * Decodes three unit-length vectors in 'oct' encoding packed into two floating-point numbers to normalized 3-component Cartesian vectors.
 * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
 * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
 *
 * @name czm_octDecode
 * @param {vec2} encoded The packed oct-encoded, unit-length vectors.
 * @param {vec3} vector1 One decoded and normalized vector.
 * @param {vec3} vector2 One decoded and normalized vector.
 * @param {vec3} vector3 One decoded and normalized vector.
 */
  void czm_octDecode(vec2 encoded, out vec3 vector1, out vec3 vector2, out vec3 vector3)
 {
    float temp = encoded.x / 65536.0;
    float x = floor(temp);
    float encodedFloat1 = (temp - x) * 65536.0;

    temp = encoded.y / 65536.0;
    float y = floor(temp);
    float encodedFloat2 = (temp - y) * 65536.0;

    vector1 = czm_octDecode(encodedFloat1);
    vector2 = czm_octDecode(encodedFloat2);
    vector3 = czm_octDecode(vec2(x, y));
 }

`;var fv=`/**
 * Packs a depth value into a vec3 that can be represented by unsigned bytes.
 *
 * @name czm_packDepth
 * @glslFunction
 *
 * @param {float} depth The floating-point depth.
 * @returns {vec3} The packed depth.
 */
vec4 czm_packDepth(float depth)
{
    // See Aras Pranckevi\u010Dius' post Encoding Floats to RGBA
    // http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/
    vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * depth;
    enc = fract(enc);
    enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
    return enc;
}
`;var dv=`vec3 lambertianDiffuse(vec3 diffuseColor)
{
    return diffuseColor / czm_pi;
}

vec3 fresnelSchlick2(vec3 f0, vec3 f90, float VdotH)
{
    return f0 + (f90 - f0) * pow(clamp(1.0 - VdotH, 0.0, 1.0), 5.0);
}

float smithVisibilityG1(float NdotV, float roughness)
{
    // this is the k value for direct lighting.
    // for image based lighting it will be roughness^2 / 2
    float k = (roughness + 1.0) * (roughness + 1.0) / 8.0;
    return NdotV / (NdotV * (1.0 - k) + k);
}

float smithVisibilityGGX(float roughness, float NdotL, float NdotV)
{
    return (
        smithVisibilityG1(NdotL, roughness) *
        smithVisibilityG1(NdotV, roughness)
    );
}

float GGX(float roughness, float NdotH)
{
    float roughnessSquared = roughness * roughness;
    float f = (NdotH * roughnessSquared - NdotH) * NdotH + 1.0;
    return roughnessSquared / (czm_pi * f * f);
}

/**
 * Compute the diffuse and specular contributions using physically based
 * rendering. This function only handles direct lighting.
 * <p>
 * This function only handles the lighting calculations. Metallic/roughness
 * and specular/glossy must be handled separately. See {@czm_pbrMetallicRoughnessMaterial}, {@czm_pbrSpecularGlossinessMaterial} and {@czm_defaultPbrMaterial}
 * </p>
 *
 * @name czm_pbrlighting
 * @glslFunction
 *
 * @param {vec3} positionEC The position of the fragment in eye coordinates
 * @param {vec3} normalEC The surface normal in eye coordinates
 * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.
 * @param {vec3} lightColorHdr radiance of the light source. This is a HDR value.
 * @param {czm_pbrParameters} The computed PBR parameters.
 * @return {vec3} The computed HDR color
 *
 * @example
 * czm_pbrParameters pbrParameters = czm_pbrMetallicRoughnessMaterial(
 *  baseColor,
 *  metallic,
 *  roughness
 * );
 * vec3 color = czm_pbrlighting(
 *  positionEC,
 *  normalEC,
 *  lightDirectionEC,
 *  lightColorHdr,
 *  pbrParameters);
 */
vec3 czm_pbrLighting(
    vec3 positionEC,
    vec3 normalEC,
    vec3 lightDirectionEC,
    vec3 lightColorHdr,
    czm_pbrParameters pbrParameters
)
{
    vec3 v = -normalize(positionEC);
    vec3 l = normalize(lightDirectionEC);
    vec3 h = normalize(v + l);
    vec3 n = normalEC;
    float NdotL = clamp(dot(n, l), 0.001, 1.0);
    float NdotV = abs(dot(n, v)) + 0.001;
    float NdotH = clamp(dot(n, h), 0.0, 1.0);
    float LdotH = clamp(dot(l, h), 0.0, 1.0);
    float VdotH = clamp(dot(v, h), 0.0, 1.0);

    vec3 f0 = pbrParameters.f0;
    float reflectance = max(max(f0.r, f0.g), f0.b);
    vec3 f90 = vec3(clamp(reflectance * 25.0, 0.0, 1.0));
    vec3 F = fresnelSchlick2(f0, f90, VdotH);

    float alpha = pbrParameters.roughness;
    float G = smithVisibilityGGX(alpha, NdotL, NdotV);
    float D = GGX(alpha, NdotH);
    vec3 specularContribution = F * G * D / (4.0 * NdotL * NdotV);

    vec3 diffuseColor = pbrParameters.diffuseColor;
    // F here represents the specular contribution
    vec3 diffuseContribution = (1.0 - F) * lambertianDiffuse(diffuseColor);

    // Lo = (diffuse + specular) * Li * NdotL
    return (diffuseContribution + specularContribution) * NdotL * lightColorHdr;
}
`;var hv=`/**
 * Compute parameters for physically based rendering using the
 * metallic/roughness workflow. All inputs are linear; sRGB texture values must
 * be decoded beforehand
 *
 * @name czm_pbrMetallicRoughnessMaterial
 * @glslFunction
 *
 * @param {vec3} baseColor For dielectrics, this is the base color. For metals, this is the f0 value (reflectance at normal incidence)
 * @param {float} metallic 0.0 indicates dielectric. 1.0 indicates metal. Values in between are allowed (e.g. to model rust or dirt);
 * @param {float} roughness A value between 0.0 and 1.0
 * @return {czm_pbrParameters} parameters to pass into {@link czm_pbrLighting}
 */
czm_pbrParameters czm_pbrMetallicRoughnessMaterial(
    vec3 baseColor,
    float metallic,
    float roughness
) 
{
    czm_pbrParameters results;

    // roughness is authored as perceptual roughness
    // square it to get material roughness
    roughness = clamp(roughness, 0.0, 1.0);
    results.roughness = roughness * roughness;

    // dielectrics use f0 = 0.04, metals use albedo as f0
    metallic = clamp(metallic, 0.0, 1.0);
    const vec3 REFLECTANCE_DIELECTRIC = vec3(0.04);
    vec3 f0 = mix(REFLECTANCE_DIELECTRIC, baseColor, metallic);
    results.f0 = f0;

    // diffuse only applies to dielectrics.
    results.diffuseColor = baseColor * (1.0 - f0) * (1.0 - metallic);

    return results;
}
`;var pv=`/**
 * Compute parameters for physically based rendering using the
 * specular/glossy workflow. All inputs are linear; sRGB texture values must
 * be decoded beforehand
 *
 * @name czm_pbrSpecularGlossinessMaterial
 * @glslFunction
 *
 * @param {vec3} diffuse The diffuse color for dielectrics (non-metals)
 * @param {vec3} specular The reflectance at normal incidence (f0)
 * @param {float} glossiness A number from 0.0 to 1.0 indicating how smooth the surface is.
 * @return {czm_pbrParameters} parameters to pass into {@link czm_pbrLighting}
 */
czm_pbrParameters czm_pbrSpecularGlossinessMaterial(
    vec3 diffuse,
    vec3 specular,
    float glossiness
) 
{
    czm_pbrParameters results;

    // glossiness is the opposite of roughness, but easier for artists to use.
    float roughness = 1.0 - glossiness;
    results.roughness = roughness * roughness;

    results.diffuseColor = diffuse * (1.0 - max(max(specular.r, specular.g), specular.b));
    results.f0 = specular;

    return results;
}
`;var mv=`float czm_private_getLambertDiffuseOfMaterial(vec3 lightDirectionEC, czm_material material)
{
    return czm_getLambertDiffuse(lightDirectionEC, material.normal);
}

float czm_private_getSpecularOfMaterial(vec3 lightDirectionEC, vec3 toEyeEC, czm_material material)
{
    return czm_getSpecular(lightDirectionEC, toEyeEC, material.normal, material.shininess);
}

/**
 * Computes a color using the Phong lighting model.
 *
 * @name czm_phong
 * @glslFunction
 *
 * @param {vec3} toEye A normalized vector from the fragment to the eye in eye coordinates.
 * @param {czm_material} material The fragment's material.
 *
 * @returns {vec4} The computed color.
 *
 * @example
 * vec3 positionToEyeEC = // ...
 * czm_material material = // ...
 * vec3 lightDirectionEC = // ...
 * out_FragColor = czm_phong(normalize(positionToEyeEC), material, lightDirectionEC);
 *
 * @see czm_getMaterial
 */
vec4 czm_phong(vec3 toEye, czm_material material, vec3 lightDirectionEC)
{
    // Diffuse from directional light sources at eye (for top-down)
    float diffuse = czm_private_getLambertDiffuseOfMaterial(vec3(0.0, 0.0, 1.0), material);
    if (czm_sceneMode == czm_sceneMode3D) {
        // (and horizon views in 3D)
        diffuse += czm_private_getLambertDiffuseOfMaterial(vec3(0.0, 1.0, 0.0), material);
    }

    float specular = czm_private_getSpecularOfMaterial(lightDirectionEC, toEye, material);

    // Temporary workaround for adding ambient.
    vec3 materialDiffuse = material.diffuse * 0.5;

    vec3 ambient = materialDiffuse;
    vec3 color = ambient + material.emission;
    color += materialDiffuse * diffuse * czm_lightColor;
    color += material.specular * specular * czm_lightColor;

    return vec4(color, material.alpha);
}

//added by xuebin  2020.5.18 begin
vec4 czm_phong(vec3 toEye, czm_material material)
{
	return czm_phong(toEye, material,czm_lightDirectionEC);
}
//added by xuebin  end
vec4 czm_private_phong(vec3 toEye, czm_material material, vec3 lightDirectionEC)
{
    float diffuse = czm_private_getLambertDiffuseOfMaterial(lightDirectionEC, material);
    float specular = czm_private_getSpecularOfMaterial(lightDirectionEC, toEye, material);

    vec3 ambient = vec3(0.0);
    vec3 color = ambient + material.emission;
    color += material.diffuse * diffuse * czm_lightColor;
    color += material.specular * specular * czm_lightColor;

    return vec4(color, material.alpha);
}
`;var gv=`/**
 * Computes distance from a point to a plane.
 *
 * @name czm_planeDistance
 * @glslFunction
 *
 * param {vec4} plane A Plane in Hessian Normal Form. See Plane.js
 * param {vec3} point A point in the same space as the plane.
 * returns {float} The distance from the point to the plane.
 */
float czm_planeDistance(vec4 plane, vec3 point) {
    return (dot(plane.xyz, point) + plane.w);
}

/**
 * Computes distance from a point to a plane.
 *
 * @name czm_planeDistance
 * @glslFunction
 *
 * param {vec3} planeNormal Normal for a plane in Hessian Normal Form. See Plane.js
 * param {float} planeDistance Distance for a plane in Hessian Normal form. See Plane.js
 * param {vec3} point A point in the same space as the plane.
 * returns {float} The distance from the point to the plane.
 */
float czm_planeDistance(vec3 planeNormal, float planeDistance, vec3 point) {
    return (dot(planeNormal, point) + planeDistance);
}
`;var yv=`/**
 * Computes the point along a ray at the given time.  <code>time</code> can be positive, negative, or zero.
 *
 * @name czm_pointAlongRay
 * @glslFunction
 *
 * @param {czm_ray} ray The ray to compute the point along.
 * @param {float} time The time along the ray.
 * 
 * @returns {vec3} The point along the ray at the given time.
 * 
 * @example
 * czm_ray ray = czm_ray(vec3(0.0), vec3(1.0, 0.0, 0.0)); // origin, direction
 * vec3 v = czm_pointAlongRay(ray, 2.0); // (2.0, 0.0, 0.0)
 */
vec3 czm_pointAlongRay(czm_ray ray, float time)
{
    return ray.origin + (time * ray.direction);
}
`;var _v=`/**
 * DOC_TBA
 *
 * @name czm_rayEllipsoidIntersectionInterval
 * @glslFunction
 */
czm_raySegment czm_rayEllipsoidIntersectionInterval(czm_ray ray, vec3 ellipsoid_center, vec3 ellipsoid_inverseRadii)
{
   // ray and ellipsoid center in eye coordinates.  radii in model coordinates.
    vec3 q = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ray.origin, 1.0)).xyz;
    vec3 w = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ray.direction, 0.0)).xyz;

    q = q - ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ellipsoid_center, 1.0)).xyz;

    float q2 = dot(q, q);
    float qw = dot(q, w);

    if (q2 > 1.0) // Outside ellipsoid.
    {
        if (qw >= 0.0) // Looking outward or tangent (0 intersections).
        {
            return czm_emptyRaySegment;
        }
        else // qw < 0.0.
        {
            float qw2 = qw * qw;
            float difference = q2 - 1.0; // Positively valued.
            float w2 = dot(w, w);
            float product = w2 * difference;

            if (qw2 < product) // Imaginary roots (0 intersections).
            {
                return czm_emptyRaySegment;
            }
            else if (qw2 > product) // Distinct roots (2 intersections).
            {
                float discriminant = qw * qw - product;
                float temp = -qw + sqrt(discriminant); // Avoid cancellation.
                float root0 = temp / w2;
                float root1 = difference / temp;
                if (root0 < root1)
                {
                    czm_raySegment i = czm_raySegment(root0, root1);
                    return i;
                }
                else
                {
                    czm_raySegment i = czm_raySegment(root1, root0);
                    return i;
                }
            }
            else // qw2 == product.  Repeated roots (2 intersections).
            {
                float root = sqrt(difference / w2);
                czm_raySegment i = czm_raySegment(root, root);
                return i;
            }
        }
    }
    else if (q2 < 1.0) // Inside ellipsoid (2 intersections).
    {
        float difference = q2 - 1.0; // Negatively valued.
        float w2 = dot(w, w);
        float product = w2 * difference; // Negatively valued.
        float discriminant = qw * qw - product;
        float temp = -qw + sqrt(discriminant); // Positively valued.
        czm_raySegment i = czm_raySegment(0.0, temp / w2);
        return i;
    }
    else // q2 == 1.0. On ellipsoid.
    {
        if (qw < 0.0) // Looking inward.
        {
            float w2 = dot(w, w);
            czm_raySegment i = czm_raySegment(0.0, -qw / w2);
            return i;
        }
        else // qw >= 0.0.  Looking outward or tangent.
        {
            return czm_emptyRaySegment;
        }
    }
}
`;var vv=`/**
 * Compute the intersection interval of a ray with a sphere.
 *
 * @name czm_raySphereIntersectionInterval
 * @glslFunction
 *
 * @param {czm_ray} ray The ray.
 * @param {vec3} center The center of the sphere.
 * @param {float} radius The radius of the sphere.
 * @return {czm_raySegment} The intersection interval of the ray with the sphere.
 */
czm_raySegment czm_raySphereIntersectionInterval(czm_ray ray, vec3 center, float radius)
{
    vec3 o = ray.origin;
    vec3 d = ray.direction;

    vec3 oc = o - center;

    float a = dot(d, d);
    float b = 2.0 * dot(d, oc);
    float c = dot(oc, oc) - (radius * radius);

    float det = (b * b) - (4.0 * a * c);

    if (det < 0.0) {
        return czm_emptyRaySegment;
    }

    float sqrtDet = sqrt(det);

    float t0 = (-b - sqrtDet) / (2.0 * a);
    float t1 = (-b + sqrtDet) / (2.0 * a);

    czm_raySegment result = czm_raySegment(t0, t1);
    return result;
}
`;var Cv=`float czm_readDepth(sampler2D depthTexture, vec2 texCoords)
{
    return czm_reverseLogDepth(texture(depthTexture, texCoords).r);
}
`;var bv=`/**
 * Reads a value previously transformed with {@link czm_writeNonPerspective}
 * by dividing it by \`w\`, the value used in the perspective divide.
 * This function is intended to be called in a fragment shader to access a
 * \`varying\` that should not be subject to perspective interpolation.
 * For example, screen-space texture coordinates. The value should have been
 * previously written in the vertex shader with a call to
 * {@link czm_writeNonPerspective}.
 *
 * @name czm_readNonPerspective
 * @glslFunction
 *
 * @param {float|vec2|vec3|vec4} value The non-perspective value to be read.
 * @param {float} oneOverW One over the perspective divide value, \`w\`. Usually this is simply \`gl_FragCoord.w\`.
 * @returns {float|vec2|vec3|vec4} The usable value.
 */
float czm_readNonPerspective(float value, float oneOverW) {
    return value * oneOverW;
}

vec2 czm_readNonPerspective(vec2 value, float oneOverW) {
    return value * oneOverW;
}

vec3 czm_readNonPerspective(vec3 value, float oneOverW) {
    return value * oneOverW;
}

vec4 czm_readNonPerspective(vec4 value, float oneOverW) {
    return value * oneOverW;
}
`;var Tv=`float czm_reverseLogDepth(float logZ)
{
#ifdef LOG_DEPTH
    float near = czm_currentFrustum.x;
    float far = czm_currentFrustum.y;
    float log2Depth = logZ * czm_log2FarDepthFromNearPlusOne;
    float depthFromNear = pow(2.0, log2Depth) - 1.0;
    return far * (1.0 - near / (depthFromNear + near)) / (far - near);
#endif
    return logZ;
}
`;var Ev=`/**
 * Converts an RGB color to HSB (hue, saturation, brightness)
 * HSB <-> RGB conversion with minimal branching: {@link http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl}
 *
 * @name czm_RGBToHSB
 * @glslFunction
 * 
 * @param {vec3} rgb The color in RGB.
 *
 * @returns {vec3} The color in HSB.
 *
 * @example
 * vec3 hsb = czm_RGBToHSB(rgb);
 * hsb.z *= 0.1;
 * rgb = czm_HSBToRGB(hsb);
 */

const vec4 K_RGB2HSB = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);

vec3 czm_RGBToHSB(vec3 rgb)
{
    vec4 p = mix(vec4(rgb.bg, K_RGB2HSB.wz), vec4(rgb.gb, K_RGB2HSB.xy), step(rgb.b, rgb.g));
    vec4 q = mix(vec4(p.xyw, rgb.r), vec4(rgb.r, p.yzx), step(p.x, rgb.r));

    float d = q.x - min(q.w, q.y);
    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + czm_epsilon7)), d / (q.x + czm_epsilon7), q.x);
}
`;var wv=`/**
 * Converts an RGB color to HSL (hue, saturation, lightness)
 * HSL <-> RGB conversion: {@link http://www.chilliant.com/rgb2hsv.html}
 *
 * @name czm_RGBToHSL
 * @glslFunction
 * 
 * @param {vec3} rgb The color in RGB.
 *
 * @returns {vec3} The color in HSL.
 *
 * @example
 * vec3 hsl = czm_RGBToHSL(rgb);
 * hsl.z *= 0.1;
 * rgb = czm_HSLToRGB(hsl);
 */
 
vec3 RGBtoHCV(vec3 rgb)
{
    // Based on work by Sam Hocevar and Emil Persson
    vec4 p = (rgb.g < rgb.b) ? vec4(rgb.bg, -1.0, 2.0 / 3.0) : vec4(rgb.gb, 0.0, -1.0 / 3.0);
    vec4 q = (rgb.r < p.x) ? vec4(p.xyw, rgb.r) : vec4(rgb.r, p.yzx);
    float c = q.x - min(q.w, q.y);
    float h = abs((q.w - q.y) / (6.0 * c + czm_epsilon7) + q.z);
    return vec3(h, c, q.x);
}

vec3 czm_RGBToHSL(vec3 rgb)
{
    vec3 hcv = RGBtoHCV(rgb);
    float l = hcv.z - hcv.y * 0.5;
    float s = hcv.y / (1.0 - abs(l * 2.0 - 1.0) + czm_epsilon7);
    return vec3(hcv.x, s, l);
}
`;var Sv=`/**
 * Converts an RGB color to CIE Yxy.
 * <p>The conversion is described in
 * {@link http://content.gpwiki.org/index.php/D3DBook:High-Dynamic_Range_Rendering#Luminance_Transform|Luminance Transform}
 * </p>
 * 
 * @name czm_RGBToXYZ
 * @glslFunction
 * 
 * @param {vec3} rgb The color in RGB.
 *
 * @returns {vec3} The color in CIE Yxy.
 *
 * @example
 * vec3 xyz = czm_RGBToXYZ(rgb);
 * xyz.x = max(xyz.x - luminanceThreshold, 0.0);
 * rgb = czm_XYZToRGB(xyz);
 */
vec3 czm_RGBToXYZ(vec3 rgb)
{
    const mat3 RGB2XYZ = mat3(0.4124, 0.2126, 0.0193,
                              0.3576, 0.7152, 0.1192,
                              0.1805, 0.0722, 0.9505);
    vec3 xyz = RGB2XYZ * rgb;
    vec3 Yxy;
    Yxy.r = xyz.g;
    float temp = dot(vec3(1.0), xyz);
    Yxy.gb = xyz.rg / temp;
    return Yxy;
}
`;var xv=`/**
 *
 * @name czm_rollerShutter
 * @glslFunction 
 * 
 * xuebing
 */
void czm_rollerShutter(vec2 coord,vec4 region)
{
	vec2 st = coord / czm_viewport.zw;
	if(st.x < region.x || st.x > region.z){
		discard;
	}
	if(st.y < region.y || st.y > region.w){
		discard;
	}
}
`;var Av=`/**
 * Round a floating point value. This function exists because round() doesn't
 * exist in GLSL 1.00. 
 *
 * @param {float|vec2|vec3|vec4} value The value to round
 * @param {float|vec2|vec3|vec3} The rounded value. The type matches the input.
 */
float czm_round(float value) {
  return floor(value + 0.5);
}

vec2 czm_round(vec2 value) {
  return floor(value + 0.5);
}

vec3 czm_round(vec3 value) {
  return floor(value + 0.5);
}

vec4 czm_round(vec4 value) {
  return floor(value + 0.5);
}
`;var Rv=`/**
 * Samples the 4 neighboring pixels and return the weighted average.
 *
 * @private
 */
vec3 czm_sampleOctahedralProjectionWithFiltering(sampler2D projectedMap, vec2 textureSize, vec3 direction, float lod)
{
    direction /= dot(vec3(1.0), abs(direction));
    vec2 rev = abs(direction.zx) - vec2(1.0);
    vec2 neg = vec2(direction.x < 0.0 ? rev.x : -rev.x,
                    direction.z < 0.0 ? rev.y : -rev.y);
    vec2 uv = direction.y < 0.0 ? neg : direction.xz;
    vec2 coord = 0.5 * uv + vec2(0.5);
    vec2 pixel = 1.0 / textureSize;

    if (lod > 0.0)
    {
        // Each subseqeuent mip level is half the size
        float scale = 1.0 / pow(2.0, lod);
        float offset = ((textureSize.y + 1.0) / textureSize.x);

        coord.x *= offset;
        coord *= scale;

        coord.x += offset + pixel.x;
        coord.y += (1.0 - (1.0 / pow(2.0, lod - 1.0))) + pixel.y * (lod - 1.0) * 2.0;
    }
    else
    {
        coord.x *= (textureSize.y / textureSize.x);
    }

    // Do bilinear filtering
    #ifndef OES_texture_float_linear
        vec3 color1 = texture(projectedMap, coord + vec2(0.0, pixel.y)).rgb;
        vec3 color2 = texture(projectedMap, coord + vec2(pixel.x, 0.0)).rgb;
        vec3 color3 = texture(projectedMap, coord + pixel).rgb;
        vec3 color4 = texture(projectedMap, coord).rgb;

        vec2 texturePosition = coord * textureSize;

        float fu = fract(texturePosition.x);
        float fv = fract(texturePosition.y);

        vec3 average1 = mix(color4, color2, fu);
        vec3 average2 = mix(color1, color3, fu);

        vec3 color = mix(average1, average2, fv);
    #else
        vec3 color = texture(projectedMap, coord).rgb;
    #endif

    return color;
}


/**
 * Samples from a cube map that has been projected using an octahedral projection from the given direction.
 *
 * @name czm_sampleOctahedralProjection
 * @glslFunction
 *
 * @param {sampler2D} projectedMap The texture with the octahedral projected cube map.
 * @param {vec2} textureSize The width and height dimensions in pixels of the projected map.
 * @param {vec3} direction The normalized direction used to sample the cube map.
 * @param {float} lod The level of detail to sample.
 * @param {float} maxLod The maximum level of detail.
 * @returns {vec3} The color of the cube map at the direction.
 */
vec3 czm_sampleOctahedralProjection(sampler2D projectedMap, vec2 textureSize, vec3 direction, float lod, float maxLod) {
    float currentLod = floor(lod + 0.5);
    float nextLod = min(currentLod + 1.0, maxLod);

    vec3 colorCurrentLod = czm_sampleOctahedralProjectionWithFiltering(projectedMap, textureSize, direction, currentLod);
    vec3 colorNextLod = czm_sampleOctahedralProjectionWithFiltering(projectedMap, textureSize, direction, nextLod);

    return mix(colorNextLod, colorCurrentLod, nextLod - lod);
}
`;var Pv=`/**
 * Adjusts the saturation of a color.
 * 
 * @name czm_saturation
 * @glslFunction
 * 
 * @param {vec3} rgb The color.
 * @param {float} adjustment The amount to adjust the saturation of the color.
 *
 * @returns {float} The color with the saturation adjusted.
 *
 * @example
 * vec3 greyScale = czm_saturation(color, 0.0);
 * vec3 doubleSaturation = czm_saturation(color, 2.0);
 */
vec3 czm_saturation(vec3 rgb, float adjustment)
{
    // Algorithm from Chapter 16 of OpenGL Shading Language
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    vec3 intensity = vec3(dot(rgb, W));
    return mix(intensity, rgb, adjustment);
}
`;var Ov=`
float czm_sampleShadowMap(highp samplerCube shadowMap, vec3 d)
{
    return czm_unpackDepth(czm_textureCube(shadowMap, d));
}

float czm_sampleShadowMap(highp sampler2D shadowMap, vec2 uv)
{
#ifdef USE_SHADOW_DEPTH_TEXTURE
    return texture(shadowMap, uv).r;
#else
    return czm_unpackDepth(texture(shadowMap, uv));
#endif
}

float czm_shadowDepthCompare(samplerCube shadowMap, vec3 uv, float depth)
{
    return step(depth, czm_sampleShadowMap(shadowMap, uv));
}

float czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth)
{
    return step(depth, czm_sampleShadowMap(shadowMap, uv));
}
`;var Iv=`
float czm_private_shadowVisibility(float visibility, float nDotL, float normalShadingSmooth, float darkness)
{
#ifdef USE_NORMAL_SHADING
#ifdef USE_NORMAL_SHADING_SMOOTH
    float strength = clamp(nDotL / normalShadingSmooth, 0.0, 1.0);
#else
    float strength = step(0.0, nDotL);
#endif
    visibility *= strength;
#endif

    visibility = max(visibility, darkness);
    return visibility;
}

#ifdef USE_CUBE_MAP_SHADOW
float czm_shadowVisibility(samplerCube shadowMap, czm_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec3 uvw = shadowParameters.texCoords;

    depth -= depthBias;
    float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);
    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}
#else
float czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec2 uv = shadowParameters.texCoords;

    depth -= depthBias;
#ifdef USE_SOFT_SHADOWS
    vec2 texelStepSize = shadowParameters.texelStepSize;
    float radius = 1.0;
    float dx0 = -texelStepSize.x * radius;
    float dy0 = -texelStepSize.y * radius;
    float dx1 = texelStepSize.x * radius;
    float dy1 = texelStepSize.y * radius;
    float visibility = (
        czm_shadowDepthCompare(shadowMap, uv, depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)
    ) * (1.0 / 9.0);
#else
    float visibility = czm_shadowDepthCompare(shadowMap, uv, depth);
#endif

    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}
#endif
`;var Dv=`/**
 * Returns 1.0 if the given value is positive or zero, and -1.0 if it is negative.  This is similar to the GLSL
 * built-in function <code>sign</code> except that returns 1.0 instead of 0.0 when the input value is 0.0.
 * 
 * @name czm_signNotZero
 * @glslFunction
 *
 * @param {} value The value for which to determine the sign.
 * @returns {} 1.0 if the value is positive or zero, -1.0 if the value is negative.
 */
float czm_signNotZero(float value)
{
    return value >= 0.0 ? 1.0 : -1.0;
}

vec2 czm_signNotZero(vec2 value)
{
    return vec2(czm_signNotZero(value.x), czm_signNotZero(value.y));
}

vec3 czm_signNotZero(vec3 value)
{
    return vec3(czm_signNotZero(value.x), czm_signNotZero(value.y), czm_signNotZero(value.z));
}

vec4 czm_signNotZero(vec4 value)
{
    return vec4(czm_signNotZero(value.x), czm_signNotZero(value.y), czm_signNotZero(value.z), czm_signNotZero(value.w));
}
`;var Mv=`/**
 * Computes a color from the third order spherical harmonic coefficients and a normalized direction vector.
 * <p>
 * The order of the coefficients is [L00, L1_1, L10, L11, L2_2, L2_1, L20, L21, L22].
 * </p>
 *
 * @name czm_sphericalHarmonics
 * @glslFunction
 *
 * @param {vec3} normal The normalized direction.
 * @param {vec3[9]} coefficients The third order spherical harmonic coefficients.
 * @returns {vec3} The color at the direction.
 *
 * @see https://graphics.stanford.edu/papers/envmap/envmap.pdf
 */
vec3 czm_sphericalHarmonics(vec3 normal, vec3 coefficients[9])
{
    vec3 L00 = coefficients[0];
    vec3 L1_1 = coefficients[1];
    vec3 L10 = coefficients[2];
    vec3 L11 = coefficients[3];
    vec3 L2_2 = coefficients[4];
    vec3 L2_1 = coefficients[5];
    vec3 L20 = coefficients[6];
    vec3 L21 = coefficients[7];
    vec3 L22 = coefficients[8];

    float x = normal.x;
    float y = normal.y;
    float z = normal.z;

    return
          L00
        + L1_1 * y
        + L10 * z
        + L11 * x
        + L2_2 * (y * x)
        + L2_1 * (y * z)
        + L20 * (3.0 * z * z - 1.0)
        + L21 * (z * x)
        + L22 * (x * x - y * y);
}
`;var zv=`/**
 * Converts an sRGB color to a linear RGB color.
 *
 * @param {vec3|vec4} srgbIn The color in sRGB space
 * @returns {vec3|vec4} The color in linear color space. The vector type matches the input.
 */
vec3 czm_srgbToLinear(vec3 srgbIn)
{
    return pow(srgbIn, vec3(2.2));
}

vec4 czm_srgbToLinear(vec4 srgbIn) 
{
    vec3 linearOut = pow(srgbIn.rgb, vec3(2.2));
    return vec4(linearOut, srgbIn.a);
}
`;var Nv=`/**
 * Creates a matrix that transforms vectors from tangent space to eye space.
 *
 * @name czm_tangentToEyeSpaceMatrix
 * @glslFunction
 *
 * @param {vec3} normalEC The normal vector in eye coordinates.
 * @param {vec3} tangentEC The tangent vector in eye coordinates.
 * @param {vec3} bitangentEC The bitangent vector in eye coordinates.
 *
 * @returns {mat3} The matrix that transforms from tangent space to eye space.
 *
 * @example
 * mat3 tangentToEye = czm_tangentToEyeSpaceMatrix(normalEC, tangentEC, bitangentEC);
 * vec3 normal = tangentToEye * texture(normalMap, st).xyz;
 */
mat3 czm_tangentToEyeSpaceMatrix(vec3 normalEC, vec3 tangentEC, vec3 bitangentEC)
{
    vec3 normal = normalize(normalEC);
    vec3 tangent = normalize(tangentEC);
    vec3 bitangent = normalize(bitangentEC);
    return mat3(tangent.x  , tangent.y  , tangent.z,
                bitangent.x, bitangent.y, bitangent.z,
                normal.x   , normal.y   , normal.z);
}
`;var Lv=`/**
 * A wrapper around the texture (WebGL2) / textureCube (WebGL1)
 * function to allow for WebGL 1 support.
 * 
 * @name czm_textureCube
 * @glslFunction
 *
 * @param {samplerCube} sampler The sampler.
 * @param {vec3} p The coordinates to sample the texture at.
 */
vec4 czm_textureCube(samplerCube sampler, vec3 p) {
#if __VERSION__ == 300
    return texture(sampler, p);
#else  
    return textureCube(sampler, p);
#endif
}`;var Bv=`/**
 * Transforms a plane.
 * 
 * @name czm_transformPlane
 * @glslFunction
 *
 * @param {vec4} plane The plane in Hessian Normal Form.
 * @param {mat4} transform The inverse-transpose of a transformation matrix.
 */
vec4 czm_transformPlane(vec4 plane, mat4 transform) {
    vec4 transformedPlane = transform * plane;
    // Convert the transformed plane to Hessian Normal Form
    float normalMagnitude = length(transformedPlane.xyz);
    return transformedPlane / normalMagnitude;
}
`;var Fv=`/**
 * Transforms a plane.
 * 
 * @name czm_transformPlaneOld
 * @glslFunction
 *
 * @param {vec4} plane The plane in Hessian Normal Form.
 * @param {mat4} transform The inverse-transpose of a transformation matrix.
 */
// add 20221019
vec4 czm_transformPlaneOld(vec4 clippingPlane, mat4 transform) {
    vec3 transformedDirection = normalize((transform * vec4(clippingPlane.xyz, 0.0)).xyz);
    vec3 transformedPosition = (transform * vec4(clippingPlane.xyz * -clippingPlane.w, 1.0)).xyz;
    vec4 transformedPlane;
    transformedPlane.xyz = transformedDirection;
    transformedPlane.w = -dot(transformedDirection, transformedPosition);
    return transformedPlane;
}

`;var Vv=`/**
 * Translates a position (or any <code>vec3</code>) that was encoded with {@link EncodedCartesian3},
 * and then provided to the shader as separate <code>high</code> and <code>low</code> bits to
 * be relative to the eye.  As shown in the example, the position can then be transformed in eye
 * or clip coordinates using {@link czm_modelViewRelativeToEye} or {@link czm_modelViewProjectionRelativeToEye},
 * respectively.
 * <p>
 * This technique, called GPU RTE, eliminates jittering artifacts when using large coordinates as
 * described in {@link http://help.agi.com/AGIComponents/html/BlogPrecisionsPrecisions.htm|Precisions, Precisions}.
 * </p>
 *
 * @name czm_translateRelativeToEye
 * @glslFunction
 *
 * @param {vec3} high The position's high bits.
 * @param {vec3} low The position's low bits.
 * @returns {vec3} The position translated to be relative to the camera's position.
 *
 * @example
 * in vec3 positionHigh;
 * in vec3 positionLow;
 *
 * void main()
 * {
 *   vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);
 *   gl_Position = czm_modelViewProjectionRelativeToEye * p;
 * }
 *
 * @see czm_modelViewRelativeToEye
 * @see czm_modelViewProjectionRelativeToEye
 * @see czm_computePosition
 * @see EncodedCartesian3
 */
vec4 czm_translateRelativeToEye(vec3 high, vec3 low)
{
    vec3 highDifference = high - czm_encodedCameraPositionMCHigh;
    vec3 lowDifference = low - czm_encodedCameraPositionMCLow;

    return vec4(highDifference + lowDifference, 1.0);
}
`;var Uv=`/**
 * @private
 */
vec4 czm_translucentPhong(vec3 toEye, czm_material material, vec3 lightDirectionEC)
{
    // Diffuse from directional light sources at eye (for top-down and horizon views)
    float diffuse = czm_getLambertDiffuse(vec3(0.0, 0.0, 1.0), material.normal);

    if (czm_sceneMode == czm_sceneMode3D) {
        // (and horizon views in 3D)
        diffuse += czm_getLambertDiffuse(vec3(0.0, 1.0, 0.0), material.normal);
    }

    diffuse = clamp(diffuse, 0.0, 1.0);

    float specular = czm_getSpecular(lightDirectionEC, toEye, material.normal, material.shininess);

    // Temporary workaround for adding ambient.
    vec3 materialDiffuse = material.diffuse * 0.5;

    vec3 ambient = materialDiffuse;
    vec3 color = ambient + material.emission;
    color += materialDiffuse * diffuse * czm_lightColor;
    color += material.specular * specular * czm_lightColor;

    return vec4(color, material.alpha);
}
//added by xuebin 2020.5.18   wuhanguoyao
vec4 czm_translucentPhong(vec3 toEye, czm_material material)
{
   return czm_translucentPhong(toEye, material, czm_lightDirectionEC);
}
`;var kv=`/**
 * Returns the transpose of the matrix.  The input <code>matrix</code> can be
 * a <code>mat2</code>, <code>mat3</code>, or <code>mat4</code>.
 *
 * @name czm_transpose
 * @glslFunction
 *
 * @param {} matrix The matrix to transpose.
 *
 * @returns {} The transposed matrix.
 *
 * @example
 * // GLSL declarations
 * mat2 czm_transpose(mat2 matrix);
 * mat3 czm_transpose(mat3 matrix);
 * mat4 czm_transpose(mat4 matrix);
 *
 * // Transpose a 3x3 rotation matrix to find its inverse.
 * mat3 eastNorthUpToEye = czm_eastNorthUpToEyeCoordinates(
 *     positionMC, normalEC);
 * mat3 eyeToEastNorthUp = czm_transpose(eastNorthUpToEye);
 */
mat2 czm_transpose(mat2 matrix)
{
    return mat2(
        matrix[0][0], matrix[1][0],
        matrix[0][1], matrix[1][1]);
}

mat3 czm_transpose(mat3 matrix)
{
    return mat3(
        matrix[0][0], matrix[1][0], matrix[2][0],
        matrix[0][1], matrix[1][1], matrix[2][1],
        matrix[0][2], matrix[1][2], matrix[2][2]);
}

mat4 czm_transpose(mat4 matrix)
{
    return mat4(
        matrix[0][0], matrix[1][0], matrix[2][0], matrix[3][0],
        matrix[0][1], matrix[1][1], matrix[2][1], matrix[3][1],
        matrix[0][2], matrix[1][2], matrix[2][2], matrix[3][2],
        matrix[0][3], matrix[1][3], matrix[2][3], matrix[3][3]);
}
`;var Gv=`/**
 * Unpacks a vec4 depth value to a float in [0, 1) range.
 *
 * @name czm_unpackDepth
 * @glslFunction
 *
 * @param {vec4} packedDepth The packed depth.
 *
 * @returns {float} The floating-point depth in [0, 1) range.
 */
 float czm_unpackDepth(vec4 packedDepth)
 {
    // See Aras Pranckevi\u010Dius' post Encoding Floats to RGBA
    // http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/
    return dot(packedDepth, vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 16581375.0));
 }
`;var Hv=`/**
 * Unpack an IEEE 754 single-precision float that is packed as a little-endian unsigned normalized vec4.
 *
 * @name czm_unpackFloat
 * @glslFunction
 *
 * @param {vec4} packedFloat The packed float.
 *
 * @returns {float} The floating-point depth in arbitrary range.
 */
float czm_unpackFloat(vec4 packedFloat)
{
    // Convert to [0.0, 255.0] and round to integer
    packedFloat = floor(packedFloat * 255.0 + 0.5);
    float sign = 1.0 - step(128.0, packedFloat[3]) * 2.0;
    float exponent = 2.0 * mod(packedFloat[3], 128.0) + step(128.0, packedFloat[2]) - 127.0;    
    if (exponent == -127.0)
    {
        return 0.0;
    }
    float mantissa = mod(packedFloat[2], 128.0) * 65536.0 + packedFloat[1] * 256.0 + packedFloat[0] + float(0x800000);
    float result = sign * exp2(exponent - 23.0) * mantissa;
    return result;
}
`;var jv=`/**
 * Unpack unsigned integers of 1-4 bytes. in WebGL 1, there is no uint type,
 * so the return value is an int.
 * <p>
 * There are also precision limitations in WebGL 1. highp int is still limited
 * to 24 bits. Above the value of 2^24 = 16777216, precision loss may occur.
 * </p>
 *
 * @param {float|vec2|vec3|vec4} packed The packed value. For vectors, the components are listed in little-endian order.
 *
 * @return {int} The unpacked value.
 */
 int czm_unpackUint(float packedValue) {
   float rounded = czm_round(packedValue * 255.0);
   return int(rounded);
 }

 int czm_unpackUint(vec2 packedValue) {
   vec2 rounded = czm_round(packedValue * 255.0);
   return int(dot(rounded, vec2(1.0, 256.0)));
 }

 int czm_unpackUint(vec3 packedValue) {
   vec3 rounded = czm_round(packedValue * 255.0);
   return int(dot(rounded, vec3(1.0, 256.0, 65536.0)));
 }

 int czm_unpackUint(vec4 packedValue) {
   vec4 rounded = czm_round(packedValue * 255.0);
   return int(dot(rounded, vec4(1.0, 256.0, 65536.0, 16777216.0)));
 }
`;var Wv=`/**
 * Transform metadata values following the EXT_structural_metadata spec
 * by multiplying by scale and adding the offset. Operations are always
 * performed component-wise, even for matrices.
 * 
 * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} offset The offset to add
 * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} scale The scale factor to multiply
 * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} value The original value.
 *
 * @return {float|vec2|vec3|vec4|mat2|mat3|mat4} The transformed value of the same scalar/vector/matrix type as the input.
 */
float czm_valueTransform(float offset, float scale, float value) {
  return scale * value + offset;
}

vec2 czm_valueTransform(vec2 offset, vec2 scale, vec2 value) {
  return scale * value + offset;
}

vec3 czm_valueTransform(vec3 offset, vec3 scale, vec3 value) {
  return scale * value + offset;
}

vec4 czm_valueTransform(vec4 offset, vec4 scale, vec4 value) {
  return scale * value + offset;
}

mat2 czm_valueTransform(mat2 offset, mat2 scale, mat2 value) {
  return matrixCompMult(scale, value) + offset;
}

mat3 czm_valueTransform(mat3 offset, mat3 scale, mat3 value) {
  return matrixCompMult(scale, value) + offset;
}

mat4 czm_valueTransform(mat4 offset, mat4 scale, mat4 value) {
  return matrixCompMult(scale, value) + offset;
}
`;var qv=`#ifdef LOG_DEPTH
// 1.0 at the near plane, increasing linearly from there.
out float v_depthFromNearPlusOne;
#ifdef SHADOW_MAP
out vec3 v_logPositionEC;
#endif
#endif

vec4 czm_updatePositionDepth(vec4 coords) {
#if defined(LOG_DEPTH)

#ifdef SHADOW_MAP
    vec3 logPositionEC = (czm_inverseProjection * coords).xyz;
    v_logPositionEC = logPositionEC;
#endif

    // With the very high far/near ratios used with the logarithmic depth
    // buffer, floating point rounding errors can cause linear depth values
    // to end up on the wrong side of the far plane, even for vertices that
    // are really nowhere near it. Since we always write a correct logarithmic
    // depth value in the fragment shader anyway, we just need to make sure
    // such errors don't cause the primitive to be clipped entirely before
    // we even get to the fragment shader.
    coords.z = clamp(coords.z / coords.w, -1.0, 1.0) * coords.w;
#endif

    return coords;
}

/**
 * Writes the logarithmic depth to gl_Position using the already computed gl_Position.
 *
 * @name czm_vertexLogDepth
 * @glslFunction
 */
void czm_vertexLogDepth()
{
#ifdef LOG_DEPTH
    v_depthFromNearPlusOne = (gl_Position.w - czm_currentFrustum.x) + 1.0;
    gl_Position = czm_updatePositionDepth(gl_Position);
#endif
}

/**
 * Writes the logarithmic depth to gl_Position using the provided clip coordinates.
 * <p>
 * An example use case for this function would be moving the vertex in window coordinates
 * before converting back to clip coordinates. Use the original vertex clip coordinates.
 * </p>
 * @name czm_vertexLogDepth
 * @glslFunction
 *
 * @param {vec4} clipCoords The vertex in clip coordinates.
 *
 * @example
 * czm_vertexLogDepth(czm_projection * vec4(positionEyeCoordinates, 1.0));
 */
void czm_vertexLogDepth(vec4 clipCoords)
{
#ifdef LOG_DEPTH
    v_depthFromNearPlusOne = (clipCoords.w - czm_currentFrustum.x) + 1.0;
    czm_updatePositionDepth(clipCoords);
#endif
}
`;var Yv=`vec4 czm_screenToEyeCoordinates(vec4 screenCoordinate)
{
    // Reconstruct NDC coordinates
    float x = 2.0 * screenCoordinate.x - 1.0;
    float y = 2.0 * screenCoordinate.y - 1.0;
    float z = (screenCoordinate.z - czm_viewportTransformation[3][2]) / czm_viewportTransformation[2][2];
    vec4 q = vec4(x, y, z, 1.0);

    // Reverse the perspective division to obtain clip coordinates.
    q /= screenCoordinate.w;

    // Reverse the projection transformation to obtain eye coordinates.
    if (!(czm_inverseProjection == mat4(0.0))) // IE and Edge sometimes do something weird with != between mat4s
    {
        q = czm_inverseProjection * q;
    }
    else
    {
        float top = czm_frustumPlanes.x;
        float bottom = czm_frustumPlanes.y;
        float left = czm_frustumPlanes.z;
        float right = czm_frustumPlanes.w;

        float near = czm_currentFrustum.x;
        float far = czm_currentFrustum.y;

        q.x = (q.x * (right - left) + left + right) * 0.5;
        q.y = (q.y * (top - bottom) + bottom + top) * 0.5;
        q.z = (q.z * (near - far) - near - far) * 0.5;
        q.w = 1.0;
    }

    return q;
}

/**
 * Transforms a position from window to eye coordinates.
 * The transform from window to normalized device coordinates is done using components
 * of (@link czm_viewport} and {@link czm_viewportTransformation} instead of calculating
 * the inverse of <code>czm_viewportTransformation</code>. The transformation from
 * normalized device coordinates to clip coordinates is done using <code>fragmentCoordinate.w</code>,
 * which is expected to be the scalar used in the perspective divide. The transformation
 * from clip to eye coordinates is done using {@link czm_inverseProjection}.
 *
 * @name czm_windowToEyeCoordinates
 * @glslFunction
 *
 * @param {vec4} fragmentCoordinate The position in window coordinates to transform.
 *
 * @returns {vec4} The transformed position in eye coordinates.
 *
 * @see czm_modelToWindowCoordinates
 * @see czm_eyeToWindowCoordinates
 * @see czm_inverseProjection
 * @see czm_viewport
 * @see czm_viewportTransformation
 *
 * @example
 * vec4 positionEC = czm_windowToEyeCoordinates(gl_FragCoord);
 */
vec4 czm_windowToEyeCoordinates(vec4 fragmentCoordinate)
{
    vec2 screenCoordXY = (fragmentCoordinate.xy - czm_viewport.xy) / czm_viewport.zw;
    return czm_screenToEyeCoordinates(vec4(screenCoordXY, fragmentCoordinate.zw));
}

vec4 czm_screenToEyeCoordinates(vec2 screenCoordinateXY, float depthOrLogDepth)
{
    // See reverseLogDepth.glsl. This is separate to re-use the pow.
#if defined(LOG_DEPTH) || defined(LOG_DEPTH_READ_ONLY)
    float near = czm_currentFrustum.x;
    float far = czm_currentFrustum.y;
    float log2Depth = depthOrLogDepth * czm_log2FarDepthFromNearPlusOne;
    float depthFromNear = pow(2.0, log2Depth) - 1.0;
    float depthFromCamera = depthFromNear + near;
    vec4 screenCoord = vec4(screenCoordinateXY, far * (1.0 - near / depthFromCamera) / (far - near), 1.0);
    vec4 eyeCoordinate = czm_screenToEyeCoordinates(screenCoord);
    eyeCoordinate.w = 1.0 / depthFromCamera; // Better precision
    return eyeCoordinate;
#else
    vec4 screenCoord = vec4(screenCoordinateXY, depthOrLogDepth, 1.0);
    vec4 eyeCoordinate = czm_screenToEyeCoordinates(screenCoord);
#endif
    return eyeCoordinate;
}

/**
 * Transforms a position given as window x/y and a depth or a log depth from window to eye coordinates.
 * This function produces more accurate results for window positions with log depth than
 * conventionally unpacking the log depth using czm_reverseLogDepth and using the standard version
 * of czm_windowToEyeCoordinates.
 *
 * @name czm_windowToEyeCoordinates
 * @glslFunction
 *
 * @param {vec2} fragmentCoordinateXY The XY position in window coordinates to transform.
 * @param {float} depthOrLogDepth A depth or log depth for the fragment.
 *
 * @see czm_modelToWindowCoordinates
 * @see czm_eyeToWindowCoordinates
 * @see czm_inverseProjection
 * @see czm_viewport
 * @see czm_viewportTransformation
 *
 * @returns {vec4} The transformed position in eye coordinates.
 */
vec4 czm_windowToEyeCoordinates(vec2 fragmentCoordinateXY, float depthOrLogDepth)
{
    vec2 screenCoordXY = (fragmentCoordinateXY.xy - czm_viewport.xy) / czm_viewport.zw;
    return czm_screenToEyeCoordinates(screenCoordXY, depthOrLogDepth);
}
`;var Zv=`// emulated noperspective
#if !defined(LOG_DEPTH)
in float v_WindowZ;
#endif

/**
 * Emulates GL_DEPTH_CLAMP. Clamps a fragment to the near and far plane
 * by writing the fragment's depth. See czm_depthClamp for more details.
 *
 * @name czm_writeDepthClamp
 * @glslFunction
 *
 * @example
 * out_FragColor = color;
 * czm_writeDepthClamp();
 *
 * @see czm_depthClamp
 */
void czm_writeDepthClamp()
{
#if (!defined(LOG_DEPTH) && (__VERSION__ == 300 || defined(GL_EXT_frag_depth)))
    gl_FragDepth = clamp(v_WindowZ * gl_FragCoord.w, 0.0, 1.0);
#endif
}
`;var Xv=`#ifdef LOG_DEPTH
in float v_depthFromNearPlusOne;

#ifdef POLYGON_OFFSET
uniform vec2 u_polygonOffset;
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
#endif
#endif

#endif

/**
 * Writes the fragment depth to the logarithmic depth buffer.
 * <p>
 * Use this when the vertex shader does not call {@link czm_vertexlogDepth}, for example, when
 * ray-casting geometry using a full screen quad.
 * </p>
 * @name czm_writeLogDepth
 * @glslFunction
 *
 * @param {float} depth The depth coordinate, where 1.0 is on the near plane and
 *                      depth increases in eye-space units from there
 *
 * @example
 * czm_writeLogDepth((czm_projection * v_positionEyeCoordinates).w + 1.0);
 */
void czm_writeLogDepth(float depth)
{
#if (defined(LOG_DEPTH) && (__VERSION__ == 300 || defined(GL_EXT_frag_depth)))
    // Discard the vertex if it's not between the near and far planes.
    // We allow a bit of epsilon on the near plane comparison because a 1.0
    // from the vertex shader (indicating the vertex should be _on_ the near
    // plane) will not necessarily come here as exactly 1.0.
    if (depth <= 0.9999999 || depth > czm_farDepthFromNearPlusOne) {
        discard;
    }

#ifdef POLYGON_OFFSET
    // Polygon offset: m * factor + r * units
    float factor = u_polygonOffset[0];
    float units = u_polygonOffset[1];

#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))
    // This factor doesn't work in IE 10
    if (factor != 0.0) {
        // m = sqrt(dZdX^2 + dZdY^2);
        float x = dFdx(depth);
        float y = dFdy(depth);
        float m = sqrt(x * x + y * y);

        // Apply the factor before computing the log depth.
        depth += m * factor;
    }
#endif

#endif

    gl_FragDepth = log2(depth) * czm_oneOverLog2FarDepthFromNearPlusOne;

#ifdef POLYGON_OFFSET
    // Apply the units after the log depth.
    gl_FragDepth += czm_epsilon7 * units;
#endif

#endif
}

/**
 * Writes the fragment depth to the logarithmic depth buffer.
 * <p>
 * Use this when the vertex shader calls {@link czm_vertexlogDepth}.
 * </p>
 *
 * @name czm_writeLogDepth
 * @glslFunction
 */
void czm_writeLogDepth() {
#ifdef LOG_DEPTH
    czm_writeLogDepth(v_depthFromNearPlusOne);
#endif
}
`;var $v=`/**
 * Transforms a value for non-perspective interpolation by multiplying
 * it by w, the value used in the perspective divide. This function is
 * intended to be called in a vertex shader to compute the value of a
 * \`varying\` that should not be subject to perspective interpolation.
 * For example, screen-space texture coordinates. The fragment shader
 * must call {@link czm_readNonPerspective} to retrieve the final
 * non-perspective value.
 *
 * @name czm_writeNonPerspective
 * @glslFunction
 *
 * @param {float|vec2|vec3|vec4} value The value to be interpolated without accounting for perspective.
 * @param {float} w The perspective divide value. Usually this is the computed \`gl_Position.w\`.
 * @returns {float|vec2|vec3|vec4} The transformed value, intended to be stored in a \`varying\` and read in the
 *          fragment shader with {@link czm_readNonPerspective}.
 */
float czm_writeNonPerspective(float value, float w) {
    return value * w;
}

vec2 czm_writeNonPerspective(vec2 value, float w) {
    return value * w;
}

vec3 czm_writeNonPerspective(vec3 value, float w) {
    return value * w;
}

vec4 czm_writeNonPerspective(vec4 value, float w) {
    return value * w;
}
`;var Kv=`/**
 * Converts a CIE Yxy color to RGB.
 * <p>The conversion is described in
 * {@link http://content.gpwiki.org/index.php/D3DBook:High-Dynamic_Range_Rendering#Luminance_Transform|Luminance Transform}
 * </p>
 * 
 * @name czm_XYZToRGB
 * @glslFunction
 * 
 * @param {vec3} Yxy The color in CIE Yxy.
 *
 * @returns {vec3} The color in RGB.
 *
 * @example
 * vec3 xyz = czm_RGBToXYZ(rgb);
 * xyz.x = max(xyz.x - luminanceThreshold, 0.0);
 * rgb = czm_XYZToRGB(xyz);
 */
vec3 czm_XYZToRGB(vec3 Yxy)
{
    const mat3 XYZ2RGB = mat3( 3.2405, -0.9693,  0.0556,
                              -1.5371,  1.8760, -0.2040,
                              -0.4985,  0.0416,  1.0572);
    vec3 xyz;
    xyz.r = Yxy.r * Yxy.g / Yxy.b;
    xyz.g = Yxy.r;
    xyz.b = Yxy.r * (1.0 - Yxy.g - Yxy.b) / Yxy.b;
    
    return XYZ2RGB * xyz;
}
`;var _u={czm_degreesPerRadian:Ay,czm_depthRange:Ry,czm_epsilon1:Py,czm_epsilon2:Oy,czm_epsilon3:Iy,czm_epsilon4:Dy,czm_epsilon5:My,czm_epsilon6:zy,czm_epsilon7:Ny,czm_infinity:Ly,czm_oneOverPi:By,czm_oneOverTwoPi:Fy,czm_passCesium3DTile:Vy,czm_passCesium3DTileClassification:Uy,czm_passCesium3DTileClassificationIgnoreShow:ky,czm_passClassification:Gy,czm_passCompute:Hy,czm_passEnvironment:jy,czm_passGlobe:Wy,czm_passOpaque:qy,czm_passOverlay:Yy,czm_passTerrainClassification:Zy,czm_passTranslucent:Xy,czm_passVoxels:$y,czm_pi:Ky,czm_piOverFour:Qy,czm_piOverSix:Jy,czm_piOverThree:e_,czm_piOverTwo:t_,czm_radiansPerDegree:n_,czm_sceneMode2D:i_,czm_sceneMode3D:o_,czm_sceneModeColumbusView:r_,czm_sceneModeMorphing:s_,czm_solarRadius:a_,czm_threePiOver2:c_,czm_twoPi:u_,czm_webMercatorMaxLatitude:l_,czm_depthRangeStruct:f_,czm_material:d_,czm_materialInput:h_,czm_modelMaterial:p_,czm_modelVertexOutput:m_,czm_pbrParameters:g_,czm_ray:y_,czm_raySegment:__,czm_shadowParameters:v_,czm_acesTonemapping:C_,czm_alphaWeight:b_,czm_antialias:T_,czm_approximateSphericalCoordinates:E_,czm_backFacing:w_,czm_branchFreeTernary:S_,czm_cascadeColor:x_,czm_cascadeDistance:A_,czm_cascadeMatrix:R_,czm_cascadeWeights:P_,czm_columbusViewMorph:O_,czm_computePosition:I_,czm_cosineAndSine:D_,czm_decompressTextureCoordinates:M_,czm_defaultPbrMaterial:z_,czm_depthClamp:N_,czm_eastNorthUpToEyeCoordinates:L_,czm_ellipsoidContainsPoint:B_,czm_ellipsoidWgs84TextureCoordinates:F_,czm_equalsEpsilon:V_,czm_eyeOffset:U_,czm_eyeToWindowCoordinates:k_,czm_fastApproximateAtan:G_,czm_fog:H_,czm_gammaCorrect:j_,czm_geodeticSurfaceNormal:W_,czm_getDefaultMaterial:q_,czm_getLambertDiffuse:Y_,czm_getSpecular:Z_,czm_getWaterNoise:X_,czm_HSBToRGB:$_,czm_HSLToRGB:K_,czm_hue:Q_,czm_inverseGamma:J_,czm_isEmpty:ev,czm_isFull:tv,czm_latitudeToWebMercatorFraction:nv,czm_linearToSrgb:iv,czm_lineDistance:ov,czm_luminance:rv,czm_metersPerPixel:sv,czm_modelToWindowCoordinates:av,czm_multiplyWithColorBalance:cv,czm_nearFarScalar:uv,czm_octDecode:lv,czm_packDepth:fv,czm_pbrLighting:dv,czm_pbrMetallicRoughnessMaterial:hv,czm_pbrSpecularGlossinessMaterial:pv,czm_phong:mv,czm_planeDistance:gv,czm_pointAlongRay:yv,czm_rayEllipsoidIntersectionInterval:_v,czm_raySphereIntersectionInterval:vv,czm_readDepth:Cv,czm_readNonPerspective:bv,czm_reverseLogDepth:Tv,czm_RGBToHSB:Ev,czm_RGBToHSL:wv,czm_RGBToXYZ:Sv,czm_rollerShutter:xv,czm_round:Av,czm_sampleOctahedralProjection:Rv,czm_saturation:Pv,czm_shadowDepthCompare:Ov,czm_shadowVisibility:Iv,czm_signNotZero:Dv,czm_sphericalHarmonics:Mv,czm_srgbToLinear:zv,czm_tangentToEyeSpaceMatrix:Nv,czm_textureCube:Lv,czm_transformPlane:Bv,czm_transformPlaneOld:Fv,czm_translateRelativeToEye:Vv,czm_translucentPhong:Uv,czm_transpose:kv,czm_unpackDepth:Gv,czm_unpackFloat:Hv,czm_unpackUint:jv,czm_valueTransform:Wv,czm_vertexLogDepth:qv,czm_windowToEyeCoordinates:Yv,czm_writeDepthClamp:Zv,czm_writeLogDepth:Xv,czm_writeNonPerspective:$v,czm_XYZToRGB:Kv};function PR(e,t,n){let i=e;return i=i.replaceAll("version 300 es",""),i=i.replaceAll(/(texture\()/g,"texture2D("),t?(n||(i=i.replaceAll(/(in)\s+(vec\d|mat\d|float)/g,"varying $2")),/out_FragData_(\d+)/.test(i)&&(i=`#extension GL_EXT_draw_buffers : enable
${i}`,i=i.replaceAll(/layout\s+\(location\s*=\s*\d+\)\s*out\s+vec4\s+out_FragData_\d+;/g,""),i=i.replaceAll(/out_FragData_(\d+)/g,"gl_FragData[$1]")),i=i.replaceAll(/layout\s+\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g,""),i=i.replaceAll(/out_FragColor/g,"gl_FragColor"),i=i.replaceAll(/out_FragColor\[(\d+)\]/g,"gl_FragColor[$1]"),/gl_FragDepth/.test(i)&&(i=`#extension GL_EXT_frag_depth : enable
${i}`,i=i.replaceAll(/gl_FragDepth/g,"gl_FragDepthEXT"))):(i=i.replaceAll(/(in)\s+(vec\d|mat\d|float)/g,"attribute $2"),i=i.replaceAll(/(out)\s+(vec\d|mat\d|float)\s+([\w]+);/g,"varying $2 $3;")),n||(i=`#version 100
${i}`),i}var Qv=PR;function Jv(e){return e=e.replace(/\/\/.*/g,""),e.replace(/\/\*\*[\s\S]*?\*\//gm,function(t){let n=t.match(/\n/gm).length,i="";for(let o=0;o<n;++o)i+=`
`;return i})}function eC(e,t,n){let i;for(let o=0;o<n.length;++o)n[o].name===e&&(i=n[o]);return p(i)||(t=Jv(t),i={name:e,glslSource:t,dependsOn:[],requiredBy:[],evaluated:!1},n.push(i)),i}function tC(e,t){if(e.evaluated)return;e.evaluated=!0;let n=e.glslSource.match(/\bczm_[a-zA-Z0-9_]*/g);p(n)&&n!==null&&(n=n.filter(function(i,o){return n.indexOf(i)===o}),n.forEach(function(i){if(i!==e.name&&en._czmBuiltinsAndUniforms.hasOwnProperty(i)){let o=eC(i,en._czmBuiltinsAndUniforms[i],t);e.dependsOn.push(o),o.requiredBy.push(e),tC(o,t)}}))}function OR(e){let t=[],n=[];for(;e.length>0;){let o=e.pop();n.push(o),o.requiredBy.length===0&&t.push(o)}for(;t.length>0;){let o=t.shift();e.push(o);for(let r=0;r<o.dependsOn.length;++r){let s=o.dependsOn[r],a=s.requiredBy.indexOf(o);s.requiredBy.splice(a,1),s.requiredBy.length===0&&t.push(s)}}let i=[];for(let o=0;o<n.length;++o)n[o].requiredBy.length!==0&&i.push(n[o])}function IR(e){let t=[],n=eC("main",e,t);tC(n,t),OR(t);let i="";for(let o=t.length-1;o>=0;--o)i=`${i+t[o].glslSource}
`;return i.replace(n.glslSource,"")}function nC(e,t,n,i){let o,r,s="",a=e.sources;if(p(a))for(o=0,r=a.length;o<r;++o)s+=`
#line 0
${a[o]}`;s=Jv(s);let c;s=s.replace(/#version\s+(.*?)\n/gm,function(R,D){return c=D,`
`});let l=[];s=s.replace(/#extension.*\n/gm,function(R){return l.push(R),`
`}),s=s.replace(/precision\s(lowp|mediump|highp)\s(float|int);/,"");let d=e.pickColorQualifier;p(d)&&(s=en.createPickFragmentShaderSource(s,d));let h="",g=l.length;for(o=0;o<g;o++)h+=l[o];t&&(h+=`#ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    precision highp int;
#else
    precision mediump float;
    precision mediump int;
    #define highp mediump
#endif

`);let C=e.defines;if(p(C))for(o=0,r=C.length;o<r;++o){let R=C[o];R.length!==0&&(h+=`#define ${R}
`)}n.textureFloatLinear&&(h+=`#define OES_texture_float_linear

`),n.floatingPointTexture&&(h+=`#define OES_texture_float

`);let b="";e.includeBuiltIns&&(b=IR(s)),h+=`
#line 0
`;let w=b+s;return n.webgl2&&t&&!/layout\s*\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g.test(w)&&!/czm_out_FragColor/g.test(w)&&/out_FragColor/g.test(w)&&(h+=`layout(location = 0) out vec4 out_FragColor;

`),n.webgl2||(b=b.replaceAll(/(in)\s+(vec\d|mat\d|float)/g,"varying $2")),h+=b,h+=s,n.webgl2?h=`#version 300 es
${h}`:h=Qv(h,t,i),h}function en(e){e=E(e,E.EMPTY_OBJECT);let t=e.pickColorQualifier;this.defines=p(e.defines)?e.defines.slice(0):[],this.sources=p(e.sources)?e.sources.slice(0):[],this.pickColorQualifier=t,this.includeBuiltIns=E(e.includeBuiltIns,!0)}en.prototype.clone=function(){return new en({sources:this.sources,defines:this.defines,pickColorQualifier:this.pickColorQualifier,includeBuiltIns:this.includeBuiltIns})};en.replaceMain=function(e,t){return t=`void ${t}()`,e.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,t)};en.prototype.getCacheKey=function(){let t=this.defines.slice().sort().join(","),n=this.pickColorQualifier,i=this.includeBuiltIns,o=this.sources.join(`
`);return`${t}:${n}:${i}:${o}`};en.prototype.createCombinedVertexShader=function(e){return nC(this,!1,e)};en.prototype.createCombinedFragmentShader=function(e,t){return nC(this,!0,e,t)};en._czmBuiltinsAndUniforms={};for(let e in _u)_u.hasOwnProperty(e)&&(en._czmBuiltinsAndUniforms[e]=_u[e]);for(let e in Es)if(Es.hasOwnProperty(e)){let t=Es[e];typeof t.getDeclaration=="function"&&(en._czmBuiltinsAndUniforms[e]=t.getDeclaration(e))}en.createPickVertexShaderSource=function(e){return`${en.replaceMain(e,"czm_old_main")}
in vec4 pickColor; 
out vec4 czm_pickColor; 
void main() 
{ 
    czm_old_main(); 
    czm_pickColor = pickColor; 
}`};en.createPickFragmentShaderSource=function(e,t){let n=en.replaceMain(e,"czm_old_main"),i=`${t} vec4 czm_pickColor; 
void main() 
{ 
    czm_old_main(); 
    if (out_FragColor.a == 0.0) { 
       discard; 
    } 
    out_FragColor = czm_pickColor; 
}`;return`${n}
${i}`};function DR(e,t){let n=e.defines,i=n.length;for(let o=0;o<i;++o)if(n[o]===t)return!0;return!1}function iC(e,t){let n=e.sources,i=n.length;for(let o=0;o<i;++o)if(n[o].indexOf(t)!==-1)return!0;return!1}function oC(e,t){let n=t.length;for(let i=0;i<n;++i){let o=t[i];if(iC(e,o))return o}}var MR=["v_normalEC","v_normal"];en.findNormalVarying=function(e){return iC(e,"#ifdef HAS_NORMALS")?DR(e,"HAS_NORMALS")?"v_normalEC":void 0:oC(e,MR)};var zR=["v_positionEC"];en.findPositionVarying=function(e){return oC(e,zR)};var vr=en;var tn={UNSIGNED_BYTE:L.UNSIGNED_BYTE,UNSIGNED_SHORT:L.UNSIGNED_SHORT,UNSIGNED_INT:L.UNSIGNED_INT};tn.getSizeInBytes=function(e){switch(e){case tn.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case tn.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case tn.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT}};tn.fromSizeInBytes=function(e){switch(e){case 2:return tn.UNSIGNED_SHORT;case 4:return tn.UNSIGNED_INT;case 1:return tn.UNSIGNED_BYTE}};tn.validate=function(e){return p(e)&&(e===tn.UNSIGNED_BYTE||e===tn.UNSIGNED_SHORT||e===tn.UNSIGNED_INT)};tn.createTypedArray=function(e,t){return e>=k.SIXTY_FOUR_KILOBYTES?new Uint32Array(t):new Uint16Array(t)};tn.createTypedArrayFromArrayBuffer=function(e,t,n,i){return e>=k.SIXTY_FOUR_KILOBYTES?new Uint32Array(t,n,i):new Uint16Array(t,n,i)};tn.fromTypedArray=function(e){if(e instanceof Uint8Array)return tn.UNSIGNED_BYTE;if(e instanceof Uint16Array)return tn.UNSIGNED_SHORT;if(e instanceof Uint32Array)return tn.UNSIGNED_INT};var jt=Object.freeze(tn);function NR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}var vu=NR;function ri(e){e=E(e,E.EMPTY_OBJECT);let t=e.context._gl,n=e.bufferTarget,i=e.typedArray,o=e.sizeInBytes,r=e.usage,s=p(i);s&&(o=i.byteLength);let a=t.createBuffer();t.bindBuffer(n,a),t.bufferData(n,s?i:o,r),t.bindBuffer(n,null),this._id=vu(),this._gl=t,this._webgl2=e.context._webgl2,this._bufferTarget=n,this._sizeInBytes=o,this._usage=r,this._buffer=a,this.vertexArrayDestroyable=!0}ri.createVertexBuffer=function(e){return new ri({context:e.context,bufferTarget:L.ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage})};ri.createIndexBuffer=function(e){let t=e.context,n=e.indexDatatype,i=jt.getSizeInBytes(n),o=new ri({context:t,bufferTarget:L.ELEMENT_ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage}),r=o.sizeInBytes/i;return Object.defineProperties(o,{indexDatatype:{get:function(){return n}},bytesPerIndex:{get:function(){return i}},numberOfIndices:{get:function(){return r}}}),o};Object.defineProperties(ri.prototype,{sizeInBytes:{get:function(){return this._sizeInBytes}},usage:{get:function(){return this._usage}}});ri.prototype._getBuffer=function(){return this._buffer};ri.prototype.copyFromArrayView=function(e,t){t=E(t,0);let n=this._gl,i=this._bufferTarget;n.bindBuffer(i,this._buffer),n.bufferSubData(i,t,e),n.bindBuffer(i,null)};ri.prototype.copyFromBuffer=function(e,t,n,i){let o=L.COPY_READ_BUFFER,r=L.COPY_WRITE_BUFFER,s=this._gl;s.bindBuffer(r,this._buffer),s.bindBuffer(o,e._buffer),s.copyBufferSubData(o,r,t,n,i),s.bindBuffer(r,null),s.bindBuffer(o,null)};ri.prototype.getBufferData=function(e,t,n,i){t=E(t,0),n=E(n,0);let o=this._gl,r=L.COPY_READ_BUFFER;o.bindBuffer(r,this._buffer),o.getBufferSubData(r,t,e,n,i),o.bindBuffer(r,null)};ri.prototype.isDestroyed=function(){return!1};ri.prototype.destroy=function(){return this._gl.deleteBuffer(this._buffer),kn(this)};var wa=ri;function LR(e,t,n,i){let o=p(t.vertexBuffer),r=p(t.value),s=t.value?t.value.length:t.componentsPerAttribute,a={index:E(t.index,n),enabled:E(t.enabled,!0),vertexBuffer:t.vertexBuffer,value:r?t.value.slice(0):void 0,componentsPerAttribute:s,componentDatatype:E(t.componentDatatype,Pe.FLOAT),normalize:E(t.normalize,!1),offsetInBytes:E(t.offsetInBytes,0),strideInBytes:E(t.strideInBytes,0),instanceDivisor:E(t.instanceDivisor,0)};if(o)a.vertexAttrib=function(c){let l=this.index;c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer._getBuffer()),c.vertexAttribPointer(l,this.componentsPerAttribute,this.componentDatatype,this.normalize,this.strideInBytes,this.offsetInBytes),c.enableVertexAttribArray(l),this.instanceDivisor>0&&(i.glVertexAttribDivisor(l,this.instanceDivisor),i._vertexAttribDivisors[l]=this.instanceDivisor,i._previousDrawInstanced=!0)},a.disableVertexAttribArray=function(c){c.disableVertexAttribArray(this.index),this.instanceDivisor>0&&i.glVertexAttribDivisor(n,0)};else{switch(a.componentsPerAttribute){case 1:a.vertexAttrib=function(c){c.vertexAttrib1fv(this.index,this.value)};break;case 2:a.vertexAttrib=function(c){c.vertexAttrib2fv(this.index,this.value)};break;case 3:a.vertexAttrib=function(c){c.vertexAttrib3fv(this.index,this.value)};break;case 4:a.vertexAttrib=function(c){c.vertexAttrib4fv(this.index,this.value)};break}a.disableVertexAttribArray=function(c){}}e.push(a)}function sC(e,t,n){for(let i=0;i<t.length;++i){let o=t[i];o.enabled&&o.vertexAttrib(e)}p(n)&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n._getBuffer())}function ho(e){e=E(e,E.EMPTY_OBJECT);let t=e.context,n=t._gl,i=e.attributes,o=e.indexBuffer,r,s=[],a=1,c=!1,l=!1,d=i.length;for(r=0;r<d;++r)LR(s,i[r],r,t);for(d=s.length,r=0;r<d;++r){let g=s[r];if(p(g.vertexBuffer)&&g.instanceDivisor===0){let C=g.strideInBytes||g.componentsPerAttribute*Pe.getSizeInBytes(g.componentDatatype);a=g.vertexBuffer.sizeInBytes/C;break}}for(r=0;r<d;++r)s[r].instanceDivisor>0&&(c=!0),p(s[r].value)&&(l=!0);let h;t.vertexArrayObject&&(h=t.glCreateVertexArray(),t.glBindVertexArray(h),sC(n,s,o),t.glBindVertexArray(null)),this._numberOfVertices=a,this._hasInstancedAttributes=c,this._hasConstantAttributes=l,this._context=t,this._gl=n,this._vao=h,this._attributes=s,this._indexBuffer=o}function rC(e){return e.values.length/e.componentsPerAttribute}function BR(e){return Pe.getSizeInBytes(e.componentDatatype)*e.componentsPerAttribute}function FR(e){let t,n,i,o=[];for(n in e)e.hasOwnProperty(n)&&p(e[n])&&p(e[n].values)&&(o.push(n),e[n].componentDatatype===Pe.DOUBLE&&(e[n].componentDatatype=Pe.FLOAT,e[n].values=Pe.createTypedArray(Pe.FLOAT,e[n].values)));let r,s=o.length;if(s>0)for(r=rC(e[o[0]]),t=1;t<s;++t){let l=rC(e[o[t]]);if(l!==r)throw new Pt(`Each attribute list must have the same number of vertices.  Attribute ${o[t]} has a different number of vertices (${l.toString()}) than attribute ${o[0]} (${r.toString()}).`)}o.sort(function(l,d){return Pe.getSizeInBytes(e[d].componentDatatype)-Pe.getSizeInBytes(e[l].componentDatatype)});let a=0,c={};for(t=0;t<s;++t)n=o[t],i=e[n],c[n]=a,a+=BR(i);if(a>0){let l=Pe.getSizeInBytes(e[o[0]].componentDatatype),d=a%l;d!==0&&(a+=l-d);let h=r*a,g=new ArrayBuffer(h),C={};for(t=0;t<s;++t){n=o[t];let b=Pe.getSizeInBytes(e[n].componentDatatype);C[n]={pointer:Pe.createTypedArray(e[n].componentDatatype,g),index:c[n]/b,strideInComponentType:a/b}}for(t=0;t<r;++t)for(let b=0;b<s;++b){n=o[b],i=e[n];let w=i.values,R=C[n],D=R.pointer,M=i.componentsPerAttribute;for(let z=0;z<M;++z)D[R.index+z]=w[t*M+z];R.index+=R.strideInComponentType}return{buffer:g,offsetsInBytes:c,vertexSizeInBytes:a}}}ho.fromGeometry=function(e){e=E(e,E.EMPTY_OBJECT);let t=e.context,n=E(e.geometry,E.EMPTY_OBJECT),i=E(e.bufferUsage,mu.DYNAMIC_DRAW),o=E(e.attributeLocations,E.EMPTY_OBJECT),r=E(e.interleave,!1),s=e.vertexArrayAttributes,a,c,l,d=p(s)?s:[],h=n.attributes;if(r){let b=FR(h);if(p(b)){l=wa.createVertexBuffer({context:t,typedArray:b.buffer,usage:i});let w=b.offsetsInBytes,R=b.vertexSizeInBytes;for(a in h)h.hasOwnProperty(a)&&p(h[a])&&(c=h[a],p(c.values)?d.push({index:o[a],vertexBuffer:l,componentDatatype:c.componentDatatype,componentsPerAttribute:c.componentsPerAttribute,normalize:c.normalize,offsetInBytes:w[a],strideInBytes:R}):d.push({index:o[a],value:c.value,componentDatatype:c.componentDatatype,normalize:c.normalize}))}}else for(a in h)if(h.hasOwnProperty(a)&&p(h[a])){c=h[a];let b=c.componentDatatype;b===Pe.DOUBLE&&(b=Pe.FLOAT),l=void 0,p(c.values)&&(l=wa.createVertexBuffer({context:t,typedArray:Pe.createTypedArray(b,c.values),usage:i})),d.push({index:o[a],vertexBuffer:l,value:c.value,componentDatatype:b,componentsPerAttribute:c.componentsPerAttribute,normalize:c.normalize})}let g,C=n.indices;return p(C)&&(Rt.computeNumberOfVertices(n)>=k.SIXTY_FOUR_KILOBYTES&&t.elementIndexUint?g=wa.createIndexBuffer({context:t,typedArray:new Uint32Array(C),usage:i,indexDatatype:jt.UNSIGNED_INT}):g=wa.createIndexBuffer({context:t,typedArray:new Uint16Array(C),usage:i,indexDatatype:jt.UNSIGNED_SHORT})),new ho({context:t,attributes:d,indexBuffer:g})};Object.defineProperties(ho.prototype,{numberOfAttributes:{get:function(){return this._attributes.length}},numberOfVertices:{get:function(){return this._numberOfVertices}},indexBuffer:{get:function(){return this._indexBuffer}}});ho.prototype.getAttribute=function(e){return this._attributes[e]};function VR(e){let t=e._context,n=e._hasInstancedAttributes;if(!n&&!t._previousDrawInstanced)return;t._previousDrawInstanced=n;let i=t._vertexAttribDivisors,o=e._attributes,r=gt.maximumVertexAttributes,s;if(n){let a=o.length;for(s=0;s<a;++s){let c=o[s];if(c.enabled){let l=c.instanceDivisor,d=c.index;l!==i[d]&&(t.glVertexAttribDivisor(d,l),i[d]=l)}}}else for(s=0;s<r;++s)i[s]>0&&(t.glVertexAttribDivisor(s,0),i[s]=0)}function UR(e,t){let n=e._attributes,i=n.length;for(let o=0;o<i;++o){let r=n[o];r.enabled&&p(r.value)&&r.vertexAttrib(t)}}ho.prototype._bind=function(){p(this._vao)?(this._context.glBindVertexArray(this._vao),this._context.instancedArrays&&VR(this),this._hasConstantAttributes&&UR(this,this._gl)):sC(this._gl,this._attributes,this._indexBuffer)};ho.prototype._unBind=function(){if(p(this._vao))this._context.glBindVertexArray(null);else{let e=this._attributes,t=this._gl;for(let n=0;n<e.length;++n){let i=e[n];i.enabled&&i.disableVertexAttribArray(t)}this._indexBuffer&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}};ho.prototype.isDestroyed=function(){return!1};ho.prototype.destroy=function(){let e=this._attributes;for(let n=0;n<e.length;++n){let i=e[n].vertexBuffer;p(i)&&!i.isDestroyed()&&i.vertexArrayDestroyable&&i.destroy()}let t=this._indexBuffer;return p(t)&&!t.isDestroyed()&&t.vertexArrayDestroyable&&t.destroy(),p(this._vao)&&this._context.glDeleteVertexArray(this._vao),kn(this)};var aC=ho;var et={UNSIGNED_BYTE:L.UNSIGNED_BYTE,UNSIGNED_SHORT:L.UNSIGNED_SHORT,UNSIGNED_INT:L.UNSIGNED_INT,FLOAT:L.FLOAT,HALF_FLOAT:L.HALF_FLOAT_OES,UNSIGNED_INT_24_8:L.UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:L.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:L.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:L.UNSIGNED_SHORT_5_6_5};et.toWebGLConstant=function(e,t){switch(e){case et.UNSIGNED_BYTE:return L.UNSIGNED_BYTE;case et.UNSIGNED_SHORT:return L.UNSIGNED_SHORT;case et.UNSIGNED_INT:return L.UNSIGNED_INT;case et.FLOAT:return L.FLOAT;case et.HALF_FLOAT:return t.webgl2?L.HALF_FLOAT:L.HALF_FLOAT_OES;case et.UNSIGNED_INT_24_8:return L.UNSIGNED_INT_24_8;case et.UNSIGNED_SHORT_4_4_4_4:return L.UNSIGNED_SHORT_4_4_4_4;case et.UNSIGNED_SHORT_5_5_5_1:return L.UNSIGNED_SHORT_5_5_5_1;case et.UNSIGNED_SHORT_5_6_5:return et.UNSIGNED_SHORT_5_6_5}};et.isPacked=function(e){return e===et.UNSIGNED_INT_24_8||e===et.UNSIGNED_SHORT_4_4_4_4||e===et.UNSIGNED_SHORT_5_5_5_1||e===et.UNSIGNED_SHORT_5_6_5};et.sizeInBytes=function(e){switch(e){case et.UNSIGNED_BYTE:return 1;case et.UNSIGNED_SHORT:case et.UNSIGNED_SHORT_4_4_4_4:case et.UNSIGNED_SHORT_5_5_5_1:case et.UNSIGNED_SHORT_5_6_5:case et.HALF_FLOAT:return 2;case et.UNSIGNED_INT:case et.FLOAT:case et.UNSIGNED_INT_24_8:return 4}};et.validate=function(e){return e===et.UNSIGNED_BYTE||e===et.UNSIGNED_SHORT||e===et.UNSIGNED_INT||e===et.FLOAT||e===et.HALF_FLOAT||e===et.UNSIGNED_INT_24_8||e===et.UNSIGNED_SHORT_4_4_4_4||e===et.UNSIGNED_SHORT_5_5_5_1||e===et.UNSIGNED_SHORT_5_6_5};var ft=Object.freeze(et);var de={DEPTH_COMPONENT:L.DEPTH_COMPONENT,DEPTH_STENCIL:L.DEPTH_STENCIL,ALPHA:L.ALPHA,RED:L.RED,RG:L.RG,RGB:L.RGB,RGBA:L.RGBA,LUMINANCE:L.LUMINANCE,LUMINANCE_ALPHA:L.LUMINANCE_ALPHA,RGB_DXT1:L.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:L.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:L.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:L.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:L.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:L.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:L.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:L.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGBA_ASTC:L.COMPRESSED_RGBA_ASTC_4x4_WEBGL,RGB_ETC1:L.COMPRESSED_RGB_ETC1_WEBGL,RGB8_ETC2:L.COMPRESSED_RGB8_ETC2,RGBA8_ETC2_EAC:L.COMPRESSED_RGBA8_ETC2_EAC,RGBA_BC7:L.COMPRESSED_RGBA_BPTC_UNORM};de.componentsLength=function(e){switch(e){case de.RGB:return 3;case de.RGBA:return 4;case de.LUMINANCE_ALPHA:case de.RG:return 2;case de.ALPHA:case de.RED:case de.LUMINANCE:return 1;default:return 1}};de.validate=function(e){return e===de.DEPTH_COMPONENT||e===de.DEPTH_STENCIL||e===de.ALPHA||e===de.RED||e===de.RG||e===de.RGB||e===de.RGBA||e===de.LUMINANCE||e===de.LUMINANCE_ALPHA||e===de.RGB_DXT1||e===de.RGBA_DXT1||e===de.RGBA_DXT3||e===de.RGBA_DXT5||e===de.RGB_PVRTC_4BPPV1||e===de.RGB_PVRTC_2BPPV1||e===de.RGBA_PVRTC_4BPPV1||e===de.RGBA_PVRTC_2BPPV1||e===de.RGBA_ASTC||e===de.RGB_ETC1||e===de.RGB8_ETC2||e===de.RGBA8_ETC2_EAC||e===de.RGBA_BC7};de.isColorFormat=function(e){return e===de.ALPHA||e===de.RGB||e===de.RGBA||e===de.LUMINANCE||e===de.LUMINANCE_ALPHA};de.isDepthFormat=function(e){return e===de.DEPTH_COMPONENT||e===de.DEPTH_STENCIL};de.isCompressedFormat=function(e){return e===de.RGB_DXT1||e===de.RGBA_DXT1||e===de.RGBA_DXT3||e===de.RGBA_DXT5||e===de.RGB_PVRTC_4BPPV1||e===de.RGB_PVRTC_2BPPV1||e===de.RGBA_PVRTC_4BPPV1||e===de.RGBA_PVRTC_2BPPV1||e===de.RGBA_ASTC||e===de.RGB_ETC1||e===de.RGB8_ETC2||e===de.RGBA8_ETC2_EAC||e===de.RGBA_BC7};de.isDXTFormat=function(e){return e===de.RGB_DXT1||e===de.RGBA_DXT1||e===de.RGBA_DXT3||e===de.RGBA_DXT5};de.isPVRTCFormat=function(e){return e===de.RGB_PVRTC_4BPPV1||e===de.RGB_PVRTC_2BPPV1||e===de.RGBA_PVRTC_4BPPV1||e===de.RGBA_PVRTC_2BPPV1};de.isASTCFormat=function(e){return e===de.RGBA_ASTC};de.isETC1Format=function(e){return e===de.RGB_ETC1};de.isETC2Format=function(e){return e===de.RGB8_ETC2||e===de.RGBA8_ETC2_EAC};de.isBC7Format=function(e){return e===de.RGBA_BC7};de.compressedTextureSizeInBytes=function(e,t,n){switch(e){case de.RGB_DXT1:case de.RGBA_DXT1:case de.RGB_ETC1:case de.RGB8_ETC2:return Math.floor((t+3)/4)*Math.floor((n+3)/4)*8;case de.RGBA_DXT3:case de.RGBA_DXT5:case de.RGBA_ASTC:case de.RGBA8_ETC2_EAC:return Math.floor((t+3)/4)*Math.floor((n+3)/4)*16;case de.RGB_PVRTC_4BPPV1:case de.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(t,8)*Math.max(n,8)*4+7)/8);case de.RGB_PVRTC_2BPPV1:case de.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(t,16)*Math.max(n,8)*2+7)/8);case de.RGBA_BC7:return Math.ceil(t/4)*Math.ceil(n/4)*16;default:return 0}};de.textureSizeInBytes=function(e,t,n,i){let o=de.componentsLength(e);return ft.isPacked(t)&&(o=1),o*ft.sizeInBytes(t)*n*i};de.alignmentInBytes=function(e,t,n){let i=de.textureSizeInBytes(e,t,n,1)%4;return i===0?4:i===2?2:1};de.createTypedArray=function(e,t,n,i){let o,r=ft.sizeInBytes(t);r===Uint8Array.BYTES_PER_ELEMENT?o=Uint8Array:r===Uint16Array.BYTES_PER_ELEMENT?o=Uint16Array:r===Float32Array.BYTES_PER_ELEMENT&&t===ft.FLOAT?o=Float32Array:o=Uint32Array;let s=de.componentsLength(e)*n*i;return new o(s)};de.flipY=function(e,t,n,i,o){if(o===1)return e;let r=de.createTypedArray(t,n,i,o),s=de.componentsLength(t),a=i*s;for(let c=0;c<o;++c){let l=c*i*s,d=(o-c-1)*i*s;for(let h=0;h<a;++h)r[d+h]=e[l+h]}return r};de.toInternalFormat=function(e,t,n){if(!n.webgl2)return e;if(e===de.DEPTH_STENCIL)return L.DEPTH24_STENCIL8;if(e===de.DEPTH_COMPONENT){if(t===ft.UNSIGNED_SHORT)return L.DEPTH_COMPONENT16;if(t===ft.UNSIGNED_INT)return L.DEPTH_COMPONENT24}if(t===ft.FLOAT)switch(e){case de.RGBA:return L.RGBA32F;case de.RGB:return L.RGB32F;case de.RG:return L.RG32F;case de.RED:return L.R32F}if(t===ft.HALF_FLOAT)switch(e){case de.RGBA:return L.RGBA16F;case de.RGB:return L.RGB16F;case de.RG:return L.RG16F;case de.RED:return L.R16F}return e};var cn=Object.freeze(de);var Cu={NEAREST:L.NEAREST,LINEAR:L.LINEAR};Cu.validate=function(e){return e===Cu.NEAREST||e===Cu.LINEAR};var ws=Object.freeze(Cu);var Go={NEAREST:L.NEAREST,LINEAR:L.LINEAR,NEAREST_MIPMAP_NEAREST:L.NEAREST_MIPMAP_NEAREST,LINEAR_MIPMAP_NEAREST:L.LINEAR_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:L.NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_LINEAR:L.LINEAR_MIPMAP_LINEAR};Go.validate=function(e){return e===Go.NEAREST||e===Go.LINEAR||e===Go.NEAREST_MIPMAP_NEAREST||e===Go.LINEAR_MIPMAP_NEAREST||e===Go.NEAREST_MIPMAP_LINEAR||e===Go.LINEAR_MIPMAP_LINEAR};var bi=Object.freeze(Go);var bu={CLAMP_TO_EDGE:L.CLAMP_TO_EDGE,REPEAT:L.REPEAT,MIRRORED_REPEAT:L.MIRRORED_REPEAT,validate:function(e){return e===bu.CLAMP_TO_EDGE||e===bu.REPEAT||e===bu.MIRRORED_REPEAT}},Sa=Object.freeze(bu);function xa(e){e=E(e,E.EMPTY_OBJECT);let t=E(e.wrapS,Sa.CLAMP_TO_EDGE),n=E(e.wrapT,Sa.CLAMP_TO_EDGE),i=E(e.minificationFilter,bi.LINEAR),o=E(e.magnificationFilter,ws.LINEAR),r=p(e.maximumAnisotropy)?e.maximumAnisotropy:1;this._wrapS=t,this._wrapT=n,this._minificationFilter=i,this._magnificationFilter=o,this._maximumAnisotropy=r}Object.defineProperties(xa.prototype,{wrapS:{get:function(){return this._wrapS}},wrapT:{get:function(){return this._wrapT}},minificationFilter:{get:function(){return this._minificationFilter}},magnificationFilter:{get:function(){return this._magnificationFilter}},maximumAnisotropy:{get:function(){return this._maximumAnisotropy}}});xa.equals=function(e,t){return e===t||p(e)&&p(t)&&e._wrapS===t._wrapS&&e._wrapT===t._wrapT&&e._minificationFilter===t._minificationFilter&&e._magnificationFilter===t._magnificationFilter&&e._maximumAnisotropy===t._maximumAnisotropy};xa.NEAREST=Object.freeze(new xa({wrapS:Sa.CLAMP_TO_EDGE,wrapT:Sa.CLAMP_TO_EDGE,minificationFilter:bi.NEAREST,magnificationFilter:ws.NEAREST}));var Tu=xa;var Eu={DONT_CARE:L.DONT_CARE,FASTEST:L.FASTEST,NICEST:L.NICEST,validate:function(e){return e===Eu.DONT_CARE||e===Eu.FASTEST||e===Eu.NICEST}},cC=Object.freeze(Eu);function Ti(e){e=E(e,E.EMPTY_OBJECT);let t=e.context,n=e.width,i=e.height,o=e.source;p(o)&&(p(n)||(n=E(o.videoWidth,o.width)),p(i)||(i=E(o.videoHeight,o.height)));let r=E(e.pixelFormat,cn.RGBA),s=E(e.pixelDatatype,ft.UNSIGNED_BYTE),a=cn.toInternalFormat(r,s,t),c=cn.isCompressedFormat(a),l=e.preMultiplyAlpha||r===cn.RGB||r===cn.LUMINANCE,d=E(e.flipY,!0),h=E(e.skipColorSpaceConversion,!1),g=!0,C=t._gl,b=C.TEXTURE_2D,w=C.createTexture();C.activeTexture(C.TEXTURE0),C.bindTexture(b,w);let R=4;if(p(o)&&p(o.arrayBufferView)&&!c&&(R=cn.alignmentInBytes(r,s,n)),C.pixelStorei(C.UNPACK_ALIGNMENT,R),h?C.pixelStorei(C.UNPACK_COLORSPACE_CONVERSION_WEBGL,C.NONE):C.pixelStorei(C.UNPACK_COLORSPACE_CONVERSION_WEBGL,C.BROWSER_DEFAULT_WEBGL),p(o))if(p(o.arrayBufferView)){C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1);let M=o.arrayBufferView,z,U,Y;if(c){if(C.compressedTexImage2D(b,0,a,n,i,0,M),p(o.mipLevels))for(U=n,Y=i,z=0;z<o.mipLevels.length;++z)U=Math.floor(U/2)|0,U<1&&(U=1),Y=Math.floor(Y/2)|0,Y<1&&(Y=1),C.compressedTexImage2D(b,z+1,a,U,Y,0,o.mipLevels[z])}else if(d&&(M=cn.flipY(M,r,s,n,i)),C.texImage2D(b,0,a,n,i,0,r,ft.toWebGLConstant(s,t),M),p(o.mipLevels))for(U=n,Y=i,z=0;z<o.mipLevels.length;++z)U=Math.floor(U/2)|0,U<1&&(U=1),Y=Math.floor(Y/2)|0,Y<1&&(Y=1),C.texImage2D(b,z+1,a,U,Y,0,r,ft.toWebGLConstant(s,t),o.mipLevels[z])}else p(o.framebuffer)?(C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1),o.framebuffer!==t.defaultFramebuffer&&o.framebuffer._bind(),C.copyTexImage2D(b,0,a,o.xOffset,o.yOffset,n,i,0),o.framebuffer!==t.defaultFramebuffer&&o.framebuffer._unBind()):(C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,d),C.texImage2D(b,0,a,r,ft.toWebGLConstant(s,t),o));else C.texImage2D(b,0,a,n,i,0,r,ft.toWebGLConstant(s,t),null),g=!1;C.bindTexture(b,null);let D;c?D=cn.compressedTextureSizeInBytes(r,n,i):D=cn.textureSizeInBytes(r,s,n,i),this._id=vu(),this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=b,this._texture=w,this._internalFormat=a,this._pixelFormat=r,this._pixelDatatype=s,this._width=n,this._height=i,this._dimensions=new we(n,i),this._hasMipmap=!1,this._sizeInBytes=D,this._preMultiplyAlpha=l,this._flipY=d,this._initialized=g,this._sampler=void 0,this.sampler=p(e.sampler)?e.sampler:new Tu}Ti.create=function(e){return new Ti(e)};Ti.fromFramebuffer=function(e){e=E(e,E.EMPTY_OBJECT);let t=e.context,n=t._gl,i=E(e.pixelFormat,cn.RGB),o=E(e.framebufferXOffset,0),r=E(e.framebufferYOffset,0),s=E(e.width,n.drawingBufferWidth),a=E(e.height,n.drawingBufferHeight),c=e.framebuffer;return new Ti({context:t,width:s,height:a,pixelFormat:i,source:{framebuffer:p(c)?c:t.defaultFramebuffer,xOffset:o,yOffset:r,width:s,height:a}})};Object.defineProperties(Ti.prototype,{id:{get:function(){return this._id}},sampler:{get:function(){return this._sampler},set:function(e){let t=e.minificationFilter,n=e.magnificationFilter,i=this._context,o=this._pixelFormat,r=this._pixelDatatype,s=t===bi.NEAREST_MIPMAP_NEAREST||t===bi.NEAREST_MIPMAP_LINEAR||t===bi.LINEAR_MIPMAP_NEAREST||t===bi.LINEAR_MIPMAP_LINEAR;(r===ft.FLOAT&&!i.textureFloatLinear||r===ft.HALF_FLOAT&&!i.textureHalfFloatLinear)&&(t=s?bi.NEAREST_MIPMAP_NEAREST:bi.NEAREST,n=ws.NEAREST),i.webgl2&&cn.isDepthFormat(o)&&(t=bi.NEAREST,n=ws.NEAREST);let a=i._gl,c=this._textureTarget;a.activeTexture(a.TEXTURE0),a.bindTexture(c,this._texture),a.texParameteri(c,a.TEXTURE_MIN_FILTER,t),a.texParameteri(c,a.TEXTURE_MAG_FILTER,n),a.texParameteri(c,a.TEXTURE_WRAP_S,e.wrapS),a.texParameteri(c,a.TEXTURE_WRAP_T,e.wrapT),p(this._textureFilterAnisotropic)&&a.texParameteri(c,this._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.maximumAnisotropy),a.bindTexture(c,null),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},dimensions:{get:function(){return this._dimensions}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(this._sizeInBytes*4/3):this._sizeInBytes}},_target:{get:function(){return this._textureTarget}}});Ti.prototype.copyFrom=function(e){let t=E(e.xOffset,0),n=E(e.yOffset,0),i=e.source,o=this._context,r=o._gl,s=this._textureTarget;r.activeTexture(r.TEXTURE0),r.bindTexture(s,this._texture);let a=i.width,c=i.height,l=i.arrayBufferView,d=this._width,h=this._height,g=this._internalFormat,C=this._pixelFormat,b=this._pixelDatatype,w=this._preMultiplyAlpha,R=this._flipY,D=E(e.skipColorSpaceConversion,!1),M=4;p(l)&&(M=cn.alignmentInBytes(C,b,a)),r.pixelStorei(r.UNPACK_ALIGNMENT,M),D?r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE):r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.BROWSER_DEFAULT_WEBGL);let z=!1;if(!this._initialized){if(t===0&&n===0&&a===d&&c===h)p(l)?(r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),R&&(l=cn.flipY(l,C,b,d,h)),r.texImage2D(s,0,g,d,h,0,C,ft.toWebGLConstant(b,o),l)):(r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,R),r.texImage2D(s,0,g,C,ft.toWebGLConstant(b,o),i)),z=!0;else{r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);let U=cn.createTypedArray(C,b,d,h);r.texImage2D(s,0,g,d,h,0,C,ft.toWebGLConstant(b,o),U)}this._initialized=!0}z||(p(l)?(r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),R&&(l=cn.flipY(l,C,b,a,c)),r.texSubImage2D(s,0,t,n,a,c,C,ft.toWebGLConstant(b,o),l)):(r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,R),r.texSubImage2D(s,0,t,n,C,ft.toWebGLConstant(b,o),i))),r.bindTexture(s,null)};Ti.prototype.copyFromFramebuffer=function(e,t,n,i,o,r){e=E(e,0),t=E(t,0),n=E(n,0),i=E(i,0),o=E(o,this._width),r=E(r,this._height);let s=this._context._gl,a=this._textureTarget;s.activeTexture(s.TEXTURE0),s.bindTexture(a,this._texture),s.copyTexSubImage2D(a,0,e,t,n,i,o,r),s.bindTexture(a,null),this._initialized=!0};Ti.prototype.generateMipmap=function(e){e=E(e,cC.DONT_CARE),this._hasMipmap=!0;let t=this._context._gl,n=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(n,this._texture),t.generateMipmap(n),t.bindTexture(n,null)};Ti.prototype.isDestroyed=function(){return!1};Ti.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),kn(this)};var uC=Ti;function po(e,t,n){if(this._attributes=t,this._numberOfInstances=n,t.length===0)return;let i=kR(t),o=e.floatingPointTexture,r=i===ft.FLOAT&&!o,s=GR(t,r),a=HR(s,t,r),c=Math.floor(gt.maximumTextureSize/a),l=Math.min(n,c),d=a*l,h=Math.ceil(n/l),g=1/d,C=g*.5,b=1/h,w=b*.5;this._textureDimensions=new we(d,h),this._textureStep=new Ie(g,C,b,w),this._pixelDatatype=r?ft.UNSIGNED_BYTE:i,this._packFloats=r,this._offsets=s,this._stride=a,this._texture=void 0;let R=4*d*h;this._batchValues=i===ft.FLOAT&&!r?new Float32Array(R):new Uint8Array(R),this._batchValuesDirty=!1}Object.defineProperties(po.prototype,{attributes:{get:function(){return this._attributes}},numberOfInstances:{get:function(){return this._numberOfInstances}}});function kR(e){let t=!1,n=e.length;for(let i=0;i<n;++i)if(e[i].componentDatatype!==Pe.UNSIGNED_BYTE){t=!0;break}return t?ft.FLOAT:ft.UNSIGNED_BYTE}function fC(e,t){let n=e[t].componentsPerAttribute;return n===2?we:n===3?y:n===4?Ie:Number}function GR(e,t){let n=new Array(e.length),i=0,o=e.length;for(let r=0;r<o;++r){let a=e[r].componentDatatype;n[r]=i,a!==Pe.UNSIGNED_BYTE&&t?i+=4:++i}return n}function HR(e,t,n){let i=e.length,o=e[i-1];return t[i-1].componentDatatype!==Pe.UNSIGNED_BYTE&&n?o+4:o+1}var Aa=new Ie;function jR(e,t,n){let i=Ie.unpack(e,t,Aa),o=Ie.unpackFloat(i);i=Ie.unpack(e,t+4,Aa);let r=Ie.unpackFloat(i);i=Ie.unpack(e,t+8,Aa);let s=Ie.unpackFloat(i);i=Ie.unpack(e,t+12,Aa);let a=Ie.unpackFloat(i);return Ie.fromElements(o,r,s,a,n)}function WR(e,t,n){let i=Ie.packFloat(e.x,Aa);Ie.pack(i,t,n),i=Ie.packFloat(e.y,i),Ie.pack(i,t,n+4),i=Ie.packFloat(e.z,i),Ie.pack(i,t,n+8),i=Ie.packFloat(e.w,i),Ie.pack(i,t,n+12)}var lC=new Ie;po.prototype.getBatchedAttribute=function(e,t,n){let i=this._attributes,o=this._offsets[t],s=4*this._stride*e+4*o,a;this._packFloats&&i[t].componentDatatype!==ft.UNSIGNED_BYTE?a=jR(this._batchValues,s,lC):a=Ie.unpack(this._batchValues,s,lC);let c=fC(i,t);return p(c.fromCartesian4)?c.fromCartesian4(a,n):p(c.clone)?c.clone(a,n):a.x};var qR=[void 0,void 0,new we,new y,new Ie],YR=new Ie;po.prototype.setBatchedAttribute=function(e,t,n){let i=this._attributes,o=qR[i[t].componentsPerAttribute],r=this.getBatchedAttribute(e,t,o),s=fC(this._attributes,t);if(p(s.equals)?s.equals(r,n):r===n)return;let c=YR;c.x=p(n.x)?n.x:n,c.y=p(n.y)?n.y:0,c.z=p(n.z)?n.z:0,c.w=p(n.w)?n.w:0;let l=this._offsets[t],h=4*this._stride*e+4*l;this._packFloats&&i[t].componentDatatype!==ft.UNSIGNED_BYTE?WR(c,this._batchValues,h):Ie.pack(c,this._batchValues,h),this._batchValuesDirty=!0};function ZR(e,t){let n=e._textureDimensions;e._texture=new uC({context:t,pixelFormat:cn.RGBA,pixelDatatype:e._pixelDatatype,width:n.x,height:n.y,sampler:Tu.NEAREST,flipY:!1})}function XR(e){let t=e._textureDimensions;e._texture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}po.prototype.update=function(e){p(this._texture)&&!this._batchValuesDirty||this._attributes.length===0||(this._batchValuesDirty=!1,p(this._texture)||ZR(this,e.context),XR(this))};po.prototype.getUniformMapCallback=function(){let e=this;return function(t){return e._attributes.length===0?t:Un(t,{batchTexture:function(){return e._texture},batchTextureDimensions:function(){return e._textureDimensions},batchTextureStep:function(){return e._textureStep}})}};function $R(e){let t=e._stride;return e._textureDimensions.y===1?`uniform vec4 batchTextureStep; 
vec2 computeSt(float batchId) 
{ 
    float stepX = batchTextureStep.x; 
    float centerX = batchTextureStep.y; 
    float numberOfAttributes = float(${t}); 
    return vec2(centerX + (batchId * numberOfAttributes * stepX), 0.5); 
} 
`:`uniform vec4 batchTextureStep; 
uniform vec2 batchTextureDimensions; 
vec2 computeSt(float batchId) 
{ 
    float stepX = batchTextureStep.x; 
    float centerX = batchTextureStep.y; 
    float stepY = batchTextureStep.z; 
    float centerY = batchTextureStep.w; 
    float numberOfAttributes = float(${t}); 
    float xId = mod(batchId * numberOfAttributes, batchTextureDimensions.x); 
    float yId = floor(batchId * numberOfAttributes / batchTextureDimensions.x); 
    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); 
} 
`}function KR(e){return e===1?"float":`vec${e}`}function QR(e){return e===1?".x":e===2?".xy":e===3?".xyz":""}function JR(e,t){let i=e._attributes[t],o=i.componentsPerAttribute,r=i.functionName,s=KR(o),a=QR(o),c=e._offsets[t],l=`${s} ${r}(float batchId) 
{ 
    vec2 st = computeSt(batchId); 
    st.x += batchTextureStep.x * float(${c}); 
`;return e._packFloats&&i.componentDatatype!==ft.UNSIGNED_BYTE?l+=`vec4 textureValue; 
textureValue.x = czm_unpackFloat(texture(batchTexture, st)); 
textureValue.y = czm_unpackFloat(texture(batchTexture, st + vec2(batchTextureStep.x, 0.0))); 
textureValue.z = czm_unpackFloat(texture(batchTexture, st + vec2(batchTextureStep.x * 2.0, 0.0))); 
textureValue.w = czm_unpackFloat(texture(batchTexture, st + vec2(batchTextureStep.x * 3.0, 0.0))); 
`:l+=`    vec4 textureValue = texture(batchTexture, st); 
`,l+=`    ${s} value = textureValue${a}; 
`,e._pixelDatatype===ft.UNSIGNED_BYTE&&i.componentDatatype===Pe.UNSIGNED_BYTE&&!i.normalize?l+=`value *= 255.0; 
`:e._pixelDatatype===ft.FLOAT&&i.componentDatatype===Pe.UNSIGNED_BYTE&&i.normalize&&(l+=`value /= 255.0; 
`),l+=`    return value; 
} 
`,l}po.prototype.getVertexShaderCallback=function(){let e=this._attributes;if(e.length===0)return function(i){return i};let t=`uniform highp sampler2D batchTexture; 
`;t+=`${$R(this)}
`;let n=e.length;for(let i=0;i<n;++i)t+=JR(this,i);return function(i){let o=i.indexOf("void main"),r=i.substring(0,o),s=i.substring(o);return`${r}
${t}
${s}`}};po.prototype.isDestroyed=function(){return!1};po.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),kn(this)};var dC=po;var eP={NEVER:L.NEVER,LESS:L.LESS,EQUAL:L.EQUAL,LESS_OR_EQUAL:L.LEQUAL,GREATER:L.GREATER,NOT_EQUAL:L.NOTEQUAL,GREATER_OR_EQUAL:L.GEQUAL,ALWAYS:L.ALWAYS},hC=Object.freeze(eP);var dt={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};dt.getMathType=function(e){switch(e){case dt.SCALAR:return Number;case dt.VEC2:return we;case dt.VEC3:return y;case dt.VEC4:return Ie;case dt.MAT2:return Gn;case dt.MAT3:return _e;case dt.MAT4:return pe}};dt.getNumberOfComponents=function(e){switch(e){case dt.SCALAR:return 1;case dt.VEC2:return 2;case dt.VEC3:return 3;case dt.VEC4:case dt.MAT2:return 4;case dt.MAT3:return 9;case dt.MAT4:return 16}};dt.getAttributeLocationCount=function(e){switch(e){case dt.SCALAR:case dt.VEC2:case dt.VEC3:case dt.VEC4:return 1;case dt.MAT2:return 2;case dt.MAT3:return 3;case dt.MAT4:return 4}};dt.getGlslType=function(e){switch(e){case dt.SCALAR:return"float";case dt.VEC2:return"vec2";case dt.VEC3:return"vec3";case dt.VEC4:return"vec4";case dt.MAT2:return"mat2";case dt.MAT3:return"mat3";case dt.MAT4:return"mat4"}};var pC=Object.freeze(dt);var mC=1/256,gC=256,yt={};yt.octEncodeInRange=function(e,t,n){if(n.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),n.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0){let i=n.x,o=n.y;n.x=(1-Math.abs(o))*k.signNotZero(i),n.y=(1-Math.abs(i))*k.signNotZero(o)}return n.x=k.toSNorm(n.x,t),n.y=k.toSNorm(n.y,t),n};yt.octEncode=function(e,t){return yt.octEncodeInRange(e,255,t)};var Ra=new we,yC=new Uint8Array(1);function wu(e){return yC[0]=e,yC[0]}yt.octEncodeToCartesian4=function(e,t){return yt.octEncodeInRange(e,65535,Ra),t.x=wu(Ra.x*mC),t.y=wu(Ra.x),t.z=wu(Ra.y*mC),t.w=wu(Ra.y),t};yt.octDecodeInRange=function(e,t,n,i){if(i.x=k.fromSNorm(e,n),i.y=k.fromSNorm(t,n),i.z=1-(Math.abs(i.x)+Math.abs(i.y)),i.z<0){let o=i.x;i.x=(1-Math.abs(i.y))*k.signNotZero(o),i.y=(1-Math.abs(o))*k.signNotZero(i.y)}return y.normalize(i,i)};yt.octDecode=function(e,t,n){return yt.octDecodeInRange(e,t,255,n)};yt.octDecodeFromCartesian4=function(e,t){let n=e.x,i=e.y,o=e.z,r=e.w,s=n*gC+i,a=o*gC+r;return yt.octDecodeInRange(s,a,65535,t)};yt.octPackFloat=function(e){return 256*e.x+e.y};var Pd=new we;yt.octEncodeFloat=function(e){return yt.octEncode(e,Pd),yt.octPackFloat(Pd)};yt.octDecodeFloat=function(e,t){let n=e/256,i=Math.floor(n),o=(n-i)*256;return yt.octDecode(i,o,t)};yt.octPack=function(e,t,n,i){let o=yt.octEncodeFloat(e),r=yt.octEncodeFloat(t),s=yt.octEncode(n,Pd);return i.x=65536*s.x+o,i.y=65536*s.y+r,i};yt.octUnpack=function(e,t,n,i){let o=e.x/65536,r=Math.floor(o),s=(o-r)*65536;o=e.y/65536;let a=Math.floor(o),c=(o-a)*65536;yt.octDecodeFloat(s,t),yt.octDecodeFloat(c,n),yt.octDecode(r,a,i)};yt.compressTextureCoordinates=function(e){let t=e.x*4095|0,n=e.y*4095|0;return 4096*t+n};yt.decompressTextureCoordinates=function(e,t){let n=e/4096,i=Math.floor(n);return t.x=i/4095,t.y=(e-i*4096)/4095,t};function Rd(e){return e>>1^-(e&1)}yt.zigZagDeltaDecode=function(e,t,n){let i=e.length,o=0,r=0,s=0;for(let a=0;a<i;++a)o+=Rd(e[a]),r+=Rd(t[a]),e[a]=o,t[a]=r,p(n)&&(s+=Rd(n[a]),n[a]=s)};yt.dequantize=function(e,t,n,i){let o=pC.getNumberOfComponents(n),r;switch(t){case Pe.BYTE:r=127;break;case Pe.UNSIGNED_BYTE:r=255;break;case Pe.SHORT:r=32767;break;case Pe.UNSIGNED_SHORT:r=65535;break;case Pe.INT:r=2147483647;break;case Pe.UNSIGNED_INT:r=4294967295;break}let s=new Float32Array(i*o);for(let a=0;a<i;a++)for(let c=0;c<o;c++){let l=a*o+c;s[l]=Math.max(e[l]/r,-1)}return s};yt.decodeRGB565=function(e,t){let n=e.length;p(t)||(t=new Float32Array(n*3));let i=32-1,o=64-1,r=1/31,s=1/63;for(let a=0;a<n;a++){let c=e[a],l=c>>11,d=c>>5&o,h=c&i,g=3*a;t[g]=l*r,t[g+1]=d*s,t[g+2]=h*r}return t};var Cr=yt;var _C=new y,vC=new y,CC=new y;function tP(e,t,n,i,o){p(o)||(o=new y);let r,s,a,c,l,d,h,g;if(p(t.z)){if(y.equalsEpsilon(e,t,k.EPSILON14))return y.clone(y.UNIT_X,o);if(y.equalsEpsilon(e,n,k.EPSILON14))return y.clone(y.UNIT_Y,o);if(y.equalsEpsilon(e,i,k.EPSILON14))return y.clone(y.UNIT_Z,o);r=y.subtract(n,t,_C),s=y.subtract(i,t,vC),a=y.subtract(e,t,CC),c=y.dot(r,r),l=y.dot(r,s),d=y.dot(r,a),h=y.dot(s,s),g=y.dot(s,a)}else{if(we.equalsEpsilon(e,t,k.EPSILON14))return y.clone(y.UNIT_X,o);if(we.equalsEpsilon(e,n,k.EPSILON14))return y.clone(y.UNIT_Y,o);if(we.equalsEpsilon(e,i,k.EPSILON14))return y.clone(y.UNIT_Z,o);r=we.subtract(n,t,_C),s=we.subtract(i,t,vC),a=we.subtract(e,t,CC),c=we.dot(r,r),l=we.dot(r,s),d=we.dot(r,a),h=we.dot(s,s),g=we.dot(s,a)}o.y=h*d-l*g,o.z=c*g-l*d;let C=c*h-l*l;if(C!==0)return o.y/=C,o.z/=C,o.x=1-o.y-o.z,o}var bC=tP;var Od={};Od.computeDiscriminant=function(e,t,n){return t*t-4*e*n};function TC(e,t,n){let i=e+t;return k.sign(e)!==k.sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<n?0:i}Od.computeRealRoots=function(e,t,n){let i;if(e===0)return t===0?[]:[-n/t];if(t===0){if(n===0)return[0,0];let c=Math.abs(n),l=Math.abs(e);if(c<l&&c/l<k.EPSILON14)return[0,0];if(c>l&&l/c<k.EPSILON14)return[];if(i=-n/e,i<0)return[];let d=Math.sqrt(i);return[-d,d]}else if(n===0)return i=-t/e,i<0?[i,0]:[0,i];let o=t*t,r=4*e*n,s=TC(o,-r,k.EPSILON14);if(s<0)return[];let a=-.5*TC(t,k.sign(t)*Math.sqrt(s),k.EPSILON14);return t>0?[a/e,n/a]:[n/a,a/e]};var si=Od;var Dd={};Dd.computeDiscriminant=function(e,t,n,i){let o=e*e,r=t*t,s=n*n,a=i*i;return 18*e*t*n*i+r*s-27*o*a-4*(e*s*n+r*t*i)};function Id(e,t,n,i){let o=e,r=t/3,s=n/3,a=i,c=o*s,l=r*a,d=r*r,h=s*s,g=o*s-d,C=o*a-r*s,b=r*a-h,w=4*g*b-C*C,R,D;if(w<0){let Be,Ue,$e;d*l>=c*h?(Be=o,Ue=g,$e=-2*r*g+o*C):(Be=a,Ue=b,$e=-a*C+2*s*b);let ht=-($e<0?-1:1)*Math.abs(Be)*Math.sqrt(-w);D=-$e+ht;let _t=D/2,Ct=_t<0?-Math.pow(-_t,1/3):Math.pow(_t,1/3),mt=D===ht?-Ct:-Ue/Ct;return R=Ue<=0?Ct+mt:-$e/(Ct*Ct+mt*mt+Ue),d*l>=c*h?[(R-r)/o]:[-a/(R+s)]}let M=g,z=-2*r*g+o*C,U=b,Y=-a*C+2*s*b,m=Math.sqrt(w),Q=Math.sqrt(3)/2,q=Math.abs(Math.atan2(o*m,-z)/3);R=2*Math.sqrt(-M);let Z=Math.cos(q);D=R*Z;let H=R*(-Z/2-Q*Math.sin(q)),K=D+H>2*r?D-r:H-r,v=o,S=K/v;q=Math.abs(Math.atan2(a*m,-Y)/3),R=2*Math.sqrt(-U),Z=Math.cos(q),D=R*Z,H=R*(-Z/2-Q*Math.sin(q));let I=-a,F=D+H<2*s?D+s:H+s,X=I/F,ie=v*F,j=-K*F-v*I,le=K*I,be=(s*j-r*le)/(-r*j+s*ie);return S<=be?S<=X?be<=X?[S,be,X]:[S,X,be]:[X,S,be]:S<=X?[be,S,X]:be<=X?[be,X,S]:[X,be,S]}Dd.computeRealRoots=function(e,t,n,i){let o,r;if(e===0)return si.computeRealRoots(t,n,i);if(t===0){if(n===0){if(i===0)return[0,0,0];r=-i/e;let s=r<0?-Math.pow(-r,1/3):Math.pow(r,1/3);return[s,s,s]}else if(i===0)return o=si.computeRealRoots(e,0,n),o.Length===0?[0]:[o[0],0,o[1]];return Id(e,0,n,i)}else{if(n===0)return i===0?(r=-t/e,r<0?[r,0,0]:[0,0,r]):Id(e,t,0,i);if(i===0)return o=si.computeRealRoots(e,t,n),o.length===0?[0]:o[1]<=0?[o[0],o[1],0]:o[0]>=0?[0,o[0],o[1]]:[o[0],0,o[1]]}return Id(e,t,n,i)};var Su=Dd;var Md={};Md.computeDiscriminant=function(e,t,n,i,o){let r=e*e,s=r*e,a=t*t,c=a*t,l=n*n,d=l*n,h=i*i,g=h*i,C=o*o,b=C*o;return a*l*h-4*c*g-4*e*d*h+18*e*t*n*g-27*r*h*h+256*s*b+o*(18*c*n*i-4*a*d+16*e*l*l-80*e*t*l*i-6*e*a*h+144*r*n*h)+C*(144*e*a*n-27*a*a-128*r*l-192*r*t*i)};function Ei(e,t,n,i){let o=e*e,r=t-3*o/8,s=n-t*e/2+o*e/8,a=i-n*e/4+t*o/16-3*o*o/256,c=Su.computeRealRoots(1,2*r,r*r-4*a,-s*s);if(c.length>0){let l=-e/4,d=c[c.length-1];if(Math.abs(d)<k.EPSILON14){let h=si.computeRealRoots(1,r,a);if(h.length===2){let g=h[0],C=h[1],b;if(g>=0&&C>=0){let w=Math.sqrt(g),R=Math.sqrt(C);return[l-R,l-w,l+w,l+R]}else{if(g>=0&&C<0)return b=Math.sqrt(g),[l-b,l+b];if(g<0&&C>=0)return b=Math.sqrt(C),[l-b,l+b]}}return[]}else if(d>0){let h=Math.sqrt(d),g=(r+d-s/h)/2,C=(r+d+s/h)/2,b=si.computeRealRoots(1,h,g),w=si.computeRealRoots(1,-h,C);return b.length!==0?(b[0]+=l,b[1]+=l,w.length!==0?(w[0]+=l,w[1]+=l,b[1]<=w[0]?[b[0],b[1],w[0],w[1]]:w[1]<=b[0]?[w[0],w[1],b[0],b[1]]:b[0]>=w[0]&&b[1]<=w[1]?[w[0],b[0],b[1],w[1]]:w[0]>=b[0]&&w[1]<=b[1]?[b[0],w[0],w[1],b[1]]:b[0]>w[0]&&b[0]<w[1]?[w[0],b[0],w[1],b[1]]:[b[0],w[0],b[1],w[1]]):b):w.length!==0?(w[0]+=l,w[1]+=l,w):[]}}return[]}function Pa(e,t,n,i){let o=n*n,r=t*t,s=e*e,a=-2*t,c=n*e+r-4*i,l=s*i-n*t*e+o,d=Su.computeRealRoots(1,a,c,l);if(d.length>0){let h=d[0],g=t-h,C=g*g,b=e/2,w=g/2,R=C-4*i,D=C+4*Math.abs(i),M=s-4*h,z=s+4*Math.abs(h),U,Y;if(h<0||R*z<M*D){let v=Math.sqrt(M);U=v/2,Y=v===0?0:(e*w-n)/v}else{let v=Math.sqrt(R);U=v===0?0:(e*w-n)/v,Y=v/2}let m,Q;b===0&&U===0?(m=0,Q=0):k.sign(b)===k.sign(U)?(m=b+U,Q=h/m):(Q=b-U,m=h/Q);let q,Z;w===0&&Y===0?(q=0,Z=0):k.sign(w)===k.sign(Y)?(q=w+Y,Z=i/q):(Z=w-Y,q=i/Z);let H=si.computeRealRoots(1,m,q),K=si.computeRealRoots(1,Q,Z);if(H.length!==0)return K.length!==0?H[1]<=K[0]?[H[0],H[1],K[0],K[1]]:K[1]<=H[0]?[K[0],K[1],H[0],H[1]]:H[0]>=K[0]&&H[1]<=K[1]?[K[0],H[0],H[1],K[1]]:K[0]>=H[0]&&K[1]<=H[1]?[H[0],K[0],K[1],H[1]]:H[0]>K[0]&&H[0]<K[1]?[K[0],H[0],K[1],H[1]]:[H[0],K[0],H[1],K[1]]:H;if(K.length!==0)return K}return[]}Md.computeRealRoots=function(e,t,n,i,o){if(Math.abs(e)<k.EPSILON15)return Su.computeRealRoots(t,n,i,o);let r=t/e,s=n/e,a=i/e,c=o/e,l=r<0?1:0;switch(l+=s<0?l+1:l,l+=a<0?l+1:l,l+=c<0?l+1:l,l){case 0:return Ei(r,s,a,c);case 1:return Pa(r,s,a,c);case 2:return Pa(r,s,a,c);case 3:return Ei(r,s,a,c);case 4:return Ei(r,s,a,c);case 5:return Pa(r,s,a,c);case 6:return Ei(r,s,a,c);case 7:return Ei(r,s,a,c);case 8:return Pa(r,s,a,c);case 9:return Ei(r,s,a,c);case 10:return Ei(r,s,a,c);case 11:return Pa(r,s,a,c);case 12:return Ei(r,s,a,c);case 13:return Ei(r,s,a,c);case 14:return Ei(r,s,a,c);case 15:return Ei(r,s,a,c);default:return}};var EC=Md;function xu(e,t){t=y.clone(E(t,y.ZERO)),y.equals(t,y.ZERO)||y.normalize(t,t),this.origin=y.clone(E(e,y.ZERO)),this.direction=t}xu.clone=function(e,t){if(p(e))return p(t)?(t.origin=y.clone(e.origin),t.direction=y.clone(e.direction),t):new xu(e.origin,e.direction)};xu.getPoint=function(e,t,n){return p(n)||(n=new y),n=y.multiplyByScalar(e.direction,t,n),y.add(e.origin,n,n)};var zd=xu;var Dt={};Dt.rayPlane=function(e,t,n){p(n)||(n=new y);let i=e.origin,o=e.direction,r=t.normal,s=y.dot(r,o);if(Math.abs(s)<k.EPSILON15)return;let a=(-t.distance-y.dot(r,i))/s;if(!(a<0))return n=y.multiplyByScalar(o,a,n),y.add(i,n,n)};var nP=new y,iP=new y,IC=new y,wC=new y,SC=new y;Dt.rayTriangleParametric=function(e,t,n,i,o){o=E(o,!1);let r=e.origin,s=e.direction,a=y.subtract(n,t,nP),c=y.subtract(i,t,iP),l=y.cross(s,c,IC),d=y.dot(a,l),h,g,C,b,w;if(o){if(d<k.EPSILON6||(h=y.subtract(r,t,wC),C=y.dot(h,l),C<0||C>d)||(g=y.cross(h,a,SC),b=y.dot(s,g),b<0||C+b>d))return;w=y.dot(c,g)/d}else{if(Math.abs(d)<k.EPSILON6)return;let R=1/d;if(h=y.subtract(r,t,wC),C=y.dot(h,l)*R,C<0||C>1||(g=y.cross(h,a,SC),b=y.dot(s,g)*R,b<0||C+b>1))return;w=y.dot(c,g)*R}return w};Dt.rayTriangle=function(e,t,n,i,o,r){let s=Dt.rayTriangleParametric(e,t,n,i,o);if(!(!p(s)||s<0))return p(r)||(r=new y),y.multiplyByScalar(e.direction,s,r),y.add(e.origin,r,r)};var oP=new zd;Dt.lineSegmentTriangle=function(e,t,n,i,o,r,s){let a=oP;y.clone(e,a.origin),y.subtract(t,e,a.direction),y.normalize(a.direction,a.direction);let c=Dt.rayTriangleParametric(a,n,i,o,r);if(!(!p(c)||c<0||c>y.distance(e,t)))return p(s)||(s=new y),y.multiplyByScalar(a.direction,c,s),y.add(a.origin,s,s)};function rP(e,t,n,i){let o=t*t-4*e*n;if(o<0)return;if(o>0){let s=1/(2*e),a=Math.sqrt(o),c=(-t+a)*s,l=(-t-a)*s;return c<l?(i.root0=c,i.root1=l):(i.root0=l,i.root1=c),i}let r=-t/(2*e);if(r!==0)return i.root0=i.root1=r,i}var sP={root0:0,root1:0};function DC(e,t,n){p(n)||(n=new No);let i=e.origin,o=e.direction,r=t.center,s=t.radius*t.radius,a=y.subtract(i,r,IC),c=y.dot(o,o),l=2*y.dot(o,a),d=y.magnitudeSquared(a)-s,h=rP(c,l,d,sP);if(p(h))return n.start=h.root0,n.stop=h.root1,n}Dt.raySphere=function(e,t,n){if(n=DC(e,t,n),!(!p(n)||n.stop<0))return n.start=Math.max(n.start,0),n};var aP=new zd;Dt.lineSegmentSphere=function(e,t,n,i){let o=aP;y.clone(e,o.origin);let r=y.subtract(t,e,o.direction),s=y.magnitude(r);if(y.normalize(r,r),i=DC(o,n,i),!(!p(i)||i.stop<0||i.start>s))return i.start=Math.max(i.start,0),i.stop=Math.min(i.stop,s),i};var cP=new y,uP=new y;Dt.rayEllipsoid=function(e,t){let n=t.oneOverRadii,i=y.multiplyComponents(n,e.origin,cP),o=y.multiplyComponents(n,e.direction,uP),r=y.magnitudeSquared(i),s=y.dot(i,o),a,c,l,d,h;if(r>1){if(s>=0)return;let g=s*s;if(a=r-1,c=y.magnitudeSquared(o),l=c*a,g<l)return;if(g>l){d=s*s-l,h=-s+Math.sqrt(d);let b=h/c,w=a/h;return b<w?new No(b,w):{start:w,stop:b}}let C=Math.sqrt(a/c);return new No(C,C)}else if(r<1)return a=r-1,c=y.magnitudeSquared(o),l=c*a,d=s*s-l,h=-s+Math.sqrt(d),new No(0,h/c);if(s<0)return c=y.magnitudeSquared(o),new No(0,-s/c)};function br(e,t,n){let i=e+t;return k.sign(e)!==k.sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<n?0:i}function lP(e,t,n,i,o){let r=i*i,s=o*o,a=(e[_e.COLUMN1ROW1]-e[_e.COLUMN2ROW2])*s,c=o*(i*br(e[_e.COLUMN1ROW0],e[_e.COLUMN0ROW1],k.EPSILON15)+t.y),l=e[_e.COLUMN0ROW0]*r+e[_e.COLUMN2ROW2]*s+i*t.x+n,d=s*br(e[_e.COLUMN2ROW1],e[_e.COLUMN1ROW2],k.EPSILON15),h=o*(i*br(e[_e.COLUMN2ROW0],e[_e.COLUMN0ROW2])+t.z),g,C=[];if(h===0&&d===0){if(g=si.computeRealRoots(a,c,l),g.length===0)return C;let q=g[0],Z=Math.sqrt(Math.max(1-q*q,0));if(C.push(new y(i,o*q,o*-Z)),C.push(new y(i,o*q,o*Z)),g.length===2){let H=g[1],K=Math.sqrt(Math.max(1-H*H,0));C.push(new y(i,o*H,o*-K)),C.push(new y(i,o*H,o*K))}return C}let b=h*h,w=d*d,R=a*a,D=h*d,M=R+w,z=2*(c*a+D),U=2*l*a+c*c-w+b,Y=2*(l*c-D),m=l*l-b;if(M===0&&z===0&&U===0&&Y===0)return C;g=EC.computeRealRoots(M,z,U,Y,m);let Q=g.length;if(Q===0)return C;for(let q=0;q<Q;++q){let Z=g[q],H=Z*Z,K=Math.max(1-H,0),v=Math.sqrt(K),S;k.sign(a)===k.sign(l)?S=br(a*H+l,c*Z,k.EPSILON12):k.sign(l)===k.sign(c*Z)?S=br(a*H,c*Z+l,k.EPSILON12):S=br(a*H+c*Z,l,k.EPSILON12);let I=br(d*Z,h,k.EPSILON15),F=S*I;F<0?C.push(new y(i,o*Z,o*v)):F>0?C.push(new y(i,o*Z,o*-v)):v!==0?(C.push(new y(i,o*Z,o*-v)),C.push(new y(i,o*Z,o*v)),++q):C.push(new y(i,o*Z,o*v))}return C}var Nd=new y,xC=new y,AC=new y,Au=new y,fP=new y,dP=new _e,hP=new _e,pP=new _e,mP=new _e,gP=new _e,RC=new _e,PC=new _e,OC=new y,yP=new y,_P=new rt;Dt.grazingAltitudeLocation=function(e,t){let n=e.origin,i=e.direction;if(!y.equals(n,y.ZERO)){let m=t.geodeticSurfaceNormal(n,Nd);if(y.dot(i,m)>=0)return n}let o=p(this.rayEllipsoid(e,t)),r=t.transformPositionToScaledSpace(i,Nd),s=y.normalize(r,r),a=y.mostOrthogonalAxis(r,Au),c=y.normalize(y.cross(a,s,xC),xC),l=y.normalize(y.cross(s,c,AC),AC),d=dP;d[0]=s.x,d[1]=s.y,d[2]=s.z,d[3]=c.x,d[4]=c.y,d[5]=c.z,d[6]=l.x,d[7]=l.y,d[8]=l.z;let h=_e.transpose(d,hP),g=_e.fromScale(t.radii,pP),C=_e.fromScale(t.oneOverRadii,mP),b=gP;b[0]=0,b[1]=-i.z,b[2]=i.y,b[3]=i.z,b[4]=0,b[5]=-i.x,b[6]=-i.y,b[7]=i.x,b[8]=0;let w=_e.multiply(_e.multiply(h,C,RC),b,RC),R=_e.multiply(_e.multiply(w,g,PC),d,PC),D=_e.multiplyByVector(w,n,fP),M=lP(R,y.negate(D,Nd),0,0,1),z,U,Y=M.length;if(Y>0){let m=y.clone(y.ZERO,yP),Q=Number.NEGATIVE_INFINITY;for(let Z=0;Z<Y;++Z){z=_e.multiplyByVector(g,_e.multiplyByVector(d,M[Z],OC),OC);let H=y.normalize(y.subtract(z,n,Au),Au),K=y.dot(H,i);K>Q&&(Q=K,m=y.clone(z,m))}let q=t.cartesianToCartographic(m,_P);return Q=k.clamp(Q,0,1),U=y.magnitude(y.subtract(m,n,Au))*Math.sqrt(1-Q*Q),U=o?-U:U,q.height=U,t.cartographicToCartesian(q,new y)}};var vP=new y;Dt.lineSegmentPlane=function(e,t,n,i){p(i)||(i=new y);let o=y.subtract(t,e,vP),r=n.normal,s=y.dot(r,o);if(Math.abs(s)<k.EPSILON6)return;let a=y.dot(r,e),c=-(n.distance+a)/s;if(!(c<0||c>1))return y.multiplyByScalar(o,c,i),y.add(e,i,i),i};Dt.trianglePlaneIntersection=function(e,t,n,i){let o=i.normal,r=i.distance,s=y.dot(o,e)+r<0,a=y.dot(o,t)+r<0,c=y.dot(o,n)+r<0,l=0;l+=s?1:0,l+=a?1:0,l+=c?1:0;let d,h;if((l===1||l===2)&&(d=new y,h=new y),l===1){if(s)return Dt.lineSegmentPlane(e,t,i,d),Dt.lineSegmentPlane(e,n,i,h),{positions:[e,t,n,d,h],indices:[0,3,4,1,2,4,1,4,3]};if(a)return Dt.lineSegmentPlane(t,n,i,d),Dt.lineSegmentPlane(t,e,i,h),{positions:[e,t,n,d,h],indices:[1,3,4,2,0,4,2,4,3]};if(c)return Dt.lineSegmentPlane(n,e,i,d),Dt.lineSegmentPlane(n,t,i,h),{positions:[e,t,n,d,h],indices:[2,3,4,0,1,4,0,4,3]}}else if(l===2)if(s)if(a){if(!c)return Dt.lineSegmentPlane(e,n,i,d),Dt.lineSegmentPlane(t,n,i,h),{positions:[e,t,n,d,h],indices:[0,1,4,0,4,3,2,3,4]}}else return Dt.lineSegmentPlane(n,t,i,d),Dt.lineSegmentPlane(e,t,i,h),{positions:[e,t,n,d,h],indices:[2,0,4,2,4,3,1,3,4]};else return Dt.lineSegmentPlane(t,e,i,d),Dt.lineSegmentPlane(n,e,i,h),{positions:[e,t,n,d,h],indices:[1,2,4,1,4,3,0,3,4]}};var Ld=Dt;var Bd={};Bd.calculateACMR=function(e){e=E(e,E.EMPTY_OBJECT);let t=e.indices,n=e.maximumIndex,i=E(e.cacheSize,24),o=t.length;if(!p(n)){n=0;let a=0,c=t[a];for(;a<o;)c>n&&(n=c),++a,c=t[a]}let r=[];for(let a=0;a<n+1;a++)r[a]=0;let s=i+1;for(let a=0;a<o;++a)s-r[t[a]]>i&&(r[t[a]]=s,++s);return(s-i+1)/(o/3)};Bd.tipsify=function(e){e=E(e,E.EMPTY_OBJECT);let t=e.indices,n=e.maximumIndex,i=E(e.cacheSize,24),o;function r(K,v,S,I){for(;v.length>=1;){let F=v[v.length-1];if(v.splice(v.length-1,1),K[F].numLiveTriangles>0)return F}for(;o<I;){if(K[o].numLiveTriangles>0)return++o,o-1;++o}return-1}function s(K,v,S,I,F,X,ie){let j=-1,le,be=-1,Be=0;for(;Be<S.length;){let Ue=S[Be];I[Ue].numLiveTriangles&&(le=0,F-I[Ue].timeStamp+2*I[Ue].numLiveTriangles<=v&&(le=F-I[Ue].timeStamp),(le>be||be===-1)&&(be=le,j=Ue)),++Be}return j===-1?r(I,X,K,ie):j}let a=t.length,c=0,l=0,d=t[l],h=a;if(p(n))c=n+1;else{for(;l<h;)d>c&&(c=d),++l,d=t[l];if(c===-1)return 0;++c}let g=[],C;for(C=0;C<c;C++)g[C]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};l=0;let b=0;for(;l<h;)g[t[l]].vertexTriangles.push(b),++g[t[l]].numLiveTriangles,g[t[l+1]].vertexTriangles.push(b),++g[t[l+1]].numLiveTriangles,g[t[l+2]].vertexTriangles.push(b),++g[t[l+2]].numLiveTriangles,++b,l+=3;let w=0,R=i+1;o=1;let D=[],M=[],z,U,Y=0,m=[],Q=a/3,q=[];for(C=0;C<Q;C++)q[C]=!1;let Z,H;for(;w!==-1;){D=[],U=g[w],H=U.vertexTriangles.length;for(let K=0;K<H;++K)if(b=U.vertexTriangles[K],!q[b]){q[b]=!0,l=b+b+b;for(let v=0;v<3;++v)Z=t[l],D.push(Z),M.push(Z),m[Y]=Z,++Y,z=g[Z],--z.numLiveTriangles,R-z.timeStamp>i&&(z.timeStamp=R,++R),++l}w=s(t,i,D,g,R,M,c)}return m};var MC=Bd;var Mn={};function zu(e,t,n,i,o){e[t++]=n,e[t++]=i,e[t++]=i,e[t++]=o,e[t++]=o,e[t]=n}function CP(e){let t=e.length,n=t/3*6,i=jt.createTypedArray(t,n),o=0;for(let r=0;r<t;r+=3,o+=6)zu(i,o,e[r],e[r+1],e[r+2]);return i}function bP(e){let t=e.length;if(t>=3){let n=(t-2)*6,i=jt.createTypedArray(t,n);zu(i,0,e[0],e[1],e[2]);let o=6;for(let r=3;r<t;++r,o+=6)zu(i,o,e[r-1],e[r],e[r-2]);return i}return new Uint16Array}function TP(e){if(e.length>0){let t=e.length-1,n=(t-1)*6,i=jt.createTypedArray(t,n),o=e[0],r=0;for(let s=1;s<t;++s,r+=6)zu(i,r,o,e[s],e[s+1]);return i}return new Uint16Array}Mn.toWireframe=function(e){let t=e.indices;if(p(t)){switch(e.primitiveType){case vt.TRIANGLES:e.indices=CP(t);break;case vt.TRIANGLE_STRIP:e.indices=bP(t);break;case vt.TRIANGLE_FAN:e.indices=TP(t);break}e.primitiveType=vt.LINES}return e};Mn.createLineSegmentsForVectors=function(e,t,n){t=E(t,"normal"),n=E(n,1e4);let i=e.attributes.position.values,o=e.attributes[t].values,r=i.length,s=new Float64Array(2*r),a=0;for(let d=0;d<r;d+=3)s[a++]=i[d],s[a++]=i[d+1],s[a++]=i[d+2],s[a++]=i[d]+o[d]*n,s[a++]=i[d+1]+o[d+1]*n,s[a++]=i[d+2]+o[d+2]*n;let c,l=e.boundingSphere;return p(l)&&(c=new Ve(l.center,l.radius+n)),new Rt({attributes:{position:new It({componentDatatype:Pe.DOUBLE,componentsPerAttribute:3,values:s})},primitiveType:vt.LINES,boundingSphere:c})};Mn.createAttributeLocations=function(e){let t=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","tangent","bitangent","extrudeDirection","compressedAttributes"],n=e.attributes,i={},o=0,r,s=t.length;for(r=0;r<s;++r){let a=t[r];p(n[a])&&(i[a]=o++)}for(let a in n)n.hasOwnProperty(a)&&!p(i[a])&&(i[a]=o++);return i};Mn.reorderForPreVertexCache=function(e){let t=Rt.computeNumberOfVertices(e),n=e.indices;if(p(n)){let i=new Int32Array(t);for(let g=0;g<t;g++)i[g]=-1;let o=n,r=o.length,s=jt.createTypedArray(t,r),a=0,c=0,l=0,d;for(;a<r;)d=i[o[a]],d!==-1?s[c]=d:(d=o[a],i[d]=l,s[c]=l,++l),++a,++c;e.indices=s;let h=e.attributes;for(let g in h)if(h.hasOwnProperty(g)&&p(h[g])&&p(h[g].values)){let C=h[g],b=C.values,w=0,R=C.componentsPerAttribute,D=Pe.createTypedArray(C.componentDatatype,l*R);for(;w<t;){let M=i[w];if(M!==-1)for(let z=0;z<R;z++)D[R*M+z]=b[R*w+z];++w}C.values=D}}return e};Mn.reorderForPostVertexCache=function(e,t){let n=e.indices;if(e.primitiveType===vt.TRIANGLES&&p(n)){let i=n.length,o=0;for(let r=0;r<i;r++)n[r]>o&&(o=n[r]);e.indices=MC.tipsify({indices:n,maximumIndex:o,cacheSize:t})}return e};function zC(e){let t={};for(let n in e)if(e.hasOwnProperty(n)&&p(e[n])&&p(e[n].values)){let i=e[n];t[n]=new It({componentDatatype:i.componentDatatype,componentsPerAttribute:i.componentsPerAttribute,normalize:i.normalize,values:[]})}return t}function EP(e,t,n){for(let i in t)if(t.hasOwnProperty(i)&&p(t[i])&&p(t[i].values)){let o=t[i];for(let r=0;r<o.componentsPerAttribute;++r)e[i].values.push(o.values[n*o.componentsPerAttribute+r])}}Mn.fitToUnsignedShortIndices=function(e){let t=[],n=Rt.computeNumberOfVertices(e);if(p(e.indices)&&n>=k.SIXTY_FOUR_KILOBYTES){let i=[],o=[],r=0,s=zC(e.attributes),a=e.indices,c=a.length,l;e.primitiveType===vt.TRIANGLES?l=3:e.primitiveType===vt.LINES?l=2:e.primitiveType===vt.POINTS&&(l=1);for(let d=0;d<c;d+=l){for(let h=0;h<l;++h){let g=a[d+h],C=i[g];p(C)||(C=r++,i[g]=C,EP(s,e.attributes,g)),o.push(C)}r+l>=k.SIXTY_FOUR_KILOBYTES&&(t.push(new Rt({attributes:s,indices:o,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV})),i=[],o=[],r=0,s=zC(e.attributes))}o.length!==0&&t.push(new Rt({attributes:s,indices:o,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV}))}else t.push(e);return t};var NC=new y,wP=new rt;Mn.projectTo2D=function(e,t,n,i,o){let r=e.attributes[t];o=p(o)?o:new Li;let s=o.ellipsoid,a=r.values,c=new Float64Array(a.length),l=0;for(let d=0;d<a.length;d+=3){let h=y.fromArray(a,d,NC),g=s.cartesianToCartographic(h,wP),C=o.project(g,NC);c[l++]=C.x,c[l++]=C.y,c[l++]=C.z}return e.attributes[n]=r,e.attributes[i]=new It({componentDatatype:Pe.DOUBLE,componentsPerAttribute:3,values:c}),delete e.attributes[t],e};var Fd={high:0,low:0};Mn.encodeAttribute=function(e,t,n,i){let o=e.attributes[t],r=o.values,s=r.length,a=new Float32Array(s),c=new Float32Array(s);for(let d=0;d<s;++d)fs.encode(r[d],Fd),a[d]=Fd.high,c[d]=Fd.low;let l=o.componentsPerAttribute;return e.attributes[n]=new It({componentDatatype:Pe.FLOAT,componentsPerAttribute:l,values:a}),e.attributes[i]=new It({componentDatatype:Pe.FLOAT,componentsPerAttribute:l,values:c}),delete e.attributes[t],e};var Si=new y;function Vd(e,t){if(p(t)){let n=t.values,i=n.length;for(let o=0;o<i;o+=3)y.unpack(n,o,Si),pe.multiplyByPoint(e,Si,Si),y.pack(Si,n,o)}}function Ud(e,t){if(p(t)){let n=t.values,i=n.length;for(let o=0;o<i;o+=3)y.unpack(n,o,Si),_e.multiplyByVector(e,Si,Si),Si=y.normalize(Si,Si),y.pack(Si,n,o)}}var Ru=new pe,Pu=new _e;Mn.transformToWorldCoordinates=function(e){let t=e.modelMatrix;if(pe.equals(t,pe.IDENTITY))return e;let n=e.geometry.attributes;Vd(t,n.position),Vd(t,n.prevPosition),Vd(t,n.nextPosition),(p(n.normal)||p(n.tangent)||p(n.bitangent))&&(pe.inverse(t,Ru),pe.transpose(Ru,Ru),pe.getMatrix3(Ru,Pu),Ud(Pu,n.normal),Ud(Pu,n.tangent),Ud(Pu,n.bitangent));let i=e.geometry.boundingSphere;return p(i)&&(e.geometry.boundingSphere=Ve.transform(i,t,i)),e.modelMatrix=pe.clone(pe.IDENTITY),e};function SP(e,t){let n=e.length,i={},o=e[0][t].attributes,r;for(r in o)if(o.hasOwnProperty(r)&&p(o[r])&&p(o[r].values)){let s=o[r],a=s.values.length,c=!0;for(let l=1;l<n;++l){let d=e[l][t].attributes[r];if(!p(d)||s.componentDatatype!==d.componentDatatype||s.componentsPerAttribute!==d.componentsPerAttribute||s.normalize!==d.normalize){c=!1;break}a+=d.values.length}c&&(i[r]=new It({componentDatatype:s.componentDatatype,componentsPerAttribute:s.componentsPerAttribute,normalize:s.normalize,values:Pe.createTypedArray(s.componentDatatype,a)}))}return i}var xP=new y;function kd(e,t){let n=e.length,i,o,r,s,a=e[0].modelMatrix,c=p(e[0][t].indices),l=e[0][t].primitiveType,d=SP(e,t),h,g,C;for(i in d)if(d.hasOwnProperty(i))for(h=d[i].values,s=0,o=0;o<n;++o)for(g=e[o][t].attributes[i].values,C=g.length,r=0;r<C;++r)h[s++]=g[r];let b;if(c){let M=0;for(o=0;o<n;++o)M+=e[o][t].indices.length;let z=Rt.computeNumberOfVertices(new Rt({attributes:d,primitiveType:vt.POINTS})),U=jt.createTypedArray(z,M),Y=0,m=0;for(o=0;o<n;++o){let Q=e[o][t].indices,q=Q.length;for(s=0;s<q;++s)U[Y++]=m+Q[s];m+=Rt.computeNumberOfVertices(e[o][t])}b=U}let w=new y,R=0,D;for(o=0;o<n;++o){if(D=e[o][t].boundingSphere,!p(D)){w=void 0;break}y.add(D.center,w,w)}if(p(w))for(y.divideByScalar(w,n,w),o=0;o<n;++o){D=e[o][t].boundingSphere;let M=y.magnitude(y.subtract(D.center,w,xP))+D.radius;M>R&&(R=M)}return new Rt({attributes:d,indices:b,primitiveType:l,boundingSphere:p(w)?new Ve(w,R):void 0})}Mn.combineInstances=function(e){let t=[],n=[],i=e.length;for(let r=0;r<i;++r){let s=e[r];p(s.geometry)?t.push(s):p(s.westHemisphereGeometry)&&p(s.eastHemisphereGeometry)&&n.push(s)}let o=[];return t.length>0&&o.push(kd(t,"geometry")),n.length>0&&(o.push(kd(n,"westHemisphereGeometry")),o.push(kd(n,"eastHemisphereGeometry"))),o};var ai=new y,Oa=new y,Ss=new y,xs=new y;Mn.computeNormal=function(e){let t=e.indices,n=e.attributes,i=n.position.values,o=n.position.values.length/3,r=t.length,s=new Array(o),a=new Array(r/3),c=new Array(r),l;for(l=0;l<o;l++)s[l]={indexOffset:0,count:0,currentCount:0};let d=0;for(l=0;l<r;l+=3){let b=t[l],w=t[l+1],R=t[l+2],D=b*3,M=w*3,z=R*3;Oa.x=i[D],Oa.y=i[D+1],Oa.z=i[D+2],Ss.x=i[M],Ss.y=i[M+1],Ss.z=i[M+2],xs.x=i[z],xs.y=i[z+1],xs.z=i[z+2],s[b].count++,s[w].count++,s[R].count++,y.subtract(Ss,Oa,Ss),y.subtract(xs,Oa,xs),a[d]=y.cross(Ss,xs,new y),d++}let h=0;for(l=0;l<o;l++)s[l].indexOffset+=h,h+=s[l].count;d=0;let g;for(l=0;l<r;l+=3){g=s[t[l]];let b=g.indexOffset+g.currentCount;c[b]=d,g.currentCount++,g=s[t[l+1]],b=g.indexOffset+g.currentCount,c[b]=d,g.currentCount++,g=s[t[l+2]],b=g.indexOffset+g.currentCount,c[b]=d,g.currentCount++,d++}let C=new Float32Array(o*3);for(l=0;l<o;l++){let b=l*3;if(g=s[l],y.clone(y.ZERO,ai),g.count>0){for(d=0;d<g.count;d++)y.add(ai,a[c[g.indexOffset+d]],ai);y.equalsEpsilon(y.ZERO,ai,k.EPSILON10)&&y.clone(a[c[g.indexOffset]],ai)}y.equalsEpsilon(y.ZERO,ai,k.EPSILON10)&&(ai.z=1),y.normalize(ai,ai),C[b]=ai.x,C[b+1]=ai.y,C[b+2]=ai.z}return e.attributes.normal=new It({componentDatatype:Pe.FLOAT,componentsPerAttribute:3,values:C}),e};var AP=new y,LC=new y,RP=new y;Mn.computeTangentAndBitangent=function(e){let t=e.attributes,n=e.indices,i=e.attributes.position.values,o=e.attributes.normal.values,r=e.attributes.st.values,s=e.attributes.position.values.length/3,a=n.length,c=new Array(s*3),l;for(l=0;l<c.length;l++)c[l]=0;let d,h,g;for(l=0;l<a;l+=3){let w=n[l],R=n[l+1],D=n[l+2];d=w*3,h=R*3,g=D*3;let M=w*2,z=R*2,U=D*2,Y=i[d],m=i[d+1],Q=i[d+2],q=r[M],Z=r[M+1],H=r[z+1]-Z,K=r[U+1]-Z,v=1/((r[z]-q)*K-(r[U]-q)*H),S=(K*(i[h]-Y)-H*(i[g]-Y))*v,I=(K*(i[h+1]-m)-H*(i[g+1]-m))*v,F=(K*(i[h+2]-Q)-H*(i[g+2]-Q))*v;c[d]+=S,c[d+1]+=I,c[d+2]+=F,c[h]+=S,c[h+1]+=I,c[h+2]+=F,c[g]+=S,c[g+1]+=I,c[g+2]+=F}let C=new Float32Array(s*3),b=new Float32Array(s*3);for(l=0;l<s;l++){d=l*3,h=d+1,g=d+2;let w=y.fromArray(o,d,AP),R=y.fromArray(c,d,RP),D=y.dot(w,R);y.multiplyByScalar(w,D,LC),y.normalize(y.subtract(R,LC,R),R),C[d]=R.x,C[h]=R.y,C[g]=R.z,y.normalize(y.cross(w,R,R),R),b[d]=R.x,b[h]=R.y,b[g]=R.z}return e.attributes.tangent=new It({componentDatatype:Pe.FLOAT,componentsPerAttribute:3,values:C}),e.attributes.bitangent=new It({componentDatatype:Pe.FLOAT,componentsPerAttribute:3,values:b}),e};var Ia=new we,wi=new y,BC=new y,FC=new y,Ou=new we;Mn.compressVertices=function(e){let t=e.attributes.extrudeDirection,n,i;if(p(t)){let m=t.values;i=m.length/3;let Q=new Float32Array(i*2),q=0;for(n=0;n<i;++n){if(y.fromArray(m,n*3,wi),y.equals(wi,y.ZERO)){q+=2;continue}Ou=Cr.octEncodeInRange(wi,65535,Ou),Q[q++]=Ou.x,Q[q++]=Ou.y}return e.attributes.compressedAttributes=new It({componentDatatype:Pe.FLOAT,componentsPerAttribute:2,values:Q}),delete e.attributes.extrudeDirection,e}let o=e.attributes.normal,r=e.attributes.st,s=p(o),a=p(r);if(!s&&!a)return e;let c=e.attributes.tangent,l=e.attributes.bitangent,d=p(c),h=p(l),g,C,b,w;s&&(g=o.values),a&&(C=r.values),d&&(b=c.values),h&&(w=l.values),i=(s?g.length:C.length)/(s?3:2);let M=i,z=a&&s?2:1;z+=d||h?1:0,M*=z;let U=new Float32Array(M),Y=0;for(n=0;n<i;++n){a&&(we.fromArray(C,n*2,Ia),U[Y++]=Cr.compressTextureCoordinates(Ia));let m=n*3;s&&p(b)&&p(w)?(y.fromArray(g,m,wi),y.fromArray(b,m,BC),y.fromArray(w,m,FC),Cr.octPack(wi,BC,FC,Ia),U[Y++]=Ia.x,U[Y++]=Ia.y):(s&&(y.fromArray(g,m,wi),U[Y++]=Cr.octEncodeFloat(wi)),d&&(y.fromArray(b,m,wi),U[Y++]=Cr.octEncodeFloat(wi)),h&&(y.fromArray(w,m,wi),U[Y++]=Cr.octEncodeFloat(wi)))}return e.attributes.compressedAttributes=new It({componentDatatype:Pe.FLOAT,componentsPerAttribute:z,values:U}),s&&delete e.attributes.normal,a&&delete e.attributes.st,h&&delete e.attributes.bitangent,d&&delete e.attributes.tangent,e};function PP(e){if(p(e.indices))return e;let t=Rt.computeNumberOfVertices(e),n=jt.createTypedArray(t,t);for(let i=0;i<t;++i)n[i]=i;return e.indices=n,e}function OP(e){let t=Rt.computeNumberOfVertices(e),n=jt.createTypedArray(t,(t-2)*3);n[0]=1,n[1]=0,n[2]=2;let i=3;for(let o=3;o<t;++o)n[i++]=o-1,n[i++]=0,n[i++]=o;return e.indices=n,e.primitiveType=vt.TRIANGLES,e}function IP(e){let t=Rt.computeNumberOfVertices(e),n=jt.createTypedArray(t,(t-2)*3);n[0]=0,n[1]=1,n[2]=2,t>3&&(n[3]=0,n[4]=2,n[5]=3);let i=6;for(let o=3;o<t-1;o+=2)n[i++]=o,n[i++]=o-1,n[i++]=o+1,o+2<t&&(n[i++]=o,n[i++]=o+1,n[i++]=o+2);return e.indices=n,e.primitiveType=vt.TRIANGLES,e}function DP(e){if(p(e.indices))return e;let t=Rt.computeNumberOfVertices(e),n=jt.createTypedArray(t,t);for(let i=0;i<t;++i)n[i]=i;return e.indices=n,e}function MP(e){let t=Rt.computeNumberOfVertices(e),n=jt.createTypedArray(t,(t-1)*2);n[0]=0,n[1]=1;let i=2;for(let o=2;o<t;++o)n[i++]=o-1,n[i++]=o;return e.indices=n,e.primitiveType=vt.LINES,e}function zP(e){let t=Rt.computeNumberOfVertices(e),n=jt.createTypedArray(t,t*2);n[0]=0,n[1]=1;let i=2;for(let o=2;o<t;++o)n[i++]=o-1,n[i++]=o;return n[i++]=t-1,n[i]=0,e.indices=n,e.primitiveType=vt.LINES,e}function NP(e){switch(e.primitiveType){case vt.TRIANGLE_FAN:return OP(e);case vt.TRIANGLE_STRIP:return IP(e);case vt.TRIANGLES:return PP(e);case vt.LINE_STRIP:return MP(e);case vt.LINE_LOOP:return zP(e);case vt.LINES:return DP(e)}return e}function Ho(e,t){Math.abs(e.y)<k.EPSILON6&&(t?e.y=-k.EPSILON6:e.y=k.EPSILON6)}function LP(e,t,n){if(e.y!==0&&t.y!==0&&n.y!==0){Ho(e,e.y<0),Ho(t,t.y<0),Ho(n,n.y<0);return}let i=Math.abs(e.y),o=Math.abs(t.y),r=Math.abs(n.y),s;i>o?i>r?s=k.sign(e.y):s=k.sign(n.y):o>r?s=k.sign(t.y):s=k.sign(n.y);let a=s<0;Ho(e,a),Ho(t,a),Ho(n,a)}var VC=new y;function ci(e,t,n,i){y.add(e,y.multiplyByScalar(y.subtract(t,e,VC),e.y/(e.y-t.y),VC),n),y.clone(n,i),Ho(n,!0),Ho(i,!1)}var Tr=new y,Er=new y,wr=new y,Sr=new y,Gd={positions:new Array(7),indices:new Array(3*3)};function BP(e,t,n){if(e.x>=0||t.x>=0||n.x>=0)return;LP(e,t,n);let i=e.y<0,o=t.y<0,r=n.y<0,s=0;s+=i?1:0,s+=o?1:0,s+=r?1:0;let a=Gd.indices;s===1?(a[1]=3,a[2]=4,a[5]=6,a[7]=6,a[8]=5,i?(ci(e,t,Tr,wr),ci(e,n,Er,Sr),a[0]=0,a[3]=1,a[4]=2,a[6]=1):o?(ci(t,n,Tr,wr),ci(t,e,Er,Sr),a[0]=1,a[3]=2,a[4]=0,a[6]=2):r&&(ci(n,e,Tr,wr),ci(n,t,Er,Sr),a[0]=2,a[3]=0,a[4]=1,a[6]=0)):s===2&&(a[2]=4,a[4]=4,a[5]=3,a[7]=5,a[8]=6,i?o?r||(ci(n,e,Tr,wr),ci(n,t,Er,Sr),a[0]=0,a[1]=1,a[3]=0,a[6]=2):(ci(t,n,Tr,wr),ci(t,e,Er,Sr),a[0]=2,a[1]=0,a[3]=2,a[6]=1):(ci(e,t,Tr,wr),ci(e,n,Er,Sr),a[0]=1,a[1]=2,a[3]=1,a[6]=0));let c=Gd.positions;return c[0]=e,c[1]=t,c[2]=n,c.length=3,(s===1||s===2)&&(c[3]=Tr,c[4]=Er,c[5]=wr,c[6]=Sr,c.length=7),Gd}function UC(e,t){let n=e.attributes;if(n.position.values.length===0)return;for(let o in n)if(n.hasOwnProperty(o)&&p(n[o])&&p(n[o].values)){let r=n[o];r.values=Pe.createTypedArray(r.componentDatatype,r.values)}let i=Rt.computeNumberOfVertices(e);return e.indices=jt.createTypedArray(i,e.indices),t&&(e.boundingSphere=Ve.fromVertices(n.position.values)),e}function Rs(e){let t=e.attributes,n={};for(let i in t)if(t.hasOwnProperty(i)&&p(t[i])&&p(t[i].values)){let o=t[i];n[i]=new It({componentDatatype:o.componentDatatype,componentsPerAttribute:o.componentsPerAttribute,normalize:o.normalize,values:[]})}return new Rt({attributes:n,indices:[],primitiveType:e.primitiveType})}function qd(e,t,n){let i=p(e.geometry.boundingSphere);t=UC(t,i),n=UC(n,i),p(n)&&!p(t)?e.geometry=n:!p(n)&&p(t)?e.geometry=t:(e.westHemisphereGeometry=t,e.eastHemisphereGeometry=n,e.geometry=void 0)}function Yd(e,t){let n=new e,i=new e,o=new e;return function(r,s,a,c,l,d,h,g){let C=e.fromArray(l,r*t,n),b=e.fromArray(l,s*t,i),w=e.fromArray(l,a*t,o);e.multiplyByScalar(C,c.x,C),e.multiplyByScalar(b,c.y,b),e.multiplyByScalar(w,c.z,w);let R=e.add(C,b,C);e.add(R,w,R),g&&e.normalize(R,R),e.pack(R,d,h*t)}}var FP=Yd(Ie,4),Mu=Yd(y,3),qC=Yd(we,2),VP=function(e,t,n,i,o,r,s){let a=o[e]*i.x,c=o[t]*i.y,l=o[n]*i.z;r[s]=a+c+l>k.EPSILON6?1:0},Da=new y,Hd=new y,jd=new y,UP=new y;function Iu(e,t,n,i,o,r,s,a,c,l,d,h,g,C,b,w){if(!p(r)&&!p(s)&&!p(a)&&!p(c)&&!p(l)&&C===0)return;let R=y.fromArray(o,e*3,Da),D=y.fromArray(o,t*3,Hd),M=y.fromArray(o,n*3,jd),z=bC(i,R,D,M,UP);if(p(z)){if(p(r)&&Mu(e,t,n,z,r,h.normal.values,w,!0),p(l)){let U=y.fromArray(l,e*3,Da),Y=y.fromArray(l,t*3,Hd),m=y.fromArray(l,n*3,jd);y.multiplyByScalar(U,z.x,U),y.multiplyByScalar(Y,z.y,Y),y.multiplyByScalar(m,z.z,m);let Q;!y.equals(U,y.ZERO)||!y.equals(Y,y.ZERO)||!y.equals(m,y.ZERO)?(Q=y.add(U,Y,U),y.add(Q,m,Q),y.normalize(Q,Q)):(Q=Da,Q.x=0,Q.y=0,Q.z=0),y.pack(Q,h.extrudeDirection.values,w*3)}if(p(d)&&VP(e,t,n,z,d,h.applyOffset.values,w),p(s)&&Mu(e,t,n,z,s,h.tangent.values,w,!0),p(a)&&Mu(e,t,n,z,a,h.bitangent.values,w,!0),p(c)&&qC(e,t,n,z,c,h.st.values,w),C>0)for(let U=0;U<C;U++){let Y=g[U];kP(e,t,n,z,w,b[Y],h[Y])}}}function kP(e,t,n,i,o,r,s){let a=r.componentsPerAttribute,c=r.values,l=s.values;switch(a){case 4:FP(e,t,n,i,c,l,o,!1);break;case 3:Mu(e,t,n,i,c,l,o,!1);break;case 2:qC(e,t,n,i,c,l,o,!1);break;default:l[o]=c[e]*i.x+c[t]*i.y+c[n]*i.z}}function qi(e,t,n,i,o,r){let s=e.position.values.length/3;if(o!==-1){let a=i[o],c=n[a];return c===-1?(n[a]=s,e.position.values.push(r.x,r.y,r.z),t.push(s),s):(t.push(c),c)}return e.position.values.push(r.x,r.y,r.z),t.push(s),s}var GP={position:!0,normal:!0,bitangent:!0,tangent:!0,st:!0,extrudeDirection:!0,applyOffset:!0};function kC(e){let t=e.geometry,n=t.attributes,i=n.position.values,o=p(n.normal)?n.normal.values:void 0,r=p(n.bitangent)?n.bitangent.values:void 0,s=p(n.tangent)?n.tangent.values:void 0,a=p(n.st)?n.st.values:void 0,c=p(n.extrudeDirection)?n.extrudeDirection.values:void 0,l=p(n.applyOffset)?n.applyOffset.values:void 0,d=t.indices,h=[];for(let Q in n)n.hasOwnProperty(Q)&&!GP[Q]&&p(n[Q])&&h.push(Q);let g=h.length,C=Rs(t),b=Rs(t),w,R,D,M,z,U=[];U.length=i.length/3;let Y=[];for(Y.length=i.length/3,z=0;z<U.length;++z)U[z]=-1,Y[z]=-1;let m=d.length;for(z=0;z<m;z+=3){let Q=d[z],q=d[z+1],Z=d[z+2],H=y.fromArray(i,Q*3),K=y.fromArray(i,q*3),v=y.fromArray(i,Z*3),S=BP(H,K,v);if(p(S)&&S.positions.length>3){let I=S.positions,F=S.indices,X=F.length;for(let ie=0;ie<X;++ie){let j=F[ie],le=I[j];le.y<0?(w=b.attributes,R=b.indices,D=U):(w=C.attributes,R=C.indices,D=Y),M=qi(w,R,D,d,j<3?z+j:-1,le),Iu(Q,q,Z,le,i,o,s,r,a,c,l,w,h,g,n,M)}}else p(S)&&(H=S.positions[0],K=S.positions[1],v=S.positions[2]),H.y<0?(w=b.attributes,R=b.indices,D=U):(w=C.attributes,R=C.indices,D=Y),M=qi(w,R,D,d,z,H),Iu(Q,q,Z,H,i,o,s,r,a,c,l,w,h,g,n,M),M=qi(w,R,D,d,z+1,K),Iu(Q,q,Z,K,i,o,s,r,a,c,l,w,h,g,n,M),M=qi(w,R,D,d,z+2,v),Iu(Q,q,Z,v,i,o,s,r,a,c,l,w,h,g,n,M)}qd(e,b,C)}var YC=ba.fromPointNormal(y.ZERO,y.UNIT_Y),HP=new y,jP=new y;function As(e,t,n,i,o,r,s){if(!p(s))return;let a=y.fromArray(i,e*3,Da);y.equalsEpsilon(a,n,k.EPSILON10)?r.applyOffset.values[o]=s[e]:r.applyOffset.values[o]=s[t]}function GC(e){let t=e.geometry,n=t.attributes,i=n.position.values,o=p(n.applyOffset)?n.applyOffset.values:void 0,r=t.indices,s=Rs(t),a=Rs(t),c,l=r.length,d=[];d.length=i.length/3;let h=[];for(h.length=i.length/3,c=0;c<d.length;++c)d[c]=-1,h[c]=-1;for(c=0;c<l;c+=2){let g=r[c],C=r[c+1],b=y.fromArray(i,g*3,Da),w=y.fromArray(i,C*3,Hd),R;Math.abs(b.y)<k.EPSILON6&&(b.y<0?b.y=-k.EPSILON6:b.y=k.EPSILON6),Math.abs(w.y)<k.EPSILON6&&(w.y<0?w.y=-k.EPSILON6:w.y=k.EPSILON6);let D=s.attributes,M=s.indices,z=h,U=a.attributes,Y=a.indices,m=d,Q=Ld.lineSegmentPlane(b,w,YC,jd);if(p(Q)){let q=y.multiplyByScalar(y.UNIT_Y,5*k.EPSILON9,HP);b.y<0&&(y.negate(q,q),D=a.attributes,M=a.indices,z=d,U=s.attributes,Y=s.indices,m=h);let Z=y.add(Q,q,jP);R=qi(D,M,z,r,c,b),As(g,C,b,i,R,D,o),R=qi(D,M,z,r,-1,Z),As(g,C,Z,i,R,D,o),y.negate(q,q),y.add(Q,q,Z),R=qi(U,Y,m,r,-1,Z),As(g,C,Z,i,R,U,o),R=qi(U,Y,m,r,c+1,w),As(g,C,w,i,R,U,o)}else{let q,Z,H;b.y<0?(q=a.attributes,Z=a.indices,H=d):(q=s.attributes,Z=s.indices,H=h),R=qi(q,Z,H,r,c,b),As(g,C,b,i,R,q,o),R=qi(q,Z,H,r,c+1,w),As(g,C,w,i,R,q,o)}}qd(e,a,s)}var HC=new we,WP=new we,ZC=new y,XC=new y,Wd=new y,qP=new y,YP=new y,ZP=new y,jC=new Ie;function WC(e){let t=e.attributes,n=t.position.values,i=t.prevPosition.values,o=t.nextPosition.values,r=n.length;for(let s=0;s<r;s+=3){let a=y.unpack(n,s,ZC);if(a.x>0)continue;let c=y.unpack(i,s,XC);(a.y<0&&c.y>0||a.y>0&&c.y<0)&&(s-3>0?(i[s]=n[s-3],i[s+1]=n[s-2],i[s+2]=n[s-1]):y.pack(a,i,s));let l=y.unpack(o,s,Wd);(a.y<0&&l.y>0||a.y>0&&l.y<0)&&(s+3<r?(o[s]=n[s+3],o[s+1]=n[s+4],o[s+2]=n[s+5]):y.pack(a,o,s))}}var XP=5*k.EPSILON9,Du=k.EPSILON6;function $P(e){let t=e.geometry,n=t.attributes,i=n.position.values,o=n.prevPosition.values,r=n.nextPosition.values,s=n.expandAndWidth.values,a=p(n.st)?n.st.values:void 0,c=p(n.color)?n.color.values:void 0,l=Rs(t),d=Rs(t),h,g,C,b=!1,w=i.length/3;for(h=0;h<w;h+=4){let R=h,D=h+2,M=y.fromArray(i,R*3,ZC),z=y.fromArray(i,D*3,XC);if(Math.abs(M.y)<Du)for(M.y=Du*(z.y<0?-1:1),i[h*3+1]=M.y,i[(h+1)*3+1]=M.y,g=R*3;g<R*3+4*3;g+=3)o[g]=i[h*3],o[g+1]=i[h*3+1],o[g+2]=i[h*3+2];if(Math.abs(z.y)<Du)for(z.y=Du*(M.y<0?-1:1),i[(h+2)*3+1]=z.y,i[(h+3)*3+1]=z.y,g=R*3;g<R*3+4*3;g+=3)r[g]=i[(h+2)*3],r[g+1]=i[(h+2)*3+1],r[g+2]=i[(h+2)*3+2];let U=l.attributes,Y=l.indices,m=d.attributes,Q=d.indices,q=Ld.lineSegmentPlane(M,z,YC,qP);if(p(q)){b=!0;let Z=y.multiplyByScalar(y.UNIT_Y,XP,YP);M.y<0&&(y.negate(Z,Z),U=d.attributes,Y=d.indices,m=l.attributes,Q=l.indices);let H=y.add(q,Z,ZP);U.position.values.push(M.x,M.y,M.z,M.x,M.y,M.z),U.position.values.push(H.x,H.y,H.z),U.position.values.push(H.x,H.y,H.z),U.prevPosition.values.push(o[R*3],o[R*3+1],o[R*3+2]),U.prevPosition.values.push(o[R*3+3],o[R*3+4],o[R*3+5]),U.prevPosition.values.push(M.x,M.y,M.z,M.x,M.y,M.z),U.nextPosition.values.push(H.x,H.y,H.z),U.nextPosition.values.push(H.x,H.y,H.z),U.nextPosition.values.push(H.x,H.y,H.z),U.nextPosition.values.push(H.x,H.y,H.z),y.negate(Z,Z),y.add(q,Z,H),m.position.values.push(H.x,H.y,H.z),m.position.values.push(H.x,H.y,H.z),m.position.values.push(z.x,z.y,z.z,z.x,z.y,z.z),m.prevPosition.values.push(H.x,H.y,H.z),m.prevPosition.values.push(H.x,H.y,H.z),m.prevPosition.values.push(H.x,H.y,H.z),m.prevPosition.values.push(H.x,H.y,H.z),m.nextPosition.values.push(z.x,z.y,z.z,z.x,z.y,z.z),m.nextPosition.values.push(r[D*3],r[D*3+1],r[D*3+2]),m.nextPosition.values.push(r[D*3+3],r[D*3+4],r[D*3+5]);let K=we.fromArray(s,R*2,HC),v=Math.abs(K.y);U.expandAndWidth.values.push(-1,v,1,v),U.expandAndWidth.values.push(-1,-v,1,-v),m.expandAndWidth.values.push(-1,v,1,v),m.expandAndWidth.values.push(-1,-v,1,-v);let S=y.magnitudeSquared(y.subtract(q,M,Wd));if(S/=y.magnitudeSquared(y.subtract(z,M,Wd)),p(c)){let I=Ie.fromArray(c,R*4,jC),F=Ie.fromArray(c,D*4,jC),X=k.lerp(I.x,F.x,S),ie=k.lerp(I.y,F.y,S),j=k.lerp(I.z,F.z,S),le=k.lerp(I.w,F.w,S);for(g=R*4;g<R*4+2*4;++g)U.color.values.push(c[g]);for(U.color.values.push(X,ie,j,le),U.color.values.push(X,ie,j,le),m.color.values.push(X,ie,j,le),m.color.values.push(X,ie,j,le),g=D*4;g<D*4+2*4;++g)m.color.values.push(c[g])}if(p(a)){let I=we.fromArray(a,R*2,HC),F=we.fromArray(a,(h+3)*2,WP),X=k.lerp(I.x,F.x,S);for(g=R*2;g<R*2+2*2;++g)U.st.values.push(a[g]);for(U.st.values.push(X,I.y),U.st.values.push(X,F.y),m.st.values.push(X,I.y),m.st.values.push(X,F.y),g=D*2;g<D*2+2*2;++g)m.st.values.push(a[g])}C=U.position.values.length/3-4,Y.push(C,C+2,C+1),Y.push(C+1,C+2,C+3),C=m.position.values.length/3-4,Q.push(C,C+2,C+1),Q.push(C+1,C+2,C+3)}else{let Z,H;for(M.y<0?(Z=d.attributes,H=d.indices):(Z=l.attributes,H=l.indices),Z.position.values.push(M.x,M.y,M.z),Z.position.values.push(M.x,M.y,M.z),Z.position.values.push(z.x,z.y,z.z),Z.position.values.push(z.x,z.y,z.z),g=h*3;g<h*3+4*3;++g)Z.prevPosition.values.push(o[g]),Z.nextPosition.values.push(r[g]);for(g=h*2;g<h*2+4*2;++g)Z.expandAndWidth.values.push(s[g]),p(a)&&Z.st.values.push(a[g]);if(p(c))for(g=h*4;g<h*4+4*4;++g)Z.color.values.push(c[g]);C=Z.position.values.length/3-4,H.push(C,C+2,C+1),H.push(C+1,C+2,C+3)}}b&&(WC(d),WC(l)),qd(e,d,l)}Mn.splitLongitude=function(e){let t=e.geometry,n=t.boundingSphere;if(p(n)&&(n.center.x-n.radius>0||Ve.intersectPlane(n,ba.ORIGIN_ZX_PLANE)!==_i.INTERSECTING))return e;if(t.geometryType!==fr.NONE)switch(t.geometryType){case fr.POLYLINES:$P(e);break;case fr.TRIANGLES:kC(e);break;case fr.LINES:GC(e);break}else NP(t),t.primitiveType===vt.TRIANGLES?kC(e):t.primitiveType===vt.LINES&&GC(e);return e};var pn=Mn;function Ma(e,t,n){e=E(e,0),t=E(t,0),n=E(n,0),this.value=new Float32Array([e,t,n])}Object.defineProperties(Ma.prototype,{componentDatatype:{get:function(){return Pe.FLOAT}},componentsPerAttribute:{get:function(){return 3}},normalize:{get:function(){return!1}}});Ma.fromCartesian3=function(e){return new Ma(e.x,e.y,e.z)};Ma.toValue=function(e,t){return p(t)||(t=new Float32Array([e.x,e.y,e.z])),t[0]=e.x,t[1]=e.y,t[2]=e.z,t};var $C=Ma;function jn(e){this._ellipsoid=E(e,Dn.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(jn.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});jn.mercatorAngleToGeodeticLatitude=function(e){return k.PI_OVER_TWO-2*Math.atan(Math.exp(-e))};jn.geodeticLatitudeToMercatorAngle=function(e){e>jn.MaximumLatitude?e=jn.MaximumLatitude:e<-jn.MaximumLatitude&&(e=-jn.MaximumLatitude);let t=Math.sin(e);return .5*Math.log((1+t)/(1-t))};jn.MaximumLatitude=jn.mercatorAngleToGeodeticLatitude(Math.PI);jn.prototype.project=function(e,t){let n=this._semimajorAxis,i=e.longitude*n,o=jn.geodeticLatitudeToMercatorAngle(e.latitude)*n,r=e.height;return p(t)?(t.x=i,t.y=o,t.z=r,t):new y(i,o,r)};jn.prototype.unproject=function(e,t){let n=this._oneOverSemimajorAxis,i=e.x*n,o=jn.mercatorAngleToGeodeticLatitude(e.y*n),r=e.z;return p(t)?(t.longitude=i,t.latitude=o,t.height=r,t):new rt(i,o,r)};var KC=jn;function KP(e,t,n){let i=!n,o=e.length,r;if(!i&&o>1){let s=e[0].modelMatrix;for(r=1;r<o;++r)if(!pe.equals(s,e[r].modelMatrix)){i=!0;break}}if(i)for(r=0;r<o;++r)p(e[r].geometry)&&pn.transformToWorldCoordinates(e[r]);else pe.multiplyTransformation(t,e[0].modelMatrix,t)}function Zd(e,t){let n=e.attributes,i=n.position,o=i.values.length/i.componentsPerAttribute;n.batchId=new It({componentDatatype:Pe.FLOAT,componentsPerAttribute:1,values:new Float32Array(o)});let r=n.batchId.values;for(let s=0;s<o;++s)r[s]=t}function QP(e){let t=e.length;for(let n=0;n<t;++n){let i=e[n];p(i.geometry)?Zd(i.geometry,n):p(i.westHemisphereGeometry)&&p(i.eastHemisphereGeometry)&&(Zd(i.westHemisphereGeometry,n),Zd(i.eastHemisphereGeometry,n))}}function JP(e){let t=e.instances,n=e.projection,i=e.elementIndexUintSupported,o=e.scene3DOnly,r=e.vertexCacheOptimize,s=e.compressVertices,a=e.modelMatrix,c,l,d,h=t.length;for(c=0;c<h;++c)if(p(t[c].geometry)){d=t[c].geometry.primitiveType;break}if(KP(t,a,o),!o)for(c=0;c<h;++c)p(t[c].geometry)&&pn.splitLongitude(t[c]);if(QP(t),r)for(c=0;c<h;++c){let C=t[c];p(C.geometry)?(pn.reorderForPostVertexCache(C.geometry),pn.reorderForPreVertexCache(C.geometry)):p(C.westHemisphereGeometry)&&p(C.eastHemisphereGeometry)&&(pn.reorderForPostVertexCache(C.westHemisphereGeometry),pn.reorderForPreVertexCache(C.westHemisphereGeometry),pn.reorderForPostVertexCache(C.eastHemisphereGeometry),pn.reorderForPreVertexCache(C.eastHemisphereGeometry))}let g=pn.combineInstances(t);for(h=g.length,c=0;c<h;++c){l=g[c];let C=l.attributes;if(o)for(let b in C)C.hasOwnProperty(b)&&C[b].componentDatatype===Pe.DOUBLE&&pn.encodeAttribute(l,b,`${b}3DHigh`,`${b}3DLow`);else for(let b in C)if(C.hasOwnProperty(b)&&C[b].componentDatatype===Pe.DOUBLE){let w=`${b}3D`,R=`${b}2D`;pn.projectTo2D(l,b,w,R,n),p(l.boundingSphere)&&b==="position"&&(l.boundingSphereCV=Ve.fromVertices(l.attributes.position2D.values)),pn.encodeAttribute(l,w,`${w}High`,`${w}Low`),pn.encodeAttribute(l,R,`${R}High`,`${R}Low`)}s&&pn.compressVertices(l)}if(!i){let C=[];for(h=g.length,c=0;c<h;++c)l=g[c],C=C.concat(pn.fitToUnsignedShortIndices(l));g=C}return g}function Xd(e,t,n,i){let o,r,s,a=i.length-1;if(a>=0){let l=i[a];o=l.offset+l.count,s=l.index,r=n[s].indices.length}else o=0,s=0,r=n[s].indices.length;let c=e.length;for(let l=0;l<c;++l){let h=e[l][t];if(!p(h))continue;let g=h.indices.length;o+g>r&&(o=0,r=n[++s].indices.length),i.push({index:s,offset:o,count:g}),o+=g}}function eO(e,t){let n=[];return Xd(e,"geometry",t,n),Xd(e,"westHemisphereGeometry",t,n),Xd(e,"eastHemisphereGeometry",t,n),n}var mo={};mo.combineGeometry=function(e){let t,n,i=e.instances,o=i.length,r,s,a=!1;o>0&&(t=JP(e),t.length>0&&(n=pn.createAttributeLocations(t[0]),e.createPickOffsets&&(r=eO(i,t))),p(i[0].attributes)&&p(i[0].attributes.offset)&&(s=new Array(o),a=!0));let c=new Array(o),l=new Array(o);for(let d=0;d<o;++d){let h=i[d],g=h.geometry;p(g)&&(c[d]=g.boundingSphere,l[d]=g.boundingSphereCV,a&&(s[d]=h.geometry.offsetAttribute));let C=h.eastHemisphereGeometry,b=h.westHemisphereGeometry;p(C)&&p(b)&&(p(C.boundingSphere)&&p(b.boundingSphere)&&(c[d]=Ve.union(C.boundingSphere,b.boundingSphere)),p(C.boundingSphereCV)&&p(b.boundingSphereCV)&&(l[d]=Ve.union(C.boundingSphereCV,b.boundingSphereCV)))}return{geometries:t,modelMatrix:e.modelMatrix,attributeLocations:n,pickOffsets:r,offsetInstanceExtend:s,boundingSpheres:c,boundingSpheresCV:l}};function tO(e,t){let n=e.attributes;for(let i in n)if(n.hasOwnProperty(i)){let o=n[i];p(o)&&p(o.values)&&t.push(o.values.buffer)}p(e.indices)&&t.push(e.indices.buffer)}function nO(e,t){let n=e.length;for(let i=0;i<n;++i)tO(e[i],t)}function iO(e){let t=1,n=e.length;for(let i=0;i<n;i++){let o=e[i];if(++t,!p(o))continue;let r=o.attributes;t+=7+2*Ve.packedLength+(p(o.indices)?o.indices.length:0);for(let s in r)if(r.hasOwnProperty(s)&&p(r[s])){let a=r[s];t+=5+a.values.length}}return t}mo.packCreateGeometryResults=function(e,t){let n=new Float64Array(iO(e)),i=[],o={},r=e.length,s=0;n[s++]=r;for(let a=0;a<r;a++){let c=e[a],l=p(c);if(n[s++]=l?1:0,!l)continue;n[s++]=c.primitiveType,n[s++]=c.geometryType,n[s++]=E(c.offsetAttribute,-1);let d=p(c.boundingSphere)?1:0;n[s++]=d,d&&Ve.pack(c.boundingSphere,n,s),s+=Ve.packedLength;let h=p(c.boundingSphereCV)?1:0;n[s++]=h,h&&Ve.pack(c.boundingSphereCV,n,s),s+=Ve.packedLength;let g=c.attributes,C=[];for(let w in g)g.hasOwnProperty(w)&&p(g[w])&&(C.push(w),p(o[w])||(o[w]=i.length,i.push(w)));n[s++]=C.length;for(let w=0;w<C.length;w++){let R=C[w],D=g[R];n[s++]=o[R],n[s++]=D.componentDatatype,n[s++]=D.componentsPerAttribute,n[s++]=D.normalize?1:0,n[s++]=D.values.length,n.set(D.values,s),s+=D.values.length}let b=p(c.indices)?c.indices.length:0;n[s++]=b,b>0&&(n.set(c.indices,s),s+=b)}return t.push(n.buffer),{stringTable:i,packedData:n}};mo.unpackCreateGeometryResults=function(e){let t=e.stringTable,n=e.packedData,i,o=new Array(n[0]),r=0,s=1;for(;s<n.length;){if(!(n[s++]===1)){o[r++]=void 0;continue}let c=n[s++],l=n[s++],d=n[s++];d===-1&&(d=void 0);let h,g;n[s++]===1&&(h=Ve.unpack(n,s)),s+=Ve.packedLength,n[s++]===1&&(g=Ve.unpack(n,s)),s+=Ve.packedLength;let w,R,D,M=new bs,z=n[s++];for(i=0;i<z;i++){let Y=t[n[s++]],m=n[s++];D=n[s++];let Q=n[s++]!==0;w=n[s++],R=Pe.createTypedArray(m,w);for(let q=0;q<w;q++)R[q]=n[s++];M[Y]=new It({componentDatatype:m,componentsPerAttribute:D,normalize:Q,values:R})}let U;if(w=n[s++],w>0){let Y=R.length/D;for(U=jt.createTypedArray(Y,w),i=0;i<w;i++)U[i]=n[s++]}o[r++]=new Rt({primitiveType:c,geometryType:l,boundingSphere:h,boundingSphereCV:g,indices:U,attributes:M,offsetAttribute:d})}return o};function oO(e,t){let n=e.length,i=new Float64Array(1+n*19),o=0;i[o++]=n;for(let r=0;r<n;r++){let s=e[r];if(pe.pack(s.modelMatrix,i,o),o+=pe.packedLength,p(s.attributes)&&p(s.attributes.offset)){let a=s.attributes.offset.value;i[o]=a[0],i[o+1]=a[1],i[o+2]=a[2]}o+=3}return t.push(i.buffer),i}function rO(e){let t=e,n=new Array(t[0]),i=0,o=1;for(;o<t.length;){let r=pe.unpack(t,o),s;o+=pe.packedLength,p(t[o])&&(s={offset:new $C(t[o],t[o+1],t[o+2])}),o+=3,n[i++]={modelMatrix:r,attributes:s}}return n}mo.packCombineGeometryParameters=function(e,t){let n=e.createGeometryResults,i=n.length;for(let o=0;o<i;o++)t.push(n[o].packedData.buffer);return{createGeometryResults:e.createGeometryResults,packedInstances:oO(e.instances,t),ellipsoid:e.ellipsoid,isGeographic:e.projection instanceof Li,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e.createPickOffsets}};mo.unpackCombineGeometryParameters=function(e){let t=rO(e.packedInstances),n=e.createGeometryResults,i=n.length,o=0;for(let a=0;a<i;a++){let c=mo.unpackCreateGeometryResults(n[a]),l=c.length;for(let d=0;d<l;d++){let h=c[d],g=t[o];g.geometry=h,++o}}let r=Dn.clone(e.ellipsoid),s=e.isGeographic?new Li(r):new KC(r);return{instances:t,ellipsoid:r,projection:s,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:pe.clone(e.modelMatrix),createPickOffsets:e.createPickOffsets}};function QC(e){let t=e.length,n=1+(Ve.packedLength+1)*t,i=new Float32Array(n),o=0;i[o++]=t;for(let r=0;r<t;++r){let s=e[r];p(s)?(i[o++]=1,Ve.pack(e[r],i,o)):i[o++]=0,o+=Ve.packedLength}return i}function JC(e){let t=new Array(e[0]),n=0,i=1;for(;i<e.length;)e[i++]===1&&(t[n]=Ve.unpack(e,i)),++n,i+=Ve.packedLength;return t}mo.packCombineGeometryResults=function(e,t){p(e.geometries)&&nO(e.geometries,t);let n=QC(e.boundingSpheres),i=QC(e.boundingSpheresCV);return t.push(n.buffer,i.buffer),{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:n,boundingSpheresCV:i}};mo.unpackCombineGeometryResults=function(e){return{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:JC(e.boundingSpheres),boundingSpheresCV:JC(e.boundingSpheresCV)}};var Nu=mo;var sO={READY:0,CREATING:1,CREATED:2,COMBINING:3,COMBINED:4,COMPLETE:5,FAILED:6},qt=Object.freeze(sO);var Lu={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3};Lu.getMorphTime=function(e){return e===Lu.SCENE3D?1:e===Lu.MORPHING?void 0:0};var za=Object.freeze(Lu);var Zn={DISABLED:0,ENABLED:1,CAST_ONLY:2,RECEIVE_ONLY:3};Zn.NUMBER_OF_SHADOW_MODES=4;Zn.castShadows=function(e){return e===Zn.ENABLED||e===Zn.CAST_ONLY};Zn.receiveShadows=function(e){return e===Zn.ENABLED||e===Zn.RECEIVE_ONLY};Zn.fromCastReceive=function(e,t){return e&&t?Zn.ENABLED:e?Zn.CAST_ONLY:t?Zn.RECEIVE_ONLY:Zn.DISABLED};var Bu=Object.freeze(Zn);function Bt(e){e=E(e,E.EMPTY_OBJECT),this.geometryInstances=e.geometryInstances,this._evColor=Tt.WHITE,this.batchTableEvColorUpdated=!1,this.owner=e.owner,this.appearance=e.appearance,this._appearance=void 0,this._material=void 0,this.depthFailAppearance=e.depthFailAppearance,this._depthFailAppearance=void 0,this._depthFailMaterial=void 0,this.modelMatrix=pe.clone(E(e.modelMatrix,pe.IDENTITY)),this._modelMatrix=new pe,this.show=E(e.show,!0),this._vertexCacheOptimize=E(e.vertexCacheOptimize,!1),this._interleave=E(e.interleave,!1),this._releaseGeometryInstances=E(e.releaseGeometryInstances,!0),this._allowPicking=E(e.allowPicking,!0),this._asynchronous=E(e.asynchronous,!0),this._compressVertices=E(e.compressVertices,!0),this._noAllowOffScreen=E(e.noAllowOffScreen,!1),this.cull=E(e.cull,!0),this.debugShowBoundingVolume=E(e.debugShowBoundingVolume,!1),this.rtcCenter=e.rtcCenter,this.shadows=E(e.shadows,Bu.DISABLED),this._translucent=void 0,this._state=qt.READY,this._geometries=[],this._error=void 0,this._numberOfInstances=0,this._boundingSpheres=[],this._boundingSphereWC=[],this._boundingSphereCV=[],this._boundingSphere2D=[],this._boundingSphereMorph=[],this._perInstanceAttributeCache=new Map,this._instanceIds=[],this._lastPerInstanceAttributeIndex=0,this._va=[],this._attributeLocations=void 0,this._primitiveType=void 0,this._frontFaceRS=void 0,this._backFaceRS=void 0,this._sp=void 0,this._depthFailAppearance=void 0,this._spDepthFail=void 0,this._frontFaceDepthFailRS=void 0,this._backFaceDepthFailRS=void 0,this._pickIds=[],this._colorCommands=[],this._pickCommands=[],this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._createRenderStatesFunction=e._createRenderStatesFunction,this._createShaderProgramFunction=e._createShaderProgramFunction,this._createCommandsFunction=e._createCommandsFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._createPickOffsets=e._createPickOffsets,this._pickOffsets=void 0,this._createGeometryResults=void 0,this._ready=!1;let t=this;this._readyPromise=new Promise((n,i)=>{t._completeLoad=(o,r,s)=>{this._error=s,this._state=r,o.afterRender.push(function(){if(t._ready=t._state===qt.COMPLETE||t._state===qt.FAILED,!p(s))return n(t),!0;i(s)})}}),this._batchTable=void 0,this._batchTableAttributeIndices=void 0,this._offsetInstanceExtend=void 0,this._batchTableOffsetAttribute2DIndex=void 0,this._batchTableOffsetsUpdated=!1,this._instanceBoundingSpheres=void 0,this._instanceBoundingSpheresCV=void 0,this._tempBoundingSpheres=void 0,this._recomputeBoundingSpheres=!1,this._batchTableBoundingSpheresUpdated=!1,this._batchTableBoundingSphereAttributeIndices=void 0}Object.defineProperties(Bt.prototype,{vertexCacheOptimize:{get:function(){return this._vertexCacheOptimize}},interleave:{get:function(){return this._interleave}},releaseGeometryInstances:{get:function(){return this._releaseGeometryInstances}},allowPicking:{get:function(){return this._allowPicking}},asynchronous:{get:function(){return this._asynchronous}},compressVertices:{get:function(){return this._compressVertices}},noAllowOffScreen:{get:function(){return this._noAllowOffScreen}},evColor:{get:function(){return this._evColor},set:function(e){e instanceof Tt&&!Tt.equals(e,this._evColor)&&(this._evColor=e,this.batchTableEvColorUpdated=!0)}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return I0("Primitive.readyPromise","Primitive.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Primitive.ready to return true instead."),this._readyPromise}},pickIds:{get:function(){return this._pickIds}}});function aO(e){let t=e.length,n=[],i=e[0].attributes,o;for(o in i)if(i.hasOwnProperty(o)&&p(i[o])){let r=i[o],s=!0;for(let a=1;a<t;++a){let c=e[a].attributes[o];if(!p(c)||r.componentDatatype!==c.componentDatatype||r.componentsPerAttribute!==c.componentsPerAttribute||r.normalize!==c.normalize){s=!1;break}}s&&n.push(o)}return n}var cO=new we,uO=new y,cb=new Ie;function ub(e){let t=e.length;if(t===1)return e[0];if(t===2)return we.unpack(e,0,cO);if(t===3)return y.unpack(e,0,uO);if(t===4)return Ie.unpack(e,0,cb)}function lO(e,t){let n=e.geometryInstances,i=Array.isArray(n)?n:[n],o=i.length;if(o===0)return;let r=aO(i),s=r.length,a=[],c={},l={},d,g=i[0].attributes,C,b,w;for(C=0;C<s;++C)b=r[C],w=g[b],c[b]=C,a.push({functionName:`czm_batchTable_${b}`,componentDatatype:w.componentDatatype,componentsPerAttribute:w.componentsPerAttribute,normalize:w.normalize});r.indexOf("distanceDisplayCondition")!==-1&&(a.push({functionName:"czm_batchTable_boundingSphereCenter3DHigh",componentDatatype:Pe.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter3DLow",componentDatatype:Pe.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DHigh",componentDatatype:Pe.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DLow",componentDatatype:Pe.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereRadius",componentDatatype:Pe.FLOAT,componentsPerAttribute:1}),l.center3DHigh=a.length-5,l.center3DLow=a.length-4,l.center2DHigh=a.length-3,l.center2DLow=a.length-2,l.radius=a.length-1),r.indexOf("offset")!==-1&&(a.push({functionName:"czm_batchTable_offset2D",componentDatatype:Pe.FLOAT,componentsPerAttribute:3}),d=a.length-1),a.push({functionName:"czm_batchTable_pickColor",componentDatatype:Pe.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0});let R=a.length,D=new dC(t,a,o);for(C=0;C<o;++C){let M=i[C];g=M.attributes;for(let Q=0;Q<s;++Q){b=r[Q],w=g[b];let q=ub(w.value),Z=c[b];D.setBatchedAttribute(C,Z,q)}let z={primitive:E(M.pickPrimitive,e)};p(M.id)&&(z.id=M.id);let U=t.createPickId(z);e._pickIds.push(U);let Y=U.color,m=cb;m.x=Tt.floatToByte(Y.red),m.y=Tt.floatToByte(Y.green),m.z=Tt.floatToByte(Y.blue),m.w=Tt.floatToByte(Y.alpha),D.setBatchedAttribute(C,R-1,m)}e._batchTable=D,e._batchTableAttributeIndices=c,e._batchTableBoundingSphereAttributeIndices=l,e._batchTableOffsetAttribute2DIndex=d}function fO(e){let t;return Array.isArray(e.values)?t=e.values.slice(0):t=new e.values.constructor(e.values),new It({componentDatatype:e.componentDatatype,componentsPerAttribute:e.componentsPerAttribute,normalize:e.normalize,values:t})}function dO(e){let t=e.attributes,n=new bs;for(let o in t)t.hasOwnProperty(o)&&p(t[o])&&(n[o]=fO(t[o]));let i;if(p(e.indices)){let o=e.indices;Array.isArray(o)?i=o.slice(0):i=new o.constructor(o)}return new Rt({attributes:n,indices:i,primitiveType:e.primitiveType,boundingSphere:Ve.clone(e.boundingSphere)})}function hO(e,t){return{geometry:t,attributes:e.attributes,modelMatrix:pe.clone(e.modelMatrix),pickPrimitive:e.pickPrimitive,id:e.id}}var pO=/in\s+vec(?:3|4)\s+(.*)3DHigh;/g;Bt._modifyShaderPosition=function(e,t,n){let i,o="",r="",s="";for(;(i=pO.exec(t))!==null;){let a=i[1],c=`vec4 czm_compute${a[0].toUpperCase()}${a.substr(1)}()`;c!=="vec4 czm_computePosition()"&&(o+=`${c};
`),p(e.rtcCenter)?(t=t.replace(/in\s+vec(?:3|4)\s+position3DHigh;/g,""),t=t.replace(/in\s+vec(?:3|4)\s+position3DLow;/g,""),o+=`uniform mat4 u_modifiedModelView;
`,r+=`in vec4 position;
`,s+=`${c}
{
    return u_modifiedModelView * position;
}

`,t=t.replace(/czm_modelViewRelativeToEye\s+\*\s+/g,""),t=t.replace(/czm_modelViewProjectionRelativeToEye/g,"czm_projection")):n?s+=`${c}
{
    return czm_translateRelativeToEye(${a}3DHigh, ${a}3DLow);
}

`:(r+=`in vec3 ${a}2DHigh;
in vec3 ${a}2DLow;
`,s+=`${c}
{
    vec4 p;
    if (czm_morphTime == 1.0)
    {
        p = czm_translateRelativeToEye(${a}3DHigh, ${a}3DLow);
    }
    else if (czm_morphTime == 0.0)
    {
        p = czm_translateRelativeToEye(${a}2DHigh.zxy, ${a}2DLow.zxy);
    }
    else
    {
        p = czm_columbusViewMorph(
                czm_translateRelativeToEye(${a}2DHigh.zxy, ${a}2DLow.zxy),
                czm_translateRelativeToEye(${a}3DHigh, ${a}3DLow),
                czm_morphTime);
    }
    return p;
}

`)}return[o,r,t,s].join(`
`)};Bt._appendShowToShader=function(e,t){return p(e._batchTableAttributeIndices.show)?`${vr.replaceMain(t,"czm_non_show_main")}
void main() 
{ 
    czm_non_show_main(); 
    gl_Position *= czm_batchTable_show(batchId); 
}`:t};Bt._updateColorAttribute=function(e,t,n){if(!p(e._batchTableAttributeIndices.color)&&!p(e._batchTableAttributeIndices.depthFailColor)||t.search(/in\s+vec4\s+color;/g)===-1)return t;let i=t;return i=i.replace(/in\s+vec4\s+color;/g,""),n?i=i.replace(/(\b)color(\b)/g,"$1czm_batchTable_depthFailColor(batchId)$2"):i=i.replace(/(\b)color(\b)/g,"$1czm_batchTable_color(batchId)$2"),i};function mO(e,t){return p(e._batchTableAttributeIndices.evColor)&&(t=t.replace("ev_pickColor = vec4(1.0);","ev_pickColor= czm_batchTable_evColor(batchId);")),t}function eb(e){return`${vr.replaceMain(e,"czm_non_pick_main")}
out vec4 v_pickColor; 
out vec4 ev_pickColor; 
void main() 
{ 
    czm_non_pick_main(); 
    v_pickColor = czm_batchTable_pickColor(batchId); 
    ev_pickColor = vec4(1.0); 
}`}function tb(e){return`in vec4 v_pickColor;
${e}`}Bt._updatePickColorAttribute=function(e){let t=e.replace(/in\s+vec4\s+pickColor;/g,"");return t=t.replace(/(\b)pickColor(\b)/g,"$1czm_batchTable_pickColor(batchId)$2"),t};Bt._appendOffsetToShader=function(e,t){if(!p(e._batchTableAttributeIndices.offset))return t;let n=`in float batchId;
`;n+="in float applyOffset;";let i=t.replace(/in\s+float\s+batchId;/g,n),o=`vec4 $1 = czm_computePosition();
`;return o+=`    if (czm_sceneMode == czm_sceneMode3D)
`,o+=`    {
`,o+="        $1 = $1 + vec4(czm_batchTable_offset(batchId) * applyOffset, 0.0);",o+=`    }
`,o+=`    else
`,o+=`    {
`,o+="        $1 = $1 + vec4(czm_batchTable_offset2D(batchId) * applyOffset, 0.0);",o+=`    }
`,i=i.replace(/vec4\s+([A-Za-z0-9_]+)\s+=\s+czm_computePosition\(\);/g,o),i};Bt._appendDistanceDisplayConditionToShader=function(e,t,n){if(!p(e._batchTableAttributeIndices.distanceDisplayCondition))return t;let i=vr.replaceMain(t,"czm_non_distanceDisplayCondition_main"),o=`void main() 
{ 
    czm_non_distanceDisplayCondition_main(); 
    vec2 distanceDisplayCondition = czm_batchTable_distanceDisplayCondition(batchId);
    vec3 boundingSphereCenter3DHigh = czm_batchTable_boundingSphereCenter3DHigh(batchId);
    vec3 boundingSphereCenter3DLow = czm_batchTable_boundingSphereCenter3DLow(batchId);
    float boundingSphereRadius = czm_batchTable_boundingSphereRadius(batchId);
`;return n?o+=`    vec4 centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);
`:o+=`    vec3 boundingSphereCenter2DHigh = czm_batchTable_boundingSphereCenter2DHigh(batchId);
    vec3 boundingSphereCenter2DLow = czm_batchTable_boundingSphereCenter2DLow(batchId);
    vec4 centerRTE;
    if (czm_morphTime == 1.0)
    {
        centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);
    }
    else if (czm_morphTime == 0.0)
    {
        centerRTE = czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy);
    }
    else
    {
        centerRTE = czm_columbusViewMorph(
                czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy),
                czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow),
                czm_morphTime);
    }
`,o+=`    float radiusSq = boundingSphereRadius * boundingSphereRadius; 
    float distanceSq; 
    if (czm_sceneMode == czm_sceneMode2D) 
    { 
        distanceSq = czm_eyeHeight2D.y - radiusSq; 
    } 
    else 
    { 
        distanceSq = dot(centerRTE.xyz, centerRTE.xyz) - radiusSq; 
    } 
    distanceSq = max(distanceSq, 0.0); 
    float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x; 
    float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y; 
    float show = (distanceSq >= nearSq && distanceSq <= farSq) ? 1.0 : 0.0; 
    gl_Position *= show; 
}`,`${i}
${o}`};function nb(e,t){if(!e.compressVertices)return t;let n=t.search(/in\s+vec3\s+normal;/g)!==-1,i=t.search(/in\s+vec2\s+st;/g)!==-1;if(!n&&!i)return t;let o=t.search(/in\s+vec3\s+tangent;/g)!==-1,r=t.search(/in\s+vec3\s+bitangent;/g)!==-1,s=i&&n?2:1;s+=o||r?1:0;let a=s>1?`vec${s}`:"float",c="compressedAttributes",l=`in ${a} ${c};`,d="",h="";if(i){d+=`vec2 st;
`;let b=s>1?`${c}.x`:c;h+=`    st = czm_decompressTextureCoordinates(${b});
`}n&&o&&r?(d+=`vec3 normal;
vec3 tangent;
vec3 bitangent;
`,h+=`    czm_octDecode(${c}.${i?"yz":"xy"}, normal, tangent, bitangent);
`):(n&&(d+=`vec3 normal;
`,h+=`    normal = czm_octDecode(${c}${s>1?`.${i?"y":"x"}`:""});
`),o&&(d+=`vec3 tangent;
`,h+=`    tangent = czm_octDecode(${c}.${i&&n?"z":"y"});
`),r&&(d+=`vec3 bitangent;
`,h+=`    bitangent = czm_octDecode(${c}.${i&&n?"z":"y"});
`));let g=t;g=g.replace(/in\s+vec3\s+normal;/g,""),g=g.replace(/in\s+vec2\s+st;/g,""),g=g.replace(/in\s+vec3\s+tangent;/g,""),g=g.replace(/in\s+vec3\s+bitangent;/g,""),g=vr.replaceMain(g,"czm_non_compressed_main");let C=`void main() 
{ 
${h}    czm_non_compressed_main(); 
}`;return[l,d,g,C].join(`
`)}function gO(e){let t=vr.replaceMain(e,"czm_non_depth_clamp_main");return t+=`void main() {
    czm_non_depth_clamp_main();
    gl_Position = czm_depthClamp(gl_Position);}
`,t}function yO(e){let t=vr.replaceMain(e,"czm_non_depth_clamp_main");return t+=`void main() {
    czm_non_depth_clamp_main();
#if defined(GL_EXT_frag_depth)
    #if defined(LOG_DEPTH)
        czm_writeLogDepth();
    #else
        czm_writeDepthClamp();
    #endif
#endif
}
`,t=`#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
#endif
${t}`,t}function ib(e,t){let n=e.vertexAttributes}function _O(e,t){return function(){return e[t]}}var $d=Math.max(yi.hardwareConcurrency-1,1),Fu,vO=new Ed("combineGeometry");function CO(e,t){let n,i,o,r,s=e._instanceIds;if(e._state===qt.READY){n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];let a=e._numberOfInstances=n.length,c=[],l=[];for(o=0;o<a;++o)i=n[o].geometry,s.push(n[o].id),l.push({moduleName:i._workerName,geometry:i});if(!p(Fu))for(Fu=new Array($d),o=0;o<$d;o++)Fu[o]=new Ed("createGeometry");let d;for(l=zg(l,$d),o=0;o<l.length;o++){let h=0,g=l[o],C=g.length;for(r=0;r<C;++r)d=g[r],i=d.geometry,p(i.constructor.pack)&&(d.offset=h,h+=E(i.constructor.packedLength,i.packedLength));let b;if(h>0){let w=new Float64Array(h);for(b=[w.buffer],r=0;r<C;++r)d=g[r],i=d.geometry,p(i.constructor.pack)&&(i.constructor.pack(i,w,d.offset),d.geometry=w)}c.push(Fu[o].scheduleTask({subTasks:l[o]},b))}e._state=qt.CREATING,Promise.all(c).then(function(h){e._createGeometryResults=h,e._state=qt.CREATED}).catch(function(h){La(e,t,qt.FAILED,h)})}else if(e._state===qt.CREATED){let a=[];n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];let c=t.scene3DOnly,l=t.mapProjection,d=vO.scheduleTask(Nu.packCombineGeometryParameters({createGeometryResults:e._createGeometryResults,instances:n,ellipsoid:l.ellipsoid,projection:l,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:c,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets},a),a);e._createGeometryResults=void 0,e._state=qt.COMBINING,Promise.resolve(d).then(function(h){let g=Nu.unpackCombineGeometryResults(h);e._geometries=g.geometries,e._attributeLocations=g.attributeLocations,e.modelMatrix=pe.clone(g.modelMatrix,e.modelMatrix),e._pickOffsets=g.pickOffsets,e._offsetInstanceExtend=g.offsetInstanceExtend,e._instanceBoundingSpheres=g.boundingSpheres,e._instanceBoundingSpheresCV=g.boundingSpheresCV,p(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=qt.COMBINED):La(e,t,qt.FAILED,void 0)}).catch(function(h){La(e,t,qt.FAILED,h)})}}function bO(e,t){let n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances],i=e._numberOfInstances=n.length,o=new Array(i),r=e._instanceIds,s,a,c=0;for(a=0;a<i;a++){s=n[a];let g=s.geometry,C;p(g.attributes)&&p(g.primitiveType)?C=dO(g):C=g.constructor.createGeometry(g),o[c++]=hO(s,C),r.push(s.id)}o.length=c;let l=t.scene3DOnly,d=t.mapProjection,h=Nu.combineGeometry({instances:o,ellipsoid:d.ellipsoid,projection:d,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:l,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets});e._geometries=h.geometries,e._attributeLocations=h.attributeLocations,e.modelMatrix=pe.clone(h.modelMatrix,e.modelMatrix),e._pickOffsets=h.pickOffsets,e._offsetInstanceExtend=h.offsetInstanceExtend,e._instanceBoundingSpheres=h.boundingSpheres,e._instanceBoundingSpheresCV=h.boundingSpheresCV,p(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=qt.COMBINED):La(e,t,qt.FAILED,void 0)}function TO(e,t){let n=e._batchTableAttributeIndices.offset;if(!e._recomputeBoundingSpheres||!p(n)){e._recomputeBoundingSpheres=!1;return}let i,o=e._offsetInstanceExtend,r=e._instanceBoundingSpheres,s=r.length,a=e._tempBoundingSpheres;if(!p(a)){for(a=new Array(s),i=0;i<s;i++)a[i]=new Ve;e._tempBoundingSpheres=a}for(i=0;i<s;++i){let w=a[i],R=e._batchTable.getBatchedAttribute(i,n,new y);w=r[i].clone(w),hb(w,R,o[i])}let c=[],l=[],d=[];for(i=0;i<s;++i){let w=a[i];w.center.x-w.radius>0||Ve.intersectPlane(w,ba.ORIGIN_ZX_PLANE)!==_i.INTERSECTING?c.push(w):(l.push(w),d.push(w))}let h=c[0],g=d[0],C=l[0];for(i=1;i<c.length;i++)h=Ve.union(h,c[i]);for(i=1;i<d.length;i++)g=Ve.union(g,d[i]);for(i=1;i<l.length;i++)C=Ve.union(C,l[i]);let b=[];for(p(h)&&b.push(h),p(g)&&b.push(g),p(C)&&b.push(C),i=0;i<b.length;i++){let w=b[i].clone(e._boundingSpheres[i]);e._boundingSpheres[i]=w,e._boundingSphereCV[i]=Ve.projectTo2D(w,t.mapProjection,e._boundingSphereCV[i])}Bt._updateBoundingVolumes(e,t,e.modelMatrix,!0),e._recomputeBoundingSpheres=!1}var ob=new fs,lb=new rt,fb=new y,db=new Ve;function EO(e,t){if(!p(e._batchTableAttributeIndices.distanceDisplayCondition)||e._batchTableBoundingSpheresUpdated)return;let i=e._batchTableBoundingSphereAttributeIndices,o=i.center3DHigh,r=i.center3DLow,s=i.center2DHigh,a=i.center2DLow,c=i.radius,l=t.mapProjection,d=l.ellipsoid,h=e._batchTable,g=e._instanceBoundingSpheres,C=g.length;for(let b=0;b<C;++b){let w=g[b];if(!p(w))continue;let R=e.modelMatrix;p(R)&&(w=Ve.transform(w,R,db));let D=w.center,M=w.radius,z=fs.fromCartesian(D,ob);if(h.setBatchedAttribute(b,o,z.high),h.setBatchedAttribute(b,r,z.low),!t.scene3DOnly){let U=d.cartesianToCartographic(D,lb),Y=l.project(U,fb);z=fs.fromCartesian(Y,ob),h.setBatchedAttribute(b,s,z.high),h.setBatchedAttribute(b,a,z.low)}h.setBatchedAttribute(b,c,M)}e._batchTableBoundingSpheresUpdated=!0}var Kd=new y,wO=new y;function rb(e,t){if(!p(e._batchTableAttributeIndices.offset)||e._batchTableOffsetsUpdated||t.scene3DOnly)return;let i=e._batchTableOffsetAttribute2DIndex,o=t.mapProjection,r=o.ellipsoid,s=e._batchTable,a=e._instanceBoundingSpheres,c=a.length;for(let l=0;l<c;++l){let d=a[l];if(!p(d))continue;let h=s.getBatchedAttribute(l,e._batchTableAttributeIndices.offset);if(y.equals(h,y.ZERO)){s.setBatchedAttribute(l,i,y.ZERO);continue}let g=e.modelMatrix;p(g)&&(d=Ve.transform(d,g,db));let C=d.center;C=r.scaleToGeodeticSurface(C,wO);let b=r.cartesianToCartographic(C,lb),w=o.project(b,fb),R=y.add(h,C,Kd);b=r.cartesianToCartographic(R,b);let D=o.project(b,Kd),M=y.subtract(D,w,Kd),z=M.x;M.x=M.z,M.z=M.y,M.y=z,s.setBatchedAttribute(l,i,M)}e._batchTableOffsetsUpdated=!0}function SO(e,t){if(!p(e._batchTableAttributeIndices.evColor)||!e.batchTableEvColorUpdated||t.scene3DOnly)return;let i=e._batchTableAttributeIndices.evColor,o=e.evColor,r=new Ie(255*o.red,255*o.green,255*o.blue,255*o.alpha),s=e._batchTable,a=s.numberOfInstances;for(let c=0;c<a;c++)s.setBatchedAttribute(c,i,r);e.batchTableEvColorUpdated=!1}function xO(e,t){let n=e._attributeLocations,i=e._geometries,o=t.scene3DOnly,r=t.context,s=[],a=i.length;for(let c=0;c<a;++c){let l=i[c];if(s.push(aC.fromGeometry({context:r,geometry:l,attributeLocations:n,bufferUsage:mu.STATIC_DRAW,interleave:e._interleave})),p(e._createBoundingVolumeFunction))e._createBoundingVolumeFunction(t,l);else if(e._boundingSpheres.push(Ve.clone(l.boundingSphere)),e._boundingSphereWC.push(new Ve),!o){let d=l.boundingSphereCV.center,h=d.x,g=d.y,C=d.z;d.x=C,d.y=h,d.z=g,e._boundingSphereCV.push(Ve.clone(l.boundingSphereCV)),e._boundingSphere2D.push(new Ve),e._boundingSphereMorph.push(new Ve)}}e._va=s,e._primitiveType=i[0].primitiveType,e.releaseGeometryInstances&&(e.geometryInstances=void 0);for(let c=0;c<e._geometries.length;c++)for(let l in e._geometries[c].attributes)e._geometries[c].attributes[l].values=void 0,e._geometries[c].attributes[l]=void 0;e._geometries=void 0,La(e,t,qt.COMPLETE,void 0)}function AO(e,t,n,i){let o=n.getRenderState(),r;i?(r=oi(o,!1),r.cull={enabled:!0,face:lr.BACK},e._frontFaceRS=_r.fromCache(r),r.cull.face=lr.FRONT,e._backFaceRS=_r.fromCache(r)):(e._frontFaceRS=_r.fromCache(o),e._backFaceRS=e._frontFaceRS),r=oi(o,!1),p(e._depthFailAppearance)&&(r.depthTest.enabled=!1),p(e._depthFailAppearance)&&(o=e._depthFailAppearance.getRenderState(),r=oi(o,!1),r.depthTest.func=hC.GREATER,i?(r.cull={enabled:!0,face:lr.BACK},e._frontFaceDepthFailRS=_r.fromCache(r),r.cull.face=lr.FRONT,e._backFaceDepthFailRS=_r.fromCache(r)):(e._frontFaceDepthFailRS=_r.fromCache(r),e._backFaceDepthFailRS=e._frontFaceRS))}function RO(e,t,n){let i=t.context,o=e._attributeLocations,r=e._batchTable.getVertexShaderCallback()(n.vertexShaderSource);r=Bt._appendOffsetToShader(e,r),r=Bt._appendShowToShader(e,r),r=Bt._appendDistanceDisplayConditionToShader(e,r,t.scene3DOnly),r=eb(r),r=Bt._updateColorAttribute(e,r,!1),r=mO(e,r),r=nb(e,r),r=Bt._modifyShaderPosition(e,r,t.scene3DOnly);let s=n.getFragmentShaderSource();s=tb(s),e._sp=Ad.replaceCache({context:i,shaderProgram:e._sp,vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:o}),ib(e._sp,o),p(e._depthFailAppearance)&&(r=e._batchTable.getVertexShaderCallback()(e._depthFailAppearance.vertexShaderSource),r=Bt._appendShowToShader(e,r),r=Bt._appendDistanceDisplayConditionToShader(e,r,t.scene3DOnly),r=eb(r),r=Bt._updateColorAttribute(e,r,!0),r=nb(e,r),r=Bt._modifyShaderPosition(e,r,t.scene3DOnly),r=gO(r),s=e._depthFailAppearance.getFragmentShaderSource(),s=tb(s),s=yO(s),e._spDepthFail=Ad.replaceCache({context:i,shaderProgram:e._spDepthFail,vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:o}),ib(e._spDepthFail,o))}var Na=new pe,sb=new y;function ab(e,t,n,i){let o=p(n)?n._uniforms:void 0,r={},s=t.uniforms;if(p(s))for(let c in s)s.hasOwnProperty(c)&&(r[c]=_O(s,c));let a=Un(r,o);return a=e._batchTable.getUniformMapCallback()(a),p(e.rtcCenter)&&(a.u_modifiedModelView=function(){let c=i.context.uniformState.view;return pe.multiply(c,e._modelMatrix,Na),pe.multiplyByPoint(Na,e.rtcCenter,sb),pe.setTranslation(Na,sb,Na),Na}),a}function PO(e,t,n,i,o,r,s,a){let c=ab(e,t,n,a),l;p(e._depthFailAppearance)&&(l=ab(e,e._depthFailAppearance,e._depthFailAppearance.material,a));let d=i?wd.TRANSLUCENT:wd.OPAQUE,h=o?2:1;h*=p(e._depthFailAppearance)?2:1,r.length=e._va.length*h;let g=r.length,C=0;for(let b=0;b<g;++b){let w;o&&(w=r[b],p(w)||(w=r[b]=new Ea({owner:e,primitiveType:e._primitiveType})),w.vertexArray=e._va[C],w.renderState=e._backFaceRS,w.shaderProgram=e._sp,w.uniformMap=c,w.pass=d,++b),w=r[b],p(w)||(w=r[b]=new Ea({owner:e,primitiveType:e._primitiveType})),w.vertexArray=e._va[C],w.renderState=e._frontFaceRS,w.shaderProgram=e._sp,w.uniformMap=c,w.pass=d,p(e._depthFailAppearance)&&(o&&(++b,w=r[b],p(w)||(w=r[b]=new Ea({owner:e,primitiveType:e._primitiveType})),w.vertexArray=e._va[C],w.renderState=e._backFaceDepthFailRS,w.shaderProgram=e._spDepthFail,w.uniformMap=l,w.pass=d),++b,w=r[b],p(w)||(w=r[b]=new Ea({owner:e,primitiveType:e._primitiveType})),w.vertexArray=e._va[C],w.renderState=e._frontFaceDepthFailRS,w.shaderProgram=e._spDepthFail,w.uniformMap=l,w.pass=d),++C}}Bt._updateBoundingVolumes=function(e,t,n,i){let o,r,s;if(i||!pe.equals(n,e._modelMatrix))for(pe.clone(n,e._modelMatrix),r=e._boundingSpheres.length,o=0;o<r;++o)s=e._boundingSpheres[o],p(s)&&(e._boundingSphereWC[o]=Ve.transform(s,n,e._boundingSphereWC[o]),t.scene3DOnly||(e._boundingSphere2D[o]=Ve.clone(e._boundingSphereCV[o],e._boundingSphere2D[o]),e._boundingSphere2D[o].center.x=0,e._boundingSphereMorph[o]=Ve.union(e._boundingSphereWC[o],e._boundingSphereCV[o])));let a=e.appearance.pixelSize;if(p(a))for(r=e._boundingSpheres.length,o=0;o<r;++o){s=e._boundingSpheres[o];let c=e._boundingSphereWC[o],d=t.camera.getPixelSize(s,t.context.drawingBufferWidth,t.context.drawingBufferHeight)*a;c.radius=s.radius+d}};function OO(e,t,n,i,o,r,s,a){Bt._updateBoundingVolumes(e,t,o);let c;t.mode===za.SCENE3D?c=e._boundingSphereWC:t.mode===za.COLUMBUS_VIEW?c=e._boundingSphereCV:t.mode===za.SCENE2D&&p(e._boundingSphere2D)?c=e._boundingSphere2D:p(e._boundingSphereMorph)&&(c=e._boundingSphereMorph);let l=t.commandList,d=t.passes;if(d.render||d.pick){let h=e.allowPicking,g=Bu.castShadows(e.shadows),C=Bu.receiveShadows(e.shadows),b=n.length,w=a?2:1;w*=p(e._depthFailAppearance)?2:1;for(let R=0;R<b;++R){let D=Math.floor(R/w),M=n[R];M.modelMatrix=o,M.boundingVolume=c[D],M.cull=r,M.debugShowBoundingVolume=s,M.castShadows=g,M.receiveShadows=C,h?M.pickId="v_pickColor":M.pickId=void 0,M.noAllowOffScreen=e.noAllowOffScreen,l.push(M)}}}Bt.prototype.update=function(e){if(!p(this.geometryInstances)&&this._va.length===0||p(this.geometryInstances)&&Array.isArray(this.geometryInstances)&&this.geometryInstances.length===0||!p(this.appearance)||e.mode!==za.SCENE3D&&e.scene3DOnly||!e.passes.render&&!e.passes.pick)return;if(p(this._error))throw this._error;if(this._state===qt.FAILED)return;let t=e.context;if(p(this._batchTable)||lO(this,t),this._batchTable.attributes.length>0){if(gt.maximumVertexTextureImageUnits===0)throw new Pt("Vertex texture fetch support is required to render primitives with per-instance attributes. The maximum number of vertex texture image units must be greater than zero.");this._batchTable.update(e)}if(this._state!==qt.COMPLETE&&this._state!==qt.COMBINED&&(this.asynchronous?CO(this,e):bO(this,e)),this._state===qt.COMBINED&&(EO(this,e),rb(this,e),xO(this,e)),!this.show||this._state!==qt.COMPLETE)return;this._batchTableOffsetsUpdated||rb(this,e),this.batchTableEvColorUpdated&&SO(this,e),this._recomputeBoundingSpheres&&TO(this,e);let n=this.appearance,i=n.material,o=!1,r=!1;this._appearance!==n?(this._appearance=n,this._material=i,o=!0,r=!0):this._material!==i&&(this._material=i,r=!0);let s=this.depthFailAppearance,a=p(s)?s.material:void 0;this._depthFailAppearance!==s?(this._depthFailAppearance=s,this._depthFailMaterial=a,o=!0,r=!0):this._depthFailMaterial!==a&&(this._depthFailMaterial=a,r=!0);let c=this._appearance.isTranslucent();this._translucent!==c&&(this._translucent=c,o=!0),p(this._material)&&this._material.update(t);let l=n.closed&&c;o&&E(this._createRenderStatesFunction,AO)(this,t,n,l),r&&E(this._createShaderProgramFunction,RO)(this,e,n),(o||r)&&E(this._createCommandsFunction,PO)(this,n,i,c,l,this._colorCommands,this._pickCommands,e),E(this._updateAndQueueCommandsFunction,OO)(this,e,this._colorCommands,this._pickCommands,this.modelMatrix,this.cull,this.debugShowBoundingVolume,l)};var IO=new Ve,DO=new Ve;function hb(e,t,n){if(n===Ca.TOP){let i=Ve.clone(e,IO),o=Ve.clone(e,DO);o.center=y.add(o.center,t,o.center),e=Ve.union(i,o,e)}else n===Ca.ALL&&(e.center=y.add(e.center,t,e.center));return e}function MO(e,t,n){return function(){let i=e.getBatchedAttribute(t,n),o=e.attributes[n],r=o.componentsPerAttribute,s=Pe.createTypedArray(o.componentDatatype,r);return p(i.constructor.pack)?i.constructor.pack(i,s,0):s[0]=i,s}}function zO(e,t,n,i,o){return function(r){let s=ub(r);e.setBatchedAttribute(t,n,s),o==="offset"&&(i._recomputeBoundingSpheres=!0,i._batchTableOffsetsUpdated=!1)}}var NO=new y;function LO(e,t,n){t.boundingSphere={get:function(){let i=e._instanceBoundingSpheres[n];if(p(i)){i=i.clone();let o=e.modelMatrix,r=t.offset;p(r)&&hb(i,y.fromArray(r.get(),0,NO),e._offsetInstanceExtend[n]),p(o)&&(i=Ve.transform(i,o))}return i}},t.boundingSphereCV={get:function(){return e._instanceBoundingSpheresCV[n]}}}function BO(e,t,n){t.pickId={get:function(){return e._pickIds[n]}}}Bt.prototype.getGeometryInstanceAttributes=function(e){let t=this._perInstanceAttributeCache.get(e);if(p(t))return t;let n=-1,i=this._lastPerInstanceAttributeIndex,o=this._instanceIds,r=o.length;for(let l=0;l<r;++l){let d=(i+l)%r;if(e===o[d]){n=d;break}}if(n===-1)return;let s=this._batchTable,a=this._batchTableAttributeIndices;t={};let c={};for(let l in a)if(a.hasOwnProperty(l)){let d=a[l];c[l]={get:MO(s,n,d),set:zO(s,n,d,this,l)}}return LO(this,c,n),BO(this,c,n),Object.defineProperties(t,c),this._lastPerInstanceAttributeIndex=n,this._perInstanceAttributeCache.set(e,t),t};Bt.prototype.isDestroyed=function(){return!1};Bt.prototype.destroy=function(){let e,t;this._sp=this._sp&&this._sp.destroy(),this._spDepthFail=this._spDepthFail&&this._spDepthFail.destroy();let n=this._va;for(e=n.length,t=0;t<e;++t)n[t].destroy();this._va=void 0;let i=this._pickIds;for(e=i.length,t=0;t<e;++t)i[t].destroy();return this._pickIds=void 0,this._batchTable=this._batchTable&&this._batchTable.destroy(),this._instanceIds=void 0,this._perInstanceAttributeCache=void 0,this._attributeLocations=void 0,kn(this)};function La(e,t,n,i){e._completeLoad(t,n,i)}var pb=Bt;var mb={};mb.computePositions=function(e,t,n,i,o){let r=e*.5,s=-r,a=i+i,c=o?2*a:a,l=new Float64Array(c*3),d,h=0,g=0,C=o?a*3:0,b=o?(a+i)*3:i*3;for(d=0;d<i;d++){let w=d/i*k.TWO_PI,R=Math.cos(w),D=Math.sin(w),M=R*n,z=D*n,U=R*t,Y=D*t;l[g+C]=M,l[g+C+1]=z,l[g+C+2]=s,l[g+b]=U,l[g+b+1]=Y,l[g+b+2]=r,g+=3,o&&(l[h++]=M,l[h++]=z,l[h++]=s,l[h++]=U,l[h++]=Y,l[h++]=r)}return l};var gb=mb;var Qd=new we,FO=new y,VO=new y,UO=new y,kO=new y;function go(e){e=E(e,E.EMPTY_OBJECT);let t=e.length,n=e.topRadius,i=e.bottomRadius,o=E(e.vertexFormat,En.DEFAULT),r=E(e.slices,128);this._length=t,this._topRadius=n,this._bottomRadius=i,this._vertexFormat=En.clone(o),this._slices=r,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderGeometry"}go.packedLength=En.packedLength+5;go.pack=function(e,t,n){return n=E(n,0),En.pack(e._vertexFormat,t,n),n+=En.packedLength,t[n++]=e._length,t[n++]=e._topRadius,t[n++]=e._bottomRadius,t[n++]=e._slices,t[n]=E(e._offsetAttribute,-1),t};var yb=new En,Ps={vertexFormat:yb,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};go.unpack=function(e,t,n){t=E(t,0);let i=En.unpack(e,t,yb);t+=En.packedLength;let o=e[t++],r=e[t++],s=e[t++],a=e[t++],c=e[t];return p(n)?(n._vertexFormat=En.clone(i,n._vertexFormat),n._length=o,n._topRadius=r,n._bottomRadius=s,n._slices=a,n._offsetAttribute=c===-1?void 0:c,n):(Ps.length=o,Ps.topRadius=r,Ps.bottomRadius=s,Ps.slices=a,Ps.offsetAttribute=c===-1?void 0:c,new go(Ps))};go.createGeometry=function(e){let t=e._length,n=e._topRadius,i=e._bottomRadius,o=e._vertexFormat,r=e._slices;if(t<=0||n<0||i<0||n===0&&i===0)return;let s=r+r,a=r+s,c=s+s,l=gb.computePositions(t,n,i,r,!0),d=o.st?new Float32Array(c*2):void 0,h=o.normal?new Float32Array(c*3):void 0,g=o.tangent?new Float32Array(c*3):void 0,C=o.bitangent?new Float32Array(c*3):void 0,b,w=o.normal||o.tangent||o.bitangent;if(w){let Q=o.tangent||o.bitangent,q=0,Z=0,H=0,K=Math.atan2(i-n,t),v=FO;v.z=Math.sin(K);let S=Math.cos(K),I=UO,F=VO;for(b=0;b<r;b++){let X=b/r*k.TWO_PI,ie=S*Math.cos(X),j=S*Math.sin(X);w&&(v.x=ie,v.y=j,Q&&(I=y.normalize(y.cross(y.UNIT_Z,v,I),I)),o.normal&&(h[q++]=v.x,h[q++]=v.y,h[q++]=v.z,h[q++]=v.x,h[q++]=v.y,h[q++]=v.z),o.tangent&&(g[Z++]=I.x,g[Z++]=I.y,g[Z++]=I.z,g[Z++]=I.x,g[Z++]=I.y,g[Z++]=I.z),o.bitangent&&(F=y.normalize(y.cross(v,I,F),F),C[H++]=F.x,C[H++]=F.y,C[H++]=F.z,C[H++]=F.x,C[H++]=F.y,C[H++]=F.z))}for(b=0;b<r;b++)o.normal&&(h[q++]=0,h[q++]=0,h[q++]=-1),o.tangent&&(g[Z++]=1,g[Z++]=0,g[Z++]=0),o.bitangent&&(C[H++]=0,C[H++]=-1,C[H++]=0);for(b=0;b<r;b++)o.normal&&(h[q++]=0,h[q++]=0,h[q++]=1),o.tangent&&(g[Z++]=1,g[Z++]=0,g[Z++]=0),o.bitangent&&(C[H++]=0,C[H++]=1,C[H++]=0)}let R=12*r-12,D=jt.createTypedArray(c,R),M=0,z=0;for(b=0;b<r-1;b++)D[M++]=z,D[M++]=z+2,D[M++]=z+3,D[M++]=z,D[M++]=z+3,D[M++]=z+1,z+=2;for(D[M++]=s-2,D[M++]=0,D[M++]=1,D[M++]=s-2,D[M++]=1,D[M++]=s-1,b=1;b<r-1;b++)D[M++]=s+b+1,D[M++]=s+b,D[M++]=s;for(b=1;b<r-1;b++)D[M++]=a,D[M++]=a+b,D[M++]=a+b+1;let U=0;if(o.st){let Q=Math.max(n,i);for(b=0;b<c;b++){let q=y.fromArray(l,b*3,kO);d[U++]=(q.x+Q)/(2*Q),d[U++]=(q.y+Q)/(2*Q)}}let Y=new bs;o.position&&(Y.position=new It({componentDatatype:Pe.DOUBLE,componentsPerAttribute:3,values:l})),o.normal&&(Y.normal=new It({componentDatatype:Pe.FLOAT,componentsPerAttribute:3,values:h})),o.tangent&&(Y.tangent=new It({componentDatatype:Pe.FLOAT,componentsPerAttribute:3,values:g})),o.bitangent&&(Y.bitangent=new It({componentDatatype:Pe.FLOAT,componentsPerAttribute:3,values:C})),o.st&&(Y.st=new It({componentDatatype:Pe.FLOAT,componentsPerAttribute:2,values:d})),Qd.x=t*.5,Qd.y=Math.max(i,n);let m=new Ve(y.ZERO,we.magnitude(Qd));if(p(e._offsetAttribute)){t=l.length;let Q=e._offsetAttribute===Ca.NONE?0:1,q=new Uint8Array(t/3).fill(Q);Y.applyOffset=new It({componentDatatype:Pe.UNSIGNED_BYTE,componentsPerAttribute:1,values:q})}return new Rt({attributes:Y,indices:D,primitiveType:vt.TRIANGLES,boundingSphere:m,offsetAttribute:e._offsetAttribute})};var Jd;go.getUnitCylinder=function(){return p(Jd)||(Jd=go.createGeometry(new go({topRadius:1,bottomRadius:1,length:1,vertexFormat:En.POSITION_ONLY}))),Jd};var eh=go;var GO=Tt.RED,HO=Tt.GREEN,jO=Tt.BLUE;function Vu(e){this._length=e.length,this._modelMatrix=e.modelMatrix,this._radius=e.radius,this._xAxisColor=E(e.xAxisColor,GO),this._yAxisColor=E(e.yAxisColor,HO),this._zAxisColor=E(e.zAxisColor,jO),this._init()}Vu.prototype._init=function(){this._bodyRadius=this._radius?this._radius:this._length*.015,this._headRadius=this._bodyRadius*2,this._headLength=this._headRadius*2,this._bodyLength=this._length-this._headLength,this._bodyLength<0&&(this._bodyLength=0);let e=1;this._xAxisAttr={color:Vc.fromColor(this._xAxisColor.withAlpha(e))},this._yAxisAttr={color:Vc.fromColor(this._yAxisColor.withAlpha(e))},this._zAxisAttr={color:Vc.fromColor(this._zAxisColor.withAlpha(e))},this._primitive=this._createPrimitive()};Vu.prototype._createPrimitive=function(){let e=En.POSITION_ONLY,t=new eh({length:this._headLength,topRadius:0,bottomRadius:this._headRadius,vertexFormat:e}),n=new eh({length:this._bodyLength,topRadius:this._bodyRadius,bottomRadius:this._bodyRadius,vertexFormat:e}),i=this._bodyLength/2,o=this._bodyLength+this._headLength/2,r=new y(i,0,0),s=new y(o,0,0),a=new y(0,i,0),c=new y(0,o,0),l=new y(0,0,i),d=new y(0,0,o),h=_e.fromRotationY(Math.toRadians(90)),g=_e.fromRotationX(Math.toRadians(-90)),C=pe.fromRotationTranslation(h,r),b=pe.fromRotationTranslation(h,s),w=pe.fromRotationTranslation(g,a),R=pe.fromRotationTranslation(g,c),D=pe.fromTranslation(l),M=pe.fromTranslation(d),z=[],U=[],Y=[],m=new cr({geometry:n,modelMatrix:C,attributes:this._xAxisAttr,id:{isEvCoordAxis:!0,instances:z,vector:new y(1,0,0),normal:y.UNIT_Z},pickPrimitive:this}),Q=new cr({geometry:t,modelMatrix:b,attributes:this._xAxisAttr,id:{isEvCoordAxis:!0,instances:z,vector:new y(1,0,0),normal:y.UNIT_Z},pickPrimitive:this}),q=new cr({geometry:n,modelMatrix:w,attributes:this._yAxisAttr,id:{isEvCoordAxis:!0,instances:U,vector:new y(0,1,0),normal:y.UNIT_Z},pickPrimitive:this}),Z=new cr({geometry:t,modelMatrix:R,attributes:this._yAxisAttr,id:{isEvCoordAxis:!0,instances:U,vector:new y(0,1,0),normal:y.UNIT_Z},pickPrimitive:this}),H=new cr({geometry:n,modelMatrix:D,attributes:this._zAxisAttr,id:{isEvCoordAxis:!0,instances:Y,vector:new y(0,0,1),normal:y.UNIT_X},pickPrimitive:this}),K=new cr({geometry:t,modelMatrix:M,attributes:this._zAxisAttr,id:{isEvCoordAxis:!0,instances:Y,vector:new y(0,0,1),normal:y.UNIT_X},pickPrimitive:this});return z.push(m,Q),U.push(q,Z),Y.push(H,K),new pb({geometryInstances:[m,Q,q,Z,H,K],modelMatrix:this._modelMatrix,appearance:new b0({flat:!0,translucent:!1,renderState:{}}),cull:!0})};Vu.prototype.update=function(e){this._primitive.update(e)};var _b=Vu;function Zt(e){this._viewer=e.viewer,this._handler=new Cesium.ScreenSpaceEventHandler(this._viewer.canvas),this._editObject=null,this._editing=!1,this._positionPrimitive=null,this._positionPlane=null,this._highlightColor=null,this._editingColor=new Cesium.Color(1,0,0,.8),this._editingAxis=null,this._positionChanged=new Cesium.Event,this._modelMatrixChanged=new Cesium.Event,this._createPositionPrimitive({position:Cesium.Cartesian3.ZERO,size:Cesium.defaultValue(e.size,20)})}Object.defineProperties(Zt.prototype,{modelMatrixChanged:{get:function(){return this._modelMatrixChanged}},positionChanged:{get:function(){return this._positionChanged}},coordAxis:{get:function(){return this._modelMatrixPrimitive}}});Zt.prototype.startEdit=function(){this.editPosition(),this._editing=!0};Zt.prototype.stopEdit=function(){this.hideCoordAxis(),this._handler._inputEvents={},this._editing=!1,this._editObject=null};Zt.prototype._preventCameraOperation=function(){this._viewer.scene.screenSpaceCameraController.enableInputs=!1};Zt.prototype._renewCameraOperation=function(){this._viewer.scene.screenSpaceCameraController.enableInputs=!0};Zt.prototype._setEditAction=function(){};Zt.prototype.editPosition=function(e){let t=this,n=0,i=20,o=null,r=new Cesium.Ray,s=!1;this.setPosition(e),this._handler.setInputAction(function(a){let c=t._viewer.scene.pick(a.position);c&&c.id===t._positionPrimitive&&(s=!0,t._preventCameraOperation(),t.hideCoordAxis(),t._createPositionPlane())},Cesium.ScreenSpaceEventType.LEFT_DOWN),this._handler.setInputAction(function(a){if(s){let c=performance.now();if(c-n<i)return;n=c,t._viewer.camera.getPickRay(a.endPosition,r);let l=Cesium.IntersectionTests.rayPlane(r,t._positionPlane);if(!l)return;if(o=l,t._editObject instanceof or&&t._editObject._planes.length>0){let d=t._positionPrimitive.position._value,h=t._viewer.scene.globe.pick(t._viewer.camera.getPickRay(a.endPosition),t._viewer.scene),g=Cesium.Cartesian3.subtract(h,d,new Cesium.Cartesian3);t._positionPrimitive.position.setValue(h.clone()),t._editObject._planes[0].updatePointPosition(g)}t._positionChanged.raiseEvent(l)}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this._handler.setInputAction(function(){s&&(t.setPosition(o),t._renewCameraOperation(),o=null,s=!1)},Cesium.ScreenSpaceEventType.LEFT_UP)};Zt.prototype._setTranslation=function(e){let t=this._modelMatrixPrimitive._primitive.modelMatrix,n=Cesium.Matrix4.getTranslation(t,new Cesium.Cartesian3);n=Cesium.Cartesian3.add(n,e,n),Cesium.Matrix4.setTranslation(t,n,t),n=Cesium.Matrix4.getTranslation(this._modelMatrixPrimitive._primitive.modelMatrix,new Cesium.Cartesian3),this._positionChanged.raiseEvent(n),this._modelMatrixChanged.raiseEvent(this._modelMatrixPrimitive._primitive.modelMatrix)};Zt.prototype._createModelMatrixPrimitive=function(e){let t=e.position,n=e.length,i=e.radius,o;t?o=Cesium.Transforms.eastNorthUpToFixedFrame(t):o=Cesium.Matrix4.IDENTITY,this._modelMatrixPrimitive=new _b({length:n,radius:i,modelMatrix:o}),this._viewer.scene.primitives.add(this._modelMatrixPrimitive._primitive)};Zt.prototype._createPositionPrimitive=function(e){let t=e.position,n=e.size;this._positionPrimitive=this._viewer.entities.add({position:t,point:{pixelSize:n,color:Cesium.Color.CYAN,disableDepthTestDistance:1e3}})};Zt.prototype._createPositionPlane=function(){let e=this._positionPrimitive.position._value,t=Cesium.Cartesian3.magnitude(e),n=Cesium.Cartesian3.normalize(e,new Cesium.Cartesian3);this._positionPlane=new Cesium.Plane(n,-t)};Zt.prototype._removeModelMatrixPrimitive=function(){this._positionPrimitive&&(this._viewer.entities.remove(this._positionPrimitive),this._positionPrimitive=null)};Zt.prototype._setEditingColor=function(){this._editObject&&(this._highlightColor=this._editObject.color,this._editObject.color=this._editingColor)};Zt.prototype._removeEditingColor=function(){this._editObject&&(this._editObject.color=this._highlightColor)};Zt.prototype._computeAxisDirection=function(e){if(!this._modelMatrixPrimitive)return;let t=this._modelMatrixPrimitive._primitive.modelMatrix,n=Cesium.Matrix4.multiplyByPoint(t,e,new Cesium.Cartesian3),i=Cesium.Matrix4.getTranslation(t,new Cesium.Cartesian3),o=Cesium.Cartesian3.subtract(n,i,new Cesium.Cartesian3);return o=Cesium.Cartesian3.normalize(o,o),o};Zt.prototype._getAxisPlane=function(){if(!(this._modelMatrixPrimitive&&this._editingAxis))return;let e=this._modelMatrixPrimitive._primitive.modelMatrix;if(!e)return;let t=this._editingAxis.id.vector.clone();t=Cesium.Matrix4.multiplyByPoint(e,t,t);let n=Cesium.Matrix4.getTranslation(e,new Cesium.Cartesian3);t=Cesium.Cartesian3.subtract(t,n,t);let i=Cesium.Cartesian3.cross(t,this._viewer.camera.rightWC,t);i=Cesium.Cartesian3.normalize(i,i),Cesium.Cartesian3.angleBetween(i,n)>Math.PI_OVER_TWO&&(i=Cesium.Cartesian3.negate(i,i));let r=Cesium.Cartesian3.dot(i,n);return r=-r,new Cesium.Plane(i,r)};Zt.prototype.showCoordAxis=function(){this._positionPrimitive&&(this._positionPrimitive.show=!0)};Zt.prototype.hideCoordAxis=function(){this._positionPrimitive&&(this._positionPrimitive.show=!1)};Zt.prototype.setPosition=function(e){this._positionPrimitive.position.setValue(e.clone()),this._positionPrimitive.show||this.showCoordAxis()};var th=Zt;var nh=.01;function Oe(e){this.viewer=e.viewer,this._container=WO(e.container),this._handlerForCreate=new Cesium.ScreenSpaceEventHandler(this.viewer.canvas),this._handlerForOrientation=new Cesium.ScreenSpaceEventHandler(this.viewer.canvas),this._planeHandler=new Cesium.ScreenSpaceEventHandler(this.viewer.canvas),this._editor=new th({viewer:this.viewer,axisLength:e.axisLength,axisRadius:e.axisRadius}),this._editor.positionChanged.addEventListener(this._onPositionChanged,this),this._videoLayer=null,this._editObject=null,this._videoCameraAxis=null,this._cameraFrustumPrimitive=null,this._cameraPrimitives=[],this._isEditPosition=!1,this._isEditOrientation=!1,this._addedVideo=new Cesium.Event,this._editObjectChanged=new Cesium.Event,this._changed=new Cesium.Event,this._viewPointPlane=null,this._viewPointRay=new Cesium.Ray,this._editing=!1,this._showCameraFrustrum=!0,Cesium.defaultValue(e.createUI,!1)&&(this.top=Cesium.defaultValue(e.top,"0px"),this.left=Cesium.defaultValue(e.left,"0px"),this._styleElement=null,this._UIElement=null,this._createUI(Cesium.defaultValue(e.cssFileUrl,"../css/videoFusionEditor.css")))}Object.defineProperties(Oe.prototype,{addedVideo:{get:function(){return this._addedVideo}},editObjectChanged:{get:function(){return this._editObjectChanged}},changed:{get:function(){return this._changed}},editObject:{get:function(){return this._editObject}}});Oe.prototype.stopEdit=function(){this._editing=!1,this._editor.stopEdit(),this._videoCameraViewPoint&&(this._videoCameraViewPoint.show=!1),this._cameraFrustumPrimitive&&(this._cameraFrustumPrimitive.show=!1)};Oe.prototype.createVideoLayer=function(e){return this._videoLayer=new Pc({viewer:this.viewer,name:e.name,visibleDistance:e.visibleDistance,wsServer:e.wsServer}),this._videoLayer.added.addEventListener(function(t){this._addedVideo.raiseEvent(t),this._setEditObject(t),t.isEditMode=!0},this),this._videoLayer};Oe.prototype.loadVideoLayer=function(e){return this._videoLayer=new Pc({viewer:this.viewer,videoJsonFile:e.url}),this._videoLayer.added.addEventListener(function(t){t.isEditMode=!0,this.projectionType=t._projectionMode,this._setEditObject(t),this._addedVideo.raiseEvent(t)},this),this._videoLayer};Oe.prototype.createVideoModelProjection=function(e){e.projectionType=1,this._createVideoProjection(e)};Oe.prototype.createVideoPlaneProjection=function(e){e.projectionType=0,this._createVideoProjection(e)};Oe.prototype._createVideoProjection=function(e){let t=e.name,n=e.url,i=Cesium.defaultValue(e.offsetHeight,1),o=Cesium.defaultValue(e.farClip,50),r=this,s=!0,a=null,c=document.createElement("video");c.muted=!0,c.loop=!0,c.setAttribute("crossorigin","anonymous"),c.autoplay=!0,c.style.display="none",c.id=`v${new Date().getTime()+Math.floor(Math.random()*1e3)}`,document.body.appendChild(c);let l,d="",h;if(/^rtsp:\/\//.test(n))l=new to({layer:this._videoLayer,wsserver:this._videoLayer.wsServe,rtspurl:n,mediaplayer:c,protocol:e.protocol}),l.openws(),d="rtsp";else if(/\./.test(n)){c.src=n;let g=n.split("/");h=g[g.length-1]}else{let g=new to({layer:this._videoLayer,wsserver:this._videoLayer.wsServe,rtspurl:"",mediaplayer:c,protocol:e.protocol});g.openws(),g.playGB(),g.playGBDevice(n),d="gb"}e.wsplayer=l,this._handlerForCreate.setInputAction(function(g){let C=r.viewer.scene.globe.pick(r.viewer.camera.getPickRay(g.position),r.viewer.scene);C&&(s?(C=r._changeHeight(C,i),r.projectionType=e.projectionType,e.projectionType===0?a=r._createVideoPlaneProjection({name:t,url:n,position:C,videoElement:c,wsplayer:l,wsplayerType:d}):e.projectionType===1&&(a=r._createVideoModelProjection({name:t,url:n,position:C,videoElement:c,wsplayer:l,farClip:o,wsplayerType:d})),r._editing=!0,r._setEditObject(a),r._setVideoCameraViewPoint(C)):(a._fileName=h,r._handlerForCreate.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),r._handlerForCreate.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE)),s=!1)},Cesium.ScreenSpaceEventType.LEFT_CLICK),this._handlerForCreate.setInputAction(function(g){if(s)return;let C=r.viewer.scene.globe.pick(r.viewer.camera.getPickRay(g.endPosition),r.viewer.scene);C&&r._setVideoCameraViewPoint(C)},Cesium.ScreenSpaceEventType.MOUSE_MOVE)};Oe.prototype._createVideoModelProjection=function(e){let t=e.name,n=e.videoElement,i=e.position;i=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(i);let o=this.viewer.camera,r=Cesium.Math.toDegrees(i.longitude),s=Cesium.Math.toDegrees(i.latitude),a=Cesium.Math.toDegrees(o.heading),c=Cesium.Math.toDegrees(o.pitch),l=Cesium.Math.toDegrees(o.roll);return this._videoLayer.addVideoModelProjection({name:t,viewer:this.viewer,layer:this._videoLayer,videoElement:n,originLon:r,originLat:s,originHeight:i.height,heading:a,pitch:c,roll:l,farClip:e.farClip,wsplayer:e.wsplayer,isEditMode:!0,wsplayerType:e.wsplayerType})};Oe.prototype._createVideoPlaneProjection=function(e){let t=e.position;t=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(t);let n=Cesium.Math.toDegrees(t.longitude),i=Cesium.Math.toDegrees(t.latitude),o=this.viewer.camera,r=Cesium.Math.toDegrees(o.heading),s=Cesium.Math.toDegrees(o.pitch),a=Cesium.Math.toDegrees(o.roll);return this._videoLayer.addVideoPlaneProjection({viewer:this.viewer,name:e.name,videoElement:e.videoElement,layer:this._videoLayer,originLon:n,originLat:i,originHeight:t.height,heading:r,pitch:s,roll:a,wsplayer:e.wsplayer,wsplayerType:e.wsplayerType})};var mn=null,jo=[],Uu=null,yo=null;Oe.prototype.createProjectionPlane=function(){this._editObject&&this._editObject._projectionMode===0&&(yo=this._editObject._createProjectionPlane(),this._setPlaneToBackFace())};Oe.prototype._editProjectionPlane=function(){let e=!1,t=null,n=null,i,o=Cesium.Color.YELLOW,r=new Cesium.Color(0,1,0,.8),s=null,a=new Cesium.Ray,c=this;this._planeHandler.setInputAction(function(h){let g=c.viewer.scene.pick(h.position);if(g){let C=jo.indexOf(g.id);if(C!==-1){e=!0,t=g.id,i=C,t.show=!1,c._editor._preventCameraOperation();let b=mn[C],w=Cesium.Cartesian3.normalize(b,new Cesium.Cartesian3);s=Cesium.Plane.fromPointNormal(b,w),a.origin=c.viewer.camera.positionWC}}},Cesium.ScreenSpaceEventType.LEFT_DOWN),this._planeHandler.setInputAction(function(h){t&&(t.show=!0,t=null),c._editor._renewCameraOperation(),e=!1},Cesium.ScreenSpaceEventType.LEFT_UP),this._planeHandler.setInputAction(function(h){let g=c.viewer.scene.pick(h.position);if(g&&g.primitive instanceof ir)return c._setEditProjectionPlane(g.primitive);let C=c.viewer.scene.pickPosition(h.position);C&&(C=c._changeHeight(C,.01),yo.addPoint(C),c._addVertexEntity(C),c._createProjectionPlaneOutline())},Cesium.ScreenSpaceEventType.LEFT_CLICK),this._planeHandler.setInputAction(function(h){let g=c.viewer.scene.pick(h.position);if(g){let C=jo.indexOf(g.id);C!==-1&&(yo.deletePointByIndex(C),c.viewer.entities.remove(g.id),jo.splice(C,1))}},Cesium.ScreenSpaceEventType.RIGHT_CLICK);let l=!1;this._planeHandler.setInputAction(function(h){if(e){let g=c.viewer.scene.pickPosition(h.endPosition);if(!g)return;let C=Cesium.Cartesian3.subtract(g,a.origin,g);if(a.direction=C,g=Cesium.IntersectionTests.rayPlane(a,s,g),!g)return;yo.setPoint(g,i),mn[i]=g,t.position.setValue(g)}else{let g=c.viewer.scene.pick(h.endPosition);i=g?jo.indexOf(g.id):-1,i!==-1?(n&&(n.point.color=o),g.id.point.color=r,n=g.id,c._editor._preventCameraOperation(),l=!0,t=g.id):n&&(n.point.color=o,n=null,c._editor._renewCameraOperation(),l=!1)}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this._planeHandler.setInputAction(d,Cesium.ScreenSpaceEventType.WHEEL),this._planeHandler.setInputAction(d,Cesium.ScreenSpaceEventType.WHEEL,Cesium.KeyboardEventModifier.CTRL);function d(h){if(!l)return;let g=mn[i],C=c.viewer.scene.globe.ellipsoid.cartesianToCartographic(g);C.height+=h/100*nh,g=c.viewer.scene.globe.ellipsoid.cartographicToCartesian(C,g),yo.setPoint(g,i),n.position.setValue(g)}};Oe.prototype.setProjectionPlaneVertexHeightStep=function(e){e>0&&(nh=e)};Oe.prototype.getProjectionPlaneVertexHeightStep=function(){return nh};Oe.prototype.stopProjectionPlane=function(){for(let e=0;e<jo.length;++e)this.viewer.entities.remove(jo[e]);this.viewer.entities.remove(Uu),mn=null,jo.length=0,Uu=null,yo=null,this._planeHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOWN),this._planeHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_UP),this._planeHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),this._planeHandler.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK),this._planeHandler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE),this._planeHandler.removeInputAction(Cesium.ScreenSpaceEventType.WHEEL)};Oe.prototype.adjustProjectionPlane=function(){let e=this;this._planeHandler.setInputAction(function(t){let n=e.viewer.scene.pick(t.position);if(n&&n.primitive instanceof ir){if(e._setEditObject(n.primitive._owner),yo=n.primitive,mn=n.primitive._originalPoints,mn.length>0){for(let i=0;i<mn.length;++i)e._addVertexEntity(mn[i]);e._createProjectionPlaneOutline()}e._editProjectionPlane()}},Cesium.ScreenSpaceEventType.LEFT_CLICK)};Oe.prototype._setEditProjectionPlane=function(e){if(yo&&this.stopProjectionPlane(),this._setEditObject(e._owner),yo=e,mn=e._originalPoints,mn.length>0){for(let t=0;t<mn.length;++t)this._addVertexEntity(mn[t]);this._createProjectionPlaneOutline()}this._editProjectionPlane()};Oe.prototype._addVertexEntity=function(e){let t=this.viewer.entities.add({position:e,point:{pixelSize:10,color:Cesium.Color.YELLOW,disableDepthTestDistance:1e3}});jo.push(t)};Oe.prototype._createProjectionPlaneOutline=function(){!Uu&&mn.length>1&&(Uu=this.viewer.entities.add({polyline:{positions:new Cesium.CallbackProperty(function(){return mn.length===2?mn:mn.concat(mn[0])},!1),width:3,arcType:Cesium.ArcType.NONE,material:Cesium.Color.YELLOW}}))};Oe.prototype.remove=function(){this._videoLayer.remove(this._editObject),this._editObject=null};Oe.prototype.editVideoCameraPosition=function(){this._editing=!0,this._isEditPosition=!0,this._isEditOrientation=!1,this._removeVideoCameraOrientationAction(),this._videoCameraViewPoint&&(this._videoCameraViewPoint.show=!1),this._editObject&&this._editObject.videoCamera&&(this._createCameraFrustumPrimitive(this._editObject.videoCamera),this._editor.editPosition(this._editObject.videoCamera.positionWC))};Oe.prototype._setPlaneToBackFace=function(){setTimeout(()=>{if(this._cameraFrustumPrimitive&&this.projectionType===0){let e=this._cameraFrustumPrimitive._planePositions,t=[];for(let i=12;i<e.length;i+=3)t.push(Cesium.Cartesian3.fromArray([e[i],e[i+1],e[i+2]]));let n=this._editObject._planes[0];n&&Array.isArray(n._originalPoints)&&(n._originalPoints=t,n._positionDirty=!0)}},100)};Oe.prototype.editVideoCameraOrientation=function(){if(this._editing=!0,this._isEditPosition=!1,this._isEditOrientation=!0,!this._editObject)return;this._editor.hideCoordAxis(),this._videoCameraViewPoint?(this._videoCameraViewPoint.position.setValue(this._editObject._viewPoint),this._videoCameraViewPoint.show||(this._videoCameraViewPoint.show=!0)):this._createVideoCameraViewPoint(),this._editObject._viewPoint&&this._setCameraViewPointPlane(this._editObject._viewPoint);let e=this,t=!1;this._handlerForOrientation.setInputAction(function(s){let a=e.viewer.scene.pick(s.position);a&&a.id===e._videoCameraViewPoint&&(t=!0,e._editor._preventCameraOperation(),e._videoCameraViewPoint.show=!1)},Cesium.ScreenSpaceEventType.LEFT_DOWN);let n=0,i=20,o=e._editObject.videoCamera.positionWC;this._handlerForOrientation.setInputAction(function(s){if(!t||(e._viewPointRay=e.viewer.camera.getPickRay(s.endPosition),!e._viewPointRay))return;let a=Cesium.IntersectionTests.rayPlane(e._viewPointRay,e._viewPointPlane),c=e._videoCameraViewPoint.position._value;a&&(e._videoCameraViewPoint.position.setValue(a.clone()),e._setVideoCameraViewPoint(a),e._setPlaneToBackFace())},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this._handlerForOrientation.setInputAction(function(s){t=!1,e._editor._renewCameraOperation(),e._videoCameraViewPoint.show=!0},Cesium.ScreenSpaceEventType.LEFT_UP);let r=this._editObject.videoCamera;r&&this._createCameraFrustumPrimitive(r)};Oe.prototype._removeVideoCameraOrientationAction=function(){this._handlerForOrientation.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOWN),this._handlerForOrientation.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_UP),this._handlerForOrientation.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE)};Oe.prototype._createCameraFrustumPrimitive=function(e){if(this._cameraFrustumPrimitive)this._cameraFrustumPrimitive._camera=e;else{let t=new Cesium.DebugCameraPrimitive({show:this._showCameraFrustrum,camera:e,depthTest:!1,allowPicking:!1,frustumSplits:[1,200],color:new Cesium.Color(0,1,1,.1)});this._cameraFrustumPrimitive=this.viewer.scene.primitives.add(t)}};Oe.prototype.setFrustumSplits=function(e,t){this._cameraFrustumPrimitive&&this._cameraFrustumPrimitive._frustumSplits.length===2&&(e&&(this._cameraFrustumPrimitive._frustumSplits[0]=e),t&&(this._cameraFrustumPrimitive._frustumSplits[1]=t))};Oe.prototype._createVideoCameraViewPoint=function(){if(!this._editObject)return;let e=this._editObject._viewPoint.clone();e&&(this._videoCameraViewPoint=this.viewer.entities.add({position:e,point:{pixelSize:20,color:Cesium.Color.CYAN,disableDepthTestDistance:1e3}}))};Oe.prototype._setVideoCameraViewPoint=function(e){if(this._editObject&&(this._editObject.setCameraViewPoint(e),this._cameraFrustumPrimitive&&this._cameraFrustumPrimitive._frustumSplits.length===2)){let t=Cesium.Cartesian3.distance(this._cameraFrustumPrimitive._camera.position,e)-10,n=this._cameraFrustumPrimitive._frustumSplits[0];t>n&&this.setFrustumSplits(null,t)}};Oe.prototype.updateByCamera=function(e,t,n,i){this._cameraFrustumPrimitive&&this._cameraFrustumPrimitive._planesPrimitives.length>0&&(this.setPosition(e),this._editObject.videoCamera.setView({orientation:{heading:Cesium.Math.toRadians(t),pitch:Cesium.Math.toRadians(n),roll:Cesium.Math.toRadians(i)}}),this._setPlaneToBackFace())};Oe.prototype._onPositionChanged=function(e){this._editObject.setVideoCameraPosition(e),this._setPlaneToBackFace()};Oe.prototype._changeHeight=function(e,t){let n=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(e);return n.height+=t,this.viewer.scene.globe.ellipsoid.cartographicToCartesian(n,e)};Oe.prototype._setEditObject=function(e){if(e===this._editObject)return;this._editObject&&this._editObject.changed.removeEventListener(this._onEditChanged,this),e.changed.addEventListener(this._onEditChanged,this),this._editObject=e,this._editor._editObject=e,this._editObjectChanged.raiseEvent(e),e.projectionMode!==0&&this.stopProjectionPlane();let t=this;e.cameraPromise.then(function(n){t._editing&&t._createCameraFrustumPrimitive(n),t._isEditPosition?t.editVideoCameraPosition():t._isEditOrientation&&t.editVideoCameraOrientation()})};Oe.prototype._onEditChanged=function(){this._changed.raiseEvent(this._editObject)};Oe.prototype.setEditObjectByName=function(e){let t=this._videoLayer.getProjectionByName(e);if(!t)throw new Error(`\u4E0D\u5B58\u5728\u540D\u79F0\u4E3A \u2018${e}\u2019 \u7684\u89C6\u9891\u6295\u5F71\u5BF9\u8C61\uFF01`);this._setEditObject(t)};Oe.prototype.viewToEditVideo=function(){if(!this._editObject)return;let e=this._editObject;if(e.videoCamera){let t=e.videoCamera.positionWC;this.viewer.camera.setView({destination:t,orientation:{heading:e.videoCamera.heading,pitch:e.videoCamera.pitch}}),e._videoCameraPostureChanged=!0}else{let t=Cesium.Cartographic.fromDegrees(e._originLon,e._originLat,e._originHeight);this.viewer.camera.setView({destination:this.viewer.scene.globe.ellipsoid.cartographicToCartesian(t),orientation:{heading:Cesium.Math.toRadians(e._heading),pitch:Cesium.Math.toRadians(e._pitch)}})}};Oe.prototype.getJson=function(e){return e=Cesium.defaultValue(e,2),JSON.stringify(this._videoLayer.getJsonData(),void 0,e)};Oe.prototype.createConfigurationFile=function(e){e=Cesium.defaultValue(e,{});let t=Cesium.defaultValue(e.fileName,"\u89C6\u9891\u878D\u5408\u914D\u7F6E\u6587\u4EF6"),n=this.getJson(e.space),i=new Blob([n],{type:"text/json"}),o=document.createElement("a");o.download=`${t}.json`,o.href=URL.createObjectURL(i);let r=new MouseEvent("click");o.dispatchEvent(r)};Oe.prototype._createUI=function(e){let t=document.createElement("style");t.textContent=`@import url(${e});`,this._container.ownerDocument.head.appendChild(t),this._styleElement=t;let n=document.createElement("table");n.id="videoFusionEditor",n.innerHTML='        <div class="inlineColumn">\u89C6\u9891\u878D\u5408\u7F16\u8F91\u5668</div>        <!-- \u521D\u59CB\u754C\u9762 -->        <div id="homeUI" class="UI">            <div class="inlineColumn">                <input type="button" id="addVideoLayerBtn" class="menuBtn" value="\u65B0\u5EFA\u89C6\u9891\u56FE\u5C42">                <input type="button" id="loadVideoLayerBtn" class="menuBtn" value="\u52A0\u8F7D\u89C6\u9891\u56FE\u5C42">                <input type="button" id="editVideoLayerBtn" class="menuBtn" value="\u7EE7\u7EED\u7F16\u8F91" style="display: none;">            </div>        </div>        <!-- \u89C6\u9891\u56FE\u5C42\u8F93\u5165\u754C\u9762 -->        <div id="videoLayerUI" style="display: none;"  class="UI">            <div class="inlineColumn">                <div class="columnHead"><span>\u56FE\u5C42\u540D\u79F0</span></div>                <div class="columnBody"><input id="videoLayerName" class="videoInfoInput" placeholder="\u8BF7\u547D\u540D\u8BE5\u56FE\u5C42"></div>            </div>            <div class="inlineColumn">                <div class="columnHead"><span>\u670D\u52A1\u5730\u5740</span></div>                <div class="columnBody"><input id="videoLayerServer" class="videoInfoInput" placeholder="\u8BF7\u8F93\u5165\u89C6\u9891\u670D\u52A1\u5730\u5740"></div>            </div>            <div class="inlineColumn">                <div class="columnHead"><span>\u53EF\u89C6\u8DDD\u79BB</span></div>                <div class="columnBody"><input id="videoLayerVisibleDistance" class="videoInfoInput" value="1000"></div>            </div>            <div class="inlineColumn">                <input type="button" id="createVideoLayer" class="menuBtn confirmBtn" value="\u521B\u5EFA\u89C6\u9891\u56FE\u5C42">            </div>        </div>        <!-- \u52A0\u8F7D\u89C6\u9891\u56FE\u5C42\u754C\u9762 -->    <div id="loadVideoLayerUI" style="display: none;" class="UI">        <div>                <span class="nameForInput">\u914D\u7F6E\u6587\u4EF6\uFF1A</span>                <!-- <input type="file" accept="application/json" id="configFile" style ="width: 80px;height:35px;font-size:15px"> -->        </div>        <div class="inlineColumn">                <input id="configFile" class="videoInfoInput" placeholder="\u8BF7\u8F93\u5165\u914D\u7F6E\u6587\u4EF6\u5730\u5740">        </div>        <div class="inlineColumn">                <input type="button" id="loadVideoLayer" class="menuBtn" value="\u786E\u5B9A">        </div>    </div>        <!-- \u89C6\u9891\u8F93\u5165\u754C\u9762 -->        <div id="videoProjectionUI" style="display: none;" class="UI">            <div id="videoProjectionMenuUI">                <div class="inlineColumn">                    <input id="addVideoModelProjection" class="menuBtn" type="button" value="\u6DFB\u52A0\u6A21\u578B\u6295\u5F71">                    <input id="addVideoPlaneProjection" class="menuBtn disableBtn" type="button" value="\u6DFB\u52A0\u5E73\u9762\u6295\u5F71" disabled>                </div>            </div>            <div id="videoModelProjectionUI"  style="display: none;">                <div class="inlineColumn">                    <div class="columnHead"><span>\u89C6\u9891\u540D\u79F0</span></div>                    <div class="columnBody"><input id="videoName" class="videoInfoInput" placeholder="\u8BF7\u547D\u540D\u8BE5\u89C6\u9891"></div>                </div>                <div class="inlineColumn">                    <div class="columnHead"><span>\u89C6\u9891\u5730\u5740</span></div>                    <div class="columnBody"><input id="videoUrl" class="videoInfoInput" placeholder="\u8BF7\u8F93\u5165\u89C6\u9891\u5730\u5740,\u4E0D\u80FD\u4E3A\u7A7A\uFF01" validationMessage="\u89C6\u9891\u5730\u5740,\u4E0D\u80FD\u4E3A\u7A7A\uFF01" required></div>                </div>                <div class="inlineColumn">                    <input id="createVideoModelProjection" class="menuBtn confirmBtn" type="button" value="&nbsp;\u786E&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u5B9A&nbsp;">                </div>                <div>                    <p class="hint">\u64CD\u4F5C\u63D0\u793A\uFF1A\u70B9\u51FB\u786E\u5B9A\u540E\uFF0C\u5728\u573A\u666F\u4E2D\u5355\u51FB\u9009\u53D6\u89C6\u9891\u76F8\u673A\u4F4D\u7F6E\uFF0C\u968F\u540E\u79FB\u52A8\u9F20\u6807\u8C03\u6574\u59FF\u6001\uFF0C\u518D\u6B21\u5355\u51FB\u786E\u8BA4\u59FF\u6001\u3002</p>                </div>            </div>        </div>        <!-- \u89C6\u9891\u6295\u5F71\u53C2\u6570\u7F16\u8F91\u754C\u9762 -->        <div  id="detailInfo" style="display: none;" class="UI">            <div class="inlineColumn">                <div class="columnHead">\u89C6\u9891\u5217\u8868</div>                <div class="columnBody"><select class="form-control" id="videoname"></select></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u76F8\u673A\u9AD8\u5EA6</div>                <div class="columnBody"><input type="number" id="originHeight"  class="regulatearc" min="0" max="10000" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u89C6\u70B9\u9AD8\u5EA6</div>                <div class="columnBody"><input type="number" id="viewPointHeight"  class="regulatearc" min="0" max="10000" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u7FFB\u6EDA\u89D2\u5EA6</div>                <div class="columnBody"><input type="number" id="roll"  class="regulatearc" min="-180" max="180" value="0"  step="0.1"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="rollv" min="-180" max="180" value="0" step="0.1"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u5F20\u5F00\u89D2\u5EA6</div>                <div class="columnBody"><input type="number" id="fov"  class="regulatearc" min="0" max="180" value="0" step="0.1"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="fovv" min="0" max="180" value="0" step="0.1"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u900F&nbsp;\u660E&nbsp;\u5EA6&nbsp;</div>                <div class="columnBody"><input type="number" id="alpha"  class="regulatearc" min="0" max="1" value="1" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="alphav" min="0" max="1" value="1" step="0.01"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u8FD1\u88C1\u526A\u9762</div>                <div class="columnBody"><input type="number" id="near"  class="regulatearc" min="0.01" max="100" value="1" step="0.1"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="nearv" min="0.01" max="100" value="1" step="0.1"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u8FDC\u88C1\u526A\u9762</div>                <div class="columnBody"><input type="number" id="far"  class="regulatearc" min="1" max="100" value="10" step="0.1"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="farv" min="1" max="100" value="10" step="0.1"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u7578&nbsp;\u53D8&nbsp;k1</div>                <div class="columnBody"><input type="number" id="k1"  class="regulatearc" min="-1" max="1" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="k1v" min="-1" max="1" step="0.01" value="0"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u7578&nbsp;\u53D8&nbsp;k2</div>                <div class="columnBody"><input type="number" id="k2"  class="regulatearc" min="-1" max="1" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="k2v" min="-1" max="1" step="0.01" value="0"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u8272&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u76F8</div>                <div class="columnBody"><input type="number" id="hue"  class="regulatearc" min="-1.0" max="1.0" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="huev" min="-1.0" max="1.0" step="0.01" value="0"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u9971&nbsp;\u548C&nbsp;\u5EA6&nbsp;</div>                <div class="columnBody"><input type="number" id="saturation"  class="regulatearc" min="-1.0" max="1.0" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="saturationv" min="-1.0" max="1.0" step="0.01" value="0"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u660E&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u5EA6</div>                <div class="columnBody"><input type="number" id="val"  class="regulatearc" min="-1.0" max="1.0" value="0" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="rangeInput"><input type="range" class="regulatearcr" id="valv" min="-1.0" max="1.0" step="0.01" value="0"/></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u8DDD\u79BB\u8BEF\u5DEE</div>                <div class="columnBody"><input type="number" id="distanceError"  class="regulatearc" min="0.01" max="1" value="0.1" step="0.01"></div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u5DE6\u4E0A\u88C1\u526A</div>                <div class="columnBody">                    <input type="range" class="regulatearcr" id="leftUpX" min="0" max="1" step="0.01" value="0"/>                    <input type="range" class="regulatearcr" id="leftUpY" min="0" max="1" step="0.01" value="1"/>                </div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u5DE6\u4E0B\u88C1\u526A</div>                <div class="columnBody">                    <input type="range" class="regulatearcr" id="leftDownX" min="0" max="1" step="0.01" value="0"/>                    <input type="range" class="regulatearcr" id="leftDownY" min="0" max="1" step="0.01" value="0"/>                </div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u53F3\u4E0A\u88C1\u526A</div>                <div class="columnBody">                    <input type="range" class="regulatearcr" id="rightUpX" min="0" max="1" step="0.01" value="1"/>                    <input type="range" class="regulatearcr" id="rightUpY" min="0" max="1" step="0.01" value="1"/>                </div>            </div>            <div class="inlineColumn">                <div class="columnHead">\u53F3\u4E0B\u88C1\u526A</div>                <div class="columnBody">                    <input type="range" class="regulatearcr" id="rightDownX" min="0" max="1" step="0.01" value="1"/>                    <input type="range" class="regulatearcr" id="rightDownY" min="0" max="1" step="0.01" value="0"/>                </div>            </div>            <div class="inlineColumn">                <div>                    <label class="checkboxText">                        \u6A21\u578B\u906E\u6321<input type="checkbox" id="depthType" checked/>                    </label>                </div>                <div>                    <label class="checkboxText">                        \u663E\u793A\u8F85\u52A9\u7EBF<input type="checkbox" id="showFrustrum" checked/>                    </label>                </div>            </div>            <div class="inlineColumn">                <div colspan="3" class="inlineColumn">                    <input type="button" id="addVideo" class="menuBtn" value="\u6DFB\u52A0\u89C6\u9891">                    <input type="button" id="editPosition" class="menuBtn" value="\u7F16\u8F91\u4F4D\u7F6E">                    <input type="button" id="locationBtn" class="menuBtn" value="\u5230&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u8BBF">                </div>            </div>            <div class="inlineColumn">                <div colspan="3" class="inlineColumn">                    <input type="button" id="delectVideo" class="menuBtn" value="\u5220\u9664\u89C6\u9891">                    <input type="button" id="editOrientation" class="menuBtn"  value="\u7F16\u8F91\u89C6\u70B9">                    <input type="button" id="createJson" class="menuBtn" value="\u5BFC\u51FA\u914D\u7F6E">                    <!-- <input type="button" id="stopEdit" class="menuBtn" value="\u7ED3\u675F\u7F16\u8F91"> -->                </div>            </div>            <div class="inlineColumn">                <div colspan="3" class="inlineColumn">                    <input type="button" id="toMainCamera" class="menuBtn" value="\u5230\u4E3B\u76F8\u673A">                    <input type="button" id="stopEdit" class="menuBtn" value="\u7ED3\u675F\u7F16\u8F91">                </div>            </div>        </div>    ',n.style.top=this.top,n.style.left=this.left,this._container.appendChild(n),this._UIElement=n;let i=this;this.addedVideo.addEventListener(function(Ne){let zn=new Option(Ne.name);h.add(zn),h.selectedIndex=h.length-1,fi(Ne)}),this.changed.addEventListener(function(Ne){fi(Ne)}),this.editObjectChanged.addEventListener(function(Ne){fi(Ne)});var o=document.getElementById("homeUI"),r=document.getElementById("videoLayerUI"),s=document.getElementById("loadVideoLayerUI"),a=document.getElementById("videoProjectionUI"),c=document.getElementById("videoProjectionMenuUI"),l=document.getElementById("videoModelProjectionUI"),d=document.getElementById("detailInfo"),h=document.getElementById("videoname"),g=document.getElementById("addVideoLayerBtn"),C=document.getElementById("loadVideoLayerBtn"),b=document.getElementById("editVideoLayerBtn"),w=document.getElementById("stopEdit"),R=document.getElementById("addVideo"),D=document.getElementById("delectVideo"),M=document.getElementById("editPosition"),z=document.getElementById("editOrientation"),U=document.getElementById("createVideoLayer"),Y=document.getElementById("loadVideoLayer"),m=document.getElementById("configFile"),Q=document.getElementById("addVideoModelProjection"),q=document.getElementById("addVideoPlaneProjection"),Z=document.getElementById("videoName"),H=document.getElementById("videoUrl"),K=document.getElementById("createVideoModelProjection"),v=document.getElementById("locationBtn"),S=document.getElementById("createJson"),I=document.getElementById("toMainCamera");function F(){o.style.display="block",r.style.display="none",s.style.display="none",a.style.display="none",d.style.display="none",i._videoLayer&&(b.style.display="block")}function X(){o.style.display="none",r.style.display="block",s.style.display="none",a.style.display="none",d.style.display="none"}function ie(){o.style.display="none",r.style.display="none",s.style.display="block",a.style.display="none",d.style.display="none"}function j(){o.style.display="none",r.style.display="none",s.style.display="none",a.style.display="block",c.style.display="block",l.style.display="none",d.style.display="none"}function le(){o.style.display="none",r.style.display="none",s.style.display="none",a.style.display="none",d.style.display="block"}g.onclick=function(){X()},C.onclick=function(){ie()},b.onclick=function(){le()},U.onclick=function(){j();let Ne=document.getElementById("videoLayerName").value,zn=document.getElementById("videoLayerServer").value,qn=Number(document.getElementById("videoLayerVisibleDistance").value);i.createVideoLayer({name:Ne,wsServer:zn,visibleDistance:qn})},Y.onclick=function(){let Ne=m.value;if(Ne===""){m.placeholder="\u914D\u7F6E\u6587\u4EF6\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A\uFF01";return}i.loadVideoLayer({url:Ne}),le()},Q.onclick=function(){c.style.display="none",l.style.display="block"},q.onclick=function(){},K.onclick=function(){let Ne=H.value;if(Ne===""){H.placeholder="\u89C6\u9891\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A\uFF01";return}i.createVideoModelProjection({name:Z.value,url:Ne,farClip:30}),le()},h.onchange=function(){i.setEditObjectByName(this.value)},R.onclick=function(){j()},M.onclick=function(){i.editVideoCameraPosition()},z.onclick=function(){i.editVideoCameraOrientation()},v.onclick=function(){i.viewToEditVideo()},S.onclick=function(){i.createConfigurationFile({fileName:"\u8D35\u9633\u56FD\u9645\u673A\u573A\u89C6\u9891\u878D\u5408"})},w.onclick=function(){i.stopEdit(),F()},D.onclick=function(){layui.use(["layer"],function(){let Ne=layui.layer;Ne.confirm(`\u60A8\u786E\u5B9A\u5220\u9664\u201C${i.editObject.name}\u201D\u5417\uFF1F`,{title:"\u89C6\u9891\u878D\u5408\u7F16\u8F91\u5668"},function(zn){Ne.close(zn),i.remove();let qn=h.selectedIndex;h.options.remove(qn),h.length!==0&&(h.length>qn?h.selectedIndex=qn:h.selectedIndex=qn-1,i.setEditObjectByName(h.value))})})},I.onclick=function(){i.setToMainCamera()};let be=document.getElementById("originHeight"),Be=document.getElementById("viewPointHeight"),Ue=document.getElementById("roll"),$e=document.getElementById("rollv"),Xe=document.getElementById("fov"),ht=document.getElementById("fovv"),_t=document.getElementById("near"),Ct=document.getElementById("nearv"),mt=document.getElementById("far"),ot=document.getElementById("farv"),Ye=document.getElementById("k1"),Mt=document.getElementById("k1v"),Xt=document.getElementById("k2"),gn=document.getElementById("k2v"),ui=document.getElementById("alpha"),Wo=document.getElementById("alphav"),Xn=document.getElementById("hue"),$n=document.getElementById("huev"),Yi=document.getElementById("saturation"),Ba=document.getElementById("saturationv"),Zi=document.getElementById("val"),Wn=document.getElementById("valv"),_o=document.getElementById("distanceError"),xi=document.getElementById("leftUpX"),De=document.getElementById("leftUpY"),$t=document.getElementById("leftDownX"),xr=document.getElementById("leftDownY"),Ar=document.getElementById("rightUpX"),Rr=document.getElementById("rightUpY"),qo=document.getElementById("rightDownX"),Yo=document.getElementById("rightDownY"),Xi=document.getElementById("depthType"),li=document.getElementById("showFrustrum");be.oninput=function(){i.setCameraHeight(this.valueAsNumber)},Be.oninput=function(){i.setCameraViewPointHeight(this.valueAsNumber)},Ue.oninput=function(){let Ne=this.valueAsNumber;$e.value=Ne,Ne=Or(Ne),i.setCameraRoll(Ne)},$e.oninput=function(){Ue.value=this.valueAsNumber;let Ne=Or(this.valueAsNumber);i.setCameraRoll(Ne)},Xe.oninput=function(){ht.value=this.value,i.setFov(this.valueAsNumber)},ht.oninput=function(){Xe.value=this.value,i.setFov(this.valueAsNumber)},_t.oninput=function(){Ct.value=this.value,i.setNear(this.valueAsNumber)},Ct.oninput=function(){_t.value=this.value,i.setNear(this.valueAsNumber)},mt.oninput=function(){ot.value=this.value,i.setFar(this.valueAsNumber)},ot.oninput=function(){mt.value=this.value,i.setFar(this.valueAsNumber)},Ye.oninput=function(){Mt.value=this.value,i.setDistortionK1(this.valueAsNumber)},Mt.oninput=function(){Ye.value=this.value,i.setDistortionK1(this.valueAsNumber)},Xt.oninput=function(){gn.value=this.value,i.setDistortionK2(this.valueAsNumber)},gn.oninput=function(){Xt.value=this.value,i.setDistortionK2(this.valueAsNumber)},ui.oninput=function(){Wo.value=this.value,i.setAlpha(this.valueAsNumber)},Wo.oninput=function(){ui.value=this.value,i.setAlpha(this.valueAsNumber)},Xn.oninput=function(){$n.value=this.value,i.setHSV(this.valueAsNumber,Yi.valueAsNumber,Zi.valueAsNumber)},$n.oninput=function(){Xn.value=this.value,i.setHSV(this.valueAsNumber,Yi.valueAsNumber,Zi.valueAsNumber)},Yi.oninput=function(){Ba.value=this.value,i.setHSV(Xn.valueAsNumber,this.valueAsNumber,Zi.valueAsNumber)},Ba.oninput=function(){Yi.value=this.value,i.setHSV(Xn.valueAsNumber,this.valueAsNumber,Zi.valueAsNumber)},Zi.oninput=function(){Wn.value=this.value,i.setHSV(Xn.valueAsNumber,Yi.valueAsNumber,this.valueAsNumber)},Wn.oninput=function(){Zi.value=this.value,i.setHSV(Xn.valueAsNumber,Yi.valueAsNumber,this.valueAsNumber)},_o.oninput=function(){i.setDistanceError(this.valueAsNumber)},xi.oninput=function(){i.setVideoLeftUpClipPoint(xi.valueAsNumber,De.valueAsNumber)},De.oninput=function(){i.setVideoLeftUpClipPoint(xi.valueAsNumber,De.valueAsNumber)},$t.oninput=function(){i.setVideoLeftDownClipPoint($t.valueAsNumber,xr.valueAsNumber)},xr.oninput=function(){i.setVideoLeftDownClipPoint($t.valueAsNumber,xr.valueAsNumber)},Ar.oninput=function(){i.setVideoRightUpClipPoint(Ar.valueAsNumber,Rr.valueAsNumber)},Rr.oninput=function(){i.setVideoRightUpClipPoint(Ar.valueAsNumber,Rr.valueAsNumber)},qo.oninput=function(){i.setVideoRightDownClipPoint(qo.valueAsNumber,Yo.valueAsNumber)},Yo.oninput=function(){i.setVideoRightDownClipPoint(qo.valueAsNumber,Yo.valueAsNumber)},Xi.onchange=function(){this.checked?i.setVideoDepthType(3):i.setVideoDepthType(0)},li.onchange=function(){i.setVideoCameraFrustumVisibility(this.checked)};function fi(Ne){be.value=Ne._originHeight.toFixed(2),Be.value=i.getCameraViewPointHeight().toFixed(2),Ue.value=$e.value=Or(Ne._roll.toFixed(1)),Xe.value=ht.value=Ne._fov,_t.value=Ct.value=Ne._nearClip,mt.value=ot.value=Ne._farClip,Ye.value=Mt.value=Ne._distortion.x,Xt.value=gn.value=Ne._distortion.y,ui.value=Wo.value=Ne.videoAlpha;let zn=Ne.videoHsv;Xn.value=zn.x,Yi.value=zn.y,Zi.value=zn.z,_o.value=Ne._distanceError,xi.value=Ne._videoTextureClipLUPos.x,De.value=Ne._videoTextureClipLUPos.y,$t.value=Ne._videoTextureClipLBPos.x,xr.value=Ne._videoTextureClipLBPos.y,Ar.value=Ne._videoTextureClipRUPos.x,Rr.value=Ne._videoTextureClipRUPos.y,qo.value=Ne._videoTextureClipRBPos.x,Yo.value=Ne._videoTextureClipRBPos.y,Ne._depthType===0?Xi.checked=!1:Ne._depthType===3&&(Xi.checked=!0)}let $i=document.getElementsByClassName("menuBtn");for(let Ne=0;Ne<$i.length;++Ne){let zn=$i[Ne];zn.onmouseenter=ku,zn.onmouseout=Pr}function ku(){this.style.backgroundColor="#a6c9e7"}function Pr(){this.style.backgroundColor=""}function Or(Ne){return Ne<0?Ne+=360:Ne>180&&(Ne-=360),Ne}};Oe.prototype.showUI=function(){if(!this._UIElement)throw new Error("\u89C6\u9891\u878D\u5408\u7F16\u8F91\u5668\u754C\u9762\u672A\u521B\u5EFA\uFF01");this._UIElement.style.display="block"};Oe.prototype.hideUI=function(){if(!this._UIElement)throw new Error("\u89C6\u9891\u878D\u5408\u7F16\u8F91\u5668\u754C\u9762\u672A\u521B\u5EFA\uFF01");this._UIElement.style.display="none"};Oe.prototype.setPosition=function(e){e&&(this._editObject.setVideoCameraPosition(e.clone(),!1),this._editor.setPosition(e.clone()),this._setPlaneToBackFace())};Oe.prototype.setOrientation=function(e,t,n){let i=this._editObject.videoCamera;i&&(this._editObject._roll=n,this._editObject._heading=e,this._editObject._pitch=t,i.setView({orientation:{heading:Cesium.Math.toRadians(e),pitch:Cesium.Math.toRadians(t),roll:Cesium.Math.toRadians(n)}}),this._setPlaneToBackFace())};Oe.prototype.setFov=function(e){this._editObject.setCameraFov(e),this._setPlaneToBackFace()};Oe.prototype.setAlpha=function(e){this._editObject.videoAlpha=e};Oe.prototype.setHSV=function(e,t,n){let i=this._editObject.videoHsv;i.x=e,i.y=t,i.z=n};Oe.prototype.setNear=function(e){e<=0||(this._editObject instanceof Mo&&this._editObject.setNearClip(e),this._setPlaneToBackFace())};Oe.prototype.setFar=function(e){e<=0||(this._editObject instanceof Mo&&this._editObject.setFarClip(e),this._setPlaneToBackFace())};Oe.prototype.setDistortion=function(e){this._editObject.setDistortion(e)};Oe.prototype.setDistortionK1=function(e){this._editObject._distortion.x=e};Oe.prototype.setDistortionK2=function(e){this._editObject._distortion.y=e};Oe.prototype.setCameraRoll=function(e){let t=this._editObject.videoCamera;t&&(this._editObject._roll=e,t.setView({orientation:{heading:t.heading,pitch:t.pitch,roll:Cesium.Math.toRadians(e)}}),this._setPlaneToBackFace())};Oe.prototype.setCameraHeight=function(e){let t=this._editor._positionPrimitive.position._value,n=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(t);n&&(n.height=e,this.viewer.scene.globe.ellipsoid.cartographicToCartesian(n,t),this._editObject.setVideoCameraPosition(t.clone(),!0),this._setPlaneToBackFace())};Oe.prototype.setCameraViewPointHeight=function(e){let t=this._editObject._viewPoint,n=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(t);n.height=e,this.viewer.scene.globe.ellipsoid.cartographicToCartesian(n,t),this._setCameraViewPointPlane(t),this._editObject.setCameraViewPoint(t,!1),this._videoCameraViewPoint&&(this._videoCameraViewPoint.position.setValue(t.clone()),this._setPlaneToBackFace())};Oe.prototype.getCameraViewPointHeight=function(){return this._editObject&&this._editObject._viewPoint?this.viewer.scene.globe.ellipsoid.cartesianToCartographic(this._editObject._viewPoint).height:0};Oe.prototype._setCameraViewPointPlane=function(e){let t=Cesium.Cartesian3.normalize(e,new Cesium.Cartesian3),n=Cesium.Cartesian3.magnitude(e);n=-n,this._viewPointPlane?(this._viewPointPlane.normal=t,this._viewPointPlane.distance=n):this._viewPointPlane=new Cesium.Plane(t,n)};Oe.prototype.setVideoLeftUpClipPoint=function(e,t){this._editObject._videoTextureClipLUPos.x=e,this._editObject._videoTextureClipLUPos.y=t};Oe.prototype.setVideoLeftDownClipPoint=function(e,t){this._editObject._videoTextureClipLBPos.x=e,this._editObject._videoTextureClipLBPos.y=t};Oe.prototype.setVideoRightUpClipPoint=function(e,t){this._editObject._videoTextureClipRUPos.x=e,this._editObject._videoTextureClipRUPos.y=t};Oe.prototype.setVideoRightDownClipPoint=function(e,t){this._editObject._videoTextureClipRBPos.x=e,this._editObject._videoTextureClipRBPos.y=t};Oe.prototype.setVideoDepthType=function(e){this._editObject&&(this._editObject._depthType=e)};Oe.prototype.setVideoCameraFrustumVisibility=function(e){this._showCameraFrustrum=e,this._cameraFrustumPrimitive&&(e?this._cameraFrustumPrimitive._color=new Cesium.Color(0,1,1,.1):this._cameraFrustumPrimitive._color=new Cesium.Color(0,1,1,0))};Oe.prototype.setToMainCamera=function(){this._editObject&&this._editObject.videoCamera&&this._editObject.setVideoCameraPosition(this.viewer.camera.positionWC)};Oe.prototype.setDistanceError=function(e){this._editObject&&(this._editObject.distanceError=e)};Oe.prototype.setVisibleDistance=function(e){this._editObject&&(this._editObject.visibleDistance=e)};Oe.prototype.setProtocol=function(e){!this._editObject&&this._editObject._wsplayer||(this._editObject._wsplayer.protocol=e)};Oe.prototype.destroy=function(){};function WO(e){return typeof e=="string"?e=document.getElementById(e):e===void 0&&(e=document.body),e}var qO=Oe;globalThis.CESIUM_VERSION="1.105.2";export{Bs as DahuaWSPlayer,uf as DahuaWSPlayerManager,th as EV_Editor,ir as EV_ProjectionPlane,or as EV_VideoFusion,qO as EV_VideoFusionEditor,Pc as EV_VideoLayer,Mo as EV_VideoProjection,hf as EV_VideoProjectionFS,pf as EV_VideoProjectionManager,ff as EV_VideoProjectionPlane,Ow as EV_VideoSynchronizerEx,to as EV_WSPlayer,Dw as VideoFusionMixin};
